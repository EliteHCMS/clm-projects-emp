import{l as M,bV as V,_ as D,B as o,as as m,bt as a,d as t,cW as U,E as n,ae as c,C as u,at as y,cY as j,bY as b,cV as O,r as k,c as Q,H as h,az as R,bW as F,w as I,b7 as q,bS as E,bv as P,F as Y,b6 as G,I as J}from"./index.1bdfb1af.js";import{a as K,Q as B}from"./QHeader.e6a88b71.js";import{Q as X}from"./QMenu.92ffa49f.js";import{Q as N}from"./QToolbar.7de023f9.js";import{Q as Z}from"./QImg.c7a2e95f.js";import{Q as x}from"./QList.756f4e56.js";import{a as ee,Q as te}from"./QDrawer.5d68090f.js";import{a as oe,Q as se}from"./QLayout.b34bded4.js";import{C as ae}from"./ClosePopup.edec0437.js";import{u as re}from"./use-quasar.04742e8f.js";import{u as ne}from"./useQuerySaver.d29ff9ee.js";import{u as le,b as ie,q as me}from"./app.b866ce7a.js";import{u as T}from"./dataStore.045be7a8.js";import{_ as ce}from"./version.f0d3b635.js";import{M as ue}from"./MenuNav.da8b163f.js";import{_ as pe}from"./languageSelector.2f16c0e4.js";import"./dayjs.d9609b5e.js";import{Q as de}from"./QSpinnerBall.1f629d62.js";import{a as ye}from"./syncEmployeeWithWorkday.d9e51e55.js";import"./QResizeObserver.e82f054c.js";import"./position-engine.f90a4f55.js";import"./selection.424f2d7d.js";import"./TouchPan.7148bb93.js";import"./touch.3df10340.js";import"./_commonjsHelpers.a26ce4be.js";import"./localForage.34b90606.js";import"./index.04bc0a32.js";import"./i18n.8bfbf2a5.js";import"./QSelect.bc92d132.js";import"./QChip.4ce28263.js";import"./rtl.b51694b1.js";import"./QBadge.37c64029.js";import"./MenuSubLink.70e6d3a7.js";import"./QSlideTransition.0015346e.js";const ge=M({props:{employee:Object,mini:Boolean},setup(e){const s=V();return T(),{props:e,goToTermination:()=>{s.push({name:"ee-termination"})}}}}),fe={class:"text-h5 text-white q-mb-sm"},ve={key:0,class:"text-body1 text-white q-mb-sm"},ke={class:"text-body1 text-white"};function we(e,s,p,g,r,d){return o(),m(O,{class:"bg-accent q-my-lg q-pt-none",flat:"",square:""},{default:a(()=>[t(U,{class:"text-center q-pb-xs"},{default:a(()=>[n("div",fe,c(e.employee[24]),1),e.employee[378]!==""?(o(),u("div",ve,"ID: "+c(e.employee[378]),1)):y("",!0),n("div",ke,c(e.employee[25]),1)]),_:1}),e.$can("manage","employees")?(o(),m(j,{key:0,class:"q-pb-xs",align:"center"},{default:a(()=>[e.$can("create","releases")&&e.$route.name!=="ee-termination"&&e.$route.name!=="view-ee-release"&&!e.employee[581]&&e.employee[408]==="Active"&&e.employee[79]===7?(o(),m(b,{key:0,label:"Release",color:"primary",dense:"",onClick:e.goToTermination},null,8,["onClick"])):y("",!0)]),_:1})):y("",!0)]),_:1})}var he=D(ge,[["render",we]]);const be=M({name:"Last Workday Sync",props:{employee:Object},setup(e){const s=k(!0),{setWorkdayData:p,updateViewedEmployees:g,getEmployee:r}=T(),d=async i=>{s.value=!0;const{clm:f,sync:w}=await ye({clm:e.employee},i);w&&(p({id:f[3],data:w}),g({id:f[3],dataset:"workday",data:w})),s.value=!1},l=Q(()=>r(e.employee[3])&&r(e.employee[3]).workday?r(e.employee[3]).workday:null),$=Q(()=>{if(l.value){const{employmentData:i}=l.value;return i&&i.workerStatus&&i.workerStatus.active?"Active":"Terminated"}else return"N/A"});return d(!1),{syncing:s,checkWorkday:d,workday:l,workerStatus:$}}}),$e={key:1};function qe(e,s,p,g,r,d){return o(),u("div",null,[e.syncing?(o(),u("div",{key:0,class:h(["text-dark q-mr-sm",e.$q.screen.gt.lg?"text-body2":"text-caption"])},[R(" Checking Workday Now... "),t(de,{class:"q-ml-sm",color:"primary",size:e.$q.screen.gt.lg?"3em":"2em"},null,8,["size"])],2)):y("",!0),e.workday&&!e.syncing?(o(),u("div",$e,[e.workday[22]?(o(),u("div",{key:0,class:h(["text-primary",e.$q.screen.gt.lg?"text-body2":"text-caption"])},"No Data in Workday",2)):(o(),u("div",{key:1,class:h(e.$q.screen.gt.lg?"text-body2":"text-caption")},[n("span",{class:h(["text-dark q-mr-sm",e.$q.screen.gt.lg?"text-body2":"text-caption"])},"Worker Status:",2),n("span",{class:h(["text-primary text-weight-bold",e.$q.screen.gt.lg?"text-body2":"text-caption"])},c(e.workerStatus),3)],2)),n("div",null,[n("span",{class:h(["text-dark q-mr-sm",e.$q.screen.gt.lg?"text-body2":"text-caption"])},"Last Check in Workday:",2),n("span",{class:h(["text-weight-light text-secondary text-italic",e.$q.screen.gt.lg?"text-body2":"text-caption"])},c(e.$dayjs(e.workday[1].$d).fromNow()),3),t(b,{color:"accent",label:"Check Now",flat:"",icon:"refresh",size:"sm",onClick:s[0]||(s[0]=l=>e.checkWorkday(!0))})])])):y("",!0)])}var Ce=D(be,[["render",qe]]);const Se=M({name:"View Employee",components:{MenuNav:ue,version:ce,languageSelector:pe,BasicEmployeeCard:he,LastWorkdaySync:Ce},setup(){const e=k(null),s=k(!1),p=re(),g=k(!1),r=k(!1),d=k(!1),l=k(!1),$=V(),i=F(),f=le(),{getUserType:w}=f,{toolbarTitle:S,viewEmployeeMenu:v}=ie(),{setEmployees:H,getEmployee:L,updateViewedEmployees:Oe}=T(),W=Q(()=>L(i.params.id)),z=async()=>{const{state:C}=$.options.history;e.value=C.back,p.loading.show();const{data:_}=await me.fetchFromHiringApp({fields:[ne({type:"employee",query:"",id:i.params.id})]},{action:"read",type:"employee"});H({id:_[3],data:_}),p.loading.hide()},A=async()=>{f.logout().then(()=>{$.replace({name:"login"})})};return z(),I(W,(C,_)=>{}),{tab:k("mails"),fab:s,userStore:f,leftDrawerOpen:g,rightDrawerOpen:d,miniState:r,miniHover:l,miniMouseOver(){r.value===!0&&(l.value=!1)},miniMouseOut(){r.value===!0&&(l.value=!0)},toggleLeftDrawer(){p.screen.gt.sm?(r.value=!r.value,r.value===!0&&(l.value=!0)):g.value=!g.value},toggleRightDrawer(){d.value=!d.value},drawerClick(C){r.value&&(r.value=!1,C.stopPropagation())},logout:A,toolbarTitle:S,viewEmployeeMenu:v,employee:W,getUserType:w,opener:e,closeWindow(){window.open("","_self").close()}}}}),_e={key:0,class:"q-mr-sm q-ml-sm",src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo-white.png",alt:"BrandSafway Logo",height:"25"},Qe={key:0},Me={key:1},De={class:"q-gutter-sm row items-center no-wrap"},Te={class:"row no-wrap q-pa-md"},We={class:"column items-center"},Ee={class:"text-subtitle1 q-mt-md q-mb-xs"},Be={class:"row items-start"},Ne={class:"col-8"},Ve={class:"col-4 text-right"};function Ue(e,s,p,g,r,d){const l=q("languageSelector"),$=q("basic-employee-card"),i=q("MenuNav"),f=q("last-workday-sync"),w=q("router-view"),S=q("version");return o(),m(se,{view:"hHh lpR fFf"},{default:a(()=>[t(K,{elevated:""},{default:a(()=>[t(N,{style:{height:"62px"}},{default:a(()=>[t(b,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),e.$q.screen.gt.sm?(o(),u("img",_e)):y("",!0),t(B,null,{default:a(()=>[e.$q.screen.lt.sm?(o(),u("span",Qe)):(o(),u("span",Me,c(e.toolbarTitle),1))]),_:1}),n("div",De,[t(l,{dense:"",borderless:"",class:"lang-white"}),t(b,{flat:"",dense:"",color:"white"},{default:a(()=>[n("div",null,c(e.userStore.getUser[35])+" "+c(e.userStore.getUser[37]),1),t(E,{right:"",size:"2.2em",name:"account_circle"}),t(X,null,{default:a(()=>[n("div",Te,[n("div",We,[t(E,{right:"",size:"72px",name:"account_circle",class:"q-mr-md"}),n("div",Ee,c(e.userStore.getUser[35])+" "+c(e.userStore.getUser[37]),1),P(t(b,{color:"primary",label:e.$t("logout"),push:"",size:"sm",onClick:e.logout},null,8,["label","onClick"]),[[ae]])])])]),_:1})]),_:1})])]),_:1})]),_:1}),t(ee,{modelValue:e.leftDrawerOpen,"onUpdate:modelValue":s[0]||(s[0]=v=>e.leftDrawerOpen=v),side:"left","show-if-above":"",bordered:"",mini:e.miniState&&e.miniHover,onMouseover:e.miniMouseOver,onMouseout:e.miniMouseOut,onClickCapture:e.drawerClick,class:"text-primary bg-accent print-hide"},{default:a(()=>[t(te,{class:"fit"},{default:a(()=>[e.$q.screen.lt.sm?(o(),m(N,{key:0,class:"bg-white",style:{height:"64px"}},{default:a(()=>[t(B,{class:"items-center"},{default:a(()=>[t(Z,{src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo.svg",style:{"max-width":"245px"},fit:"center",class:"q-ml-md"})]),_:1})]),_:1})):y("",!0),e.employee?(o(),m($,{key:1,employee:e.employee,mini:e.miniState},null,8,["employee","mini"])):y("",!0),t(x,{class:"q-mt-sm"},{default:a(()=>[(o(!0),u(Y,null,G(e.viewEmployeeMenu,v=>(o(),m(i,J({key:v.title},v,{mini:e.miniState}),null,16,["mini"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue","mini","onMouseover","onMouseout","onClickCapture"]),t(oe,null,{default:a(()=>[t(O,{class:"print-hide",flat:""},{default:a(()=>[t(U,{class:"q-pb-xs q-pt-sm"},{default:a(()=>[n("div",Be,[n("div",Ne,[e.employee?(o(),m(f,{key:0,employee:e.employee},null,8,["employee"])):y("",!0)]),n("div",Ve,[e.$q.screen.gt.sm?(o(),m(b,{key:0,icon:"close",label:"Close",color:"dark",onClick:s[1]||(s[1]=v=>e.getUserType==="QuickBase User"?e.closeWindow():e.$router.go(-1))})):(o(),m(b,{key:1,icon:"close",round:"",color:"dark",onClick:s[2]||(s[2]=v=>e.getUserType==="QuickBase User"?e.closeWindow():e.$router.go(-1))}))])])]),_:1})]),_:1}),t(w)]),_:1}),t(S)]),_:1})}var kt=D(Se,[["render",Ue]]);export{kt as default};
