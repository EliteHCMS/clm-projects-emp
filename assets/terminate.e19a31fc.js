var ke=Object.defineProperty,Ne=Object.defineProperties;var $e=Object.getOwnPropertyDescriptors;var ie=Object.getOwnPropertySymbols;var Oe=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable;var re=(e,t,s)=>t in e?ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,B=(e,t)=>{for(var s in t||(t={}))Oe.call(t,s)&&re(e,s,t[s]);if(ie)for(var s of ie(t))Ee.call(t,s)&&re(e,s,t[s]);return e},G=(e,t)=>Ne(e,$e(t));import{r as M,c as S,g as ye,cI as je,cb as ge,cF as Qe,h as L,bP as ze,cJ as Ie,cN as Te,cK as Pe,cM as Be,cO as Le,dp as Me,cP as ue,dq as Xe,d4 as Ke,cL as He,cB as Je,k as Ve,bL as he,w as Se,_ as qe,A as E,B as Q,d as l,bi as b,D as u,ab as H,bJ as te,bH as Z,au as ae,cx as de,bK as me,bO as x,F as ce,aY as We,ao as we,cz as Fe,cw as Ce,dr as v,cy as Ye,bF as Ge,bM as Ze,aZ as xe,an as pe}from"./index.3bd8bff3.js";import{Q as _e}from"./QPage.85fd4be8.js";import{u as Ae}from"./use-quasar.94e7f076.js";import{u as Re,a as Ue}from"./dataStore.d626384f.js";import{u as et,q as z}from"./quickbase.7e9e049d.js";import{Q as le}from"./QSelect.8411b3cd.js";import{Q as tt}from"./QChip.fff575e1.js";import{Q as at}from"./QItemLabel.349706c0.js";import{Q as lt}from"./QList.3180ed89.js";import{Q as ot}from"./QForm.3d814e67.js";import{a as oe,f as nt,c as fe,e as _,b as st,u as O}from"./array.836c569d.js";import{dayjs as ne}from"./dayjs.238de433.js";import"./localForage.cfd98bcf.js";import"./_commonjsHelpers.a26ce4be.js";import"./index.7dbe61ef.js";import"./i18n.475c5698.js";import"./api.a28dd52c.js";import"./QMenu.ade1759f.js";import"./position-engine.6bd25d23.js";import"./selection.d55c238c.js";import"./rtl.cf9bbe47.js";function J(e,t,s,p){const i=[];return e.forEach(d=>{p(d)===!0?i.push(d):t.push({failedPropValidation:s,file:d})}),i}function ee(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),ge(e)}const it={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},rt=["rejected"];function ut({editable:e,dnd:t,getFileInput:s,addFilesToQueue:p}){const{props:i,emit:d,proxy:a}=ye(),q=M(null),h=S(()=>i.accept!==void 0?i.accept.split(",").map(n=>(n=n.trim(),n==="*"?"*/":(n.endsWith("/*")&&(n=n.slice(0,n.length-1)),n.toUpperCase()))):null),D=S(()=>parseInt(i.maxFiles,10)),A=S(()=>parseInt(i.maxTotalSize,10));function g(n){if(e.value)if(n!==Object(n)&&(n={target:null}),n.target!==null&&n.target.matches('input[type="file"]')===!0)n.clientX===0&&n.clientY===0&&je(n);else{const U=s();U&&U!==n.target&&U.click(n)}}function C(n){e.value&&n&&p(null,n)}function k(n,U,I,T){let m=Array.from(U||n.target.files);const R=[],$=()=>{R.length>0&&d("rejected",R)};if(i.accept!==void 0&&h.value.indexOf("*/")===-1&&(m=J(m,R,"accept",f=>h.value.some(w=>f.type.toUpperCase().startsWith(w)||f.name.toUpperCase().endsWith(w))),m.length===0))return $();if(i.maxFileSize!==void 0){const f=parseInt(i.maxFileSize,10);if(m=J(m,R,"max-file-size",w=>w.size<=f),m.length===0)return $()}if(i.multiple!==!0&&m.length>0&&(m=[m[0]]),m.forEach(f=>{f.__key=f.webkitRelativePath+f.lastModified+f.name+f.size}),T===!0){const f=I.map(w=>w.__key);m=J(m,R,"duplicate",w=>f.includes(w.__key)===!1)}if(m.length===0)return $();if(i.maxTotalSize!==void 0){let f=T===!0?I.reduce((w,X)=>w+X.size,0):0;if(m=J(m,R,"max-total-size",w=>(f+=w.size,f<=A.value)),m.length===0)return $()}if(typeof i.filter=="function"){const f=i.filter(m);m=J(m,R,"filter",w=>f.includes(w))}if(i.maxFiles!==void 0){let f=T===!0?I.length:0;if(m=J(m,R,"max-files",()=>(f++,f<=D.value)),m.length===0)return $()}if($(),m.length>0)return m}function N(n){ee(n),t.value!==!0&&(t.value=!0)}function r(n){ge(n),(n.relatedTarget!==null||Qe.is.safari!==!0?n.relatedTarget!==q.value:document.elementsFromPoint(n.clientX,n.clientY).includes(q.value)===!1)===!0&&(t.value=!1)}function V(n){ee(n);const U=n.dataTransfer.files;U.length>0&&p(null,U),t.value=!1}function j(n){if(t.value===!0)return L("div",{ref:q,class:`q-${n}__dnd absolute-full`,onDragenter:ee,onDragover:ee,onDragleave:r,onDrop:V})}return Object.assign(a,{pickFiles:g,addFiles:C}),{pickFiles:g,addFiles:C,onDragover:N,onDragleave:r,processFiles:k,getDndNode:j,maxFilesNumber:D,maxTotalSizeNumber:A}}var dt=ze({name:"QFile",inheritAttrs:!1,props:G(B(B(B({},Ie),Te),it),{modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]}),emits:[...Pe,...rt],setup(e,{slots:t,emit:s,attrs:p}){const{proxy:i}=ye(),d=Be(),a=M(null),q=M(!1),h=Le(e),{pickFiles:D,onDragover:A,onDragleave:g,processFiles:C,getDndNode:k}=ut({editable:d.editable,dnd:q,getFileInput:W,addFilesToQueue:Y}),N=Me(e),r=S(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),V=S(()=>ue(r.value)),j=S(()=>r.value.map(o=>o.name).join(", ")),n=S(()=>Xe(r.value.reduce((o,y)=>o+y.size,0))),U=S(()=>({totalSize:n.value,filesNumber:r.value.length,maxFiles:e.maxFiles})),I=S(()=>G(B({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:h.value},p),{id:d.targetUid.value,disabled:d.editable.value!==!0})),T=S(()=>"q-file q-field--auto-height"+(q.value===!0?" q-file--dnd":"")),m=S(()=>e.multiple===!0&&e.append===!0);function R(o){const y=r.value.slice();y.splice(o,1),f(y)}function $(o){const y=r.value.findIndex(o);y>-1&&R(y)}function f(o){s("update:modelValue",e.multiple===!0?o:o[0])}function w(o){o.keyCode===13&&Je(o)}function X(o){(o.keyCode===13||o.keyCode===32)&&D(o)}function W(){return a.value}function Y(o,y){const F=C(o,y,r.value,m.value),P=W();P!=null&&(P.value=""),F!==void 0&&((e.multiple===!0?e.modelValue&&F.every(De=>r.value.includes(De)):e.modelValue===F[0])||f(m.value===!0?r.value.concat(F):F))}function K(){return[L("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function se(){if(t.file!==void 0)return r.value.length===0?K():r.value.map((y,F)=>t.file({index:F,file:y,ref:this}));if(t.selected!==void 0)return r.value.length===0?K():t.selected({files:r.value,ref:this});if(e.useChips===!0)return r.value.length===0?K():r.value.map((y,F)=>L(tt,{key:"file-"+F,removable:d.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{R(F)}},()=>L("span",{class:"ellipsis",textContent:y.name})));const o=e.displayValue!==void 0?e.displayValue:j.value;return o.length>0?[L("div",{class:e.inputClass,style:e.inputStyle,textContent:o})]:K()}function c(){const o=G(B(B({ref:a},I.value),N.value),{class:"q-field__input fit absolute-full cursor-pointer",onChange:Y});return e.multiple===!0&&(o.multiple=!0),L("input",o)}return Object.assign(d,{fieldClass:T,emitValue:f,hasValue:V,inputRef:a,innerValue:r,floatingLabel:S(()=>V.value===!0||ue(e.displayValue)),computedCounter:S(()=>{if(e.counterLabel!==void 0)return e.counterLabel(U.value);const o=e.maxFiles;return`${r.value.length}${o!==void 0?" / "+o:""} (${n.value})`}),getControlChild:()=>k("file"),getControl:()=>{const o={ref:d.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return d.editable.value===!0&&Object.assign(o,{onDragover:A,onDragleave:g,onKeydown:w,onKeyup:X}),L("div",o,[c()].concat(se()))}}),Object.assign(i,{removeAtIndex:R,removeFile:$,getNativeElement:()=>a.value}),Ke(i,"nativeEl",()=>a.value),He(d)}});const mt=async({employee:e,assignment:t,effectiveNow:s,values:p,attachments:i,ratings:d})=>{const{userData:a,getUserType:q}=et(),h=a;h.access&&delete h.access,h.permissions&&delete h.permissions;const D=[{25:{value:e[3]},28:{value:t[3]},30:{value:p.selection[10]},35:{value:t[142]},36:{value:p.effective},38:{value:JSON.stringify(h)},39:{value:q!=="QuickBase User"},60:{value:d.comments?d.comments:""},72:{value:p.equipment.value}}];if(s){const{ee:A,assign:g}=await ct({assignment:t}),{data:C}=await z.upsertRecordsXML({to:"bp3ga39ut",data:D,fieldsToReturn:[37],formatObject:37},{action:"create",type:"release"}),{release:k}=await ve({release:C[0][37][3],employee:C[0][37][25],ratings:d,user:h});if(i){const{docs:N}=await be({release:k,attachments:i,user:h});return{release:k,employee:A,assignment:g,attachments:N}}else return{release:k,employee:A,assignment:g,attachments:null}}else{const{data:A}=await z.upsertRecordsXML({to:"bp3ga39ut",data:D,fieldsToReturn:[37],formatObject:37},{action:"create",type:"release"}),{release:g}=await ve({release:A[0][37][3],employee:A[0][37][25],ratings:d,user:h});if(i){const{docs:C}=await be({release:g,attachments:i,user:h});return{release:g,employee:e,assignment:t,attachments:C}}else return{release:g,employee:e,assignment:t,attachments:null}}},ve=async({release:e,employee:t,ratings:s,user:p})=>{const{data:i}=await z.upsertRecordsXML({to:"bqzkbcxup",data:[{6:{value:s.attendance},8:{value:s.attitude},10:{value:s.capability},12:{value:s.promotable},14:{value:s.comments?s.comments:""},16:{value:t},34:{value:e},36:{value:JSON.stringify(p)}}],fieldsToReturn:[35],formatObject:35});return{release:i[0][35]}},be=async({release:e,attachments:t,user:s})=>{const p=[];console.log(t),t.forEach(d=>{Object.assign(d,{8:{value:JSON.stringify(s)},9:{value:e[3]},10:{value:e[25]}}),p.push(d)}),console.log(p);const{data:i}=await z.upsertRecordsXML({to:"bsstsai5d",data:p,fieldsToReturn:[12],formatObject:12});return{docs:i}},ct=async({assignment:e})=>{const t=[{3:{value:e[3]},21:{value:"Complete"},22:{value:ne().tz("America/Chicago")}}],{data:s}=await z.upsertRecordsXML({to:"bp3gazpqj",data:t,fieldsToReturn:[110],formatObject:110});return{ee:await pt(e[18]),assign:s[0][110]}},pt=async e=>{const t=[{3:{value:e},79:{value:19}}],{data:s}=await z.upsertRecordsXML({to:"bp3gb7ng2",data:t,fieldsToReturn:[549],formatObject:549});return s[0][549]},ft=Ve({emits:["releaseSubmitted"],props:{record:Object,employee:Object},setup(e,{emit:t}){const s=M(!1),p=M(null),i=M([]),d=Ae(),a=he(),{getTermReasons:q,setTermReasons:h}=Re(),D=S(()=>oe({selection:oe().required().nullable().label("Reason"),effective:nt().required().label("Last Day On Site"),category:fe().nullable(),attendance:_().required().label("Attendance"),capability:_().required().label("Capability"),attitude:_().required().label("Attitude"),promotable:_().required().label("Promotability"),comments:fe().nullable().label("Comments"),equipment:oe().required().nullable().label("Equipment Returned")})),{errors:A,handleSubmit:g,handleReset:C}=st({validationSchema:D,initialValues:{}}),{value:k}=O("selection"),{value:N}=O("effective"),{value:r}=O("category"),{value:V}=O("attachments"),{value:j}=O("capability"),{value:n}=O("attendance"),{value:U}=O("attitude"),{value:I}=O("promotable"),{value:T}=O("comments"),{value:m}=O("equipment"),R=S(()=>{const c=q();return r.value?c.filter(o=>o[6]===r.value).sort((o,y)=>o[12]>y[12]?1:-1):c.sort((o,y)=>o[12]>y[12]?1:-1)}),$=g(async c=>{if(console.log(c),console.log(i.value),s.value&&i.value.length===0)d.dialog({title:"Alert",message:"Supporting documents are required for this reason!"});else{const o={capability:c.capability,attendance:c.attendance,attitude:c.attitude,promotable:c.promotable,comments:c.comments};d.dialog({title:"Confirm",message:"Are you sure you want to release this employee?",cancel:!0,persistent:!0}).onOk(async()=>{try{const{release:y,employee:F,assignment:P}=await mt({employee:e.employee,assignment:e.record,values:c,effectiveNow:!X.value,attachments:i.value,ratings:o});t("releaseSubmitted",{release:y,employee:F,assignment:P,effectiveNow:!X.value}),C()}catch{d.notify({type:"negative",message:"Cannot submit release."})}})}}),f=()=>{d.dialog({title:"Confirm",message:"Are you sure you want to cancel?",cancel:!0,persistent:!0}).onOk(()=>{C(),a.go(-1)})};Se(k,(c,o)=>{c&&c[19]?(s.value=!0,V.value=!0,console.log(V.value)):(V.value=!1,s.value=!1)});const w=S(()=>{const c=q();return[...new Map(c.map(o=>[o[6],o[6]])).values()]}),X=S(()=>N.value&&N.value!==""?ne().isBefore(ne(N.value)):!1),W=c=>new Promise((o,y)=>{const F=new FileReader;F.readAsDataURL(c),F.onload=()=>o(F.result.replace(/^data:.+;base64,/,"")),F.onerror=P=>y(P)}),Y=()=>{p.value&&p.value.forEach(async c=>{const o={6:{value:await W(c),filename:c.name},7:{value:c.name}};i.value.push(o),p.value=null}),console.log(i.value)},K=c=>{console.log(i.value[c]),i.value.splice(c,1)};return(async()=>{if(q().length===0){const{data:c}=await z.fetchFromHiringApp({fields:[Ue({type:"termReasons",query:"{'11'.EX.'true'}"})]});h({reasons:c})}})(),{props:e,options:R,primaryReasons:w,category:r,selection:k,effective:N,attachments:V,capability:j,attendance:n,attitude:U,promotable:I,comments:T,equipment:m,attachmentsRequired:s,fileAttachment:p,attachedFiles:i,submit:$,formErrors:A,handleReset:C,cancelRelease:f,showFiles:Y,deleteFile:K}}}),vt={class:"row"},bt={class:"col-3 q-px-sm"},yt=u("div",{class:"text-caption"},"Is this release voluntary or involuntary?",-1),gt={class:"text-caption"},Vt={class:"col-4 q-pl-xs q-pr-sm"},ht=u("div",{class:"text-caption"},"What is the reason for this release?",-1),St={class:"text-caption"},qt={class:"col-3 q-pl-xs q-pr-sm"},wt=u("div",{class:"text-caption"},"When is the employee's last day on site?",-1),Ft={class:"text-caption"},Ct={class:"row"},At={class:"col-4 q-pl-xs q-pr-sm"},Rt=u("div",{class:"text-caption"},"Has all Company Equipment been returned?",-1),Ut={class:"text-caption"},Dt={class:"row items-top justify-between q-mt-md"},kt={class:"col-4 q-pl-xs q-pr-sm"},Nt={key:0,class:"text-body2 text-negative q-mb-md"},$t={key:0},Ot={key:1},Et={key:1,class:"text-body2 text-accent q-mb-md"},jt=u("span",null,"Supporting documents are optional for this reason.",-1),Qt=[jt],zt={key:0,class:"col-6 q-pl-xs q-pr-sm"},It=u("div",{class:"text-body1 text-info q-mb-sm"},"Attached Documents",-1),Tt={class:"row q-mb-md"},Pt={class:"col-12"},Bt=u("div",{class:"q-pa-sm"},[u("div",{class:"text-h6 text-primary text-bold"},"CAAP Rating"),u("div",{class:"text-subtitle1 text-accent text-italic"},"Capability, Attendance, Attitude, and Promotability"),u("div",{class:"text-body1 text-dark q-mt-sm"},"Select how much you agree with each of the following statements.")],-1),Lt={class:"q-pb-sm"},Mt=u("div",{class:"text-body2 text-info text-bold q-mb-sm"},"This employee is capable of performing their assigned job.",-1),Xt={class:"q-pb-sm"},Kt=u("div",{class:"text-body2 text-info text-bold q-mb-sm"},"This employee regularly shows up to work on time.",-1),Ht={class:"q-pb-sm"},Jt=u("div",{class:"text-body2 text-info text-bold q-mb-sm"},"This employee has a good attitude.",-1),Wt={class:"q-pb-sm"},Yt=u("div",{class:"text-body2 text-info text-bold q-mb-sm"},"I am confident that this employee can be promoted in the future.",-1),Gt={class:"row q-py-sm"},Zt={class:"col-12"};function xt(e,t,s,p,i,d){return E(),Q("div",null,[l(ot,{onSubmit:Ge(e.submit,["prevent"])},{default:b(()=>[u("div",vt,[u("div",bt,[yt,l(le,{dense:"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.category,"onUpdate:modelValue":t[0]||(t[0]=a=>e.category=a),options:e.primaryReasons},{error:b(()=>[u("div",gt,H(e.formErrors.selection),1)]),"no-option":b(()=>[l(te,null,{default:b(()=>[l(Z,{class:"text-grey"},{default:b(()=>[ae(" No Options Available ")]),_:1})]),_:1})]),_:1},8,["modelValue","options"])]),u("div",Vt,[ht,l(le,{dense:"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.selection,"onUpdate:modelValue":t[1]||(t[1]=a=>e.selection=a),options:e.options,"option-label":"12","display-value":`${e.selection?e.selection[12]:""}`,"bottom-slots":"",error:!!e.formErrors.selection,disable:!e.category},{error:b(()=>[u("div",St,H(e.formErrors.selection),1)]),"no-option":b(()=>[l(te,null,{default:b(()=>[l(Z,{class:"text-grey"},{default:b(()=>[ae(" No Options Available ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","display-value","error","disable"])]),u("div",qt,[wt,l(de,{dense:"",type:"date",modelValue:e.effective,"onUpdate:modelValue":t[2]||(t[2]=a=>e.effective=a),error:!!e.formErrors.effective,"bottom-slots":""},{error:b(()=>[u("div",Ft,H(e.formErrors.effective),1)]),_:1},8,["modelValue","error"])])]),u("div",Ct,[u("div",At,[Rt,l(le,{dense:"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.equipment,"onUpdate:modelValue":t[3]||(t[3]=a=>e.equipment=a),options:[{value:!0,label:"Yes"},{value:!1,label:"No"},{value:!0,label:"None Issued"}],"bottom-slots":"",error:!!e.formErrors.equipment},{error:b(()=>[u("div",Ut,H(e.formErrors.equipment),1)]),_:1},8,["modelValue","error"])])]),l(me),u("div",Dt,[u("div",kt,[e.attachmentsRequired?(E(),Q("div",Nt,[e.selection[12].toLowerCase().includes("attendance")?(E(),Q("span",$t,"Supporting attendance records must be attached.")):(E(),Q("span",Ot,"Supporting documents are required for this reason."))])):(E(),Q("div",Et,Qt)),l(dt,{dense:"","bottom-slots":"",modelValue:e.fileAttachment,"onUpdate:modelValue":t[4]||(t[4]=a=>e.fileAttachment=a),multiple:"",append:"",label:"Attach Supporting Documents"},{after:b(()=>[l(x,{dense:"",color:"info",round:"",flat:"",icon:"cloud_upload",onClick:e.showFiles},null,8,["onClick"])]),_:1},8,["modelValue"])]),e.attachedFiles.length>0?(E(),Q("div",zt,[It,l(lt,{dense:""},{default:b(()=>[(E(!0),Q(ce,null,We(e.attachedFiles,(a,q)=>(E(),Q(ce,{key:a},[l(te,null,{default:b(()=>[l(Z,null,{default:b(()=>[l(at,null,{default:b(()=>[ae(H(q+1)+". "+H(a[6].filename),1)]),_:2},1024)]),_:2},1024),l(Z,{side:""},{default:b(()=>[l(x,{color:"accent",round:"",flat:"",class:"cursor-pointer",icon:"delete",size:"md",onClick:h=>e.deleteFile(q)},null,8,["onClick"])]),_:2},1024)]),_:2},1024),l(me)],64))),128))]),_:1})])):we("",!0)]),u("div",Tt,[u("div",Pt,[Bt,l(Fe,null,{default:b(()=>[l(Ce,null,{default:b(()=>[u("div",null,[u("div",Lt,[Mt,l(v,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[5]||(t[5]=a=>e.capability=a),val:"1",label:"Strongly Disagree"},null,8,["modelValue"]),l(v,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[6]||(t[6]=a=>e.capability=a),val:"2",label:"Disagree"},null,8,["modelValue"]),l(v,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[7]||(t[7]=a=>e.capability=a),val:"3",label:"Neutral"},null,8,["modelValue"]),l(v,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[8]||(t[8]=a=>e.capability=a),val:"4",label:"Agree"},null,8,["modelValue"]),l(v,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[9]||(t[9]=a=>e.capability=a),val:"5",label:"Strongly Agree"},null,8,["modelValue"]),l(v,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[10]||(t[10]=a=>e.capability=a),val:"0",label:"I Do Not Know"},null,8,["modelValue"])]),u("div",Xt,[Kt,l(v,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[11]||(t[11]=a=>e.attendance=a),val:"1",label:"Strongly Disagree"},null,8,["modelValue"]),l(v,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[12]||(t[12]=a=>e.attendance=a),val:"2",label:"Disagree"},null,8,["modelValue"]),l(v,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[13]||(t[13]=a=>e.attendance=a),val:"3",label:"Neutral"},null,8,["modelValue"]),l(v,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[14]||(t[14]=a=>e.attendance=a),val:"4",label:"Agree"},null,8,["modelValue"]),l(v,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[15]||(t[15]=a=>e.attendance=a),val:"5",label:"Strongly Agree"},null,8,["modelValue"]),l(v,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[16]||(t[16]=a=>e.attendance=a),val:"0",label:"I Do Not Know"},null,8,["modelValue"])]),u("div",Ht,[Jt,l(v,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[17]||(t[17]=a=>e.attitude=a),val:"1",label:"Strongly Disagree"},null,8,["modelValue"]),l(v,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[18]||(t[18]=a=>e.attitude=a),val:"2",label:"Disagree"},null,8,["modelValue"]),l(v,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[19]||(t[19]=a=>e.attitude=a),val:"3",label:"Neutral"},null,8,["modelValue"]),l(v,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[20]||(t[20]=a=>e.attitude=a),val:"4",label:"Agree"},null,8,["modelValue"]),l(v,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[21]||(t[21]=a=>e.attitude=a),val:"5",label:"Strongly Agree"},null,8,["modelValue"]),l(v,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[22]||(t[22]=a=>e.attitude=a),val:"0",label:"I Do Not Know"},null,8,["modelValue"])]),u("div",Wt,[Yt,l(v,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[23]||(t[23]=a=>e.promotable=a),val:"1",label:"Strongly Disagree"},null,8,["modelValue"]),l(v,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[24]||(t[24]=a=>e.promotable=a),val:"2",label:"Disagree"},null,8,["modelValue"]),l(v,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[25]||(t[25]=a=>e.promotable=a),val:"3",label:"Neutral"},null,8,["modelValue"]),l(v,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[26]||(t[26]=a=>e.promotable=a),val:"4",label:"Agree"},null,8,["modelValue"]),l(v,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[27]||(t[27]=a=>e.promotable=a),val:"5",label:"Strongly Agree"},null,8,["modelValue"]),l(v,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[28]||(t[28]=a=>e.promotable=a),val:"0",label:"I Do Not Know"},null,8,["modelValue"])])])]),_:1})]),_:1})])]),u("div",Gt,[u("div",Zt,[l(de,{filled:"",type:"textarea",modelValue:e.comments,"onUpdate:modelValue":t[29]||(t[29]=a=>e.comments=a),label:"Comments"},null,8,["modelValue"])])]),l(Ye,{align:"right"},{default:b(()=>[l(x,{color:"info",label:"Submit",type:"submit"}),l(x,{color:"secondary",label:"Cancel",onClick:e.cancelRelease},null,8,["onClick"])]),_:1})]),_:1},8,["onSubmit"])])}var _t=qe(ft,[["render",xt]]);const ea=Ve({components:{ReleaseForm:_t},setup(){const e=M(0),t=Ze(),s=he(),p=Ae(),{getEmployee:i,getAssignmentsByEmployee:d,setAssignmentsByEmployee:a,setEmployees:q,setReleases:h,setReleasesByAssignment:D,setReleasesByEmployee:A}=Re(),g=S(()=>i(t.params.id)),C=S(()=>g.value?d(g.value[3]):null),k=async()=>{if(!C.value&&g.value[577]){const{data:r}=await z.fetchFromHiringApp({fields:[Ue({type:"assignments",query:"",id:g.value[577]})]});console.log(r),a({id:g.value[3],data:r})}};return Se(g,(r,V)=>{r&&k()}),{employee:g,assignment:C,releaseSubmitted:({employee:r,release:V,assignment:j,effectiveNow:n})=>{p.notify({type:"positive",message:"Release successfully submitted."}),n?(r[581]=V[3],h({id:V[3],data:V}),q({id:r[3],data:r}),a({id:r[3],assignment:j}),D({id:j[3],data:V}),A({id:r[3],data:V})):(r[581]=V[3],q({id:r[3],data:r}),h({id:V[3],data:V}),D({id:j[3],data:V}),A({id:r[3],data:V})),s.replace({name:"ee-summary",params:{id:r[3]}})},step:e}}}),ta={class:"q-pa-sm"},aa={class:"row"},la={class:"col-12"},oa=u("div",{class:"text-h6 q-mb-md"},"Please complete the following to submit this release.",-1);function na(e,t,s,p,i,d){const a=xe("release-form");return E(),pe(_e,{style:{"max-width":"100vw"}},{default:b(()=>[u("div",ta,[u("div",aa,[u("div",la,[l(Fe,null,{default:b(()=>[e.assignment?(E(),pe(Ce,{key:0},{default:b(()=>[oa,l(a,{record:e.assignment,employee:e.employee,onReleaseSubmitted:e.releaseSubmitted},null,8,["record","employee","onReleaseSubmitted"])]),_:1})):we("",!0)]),_:1})])])])]),_:1})}var Ua=qe(ea,[["render",na]]);export{Ua as default};
