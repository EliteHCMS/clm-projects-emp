import{h as N,bY as Oe,d5 as Wt,d6 as Kt,i as Gt,b_ as Ee,b$ as Xt,r as b,cO as Yt,c as A,w as q,aU as qt,cC as Zt,g as We,dl as Jt,aS as ea,aW as ta,o as Ke,c0 as aa,bZ as la,cL as oa,dp as he,cM as Te,dq as Ye,aR as G,cG as Ie,cf as ra,cr as na,a9 as K,O as sa,X as ua,b as Et,$ as ia,l as ca,Z as be,bW as Me,B as P,C as X,ar as k,bs as h,E as _e,d as g,cl as da,F as Qe,b5 as Le,ay as F,ad as W,df as Be,H as ge,bR as Re,as as U,bV as fa,bU as va,cU as Ze,bX as ae,G as Je,bO as Ae,bu as le,bS as oe,bQ as z,de as et,cA as ma,cV as tt,cW as De,cX as pa}from"./index.f532dd3a.js";import{Q as ya,a as at}from"./QHeader.3a567915.js";import{Q as ke}from"./QList.2a81b73f.js";import{Q as ha}from"./QMenu.219b0d4b.js";import{Q as ga}from"./QToolbar.c471e185.js";import{Q as ba}from"./QBadge.b36b5db8.js";import{Q as _a}from"./QBtnGroup.51bed1d0.js";import{Q as lt}from"./QSelect.40ac6683.js";import{Q as wa,a as Oa}from"./QDrawer.d390e1ed.js";import{Q as Sa,a as $a}from"./QLayout.4b919ba9.js";import{Q as xa}from"./QResizeObserver.fdf89ea6.js";import{C as fe}from"./ClosePopup.49b5470b.js";import{u as Pa}from"./use-quasar.45d0ed96.js";import{Q as Ca}from"./QImg.c4db01a4.js";import{c as Tt,i as te,u as Na}from"./app.c2decb41.js";import{p as qa}from"./VueTelInput.86eaef25.js";import{c as Ea}from"./array.59f93f43.js";import{u as Ta}from"./i18n.c56fe056.js";import{u as Ia}from"./vee-validate.esm.f12921ec.js";import{_ as Aa}from"./officeSelector.35f7694e.js";import"./position-engine.9267cf84.js";import"./selection.36689ad5.js";import"./QChip.055ed411.js";import"./rtl.b51694b1.js";import"./TouchPan.2eb56edf.js";import"./touch.3df10340.js";import"./_commonjsHelpers.a26ce4be.js";import"./dayjs.bb7adb48.js";import"./localForage.627988b4.js";import"./api.df6fe10b.js";import"./index.04bc0a32.js";const Da=[N("circle",{cx:"15",cy:"15",r:"15"},[N("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),N("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),N("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[N("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),N("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),N("circle",{cx:"105",cy:"15",r:"15"},[N("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),N("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})])];var ka=Oe({name:"QSpinnerDots",props:Wt,setup(e){const{cSize:t,classes:a}=Kt(e);return()=>N("svg",{class:a.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"},Da)}}),Ma=Oe({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:t,emit:a}){const{proxy:{$q:l}}=We(),o=Gt(Xt,Ee);if(o===Ee)return console.error("QFooter needs to be child of QLayout"),Ee;const r=b(parseInt(e.heightHint,10)),n=b(!0),s=b(Yt.value===!0||o.isContainer.value===!0?0:window.innerHeight),u=A(()=>e.reveal===!0||o.view.value.indexOf("F")!==-1||l.platform.is.ios&&o.isContainer.value===!0),d=A(()=>o.isContainer.value===!0?o.containerHeight.value:s.value),c=A(()=>{if(e.modelValue!==!0)return 0;if(u.value===!0)return n.value===!0?r.value:0;const _=o.scroll.value.position+d.value+r.value-o.height.value;return _>0?_:0}),v=A(()=>e.modelValue!==!0||u.value===!0&&n.value!==!0),i=A(()=>e.modelValue===!0&&v.value===!0&&e.reveal===!0),f=A(()=>"q-footer q-layout__section--marginal "+(u.value===!0?"fixed":"absolute")+"-bottom"+(e.bordered===!0?" q-footer--bordered":"")+(v.value===!0?" q-footer--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus"+(u.value!==!0?" hidden":""):"")),O=A(()=>{const _=o.rows.value.bottom,T={};return _[0]==="l"&&o.left.space===!0&&(T[l.lang.rtl===!0?"right":"left"]=`${o.left.size}px`),_[2]==="r"&&o.right.space===!0&&(T[l.lang.rtl===!0?"left":"right"]=`${o.right.size}px`),T});function $(_,T){o.update("footer",_,T)}function w(_,T){_.value!==T&&(_.value=T)}function I({height:_}){w(r,_),$("size",_)}function M(){if(e.reveal!==!0)return;const{direction:_,position:T,inflectionPoint:x}=o.scroll.value;w(n,_==="up"||T-x<100||o.height.value-d.value-T-r.value<300)}function D(_){i.value===!0&&w(n,!0),a("focusin",_)}q(()=>e.modelValue,_=>{$("space",_),w(n,!0),o.animate()}),q(c,_=>{$("offset",_)}),q(()=>e.reveal,_=>{_===!1&&w(n,e.modelValue)}),q(n,_=>{o.animate(),a("reveal",_)}),q([r,o.scroll,o.height],M),q(()=>l.screen.height,_=>{o.isContainer.value!==!0&&w(s,_)});const E={};return o.instances.footer=E,e.modelValue===!0&&$("size",r.value),$("space",e.modelValue),$("offset",c.value),qt(()=>{o.instances.footer===E&&(o.instances.footer=void 0,$("size",0),$("offset",0),$("space",!1))}),()=>{const _=Zt(t.default,[N(xa,{debounce:0,onResize:I})]);return e.elevated===!0&&_.push(N("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),N("footer",{class:f.value,style:O.value,onFocusin:D},_)}}}),Qa=Oe({name:"QChatMessage",props:{sent:Boolean,label:String,bgColor:String,textColor:String,name:String,avatar:String,text:Array,stamp:String,size:String,labelHtml:Boolean,nameHtml:Boolean,textHtml:Boolean,stampHtml:Boolean},setup(e,{slots:t}){const a=A(()=>e.sent===!0?"sent":"received"),l=A(()=>`q-message-text-content q-message-text-content--${a.value}`+(e.textColor!==void 0?` text-${e.textColor}`:"")),o=A(()=>`q-message-text q-message-text--${a.value}`+(e.bgColor!==void 0?` text-${e.bgColor}`:"")),r=A(()=>"q-message-container row items-end no-wrap"+(e.sent===!0?" reverse":"")),n=A(()=>e.size!==void 0?`col-${e.size}`:""),s=A(()=>({msg:e.textHtml===!0?"innerHTML":"textContent",stamp:e.stampHtml===!0?"innerHTML":"textContent",name:e.nameHtml===!0?"innerHTML":"textContent",label:e.labelHtml===!0?"innerHTML":"textContent"}));function u(c){return t.stamp!==void 0?[c,N("div",{class:"q-message-stamp"},t.stamp())]:e.stamp?[c,N("div",{class:"q-message-stamp",[s.value.stamp]:e.stamp})]:[c]}function d(c,v){const i=v===!0?c.length>1?f=>f:f=>N("div",[f]):f=>N("div",{[s.value.msg]:f});return c.map((f,O)=>N("div",{key:O,class:o.value},[N("div",{class:l.value},u(i(f)))]))}return()=>{const c=[];t.avatar!==void 0?c.push(t.avatar()):e.avatar!==void 0&&c.push(N("img",{class:`q-message-avatar q-message-avatar--${a.value}`,src:e.avatar,"aria-hidden":"true"}));const v=[];t.name!==void 0?v.push(N("div",{class:`q-message-name q-message-name--${a.value}`},t.name())):e.name!==void 0&&v.push(N("div",{class:`q-message-name q-message-name--${a.value}`,[s.value.name]:e.name})),t.default!==void 0?v.push(d(Jt(t.default()),!0)):e.text!==void 0&&v.push(d(e.text)),c.push(N("div",{class:n.value},v));const i=[];return t.label!==void 0?i.push(N("div",{class:"q-message-label"},t.label())):e.label!==void 0&&i.push(N("div",{class:"q-message-label",[s.value.label]:e.label})),i.push(N("div",{class:r.value},c)),N("div",{class:`q-message q-message-${a.value}`},i)}}});const{passive:re}=oa;var La=Oe({name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:{default:void 0},initialIndex:Number,disable:Boolean,reverse:Boolean},emits:["load"],setup(e,{slots:t,emit:a}){const l=b(!1),o=b(!0),r=b(null),n=b(null);let s=e.initialIndex||0,u,d;const c=A(()=>"q-infinite-scroll__loading"+(l.value===!0?"":" invisible"));function v(){if(e.disable===!0||l.value===!0||o.value===!1)return;const x=he(u),Q=Te(u),C=Ye(u);e.reverse===!1?Math.round(Q+C+e.offset)>=Math.round(x)&&i():Math.round(Q)<=e.offset&&i()}function i(){if(e.disable===!0||l.value===!0||o.value===!1)return;s++,l.value=!0;const x=he(u);a("load",s,Q=>{o.value===!0&&(l.value=!1,G(()=>{if(e.reverse===!0){const C=he(u),Se=Te(u),H=C-x;Ie(u,Se+H)}Q===!0?$():r.value&&r.value.closest("body")&&d()}))})}function f(){s=0}function O(){o.value===!1&&(o.value=!0,u.addEventListener("scroll",d,re)),v()}function $(){o.value===!0&&(o.value=!1,l.value=!1,u.removeEventListener("scroll",d,re),d!==void 0&&d.cancel!==void 0&&d.cancel())}function w(){if(u&&o.value===!0&&u.removeEventListener("scroll",d,re),u=ra(r.value,e.scrollTarget),o.value===!0){if(u.addEventListener("scroll",d,re),e.reverse===!0){const x=he(u),Q=Ye(u);Ie(u,x-Q)}v()}}function I(x){s=x}function M(x){x=parseInt(x,10);const Q=d;d=x<=0?v:na(v,isNaN(x)===!0?100:x),u&&o.value===!0&&(Q!==void 0&&u.removeEventListener("scroll",Q,re),u.addEventListener("scroll",d,re))}function D(x){if(E.value===!0){if(n.value===null){x!==!0&&G(()=>{D(!0)});return}const Q=`${l.value===!0?"un":""}pauseAnimations`;Array.from(n.value.getElementsByTagName("svg")).forEach(C=>{C[Q]()})}}const E=A(()=>e.disable!==!0&&o.value===!0);q([l,E],()=>{D()}),q(()=>e.disable,x=>{x===!0?$():O()}),q(()=>e.reverse,()=>{l.value===!1&&o.value===!0&&v()}),q(()=>e.scrollTarget,w),q(()=>e.debounce,M);let _=!1;ea(()=>{_!==!1&&u&&Ie(u,_)}),ta(()=>{_=u?Te(u):!1}),qt(()=>{o.value===!0&&u.removeEventListener("scroll",d,re)}),Ke(()=>{M(e.debounce),w(),l.value===!1&&D()});const T=We();return Object.assign(T.proxy,{poll:()=>{d!==void 0&&d()},trigger:i,stop:$,reset:f,resume:O,setIndex:I,updateScrollTarget:w}),()=>{const x=aa(t.default,[]);return E.value===!0&&x[e.reverse===!1?"push":"unshift"](N("div",{ref:n,class:c.value},la(t.loading))),N("div",{class:"q-infinite-scroll",ref:r},x)}}}),ot;const ve=typeof window!="undefined",Ba=e=>typeof e=="function",Ra=e=>typeof e=="string",Y=()=>{},Ve=ve&&((ot=window==null?void 0:window.navigator)==null?void 0:ot.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function R(e){return typeof e=="function"?e():K(e)}function It(e,t){function a(...l){return new Promise((o,r)=>{Promise.resolve(e(()=>t.apply(this,l),{fn:t,thisArg:this,args:l})).then(o).catch(r)})}return a}function Va(e,t={}){let a,l,o=Y;const r=s=>{clearTimeout(s),o(),o=Y};return s=>{const u=R(e),d=R(t.maxWait);return a&&r(a),u<=0||d!==void 0&&d<=0?(l&&(r(l),l=null),Promise.resolve(s())):new Promise((c,v)=>{o=t.rejectOnCancel?v:c,d&&!l&&(l=setTimeout(()=>{a&&r(a),l=null,c(s())},d)),a=setTimeout(()=>{l&&r(l),l=null,c(s())},u)})}}function Ha(e,t=!0,a=!0,l=!1){let o=0,r,n=!0,s=Y,u;const d=()=>{r&&(clearTimeout(r),r=void 0,s(),s=Y)};return v=>{const i=R(e),f=Date.now()-o,O=()=>u=v();return d(),i<=0?(o=Date.now(),O()):(f>i&&(a||!n)?(o=Date.now(),O()):t&&(u=new Promise(($,w)=>{s=l?w:$,r=setTimeout(()=>{o=Date.now(),n=!0,$(O()),d()},Math.max(0,i-f))})),!a&&!r&&(r=setTimeout(()=>n=!0,i)),n=!1,u)}}const J={mounted:"mounted",updated:"updated",unmounted:"unmounted"};function Ua(e){return e}function ne(e){return sa()?(ua(e),!0):!1}function ja(e,t=200,a={}){return It(Va(t,a),e)}function Fa(e,t=200,a=!1,l=!0,o=!1){return It(Ha(t,a,l,o),e)}function za(e){return typeof e=="function"?A(e):b(e)}function Wa(e,t=!0){We()?Ke(e):t?e():G(e)}function Ka(e,t=1e3,a={}){const{immediate:l=!0,immediateCallback:o=!1}=a;let r=null;const n=b(!1);function s(){r&&(clearInterval(r),r=null)}function u(){n.value=!1,s()}function d(){const c=R(t);c<=0||(n.value=!0,o&&e(),s(),r=setInterval(e,c))}if(l&&ve&&d(),Et(t)||Ba(t)){const c=q(t,()=>{n.value&&ve&&d()});ne(c)}return ne(u),{isActive:n,pause:u,resume:d}}const Ga=ve?window:void 0,He=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Ue="__vueuse_ssr_handlers__";He[Ue]=He[Ue]||{};He[Ue];function Xa(e,t={}){const{immediate:a=!0,window:l=Ga}=t,o=b(!1);let r=0,n=null;function s(c){if(!o.value||!l)return;const v=c-r;e({delta:v,timestamp:c}),r=c,n=l.requestAnimationFrame(s)}function u(){!o.value&&l&&(o.value=!0,n=l.requestAnimationFrame(s))}function d(){o.value=!1,n!=null&&l&&(l.cancelAnimationFrame(n),n=null)}return a&&u(),ne(d),{isActive:ia(o),pause:d,resume:u}}var Ya=Object.defineProperty,rt=Object.getOwnPropertySymbols,Za=Object.prototype.hasOwnProperty,Ja=Object.prototype.propertyIsEnumerable,nt=(e,t,a)=>t in e?Ya(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,el=(e,t)=>{for(var a in t||(t={}))Za.call(t,a)&&nt(e,a,t[a]);if(rt)for(var a of rt(t))Ja.call(t,a)&&nt(e,a,t[a]);return e};function tl(e={}){const{controls:t=!1,interval:a="requestAnimationFrame"}=e,l=b(new Date),o=()=>l.value=new Date,r=a==="requestAnimationFrame"?Xa(o,{immediate:!0}):Ka(o,a,{immediate:!0});return t?el({now:l},r):l}var st;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(st||(st={}));var al=Object.defineProperty,we=Object.getOwnPropertySymbols,At=Object.prototype.hasOwnProperty,Dt=Object.prototype.propertyIsEnumerable,ut=(e,t,a)=>t in e?al(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,ll=(e,t)=>{for(var a in t||(t={}))At.call(t,a)&&ut(e,a,t[a]);if(we)for(var a of we(t))Dt.call(t,a)&&ut(e,a,t[a]);return e},ol=(e,t)=>{var a={};for(var l in e)At.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(e!=null&&we)for(var l of we(e))t.indexOf(l)<0&&Dt.call(e,l)&&(a[l]=e[l]);return a};const rl=[{max:6e4,value:1e3,name:"second"},{max:276e4,value:6e4,name:"minute"},{max:72e6,value:36e5,name:"hour"},{max:5184e5,value:864e5,name:"day"},{max:24192e5,value:6048e5,name:"week"},{max:28512e6,value:2592e6,name:"month"},{max:1/0,value:31536e6,name:"year"}],nl={justNow:"just now",past:e=>e.match(/\d/)?`${e} ago`:e,future:e=>e.match(/\d/)?`in ${e}`:e,month:(e,t)=>e===1?t?"last month":"next month":`${e} month${e>1?"s":""}`,year:(e,t)=>e===1?t?"last year":"next year":`${e} year${e>1?"s":""}`,day:(e,t)=>e===1?t?"yesterday":"tomorrow":`${e} day${e>1?"s":""}`,week:(e,t)=>e===1?t?"last week":"next week":`${e} week${e>1?"s":""}`,hour:e=>`${e} hour${e>1?"s":""}`,minute:e=>`${e} minute${e>1?"s":""}`,second:e=>`${e} second${e>1?"s":""}`,invalid:""},sl=e=>e.toISOString().slice(0,10);function ul(e,t={}){const{controls:a=!1,updateInterval:l=3e4}=t,o=tl({interval:l,controls:!0}),{now:r}=o,n=ol(o,["now"]),s=A(()=>il(new Date(R(e)),t,K(r.value)));return a?ll({timeAgo:s},n):s}function il(e,t={},a=Date.now()){var l;const{max:o,messages:r=nl,fullDateFormatter:n=sl,units:s=rl,showSecond:u=!1,rounding:d="round"}=t,c=typeof d=="number"?w=>+w.toFixed(d):Math[d],v=+a-+e,i=Math.abs(v);function f(w,I){return c(Math.abs(w)/I.value)}function O(w,I){const M=f(w,I),D=w>0,E=$(I.name,M,D);return $(D?"past":"future",E,D)}function $(w,I,M){const D=r[w];return typeof D=="function"?D(I,M):D.replace("{0}",I.toString())}if(i<6e4&&!u)return r.justNow;if(typeof o=="number"&&i>o)return n(new Date(e));if(typeof o=="string"){const w=(l=s.find(I=>I.name===o))==null?void 0:l.max;if(w&&i>w)return n(new Date(e))}for(const[w,I]of s.entries()){if(f(v,I)<=0&&s[w-1])return O(v,s[w-1]);if(i<I.max)return O(v,I)}return r.invalid}var cl=Object.defineProperty,it=Object.getOwnPropertySymbols,dl=Object.prototype.hasOwnProperty,fl=Object.prototype.propertyIsEnumerable,ct=(e,t,a)=>t in e?cl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,vl=(e,t)=>{for(var a in t||(t={}))dl.call(t,a)&&ct(e,a,t[a]);if(it)for(var a of it(t))fl.call(t,a)&&ct(e,a,t[a]);return e};const ml={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};vl({linear:Ua},ml);function V(e){var t;const a=R(e);return(t=a==null?void 0:a.$el)!=null?t:a}const se=ve?window:void 0;function j(...e){let t,a,l,o;if(Ra(e[0])||Array.isArray(e[0])?([a,l,o]=e,t=se):[t,a,l,o]=e,!t)return Y;Array.isArray(a)||(a=[a]),Array.isArray(l)||(l=[l]);const r=[],n=()=>{r.forEach(c=>c()),r.length=0},s=(c,v,i,f)=>(c.addEventListener(v,i,f),()=>c.removeEventListener(v,i,f)),u=q(()=>[V(t),R(o)],([c,v])=>{n(),c&&r.push(...a.flatMap(i=>l.map(f=>s(c,i,f,v))))},{immediate:!0,flush:"post"}),d=()=>{u(),n()};return ne(d),d}let dt=!1;function ft(e,t,a={}){const{window:l=se,ignore:o=[],capture:r=!0,detectIframe:n=!1}=a;if(!l)return;Ve&&!dt&&(dt=!0,Array.from(l.document.body.children).forEach(i=>i.addEventListener("click",Y)));let s=!0;const u=i=>o.some(f=>{if(typeof f=="string")return Array.from(l.document.querySelectorAll(f)).some(O=>O===i.target||i.composedPath().includes(O));{const O=V(f);return O&&(i.target===O||i.composedPath().includes(O))}}),c=[j(l,"click",i=>{const f=V(e);if(!(!f||f===i.target||i.composedPath().includes(f))){if(i.detail===0&&(s=!u(i)),!s){s=!0;return}t(i)}},{passive:!0,capture:r}),j(l,"pointerdown",i=>{const f=V(e);f&&(s=!i.composedPath().includes(f)&&!u(i))},{passive:!0}),n&&j(l,"blur",i=>{var f;const O=V(e);((f=l.document.activeElement)==null?void 0:f.tagName)==="IFRAME"&&!(O!=null&&O.contains(l.document.activeElement))&&t(i)})].filter(Boolean);return()=>c.forEach(i=>i())}J.mounted+"",J.unmounted+"";const pl=e=>typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0;function vt(...e){let t,a,l={};e.length===3?(t=e[0],a=e[1],l=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,a=e[0],l=e[1]):(t=e[0],a=e[1]):(t=!0,a=e[0]);const{target:o=se,eventName:r="keydown",passive:n=!1}=l,s=pl(t);return j(o,r,d=>{s(d)&&a(d)},n)}var yl=Object.defineProperty,mt=Object.getOwnPropertySymbols,hl=Object.prototype.hasOwnProperty,gl=Object.prototype.propertyIsEnumerable,pt=(e,t,a)=>t in e?yl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,bl=(e,t)=>{for(var a in t||(t={}))hl.call(t,a)&&pt(e,a,t[a]);if(mt)for(var a of mt(t))gl.call(t,a)&&pt(e,a,t[a]);return e};J.mounted+"";const _l=500;function yt(e,t,a){var l,o;const r=A(()=>V(e));let n;function s(){n&&(clearTimeout(n),n=void 0)}function u(c){var v,i,f,O;((v=a==null?void 0:a.modifiers)==null?void 0:v.self)&&c.target!==r.value||(s(),(i=a==null?void 0:a.modifiers)!=null&&i.prevent&&c.preventDefault(),(f=a==null?void 0:a.modifiers)!=null&&f.stop&&c.stopPropagation(),n=setTimeout(()=>t(c),(O=a==null?void 0:a.delay)!=null?O:_l))}const d={capture:(l=a==null?void 0:a.modifiers)==null?void 0:l.capture,once:(o=a==null?void 0:a.modifiers)==null?void 0:o.once};j(r,"pointerdown",u,d),j(r,"pointerup",s,d),j(r,"pointerleave",s,d)}J.mounted+"";const je=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Fe="__vueuse_ssr_handlers__";je[Fe]=je[Fe]||{};je[Fe];function kt(e,t=!1){const a=b(),l=()=>a.value=Boolean(e());return l(),Wa(l,t),a}function wl(e,t={}){const a=t?t.delayEnter:0,l=t?t.delayLeave:0,o=b(!1);let r;const n=s=>{const u=s?a:l;r&&(clearTimeout(r),r=void 0),u?r=setTimeout(()=>o.value=s,u):o.value=s};return window&&(j(e,"mouseenter",()=>n(!0),{passive:!0}),j(e,"mouseleave",()=>n(!1),{passive:!0})),o}J.mounted+"";var ht=Object.getOwnPropertySymbols,Ol=Object.prototype.hasOwnProperty,Sl=Object.prototype.propertyIsEnumerable,$l=(e,t)=>{var a={};for(var l in e)Ol.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(e!=null&&ht)for(var l of ht(e))t.indexOf(l)<0&&Sl.call(e,l)&&(a[l]=e[l]);return a};function xl(e,t,a={}){const l=a,{window:o=se}=l,r=$l(l,["window"]);let n;const s=kt(()=>o&&"ResizeObserver"in o),u=()=>{n&&(n.disconnect(),n=void 0)},d=q(()=>V(e),v=>{u(),s.value&&o&&v&&(n=new ResizeObserver(t),n.observe(v,r))},{immediate:!0,flush:"post"}),c=()=>{u(),d()};return ne(c),{isSupported:s,stop:c}}function Pl(e,t={width:0,height:0},a={}){const{window:l=se,box:o="content-box"}=a,r=A(()=>{var u,d;return(d=(u=V(e))==null?void 0:u.namespaceURI)==null?void 0:d.includes("svg")}),n=b(t.width),s=b(t.height);return xl(e,([u])=>{const d=o==="border-box"?u.borderBoxSize:o==="content-box"?u.contentBoxSize:u.devicePixelContentBoxSize;if(l&&r.value){const c=V(e);if(c){const v=l.getComputedStyle(c);n.value=parseFloat(v.width),s.value=parseFloat(v.height)}}else if(d){const c=Array.isArray(d)?d:[d];n.value=c.reduce((v,{inlineSize:i})=>v+i,0),s.value=c.reduce((v,{blockSize:i})=>v+i,0)}else n.value=u.contentRect.width,s.value=u.contentRect.height},a),q(()=>V(e),u=>{n.value=u?t.width:0,s.value=u?t.height:0}),{width:n,height:s}}J.mounted+"";function gt(e,{window:t=se,scrollTarget:a}={}){const l=b(!1),o=()=>{if(!t)return;const r=t.document,n=V(e);if(!n)l.value=!1;else{const s=n.getBoundingClientRect();l.value=s.top<=(t.innerHeight||r.documentElement.clientHeight)&&s.left<=(t.innerWidth||r.documentElement.clientWidth)&&s.bottom>=0&&s.right>=0}};return q(()=>V(e),()=>o(),{immediate:!0,flush:"post"}),t&&j(a||t,"scroll",o,{capture:!1,passive:!0}),l}J.mounted+"";const bt=1;function ze(e,t={}){const{throttle:a=0,idle:l=200,onStop:o=Y,onScroll:r=Y,offset:n={left:0,right:0,top:0,bottom:0},eventListenerOptions:s={capture:!1,passive:!0},behavior:u="auto"}=t,d=b(0),c=b(0),v=A({get(){return d.value},set(E){f(E,void 0)}}),i=A({get(){return c.value},set(E){f(void 0,E)}});function f(E,_){var T,x,Q;const C=R(e);!C||(Q=C instanceof Document?document.body:C)==null||Q.scrollTo({top:(T=R(_))!=null?T:i.value,left:(x=R(E))!=null?x:v.value,behavior:R(u)})}const O=b(!1),$=be({left:!0,right:!1,top:!0,bottom:!1}),w=be({left:!1,right:!1,top:!1,bottom:!1}),I=E=>{!O.value||(O.value=!1,w.left=!1,w.right=!1,w.top=!1,w.bottom=!1,o(E))},M=ja(I,a+l),D=E=>{const _=E.target===document?E.target.documentElement:E.target,T=_.scrollLeft;w.left=T<d.value,w.right=T>c.value,$.left=T<=0+(n.left||0),$.right=T+_.clientWidth>=_.scrollWidth-(n.right||0)-bt,d.value=T;let x=_.scrollTop;E.target===document&&!x&&(x=document.body.scrollTop),w.top=x<c.value,w.bottom=x>c.value,$.top=x<=0+(n.top||0),$.bottom=x+_.clientHeight>=_.scrollHeight-(n.bottom||0)-bt,c.value=x,O.value=!0,M(E),r(E)};return j(e,"scroll",a?Fa(D,a,!0,!1):D,s),j(e,"scrollend",I,s),{x:v,y:i,isScrolling:O,arrivedState:$,directions:w}}var Cl=Object.defineProperty,Nl=Object.defineProperties,ql=Object.getOwnPropertyDescriptors,_t=Object.getOwnPropertySymbols,El=Object.prototype.hasOwnProperty,Tl=Object.prototype.propertyIsEnumerable,wt=(e,t,a)=>t in e?Cl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Ot=(e,t)=>{for(var a in t||(t={}))El.call(t,a)&&wt(e,a,t[a]);if(_t)for(var a of _t(t))Tl.call(t,a)&&wt(e,a,t[a]);return e},Il=(e,t)=>Nl(e,ql(t));function St(e,t,a={}){var l,o;const r=(l=a.direction)!=null?l:"bottom",n=be(ze(e,Il(Ot({},a),{offset:Ot({[r]:(o=a.distance)!=null?o:0},a.offset)})));q(()=>n.arrivedState[r],async s=>{var u,d;if(s){const c=R(e),v={height:(u=c==null?void 0:c.scrollHeight)!=null?u:0,width:(d=c==null?void 0:c.scrollWidth)!=null?d:0};await t(n),a.preserveScrollPosition&&c&&G(()=>{c.scrollTo({top:c.scrollHeight-v.height,left:c.scrollWidth-v.width})})}})}J.mounted+"";function $t(e,t,a={}){const{root:l,rootMargin:o="0px",threshold:r=.1,window:n=se}=a,s=kt(()=>n&&"IntersectionObserver"in n);let u=Y;const d=s.value?q(()=>({el:V(e),root:V(l)}),({el:v,root:i})=>{if(u(),!v)return;const f=new IntersectionObserver(t,{root:i,rootMargin:o,threshold:r});f.observe(v),u=()=>{f.disconnect(),u=Y}},{immediate:!0,flush:"post"}):Y,c=()=>{u(),d()};return ne(c),{isSupported:s,stop:c}}J.mounted+"";var Al=Object.defineProperty,Dl=Object.defineProperties,kl=Object.getOwnPropertyDescriptors,xt=Object.getOwnPropertySymbols,Ml=Object.prototype.hasOwnProperty,Ql=Object.prototype.propertyIsEnumerable,Pt=(e,t,a)=>t in e?Al(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Ll=(e,t)=>{for(var a in t||(t={}))Ml.call(t,a)&&Pt(e,a,t[a]);if(xt)for(var a of xt(t))Ql.call(t,a)&&Pt(e,a,t[a]);return e},Bl=(e,t)=>Dl(e,kl(t));J.mounted+"";function Mt(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientHeight<e.scrollHeight||t.overflowY==="auto"&&e.clientWidth<e.scrollWidth)return!0;{const a=e.parentNode;return!a||a.tagName==="BODY"?!1:Mt(a)}}function Rl(e){const t=e||window.event,a=t.target;return Mt(a)?!1:t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)}function Vl(e,t=!1){const a=b(t);let l=null,o;q(za(e),s=>{if(s){const u=s;o=u.style.overflow,a.value&&(u.style.overflow="hidden")}},{immediate:!0});const r=()=>{const s=R(e);!s||a.value||(Ve&&(l=j(s,"touchmove",u=>{Rl(u)},{passive:!1})),s.style.overflow="hidden",a.value=!0)},n=()=>{const s=R(e);!s||!a.value||(Ve&&(l==null||l()),s.style.overflow=o,a.value=!1)};return ne(n),A({get(){return a.value},set(s){s?r():n()}})}const Hl=()=>{let e=!1;const t=b(!1);return(a,l)=>{if(t.value=l.value,e)return;e=!0;const o=Vl(a,l.value);q(t,r=>o.value=r)}};Hl();var Ul=Object.defineProperty,jl=Object.defineProperties,Fl=Object.getOwnPropertyDescriptors,Ct=Object.getOwnPropertySymbols,zl=Object.prototype.hasOwnProperty,Wl=Object.prototype.propertyIsEnumerable,Nt=(e,t,a)=>t in e?Ul(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Kl=(e,t)=>{for(var a in t||(t={}))zl.call(t,a)&&Nt(e,a,t[a]);if(Ct)for(var a of Ct(t))Wl.call(t,a)&&Nt(e,a,t[a]);return e},Gl=(e,t)=>jl(e,Fl(t));const Qt=ca({name:"UseTimeAgo",props:["time","updateInterval","max","fullDateFormatter","messages","showSecond"],setup(e,{slots:t}){const a=be(ul(()=>e.time,Gl(Kl({},e),{controls:!0})));return()=>{if(t.default)return t.default(a)}}}),Xl={class:"q-pa-md row justify-center"},Yl={class:"row justify-center q-my-md"},Zl={key:0},Jl={__name:"chatLog",props:{conversation:{type:Object,default:()=>({})}},setup(e){const t=e,a=Tt(),{getMessageNotification:l}=Me(a),o=b(null),r=b([]),n=b(20),s=c=>{const v=[...r.value,...c].sort((O,$)=>new Date(O.createdAt)-new Date($.createdAt)),i=[],f=new Map;for(const O of v)f.has(O.id)||(f.set(O.id,!0),i.push(O));t.conversation.id==="new"?r.value=[]:r.value=i},u=(c,v)=>te.getMessages({filters:{conversation:{id:c}},populate:{createdByUser:!0,contact:!0,conversation:{filters:{id:c}}},sort:"createdAt:desc",pagination:{page:v,pageSize:n.value}}).then(i=>{const f=i.data.length===0||i.data.length<n.value;return(!f||i.data.length>0)&&s(i.data),f}),d=async(c,v)=>{t.conversation.id==="new"||t.conversation.id==="placeHolder"||t.conversation.id==="no"?v(!0):u(t.conversation.id,c).then(i=>{v(i)})};return q(()=>t.conversation,async(c,v)=>{c.id!==v.id&&(r.value=[])}),q(l,()=>{l.value.conversation&&l.value.conversation.id===t.conversation.id&&(s([l.value]),l.value.direction==="inbound"&&te.readConversation(t.conversation.id),G(()=>{const c=document.querySelector("#conversation-layout div.scroll");c.scrollTop=c.scrollHeight}))}),(c,v)=>(P(),X("div",Xl,[(P(),k(La,{style:{width:"100%"},reverse:"",onLoad:d,ref_key:"messageScroll",ref:o,key:e.conversation.id},{loading:h(()=>[_e("div",Yl,[g(da,{color:"primary",name:"dots",size:"40px"})])]),default:h(()=>[(P(!0),X(Qe,null,Le(r.value,(i,f)=>(P(),X("div",{key:f},[g(Qa,{sent:i.direction==="outbound-api",name:i.direction==="inbound"?f>0&&r.value[f-1].direction==="inbound"&&r.value[f-1].conversation.name===r.value[f].conversation.name?"":e.conversation.name:i.createdByUser?i.createdByUser.firstName?f>0&&r.value[f-1].direction==="outbound-api"&&r.value[f-1].createdByUser&&`${r.value[f-1].createdByUser.firstName||""} ${r.value[f-1].createdByUser.lastName||""}`==`${i.createdByUser.firstName} ${i.createdByUser.lastName}`?"":`${i.createdByUser.firstName} ${i.createdByUser.lastName}`:f>0&&r.value[f-1].direction==="outbound-api"&&`${r.value[f-1].createdByUser&&r.value[f-1].createdByUser.username||""}`==`${i.createdByUser.username||""}`?"":`${i.createdByUser.username||""}`:"System Admin","text-color":i.direction==="outbound-api"?"white":"","bg-color":i.direction==="outbound-api"?"primary":"amber"},{stamp:h(()=>[g(K(Qt),{time:i.createdAt},{default:h(({timeAgo:O})=>[F(W(O),1)]),_:2},1032,["time"])]),avatar:h(()=>[g(Be,{class:ge(["q-message-avatar",{"q-message-avatar--sent":i.direction==="outbound-api","q-message-avatar--received":i.direction==="inbound"}]),color:i.direction==="outbound-api"?"primary":"amber"},{default:h(()=>[g(Re,{name:"person"})]),_:2},1032,["class","color"])]),default:h(()=>[_e("div",null,[F(W(i.body)+" ",1),i.numMedia>0?(P(),X("div",Zl,[(P(!0),X(Qe,null,Le(i.mediaUrl,(O,$)=>(P(),k(Ca,{src:O,fit:"contain","spinner-color":"white",style:{height:"150px","max-width":"300px",width:"100%"},key:$},null,8,["src"]))),128))])):U("",!0)])]),_:2},1032,["sent","name","text-color","bg-color"])]))),128))]),_:1}))]))}},eo={class:"q-pa-md",style:{height:"92vh"}},to={key:0,class:"text-caption"},ao={key:0},lo={class:"text-center q-my-md"},oo={key:1,class:"q-pa-md row justify-center text-h5"},ro={class:"text-h6"},no={key:0,class:"text-caption"},Bo={__name:"index",setup(e){Pa();const t=fa(),a=va(),l=Tt(),o=Na(),{userOffices:r}=Me(o),{fetchConversations:n,setConversation:s,setSelectedOffice:u}=l,{getConversations:d,getConversationsAlt:c,getConversationsMeta:v,getUnReadCount:i,getSelectedOffice:f}=Me(l),{t:O}=Ta(),$=b(null),w=b(null),I=b(null),M=b(50),D=b(null),E=b(!1),_=b(""),T=b(""),x=b(""),Q=b(10),C=b(!1);b([{value:!0,label:"UnRead",slot:"one"},{value:!1,label:"All",slot:"two"}]);const Se=b(!0),H=b(0),ue=b(!1),Lt=b({right:"4px",borderRadius:"5px",backgroundColor:"#8A2A2B",width:"5px",opacity:.75}),Bt=b({right:"2px",borderRadius:"9px",backgroundColor:"#8A2A2B",width:"9px",opacity:.2}),Rt=A(()=>{const m=new RegExp("^[0-9]{"+Q.value+"}","g");return Ea().matches(m,{excludeEmptyString:!0,message:`${O("validPhoneIsRequired")}`}).nullable()}),{errorMessage:$e,value:ee}=Ia("phone",Rt);b([]);const Vt={background:"#D3D3D3"},L=b(!1),ie=async m=>{if(m===!0&&H.value===0)H.value+=1,n(H.value,M.value,!0,!1).then(()=>{d.value(C.value).length>=v.value.pagination.total&&(ue.value=!0),L.value=!1});else if(!L.value&&!xe.value){L.value=!0;let p=!1;H.value===0&&(p=!0,de()),C.value===!0?i.value===d.value(C.value).length?(L.value=!1,ue.value=!0):(H.value+=1,n(H.value,M.value,p,!1).then(y=>{i.value!==d.value(C.value).length&&(d.value(C.value).length>=M.value?(d.value(C.value).length>=v.value.pagination.total&&(ue.value=!0),L.value=!1):setTimeout(function(){ie()},1e3)),d.value(C.value).length>=v.value.pagination.total&&(ue.value=!0),L.value=!1})):d.value(C.value).length>=v.value.pagination.total?(ue.value=!0,L.value=!1):(H.value+=1,n(H.value,M.value,p,!1).then(y=>{d.value(C.value).length>=v.value.pagination.total&&(ue.value=!0),L.value=!1}))}},ce=b(!0),Ge=b(null),xe=b(!1),me=b(""),S=b(null),Ht=async m=>{await te.unReadConversation(m.id),de()},Xe=m=>{de(),S.value=m,_.value=m.name,T.value=m.contacts?m.contacts[0].firstName:"",x.value=m.contacts?m.contacts[0].lastName:"",ee.value="",$.value=null,w.value=null,I.value=null,m.unread&&(te.readConversation(m.id),m.unread=!1)};Ke(()=>{H.value=0,ie(!0)}),q(f,(m,p)=>{de(),D.value.setScrollPosition("vertical",0,100),C.value=!1,Se.value=!0,H.value=0,G(()=>{ie()})}),q(C,(m,p)=>{D.value.setScrollPosition("vertical",0,100),m===!0&&(de(),i.value!==d.value(C.value).length&&ie())});const Ut=m=>{m.verticalPercentage>.95&&(L.value||ie())},pe=async()=>{const m={data:{phoneNumber:ee.value,type:"phoneNumber",...w.value&&{firstName:w.value},...I.value&&{lastName:I.value}}},p=await te.createContact(m),y={...p.data};if(delete y.conversations,p.data.valid===!0&&f.value&&f.value[48]&&p.data.conversations.length>0){const B=p.data.conversations.find(Z=>Z.twilio_messaging_service.sid===f.value[48]);if(B)B.contacts=[y],Xe(B);else{const Z=new Date;let ye=`${p.data.firstName} ${p.data.lastName}`;p.data.firstName||(ye=p.data.nationalFormat),S.value={id:"placeHolder",createdAt:Z,lastMessage:{},lastMessageDateTime:Z,contacts:[y],name:ye,readBy:[],twilioEnabled:!0,twilio_messaging_service:{sid:f.value[48]},type:"Direct",unread:!1,updatedAt:Z},ee.value="",$.value=null,w.value=null,I.value=null}}else if(p.data.valid===!0&&f.value&&f.value[48]){const B=new Date;let Z=`${p.data.firstName} ${p.data.lastName}`;p.data.firstName||(Z=p.data.nationalFormat),S.value={id:"placeHolder",createdAt:B,lastMessage:{},lastMessageDateTime:B,contacts:[y],name:Z,readBy:[],twilioEnabled:!0,twilio_messaging_service:{sid:f.value[48]},type:"Direct",unread:!1,updatedAt:B},ee.value="",$.value=""}},Pe=()=>{const m=new Date;S.value={id:"new",createdAt:m,lastMessage:{},lastMessageDateTime:m,name:"",readBy:[],twilioEnabled:!0,twilio_messaging_service:{},type:"Direct",unread:!1,archive:!1,updatedAt:m},Ge.value===!1&&ce.value===!0&&(ce.value=!1),G(()=>{document.querySelector("#phoneNumber").focus()})},de=async()=>{const m=new Date;return S.value={id:"no",createdAt:m,lastMessage:{},lastMessageDateTime:m,name:"Select a conversation",readBy:[],twilioEnabled:!0,twilio_messaging_service:{},type:"Direct",unread:!1,archive:!1,updatedAt:m},!0},jt=m=>{m.contacts[0].valid===!0&&m.twilio_messaging_service?te.sendMessage({data:{body:me.value,to:m.contacts[0].phoneNumber,messagingServiceSid:m.twilio_messaging_service.sid,direction:"outbound-api",twilioMessage:!0}}).then(()=>{me.value="",m.id==="placeHolder"?(D.value.setScrollPosition("vertical",0,100),H.value=0,ie(!0)):m.archive===!0&&Ne(!1)}):console.log("not valid phone number")},Ce=async()=>{const m=`${T.value} ${x.value}`,p={data:{name:m}},y={data:{firstName:T.value,lastName:x.value}};if(S.value){S.value.name=m;const B=te.updateContact(S.value.contacts[0].id,y),Z=te.updateConversation(S.value.id,p),ye=await B,qe=await Z;return qe.data.contacts=[ye.data],s({data:qe.data}),qe}},Ne=async m=>{const p={data:{archive:m}};if(S.value){S.value.archive=m;const B=await te.updateConversation(S.value.id,p);return m===!0?(L.value=!0,await de(),n(1,M.value,!0,!1).then(()=>{L.value=!1})):(L.value=!0,n(1,M.value,!0,!1).then(()=>{L.value=!1})),B}},Ft=m=>{Q.value=m},zt=m=>{xe.value=!0,Ge.value=m,setTimeout(()=>{xe.value=!1},1e3)};if(t.query.phoneNumber||t.query.office_id){t.query.office_id&&G(()=>{const p=r.value("read").find(y=>Number(y[8])===Number(t.query.office_id));p&&u(p,!0)}),t.query.firstName&&(w.value=t.query.firstName),t.query.lastName&&(I.value=t.query.lastName),t.query.phoneNumber&&($.value=t.query.phoneNumber.replace(/\D+/g,""),Pe(),ee.value=$.value.substr($.value.length-10),G(()=>{pe()}));const m=Object.assign({},t.query);delete m.phoneNumber,delete m.office_id,delete m.firstName,delete m.lastName,a.replace({query:m})}return q(()=>t.query,()=>{if(t.query.phoneNumber||t.query.office_id){t.query.office_id&&G(()=>{const p=r.value("read").find(y=>Number(y[8])===Number(t.query.office_id));p&&u(p,!0)}),t.query.firstName&&(w.value=t.query.firstName),t.query.lastName&&(I.value=t.query.lastName),t.query.phoneNumber&&($.value=t.query.phoneNumber.replace(/\D+/g,""),Pe(),ee.value=$.value.substr($.value.length-10),G(()=>{pe()}));const m=Object.assign({},t.query);delete m.phoneNumber,delete m.office_id,delete m.firstName,delete m.lastName,a.replace({query:m})}}),(m,p)=>(P(),X("div",eo,[g(Ze,{flat:""}),g($a,{view:"lHh Lpr lFf",container:"",style:{height:"100%"},class:"shadow-2 rounded-borders bg-grey-3",id:"conversation-layout"},{default:h(()=>[S.value?(P(),k(ya,{key:0,bordered:"",class:"bg-white text-black",style:{height:"57px"}},{default:h(()=>[g(ga,null,{default:h(()=>[g(ae,{dense:"",flat:"",round:"",icon:"menu",onClick:p[0]||(p[0]=y=>ce.value=!ce.value)}),!S.value||S.value.id==="new"?(P(),k(at,{key:0},{default:h(()=>[g(qa,{for:"phoneNumber",modelValue:K(ee),"onUpdate:modelValue":p[1]||(p[1]=y=>Et(ee)?ee.value=y:null),label:m.$t("phoneNumber"),tabindex:"0",onMaxLengthChanged:Ft,style:Je(K($e)?"padding-bottom: 20px; max-width: 250px;":"padding-bottom: 0px; max-width: 250px;"),error:!!K($e),"error-message":K($e),readonly:!1,editIcon:!1,onAddClicked:pe,onKeyup:Ae(pe,["enter"])},null,8,["modelValue","label","style","error","error-message","onKeyup"])]),_:1})):(P(),k(at,{key:1},{default:h(()=>[F(W(S.value.name)+" ",1),S.value.contacts&&S.value.contacts[0]?(P(),X("span",to,W(S.value.contacts[0].nationalFormat),1)):U("",!0),S.value.contacts&&S.value.contacts[0]?(P(),k(ae,{key:1,color:"accent",flat:"",dense:"",round:"",icon:"edit",size:"sm",onClick:p[2]||(p[2]=y=>E.value=!0)})):U("",!0)]),_:1})),g(ae,{dense:"",flat:"",round:"",icon:"more_vert"},{default:h(()=>[g(ha,null,{default:h(()=>[S.value.contacts&&S.value.contacts[0]?(P(),k(ke,{key:0,style:{"min-width":"100px"}},{default:h(()=>[le((P(),k(oe,{clickable:""},{default:h(()=>[g(z,{onClick:p[3]||(p[3]=y=>E.value=!0)},{default:h(()=>[F("Edit")]),_:1})]),_:1})),[[fe]]),S.value.unread===!1?le((P(),k(oe,{key:0,clickable:""},{default:h(()=>[g(z,{onClick:p[4]||(p[4]=y=>Ht(S.value))},{default:h(()=>[F("Mark Un-Read")]),_:1})]),_:1})),[[fe]]):U("",!0),le((P(),k(oe,{clickable:""},{default:h(()=>[S.value.archive===!1?(P(),k(z,{key:0,onClick:p[5]||(p[5]=y=>Ne(!0))},{default:h(()=>[F("Archive")]),_:1})):U("",!0),S.value.archive===!0?(P(),k(z,{key:1,onClick:p[6]||(p[6]=y=>Ne(!1))},{default:h(()=>[F("Unarchive")]),_:1})):U("",!0)]),_:1})),[[fe]])]),_:1})):U("",!0)]),_:1})]),_:1})]),_:1})]),_:1})):U("",!0),g(wa,{"show-if-above":"",modelValue:ce.value,"onUpdate:modelValue":p[10]||(p[10]=y=>ce.value=y),side:"left",width:350,bordered:"",onOnLayout:zt,style:{height:"calc(100% - 200px)","margin-top":"185px","border-right":"1px solid #ddd"}},{default:h(()=>[g(ke,{separator:"",class:"absolute-top"},{default:h(()=>[K(f)?le((P(),k(oe,{key:0,clickable:"",onClick:p[7]||(p[7]=y=>Pe())},{default:h(()=>[g(z,{avatar:"",top:""},{default:h(()=>[g(Be,{icon:"add",color:"grey","text-color":"white"})]),_:1}),g(z,null,{default:h(()=>[F("New Message")]),_:1})]),_:1})),[[et]]):U("",!0),g(oe,null,{default:h(()=>[g(z,null,{default:h(()=>[g(Aa,{styleSelection:!0,twilio:!0})]),_:1})]),_:1}),g(oe,null,{default:h(()=>[g(z,null,{default:h(()=>[g(_a,{rounded:"",spread:""},{default:h(()=>[g(ae,{rounded:"",color:C.value===!0?"primary":"","text-color":C.value===!1?"black":"white",label:"UnRead",onClick:p[8]||(p[8]=y=>C.value=!0)},{default:h(()=>[g(ba,{color:"accent",floating:""},{default:h(()=>[F(W(K(i)),1)]),_:1})]),_:1},8,["color","text-color"]),g(ae,{rounded:"",color:C.value===!1?"primary":"","text-color":C.value===!0?"black":"white",label:"All",split:"",onClick:p[9]||(p[9]=y=>C.value=!1)},null,8,["color","text-color"])]),_:1})]),_:1})]),_:1})]),_:1}),g(Oa,{id:"scroll-id",style:{height:"85% !important",overflow:"auto"},"thumb-style":Lt.value,"bar-style":Bt.value,ref_key:"scrollTargetRef",ref:D,onScroll:Ut},{default:h(()=>[g(ke,{bordered:"",style:{width:"350px"}},{loading:h(()=>[_e("div",lo,[g(ka,{color:"primary",size:"40px"})])]),default:h(()=>[(P(!0),X(Qe,null,Le(K(d)(C.value),y=>le((P(),k(oe,{key:y.id,clickable:"",onClick:B=>Xe(y),style:Je(S.value&&S.value.id===y.id?Vt:null)},{default:h(()=>[g(z,{avatar:""},{default:h(()=>[g(Be,{color:"primary","text-color":"white"},{default:h(()=>[y.letter?(P(),X("span",ao,W(y.letter),1)):(P(),k(Re,{key:1,name:"person"}))]),_:2},1024)]),_:2},1024),g(z,null,{default:h(()=>[g(lt,{lines:"1",class:ge({"text-bold":y.unread})},{default:h(()=>[F(W(y.name),1)]),_:2},1032,["class"]),g(lt,{caption:"",lines:"2",class:ge({"text-bold":y.unread,"text-black":y.unread})},{default:h(()=>[y.lastMessage&&y.lastMessage.body?(P(),k(Re,{key:0,size:"xs",name:y.lastMessage.direction==="inbound"?"call_received":"call_made",color:y.lastMessage.direction==="inbound"?"green":"red"},null,8,["name","color"])):U("",!0),F(" "+W(y.lastMessage&&y.lastMessage.body),1)]),_:2},1032,["class"])]),_:2},1024),g(z,{side:"",top:"",class:ge({"text-bold":y.unread,"text-black":y.unread})},{default:h(()=>[y.lastMessageDateTime?(P(),k(K(Qt),{key:0,time:new Date(y.lastMessageDateTime)},{default:h(({timeAgo:B})=>[F(W(B),1)]),_:2},1032,["time"])):U("",!0)]),_:2},1032,["class"])]),_:2},1032,["onClick","style"])),[[et]])),128))]),_:1})]),_:1},8,["thumb-style","bar-style"])]),_:1},8,["modelValue"]),g(Sa,null,{default:h(()=>[S.value?(P(),k(Jl,{key:0,conversation:S.value},null,8,["conversation"])):(P(),X("div",oo,"Select a conversation"))]),_:1}),g(ma,{modelValue:E.value,"onUpdate:modelValue":p[13]||(p[13]=y=>E.value=y),persistent:""},{default:h(()=>[g(Ze,{style:{"min-width":"350px"}},{default:h(()=>[g(tt,null,{default:h(()=>[_e("div",ro,W(_.value),1),S.value.contacts&&S.value.contacts[0]?(P(),X("span",no,W(S.value.contacts[0].nationalFormat),1)):U("",!0)]),_:1}),g(tt,{class:"q-pt-none"},{default:h(()=>[g(De,{modelValue:T.value,"onUpdate:modelValue":p[11]||(p[11]=y=>T.value=y),label:"First Name",autofocus:"",onKeyup:Ae(Ce,["enter"])},null,8,["modelValue","onKeyup"]),g(De,{modelValue:x.value,"onUpdate:modelValue":p[12]||(p[12]=y=>x.value=y),label:"Last Name",autofocus:"",onKeyup:Ae(Ce,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),g(pa,{align:"right",class:"text-primary"},{default:h(()=>[le(g(ae,{flat:"",label:"Cancel"},null,512),[[fe]]),le(g(ae,{flat:"",label:"Update",onClick:Ce},null,512),[[fe]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),S.value&&S.value.id!=="no"?(P(),k(Ma,{key:1,class:"bg-white"},{default:h(()=>[g(De,{autogrow:"",modelValue:me.value,"onUpdate:modelValue":p[15]||(p[15]=y=>me.value=y),placeholder:"Type a message",rounded:"",dense:"",standout:"",class:"q-py-sm",disable:S.value.id==="new"},{after:h(()=>[g(ae,{round:"",dense:"",flat:"",icon:"send",onClick:p[14]||(p[14]=y=>jt(S.value)),disabled:!S.value||S.value.id==="new"},null,8,["disabled"])]),_:1},8,["modelValue","disable"])]),_:1})):U("",!0)]),_:1})]))}};export{Bo as default};
