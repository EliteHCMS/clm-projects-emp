import{l as C,_ as L,A as o,aq as s,br as a,bP as S,d as t,bQ as $,ar as p,ax as H,ac as _,G as V,bR as z,b5 as m,bS as te,B as h,F as K,b4 as F,H as Q,r as y,bT as ae,bU as oe,bV as O,w as P,bW as w,D as b,bt as ne}from"./index.17026a2b.js";import{Q as se,a as N}from"./QHeader.3e8d1fd1.js";import{Q as re}from"./QMenu.4d2a3311.js";import{Q as j}from"./QToolbar.ef790ead.js";import{Q as ie}from"./QImg.2f4198d7.js";import{Q as B}from"./QList.682850d0.js";import{Q as G}from"./QSelect.e68edd31.js";import{Q as le,a as ue}from"./QDrawer.04be7612.js";import{Q as me,a as pe}from"./QLayout.ff3f5eed.js";import{C as de}from"./ClosePopup.cd565973.js";import{Q as ce}from"./QBadge.aeb102e5.js";import{M as fe,Q as ve}from"./MenuSubLink.7377b7c9.js";import{u as ge}from"./use-quasar.7f6ba4f2.js";import{u as ye}from"./i18n.b07e427c.js";import{u as ke,b as be,c as _e,q as R}from"./app.93e2a0c7.js";import{_ as he}from"./KioskLogin.325a1d77.js";import{_ as Se}from"./languageSelector.97bb9884.js";import{_ as Me}from"./version.75832ff3.js";import{h as A}from"./HelpDeskTicket.4b1c5051.js";import"./QResizeObserver.4404c27e.js";import"./position-engine.5bab3e8c.js";import"./selection.aeef7577.js";import"./QChip.86bbbbe5.js";import"./rtl.b51694b1.js";import"./TouchPan.b4ff373c.js";import"./touch.3df10340.js";import"./QSlideTransition.0dbb2659.js";import"./_commonjsHelpers.a26ce4be.js";import"./dayjs.2cadae4c.js";import"./localForage.4202533c.js";import"./api.16d24e31.js";import"./index.04bc0a32.js";import"./vee-validate.esm.bb573b35.js";import"./array.59f93f43.js";import"./QTooltip.5f2f1a47.js";import"./QFile.42df9d09.js";import"./QSpinnerGears.d5c11f3f.js";import"./QForm.786b7358.js";const qe=C({name:"MenuLink",props:{title:{type:String,required:!0},caption:{type:String,default:""},to:{type:Object,default:()=>({path:"",exact:!0})},icon:{type:String,default:""},mini:{type:Boolean,default:!1},subMenu:{type:Array,default:null},count:{type:Number,default:null}}});function we(e,r,v,i,g,d){return o(),s(z,{to:e.to,class:V(["rounded-borders bg-white",{"q-ma-sm":!e.mini,"q-ma-xs":e.mini}]),"active-class":e.mini?"brand-active-menu text-white":"brand-active-menu text-white q-py-md",exact:""},{default:a(()=>[e.icon?(o(),s(S,{key:0,avatar:""},{default:a(()=>[t($,{name:e.icon},null,8,["name"])]),_:1})):p("",!0),t(S,null,{default:a(()=>[t(G,null,{default:a(()=>[H(_(e.title),1)]),_:1})]),_:1}),e.count?(o(),s(S,{key:1,side:"",top:""},{default:a(()=>[t(ce,{color:"primary",label:e.count},null,8,["label"])]),_:1})):p("",!0)]),_:1},8,["to","class","active-class"])}var $e=L(qe,[["render",we]]);const Qe=C({name:"MenuExpanded",components:{MenuSubLink:fe},props:{title:{type:String,required:!0},caption:{type:String,default:""},to:{type:Object,default:()=>({path:"",exact:!0})},icon:{type:String,default:""},mini:{type:Boolean,default:!1},subMenu:{type:Array,default:null}}});function Ce(e,r,v,i,g,d){const c=m("MenuSubLink");return o(),s(ve,{icon:e.icon,label:e.title,class:V(["rounded-borders bg-white",{"q-ma-sm":!e.mini,"q-ma-xs":e.mini}]),"active-class":"brand-active-menu text-white",exact:""},{default:a(()=>[t(te),t(S,null,{default:a(()=>[t(B,null,{default:a(()=>[(o(!0),h(K,null,F(e.subMenu,l=>(o(),s(c,Q({key:l},l,{mini:e.mini}),null,16,["mini"]))),128))]),_:1})]),_:1})]),_:1},8,["icon","label","class"])}var Le=L(Qe,[["render",Ce]]);const Te=C({name:"MenuNav",components:{MenuLink:$e,MenuExpanded:Le},props:{title:{type:String,required:!0},caption:{type:String,default:""},to:{type:Object,default:()=>({path:"",exact:!0})},icon:{type:String,default:""},mini:{type:Boolean,default:!1},subMenu:{type:Array,default:null}}});function Ue(e,r,v,i,g,d){const c=m("MenuLink"),l=m("MenuExpanded");return o(),h("div",null,[!e.subMenu&&e.to?(o(),s(c,Q({key:0},{...e.$props,...e.$attrs},{mini:e.mini}),null,16,["mini"])):e.subMenu&&e.subMenu.length>0?(o(),s(l,Q({key:1},{...e.$props,...e.$attrs},{mini:e.mini}),null,16,["mini"])):p("",!0)])}var De=L(Te,[["render",Ue]]);const Be=C({name:"MainLayout",components:{MenuNav:De,kioskLogin:he,languageSelector:Se,version:Me,helpDeskTicket:A},setup(){const e=ge(),{locale:r}=ye(),v=y(!1),i=y(!1),g=y(!1),d=y(!1),c=y(!1),l=ae(),f=oe(),M=ke(),q=be(),T=_e(),{getUnReadCount:U}=O(T),{toolbarTitle:u}=q,{getUserType:W}=M,{onKiosk:k,activeMenu:J,pageType:X,startPageEnabled:E,kioskActive:Y,homeButtonEnabled:Z}=O(q),x=y(!1),D=async n=>{await R.checkKioskStatus(n)||(c.value=!0)};if(k.value&&D(!0),f.query&&f.query.office_id){const n=Object.assign({},f.query);delete n.office_id,delete n.qr,l.replace({query:n})}P(Y,n=>{!n&&k.value&&D()}),P(()=>f.query,async()=>{if(k.value&&D(!1),f.query.office_id){const n=Object.assign({},f.query);delete n.office_id,n.qr&&(R.checkInUser(),delete n.qr),l.replace({query:n})}});const I=async()=>{k.value&&(r.value="en-US"),M.logout().then(()=>{E.value&&k.value?l.replace({name:"start"}):l.replace({name:"login"})})},ee=()=>{I()};return{tab:y("mails"),userStore:M,leftDrawerOpen:v,rightDrawerOpen:g,miniState:i,miniHover:d,kioskPrompt:c,onIdle:ee,onKiosk:k,activeMenu:J,homeButtonEnabled:Z,miniMouseOver(){i.value===!0&&(d.value=!1)},miniMouseOut(){i.value===!0&&(d.value=!0)},toggleLeftDrawer(){e.screen.gt.sm?(i.value=!i.value,i.value===!0&&(d.value=!0)):v.value=!v.value},toggleRightDrawer(){g.value=!g.value},drawerClick(n){i.value&&(i.value=!1,n.stopPropagation())},logout:I,toolbarTitle:u,pageType:X,startPageEnabled:E,helpDeskTicket:A,addTicket:x,getUserType:W,getUnReadCount:U}}}),Ve={key:0,class:"q-mr-sm q-ml-sm",src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo-white.png",alt:"BrandSafway Logo",height:"25"},Ee={key:0},Ie={key:1},Oe={class:"q-gutter-sm row items-center no-wrap"},Pe={class:"row no-wrap q-pa-md"},Ne={class:"column items-center"},je={class:"text-subtitle1 q-mt-md q-mb-xs"};function Re(e,r,v,i,g,d){const c=m("languageSelector"),l=m("MenuNav"),f=m("router-view"),M=m("kioskLogin"),q=m("v-idle"),T=m("version"),U=m("helpDeskTicket");return o(),s(pe,{view:"hHh lpR fFf"},{default:a(()=>[t(se,{elevated:""},{default:a(()=>[t(j,{style:{height:"62px"}},{default:a(()=>[t(w,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),e.$q.screen.gt.sm?(o(),h("img",Ve)):p("",!0),t(N,null,{default:a(()=>[e.$q.screen.lt.sm?(o(),h("span",Ee)):(o(),h("span",Ie,_(e.toolbarTitle),1))]),_:1}),b("div",Oe,[t(c,{dense:"",borderless:"",class:"lang-white"}),t(w,{flat:"",dense:"",color:"white"},{default:a(()=>[b("div",null,_(e.userStore.getUser[35])+" "+_(e.userStore.getUser[37]),1),t($,{right:"",size:"2.2em",name:"account_circle"}),t(re,null,{default:a(()=>[b("div",Pe,[b("div",Ne,[t($,{right:"",size:"72px",name:"account_circle",class:"q-mr-md"}),b("div",je,_(e.userStore.getUser[35])+" "+_(e.userStore.getUser[37]),1),ne(t(w,{color:"primary",label:e.$t("logout"),push:"",size:"sm",onClick:e.logout},null,8,["label","onClick"]),[[de]])])])]),_:1})]),_:1})])]),_:1})]),_:1}),t(le,{modelValue:e.leftDrawerOpen,"onUpdate:modelValue":r[1]||(r[1]=u=>e.leftDrawerOpen=u),side:"left","show-if-above":"",bordered:"",mini:e.miniState&&e.miniHover,onMouseover:e.miniMouseOver,onMouseout:e.miniMouseOut,onClickCapture:e.drawerClick,class:"text-primary bg-white"},{default:a(()=>[t(ue,{class:"fit"},{default:a(()=>[e.$q.screen.lt.sm?(o(),s(j,{key:0,style:{height:"64px"}},{default:a(()=>[t(N,{class:"items-center"},{default:a(()=>[t(ie,{src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo.svg",style:{"max-width":"245px"},fit:"center",class:"q-ml-md"})]),_:1})]),_:1})):p("",!0),t(B,{class:"q-mt-sm"},{default:a(()=>[(o(!0),h(K,null,F(e.activeMenu,u=>(o(),s(l,Q({key:u.title},u,{mini:e.miniState}),null,16,["mini"]))),128))]),_:1}),e.getUserType==="Project User"||e.getUserType==="QuickBase User"?(o(),s(B,{key:1,class:"q-mt-sm"},{default:a(()=>[b("div",null,[t(z,{class:V(["rounded-borders bg-white",{"q-ma-sm":!e.miniState,"q-ma-xs":e.miniState}]),clickable:"",onClick:r[0]||(r[0]=u=>e.addTicket=!0)},{default:a(()=>[t(S,{avatar:""},{default:a(()=>[t($,{name:"fa-solid fa-circle-info"})]),_:1}),t(S,null,{default:a(()=>[t(G,null,{default:a(()=>[H("Request Support")]),_:1})]),_:1})]),_:1},8,["class"])])]),_:1})):p("",!0)]),_:1})]),_:1},8,["modelValue","mini","onMouseover","onMouseout","onClickCapture"]),t(me,null,{default:a(()=>[t(f)]),_:1}),e.onKiosk?(o(),s(M,{key:0,modelValue:e.kioskPrompt,"onUpdate:modelValue":r[2]||(r[2]=u=>e.kioskPrompt=u)},null,8,["modelValue"])):p("",!0),e.onKiosk?(o(),s(q,{key:1,onIdle:e.onIdle,duration:300,style:{display:"none"}},null,8,["onIdle"])):p("",!0),e.onKiosk&&e.startPageEnabled&&e.homeButtonEnabled?(o(),s(w,{key:2,icon:"o_home",onClick:e.onIdle,class:"z-max home-button-main",size:"xl",ripple:!0},null,8,["onClick"])):p("",!0),t(T),t(U,{modelValue:e.addTicket,"onUpdate:modelValue":r[3]||(r[3]=u=>e.addTicket=u)},null,8,["modelValue"])]),_:1})}var Qt=L(Be,[["render",Re]]);export{Qt as default};
