import{m as c,l}from"./index.5e954c71.js";import{q as a}from"./quickbase.80655e8b.js";import{localforage as u}from"./localForage.411e436b.js";import{dayjs as n}from"./dayjs.73f0a33b.js";const p=c("globalDataStore",{state:()=>({selectedProject:null,requests:{},classifications:{},nameRequest:{},inProcess:{},pending:{},deployments:{},assignments:{},releasesByAssignment:{},releases:{},employees:{},workdayData:{},requestedTimeStamps:{},disaStatusChecks:{},projectDisaRoster:{},rawAssignments:{},assignmentsByEmployee:{},releasesByEmployee:{},termReasons:[]}),getters:{getHireRequest:e=>s=>s?e.requests[s]?e.requests[s]:{}:{},getNameRequest:e=>s=>{if(s)return e.nameRequest[s]?e.nameRequest[s]:[];{let t=[];return Object.keys(e.nameRequest).forEach(r=>{t=t.concat(e.nameRequest[r])}),t}},getClassifications:e=>s=>{if(s)return e.classifications[s]?e.classifications[s]:[];{let t=[];return Object.keys(e.classifications).forEach(r=>{t=t.concat(e.classifications[r])}),t}},getInProcess:e=>s=>{if(s)return e.inProcess[s]?e.inProcess[s]:[];{let t=[];return Object.keys(e.inProcess).forEach(r=>{t=t.concat(e.inProcess[r])}),t}},getPending:e=>s=>{if(s)return e.pending[s]?e.pending[s]:[];{let t=[];return Object.keys(e.pending).forEach(r=>{t=t.concat(e.pending[r])}),t}},getDeployments:e=>s=>{if(s)return e.deployments[s]?e.deployments[s]:[];{let t=[];return Object.keys(e.deployments).forEach(r=>{t=t.concat(e.deployments[r])}),t}},getAssignments:e=>s=>{if(s)return e.assignments[s]?e.assignments[s]:[];{let t=[];return Object.keys(e.assignments).forEach(r=>{t=t.concat(e.assignments[r])}),t}},getEmployees:e=>s=>{if(s)return e.employees[s]?e.employees[s]:[];{let t=[];return Object.keys(e.employees).forEach(r=>{t=t.concat(e.employees[r])}),t}},getWorkdayData:e=>s=>s&&e.workdayData[s]?e.workdayData[s]:null,getEmployee:e=>s=>s&&e.employees[s]?e.employees[s]:null,getAssignmentsByEmployee:e=>s=>s&&e.assignmentsByEmployee[s]?e.assignmentsByEmployee[s]:null,getReleases:e=>s=>s&&e.releases[s]?e.releases[s]:null,getReleasesByAssignment:e=>s=>s&&e.releasesByAssignment[s]?e.releasesByAssignment[s]:null,getReleasesByEmployee:e=>s=>s&&e.releasesByEmployee[s]?e.releasesByEmployee[s]:null,getRawAssignment:e=>s=>s&&e.rawAssignments[s]?e.rawAssignments[s]:null,getRequestedTimeStamps(e){return e.requestedTimeStamps},getDisaStatusChecks:e=>({id:s,key:t})=>s&&e.disaStatusChecks[s]&&e.disaStatusChecks[s][t]?e.disaStatusChecks[s][t]:null,getProjectDisaRoster:e=>s=>s?e.projectDisaRoster[s]?e.projectDisaRoster[s]:[]:null,getTermReasons:e=>()=>e.termReasons},actions:{setselectedProject(e,s){this.selectedProject=e},setTimeStamp({name:e,timeStamp:s,Id:t},r){if(this.requestedTimeStamps[t]?this.requestedTimeStamps[t][e]=s:this.requestedTimeStamps[t]={[e]:s},r){const i=JSON.parse(JSON.stringify(this.requestedTimeStamps));u.setItem(`${l.storageProcessTimeStamps}`,i)}},setTimeStampState(e){this.requestedTimeStamps=e},async fetchHireRequest(e){const s=this.getRequestedTimeStamps[e.requestId]||{};let t=!0;const r=[{9:{value:e.requestId},7:{value:"Table Record"},14:{value:266},6:{value:"bpzpyjbuy"}}];if(s.requests&&(s.requests.isBefore(n().subtract(1,"minute"))?t=!0:t=e.refresh?e.refresh:!1),t){this.setTimeStamp({Id:e.requestId,name:"request",timeStamp:n()},!0);const{data:i}=await a.fetchFromProjectsApp({fields:r},{action:"read",type:"request"});return this.setHireRequests({requestId:e.requestId,data:i},!0),{data:i}}else return{data:[]}},setHireRequests({requestId:e,data:s},t){this.requests[e]=s,t&&u.setItem(`view_hire_request_${e}`,s)},async fetchClassifications(e){const s=this.getRequestedTimeStamps[e.id]||{};let t=!0;const r=[{9:{value:e.id},7:{value:"Classifications By Request"}}];if(s.classifications&&(s.classifications.isBefore(n().subtract(1,"minute"))?t=!0:t=e.refresh?e.refresh:!1),t){this.setTimeStamp({id:e.id,name:"classifications",timeStamp:n()},!0);const{data:i}=await a.fetchFromProjectsApp({fields:r});return this.setClassifications({id:e.id,data:i},!0),{data:i}}else return{data:[]}},setClassifications({id:e,data:s},t){this.classifications[e]=s,t&&u.setItem(`${l.storageRequestClassifications}_${e}`,s)},async fetchNameRequest(e){const s=this.getRequestedTimeStamps[e.id]||{};let t=!0;const r=[{9:{value:e.id},7:{value:"Name Requests By Request"}}];if(s.nameRequest&&(s.nameRequest.isBefore(n().subtract(1,"minute"))?t=!0:t=e.refresh?e.refresh:!1),t){this.setTimeStamp({id:e.id,name:"nameRequest",timeStamp:n()},!0);const{data:i}=await a.fetchFromHiringApp({fields:r});return this.setNameRequest({id:e.id,data:i},!0),{data:i}}else return{data:[]}},setNameRequest({id:e,data:s},t){this.nameRequest[e]=s,t&&u.setItem(`${l.storageNameRequest}_${e}`,s)},async fetchInProcess(e){const s=this.getRequestedTimeStamps[e.requestId]||{};let t=!0;const r=[{6:{value:"bp3gawbee"},7:{value:"Table Query"},8:{value:`{'138'.EX.'${e.requestId}'}AND{'37'.EX.'In Process'}AND{'38'.EX.4}`},9:{value:1},14:{value:239}}];if(s.inProcess&&(s.inProcess.isBefore(n().subtract(1,"minute"))?t=!0:t=e.refresh?e.refresh:!1),t){this.setTimeStamp({requestId:e.requestId,name:"inProcess",timeStamp:n()},!0);const{data:i}=await a.fetchFromHiringApp({fields:r});return this.setInProcess({requestId:e.requestId,data:i},!0),{data:i}}else return{data:[]}},setInProcess({requestId:e,data:s},t){this.inProcess[e]=s,t&&u.setItem(`${l.storageInProcess}_${e}`,s)},async fetchPending(e){const s=this.getRequestedTimeStamps[e.requestId]||{};let t=!0;const r=[{6:{value:"bp3gaxedv"},7:{value:"Table Query"},8:{value:`{'95'.EX.'${e.requestId}'}AND{'17'.EX.'In Process'}AND{'24'.EX.5}`},9:{value:1},14:{value:193}}];if(s.pending&&(s.pending.isBefore(n().subtract(1,"minute"))?t=!0:t=e.refresh?e.refresh:!1),t){this.setTimeStamp({requestId:e.requestId,name:"pending",timeStamp:n()},!0);const{data:i}=await a.fetchFromHiringApp({fields:r});return this.setPending({requestId:e.requestId,data:i},!0),{data:i}}else return{data:[]}},setPending({requestId:e,data:s},t){this.pending[e]=s,t&&u.setItem(`${l.storagePending}_${e}`,s)},async fetchDeployments(e){const s=this.getRequestedTimeStamps[e.requestId]||{};let t=!0;const r=[{6:{value:"bp3gaymc3"},7:{value:"Table Query"},8:{value:`{'80'.EX.'${e.requestId}'}AND{'20'.EX.'In Process'}AND{'27'.EX.6}`},9:{value:1},14:{value:204}}];if(s.deployments&&(s.deployments.isBefore(n().subtract(1,"minute"))?t=!0:t=e.refresh?e.refresh:!1),t){this.setTimeStamp({requestId:e.requestId,name:"deployments",timeStamp:n()},!0);const{data:i}=await a.fetchFromHiringApp({fields:r});return this.setDeployments({requestId:e.requestId,data:i},!0),{data:i}}else return{data:[]}},async setDeployments({requestId:e,data:s},t){this.deployments[e]=s,t&&u.setItem(`${l.storageDeployments}_${e}`,s)},updateDeployment({requestId:e,key:s,record:t}){const r=this.deployments[e].findIndex(i=>i[3]===s);r>-1&&(this.deployments[e][r]=t)},async fetchAssignments(e){const s=this.getRequestedTimeStamps[e.requestId]||{};let t=!0;const r=[{6:{value:"bp3gazpqj"},7:{value:"Table Query"},8:{value:`{'109'.EX.'${e.requestId}'}AND{'21'.EX.'In Process'}AND{'102'.EX.'Active'}AND{'72'.EX.7}`},9:{value:1},14:{value:110}}];if(s.assignments&&(s.assignments.isBefore(n().subtract(1,"minute"))?t=!0:t=e.refresh?e.refresh:!1),t){this.setTimeStamp({requestId:e.requestId,name:"assignments",timeStamp:n()},!0);const{data:i}=await a.fetchFromHiringApp({fields:r});return this.setAssignments({requestId:e.requestId,data:i},!0),{data:i}}else return{data:[]}},async setAssignments({requestId:e,data:s},t){this.assignments[e]=s,t&&u.setItem(`${l.storageAssignments}_${e}`,s)},async fetchEmployees(e){const s=this.getRequestedTimeStamps[e.id]||{};let t=!0;const r=[{7:{value:"Employee"},9:{value:e.id}}];if(s.employees&&(s.employees.isBefore(n().subtract(1,"minute"))?t=!0:t=e.refresh?e.refresh:!1),t){this.setTimeStamp({employeeId:e.id,name:"employees",timeStamp:n()},!0);const{data:i}=await a.fetchFromHiringApp({fields:r});return this.setEmployees({id:e.id,data:i},!0),{data:i}}else return{data:[]}},async setEmployees({id:e,data:s},t){this.employees[e]=s,t&&u.setItem(`storage_employees_${e}`,s)},setWorkdayData({id:e,data:s}){this.workdayData[e]=s},setAssignmentsByEmployee({id:e,data:s}){this.assignmentsByEmployee[e]=s},setReleases({id:e,data:s}){this.releases[e]=s},setReleasesByAssignment({id:e,data:s}){this.releasesByAssignment[e]=s},setReleasesByEmployee({id:e,data:s}){this.releasesByEmployee[e]=s},setRawAssignments({id:e,data:s}){this.rawAssignments[e]=s},setTermReasons({reasons:e}){this.termReasons=e},setDisaStatusChecks({id:e,assignmentId:s,data:t,projectId:r},i){if(e&&t&&(this.disaStatusChecks[e]=t),s&&this.assignments[r]&&t){const o=this.assignments[r].findIndex(m=>m[3]===s);o>-1&&(this.assignments[r][o].employee[556]=t)}e&&t&&r&&(this.projectDisaRoster[r]&&Array.isArray(this.projectDisaRoster[r])?this.projectDisaRoster[r].push(t):(this.projectDisaRoster[r]=[],this.projectDisaRoster[r].push(t))),i&&e&&u.setItem(`clm_proj_disa_checks_${e}`,t)},async removeData({type:e,key:s,item:t,storageKey:r}){const i=this[e][s].findIndex(m=>m[3]===t[3]);i>-1&&this[e][s].splice(i,1);const o=this[e][s];u.removeItem(`${l[r]}_${s}`),u.getItem(`${l[r]}_${s}`)||u.setItem(`${l[r]}_${s}`,o)}}});export{p as u};
