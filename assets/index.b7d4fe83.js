import{c as q,bX as je,i as Xe,n as He,dx as Le,h as X,bW as D,bQ as re,cA as Oe,g as Ee,c0 as Ye,c3 as We,r as A,d8 as Ge,c8 as Ke,b0 as Ze,bY as xe,l as J,_ as F,b5 as O,A as d,B as _,d as l,br as r,D as c,ac as V,ar as C,cU as K,bO as $e,aq as y,cy as ye,G as Se,cT as T,F as oe,b4 as ie,cS as H,bT as be,ax as qe,y as Te,bV as Ue,bS as ea,cV as te,w as aa,H as ta,bU as oa}from"./index.35263bc9.js";import{Q as ve,a as sa,b as ge}from"./QTabPanels.1c4122ec.js";import{Q as la}from"./QTabs.3143048e.js";import{Q as Qe}from"./QPage.67abb418.js";import{u as Y}from"./use-quasar.b628893e.js";import{q as Q,u as ue,b as na}from"./app.60ab06c9.js";import{dayjs as Z}from"./dayjs.515e6981.js";import{a as z,c as ae,e as Pe}from"./array.59f93f43.js";import{a as he,b as ra}from"./useQuerySaver.d29ff9ee.js";import{u as se}from"./dataStore.92e4db50.js";import{a as de}from"./QSelect.f9a2629d.js";import{Q as Ce}from"./QForm.5a640d8d.js";import{a as Re,u as B}from"./vee-validate.esm.d32c6ea3.js";import{A as ia,a as da}from"./addNewCustomer.c0af1eb4.js";import{a as we,Q as Ve}from"./QTable.18445b6b.js";import{Q as me}from"./QTr.9478d68c.js";import{Q as fe}from"./QTd.9e0f420c.js";import{N as ua}from"./nameRequestData.d56485c5.js";import{P as ca}from"./projectPipeline.c3c9978a.js";import{u as Fe,P as ma,c as fa}from"./pay-rate-v2.e0a0f054.js";import{p as ba}from"./VueTelInput.8de4da77.js";import"./use-panel.6d6d7233.js";import"./touch.3df10340.js";import"./selection.03356054.js";import"./QResizeObserver.7080aea8.js";import"./rtl.b51694b1.js";import"./_commonjsHelpers.a26ce4be.js";import"./localForage.07bccd5e.js";import"./api.b1e79703.js";import"./index.04bc0a32.js";import"./i18n.e68020fa.js";import"./QChip.3e700a72.js";import"./QMenu.b9d1a35f.js";import"./position-engine.5ee61549.js";import"./states.03e3d448.js";import"./QList.9a0a68df.js";import"./QMarkupTable.6b2ffa72.js";import"./use-fullscreen.ebe2b650.js";import"./QSpinnerGears.20058bc2.js";import"./QTooltip.8631b5e8.js";import"./QInnerLoading.682c8919.js";import"./export-file.dc78ba05.js";const pa=["top","right","bottom","left"],Me={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>pa.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function Ie(e,a){return{formClass:q(()=>`q-fab--form-${e.square===!0?"square":"rounded"}`),stacked:q(()=>e.externalLabel===!1&&["top","bottom"].includes(e.labelPosition)),labelProps:q(()=>{if(e.externalLabel===!0){const u=e.hideLabel===null?a.value===!1:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${e.labelPosition}`+(u===!0?" q-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${e.labelPosition}`+(e.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:e.labelStyle}}})}}const Be={start:"self-end",center:"self-center",end:"self-start"},va=Object.keys(Be);var ne=je({name:"QFabAction",props:{...Me,icon:{type:String,default:""},anchor:{type:String,validator:e=>va.includes(e)},to:[String,Object],replace:Boolean},emits:["click"],setup(e,{slots:a,emit:u}){const t=Xe(Le,()=>({showing:{value:!0},onChildClick:He})),{formClass:m,labelProps:b}=Ie(e,t.showing),o=q(()=>{const v=Be[e.anchor];return m.value+(v!==void 0?` ${v}`:"")}),s=q(()=>e.disable===!0||t.showing.value!==!0);function n(v){t.onChildClick(v),u("click",v)}function N(){const v=[];return a.icon!==void 0?v.push(a.icon()):e.icon!==""&&v.push(X(re,{name:e.icon})),(e.label!==""||a.label!==void 0)&&v[b.value.action](X("div",b.value.data,a.label!==void 0?a.label():[e.label])),Oe(a.default,v)}const R=Ee();return Object.assign(R.proxy,{click:n}),()=>X(D,{class:o.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:s.value,onClick:n},N)}});const ga=["up","right","down","left"],ha=["left","center","right"];var De=je({name:"QFab",props:{...Me,...Ye,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{default:null},direction:{type:String,default:"right",validator:e=>ga.includes(e)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>ha.includes(e)}},emits:We,setup(e,{slots:a}){const u=A(null),t=A(e.modelValue===!0),m=Ge(),{proxy:{$q:b}}=Ee(),{formClass:o,labelProps:s}=Ie(e,t),n=q(()=>e.persistent!==!0),{hide:N,toggle:R}=Ke({showing:t,hideOnRouteChange:n}),v=q(()=>({opened:t.value})),k=q(()=>`q-fab z-fab row inline justify-center q-fab--align-${e.verticalActionsAlign} ${o.value}`+(t.value===!0?" q-fab--opened":" q-fab--closed")),S=q(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${e.direction} q-fab__actions--${t.value===!0?"opened":"closed"}`),f=q(()=>{const $={id:m,role:"menu"};return t.value!==!0&&($["aria-hidden"]="true"),$}),i=q(()=>`q-fab__icon-holder  q-fab__icon-holder--${t.value===!0?"opened":"closed"}`);function w($,L){const P=a[$],I=`q-fab__${$} absolute-full`;return P===void 0?X(re,{class:I,name:e[L]||b.iconSet.fab[L]}):X("div",{class:I},P(v.value))}function M(){const $=[];return e.hideIcon!==!0&&$.push(X("div",{class:i.value},[w("icon","icon"),w("active-icon","activeIcon")])),(e.label!==""||a.label!==void 0)&&$[s.value.action](X("div",s.value.data,a.label!==void 0?a.label(v.value):[e.label])),Oe(a.tooltip,$)}return Ze(Le,{showing:t,onChildClick($){N($),u.value!==null&&u.value.$el.focus()}}),()=>X("div",{class:k.value},[X(D,{ref:u,class:o.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":t.value===!0?"true":"false","aria-haspopup":"true","aria-controls":m,onClick:R},M),X("div",{class:S.value,...f.value},xe(a.default))])}});const ya=J({emits:["cancelEdit"],components:{AddProjectLocationForm:ia,AddCustomerForm:da},props:{config:Object},setup(e,{emit:a}){const u=A(null),t=A(null),m=A(!1),b=async()=>{const{type:f,initialValue:i}=e.config;if(f==="options"){const{getter:w}=e.config;t.value=await w(),u.value=t.value,R.value=i(u.value)}else R.value=i},o=q(()=>z({entry:e.config.formRules})),{meta:s,errors:n,handleSubmit:N}=Re({validationSchema:o}),{value:R}=B("entry"),v=(f,i)=>{const{filter:w}=e.config;f===""&&i(()=>{u.value=t.value}),i(()=>{const M=f.toLowerCase();u.value=w(t.value,M)})},k=f=>{m.value=!1,t.value.push(f),u.value.push(f),R.value=f},S=N(async f=>{const{setter:i}=e.config;await i(f.entry),a("cancelEdit")});return b(),{rawOptions:t,options:u,entry:R,formErrors:n,formMeta:s,submit:S,filterOptions:v,addNew:m,newOptionAdded:k}}}),qa={key:0,class:"q-pr-xl"},wa={class:"text-caption"},$a={key:0,class:"text-center bg-info"},Ca={key:0,class:"text-center bg-info"},Ra={key:1,class:"q-pr-xl"},ka={class:"text-caption"};function Na(e,a,u,t,m,b){const o=O("add-project-location-form"),s=O("add-customer-form");return d(),_("div",null,[l(Ce,{onSubmit:$e(e.submit,["prevent"])},{default:r(()=>[e.config.type==="options"?(d(),_("div",qa,[l(de,{class:"q-mb-sm",dense:"",label:`Select a ${e.config.fieldLabel}`,"transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.entry,"onUpdate:modelValue":a[3]||(a[3]=n=>e.entry=n),options:e.options,"option-label":e.config.optionLabel,"display-value":`${e.entry?e.entry[e.config.displayValue]:""}`,"bottom-slots":"",error:!!e.formErrors.entry,"stack-label":"","use-input":"","input-debounce":"0",onFilter:e.filterOptions,clearable:"",loading:!e.rawOptions,disable:!e.rawOptions},{error:r(()=>[c("div",wa,V(e.formErrors.entry),1)]),after:r(()=>[l(D,{type:"submit",color:"info",icon:"done",dense:"",onClick:e.submit},null,8,["onClick"]),l(D,{color:"dark",icon:"close",dense:"",onClick:a[0]||(a[0]=n=>e.$emit("cancelEdit"))})]),"after-options":r(()=>[e.config.allowNew&&e.options&&e.options.length>0?(d(),_("div",$a,[l(D,{flat:"",color:"white",label:`Add a New ${e.config.fieldLabel}`,onClick:a[1]||(a[1]=n=>e.addNew=!0)},null,8,["label"])])):C("",!0)]),"no-option":r(()=>[e.config.allowNew?(d(),_("div",Ca,[l(D,{flat:"",color:"white",label:`Add a New ${e.config.fieldLabel}`,onClick:a[2]||(a[2]=n=>e.addNew=!0)},null,8,["label"])])):C("",!0)]),_:1},8,["label","modelValue","options","option-label","display-value","error","onFilter","loading","disable"])])):C("",!0),e.config.type==="input"?(d(),_("div",Ra,[l(K,{class:"q-mb-sm",dense:"",label:e.config.fieldLabel,modelValue:e.entry,"onUpdate:modelValue":a[5]||(a[5]=n=>e.entry=n),"bottom-slots":"",error:!!e.formErrors.entry,"stack-label":""},{error:r(()=>[c("div",ka,V(e.formErrors.entry),1)]),after:r(()=>[l(D,{type:"submit",color:"info",icon:"done",dense:"",onClick:e.submit},null,8,["onClick"]),l(D,{color:"dark",icon:"close",dense:"",onClick:a[4]||(a[4]=n=>e.$emit("cancelEdit"))})]),_:1},8,["label","modelValue","error"])])):C("",!0)]),_:1},8,["onSubmit"]),l(ye,{modelValue:e.addNew,"onUpdate:modelValue":a[8]||(a[8]=n=>e.addNew=n)},{default:r(()=>[e.config.newType==="location"?(d(),y(o,{key:0,onCancelAdd:a[6]||(a[6]=n=>e.addNew=!1),onAddComplete:e.newOptionAdded},null,8,["onAddComplete"])):C("",!0),e.config.newType==="customer"?(d(),y(s,{key:1,onCancelAdd:a[7]||(a[7]=n=>e.addNew=!1),onAddComplete:e.newOptionAdded},null,8,["onAddComplete"])):C("",!0)]),_:1},8,["modelValue"])])}var _a=F(ya,[["render",Na]]);const Va=J({emits:[],props:{item:Object},components:{EditDetailsForm:_a},setup(e,{emit:a}){const u=A(!1),t=q(()=>{const{permission:m}=e.item.editable&&e.item.config?e.item.config:{action:null,subject:null};return m});return{edit:u,permission:t}}}),Aa={key:0,class:"row"},Sa={class:"col-12 col-md-4"},Pa={class:"col-12 col-md-8"};function Da(e,a,u,t,m,b){const o=O("edit-details-form");return d(),y(T,{class:"q-py-sm"},{default:r(()=>[e.edit?(d(),y(o,{key:1,type:e.item.label,config:e.item.config,onCancelEdit:a[1]||(a[1]=s=>e.edit=!1)},null,8,["type","config"])):(d(),_("div",Aa,[c("div",Sa,[c("div",null,[c("span",{class:Se(e.$q.screen.gt.lg?"text-body2":"text-caption")},V(e.item.label),3)])]),c("div",Pa,[c("div",null,[c("span",{class:Se(["text-weight-light",e.$q.screen.gt.lg?"text-body2":"text-caption"])},V(e.item.value),3),e.item.editable&&e.$can(e.permission.action,e.permission.subject)?(d(),y(D,{key:0,color:"accent",flat:"",dense:"",round:"",icon:"edit",size:"sm",onClick:a[0]||(a[0]=s=>e.edit=!0)})):C("",!0)])])]))]),_:1})}var ja=F(Va,[["render",Da]]);const La=J({props:{title:String,details:Array},components:{DetailsSection:ja}}),Oa={class:"text-body1 text-white"};function Ea(e,a,u,t,m,b){const o=O("details-section");return d(),_("div",null,[l(H,{class:"text-dark q-pb-sm"},{default:r(()=>[e.title&&e.title!==""?(d(),y(T,{key:0,class:"bg-info q-py-sm"},{default:r(()=>[c("div",Oa,V(e.title.toUpperCase()),1)]),_:1})):C("",!0),(d(!0),_(oe,null,ie(e.details,s=>(d(),_(oe,{key:s},[s.hide?C("",!0):(d(),y(o,{key:0,item:s},null,8,["item"]))],64))),128))]),_:1})])}var Ta=F(La,[["render",Ea]]);const Ua=J({props:{rows:Array},setup(e,a){const u=Y();be();const t=q(()=>u.screen.gt.sm?[{name:1,label:"Created",align:"left",field:o=>o[1].$d,format:o=>`${Z(o).format("L LT")}`,sortable:!0},{name:2,label:"ID",align:"left",field:o=>o[3],format:o=>`${o}`,sortable:!0,required:!0},{name:3,label:"Classification",align:"left",field:o=>o[21],format:o=>`${o===""?"Open":o}`,sortable:!0,required:!0},{name:4,label:"Status",align:"left",field:o=>o[17],format:o=>`${o}`,sortable:!0},{name:5,label:"Rate",align:"left",field:o=>o[23],format:o=>`$ ${o.toFixed(2)}`,sortable:!0,required:!0},{name:6,label:"# Requested",align:"right",field:o=>o[18],format:o=>`${o}`},{name:7,label:"Offers",align:"right",field:o=>m(o),format:o=>`${o}`,sortable:!0,required:!0},{name:8,label:"# Names",align:"right",field:o=>o.names,format:o=>o?o.length:0,sortable:!0,required:!0},{name:9,label:"Balance",align:"right",field:o=>b(o),format:o=>`${o}`,sortable:!0,required:!0}]:[]);function m(o){return o.offers.filter(s=>s[21]==="Accepted").length}function b(o){const s=m(o);return o[18]-s}return{columns:t,props:e}}}),Qa={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function Fa(e,a,u,t,m,b){return d(),_("div",null,[l(Ve,{columns:e.columns,rows:e.props.rows,"row-key":o=>o[3],class:"q-pa-sm",pagination:{rowsPerPage:10},"table-header-class":"bg-dark text-white","no-data-label":"There are no classifications",dense:""},{header:r(o=>[l(me,{class:"bg-dark text-white",props:o},{default:r(()=>[(d(!0),_(oe,null,ie(o.cols,s=>(d(),y(we,{key:s.name,props:o},{default:r(()=>[qe(V(s.label),1)]),_:2},1032,["props"]))),128)),l(we,{"auto-width":""})]),_:2},1032,["props"])]),body:r(o=>[l(me,{props:o},{default:r(()=>[(d(!0),_(oe,null,ie(o.cols,s=>(d(),y(fe,{key:s.name,props:o},{default:r(()=>[qe(V(s.value),1)]),_:2},1032,["props"]))),128)),l(fe,{"auto-width":""},{default:r(()=>[o.row[17]==="Pending"&&e.$can("manage","projectRequests")&&!e.$can("read","hireRequests")?(d(),y(re,{key:0,class:"cursor-pointer",size:e.$q.screen.gt.sm?"sm":"xs",color:"primary",round:"",dense:"",onClick:s=>e.$emit("removeRow",o.row),name:"delete_forever"},null,8,["size","onClick"])):C("",!0)]),_:2},1024)]),_:2},1032,["props"])]),"no-data":r(({message:o})=>[c("div",Qa,[l(re,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),c("span",null,V(o),1)])]),"top-right":r(()=>[l(D,{color:"secondary",flat:"","icon-right":"refresh",label:"Refresh",onClick:a[0]||(a[0]=o=>e.$emit("refresh"))})]),_:1},8,["columns","rows","row-key"])])}var Ma=F(Ua,[["render",Fa]]);const Ia=J({props:{data:Object},components:{ClassificationsTable:Ma},setup(e,a){const u=Y(),{getClassifications:t,fetchClassifications:m,removeData:b,updateViewedRequests:o,getHireRequest:s}=se(),n=q(()=>s(e.data[3])&&s(e.data[3]).classes?s(e.data[3]).classes:t(e.data[3]).sort((v,k)=>v[1].$d<k[1].$d?1:-1));async function N(v){u.loading.show();const{data:k}=await m({id:e.data[3]});o({id:e.data[3],dataset:"classes",data:k}),u.loading.hide()}async function R(v){u.dialog({title:"Confirm",message:`Are you sure you want to remove ${v[12]} from request# ${v[6]}?`,cancel:!0,persistent:!0}).onOk(async()=>{try{const{data:k}=await Q.upsertRecordsXML({to:"bpzpyqcu4",data:[{3:{value:v[3]},17:{value:"Cancelled"},51:{value:new Date},128:{value:6}}],fieldsToReturn:[220],formatObject:220});b({type:"classifications",key:k[0][220][6],item:k[0][220],storageKey:"storageRequestClassifications"});const S=n.value.filter(f=>f[3]!==k[0][220][3]);o({id:e.data[3],dataset:"classes",data:S})}catch(k){u.notify({type:"negative",message:"Cannot remove classification"}),console.log(k)}})}return N(),{rows:n,removeRow:R,loadData:N}}});function Ba(e,a,u,t,m,b){const o=O("classifications-table");return d(),_("div",null,[l(o,{rows:e.rows,onRemoveRow:e.removeRow,onRefresh:a[0]||(a[0]=s=>e.loadData(!0))},null,8,["rows","onRemoveRow"])])}var za=F(Ia,[["render",Ba]]);const Ja=J({props:{data:Object},components:{NameRequestDataTable:ua},setup(e,a){const u=Y(),t=be(),{capitalize:m}=Te,b=A(""),{getNameRequest:o,fetchNameRequest:s,removeData:n}=se(),{userData:N}=ue(),R=q(()=>o(e.data[3]).sort((i,w)=>i[1].$d<w[1].$d?1:-1));async function v(){u.loading.show(),await s({id:e.data[3]}),u.loading.hide()}function k(i){return`${m(i[6].toLowerCase())} ${m(i[7].toLowerCase())}`}async function S(i){u.dialog({title:"Confirm",message:`Are you sure you want to remove ${k(i)} from request# ${i[18]}?`,cancel:!0,persistent:!0}).onOk(async()=>{try{const{data:w}=await Q.upsertRecordsXML({to:"bsg4yb4wa",data:[{3:{value:i[3]},11:{value:!0},12:{value:Z().tz("America/Chicago")},13:{value:`${N[35]} ${N[37]}`}}],fieldsToReturn:[15],formatObject:15});n({type:"nameRequest",key:w[0][15][18],item:w[0][15],storageKey:"storageNameRequest"})}catch(w){u.notify({type:"negative",message:"Cannot remove name request"}),console.log(w)}})}const f=i=>{t.push({name:"ee-summary",params:{id:i[3]}})};return v(),{nameRequests:R,search:b,removeName:S,viewEmployee:f}}}),Xa={class:"row items-center"},Ha={class:"col-12 col-md-4"};function Ya(e,a,u,t,m,b){const o=O("name-request-data-table");return d(),_("div",null,[l(H,{flat:""},{default:r(()=>[l(T,null,{default:r(()=>[c("div",Xa,[c("div",Ha,[l(K,{dense:"",modelValue:e.search,"onUpdate:modelValue":a[0]||(a[0]=s=>e.search=s),label:"Search"},null,8,["modelValue"])])])]),_:1})]),_:1}),l(o,{requests:e.nameRequests,status:"Named",onRemoveName:e.removeName,onViewEmployee:e.viewEmployee},null,8,["requests","onRemoveName","onViewEmployee"])])}var Wa=F(Ja,[["render",Ya]]);const Ga=J({props:{rows:Array},setup(e,a){const u=Y();be();const{openWindow:t}=na(),m=ue(),{getUserType:b}=Ue(m),o=q(()=>u.screen.gt.sm?[{name:"Action",label:"",align:"left"},{name:1,label:"Created",align:"left",field:n=>n[1].$d,format:n=>`${Z(n).format("L LT")}`,sortable:!0},{name:2,label:"Offered To",align:"left",field:n=>n.employee[24],format:n=>`${n}`,sortable:!0,required:!0},{name:3,label:"Classification",align:"left",field:n=>n[57],format:n=>`${n===""?"Open":n}`,sortable:!0,required:!0},{name:4,label:"Status",align:"left",field:n=>n[21],format:n=>`${n}`,sortable:!0},{name:5,label:"Rate Offered",align:"left",field:n=>n[22],format:n=>`$ ${n.toFixed(2)}`,sortable:!0,required:!0}]:[{name:"Action",label:"",align:"left"},{name:1,label:"Created",align:"left",field:n=>n[1].$d,format:n=>`${Z(n).fromNow()}`,sortable:!0},{name:2,label:"Offered To",align:"left",field:n=>n.employee[24],format:n=>`${n}`,sortable:!0,required:!0},{name:3,label:"Classification",align:"left",field:n=>n[57],format:n=>`${n===""?"Open":n}`,sortable:!0,required:!0},{name:4,label:"Status",align:"left",field:n=>n[21],format:n=>`${n}`,sortable:!0},{name:5,label:"Rate Offered",align:"left",field:n=>n[22],format:n=>`$ ${n.toFixed(2)}`,sortable:!0,required:!0}]);return{getUserType:b,viewProfile:n=>{t(null,{url:`https://elitehcms.quickbase.com/db/bs7qsu6wh?a=dbpage&pageID=6&ee=${n[25]}`,name:"View Profile"})},columns:o,props:e}}}),Ka={key:0},Za={key:1},xa={key:2},et={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function at(e,a,u,t,m,b){return d(),_("div",null,[l(Ve,{columns:e.columns,rows:e.props.rows,"row-key":o=>o[3],class:"q-pa-sm",pagination:{rowsPerPage:10},"table-header-class":"bg-dark text-white","no-data-label":"There are no offers",dense:""},{body:r(o=>[l(me,{props:o},{default:r(()=>[(d(!0),_(oe,null,ie(o.cols,s=>(d(),y(fe,{key:s.name,props:o,"auto-width":""},{default:r(()=>[s.name==="Action"?(d(),_("span",Ka,[e.getUserType==="QuickBase User"?(d(),y(re,{key:0,class:"cursor-pointer",size:e.$q.screen.gt.sm?"sm":"xs",color:"info",round:"",dense:"",onClick:n=>e.viewProfile(o.row),name:o.expand?"visibility_off":"visibility"},null,8,["size","onClick","name"])):C("",!0)])):C("",!0),s.name===4?(d(),_("span",Za,V(o.row[29]==="Review"?"Pending":s.value),1)):(d(),_("span",xa,V(s.value),1))]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"no-data":r(({message:o})=>[c("div",et,[l(re,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),c("span",null,V(o),1)])]),_:1},8,["columns","rows","row-key"])])}var tt=F(Ga,[["render",at]]);const ot=J({props:{data:Array},components:{OffersDataTable:tt},setup(e){const a=A("");return{offers:q(()=>{const t=[];return e.data.forEach(m=>{`${m.employee[24].toLowerCase}`.includes(a.value.toLowerCase())&&t.push(m)}),t}),search:a}}}),st={class:"row items-center"},lt={class:"col-12 col-md-4"};function nt(e,a,u,t,m,b){const o=O("offers-data-table");return d(),_("div",null,[l(H,{flat:""},{default:r(()=>[l(T,null,{default:r(()=>[c("div",st,[c("div",lt,[l(K,{dense:"",modelValue:e.search,"onUpdate:modelValue":a[0]||(a[0]=s=>e.search=s),label:"Search"},null,8,["modelValue"])])])]),_:1})]),_:1}),l(o,{rows:e.offers},null,8,["rows"])])}var rt=F(ot,[["render",nt]]);const it={name:"Pipeline",components:{ProjectPipelineTable:ca},props:{request:Object},setup(e){const a=Y(),u=A(""),{fetchDeployments:t,fetchInProcess:m,fetchPending:b,getDeployments:o,getInProcess:s,getPending:n}=se(),N=q(()=>o(e.request[3]).filter(i=>i[20]==="Complete")),R=q(()=>{const i=[];return o(e.request[3]).forEach(w=>{w[31].toLowerCase().includes(u.value.toLowerCase())&&i.push(w)}),i}),v=q(()=>{const i=[];return n(e.request[3]).forEach(w=>{w[25].toLowerCase().includes(u.value.toLowerCase())&&i.push(w)}),i}),k=q(()=>{const i=[];return s(e.request[3]).forEach(w=>{w[39].toLowerCase().includes(u.value.toLowerCase())&&i.push(w)}),i}),S=q(()=>k.value.concat(v.value.concat(R.value)));async function f(){a.loading.show(),await t({requestId:e.request[3]}),await m({requestId:e.request[3]}),await b({requestId:e.request[3]}),a.loading.hide()}return f(),{arrived:N,allPipeline:S,search:u}}},dt={class:"q-pt-sm"},ut={class:"text-h5 text-dark"},ct={class:"text-body2 text-italic q-ml-sm"},mt=c("div",{class:"text-subtitle2 text-accent"},"The following people are currently in process or deployed for this request.",-1),ft={class:"row items-center"},bt={class:"col-12 col-md-3 q-px-sm"};function pt(e,a,u,t,m,b){const o=O("project-pipeline-table");return d(),y(Qe,{style:{"max-width":"100vw"}},{default:r(()=>[c("div",dt,[l(H,{flat:""},{default:r(()=>[l(T,{class:"q-pb-none"},{default:r(()=>[c("div",ut,[qe(" Staffing Pipeline "),c("span",ct,"("+V(t.allPipeline.length)+" total)",1)]),mt]),_:1}),l(T,null,{default:r(()=>[c("div",ft,[c("div",bt,[l(K,{dense:"",modelValue:t.search,"onUpdate:modelValue":a[0]||(a[0]=s=>t.search=s),label:"Search"},null,8,["modelValue"])])])]),_:1})]),_:1}),l(o,{rows:t.allPipeline},null,8,["rows"])])]),_:1})}var vt=F(it,[["render",pt]]);const gt=J({emits:["namesAdded","closeNames"],components:{phoneNumberInput:ba},props:{request:Object},setup(e,{emit:a}){const u=Y(),{getClassifications:t,addNameRequest:m}=se(),{userData:b}=ue(),{capitalize:o}=Te;A(!1);const s=A(10),n=A(null),N=A([]),R=q(()=>t(e.request[3])||[]),v=[{name:0,label:"#",align:"left",field:p=>p.id,format:p=>`${p}`},{name:1,label:"First Name",align:"left",field:p=>p.firstName,format:p=>`${o(p.toLowerCase())}`,sortable:!0},{name:2,label:"Last Name",align:"left",field:p=>p.lastName,format:p=>`${o(p.toLowerCase())}`,sortable:!0},{name:3,label:"Phone",align:"left",field:p=>p.phone,format:p=>`${p}`,sortable:!1,required:!0},{name:4,label:"Last 4",align:"left",field:p=>p.ssn,format:p=>`${p}`}],k=q(()=>{const p=new RegExp("^(?!0+$)\\d{"+s.value+"}","g");return z({job:z().required("Classification is required"),firstName:ae().required().label("First Name"),lastName:ae().required().label("Last Name"),phoneNumber:ae().matches(p,{excludeEmptyString:!0,message:"Valid Phone Number Required!"}).required().label("Phone Number"),ssn:ae().matches(/^\d+$/,{excludeEmptyString:!0,message:"Numbers Only!"}).label("Last 4 of SSN")})}),{errors:S,handleSubmit:f,resetForm:i,isSubmitting:w}=Re({validationSchema:k,initialValues:{job:R.value.length===1?R.value[0]:null}}),{value:M}=B("job"),{value:$}=B("firstName"),{value:L}=B("lastName"),{value:P}=B("phoneNumber"),{value:I}=B("ssn"),x=f(p=>{const U={id:N.value.length+1,classification:p.job,firstName:p.firstName,lastName:p.lastName,phone:p.phoneNumber,ssn:p.ssn};N.value.push(U),i()}),pe=p=>{const U=N.value.filter(W=>W.id!==p.id);N.value=U},h=async p=>{const U=b;U.access&&delete U.access,U.permissions&&delete U.permissions;const{data:W}=await Q.upsertRecordsXML({to:"bsg4yb4wa",data:[{6:{value:p.firstName},7:{value:p.lastName},8:{value:p.phone},10:{value:"Has Not Arrived"},19:{value:Z()},16:{value:p.ssn},14:{value:`${U[35]} ${U[37]}`},17:{value:p.classification[3]}}],fieldsToReturn:[15],formatObject:15}),E=W[0][15];return E[45]>E[43]&&Fe({id:E[17],qty:E[45]}),E};return{formErrors:S,submit:x,job:M,firstName:$,lastName:L,phoneNumber:P,ssn:I,resetForm:i,classifications:R,names:N,columns:v,removeRow:pe,submitNames:async()=>{u.loading.show();const p=[];N.value.forEach(E=>{const ee=h(E);p.push(ee)});const W=(await Promise.allSettled(p)).map(E=>E.value);m({id:e.request[3],data:W}),u.notify({type:"positive",message:"Names successfully added!"}),a("namesAdded"),u.loading.hide()},phoneLength:s,updateCountry:p=>{n.value=p},updatePhoneMaxLength:p=>{s.value=p}}}}),ht={class:"q-mb-sm"},yt={class:"text-caption"},qt={class:"q-mb-sm"},wt={class:"text-caption"},$t={class:"q-mb-sm"},Ct={class:"q-mb-sm"},Rt={class:"text-caption"},kt={class:"text-caption"},Nt={class:"text-caption"};function _t(e,a,u,t,m,b){const o=O("phone-number-input");return d(),y(Ce,{onSubmit:$e(e.submit,["prevent"])},{default:r(()=>[l(H,null,{default:r(()=>[l(T,{class:"q-pb-sm"},{default:r(()=>[c("div",ht,[l(K,{tabindex:"1",dense:"",label:"First Name",modelValue:e.firstName,"onUpdate:modelValue":a[0]||(a[0]=s=>e.firstName=s),error:!!e.formErrors.firstName,"bottom-slots":""},{error:r(()=>[c("div",yt,V(e.formErrors.firstName),1)]),_:1},8,["modelValue","error"])]),c("div",qt,[l(K,{tabindex:"2",dense:"",label:"Last Name",modelValue:e.lastName,"onUpdate:modelValue":a[1]||(a[1]=s=>e.lastName=s),error:!!e.formErrors.lastName,"bottom-slots":""},{error:r(()=>[c("div",wt,V(e.formErrors.lastName),1)]),_:1},8,["modelValue","error"])]),c("div",$t,[l(o,{name:"phoneNumber",class:"col-xs-12 col-sm-12",dense:"",modelValue:e.phoneNumber,"onUpdate:modelValue":a[2]||(a[2]=s=>e.phoneNumber=s),label:"Phone Number",tabindex:"3",onMaxLengthChanged:e.updatePhoneMaxLength,error:!!e.formErrors.phoneNumber,"error-message":e.formErrors.phoneNumber,onCountryChanged:e.updateCountry},null,8,["modelValue","onMaxLengthChanged","error","error-message","onCountryChanged"])]),c("div",Ct,[l(K,{maxlength:"4",tabindex:"4",dense:"",label:"SSN Last 4 (Optional)",modelValue:e.ssn,"onUpdate:modelValue":a[3]||(a[3]=s=>e.ssn=s),error:!!e.formErrors.ssn,"bottom-slots":""},{error:r(()=>[c("div",Rt,V(e.formErrors.ssn),1)]),_:1},8,["modelValue","error"])]),c("div",null,[l(de,{dense:"",tabindex:"5",label:"Classification","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.job,"onUpdate:modelValue":a[4]||(a[4]=s=>e.job=s),options:e.classifications,"option-label":s=>s?`${s[21]}`:"","display-value":e.job?`${e.job[21]}`:"","bottom-slots":"",error:!!e.formErrors.job},{error:r(()=>[c("div",kt,V(e.formErrors.job),1)]),_:1},8,["modelValue","options","option-label","display-value","error"])])]),_:1}),l(ea),l(te,{class:"q-pt-sm",align:"right"},{default:r(()=>[e.names.length===0?(d(),y(D,{key:0,dense:"",label:"Cancel",color:"secondary",onClick:a[5]||(a[5]=s=>e.$emit("closeNames"))})):C("",!0),l(D,{dense:"",color:"info",label:"Save Name",type:"submit",onClick:e.submit},null,8,["onClick"])]),_:1}),e.names.length>0?(d(),y(T,{key:0,class:"q-px-none"},{default:r(()=>[l(Ve,{flat:"",columns:e.columns,rows:e.names,"row-key":s=>s.name,class:"q-pa-sm",pagination:{rowsPerPage:100},"table-header-class":"bg-dark text-white",dense:"","hide-pagination":""},{header:r(s=>[l(me,{class:"bg-dark text-white",props:s},{default:r(()=>[(d(!0),_(oe,null,ie(s.cols,n=>(d(),y(we,{class:"text-left",key:n.name},{default:r(()=>[qe(V(n.label),1)]),_:2},1024))),128)),l(we,{"auto-width":""})]),_:2},1032,["props"])]),body:r(s=>[l(me,{"no-hover":"",props:s},{default:r(()=>[(d(!0),_(oe,null,ie(s.cols,n=>(d(),y(fe,{key:n.name,props:s},{default:r(()=>[c("span",Nt,V(n.value==="undefined"?"N/A":n.value),1)]),_:2},1032,["props"]))),128)),l(fe,{"auto-width":""},{default:r(()=>[l(D,{round:"",flat:"",icon:"delete",color:"accent",onClick:n=>e.removeRow(s.row)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["columns","rows","row-key"])]),_:1})):C("",!0),e.names.length>0?(d(),y(te,{key:1,align:"right"},{default:r(()=>[l(D,{dense:"",label:"Cancel",color:"secondary",onClick:a[6]||(a[6]=s=>e.$emit("closeNames"))}),l(D,{dense:"",color:"primary",label:"Submit These Names",onClick:e.submitNames},null,8,["onClick"])]),_:1})):C("",!0)]),_:1})]),_:1},8,["onSubmit"])}var Vt=F(gt,[["render",_t]]);const At=J({emits:["jobsAdded","closeJobs","jobUpdated"],components:{PayRateField:ma},props:{request:Object},setup(e,{emit:a}){Y();const{getClassifications:u}=se();ue();const t=A([]),m=q(()=>u(e.request[3])||[]),b=z({craft:z().required().nullable().label("Craft"),classification:z().required().nullable().label("Classification"),rate:Pe().required().nullable().label("Rate"),qty:Pe().required().nullable().label("Quantity")}),{errors:o,handleSubmit:s,resetForm:n,isSubmitting:N,setFieldError:R}=Re({validationSchema:b}),{value:v}=B("craft"),{value:k}=B("classification"),{value:S}=B("rate"),{value:f}=B("qty"),i=s(async $=>{const L=m.value.find(P=>P[9]===$.classification[3]&&P[23]===$.rate);if(L){const P=L[18]+$.qty,I=await Fe({id:L[3],qty:P});a("jobUpdated",I)}else{const P=await fa({requestData:e.request,job:$});a("jobsAdded",P)}}),w=async()=>{const{data:$}=await Q.fetchFromProjectsApp({fields:[he({type:"projectCrafts",query:`{'7'.EX.'${e.request[6]}'}AND{'6'.EX.'Active'}`})]}),L=$.sort((P,I)=>P[20]>I[20]?1:-1);t.value=L,console.log(m.value)},M=q(()=>{const $=v.value&&v.value.classifications?v.value.classifications:[];return $.length>0?$.sort((L,P)=>L[32]>P[32]?-1:1):[]});return aa(k,($,L)=>{$&&$.hasFixedRate?S.value=$.fixedRate:S.value&&(S.value=null)}),w(),{errors:o,submit:i,classificationOptions:M,craft:v,classification:k,rate:S,qty:f,crafts:t}}}),St={key:0,class:"text-body2 text-italic text-weight-bold text-dark"},Pt={key:1,class:"text-body2 text-italic text-weight-bold text-dark"},Dt={class:"row q-mb-md"},jt={class:"col-6 q-pr-sm"},Lt={class:"text-caption"},Ot={class:"col-6 q-pl-sm"},Et={class:"text-caption"},Tt={class:"row"},Ut={class:"col-6 q-pr-sm"},Qt={class:"text-caption"},Ft={class:"col-6 q-pl-sm"};function Mt(e,a,u,t,m,b){const o=O("pay-rate-field");return d(),y(Ce,ta(e.$attrs,{onSubmit:$e(e.submit,["prevent"])}),{default:r(()=>[l(H,null,{default:r(()=>[l(T,null,{default:r(()=>[e.$attrs.hideInstructions?(d(),_("div",Pt," Enter the following information about the classification and click Submit. ")):(d(),_("div",St," Enter the following information about the classification and click Save. Repeat until all classifications you are requesting have been saved. Then click Continue. ")),c("div",Dt,[c("div",jt,[l(de,{class:"q-mt-md",dense:"",clearable:"","transition-show":"flip-up","transition-hide":"flip-down",label:"Select Craft",modelValue:e.craft,"onUpdate:modelValue":a[0]||(a[0]=s=>e.craft=s),options:e.crafts,"option-label":s=>s[10],"display-value":e.craft?`${e.craft[10]}`:"",error:!!e.errors.craft,"bottom-slots":""},{error:r(()=>[c("div",Lt,V(e.errors.craft),1)]),_:1},8,["modelValue","options","option-label","display-value","error"])]),c("div",Ot,[l(de,{class:"q-mt-md",dense:"",clearable:"","transition-show":"flip-up","transition-hide":"flip-down",label:"Classification",modelValue:e.classification,"onUpdate:modelValue":a[1]||(a[1]=s=>e.classification=s),options:e.classificationOptions,"option-label":s=>s[18],"display-value":e.classification?`${e.classification[18]}`:"",error:!!e.errors.classification,"bottom-slots":"",disable:!e.craft},{error:r(()=>[c("div",Et,V(e.errors.classification),1)]),_:1},8,["modelValue","options","option-label","display-value","error","disable"])])]),c("div",Tt,[c("div",Ut,[l(K,{dense:"",type:"number",label:"Quantity",modelValue:e.qty,"onUpdate:modelValue":a[2]||(a[2]=s=>e.qty=s),modelModifiers:{number:!0},error:!!e.errors.qty,disable:!e.classification,"bottom-slots":""},{error:r(()=>[c("div",Qt,V(e.errors.qty),1)]),_:1},8,["modelValue","error","disable"])]),c("div",Ft,[l(o,{class:"q-mb-md",type:"number",step:"any",dense:"",label:"Hourly Rate",modelValue:e.rate,"onUpdate:modelValue":a[3]||(a[3]=s=>e.rate=s),modelModifiers:{number:!0},prefix:"$",disable:!e.classification||e.classification.hasFixedRate&&!e.$can("manage","rates"),error:!!e.errors.rate,"error-message":e.errors.rate,"bottom-slots":""},null,8,["modelValue","disable","error","error-message"])])])]),_:1}),l(te,{align:"right"},{default:r(()=>[l(D,{dense:"",color:"secondary",label:"Cancel",onClick:a[4]||(a[4]=s=>e.$emit("closeJobs"))}),l(D,{dense:"",color:"primary",label:"Submit",type:"submit",onClick:e.submit},null,8,["onClick"])]),_:1})]),_:1})]),_:1},16,["onSubmit"])}var It=F(At,[["render",Mt]]);const Bt=J({props:{request:Object},setup(e){const a=A(null),u=["Continue Processing","Remove from In Process"],t=["Client Headcount Met","Client Changed Work Scope"],m=ue(),{userData:b}=Ue(m),o=be(),s=Y(),{getDeployments:n,getInProcess:N,getPending:R,fetchDeployments:v,fetchInProcess:k,fetchPending:S}=se(),f=b.value&&b.value[35]?b.value[35]:"",i=b.value&&b.value[37]?b.value[37]:"",w=q(()=>n(e.request[3])),M=q(()=>N(e.request[3])),$=q(()=>R(e.request[3])),L=q(()=>w.value.concat(M.value)),P=q(()=>$.value.concat(M.value));async function I(){await v({requestId:e.request[3],refresh:!0}),await k({requestId:e.request[3],refresh:!0}),await S({requestId:e.request[3],refresh:!0})}I();const x=q(()=>{let E={};return P.value.length>0?E=z({action:ae().required().label("Applicant(s) In Process, Action Needed?"),reason:ae().required().label("Reason for Closing")}):E=z({reason:ae().required().label("Reason for Closing")}),E}),{meta:pe,errors:h,handleSubmit:g,handleReset:j}=Re({validationSchema:x}),{value:le}=B("action"),{value:p}=B("reason"),U=g(async E=>{try{let ee=L.value.length===0?"Cancelled":"Closed",ke=L.value.length===0?6:5;e.request[305]>0&&(ee="Closed",ke=5);const ze={3:{value:e.request[3]},14:{value:ee},84:{value:new Date},86:{value:new Date},147:{value:ke},276:{value:b.value[3]},277:{value:`${f} ${i}`},303:{value:E.reason},306:{value:E.action||"N/A"}},Ae=[];e.request.classes&&Array.isArray(e.request.classes)&&e.request.classes.forEach(G=>{const _e=A(G[18]);E.action==="Continue Processing"?G.offers&&Array.isArray(G.offers)&&(_e.value=G.offers.filter(ce=>ce[21]==="Accepted").length):_e.value=w.value.filter(ce=>ce[89]===G[3]&&(ce[20]==="Complete"||ce[20]==="In Process")).length;const Je={3:{value:G[3]},17:{value:ee},29:{value:new Date},51:{value:new Date},128:{value:ke},255:{value:_e.value}};Ae.push(Je)});const{data:Ne}=await Q.upsertRecordsXML({to:"bpzpyjbuy",data:[ze],fieldsToReturn:[3]});if(Ne&&Ne[0]&&Ne[0][3]){const{data:G}=await Q.upsertRecordsXML({to:"bpzpyqcu4",data:Ae,fieldsToReturn:[3]});if(G)W(),o.go(-1),s.notify({position:"top-right",type:"positive",message:"Request successfully closed"});else throw"Error in canceling request"}else throw"Error in canceling request"}catch(ee){console.log(ee),s.notify({position:"top-right",type:"negative",message:"There was a problem closing request!"})}}),W=()=>{j(),a.value.hide()};return{cancelRequestDialog:a,hireRequestPipeline:P,actions:u,reasons:t,action:le,reason:p,formErrors:h,submitCancel:U,closeCancelDialog:W}}}),zt=c("div",{class:"text-h6 text-info"},"Close Request",-1),Jt={key:0,class:"row"},Xt={class:"col-12 q-pr-sm"},Ht={class:"text-caption"},Yt={class:"row q-mb-md"},Wt={class:"col-12 q-pr-sm"},Gt={class:"text-caption"};function Kt(e,a,u,t,m,b){return d(),y(ye,{ref:"cancelRequestDialog"},{default:r(()=>[l(H,{flat:"",style:{width:"400px"}},{default:r(()=>[l(Ce,{onSubmit:$e(e.submitCancel,["prevent"])},{default:r(()=>[l(T,{class:"q-pb-none"},{default:r(()=>[zt]),_:1}),l(T,null,{default:r(()=>[e.hireRequestPipeline.length>0?(d(),_("div",Jt,[c("div",Xt,[l(de,{class:"q-mt-md",dense:"","transition-show":"flip-up","transition-hide":"flip-down",label:`${e.hireRequestPipeline.length} Applicant(s) In Process, Action Needed?`,modelValue:e.action,"onUpdate:modelValue":a[0]||(a[0]=o=>e.action=o),options:e.actions,error:!!e.formErrors.action,"bottom-slots":""},{error:r(()=>[c("div",Ht,V(e.formErrors.action),1)]),_:1},8,["label","modelValue","options","error"])])])):C("",!0),c("div",Yt,[c("div",Wt,[l(de,{class:"q-mt-md",dense:"","transition-show":"flip-up","transition-hide":"flip-down",label:"Reason for Closing",modelValue:e.reason,"onUpdate:modelValue":a[1]||(a[1]=o=>e.reason=o),options:e.reasons,error:!!e.formErrors.reason,"bottom-slots":""},{error:r(()=>[c("div",Gt,V(e.formErrors.reason),1)]),_:1},8,["modelValue","options","error"])])])]),_:1}),l(te,{align:"right"},{default:r(()=>[l(D,{dense:"",color:"secondary",label:"Cancel",onClick:e.closeCancelDialog},null,8,["onClick"]),l(D,{dense:"",color:"primary",label:"Submit",type:"submit",onClick:e.submitCancel},null,8,["onClick"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},512)}var Zt=F(Bt,[["render",Kt]]);const xt={name:"View Request",components:{ClassificationsTab:za,NamesTab:Wa,PipelineTab:vt,OffersTab:rt,NamesForm:Vt,DetailsCard:Ta,ClassificationForm:It,cancelHireRequest:Zt},setup(){const e=A(!0),a=A(!1),u=A(!1),t=A(!1),m=Y(),b=oa(),o=be(),s=A(0),{getHireRequest:n,fetchHireRequest:N,updateViewedRequests:R,setHireRequests:v}=se(),{getUserType:k,userData:S}=ue(),f=A(!1),i=q(()=>n(b.params.id)),w=async h=>{if(!i.value[3]||h){m.loading.show();const{data:g}=await Q.fetchFromProjectsApp({fields:[he({type:"requests",id:b.params.id})]});v({requestId:b.params.id,data:g}),m.loading.hide()}},M=()=>{o.go(-1)},$=()=>{o.push({name:"project-general",params:{id:i.value[6]}})};w();const L=()=>{s.value=1,u.value=!1,w(!0)},P=h=>{t.value=!1,w(!0),R({id:i.value[3],dataset:"classes",data:h,push:!0})},I=h=>{t.value=!1,w(!0);const g=n(i.value[3]).classes,j=g.findIndex(le=>le[3]===h[3]);j>-1?(g[j]=h,R({id:i.value[3],dataset:"classes",data:g})):R({id:i.value[3],dataset:"classes",data:h,push:!0})},x=h=>{const g=[];for(const[j,le]of Object.entries(h)){const p={fid:j,value:le};g.push(p)}R({id:i.value[3],props:g})},pe=q(()=>i.value[3]?[{label:"Request ID",value:i.value[3],editable:!1},{label:"Date Created",value:Z(i.value[1].$d).format("MM/DD/YYYY hh:mm:ss a"),editable:!1},{label:"Status",value:`${i.value[14]} (${i.value[59]})`,editable:!1},{label:"Request Type",value:`${i.value[282]}`,editable:!1},{label:"Opened On",value:i.value[82].$d?Z(i.value[82].$d).format("MM/DD/YYYY hh:mm:ss a"):null,editable:!1,hide:i.value[14]!=="Open"&&i.value[14]!=="Closed"},{label:"Closed On",value:i.value[86].$d?Z(i.value[86].$d).format("MM/DD/YYYY hh:mm:ss a"):null,editable:!1,hide:i.value[14]!=="Closed"},{label:"Project Name",value:i.value[91],editable:!1},{label:"Job Number",value:i.value[27],editable:i.value[14]!=="Closed",config:{permission:{action:"manage",subject:"projectRequests"},type:"options",allowNew:!1,newType:"customer",initialValue:h=>h.find(g=>g[3]===i.value[9]),formRules:z().required().label("Job Number").nullable(),fieldLabel:"Job Number",optionLabel:"11",displayValue:11,getter:async()=>{const{data:h}=await Q.fetchFromProjectsApp({fields:[he({type:"jobNumbers",query:`{'6'.EX.'${i.value[6]}'}AND{'29'.EX.'Active'}`})]});return h.sort((g,j)=>g[1].$d>j[1].$d?-1:1)},setter:async h=>{try{const{data:g}=await Q.upsertRecordsXML({to:"bpzpyjbuy",data:[{3:{value:i.value[3]},9:{value:h[3]}}],fieldsToReturn:[9,27]});x(g[0]),m.notify({type:"positive",message:"Job Number successfully updated"})}catch{m.notify({type:"negative",message:"Error updating Job Number"})}},filter:(h,g)=>h.filter(j=>j[11].toLowerCase().indexOf(g)>-1)}},{label:"Site Contact",value:i.value[76],editable:i.value[14]!=="Closed",config:{permission:{action:"manage",subject:"projectRequests"},type:"options",allowNew:!1,newType:"location",initialValue:h=>h.find(g=>g[3]===i.value[60]),formRules:z().required().label("Site Contact").nullable(),fieldLabel:"Site Contact",optionLabel:"17",displayValue:17,getter:async()=>{const{data:h}=await Q.fetchFromProjectsApp({fields:[he({type:"siteContacts",query:`{'7'.EX.'${i.value[6]}'}AND{'6'.EX.'Active'}`})]});return h.sort((g,j)=>g[17]>j[17]?1:-1)},setter:async h=>{try{const{data:g}=await Q.upsertRecordsXML({to:"bpzpyjbuy",data:[{3:{value:i.value[3]},60:{value:h[3]}}],fieldsToReturn:[60,76]});x(g[0]),m.notify({type:"positive",message:"Site Contact successfully updated"})}catch{m.notify({type:"negative",message:"Error updating Site Contact"})}},filter:(h,g)=>h.filter(j=>j[17].toLowerCase().indexOf(g)>-1)}},{label:"Meeting Location",value:i.value[32],editable:i.value[14]!=="Closed",config:{permission:{action:"manage",subject:"projectRequests"},type:"options",allowNew:!1,newType:"location",initialValue:h=>h.find(g=>g[3]===i.value[31]),formRules:z().required().label("Meeting Location").nullable(),fieldLabel:"Meeting Location",optionLabel:"6",displayValue:6,getter:async()=>{const{data:h}=await Q.fetchFromStructureApp({fields:[ra({type:"meetingLocations",query:`{'15'.EX.'${i.value[8]}'}AND{'14'.EX.'Active'}`})]});return h.sort((g,j)=>g[6]>j[6]?1:-1)},setter:async h=>{try{const{data:g}=await Q.upsertRecordsXML({to:"bpzpyjbuy",data:[{3:{value:i.value[3]},31:{value:h[3]}}],fieldsToReturn:[31,32,33]});x(g[0]),m.notify({type:"positive",message:"Meeting Location successfully updated"})}catch{m.notify({type:"negative",message:"Error updating Meeting Location"})}},filter:(h,g)=>h.filter(j=>j[6].toLowerCase().indexOf(g)>-1)}},{label:"Address",value:i.value[33],editable:!1},{label:"Notes",value:i.value[299],editable:!1}]:[]);return{hireRequestData:i,tab:s,back:M,showAddNames:u,showAddJobs:t,namesAdded:L,details:pe,viewProject:$,actions:e,navs:a,jobsAdded:P,jobUpdated:I,getUserType:k,cancelRequest:f}}},eo={key:0,class:"q-pa-sm"},ao={class:"row"},to={class:"col-12 col-md-6"},oo={class:"col-12 col-md-6"},so={class:"row"},lo={class:"col-12 col-md-4 q-pr-sm"},no={class:"col-12 col-md-8 q-pl-sm"};function ro(e,a,u,t,m,b){const o=O("details-card"),s=O("classifications-tab"),n=O("names-tab"),N=O("offers-tab"),R=O("pipeline-tab"),v=O("names-form"),k=O("classification-form"),S=O("cancelHireRequest");return d(),y(Qe,{style:{"max-width":"100vw"}},{default:r(()=>[t.hireRequestData[3]?(d(),_("div",eo,[l(H,{flat:""},{default:r(()=>[l(T,{class:"q-pa-none"},{default:r(()=>[c("div",ao,[c("div",to,[l(te,{class:"q-pt-none",align:"left"},{default:r(()=>[l(D,{label:"Go Back",color:"secondary",icon:"keyboard_return",onClick:t.back},null,8,["onClick"])]),_:1})]),c("div",oo,[t.getUserType==="Project User"?(d(),y(te,{key:0,class:"q-pt-none",align:"right"},{default:r(()=>[e.$can("manage","projectRequests")&&(t.hireRequestData[14]==="Pending"||t.hireRequestData[14]==="Open")||e.$can("manage","nameRequests")&&t.hireRequestData[14]!=="Closed"&&t.hireRequestData[282]!=="Open"||e.$can("manage","projectRequests")&&!e.$can("read","hireRequests")&&t.hireRequestData[14]==="Pending"?(d(),y(De,{key:0,modelValue:t.actions,"onUpdate:modelValue":a[3]||(a[3]=f=>t.actions=f),square:"",color:"accent",icon:"keyboard_arrow_left",direction:"left",label:"Actions",padding:"sm"},{default:r(()=>[e.$can("manage","projectRequests")&&t.hireRequestData[14]==="Pending"?(d(),y(ne,{key:0,label:"Add Classifications",color:"primary",icon:"add",onClick:a[0]||(a[0]=f=>t.showAddJobs=!0)})):C("",!0),e.$can("manage","nameRequests")&&(t.hireRequestData[14]==="Pending"||t.hireRequestData[14]==="Open")&&t.hireRequestData[282]!=="Open"?(d(),y(ne,{key:1,label:"Add Names to Request",color:"accent",icon:"person_add",onClick:a[1]||(a[1]=f=>t.showAddNames=!0)})):C("",!0),e.$can("manage","projectRequests")&&(t.hireRequestData[14]==="Pending"||t.hireRequestData[14]==="Open")?(d(),y(ne,{key:2,label:"Close Hire Request",color:"dark",icon:"cancel",onClick:a[2]||(a[2]=f=>t.cancelRequest=!0)})):C("",!0)]),_:1},8,["modelValue"])):C("",!0)]),_:1})):t.getUserType==="QuickBase User"?(d(),y(te,{key:1,class:"q-pt-none",align:"right"},{default:r(()=>[l(De,{modelValue:t.actions,"onUpdate:modelValue":a[7]||(a[7]=f=>t.actions=f),square:"",color:"accent",icon:"keyboard_arrow_left",direction:"left",label:"Actions",padding:"sm"},{default:r(()=>[e.$can("manage","projectRequests")&&(t.hireRequestData[14]==="Open"||t.hireRequestData[14]==="Pending")?(d(),y(ne,{key:0,label:"Add Classifications",color:"primary",icon:"add",onClick:a[4]||(a[4]=f=>t.showAddJobs=!0)})):C("",!0),e.$can("manage","nameRequests")&&(t.hireRequestData[14]==="Open"||t.hireRequestData[14]==="Pending")?(d(),y(ne,{key:1,label:"Add Names to Request",color:"accent",icon:"person_add",onClick:a[5]||(a[5]=f=>t.showAddNames=!0)})):C("",!0),e.$can("manage","projectRequests")&&(t.hireRequestData[14]==="Open"||t.hireRequestData[14]==="Pending")?(d(),y(ne,{key:2,label:"Close Hire Request",color:"dark",icon:"cancel",onClick:a[6]||(a[6]=f=>t.cancelRequest=!0)})):C("",!0)]),_:1},8,["modelValue"])]),_:1})):C("",!0)])])]),_:1})]),_:1}),c("div",so,[c("div",lo,[l(o,{details:t.details,title:"Details"},null,8,["details"])]),c("div",no,[l(la,{class:"q-py-xs bg-info text-white shadow-2 rounded-borders",align:"left",modelValue:t.tab,"onUpdate:modelValue":a[8]||(a[8]=f=>t.tab=f),dense:"","indicator-color":"accent","outside-arrows":"","mobile-arrows":"","inline-label":""},{default:r(()=>[l(ve,{name:0,label:"Classifications"}),l(ve,{name:1,label:"Names"}),t.hireRequestData[14]!=="Pending"?(d(),y(ve,{key:0,name:2,label:"Offers"})):C("",!0),t.hireRequestData[14]!=="Pending"?(d(),y(ve,{key:1,name:3,label:"Pipeline"})):C("",!0)]),_:1},8,["modelValue"]),l(sa,{modelValue:t.tab,"onUpdate:modelValue":a[9]||(a[9]=f=>t.tab=f),animated:"",class:"q-px-none"},{default:r(()=>[l(ge,{class:"q-px-xs",name:0},{default:r(()=>[t.hireRequestData[3]?(d(),y(s,{key:0,data:t.hireRequestData},null,8,["data"])):C("",!0)]),_:1}),l(ge,{class:"q-px-xs",name:1},{default:r(()=>[l(n,{data:t.hireRequestData},null,8,["data"])]),_:1}),l(ge,{class:"q-px-xs",name:2},{default:r(()=>[l(N,{data:t.hireRequestData.offers},null,8,["data"])]),_:1}),l(ge,{class:"q-px-xs",name:3},{default:r(()=>[l(R,{request:t.hireRequestData},null,8,["request"])]),_:1})]),_:1},8,["modelValue"])])]),l(ye,{persistent:"",modelValue:t.showAddNames,"onUpdate:modelValue":a[11]||(a[11]=f=>t.showAddNames=f)},{default:r(()=>[l(H,{flat:"",style:{width:"500px"}},{default:r(()=>[l(T,{class:"q-pa-none"},{default:r(()=>[l(v,{onCloseNames:a[10]||(a[10]=f=>t.showAddNames=!1),onNamesAdded:t.namesAdded,request:t.hireRequestData},null,8,["onNamesAdded","request"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(ye,{persistent:"",modelValue:t.showAddJobs,"onUpdate:modelValue":a[13]||(a[13]=f=>t.showAddJobs=f)},{default:r(()=>[l(H,{flat:"",style:{width:"500px"}},{default:r(()=>[l(T,{class:"q-pa-none"},{default:r(()=>[l(k,{hideInstructions:!0,request:t.hireRequestData,onCloseJobs:a[12]||(a[12]=f=>t.showAddJobs=!1),onJobsAdded:t.jobsAdded,onJobUpdated:t.jobUpdated},null,8,["request","onJobsAdded","onJobUpdated"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):C("",!0),t.hireRequestData[3]?(d(),y(S,{key:1,request:t.hireRequestData,modelValue:t.cancelRequest,"onUpdate:modelValue":a[14]||(a[14]=f=>t.cancelRequest=f)},null,8,["request","modelValue"])):C("",!0)]),_:1})}var Ko=F(xt,[["render",ro]]);export{Ko as default};
