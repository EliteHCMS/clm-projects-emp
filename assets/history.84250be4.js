import{Q as V,b as X,a as H}from"./QTabPanels.06cc4af0.js";import{Q as N}from"./QTabs.d70a9a25.js";import{Q as T}from"./QToolbar.494c5d41.js";import{Q as M}from"./QPage.5a0e1cca.js";import{u as Q}from"./use-quasar.4af32af0.js";import{l as C,bM as Y,r as $,c as u,_ as P,A as s,B as p,an as d,bi as o,d as i,bO as F,F as w,aY as k,au as j,ab as v,D as E,ao as B,aZ as R}from"./index.8bd7d03d.js";import"./array.14a74a50.js";import{q as b}from"./quickbase.c9a95ac7.js";import{u as g}from"./useQuerySaver.73c5586e.js";import{dayjs as y}from"./dayjs.cdcb4373.js";import{u as S}from"./index.0f5fcea1.js";import{u as _}from"./dataStore.b8fdaaa5.js";import{Q as x}from"./QInnerLoading.fe8d9432.js";import{Q as I,a as L}from"./QTable.6a0684f8.js";import{Q as D}from"./QTr.9ef1cc28.js";import{Q as O}from"./QTd.f4f753a0.js";import"./use-panel.7de68e10.js";import"./touch.60582172.js";import"./selection.f7c019af.js";import"./QResizeObserver.743a08b5.js";import"./rtl.cf9bbe47.js";import"./_commonjsHelpers.a26ce4be.js";import"./index.7dbe61ef.js";import"./localForage.f89ac332.js";import"./i18n.711540c5.js";import"./api.d2932112.js";import"./QList.ffe6803e.js";import"./QMarkupTable.b9f567b7.js";import"./QSelect.c330a623.js";import"./QChip.cc56d764.js";import"./QItemLabel.9525a139.js";import"./QMenu.cac3fcd3.js";import"./position-engine.d9830195.js";import"./use-fullscreen.fab45d51.js";const U=C({props:{category:Object},components:{},setup(t){Q();const l=Y(),m=$(!0),f=$(!1),{getEmployee:n,updateViewedEmployees:c}=_(),a=u(()=>n(l.params.id)),r=u(()=>a.value&&a.value[t.category.key]?a.value[t.category.key]:[]),h=async q=>{const{getter:A}=t.category;m.value=!0,await A(),m.value=!1};function e(q){}return h(),{props:t,loading:m,loadData:h,rows:r,initialPagination:$({rowsPerPage:100}),removeRow:e,addNew:f}}}),G={class:"text-caption"};function Z(t,l,m,f,n,c){return s(),p("div",null,[t.addNew?B("",!0):(s(),d(L,{key:0,dense:"",columns:t.category.columns.filter(a=>!a.hide),rows:t.rows,"row-key":a=>a[3],"table-header-class":"bg-dark text-white",class:"sticky-header-table",pagination:t.initialPagination,loading:t.loading},{"top-right":o(()=>[i(F,{color:"secondary",flat:"","icon-right":"refresh",label:"Refresh",onClick:l[0]||(l[0]=a=>t.loadData(!0))})]),loading:o(()=>[i(x,{showing:t.loading,label:"Loading...","label-class":"text-info"},null,8,["showing"])]),header:o(a=>[i(D,{class:"bg-dark text-white",props:a},{default:o(()=>[(s(!0),p(w,null,k(a.cols,r=>(s(),d(I,{class:"text-left",key:r.name},{default:o(()=>[j(v(r.label),1)]),_:2},1024))),128))]),_:2},1032,["props"])]),body:o(a=>[i(D,{props:a},{default:o(()=>[(s(!0),p(w,null,k(a.cols,r=>(s(),d(O,{key:r.name,props:a},{default:o(()=>[E("span",G,v(r.value),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),_:1},8,["columns","rows","row-key","pagination","loading"]))])}var z=P(U,[["render",Z]]);const J=C({components:{HistoryPanel:z},setup(){const t=$("offers");Q();const l=Y(),{can:m}=S(),{getEmployee:f,updateViewedEmployees:n}=_(),c=u(()=>f(l.params.id)),a=u(()=>l.params.id?l.params.id:null),r=u(()=>[{label:"Offers",key:"offers",columns:[{name:0,label:"Date",align:"left",field:e=>e[1].$d,format:e=>`${y(e).format("MM/DD/YYYY")}`,sortable:!0,required:!0},{name:1,label:"Hiring Center",align:"left",field:e=>e[44],format:e=>`${e}`,sortable:!0},{name:2,label:"Project",align:"left",field:e=>e[56],format:e=>`${e}`,sortable:!0},{name:3,label:"Classification",align:"left",field:e=>e[57],format:e=>`${e}`,sortable:!0},{name:4,label:"Rate",align:"left",field:e=>e[22],format:e=>`$ ${e.toFixed(2)}`,sortable:!0,hide:!m("read","rates")},{name:5,label:"Status",align:"left",field:e=>e[21],format:e=>`${e}`,sortable:!0}],getter:async()=>{const{data:e}=await b.fetchFromHiringApp({fields:[g({type:"offers",query:`{'25'.EX.'${a.value}'}AND{'21'.XEX.'Canceled'}`})]});n({id:a.value,dataset:"offers",data:e})}},{label:"Processing",key:"inProcess",columns:[{name:0,label:"Date",align:"left",field:e=>e[1].$d,format:e=>`${y(e).format("MM/DD/YYYY")}`,sortable:!0,required:!0},{name:1,label:"Hiring Center",align:"left",field:e=>e[126],format:e=>`${e}`,sortable:!0},{name:2,label:"Project",align:"left",field:e=>e[109],format:e=>`${e}`,sortable:!0},{name:3,label:"Classification",align:"left",field:e=>e[106],format:e=>`${e}`,sortable:!0}],getter:async()=>{const{data:e}=await b.fetchFromHiringApp({fields:[g({type:"rawInProcesses",query:`{'16'.EX.'${a.value}'}AND{'37'.XEX.'Canceled'}`})]});n({id:a.value,dataset:"inProcess",data:e})}},{label:"Deployments",key:"deployments",columns:[{name:0,label:"Date",align:"left",field:e=>e[1].$d,format:e=>`${y(e).format("MM/DD/YYYY")}`,sortable:!0,required:!0},{name:1,label:"Hiring Center",align:"left",field:e=>e[68],format:e=>`${e}`,sortable:!0},{name:2,label:"Project",align:"left",field:e=>e[148],format:e=>`${e}`,sortable:!0},{name:3,label:"Classification",align:"left",field:e=>e[45],format:e=>`${e}`,sortable:!0}],getter:async()=>{const{data:e}=await b.fetchFromHiringApp({fields:[g({type:"rawDeployments",query:`{'21'.EX.'${a.value}'}AND{'20'.XEX.'Canceled'}`})]});n({id:a.value,dataset:"deployments",data:e})}},{label:"Assignments",key:"assignments",columns:[{name:0,label:"Date",align:"left",field:e=>e[1].$d,format:e=>`${y(e).format("MM/DD/YYYY")}`,sortable:!0,required:!0},{name:1,label:"Hiring Center",align:"left",field:e=>e[23],format:e=>`${e}`,sortable:!0},{name:2,label:"Project",align:"left",field:e=>e[94],format:e=>`${e}`,sortable:!0},{name:3,label:"Classification",align:"left",field:e=>e[20],format:e=>`${e}`,sortable:!0}],getter:async()=>{const{data:e}=await b.fetchFromHiringApp({fields:[g({type:"rawAssignments",query:`{'18'.EX.'${a.value}'}AND{'21'.XEX.'Canceled'}`})]});n({id:a.value,dataset:"assignments",data:e})}}]);return{tab:t,employee:c,categories:r}}}),K={class:"q-pa-sm"};function W(t,l,m,f,n,c){const a=R("history-panel");return s(),d(M,{style:{"max-width":"100vw"}},{default:o(()=>[E("div",K,[i(T,{class:"bg-info text-white shadow-2 rounded-borders"},{default:o(()=>[i(N,{dense:"",modelValue:t.tab,"onUpdate:modelValue":l[0]||(l[0]=r=>t.tab=r),align:"left","indicator-color":"accent"},{default:o(()=>[(s(!0),p(w,null,k(t.categories,r=>(s(),d(V,{key:r.key,name:r.key,label:`${r.label}`},null,8,["name","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(H,{modelValue:t.tab,"onUpdate:modelValue":l[1]||(l[1]=r=>t.tab=r),animated:""},{default:o(()=>[(s(!0),p(w,null,k(t.categories,r=>(s(),d(X,{key:r.key,name:r.key,class:"q-px-xs"},{default:o(()=>[i(a,{category:r},null,8,["category"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])])]),_:1})}var He=P(J,[["render",W]]);export{He as default};
