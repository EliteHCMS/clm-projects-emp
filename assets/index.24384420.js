import{k as I,c4 as z,r as f,w as B,_ as N,z as a,A as v,C as s,am as h,bh as o,d as t,aa as g,c2 as l,c6 as q,c3 as k,an as i,F as G,aX as R,b$ as U,d4 as X,o as Y,c as K,E as j,at as O,bX as H,d2 as J,cl as E,c1 as W,aY as x}from"./index.6c674a19.js";import{Q as Z}from"./QPage.80490d1d.js";import{N as A,L as ee,d as te}from"./quickbase.c9a9fc75.js";import{Q as se}from"./QImg.8e96434f.js";import"./_commonjsHelpers.dfee5925.js";import"./dayjs.69e964e9.js";import"./localForage.7e70884e.js";import"./index.7dbe61ef.js";import"./i18n.8e2a8376.js";import"./api.51f82bf2.js";const oe=I({components:{},setup(){const e=z(),{updateAssessment:n,startToolChecklist:_,finishToolChecklist:d,toolsForCraft:y,toolListInstructions:$,toolListName:r}=A(),m=f([]),C=f(0);async function S(){await _(),C.value=1}async function V(){await n({next:1,type:"tools",values:m.value}),await d()&&e.replace({path:"/thanks"})}function b(u,w){console.log(u)}return B(m,(u,w)=>{console.log(u)}),{toolsForCraft:y,save:V,pushItem:b,selected:m,step:C,updateAssessment:n,toolListInstructions:$,start:S,toolListName:r}}}),ae={class:"row justify-center"},le={class:"col-12 col-md-10 q-pt-sm"},ne={class:"text-h6 text-primary"},re={class:"text-body1 text-dark"},ie=s("div",{class:"text-h6 text-dark"}," Tool Assessment ",-1),ue=s("div",{class:"text-body1 text-secondary text-italic"}," Please select the tools you own from the following list. ",-1),ce={class:"row justify-center"},de={class:"row items-center"},me={class:"col-11"},pe={class:"text-body1 text-primary"},fe={class:"col-1"},ve={class:"row q-pt-md"},he={class:"col-12 text-right"};function _e(e,n,_,d,y,$){return a(),v("div",null,[s("div",ae,[s("div",le,[e.step===0?(a(),h(k,{key:0,class:"q-mt-xl"},{default:o(()=>[t(l,null,{default:o(()=>[s("div",ne,g(e.toolListName),1)]),_:1}),t(l,null,{default:o(()=>[s("div",re,g(e.toolListInstructions),1)]),_:1}),t(l,{class:"text-right"},{default:o(()=>[t(q,{color:"primary",label:"Continue",onClick:e.start},null,8,["onClick"])]),_:1})]),_:1})):i("",!0),e.step===1?(a(),h(k,{key:1,flat:""},{default:o(()=>[t(l,null,{default:o(()=>[ie,ue]),_:1}),t(l,null,{default:o(()=>[s("div",ce,[(a(!0),v(G,null,R(e.toolsForCraft,r=>(a(),v("div",{class:"col-12 col-md-6",key:r[3]},[t(k,{class:"tool-card q-ma-sm"},{default:o(()=>[t(l,null,{default:o(()=>[t(se,{style:{"max-height":"150px"},fit:"scale-down",src:r[11]},null,8,["src"])]),_:2},1024),t(U),t(l,null,{default:o(()=>[s("div",de,[s("div",me,[s("div",pe,g(r[8]),1)]),s("div",fe,[t(X,{modelValue:e.selected,"onUpdate:modelValue":n[0]||(n[0]=m=>e.selected=m),color:"primary",val:r.value},null,8,["modelValue","val"])])])]),_:2},1024)]),_:2},1024)]))),128))]),s("div",ve,[s("div",he,[t(q,{color:"primary",onClick:e.save,label:e.$t("continue")},null,8,["onClick","label"])])])]),_:1})]),_:1})):i("",!0)])])])}var ye=N(oe,[["render",_e]]);const ge=I({components:{},setup(){const e=z(),n=f(0),{startLevelForTest:_}=ee(),{testForCraft:d}=te(),{getAllQuestions:y,questionsLoaded:$,loadQuestionGroup:r,completeQuestion:m,startAssessment:C,finishAssessment:S,updateAssessment:V}=A(),b=f(!0),u=f(null),w=f(null),p=f([]),T=f(!1),Q=f(!1);Y(async()=>{$||await y(),b.value=!1,p.value=await r(_,1)});const F=K(()=>{const c=p.value?p.value.length:0,L=Math.floor(Math.random()*(c-0));return p.value&&p.value.length>0?p.value[L]:null});B(u,(c,L)=>{c&&(w.value=null)});async function D(){if(!u.value)w.value="Select an answer";else{Q.value=!0,w.value=null,F.value.response=u.value;const{data:c}=await m(F.value);if(u.value=null,c.nextQuestions.length>0)p.value=c.nextQuestions,Q.value=!1;else try{p.value=await r(c.scope,c.iteration),Q.value=!1}catch{p.value=[];const{success:P}=await S();P&&d[18]==="Yes"?V({next:1}):e.replace({path:"/thanks"})}}}async function M(){T.value=!0;try{await C(),n.value=1}catch(c){console.log(c)}}return{step:n,testForCraft:d,loading:b,currentQuestion:F,response:u,responseError:w,submit:D,launchAssessment:M,starting:T,submitting:Q}}}),ke={key:0,class:"row justify-center"},$e={class:"col-12 col-md-10 q-pt-sm"},we={class:"text-h6 text-primary"},be={class:"text-body1 text-dark"},Ce={class:"text-h5 text-primary"},Qe={class:"q-pa-sm"},qe={class:"text-body1 q-pb-md"},Ae=s("hr",null,null,-1),Se={key:0,class:"col-5 text-center"},Ve=["src","alt"],Fe={key:1,class:"absolute-center"};function Le(e,n,_,d,y,$){return a(),v("div",null,[e.loading?i("",!0):(a(),v("div",ke,[s("div",$e,[e.step===0?(a(),h(k,{key:0,class:"q-mt-xl"},{default:o(()=>[t(l,null,{default:o(()=>[s("div",we,g(e.testForCraft[29]),1)]),_:1}),t(l,null,{default:o(()=>[s("div",be,g(e.testForCraft[28]),1)]),_:1}),t(l,{class:"text-right"},{default:o(()=>[t(q,{color:"primary",label:"Continue",onClick:e.launchAssessment,loading:e.starting,disabled:e.starting},null,8,["onClick","loading","disabled"])]),_:1})]),_:1})):i("",!0),e.step===1?(a(),h(k,{key:1,flat:""},{default:o(()=>[t(l,null,{default:o(()=>[s("div",Ce,g(e.testForCraft[29]),1)]),_:1}),e.currentQuestion?(a(),h(l,{key:0},{default:o(()=>[t(k,{flat:""},{default:o(()=>[t(l,null,{default:o(()=>[s("div",{class:j(e.currentQuestion.hasImage?"row justify-between items-start":"row justify-center items-start")},[s("div",{class:j(e.currentQuestion.hasImage?"col-6":"col-10")},[t(k,null,{default:o(()=>[t(l,null,{default:o(()=>[s("div",Qe,[s("div",qe,[O(g(e.currentQuestion[9])+" ",1),e.responseError?(a(),h(H,{key:0,size:"md",class:"q-ml-sm",name:"error",color:"red"})):i("",!0)]),t(J,{options:e.currentQuestion[19],type:"radio",modelValue:e.response,"onUpdate:modelValue":n[0]||(n[0]=r=>e.response=r)},null,8,["options","modelValue"])])]),_:1}),Ae,t(l,{class:"text-right"},{default:o(()=>[t(q,{color:"primary",label:"Submit",onClick:e.submit,loading:e.submitting,disabled:e.submitting},null,8,["onClick","loading","disabled"])]),_:1})]),_:1})],2),e.currentQuestion.hasImage?(a(),v("div",Se,[s("img",{class:"question-img",src:e.currentQuestion.imageData.src,alt:e.currentQuestion.imageData.alt},null,8,Ve)])):i("",!0)],2)]),_:1})]),_:1})]),_:1})):i("",!0)]),_:1})):i("",!0)])])),e.loading?(a(),v("div",Fe,[t(E,{color:"primary",size:"5em"})])):i("",!0)])}var Ie=N(ge,[["render",Le]]);const Ne=I({components:{tools:ye,test:Ie},setup(){const e=A(),{dataLoaded:n,fetchCraftTools:_}=A(),{step:d,loading:y}=W(e);return _(),n(),{step:d,loading:y}}}),Te={key:0,class:"row"},je={class:"col"},xe={key:1,class:"absolute-center"};function ze(e,n,_,d,y,$){const r=x("tools"),m=x("test");return a(),h(Z,{class:"window-height window-width"},{default:o(()=>[e.loading?i("",!0):(a(),v("div",Te,[s("div",je,[e.step===1?(a(),h(r,{key:0})):i("",!0),e.step===0?(a(),h(m,{key:1})):i("",!0)])])),e.loading?(a(),v("div",xe,[t(E,{color:"primary",size:"5em"})])):i("",!0)]),_:1})}var Ke=N(Ne,[["render",ze]]);export{Ke as default};
