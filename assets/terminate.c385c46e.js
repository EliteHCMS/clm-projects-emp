var $e=Object.defineProperty,Re=Object.defineProperties;var Ee=Object.getOwnPropertyDescriptors;var me=Object.getOwnPropertySymbols;var Qe=Object.prototype.hasOwnProperty,Ie=Object.prototype.propertyIsEnumerable;var ce=(e,t,f)=>t in e?$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:f}):e[t]=f,T=(e,t)=>{for(var f in t||(t={}))Qe.call(t,f)&&ce(e,f,t[f]);if(me)for(var f of me(t))Ie.call(t,f)&&ce(e,f,t[f]);return e},ee=(e,t)=>Re(e,Ee(t));import{r as P,c as g,g as he,cI as ze,cb as Se,cF as Pe,h as K,bP as je,cJ as Oe,cN as Be,cK as Te,cM as Le,cO as Ke,dq as Me,cP as pe,dr as We,d4 as He,cL as Ye,cB as Xe,l as qe,bL as Fe,w as we,_ as Ae,A as $,B as z,d as a,bi as d,cz as ue,cw as de,D as n,ab as L,bJ as te,bH as G,au as X,cx as fe,bO as le,F as ve,aY as Je,bK as be,ao as Ce,ds as v,cy as Ge,bF as Ze,bM as xe,aZ as _e,an as ge}from"./index.a6af2ed6.js";import{Q as et}from"./QPage.ea80cfd6.js";import{u as De}from"./use-quasar.de97a6d6.js";import{u as Ue}from"./useQuerySaver.ae1b8d62.js";import{q as ke}from"./quickbase.5c4d1e3b.js";import{u as Ne}from"./dataStore.1d6f4f83.js";import{Q as ae}from"./QSelect.827ea14b.js";import{Q as tt}from"./QChip.483cdeac.js";import{Q as lt}from"./QItemLabel.45f903f2.js";import{Q as at}from"./QList.15340d5d.js";import{Q as ot}from"./QForm.c3d9e9b3.js";import{a as nt,u as k}from"./vee-validate.esm.beb6cc31.js";import{a as oe,b as st,c as ye,e as ne}from"./array.776f4a45.js";import{dayjs as Ve}from"./dayjs.21c0286e.js";import{s as it}from"./submitRelease.18554335.js";import{u as rt}from"./dataStore.367c9f28.js";import"./_commonjsHelpers.a26ce4be.js";import"./index.7dbe61ef.js";import"./localForage.d0ee8dfa.js";import"./api.1540b7c0.js";import"./i18n.8aa3fcd4.js";import"./QMenu.068e3c1b.js";import"./position-engine.fccc8371.js";import"./selection.38996208.js";import"./rtl.d0f7624c.js";function Y(e,t,f,S){const m=[];return e.forEach(c=>{S(c)===!0?m.push(c):t.push({failedPropValidation:f,file:c})}),m}function se(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),Se(e)}const ut={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},dt=["rejected"];function mt({editable:e,dnd:t,getFileInput:f,addFilesToQueue:S}){const{props:m,emit:c,proxy:l}=he(),h=P(null),C=g(()=>m.accept!==void 0?m.accept.split(",").map(o=>(o=o.trim(),o==="*"?"*/":(o.endsWith("/*")&&(o=o.slice(0,o.length-1)),o.toUpperCase()))):null),R=g(()=>parseInt(m.maxFiles,10)),E=g(()=>parseInt(m.maxTotalSize,10));function w(o){if(e.value)if(o!==Object(o)&&(o={target:null}),o.target!==null&&o.target.matches('input[type="file"]')===!0)o.clientX===0&&o.clientY===0&&ze(o);else{const q=f();q&&q!==o.target&&q.click(o)}}function Q(o){e.value&&o&&S(null,o)}function j(o,q,O,B){let u=Array.from(q||o.target.files);const A=[],N=()=>{A.length>0&&c("rejected",A)};if(m.accept!==void 0&&C.value.indexOf("*/")===-1&&(u=Y(u,A,"accept",p=>C.value.some(y=>p.type.toUpperCase().startsWith(y)||p.name.toUpperCase().endsWith(y))),u.length===0))return N();if(m.maxFileSize!==void 0){const p=parseInt(m.maxFileSize,10);if(u=Y(u,A,"max-file-size",y=>y.size<=p),u.length===0)return N()}if(m.multiple!==!0&&u.length>0&&(u=[u[0]]),u.forEach(p=>{p.__key=p.webkitRelativePath+p.lastModified+p.name+p.size}),B===!0){const p=O.map(y=>y.__key);u=Y(u,A,"duplicate",y=>p.includes(y.__key)===!1)}if(u.length===0)return N();if(m.maxTotalSize!==void 0){let p=B===!0?O.reduce((y,J)=>y+J.size,0):0;if(u=Y(u,A,"max-total-size",y=>(p+=y.size,p<=E.value)),u.length===0)return N()}if(typeof m.filter=="function"){const p=m.filter(u);u=Y(u,A,"filter",y=>p.includes(y))}if(m.maxFiles!==void 0){let p=B===!0?O.length:0;if(u=Y(u,A,"max-files",()=>(p++,p<=R.value)),u.length===0)return N()}if(N(),u.length>0)return u}function M(o){se(o),t.value!==!0&&(t.value=!0)}function s(o){Se(o),(o.relatedTarget!==null||Pe.is.safari!==!0?o.relatedTarget!==h.value:document.elementsFromPoint(o.clientX,o.clientY).includes(h.value)===!1)===!0&&(t.value=!1)}function b(o){se(o);const q=o.dataTransfer.files;q.length>0&&S(null,q),t.value=!1}function D(o){if(t.value===!0)return K("div",{ref:h,class:`q-${o}__dnd absolute-full`,onDragenter:se,onDragover:se,onDragleave:s,onDrop:b})}return Object.assign(l,{pickFiles:w,addFiles:Q}),{pickFiles:w,addFiles:Q,onDragover:M,onDragleave:s,processFiles:j,getDndNode:D,maxFilesNumber:R,maxTotalSizeNumber:E}}var ct=je({name:"QFile",inheritAttrs:!1,props:ee(T(T(T({},Oe),Be),ut),{modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]}),emits:[...Te,...dt],setup(e,{slots:t,emit:f,attrs:S}){const{proxy:m}=he(),c=Le(),l=P(null),h=P(!1),C=Ke(e),{pickFiles:R,onDragover:E,onDragleave:w,processFiles:Q,getDndNode:j}=mt({editable:c.editable,dnd:h,getFileInput:Z,addFilesToQueue:x}),M=Me(e),s=g(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),b=g(()=>pe(s.value)),D=g(()=>s.value.map(i=>i.name).join(", ")),o=g(()=>We(s.value.reduce((i,F)=>i+F.size,0))),q=g(()=>({totalSize:o.value,filesNumber:s.value.length,maxFiles:e.maxFiles})),O=g(()=>ee(T({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:C.value},S),{id:c.targetUid.value,disabled:c.editable.value!==!0})),B=g(()=>"q-file q-field--auto-height"+(h.value===!0?" q-file--dnd":"")),u=g(()=>e.multiple===!0&&e.append===!0);function A(i){const F=s.value.slice();F.splice(i,1),p(F)}function N(i){const F=s.value.findIndex(i);F>-1&&A(F)}function p(i){f("update:modelValue",e.multiple===!0?i:i[0])}function y(i){i.keyCode===13&&Xe(i)}function J(i){(i.keyCode===13||i.keyCode===32)&&R(i)}function Z(){return l.value}function x(i,F){const U=Q(i,F,s.value,u.value),r=Z();r!=null&&(r.value=""),U!==void 0&&((e.multiple===!0?e.modelValue&&U.every(V=>s.value.includes(V)):e.modelValue===U[0])||p(u.value===!0?s.value.concat(U):U))}function W(){return[K("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function _(){if(t.file!==void 0)return s.value.length===0?W():s.value.map((F,U)=>t.file({index:U,file:F,ref:this}));if(t.selected!==void 0)return s.value.length===0?W():t.selected({files:s.value,ref:this});if(e.useChips===!0)return s.value.length===0?W():s.value.map((F,U)=>K(tt,{key:"file-"+U,removable:c.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{A(U)}},()=>K("span",{class:"ellipsis",textContent:F.name})));const i=e.displayValue!==void 0?e.displayValue:D.value;return i.length>0?[K("div",{class:e.inputClass,style:e.inputStyle,textContent:i})]:W()}function ie(){const i=ee(T(T({ref:l},O.value),M.value),{class:"q-field__input fit absolute-full cursor-pointer",onChange:x});return e.multiple===!0&&(i.multiple=!0),K("input",i)}return Object.assign(c,{fieldClass:B,emitValue:p,hasValue:b,inputRef:l,innerValue:s,floatingLabel:g(()=>b.value===!0||pe(e.displayValue)),computedCounter:g(()=>{if(e.counterLabel!==void 0)return e.counterLabel(q.value);const i=e.maxFiles;return`${s.value.length}${i!==void 0?" / "+i:""} (${o.value})`}),getControlChild:()=>j("file"),getControl:()=>{const i={ref:c.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return c.editable.value===!0&&Object.assign(i,{onDragover:E,onDragleave:w,onKeydown:y,onKeyup:J}),K("div",i,[ie()].concat(_()))}}),Object.assign(m,{removeAtIndex:A,removeFile:N,getNativeElement:()=>l.value}),He(m,"nativeEl",()=>l.value),Ye(c)}});const pt=qe({emits:["releaseSubmitted"],props:{record:Object,employee:Object},setup(e,{emit:t}){const f=P(!1),S=P(!1),m=P(null),c=P([]),l=De(),h=Fe(),{getTermReasons:C,setTermReasons:R}=Ne(),{getAssignments:E,fetchAssignments:w}=rt(),Q=g(()=>oe({selection:oe().required().nullable().label("Reason"),effective:st().required().label("Last Day On Site"),category:ye().nullable(),attendance:ne().required().label("Attendance"),capability:ne().required().label("Capability"),attitude:ne().required().label("Attitude"),promotable:ne().required().label("Promotability"),comments:ye().nullable().label("Comments"),equipment:oe().required().nullable().label("Equipment Returned"),supervisor:oe().nullable().label("Supervisor")})),{errors:j,handleSubmit:M,handleReset:s}=nt({validationSchema:Q,initialValues:{}}),{value:b}=k("selection"),{value:D}=k("effective"),{value:o}=k("category"),{value:q}=k("attachments"),{value:O}=k("capability"),{value:B}=k("attendance"),{value:u}=k("attitude"),{value:A}=k("promotable"),{value:N}=k("comments"),{value:p}=k("equipment"),{value:y}=k("supervisor"),J=g(()=>{const r=C();return o.value?r.filter(V=>V[6]===o.value).sort((V,I)=>V[12]>I[12]?1:-1):r.sort((V,I)=>V[12]>I[12]?1:-1)}),Z=M(async r=>{if(S.value&&c.value.length===0)l.dialog({title:"Alert",message:"Supporting documents are required for this reason!"});else{const V={capability:r.capability,attendance:r.attendance,attitude:r.attitude,promotable:r.promotable,comments:r.comments?r.comments.replace(/(\r\n|\n|\r)/gm," "):null};l.dialog({title:"Confirm",message:"Are you sure you want to release this employee?",cancel:!0,persistent:!0}).onOk(async()=>{try{f.value=!0;const{release:I,employee:H,assignment:re}=await it({employee:e.employee,assignment:e.record,values:r,effectiveNow:!_.value,attachments:c.value,ratings:V,supervisor:r.supervisor});t("releaseSubmitted",{release:I,employee:H,assignment:re,effectiveNow:!_.value}),s()}catch{f.value=!1,l.notify({type:"negative",message:"Cannot submit release."})}})}}),x=()=>{l.dialog({title:"Confirm",message:"Are you sure you want to cancel?",cancel:!0,persistent:!0}).onOk(()=>{s(),h.go(-1)})};we(b,(r,V)=>{r&&r[19]?(S.value=!0,q.value=!0):(q.value=!1,S.value=!1)});const W=g(()=>{const r=C();return[...new Map(r.map(V=>[V[6],V[6]])).values()]}),_=g(()=>D.value&&D.value!==""?Ve().isBefore(Ve(D.value)):!1),ie=r=>new Promise((V,I)=>{const H=new FileReader;H.readAsDataURL(r),H.onload=()=>V(H.result.replace(/^data:.+;base64,/,"")),H.onerror=re=>I(re)}),i=()=>{m.value&&m.value.forEach(async r=>{const V={6:{value:await ie(r),filename:r.name},7:{value:r.name}};c.value.push(V),m.value=null}),console.log(c.value)},F=r=>{console.log(c.value[r]),c.value.splice(r,1)};return(async()=>{if(C().length===0){const{data:r}=await ke.fetchFromHiringApp({fields:[Ue({type:"termReasons",query:"{'11'.EX.'true'}"})]});R({reasons:r})}w({projectId:e.record[74]})})(),{props:e,options:J,primaryReasons:W,category:o,selection:b,effective:D,attachments:q,capability:O,attendance:B,attitude:u,promotable:A,comments:N,equipment:p,supervisor:y,attachmentsRequired:S,fileAttachment:m,attachedFiles:c,submit:Z,formErrors:j,handleReset:s,cancelRelease:x,showFiles:i,deleteFile:F,getAssignments:E,disableSubmit:f}}}),ft={class:"row"},vt={class:"col-12 col-md-4 q-px-sm"},bt=n("div",{class:"text-caption"},"Is this release voluntary or involuntary?",-1),gt={class:"text-caption"},yt={class:"col-12 col-md-4 q-pl-xs q-pr-sm"},Vt=n("div",{class:"text-caption"},"What is the reason for this release?",-1),ht={class:"text-caption"},St={class:"row"},qt={class:"col-12 col-md-4 q-pl-xs q-pr-sm"},Ft=n("div",{class:"text-caption"},"When is the employee's last day on site?",-1),wt={class:"text-caption"},At={class:"col-12 col-md-4 q-pl-xs q-pr-sm"},Ct=n("div",{class:"text-caption"},"Has all Company Equipment been returned?",-1),Dt={class:"text-caption"},Ut={class:"row items-top justify-between q-mt-sm"},kt={class:"col-4 q-pl-xs q-pr-sm"},Nt={key:0,class:"text-body2 text-negative text-italic"},$t={key:0},Rt={key:1},Et={key:1,class:"text-body2 text-dark text-italic"},Qt=n("span",null,"**Supporting documents are optional for this reason.",-1),It=[Qt],zt={key:0,class:"col-6 q-pl-xs q-pr-sm"},Pt=n("div",{class:"text-body1 text-info q-mb-sm"},"Attached Documents",-1),jt={class:"row q-my-md"},Ot={class:"col-12"},Bt=n("div",{class:"q-pa-sm"},[n("div",{class:"text-h6 text-bold"},"CAAP Rating"),n("div",{class:"text-body1 text-dark text-italic"},"Capability, Attendance, Attitude, and Promotability"),n("div",{class:"text-body2 text-accent q-mt-sm"},"Select how much you agree with each of the following statements.")],-1),Tt={class:"q-pb-sm"},Lt=n("div",{class:"text-body2 text-info text-bold q-mb-sm"},"This employee is capable of performing their assigned job.",-1),Kt={class:"q-pb-sm"},Mt=n("div",{class:"text-body2 text-info text-bold q-mb-sm"},"This employee regularly shows up to work on time.",-1),Wt={class:"q-pb-sm"},Ht=n("div",{class:"text-body2 text-info text-bold q-mb-sm"},"This employee has a good attitude.",-1),Yt={class:"q-pb-sm"},Xt=n("div",{class:"text-body2 text-info text-bold q-mb-sm"},"I am confident that this employee can be promoted in the future.",-1),Jt={class:"row q-mt-md"},Gt={class:"col-12 col-md-5"},Zt=n("div",{class:"text-body2 text-weight-bold text-info"},[X(" Who conducted this evaluation? "),n("span",{class:"text-italic text-weight-light text-dark"},"(recommended)")],-1),xt={class:"text-caption"},_t={class:"row q-py-sm"},el={class:"col-12"};function tl(e,t,f,S,m,c){return $(),z("div",null,[a(ot,{onSubmit:Ze(e.submit,["prevent"])},{default:d(()=>[a(ue,null,{default:d(()=>[a(de,null,{default:d(()=>[n("div",ft,[n("div",vt,[bt,a(ae,{dense:"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.category,"onUpdate:modelValue":t[0]||(t[0]=l=>e.category=l),options:e.primaryReasons},{error:d(()=>[n("div",gt,L(e.formErrors.selection),1)]),"no-option":d(()=>[a(te,null,{default:d(()=>[a(G,{class:"text-grey"},{default:d(()=>[X(" No Options Available ")]),_:1})]),_:1})]),_:1},8,["modelValue","options"])]),n("div",yt,[Vt,a(ae,{dense:"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.selection,"onUpdate:modelValue":t[1]||(t[1]=l=>e.selection=l),options:e.options,"option-label":"12","display-value":`${e.selection?e.selection[12]:""}`,"bottom-slots":"",error:!!e.formErrors.selection,disable:!e.category},{error:d(()=>[n("div",ht,L(e.formErrors.selection),1)]),"no-option":d(()=>[a(te,null,{default:d(()=>[a(G,{class:"text-grey"},{default:d(()=>[X(" No Options Available ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","display-value","error","disable"])])]),n("div",St,[n("div",qt,[Ft,a(fe,{dense:"",type:"date",modelValue:e.effective,"onUpdate:modelValue":t[2]||(t[2]=l=>e.effective=l),error:!!e.formErrors.effective,"bottom-slots":""},{error:d(()=>[n("div",wt,L(e.formErrors.effective),1)]),_:1},8,["modelValue","error"])]),n("div",At,[Ct,a(ae,{dense:"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.equipment,"onUpdate:modelValue":t[3]||(t[3]=l=>e.equipment=l),options:[{value:!0,label:"Yes"},{value:!1,label:"No"},{value:!0,label:"None Issued"}],"bottom-slots":"",error:!!e.formErrors.equipment},{error:d(()=>[n("div",Dt,L(e.formErrors.equipment),1)]),_:1},8,["modelValue","error"])])]),n("div",Ut,[n("div",kt,[a(ct,{dense:"","bottom-slots":"",modelValue:e.fileAttachment,"onUpdate:modelValue":t[4]||(t[4]=l=>e.fileAttachment=l),multiple:"",append:"",label:"Attach Supporting Documents"},{after:d(()=>[a(le,{dense:"",color:"info",round:"",flat:"",icon:"cloud_upload",onClick:e.showFiles},null,8,["onClick"])]),_:1},8,["modelValue"]),e.attachmentsRequired?($(),z("div",Nt,[X("!! "),e.selection[12].toLowerCase().includes("attendance")?($(),z("span",$t,"Supporting attendance records must be attached.")):($(),z("span",Rt,"Supporting documents are required for this reason."))])):($(),z("div",Et,It))]),e.attachedFiles.length>0?($(),z("div",zt,[Pt,a(at,{dense:""},{default:d(()=>[($(!0),z(ve,null,Je(e.attachedFiles,(l,h)=>($(),z(ve,{key:l},[a(te,null,{default:d(()=>[a(G,null,{default:d(()=>[a(lt,null,{default:d(()=>[X(L(h+1)+". "+L(l[6].filename),1)]),_:2},1024)]),_:2},1024),a(G,{side:""},{default:d(()=>[a(le,{color:"accent",round:"",flat:"",class:"cursor-pointer",icon:"delete",size:"md",onClick:C=>e.deleteFile(h)},null,8,["onClick"])]),_:2},1024)]),_:2},1024),a(be)],64))),128))]),_:1})])):Ce("",!0)])]),_:1})]),_:1}),a(be),n("div",jt,[n("div",Ot,[Bt,a(ue,null,{default:d(()=>[a(de,null,{default:d(()=>[n("div",null,[n("div",Tt,[Lt,a(v,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[5]||(t[5]=l=>e.capability=l),val:"1",label:"Strongly Disagree"},null,8,["modelValue"]),a(v,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[6]||(t[6]=l=>e.capability=l),val:"2",label:"Disagree"},null,8,["modelValue"]),a(v,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[7]||(t[7]=l=>e.capability=l),val:"3",label:"Neutral"},null,8,["modelValue"]),a(v,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[8]||(t[8]=l=>e.capability=l),val:"4",label:"Agree"},null,8,["modelValue"]),a(v,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[9]||(t[9]=l=>e.capability=l),val:"5",label:"Strongly Agree"},null,8,["modelValue"]),a(v,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[10]||(t[10]=l=>e.capability=l),val:"0",label:"I Do Not Know"},null,8,["modelValue"])]),n("div",Kt,[Mt,a(v,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[11]||(t[11]=l=>e.attendance=l),val:"1",label:"Strongly Disagree"},null,8,["modelValue"]),a(v,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[12]||(t[12]=l=>e.attendance=l),val:"2",label:"Disagree"},null,8,["modelValue"]),a(v,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[13]||(t[13]=l=>e.attendance=l),val:"3",label:"Neutral"},null,8,["modelValue"]),a(v,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[14]||(t[14]=l=>e.attendance=l),val:"4",label:"Agree"},null,8,["modelValue"]),a(v,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[15]||(t[15]=l=>e.attendance=l),val:"5",label:"Strongly Agree"},null,8,["modelValue"]),a(v,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[16]||(t[16]=l=>e.attendance=l),val:"0",label:"I Do Not Know"},null,8,["modelValue"])]),n("div",Wt,[Ht,a(v,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[17]||(t[17]=l=>e.attitude=l),val:"1",label:"Strongly Disagree"},null,8,["modelValue"]),a(v,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[18]||(t[18]=l=>e.attitude=l),val:"2",label:"Disagree"},null,8,["modelValue"]),a(v,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[19]||(t[19]=l=>e.attitude=l),val:"3",label:"Neutral"},null,8,["modelValue"]),a(v,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[20]||(t[20]=l=>e.attitude=l),val:"4",label:"Agree"},null,8,["modelValue"]),a(v,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[21]||(t[21]=l=>e.attitude=l),val:"5",label:"Strongly Agree"},null,8,["modelValue"]),a(v,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[22]||(t[22]=l=>e.attitude=l),val:"0",label:"I Do Not Know"},null,8,["modelValue"])]),n("div",Yt,[Xt,a(v,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[23]||(t[23]=l=>e.promotable=l),val:"1",label:"Strongly Disagree"},null,8,["modelValue"]),a(v,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[24]||(t[24]=l=>e.promotable=l),val:"2",label:"Disagree"},null,8,["modelValue"]),a(v,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[25]||(t[25]=l=>e.promotable=l),val:"3",label:"Neutral"},null,8,["modelValue"]),a(v,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[26]||(t[26]=l=>e.promotable=l),val:"4",label:"Agree"},null,8,["modelValue"]),a(v,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[27]||(t[27]=l=>e.promotable=l),val:"5",label:"Strongly Agree"},null,8,["modelValue"]),a(v,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[28]||(t[28]=l=>e.promotable=l),val:"0",label:"I Do Not Know"},null,8,["modelValue"])])]),n("div",Jt,[n("div",Gt,[Zt,a(ae,{dense:"",clearable:"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.supervisor,"onUpdate:modelValue":t[29]||(t[29]=l=>e.supervisor=l),options:e.getAssignments(e.props.record[74]).length>0?e.getAssignments(e.props.record[74]).filter(l=>l[3]!==e.props.record[3]).sort((l,h)=>l[75]>h[75]?1:-1):[],"option-label":l=>`${l[75]} - ${l[104]}`,"display-value":`${e.supervisor?e.supervisor[75]:""}`,"bottom-slots":"",error:!!e.formErrors.supervisor,hint:"Ex: Employee's Supervisor"},{error:d(()=>[n("div",xt,L(e.formErrors.supervisor),1)]),"no-option":d(()=>[a(te,null,{default:d(()=>[a(G,{class:"text-grey"},{default:d(()=>[X(" No Options Available ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","option-label","display-value","error"])])])]),_:1})]),_:1})])]),n("div",_t,[n("div",el,[a(fe,{filled:"",type:"textarea",modelValue:e.comments,"onUpdate:modelValue":t[30]||(t[30]=l=>e.comments=l),label:"Comments"},null,8,["modelValue"])])]),a(Ge,{align:"right"},{default:d(()=>[a(le,{disable:e.disableSubmit,color:"info",label:"Submit",type:"submit"},null,8,["disable"]),a(le,{color:"secondary",label:"Cancel",onClick:e.cancelRelease},null,8,["onClick"])]),_:1})]),_:1},8,["onSubmit"])])}var ll=Ae(pt,[["render",tl]]);const al=qe({components:{ReleaseForm:ll},setup(){const e=P(0),t=xe(),f=Fe(),S=De(),{getEmployee:m,getAssignmentsByEmployee:c,setAssignmentsByEmployee:l,setEmployees:h,setReleases:C,setReleasesByAssignment:R,setReleasesByEmployee:E}=Ne(),w=g(()=>m(t.params.id)),Q=g(()=>w.value?c(w.value[3]):null),j=async()=>{if(!Q.value&&w.value[577]){const{data:s}=await ke.fetchFromHiringApp({fields:[Ue({type:"assignments",query:"",id:w.value[577]})]});console.log(s),l({id:w.value[3],data:s})}};return we(w,(s,b)=>{s&&j()}),{employee:w,assignment:Q,releaseSubmitted:({employee:s,release:b,assignment:D,effectiveNow:o})=>{S.notify({type:"positive",message:"Release successfully submitted."}),o?(s[581]=b[3],C({id:b[3],data:b}),h({id:s[3],data:s}),l({id:s[3],assignment:D}),R({id:D[3],data:b}),E({id:s[3],data:b})):(s[581]=b[3],h({id:s[3],data:s}),C({id:b[3],data:b}),R({id:D[3],data:b}),E({id:s[3],data:b})),f.replace({name:"view-ee-release",params:{id:s[3],release:b[3]}})},step:e}}}),ol={class:"q-pa-sm"},nl={class:"row"},sl={class:"col-12"},il=n("div",{class:"text-h6 text-weight-bold q-mb-md"},"Please complete the following to submit this release.",-1);function rl(e,t,f,S,m,c){const l=_e("release-form");return $(),ge(et,{style:{"max-width":"100vw"}},{default:d(()=>[n("div",ol,[n("div",nl,[n("div",sl,[a(ue,{flat:""},{default:d(()=>[e.assignment?($(),ge(de,{key:0},{default:d(()=>[il,a(l,{record:e.assignment,employee:e.employee,onReleaseSubmitted:e.releaseSubmitted},null,8,["record","employee","onReleaseSubmitted"])]),_:1})):Ce("",!0)]),_:1})])])])]),_:1})}var Il=Ae(al,[["render",rl]]);export{Il as default};
