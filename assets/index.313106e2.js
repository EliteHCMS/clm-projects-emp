import{Q as B}from"./QSpace.ed64f82b.js";import{bN as ae,r as f,w as oe,aL as ne,c as C,A as m,B as b,d as e,bi as l,cw as y,D as s,G as H,a7 as r,ab as i,cz as D,bJ as g,aa as se,aB as ue,bH as c,db as de,cx as ie,bI as re,bO as K,au as u,bK as ce,ao as _,an as N}from"./index.a6af2ed6.js";import{Q as I}from"./QSelect.827ea14b.js";import{Q as d}from"./QItemLabel.45f903f2.js";import{Q as E}from"./QTooltip.90b38504.js";import{Q as fe}from"./QList.15340d5d.js";import{Q as S}from"./QTd.1759b276.js";import{u as me}from"./use-quasar.de97a6d6.js";import{e as _e}from"./export-file.751205c9.js";import{I as ve}from"./quickbase.5c4d1e3b.js";import{_ as pe,a as be}from"./aTable.44df4e4a.js";import{dayjs as q}from"./dayjs.21c0286e.js";import"./QChip.483cdeac.js";import"./QMenu.068e3c1b.js";import"./position-engine.fccc8371.js";import"./selection.38996208.js";import"./rtl.d0f7624c.js";import"./_commonjsHelpers.a26ce4be.js";import"./index.7dbe61ef.js";import"./localForage.d0ee8dfa.js";import"./api.1540b7c0.js";import"./i18n.8aa3fcd4.js";import"./QTable.d8efe0be.js";import"./QMarkupTable.1abf5546.js";import"./use-fullscreen.533860fb.js";const ge={class:"q-pa-md"},he={class:"row items-center"},we={class:"col-12 col-md-6 q-px-sm"},ke=s("div",{class:"col-12 col-md-4 q-px-sm"},null,-1),xe={class:"row items-center"},Ce={class:"col-12 col-md-3 q-px-sm"},ye={class:"col-12 col-md-3 q-px-sm"},Ie={class:"col-12 col-md-3 q-px-sm"},Se={class:"col-12 col-md-5 q-px-sm"},Qe={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},Ve=s("br",null,null,-1),Te=s("br",null,null,-1),Ae=s("br",null,null,-1),Be={key:0},De={key:0},Ne=s("br",null,null,-1),qe=s("br",null,null,-1),Oe={key:0},Ue={key:0},$e={key:1},cl={__name:"index",setup(Pe){const h=me(),O=ve(),{fetchSelfCheckIns:G,fetchAllSelfCheckIns:J}=O,{getSelfCheckIns:F,getSelectedOffice:w,getLoadingState:U}=ae(O),x=f(w.value?w.value[8]:null),Q=f("Self Check-Ins"),$=f("selfCheckIns"),V=f(""),P=f({sortBy:"13",descending:!1,rowsPerPage:150}),T=a=>{x.value?G({selectedId:x.value,refresh:a}):J({can:"read",refresh:a})};T(!0),oe(w,()=>{x.value=w.value?w.value[8]:null,T()});const L=f(new Date),X=setInterval(()=>{L.value=new Date},1e3);ne(()=>{clearInterval(X)});const v=f("Waiting"),Z=f(["Waiting","Called"]),ee=f(["Waiting","Called","All"]),k=f([]),W=f([{label:"Kiosk",value:"Kiosk"},{label:"In Process",value:"In Process"},{label:"Deployment",value:"Deployment"},{label:"No Task Assigned",value:""}]),A=C(()=>[{name:"index",align:"left",label:"#",sortable:!1},{name:"timeCheckIn",align:"left",label:"Time Checked-In",field:"13",sortable:!1},{name:"name",align:"left",label:"Name",field:"17",sortable:!1},{name:"phoneNumber",align:"center",label:"Phone Number",field:"6",sortable:!1},{name:"reason",align:"center",label:"Reason",field:"10",sortable:!1},{name:"status",align:"center",label:"Status",field:"15",sortable:!1},{name:"task",align:"center",label:"Task",field:"27",sortable:!1},...v.value==="Called"||v.value==="All"?[{name:"timeCheckedOut",align:"center",label:"Time Checked Out",field:"14",sortable:!1}]:[]]),p=C(()=>F.value(x.value).filter(a=>{let o=!0,t=!0;return v.value&&(v.value==="All"?o=!0:o=a[15]===v.value,o||(t=!1)),k.value&&k.value.length!==0&&(o=k.value.some(n=>a[27]===n.value),o||(t=!1)),t}).sort((a,o)=>P.value.descending?a[13].isBefore(o[13]):a[13].isAfter(o[13]))),j=C(()=>p.value.map(a=>q(L.value).to(a[13]))),R=C(()=>p.value.map(a=>a[14]?q(a[13]).to(a[14],!0):"N/A")),M=a=>{console.log(a)},Y=(a,o,t)=>{let n=o!==void 0?o(a,t):a;return n=n==null?"":String(n),n=n.split('"').join('""'),`"${n}"`},z=()=>{const a=[A.value.map(t=>Y(t.label))].concat(p.value.map(t=>A.value.map(n=>Y(typeof n.field=="function"?n.field(t):t[n.field===void 0?n.name:n.field],n.format,t)).join(","))).join(`\r
`);_e(`${Q.value} ${q().format("MM.DD.YYYY")}.csv`,a,"text/csv")!==!0&&h.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})};return(a,o)=>(m(),b("div",ge,[e(D,{flat:"",class:"q-pt-none"},{default:l(()=>[e(y,null,{default:l(()=>[s("div",he,[s("div",we,[s("div",{class:H(["text-dark",r(h).screen.lt.md?"text-body1":"text-h5"])},i(Q.value),3)]),e(B),ke])]),_:1})]),_:1}),e(D,{flat:""},{default:l(()=>[e(y,null,{default:l(()=>[s("div",xe,[s("div",Ce,[e(I,{label:"Select Status",modelValue:v.value,"onUpdate:modelValue":o[0]||(o[0]=t=>v.value=t),options:ee.value},null,8,["modelValue","options"])]),s("div",ye,[e(I,{label:"Select Task",modelValue:k.value,"onUpdate:modelValue":o[1]||(o[1]=t=>k.value=t),options:W.value,multiple:"","use-chips":"",clearable:""},{option:l(({itemProps:t,opt:n,selected:le,toggleOption:te})=>[e(g,se(ue(t)),{default:l(()=>[e(c,null,{default:l(()=>[e(d,{innerHTML:n.label},null,8,["innerHTML"])]),_:2},1024),e(c,{side:""},{default:l(()=>[e(de,{"model-value":le,"onUpdate:modelValue":Le=>te(n)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"])]),e(B),s("div",Ie,[e(pe,{can:"read",styleSelection:!0})])])]),_:1})]),_:1}),e(be,{rows:r(p),columns:r(A),pagination:P.value,filter:V.value,title:Q.value,separator:"vertical","row-key":"3",grid:!r(h).screen.gt.sm,loading:r(U)($.value),downloadButton:!0,onDownload:z},{top:l(()=>[s("div",Se,[e(ie,{dense:r(h).screen.lt.md,modelValue:V.value,"onUpdate:modelValue":o[2]||(o[2]=t=>V.value=t),label:"Search...",clearable:""},{prepend:l(()=>[e(re,{name:"search"})]),_:1},8,["dense","modelValue"])]),e(B),s("div",{class:H(["text-dark text-caption text-italic",r(h).screen.lt.md?"offset-xs-5":""])},"(Total: "+i(r(p).length)+")",3),e(K,{flat:"",round:"",color:"primary",icon:"download",disable:r(p).length<1,onClick:z},{default:l(()=>[e(E,{class:"bg-accent text-black shadow-4",offset:[10,10]},{default:l(()=>[u(" Download ")]),_:1})]),_:1},8,["disable"]),e(K,{flat:"",round:"",color:"primary",icon:"refresh",onClick:o[3]||(o[3]=t=>T(!0)),loading:r(U)($.value)},{default:l(()=>[e(E,{class:"bg-accent text-black shadow-4",offset:[10,10]},{default:l(()=>[u(" Refresh ")]),_:1})]),_:1},8,["loading"])]),item:l(t=>[s("div",Qe,[e(D,null,{default:l(()=>[e(y,{class:"text-center"},{default:l(()=>[s("strong",null,i(t.row[17]),1),Ve,s("span",null,i(t.row[15]),1)]),_:2},1024),e(ce),e(y,{class:"flex flex-center"},{default:l(()=>[e(fe,{dense:""},{default:l(()=>[e(g,null,{default:l(()=>[e(c,null,{default:l(()=>[e(d,null,{default:l(()=>[u("Time Checked-In")]),_:1}),Te,e(d,null,{default:l(()=>[u("\xA0")]),_:1})]),_:1}),e(c,{side:""},{default:l(()=>[e(d,{caption:""},{default:l(()=>[u(i(t.row[13].format("h:mm:ss A")),1)]),_:2},1024),Ae,e(d,{caption:""},{default:l(()=>[u(i(r(j)[t.rowIndex]),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(g,null,{default:l(()=>[e(c,null,{default:l(()=>[e(d,null,{default:l(()=>[u("Phone Number")]),_:1})]),_:1}),e(c,{side:""},{default:l(()=>[e(d,{caption:""},{default:l(()=>[u(i(t.row[20]),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(g,null,{default:l(()=>[e(c,null,{default:l(()=>[e(d,null,{default:l(()=>[u("Reason")]),_:1}),t.row[10]==="Applying"?(m(),b("br",Be)):_("",!0),t.row[10]==="Applying"?(m(),N(d,{key:1},{default:l(()=>[u("\xA0")]),_:1})):_("",!0)]),_:2},1024),e(c,{side:""},{default:l(()=>[e(d,{caption:""},{default:l(()=>[u(i(t.row[10]),1)]),_:2},1024),t.row[10]==="Applying"?(m(),b("br",De)):_("",!0),t.row[10]==="Applying"?(m(),N(d,{key:1,caption:""},{default:l(()=>[u(i(t.row[11]),1)]),_:2},1024)):_("",!0)]),_:2},1024)]),_:2},1024),e(g,null,{default:l(()=>[e(c,null,{default:l(()=>[e(d,null,{default:l(()=>[u("Task")]),_:1})]),_:1}),e(c,{side:""},{default:l(()=>[e(d,{caption:""},{default:l(()=>[u(i(t.row[20]),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),t.row[15]==="Called"?(m(),N(g,{key:0},{default:l(()=>[e(c,null,{default:l(()=>[e(d,null,{default:l(()=>[u("Time Checked-Out")]),_:1}),Ne,e(d,null,{default:l(()=>[u("\xA0")]),_:1})]),_:1}),e(c,{side:""},{default:l(()=>[e(d,{caption:""},{default:l(()=>[u(i(t.row[14].format("h:mm:ss A")),1)]),_:2},1024),qe,e(d,{caption:""},{default:l(()=>[u("Wait: "+i(r(R)[t.rowIndex]),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)):_("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),"body-cell-timeCheckIn":l(t=>[e(S,{props:t},{default:l(()=>[s("div",null,i(t.value.format("h:mm:ss A")),1),t.row[15]==="Waiting"?(m(),b("div",Oe,i(r(j)[t.rowIndex]),1)):_("",!0)]),_:2},1032,["props"])]),"body-cell-status":l(t=>[e(S,{props:t},{default:l(()=>[e(I,{dense:"",filled:"","model-value":t.value,"onUpdate:modelValue":n=>M(t),options:Z.value},null,8,["model-value","onUpdate:modelValue","options"])]),_:2},1032,["props"])]),"body-cell-task":l(t=>[e(S,{props:t},{default:l(()=>[e(I,{dense:"",filled:"","model-value":t.value,"onUpdate:modelValue":n=>M(t),options:W.value},null,8,["model-value","onUpdate:modelValue","options"])]),_:2},1032,["props"])]),"body-cell-timeCheckedOut":l(t=>[e(S,{props:t},{default:l(()=>[t.row[15]==="Called"?(m(),b("div",Ue,i(t.value.format("h:mm:ss A")),1)):_("",!0),t.row[15]==="Called"?(m(),b("div",$e," Wait: "+i(r(R)[t.rowIndex]),1)):_("",!0)]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination","filter","title","grid","loading"])]))}};export{cl as default};
