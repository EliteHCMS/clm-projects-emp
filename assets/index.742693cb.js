import{_ as Q,r as h,c as r,aZ as D,A as _,an as F,bi as d,D as s,d as l,cw as v,au as S,ab as q,B,ao as L,cx as k,cz as A}from"./index.d156221a.js";import{Q as E}from"./QSelect.3b2aebcc.js";import{Q as I}from"./QPage.cce46bf2.js";import{u as N}from"./use-quasar.17bfadd8.js";import{u as O}from"./quickbase.000914fc.js";import"./dayjs.42389116.js";import{u as T}from"./dataStore.dd90100b.js";import{P as U}from"./projectPipeline.1db0c44c.js";import"./QChip.53326447.js";import"./QItemLabel.71527ca8.js";import"./QMenu.27cad430.js";import"./position-engine.b27ef5cb.js";import"./selection.03c1209a.js";import"./rtl.cf9bbe47.js";import"./_commonjsHelpers.a26ce4be.js";import"./index.7dbe61ef.js";import"./localForage.5c9cf61e.js";import"./i18n.6b65d4f8.js";import"./api.8f52ca6d.js";import"./QInnerLoading.44bc1ab1.js";import"./QTable.6601b475.js";import"./QList.31fef766.js";import"./QMarkupTable.ffd300b6.js";import"./use-fullscreen.c582caf6.js";import"./export-file.eb604dd4.js";const z={name:"Pipeline",components:{ProjectPipelineTable:U},setup(){const u=N(),o=h(null),n=h(""),{fetchAllDeployments:e,fetchAllInProcess:m,fetchAllPending:f,getDeployments:c,getInProcess:i,getPending:w}=T(),{userProjects:P}=O(),p=r(()=>o.value?o.value[9]:null),y=r(()=>P()),j=r(()=>c(p.value).filter(t=>t[20]==="Complete")),x=r(()=>{const t=[];return c(p.value).forEach(a=>{a[31].toLowerCase().includes(n.value.toLowerCase())&&t.push(a)}),t}),g=r(()=>{const t=[];return w(p.value).forEach(a=>{a[25].toLowerCase().includes(n.value.toLowerCase())&&t.push(a)}),t}),b=r(()=>{const t=[];return i(p.value).forEach(a=>{a[39].toLowerCase().includes(n.value.toLowerCase())&&t.push(a)}),t}),C=r(()=>b.value.concat(g.value.concat(x.value)));async function V(){u.loading.show(),await e(),await m(),await f(),u.loading.hide()}return V(),{projectFilter:o,arrived:j,allPipeline:C,projectOptions:y,search:n}}},Z={class:"q-pt-sm"},G={class:"text-h5 text-dark"},H={class:"text-body2 text-italic q-ml-sm"},J=s("div",{class:"text-subtitle2 text-accent"},"The following people are currently in process or deployed for your job site(s).",-1),K={class:"row items-center"},M={key:0,class:"col-12 col-md-3 q-px-sm"},R={class:"col-12 col-md-3 q-px-sm"};function W(u,o,n,e,m,f){const c=D("project-pipeline-table");return _(),F(I,{style:{"max-width":"100vw"}},{default:d(()=>[s("div",Z,[l(A,{flat:""},{default:d(()=>[l(v,{class:"q-pb-none"},{default:d(()=>[s("div",G,[S(" Staffing Pipeline "),s("span",H,"("+q(e.allPipeline.length)+" total)",1)]),J]),_:1}),l(v,null,{default:d(()=>[s("div",K,[e.projectOptions.length>1?(_(),B("div",M,[l(E,{dense:"",label:"Filter By Project","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.projectFilter,"onUpdate:modelValue":o[0]||(o[0]=i=>e.projectFilter=i),options:e.projectOptions,"option-value":"9","option-label":"12","display-value":e.projectFilter?e.projectFilter[12]:"","use-chips":""},null,8,["modelValue","options","display-value"])])):L("",!0),s("div",R,[l(k,{dense:"",modelValue:e.search,"onUpdate:modelValue":o[1]||(o[1]=i=>e.search=i),label:"Search"},null,8,["modelValue"])])])]),_:1})]),_:1}),l(c,{rows:e.allPipeline},null,8,["rows"])])]),_:1})}var xe=Q(z,[["render",W]]);export{xe as default};
