import{Q as L}from"./QPage.c832dd56.js";import{u as A}from"./use-quasar.bf22106c.js";import{l as g,bM as N,c as u,_ as C,A as m,B as _,d as a,bi as b,cx as V,D as F,bO as R,bF as U,r as z,aZ as E,cw as B,F as G,aY as O,an as j,cz as Y,ao as Z}from"./index.7f467912.js";import{q as H}from"./quickbase.159c15f2.js";import{a as J}from"./useQuerySaver.c5fe436e.js";import{u as P}from"./dataStore.6465eb17.js";import{a as M,c as d}from"./array.56d01c64.js";import{a as D,u as p}from"./vee-validate.esm.3e9599dd.js";import{Q as K}from"./QForm.9215ce8a.js";import"./_commonjsHelpers.a26ce4be.js";import"./dayjs.0f1a0bc9.js";import"./index.7dbe61ef.js";import"./localForage.24410b96.js";import"./i18n.5ecfa174.js";import"./api.54911380.js";const T=g({components:{},props:{columns:Array},setup(e,{emit:r}){const t=N(),{getViewedProjects:n,updateViewedProjects:i}=P(),o=u(()=>t.params.id?t.params.id:null),s=u(()=>o.value?n(o.value):null),c=u(()=>s.value&&s.value.crafts?s.value.crafts:[]),f=M({ssn:d().required().length(9).matches("^[0-9]*$").label("Social Security Number"),first:d().required().label("First Name"),last:d().required().label("Last Name")}),{errors:l,handleSubmit:v,handleReset:y}=D({validationSchema:f}),q=v(async Q=>{console.log(Q)}),{value:$}=p("ssn"),{value:w}=p("first"),{value:S}=p("last");return{crafts:c,ssn:$,first:w,last:S,formErrors:l,submit:q,handleReset:y}}}),W={class:"q-pa-none q-ma-none",style:{display:"inline-block"}};function X(e,r,t,n,i,o){return m(),_("div",null,[a(K,{onSubmit:U(e.submit,["prevent"])},{default:b(()=>[a(V,{style:{display:"inline-block"},dense:"",modelValue:e.ssn,"onUpdate:modelValue":r[0]||(r[0]=s=>e.ssn=s),square:"",outlined:"",label:"Social Security Number","stack-label":"",error:!!e.formErrors.ssn,class:"q-ma-none q-pa-none"},null,8,["modelValue","error"]),a(V,{style:{display:"inline-block"},dense:"",modelValue:e.first,"onUpdate:modelValue":r[1]||(r[1]=s=>e.first=s),square:"",outlined:"",label:"First Name","stack-label":"",error:!!e.formErrors.first,class:"q-ma-none q-pa-none"},null,8,["modelValue","error"]),a(V,{style:{display:"inline-block"},dense:"",modelValue:e.last,"onUpdate:modelValue":r[2]||(r[2]=s=>e.last=s),square:"",outlined:"",label:"Last Name","stack-label":"",error:!!e.formErrors.last,class:"q-ma-none q-pa-none"},null,8,["modelValue","error"]),F("div",W,[a(R,{class:"q-my-none q-py-none",color:"info",label:"Submit",type:"submit",dense:"",onClick:e.submit},null,8,["onClick"]),a(R,{class:"q-my-none q-py-none",color:"secondary",label:"Reset",dense:"",onClick:e.handleReset},null,8,["onClick"])])]),_:1},8,["onSubmit"])])}var x=C(T,[["render",X]]);const ee=g({components:{RosterRow:x},props:{},setup(e,{emit:r}){const t=N(),n=z([]),{getViewedProjects:i,updateViewedProjects:o}=P(),s=u(()=>t.params.id?t.params.id:null),c=u(()=>s.value?i(s.value):null),f=M({ssn:d().required().length(9).matches("^[0-9]*$").label("Social Security Number"),first:d().required(),last:d().required()}),{errors:l,handleSubmit:v}=D({validationSchema:f}),y=v(async h=>{console.log(h)}),{value:q}=p("ssn"),{value:$}=p("first"),{value:w}=p("last"),S=u(()=>[{label:"Social Security Number",type:"input",model:q,error:!!l.ssn,errorMessage:l.ssn},{label:"First Name",type:"input",model:$,error:!!l.first,errorMessage:l.first},{label:"Last Name",type:"input",model:w,error:!!l.last,errorMessage:l.last}]);return(()=>{for(let k=0;k<25;k++){const I={key:k};n.value.push(I)}})(),{project:c,columns:S,submit:y,rows:n}}}),se=F("div",{class:"text-h6 font-weight-bold"},"Roster Setup",-1);function re(e,r,t,n,i,o){const s=E("roster-row");return m(),_("div",null,[a(Y,null,{default:b(()=>[a(B,null,{default:b(()=>[se]),_:1}),a(B,null,{default:b(()=>[(m(!0),_(G,null,O(e.rows,c=>(m(),j(s,{key:c.key,class:"q-ma-none q-pa-none"}))),128))]),_:1})]),_:1})])}var oe=C(ee,[["render",re]]);const te=g({name:"Setup",components:{RosterSetup:oe},setup(){const e=A(),r=N(),{getViewedProjects:t,updateViewedProjects:n,setViewedProjects:i}=P(),o=u(()=>r.params.id?r.params.id:null),s=u(()=>o.value?t(o.value):null);return(async()=>{if(e.loading.show(),o.value&&!s.value){const{data:f}=await H.fetchFromProjectsApp({fields:[J({type:"projects",id:o.value})]});i({id:o.value,data:f})}e.loading.hide()})(),{project:s}}}),ae={class:"q-pa-md"};function ne(e,r,t,n,i,o){const s=E("roster-setup");return m(),j(L,{style:{"max-width":"100vw"}},{default:b(()=>[F("div",ae,[e.project?(m(),j(s,{key:0})):Z("",!0)])]),_:1})}var he=C(te,[["render",ne]]);export{he as default};
