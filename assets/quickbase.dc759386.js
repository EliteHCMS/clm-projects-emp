var bn=Object.defineProperty,xn=Object.defineProperties;var wn=Object.getOwnPropertyDescriptors;var Kr=Object.getOwnPropertySymbols;var An=Object.prototype.hasOwnProperty,Sn=Object.prototype.propertyIsEnumerable;var jt=(e,t,r)=>t in e?bn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,F=(e,t)=>{for(var r in t||(t={}))An.call(t,r)&&jt(e,r,t[r]);if(Kr)for(var r of Kr(t))Sn.call(t,r)&&jt(e,r,t[r]);return e},B=(e,t)=>xn(e,wn(t));var R=(e,t,r)=>(jt(e,typeof t!="symbol"?t+"":t,r),r);import{m as ee,l as k,P as _,f as _s,n as Jt,p as On,q as In,s as kn,t as Ms,u as Cn,v as L,x as Ls,y as $n,z as Tn}from"./index.544726d2.js";import{c as Pn,a as We,g as Rn}from"./_commonjsHelpers.a26ce4be.js";import{dayjs as p}from"./dayjs.18653603.js";import{r as mr,a as gr}from"./index.7dbe61ef.js";import{stateDB as Q,localforage as x}from"./localForage.cf0f4dd4.js";import{i as Ye}from"./i18n.95b8f7c4.js";import{api as jn}from"./api.c454b805.js";var Us={exports:{}};(function(e){/**
 * @license bcrypt.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/bcrypt.js for details
 */(function(t,r){typeof Pn=="function"&&!0&&e&&e.exports?e.exports=r():(t.dcodeIO=t.dcodeIO||{}).bcrypt=r()})(We,function(){var t={},r=null;function s(g){if(e&&e.exports)try{return require("crypto").randomBytes(g)}catch{}try{var y;return(self.crypto||self.msCrypto).getRandomValues(y=new Uint32Array(g)),Array.prototype.slice.call(y)}catch{}if(!r)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return r(g)}var i=!1;try{s(1),i=!0}catch{}r=null,t.setRandomFallback=function(g){r=g},t.genSaltSync=function(g,y){if(g=g||C,typeof g!="number")throw Error("Illegal arguments: "+typeof g+", "+typeof y);g<4?g=4:g>31&&(g=31);var h=[];return h.push("$2a$"),g<10&&h.push("0"),h.push(g.toString()),h.push("$"),h.push(m(s(O),O)),h.join("")},t.genSalt=function(g,y,h){if(typeof y=="function"&&(h=y,y=void 0),typeof g=="function"&&(h=g,g=void 0),typeof g=="undefined")g=C;else if(typeof g!="number")throw Error("illegal arguments: "+typeof g);function d(f){a(function(){try{f(null,t.genSaltSync(g))}catch(b){f(b)}})}if(h){if(typeof h!="function")throw Error("Illegal callback: "+typeof h);d(h)}else return new Promise(function(f,b){d(function(S,$){if(S){b(S);return}f($)})})},t.hashSync=function(g,y){if(typeof y=="undefined"&&(y=C),typeof y=="number"&&(y=t.genSaltSync(y)),typeof g!="string"||typeof y!="string")throw Error("Illegal arguments: "+typeof g+", "+typeof y);return ue(g,y)},t.hash=function(g,y,h,d){function f(b){typeof g=="string"&&typeof y=="number"?t.genSalt(y,function(S,$){ue(g,$,b,d)}):typeof g=="string"&&typeof y=="string"?ue(g,y,b,d):a(b.bind(this,Error("Illegal arguments: "+typeof g+", "+typeof y)))}if(h){if(typeof h!="function")throw Error("Illegal callback: "+typeof h);f(h)}else return new Promise(function(b,S){f(function($,I){if($){S($);return}b(I)})})};function n(g,y){for(var h=0,d=0,f=0,b=g.length;f<b;++f)g.charCodeAt(f)===y.charCodeAt(f)?++h:++d;return h<0?!1:d===0}t.compareSync=function(g,y){if(typeof g!="string"||typeof y!="string")throw Error("Illegal arguments: "+typeof g+", "+typeof y);return y.length!==60?!1:n(t.hashSync(g,y.substr(0,y.length-31)),y)},t.compare=function(g,y,h,d){function f(b){if(typeof g!="string"||typeof y!="string"){a(b.bind(this,Error("Illegal arguments: "+typeof g+", "+typeof y)));return}if(y.length!==60){a(b.bind(this,null,!1));return}t.hash(g,y.substr(0,29),function(S,$){S?b(S):b(null,n($,y))},d)}if(h){if(typeof h!="function")throw Error("Illegal callback: "+typeof h);f(h)}else return new Promise(function(b,S){f(function($,I){if($){S($);return}b(I)})})},t.getRounds=function(g){if(typeof g!="string")throw Error("Illegal arguments: "+typeof g);return parseInt(g.split("$")[2],10)},t.getSalt=function(g){if(typeof g!="string")throw Error("Illegal arguments: "+typeof g);if(g.length!==60)throw Error("Illegal hash length: "+g.length+" != 60");return g.substring(0,29)};var a=typeof process!="undefined"&&process&&typeof process.nextTick=="function"?typeof setImmediate=="function"?setImmediate:process.nextTick:setTimeout;function o(g){var y=[],h=0;return w.encodeUTF16toUTF8(function(){return h>=g.length?null:g.charCodeAt(h++)},function(d){y.push(d)}),y}var c="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),l=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1],u=String.fromCharCode;function m(g,y){var h=0,d=[],f,b;if(y<=0||y>g.length)throw Error("Illegal len: "+y);for(;h<y;){if(f=g[h++]&255,d.push(c[f>>2&63]),f=(f&3)<<4,h>=y){d.push(c[f&63]);break}if(b=g[h++]&255,f|=b>>4&15,d.push(c[f&63]),f=(b&15)<<2,h>=y){d.push(c[f&63]);break}b=g[h++]&255,f|=b>>6&3,d.push(c[f&63]),d.push(c[b&63])}return d.join("")}function v(g,y){var h=0,d=g.length,f=0,b=[],S,$,I,E,N,M;if(y<=0)throw Error("Illegal len: "+y);for(;h<d-1&&f<y&&(M=g.charCodeAt(h++),S=M<l.length?l[M]:-1,M=g.charCodeAt(h++),$=M<l.length?l[M]:-1,!(S==-1||$==-1||(N=S<<2>>>0,N|=($&48)>>4,b.push(u(N)),++f>=y||h>=d)||(M=g.charCodeAt(h++),I=M<l.length?l[M]:-1,I==-1)||(N=($&15)<<4>>>0,N|=(I&60)>>2,b.push(u(N)),++f>=y||h>=d)));)M=g.charCodeAt(h++),E=M<l.length?l[M]:-1,N=(I&3)<<6>>>0,N|=E,b.push(u(N)),++f;var oe=[];for(h=0;h<f;h++)oe.push(b[h].charCodeAt(0));return oe}var w=function(){var g={};return g.MAX_CODEPOINT=1114111,g.encodeUTF8=function(y,h){var d=null;for(typeof y=="number"&&(d=y,y=function(){return null});d!==null||(d=y())!==null;)d<128?h(d&127):d<2048?(h(d>>6&31|192),h(d&63|128)):d<65536?(h(d>>12&15|224),h(d>>6&63|128),h(d&63|128)):(h(d>>18&7|240),h(d>>12&63|128),h(d>>6&63|128),h(d&63|128)),d=null},g.decodeUTF8=function(y,h){for(var d,f,b,S,$=function(I){I=I.slice(0,I.indexOf(null));var E=Error(I.toString());throw E.name="TruncatedError",E.bytes=I,E};(d=y())!==null;)if((d&128)===0)h(d);else if((d&224)===192)(f=y())===null&&$([d,f]),h((d&31)<<6|f&63);else if((d&240)===224)((f=y())===null||(b=y())===null)&&$([d,f,b]),h((d&15)<<12|(f&63)<<6|b&63);else if((d&248)===240)((f=y())===null||(b=y())===null||(S=y())===null)&&$([d,f,b,S]),h((d&7)<<18|(f&63)<<12|(b&63)<<6|S&63);else throw RangeError("Illegal starting byte: "+d)},g.UTF16toUTF8=function(y,h){for(var d,f=null;(d=f!==null?f:y())!==null;){if(d>=55296&&d<=57343&&(f=y())!==null&&f>=56320&&f<=57343){h((d-55296)*1024+f-56320+65536),f=null;continue}h(d)}f!==null&&h(f)},g.UTF8toUTF16=function(y,h){var d=null;for(typeof y=="number"&&(d=y,y=function(){return null});d!==null||(d=y())!==null;)d<=65535?h(d):(d-=65536,h((d>>10)+55296),h(d%1024+56320)),d=null},g.encodeUTF16toUTF8=function(y,h){g.UTF16toUTF8(y,function(d){g.encodeUTF8(d,h)})},g.decodeUTF8toUTF16=function(y,h){g.decodeUTF8(y,function(d){g.UTF8toUTF16(d,h)})},g.calculateCodePoint=function(y){return y<128?1:y<2048?2:y<65536?3:4},g.calculateUTF8=function(y){for(var h,d=0;(h=y())!==null;)d+=g.calculateCodePoint(h);return d},g.calculateUTF16asUTF8=function(y){var h=0,d=0;return g.UTF16toUTF8(y,function(f){++h,d+=g.calculateCodePoint(f)}),[h,d]},g}();Date.now=Date.now||function(){return+new Date};var O=16,C=10,D=16,P=100,te=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],ie=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],he=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function ne(g,y,h,d){var f,b=g[y],S=g[y+1];return b^=h[0],f=d[b>>>24],f+=d[256|b>>16&255],f^=d[512|b>>8&255],f+=d[768|b&255],S^=f^h[1],f=d[S>>>24],f+=d[256|S>>16&255],f^=d[512|S>>8&255],f+=d[768|S&255],b^=f^h[2],f=d[b>>>24],f+=d[256|b>>16&255],f^=d[512|b>>8&255],f+=d[768|b&255],S^=f^h[3],f=d[S>>>24],f+=d[256|S>>16&255],f^=d[512|S>>8&255],f+=d[768|S&255],b^=f^h[4],f=d[b>>>24],f+=d[256|b>>16&255],f^=d[512|b>>8&255],f+=d[768|b&255],S^=f^h[5],f=d[S>>>24],f+=d[256|S>>16&255],f^=d[512|S>>8&255],f+=d[768|S&255],b^=f^h[6],f=d[b>>>24],f+=d[256|b>>16&255],f^=d[512|b>>8&255],f+=d[768|b&255],S^=f^h[7],f=d[S>>>24],f+=d[256|S>>16&255],f^=d[512|S>>8&255],f+=d[768|S&255],b^=f^h[8],f=d[b>>>24],f+=d[256|b>>16&255],f^=d[512|b>>8&255],f+=d[768|b&255],S^=f^h[9],f=d[S>>>24],f+=d[256|S>>16&255],f^=d[512|S>>8&255],f+=d[768|S&255],b^=f^h[10],f=d[b>>>24],f+=d[256|b>>16&255],f^=d[512|b>>8&255],f+=d[768|b&255],S^=f^h[11],f=d[S>>>24],f+=d[256|S>>16&255],f^=d[512|S>>8&255],f+=d[768|S&255],b^=f^h[12],f=d[b>>>24],f+=d[256|b>>16&255],f^=d[512|b>>8&255],f+=d[768|b&255],S^=f^h[13],f=d[S>>>24],f+=d[256|S>>16&255],f^=d[512|S>>8&255],f+=d[768|S&255],b^=f^h[14],f=d[b>>>24],f+=d[256|b>>16&255],f^=d[512|b>>8&255],f+=d[768|b&255],S^=f^h[15],f=d[S>>>24],f+=d[256|S>>16&255],f^=d[512|S>>8&255],f+=d[768|S&255],b^=f^h[16],g[y]=S^h[D+1],g[y+1]=b,g}function re(g,y){for(var h=0,d=0;h<4;++h)d=d<<8|g[y]&255,y=(y+1)%g.length;return{key:d,offp:y}}function le(g,y,h){for(var d=0,f=[0,0],b=y.length,S=h.length,$,I=0;I<b;I++)$=re(g,d),d=$.offp,y[I]=y[I]^$.key;for(I=0;I<b;I+=2)f=ne(f,0,y,h),y[I]=f[0],y[I+1]=f[1];for(I=0;I<S;I+=2)f=ne(f,0,y,h),h[I]=f[0],h[I+1]=f[1]}function Oe(g,y,h,d){for(var f=0,b=[0,0],S=h.length,$=d.length,I,E=0;E<S;E++)I=re(y,f),f=I.offp,h[E]=h[E]^I.key;for(f=0,E=0;E<S;E+=2)I=re(g,f),f=I.offp,b[0]^=I.key,I=re(g,f),f=I.offp,b[1]^=I.key,b=ne(b,0,h,d),h[E]=b[0],h[E+1]=b[1];for(E=0;E<$;E+=2)I=re(g,f),f=I.offp,b[0]^=I.key,I=re(g,f),f=I.offp,b[1]^=I.key,b=ne(b,0,h,d),d[E]=b[0],d[E+1]=b[1]}function ae(g,y,h,d,f){var b=he.slice(),S=b.length,$;if(h<4||h>31)if($=Error("Illegal number of rounds (4-31): "+h),d){a(d.bind(this,$));return}else throw $;if(y.length!==O)if($=Error("Illegal salt length: "+y.length+" != "+O),d){a(d.bind(this,$));return}else throw $;h=1<<h>>>0;var I,E,N=0,M;Int32Array?(I=new Int32Array(te),E=new Int32Array(ie)):(I=te.slice(),E=ie.slice()),Oe(y,g,I,E);function oe(){if(f&&f(N/h),N<h)for(var Te=Date.now();N<h&&(N=N+1,le(g,I,E),le(y,I,E),!(Date.now()-Te>P)););else{for(N=0;N<64;N++)for(M=0;M<S>>1;M++)ne(b,M<<1,I,E);var z=[];for(N=0;N<S;N++)z.push((b[N]>>24&255)>>>0),z.push((b[N]>>16&255)>>>0),z.push((b[N]>>8&255)>>>0),z.push((b[N]&255)>>>0);if(d){d(null,z);return}else return z}d&&a(oe)}if(typeof d!="undefined")oe();else for(var Ke;;)if(typeof(Ke=oe())!="undefined")return Ke||[]}function ue(g,y,h,d){var f;if(typeof g!="string"||typeof y!="string")if(f=Error("Invalid string / salt: Not a string"),h){a(h.bind(this,f));return}else throw f;var b,S;if(y.charAt(0)!=="$"||y.charAt(1)!=="2")if(f=Error("Invalid salt version: "+y.substring(0,2)),h){a(h.bind(this,f));return}else throw f;if(y.charAt(2)==="$")b=String.fromCharCode(0),S=3;else{if(b=y.charAt(2),b!=="a"&&b!=="b"&&b!=="y"||y.charAt(3)!=="$")if(f=Error("Invalid salt revision: "+y.substring(2,4)),h){a(h.bind(this,f));return}else throw f;S=4}if(y.charAt(S+2)>"$")if(f=Error("Missing salt rounds"),h){a(h.bind(this,f));return}else throw f;var $=parseInt(y.substring(S,S+1),10)*10,I=parseInt(y.substring(S+1,S+2),10),E=$+I,N=y.substring(S+3,S+25);g+=b>="a"?"\0":"";var M=o(g),oe=v(N,O);function Ke(Te){var z=[];return z.push("$2"),b>="a"&&z.push(b),z.push("$"),E<10&&z.push("0"),z.push(E.toString()),z.push("$"),z.push(m(oe,oe.length)),z.push(m(Te,he.length*4-1)),z.join("")}if(typeof h=="undefined")return Ke(ae(M,oe,E));ae(M,oe,E,function(Te,z){Te?h(Te,null):h(null,Ke(z))},d)}return t.encodeBase64=m,t.decodeBase64=v,t})})(Us);var Ve=Us.exports,Bs={get dev(){return!1},baseURL:"https://clm-api.elitehcms.com",apiDevURL:"https://clm-api.elitehcms.com",socketDevURL:"wss://clm-api.elitehcms.com",token:"clm-jwt",tokenExpiration:"24h"};function Dn(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Je(){return(Je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}function vr(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Hs=function(){function e(s,i){this.operator=s,this.value=i,Object.defineProperty(this,"t",{writable:!0})}var t,r;return e.prototype.addNote=function(s){this.t=this.t||[],this.t.push(s)},t=e,(r=[{key:"notes",get:function(){return this.t}}])&&Dn(t.prototype,r),e}(),br=function(e){function t(){return e.apply(this,arguments)||this}return vr(t,e),t}(Hs),wt=function(e){function t(r,s){if(!Array.isArray(s))throw new Error('"'+r+'" operator expects to receive an array of conditions');return e.call(this,r,s)||this}return vr(t,e),t}(br),st="__itself__",At=function(e){function t(r,s,i){var n;return(n=e.call(this,r,i)||this).field=s,n}return vr(t,e),t}(Hs),zs=new br("__null__",null),Gt=Object.prototype.hasOwnProperty.call.bind(Object.prototype.hasOwnProperty);function En(e,t){return t instanceof wt&&t.operator===e}function Ks(e,t){return t.length===1?t[0]:new wt(e,function r(s,i,n){for(var a=n||[],o=0,c=i.length;o<c;o++){var l=i[o];En(s,l)?r(s,l.value,a):a.push(l)}return a}(e,t))}var Fn=function(e){return e},Ys=function(){return Object.create(null)},Qs=Object.defineProperty(Ys(),"__@type@__",{value:"ignore value"});function Nn(e,t,r){if(r===void 0&&(r=!1),!e||e&&e.constructor!==Object)return!1;for(var s in e)if(Gt(e,s)&&Gt(t,s)&&(!r||e[s]!==Qs))return!0;return!1}function qn(e){var t=[];for(var r in e)Gt(e,r)&&e[r]!==Qs&&t.push(r);return t}function Dt(e,t){t!==zs&&e.push(t)}var Xs=function(e){return Ks("and",e)},Ws={compound:function(e,t,r){var s=(Array.isArray(t)?t:[t]).map(function(i){return r.parse(i)});return new wt(e.name,s)},field:function(e,t,r){return new At(e.name,r.field,t)},document:function(e,t){return new br(e.name,t)}},Vs=function(){function e(r,s){var i=this;s===void 0&&(s=Ys()),this.i=void 0,this.o=void 0,this.u=void 0,this.s=void 0,this.h=void 0,this.parse=this.parse.bind(this),this.s={operatorToConditionName:s.operatorToConditionName||Fn,defaultOperatorName:s.defaultOperatorName||"eq",mergeFinalConditions:s.mergeFinalConditions||Xs},this.i=Object.keys(r).reduce(function(n,a){return n[a]=Je({name:i.s.operatorToConditionName(a)},r[a]),n},{}),this.o=Je({},s.fieldContext,{field:"",query:{},parse:this.parse,hasOperators:function(n){return Nn(n,i.i,s.useIgnoreValue)}}),this.u=Je({},s.documentContext,{parse:this.parse,query:{}}),this.h=s.useIgnoreValue?qn:Object.keys}var t=e.prototype;return t.setParse=function(r){this.parse=r,this.o.parse=r,this.u.parse=r},t.parseField=function(r,s,i,n){var a=this.i[s];if(!a)throw new Error('Unsupported operator "'+s+'"');if(a.type!=="field")throw new Error("Unexpected "+a.type+' operator "'+s+'" at field level');return this.o.field=r,this.o.query=n,this.parseInstruction(a,i,this.o)},t.parseInstruction=function(r,s,i){return typeof r.validate=="function"&&r.validate(r,s),(r.parse||Ws[r.type])(r,s,i)},t.parseFieldOperators=function(r,s){for(var i=[],n=this.h(s),a=0,o=n.length;a<o;a++){var c=n[a];if(!this.i[c])throw new Error('Field query for "'+r+'" may contain only operators or a plain object as a value');Dt(i,this.parseField(r,c,s[c],s))}return i},t.parse=function(r){var s=[],i=this.h(r);this.u.query=r;for(var n=0,a=i.length;n<a;n++){var o=i[n],c=r[o],l=this.i[o];if(l){if(l.type!=="document"&&l.type!=="compound")throw new Error('Cannot use parsing instruction for operator "'+o+'" in "document" context as it is supposed to be used in  "'+l.type+'" context');Dt(s,this.parseInstruction(l,c,this.u))}else this.o.hasOperators(c)?s.push.apply(s,this.parseFieldOperators(o,c)):Dt(s,this.parseField(o,this.s.defaultOperatorName,c,r))}return this.s.mergeFinalConditions(s)},e}();function Et(e,t){var r=e[t];if(typeof r!="function")throw new Error('Unable to interpret "'+t+'" condition. Did you forget to register interpreter for it?');return r}function _n(e){return e.operator}function Mn(e,t){var r,s=t,i=s&&s.getInterpreterName||_n;switch(s?s.numberOfArguments:0){case 1:r=function(a){var o=i(a,s);return Et(e,o)(a,n)};break;case 3:r=function(a,o,c){var l=i(a,s);return Et(e,l)(a,o,c,n)};break;default:r=function(a,o){var c=i(a,s);return Et(e,c)(a,o,n)}}var n=Je({},s,{interpret:r});return n.interpret}function Ln(e,t){return function(r){for(var s=arguments.length,i=new Array(s>1?s-1:0),n=1;n<s;n++)i[n-1]=arguments[n];var a=e.apply(void 0,[r].concat(i)),o=t.bind(null,a);return o.ast=a,o}}Vs.prototype.parseInstruction;function Js(e,t){if(!Array.isArray(t))throw new Error('"'+e.name+'" expects value to be an array')}function Gs(e,t){if(Js(e,t),!t.length)throw new Error('"'+e.name+'" expects to have at least one element in array')}var xr=function(e){return function(t,r){if(typeof r!==e)throw new Error('"'+t.name+'" expects value to be a "'+e+'"')}},Zs={type:"compound",validate:Gs,parse:function(e,t,r){var s=r.parse,i=t.map(function(n){return s(n)});return Ks(e.name,i)}},Un=Zs,Bn={type:"compound",validate:Gs},Hn={type:"field",validate:function(e,t){if(!(t&&(t instanceof RegExp||t.constructor===Object)))throw new Error('"'+e.name+'" expects to receive either regular expression or object of field operators')},parse:function(e,t,r){var s=t instanceof RegExp?new At("regex",r.field,t):r.parse(t,r);return new wt(e.name,[s])}},ei={type:"field",validate:function(e,t){if(!t||t.constructor!==Object)throw new Error('"'+e.name+'" expects to receive an object with nested query or field level operators')},parse:function(e,t,r){var s=r.parse,i=r.field,n=(0,r.hasOperators)(t)?s(t,{field:st}):s(t);return new At(e.name,i,n)}},ti={type:"field",validate:xr("number")},St={type:"field",validate:Js},ri=St,si=St,zn={type:"field",validate:function(e,t){if(!Array.isArray(t)||t.length!==2)throw new Error('"'+e.name+'" expects an array with 2 numeric elements')}},ii={type:"field",validate:xr("boolean")},wr={type:"field",validate:function(e,t){if(!(typeof t=="string"||typeof t=="number"||t instanceof Date))throw new Error('"'+e.name+'" expects value to be comparable (i.e., string, number or date)')}},Ot=wr,ni=Ot,ai=Ot,Ar={type:"field"},oi=Ar,ci={type:"field",validate:function(e,t){if(!(t instanceof RegExp)&&typeof t!="string")throw new Error('"'+e.name+'" expects value to be a regular expression or a string that represents regular expression')},parse:function(e,t,r){var s=typeof t=="string"?new RegExp(t,r.query.$options||""):t;return new At(e.name,r.field,s)}},li={type:"field",parse:function(){return zs}},Kn={type:"document",validate:xr("function")},Yn=Object.freeze({__proto__:null,$and:Zs,$or:Un,$nor:Bn,$not:Hn,$elemMatch:ei,$size:ti,$in:St,$nin:ri,$all:si,$mod:zn,$exists:ii,$gte:wr,$gt:Ot,$lt:ni,$lte:ai,$eq:Ar,$ne:oi,$regex:ci,$options:li,$where:Kn}),Qn=function(e){var t,r;function s(i){return e.call(this,i,{defaultOperatorName:"$eq",operatorToConditionName:function(n){return n.slice(1)}})||this}return r=e,(t=s).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,s.prototype.parse=function(i,n){return n&&n.field?Xs(this.parseFieldOperators(n.field,i)):e.prototype.parse.call(this,i)},s}(Vs),Zt=Yn;function Sr(e,t,r){for(var s=0,i=e.length;s<i;s++)if(r(e[s],t)===0)return!0;return!1}function Or(e,t){return Array.isArray(e)&&Number.isNaN(Number(t))}function Yr(e,t,r){if(!Or(e,t))return r(e,t);for(var s=[],i=0;i<e.length;i++){var n=r(e[i],t);n!==void 0&&(s=s.concat(n))}return s}function Ce(e){return function(t,r,s){var i=s.get(r,t.field);return Array.isArray(i)?i.some(function(n){return e(t,n,s)}):e(t,i,s)}}function Ir(){return(Ir=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}var Xn=function(e,t){return e[t]};function ui(e,t,r){var s=t.lastIndexOf(".");return s===-1?[e,t]:[r(e,t.slice(0,s)),t.slice(s+1)]}function Wn(e,t,r){if(r===void 0&&(r=Xn),t===st)return e;if(!e)throw new Error('Unable to get field "'+t+'" out of '+String(e)+".");return function(s,i,n){if(i.indexOf(".")===-1)return Yr(s,i,n);for(var a=i.split("."),o=s,c=0,l=a.length;c<l;c++)if(!(o=Yr(o,a[c],n))||typeof o!="object")return o;return o}(e,t,r)}function fi(e,t){return e===t?0:e>t?1:-1}function di(e,t){return t===void 0&&(t={}),Mn(e,Ir({get:Wn,compare:fi},t))}var pi=function(e,t,r){var s=r.interpret;return e.value.some(function(i){return s(i,t)})},Vn=function(e,t,r){return!pi(e,t,r)},hi=function(e,t,r){var s=r.interpret;return e.value.every(function(i){return s(i,t)})},Jn=function(e,t,r){return!(0,r.interpret)(e.value[0],t)},kr=function(e,t,r){var s=r.compare,i=(0,r.get)(t,e.field);return Array.isArray(i)&&!Array.isArray(e.value)?Sr(i,e.value,s):s(i,e.value)===0},yi=function(e,t,r){return!kr(e,t,r)},mi=Ce(function(e,t,r){var s=r.compare(t,e.value);return s===0||s===-1}),gi=Ce(function(e,t,r){return r.compare(t,e.value)===-1}),vi=Ce(function(e,t,r){return r.compare(t,e.value)===1}),bi=Ce(function(e,t,r){var s=r.compare(t,e.value);return s===0||s===1}),xi=function(e,t,r){var s=r.get;if(e.field===st)return t!==void 0;var i=ui(t,e.field,s),n=i[0],a=i[1],o=function(c){return!!c&&c.hasOwnProperty(a)===e.value};return Or(n,a)?n.some(o):o(n)},Gn=Ce(function(e,t){return typeof t=="number"&&t%e.value[0]===e.value[1]}),wi=function(e,t,r){var s=r.get,i=ui(t,e.field,s),n=i[0],a=i[1],o=function(c){var l=s(c,a);return Array.isArray(l)&&l.length===e.value};return e.field!==st&&Or(n,a)?n.some(o):o(n)},Ai=Ce(function(e,t){return typeof t=="string"&&e.value.test(t)}),ht=Ce(function(e,t,r){var s=r.compare;return Sr(e.value,t,s)}),Si=function(e,t,r){return!ht(e,t,r)},Oi=function(e,t,r){var s=r.compare,i=(0,r.get)(t,e.field);return Array.isArray(i)&&e.value.every(function(n){return Sr(i,n,s)})},Ii=function(e,t,r){var s=r.interpret,i=(0,r.get)(t,e.field);return Array.isArray(i)&&i.some(function(n){return s(e.value,n)})},Zn=function(e,t){return e.value.call(t)},Cr=Ir({},Object.freeze({__proto__:null,or:pi,nor:Vn,and:hi,not:Jn,eq:kr,ne:yi,lte:mi,lt:gi,gt:vi,gte:bi,exists:xi,mod:Gn,size:wi,regex:Ai,within:ht,nin:Si,all:Oi,elemMatch:Ii,where:Zn}),{in:ht});di(Cr);function Ge(){return(Ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}function Qr(e){return e instanceof Date?e.getTime():e&&typeof e.toJSON=="function"?e.toJSON():e}var ea=function(e,t){return fi(Qr(e),Qr(t))};function $r(e,t,r){var s=new Qn(e),i=di(t,Ge({compare:ea},r));if(r&&r.forPrimitives){var n={field:st},a=s.parse;s.setParse(function(o){return a(o,n)})}return Ln(s.parse,i)}$r(Zt,Cr);$r(["$and","$or"].reduce(function(e,t){return e[t]=Ge({},e[t],{type:"field"}),e},Ge({},Zt,{$nor:Ge({},Zt.$nor,{type:"field",parse:Ws.compound})})),Cr,{forPrimitives:!0});function Xr(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function ki(e,t,r){return t&&Xr(e.prototype,t),r&&Xr(e,r),e}function er(){return er=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},er.apply(this,arguments)}function Tr(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,tr(e,t)}function tr(e,t){return tr=Object.setPrototypeOf||function(s,i){return s.__proto__=i,s},tr(e,t)}function ta(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rr(e){return Array.isArray(e)?e:[e]}var Ci=Object.hasOwn||Object.prototype.hasOwnProperty.call.bind(Object.prototype.hasOwnProperty),De="__caslSubjectType__";function dy(e,t){if(t){if(!Ci(t,De))Object.defineProperty(t,De,{value:e});else if(e!==t[De])throw new Error("Trying to cast object to subject type "+e+" but previously it was casted to "+t[De])}return t}var sr=function(t){var r=typeof t;return r==="string"||r==="function"},$i=function(t){return t.modelName||t.name},ra=function(t){return typeof t=="string"?t:$i(t)};function sa(e){return Ci(e,De)?e[De]:$i(e.constructor)}function Wr(e,t,r){for(var s=r;s<t.length;s++)e.push(t[s])}function Vr(e,t){if(!e||!e.length)return t||[];if(!t||!t.length)return e||[];for(var r=0,s=0,i=[];r<e.length&&s<t.length;)e[r].priority<t[s].priority?(i.push(e[r]),r++):(i.push(t[s]),s++);return Wr(i,e,r),Wr(i,t,s),i}function nt(e,t,r){var s=e.get(t);return s||(s=r(),e.set(t,s)),s}var ia=function(t){return t};function na(e,t){if(Array.isArray(e.fields)&&!e.fields.length)throw new Error("`rawRule.fields` cannot be an empty array. https://bit.ly/390miLa");if(e.fields&&!t.fieldMatcher)throw new Error('You need to pass "fieldMatcher" option in order to restrict access by fields');if(e.conditions&&!t.conditionsMatcher)throw new Error('You need to pass "conditionsMatcher" option in order to restrict access by conditions')}var aa=function(){function e(r,s,i){i===void 0&&(i=0),na(r,s),this.action=s.resolveAction(r.action),this.subject=r.subject,this.inverted=!!r.inverted,this.conditions=r.conditions,this.reason=r.reason,this.fields=r.fields?rr(r.fields):void 0,this.priority=i,this.t=s}var t=e.prototype;return t.i=function(){return this.conditions&&!this.u&&(this.u=this.t.conditionsMatcher(this.conditions)),this.u},t.matchesConditions=function(s){if(!this.conditions)return!0;if(!s||sr(s))return!this.inverted;var i=this.i();return i(s)},t.matchesField=function(s){return this.fields?s?(this.fields&&!this.o&&(this.o=this.t.fieldMatcher(this.fields)),this.o(s)):!this.inverted:!0},ki(e,[{key:"ast",get:function(){var s=this.i();return s?s.ast:void 0}}]),e}();function oa(e,t){var r={value:e,prev:t,next:null};return t&&(t.next=r),r}function ca(e){e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next),e.next=e.prev=null}var la=function(t){return{value:t.value,prev:t.prev,next:t.next}},Jr=function(){return{rules:[],merged:!1}},Gr=function(){return new Map},ua=function(t,r){!t.h&&r.fields&&(t.h=!0)},fa=function(){function e(r,s){r===void 0&&(r=[]),s===void 0&&(s={}),this.h=!1,this.v=new Map,this.l={conditionsMatcher:s.conditionsMatcher,fieldMatcher:s.fieldMatcher,resolveAction:s.resolveAction||ia},this.p=s.anyAction||"manage",this.g=s.anySubjectType||"all",this.A=s.detectSubjectType||sa,this.j=r,this.$=this.M(r)}var t=e.prototype;return t.detectSubjectType=function(s){return sr(s)?s:s?this.A(s):this.g},t.update=function(s){var i={rules:s,ability:this,target:this};return this.m("update",i),this.j=s,this.$=this.M(s),this.m("updated",i),this},t.M=function(s){for(var i=new Map,n=s.length-1;n>=0;n--){var a=s.length-n-1,o=new aa(s[n],this.l,a),c=rr(o.action),l=rr(o.subject||this.g);ua(this,o);for(var u=0;u<l.length;u++)for(var m=nt(i,l[u],Gr),v=0;v<c.length;v++)nt(m,c[v],Jr).rules.push(o)}return i},t.possibleRulesFor=function(s,i){if(i===void 0&&(i=this.g),!sr(i))throw new Error('"possibleRulesFor" accepts only subject types (i.e., string or class) as the 2nd parameter');var n=nt(this.$,i,Gr),a=nt(n,s,Jr);if(a.merged)return a.rules;var o=s!==this.p&&n.has(this.p)?n.get(this.p).rules:void 0,c=Vr(a.rules,o);return i!==this.g&&(c=Vr(c,this.possibleRulesFor(s,this.g))),a.rules=c,a.merged=!0,c},t.rulesFor=function(s,i,n){var a=this.possibleRulesFor(s,i);if(n&&typeof n!="string")throw new Error("The 3rd, `field` parameter is expected to be a string. See https://stalniy.github.io/casl/en/api/casl-ability#can-of-pure-ability for details");return this.h?a.filter(function(o){return o.matchesField(n)}):a},t.on=function(s,i){var n=this,a=this.v.get(s)||null,o=oa(i,a);return this.v.set(s,o),function(){var c=n.v.get(s);!o.next&&!o.prev&&c===o?n.v.delete(s):o===c&&n.v.set(s,o.prev),ca(o)}},t.m=function(s,i){for(var n=this.v.get(s)||null;n!==null;){var a=n.prev?la(n.prev):null;n.value(i),n=a}},ki(e,[{key:"rules",get:function(){return this.j}}]),e}(),da=function(e){Tr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.can=function(i,n,a){var o=this.relevantRuleFor(i,n,a);return!!o&&!o.inverted},r.relevantRuleFor=function(i,n,a){for(var o=this.detectSubjectType(n),c=this.rulesFor(i,o,a),l=0,u=c.length;l<u;l++)if(c[l].matchesConditions(n))return c[l];return null},r.cannot=function(i,n,a){return!this.can(i,n,a)},t}(fa),pa={$eq:Ar,$ne:oi,$lt:ni,$lte:ai,$gt:Ot,$gte:wr,$in:St,$nin:ri,$all:si,$size:ti,$regex:ci,$options:li,$elemMatch:ei,$exists:ii},ha={eq:kr,ne:yi,lt:gi,lte:mi,gt:vi,gte:bi,in:ht,nin:Si,all:Oi,size:wi,regex:Ai,elemMatch:Ii,exists:xi,and:hi},ya=$r(pa,ha),ma=/[-/\\^$+?.()|[\]{}]/g,ga=/\.?\*+\.?/g,va=/\*+/,ba=/\./g;function xa(e,t,r){var s=r[0]==="*"||e[0]==="."&&e[e.length-1]==="."?"+":"*",i=e.indexOf("**")===-1?"[^.]":".",n=e.replace(ba,"\\$&").replace(va,i+s);return t+e.length===r.length?"(?:"+n+")?":n}function wa(e,t,r){return e==="."&&(r[t-1]==="*"||r[t+1]==="*")?e:"\\"+e}function Aa(e){var t=e.map(function(s){return s.replace(ma,wa).replace(ga,xa)}),r=t.length>1?"(?:"+t.join("|")+")":t[0];return new RegExp("^"+r+"$")}var Sa=function(t){var r;return function(s){return typeof r=="undefined"&&(r=t.every(function(i){return i.indexOf("*")===-1})?null:Aa(t)),r===null?t.indexOf(s)!==-1:r.test(s)}},Oa=function(e){Tr(t,e);function t(r,s){return r===void 0&&(r=[]),s===void 0&&(s={}),e.call(this,r,er({conditionsMatcher:ya,fieldMatcher:Sa},s))||this}return t}(da),Ia=function(t){return'Cannot execute "'+t.action+'" on "'+t.subjectType+'"'},Ti=function(t){this.message=t};Ti.prototype=Object.create(Error.prototype);var ka=function(e){Tr(t,e),t.setDefaultMessage=function(i){this._=typeof i=="string"?function(){return i}:i},t.from=function(i){return new this(i)};function t(s){var i;return i=e.call(this,"")||this,i.ability=s,typeof Error.captureStackTrace=="function"&&(i.name="ForbiddenError",Error.captureStackTrace(ta(i),i.constructor)),i}var r=t.prototype;return r.setMessage=function(i){return this.message=i,this},r.throwUnlessCan=function(i,n,a){var o=this.unlessCan(i,n,a);if(o)throw o},r.unlessCan=function(i,n,a){var o=this.ability.relevantRuleFor(i,n,a);if(!(o&&!o.inverted)){this.action=i,this.subject=n,this.subjectType=ra(this.ability.detectSubjectType(n)),this.field=a;var c=o?o.reason:"";return this.message=this.message||c||this.constructor._(this),this}},t}(Ti);ka._=Ia;Object.freeze({__proto__:null});var ir=[{action:"read",subject:"auth"},{action:"read",subject:"open"}];const Ca=new Oa(ir);var Ee=Ca;const Re=ee("dataStore",{state:()=>({queryBy:"office",selectedOffice:null,selectedProject:null,selfCheckIns:{isLoading:!1},profiles:{isLoading:!1},scheduledInterviews:{isLoading:!1},inProcessInterviews:{isLoading:!1},inProcess:{isLoading:!1},pending:{isLoading:!1},deployments:{isLoading:!1},openRequest:{isLoading:!1},pendingRequest:{isLoading:!1},closedRequest:{isLoading:!1},openClassifications:{isLoading:!1},pendingClassifications:{isLoading:!1},closedClassifications:{isLoading:!1},nameRequest:{isLoading:!1},projects:{isLoading:!1},pendingProjects:{isLoading:!1},releases:{isLoading:!1},jobPost:{isLoading:!1},onlineApplications:{isLoading:!1},requestedTimeStamps:{},forms:{isLoading:!1}}),getters:{getSelfCheckIns:e=>t=>{if(t)return e.selfCheckIns[t]?e.selfCheckIns[t]:[];{let r=[];return Object.keys(e.selfCheckIns).forEach(s=>{s!=="isLoading"&&(r=r.concat(e.selfCheckIns[s]))}),r}},getProfiles:e=>t=>{if(t)return e.profiles[t]?e.profiles[t]:[];{let r=[];return Object.keys(e.profiles).forEach(s=>{s!=="isLoading"&&(r=r.concat(e.profiles[s]))}),r}},getScheduledInterviews:e=>t=>{if(t)return e.scheduledInterviews[t]?e.scheduledInterviews[t]:[];{let r=[];return Object.keys(e.scheduledInterviews).forEach(s=>{s!=="isLoading"&&(r=r.concat(e.scheduledInterviews[s]))}),r}},getInProcessInterviews:e=>t=>{if(t)return e.inProcessInterviews[t]?e.inProcessInterviews[t]:[];{let r=[];return Object.keys(e.inProcessInterviews).forEach(s=>{s!=="isLoading"&&(r=r.concat(e.inProcessInterviews[s]))}),r}},getInProcess:e=>t=>{if(t)return e.inProcess[t]?e.inProcess[t]:[];{let r=[];return Object.keys(e.inProcess).forEach(s=>{s!=="isLoading"&&(r=r.concat(e.inProcess[s]))}),r}},getPending:e=>t=>{if(t)return e.pending[t]?e.pending[t]:[];{let r=[];return Object.keys(e.pending).forEach(s=>{s!=="isLoading"&&(r=r.concat(e.pending[s]))}),r}},getDeployments:e=>t=>{if(t)return e.deployments[t]?e.deployments[t]:[];{let r=[];return Object.keys(e.deployments).forEach(s=>{s!=="isLoading"&&(r=r.concat(e.deployments[s]))}),r}},getProjects:e=>({selectedId:t,can:r,userType:s})=>{if(!t&&!r){let i=[];return Object.keys(e.projects).forEach(n=>{n!=="isLoading"&&(i=i.concat(e.projects[n]))}),i}else if(!t&&r&&s==="QuickBase User"){const{userOffices:i}=T();let n=[];return i(r).forEach(a=>{n=n.concat(e.projects[a[8]])}),n}else if(t&&r&&s==="QuickBase User"){const{getOffice:i}=T(),n=i(t);return r==="read"&&n&&n[39]!==!0?[]:(r==="create"||r==="update")&&n&&n[40]!==!0?[]:r==="manage"&&n&&n[41]!==!0?[]:e.projects[t]?e.projects[t]:[]}else if(!t&&r&&s==="Project User"){let i=[];return Object.keys(e.projects).forEach(n=>{n!=="isLoading"&&(i=i.concat(e.projects[n]))}),i}else return e.projects[t]?e.projects[t]:[]},getPendingProjects:e=>t=>{if(t)return e.pendingProjects[t]?e.pendingProjects[t]:[];{let r=[];return Object.keys(e.pendingProjects).forEach(s=>{s!=="isLoading"&&(r=r.concat(e.pendingProjects[s]))}),r}},getRequestedTimeStamps(e){return e.requestedTimeStamps},getSelectedOffice(e){return e.selectedOffice},getSelectedProject(e){return e.selectedProject},getReleases:e=>t=>{if(t)return e.releases[t]?e.releases[t]:[];{let r=[];return Object.keys(e.releases).forEach(s=>{s!=="isLoading"&&(r=r.concat(e.releases[s]))}),r}},getJobPost:e=>t=>{if(t)return e.jobPost[t]?e.jobPost[t]:[];{let r=[];return Object.keys(e.jobPost).forEach(s=>{s!=="isLoading"&&(r=r.concat(e.jobPost[s]))}),r}},getOnlineApplications:e=>t=>{if(t)return e.onlineApplications[t]?e.onlineApplications[t]:[];{let r=[];return Object.keys(e.onlineApplications).forEach(s=>{s!=="isLoading"&&(r=r.concat(e.onlineApplications[s]))}),r}},getLoadingState:e=>t=>e[`${t}`].isLoading||!1,getForms:e=>t=>{if(t)return e.forms[t]?e.forms[t]:[];{let r=[];return Object.keys(e.forms).forEach(s=>{s!=="isLoading"&&(r=r.concat(e.forms[s]))}),r}}},actions:{setQueryBy(e){this.queryBy=e},setSelectedOffice(e,t){this.selectedOffice=e},setSelectedProject(e,t){this.selectedProject=e},setTimeStamp({name:e,timeStamp:t,selectedId:r},s){if(this.requestedTimeStamps[r]?this.requestedTimeStamps[r][e]=t:this.requestedTimeStamps[r]={[e]:t},s){const i=JSON.parse(JSON.stringify(this.requestedTimeStamps));Q.setItem("requestedTimeStamps",i)}},setTimeStampState(e){this.requestedTimeStamps=e},async fetchSelfCheckIns(e){this.selfCheckIns.isLoading=!0;const t=this.getRequestedTimeStamps[e.selectedId]||{};let r=!0;const s=[{9:{value:e.selectedId},7:{value:"Self Check-Ins"}}];if(t.selfCheckIns&&(t.selfCheckIns.isBefore(p().subtract(1,"minute"))?r=!0:r=e.refresh?e.refresh:!1),r){this.setTimeStamp({selectedId:e.selectedId,name:"selfCheckIns",timeStamp:p()},!0);const{data:i}=await A.fetchFromRecruitingApp({fields:s});return this.setSelfCheckIns({selectedId:e.selectedId,data:i},!0),this.selfCheckIns.isLoading=!1,{data:i}}else return this.selfCheckIns.isLoading=!1,{data:[]}},async fetchAllSelfCheckIns(e){const{userOffices:t}=T(),r=[];return t(e?e.can:null).forEach(i=>{let n=this.fetchSelfCheckIns(B(F({},e),{selectedId:i[8]}));r.push(n)}),await Promise.allSettled(r)},setSelfCheckIns({selectedId:e,data:t},r){this.selfCheckIns[e]=t,r&&Q.setItem(`selfCheckIns_${e}`,t)},async fetchProfiles(e){this.profiles.isLoading=!0;const t=this.getRequestedTimeStamps[e.selectedId]||{};let r=!0;const s=[{9:{value:e.selectedId},7:{value:"Employees"}}];if(t.profiles&&(t.profiles.isBefore(p().subtract(1,"minute"))?r=!0:r=e.refresh?e.refresh:!1),r){this.setTimeStamp({selectedId:e.selectedId,name:"profiles",timeStamp:p()},!0);const{data:i}=await A.fetchFromHiringApp({fields:s});return this.setProfiles({selectedId:e.selectedId,data:i},!0),this.profiles.isLoading=!1,{data:i}}else return this.profiles.isLoading=!1,{data:[]}},async fetchAllProfiles(e){const{userOffices:t}=T(),r=[];return t(e?e.can:null).forEach(i=>{let n=this.fetchProfiles(B(F({},e),{selectedId:i[8]}));r.push(n)}),await Promise.allSettled(r)},setProfiles({selectedId:e,data:t},r){this.profiles[e]=t,r&&Q.setItem(`profiles_${e}`,t)},async fetchScheduledInterviews(e){this.scheduledInterviews.isLoading=!0;const t=this.getRequestedTimeStamps[e.selectedId]||{};let r=!0;const s=[{9:{value:e.selectedId},7:{value:"Scheduled Interviews"}}];if(t.scheduledInterviews&&(t.scheduledInterviews.isBefore(p().subtract(1,"minute"))?r=!0:r=e.refresh?e.refresh:!1),r){this.setTimeStamp({selectedId:e.selectedId,name:"scheduledInterviews",timeStamp:p()},!0);const{data:i}=await A.fetchFromHiringApp({fields:s});return this.setScheduledInterviews({selectedId:e.selectedId,data:i},!0),this.scheduledInterviews.isLoading=!1,{data:i}}else return this.scheduledInterviews.isLoading=!1,{data:[]}},async fetchAllScheduledInterviews(e){const{userOffices:t}=T(),r=[];return t(e?e.can:null).forEach(i=>{let n=this.fetchScheduledInterviews(B(F({},e),{selectedId:i[8]}));r.push(n)}),await Promise.allSettled(r)},setScheduledInterviews({selectedId:e,data:t},r){this.scheduledInterviews[e]=t,r&&Q.setItem(`interviews_${e}`,t)},async fetchInProcessInterviews(e){this.inProcessInterviews.isLoading=!0;const t=this.getRequestedTimeStamps[e.selectedId]||{};let r=!0;const s=[{9:{value:e.selectedId},7:{value:"In Process Interviews"}}];if(t.inProcessInterviews&&(t.inProcessInterviews.isBefore(p().subtract(1,"minute"))?r=!0:r=e.refresh?e.refresh:!1),r){this.setTimeStamp({selectedId:e.selectedId,name:"inProcessInterviews",timeStamp:p()},!0);const{data:i}=await A.fetchFromHiringApp({fields:s});return this.setInProcessInterviews({selectedId:e.selectedId,data:i},!0),this.inProcessInterviews.isLoading=!1,{data:i}}else return this.inProcessInterviews.isLoading=!1,{data:[]}},async fetchAllInProcessInterviews(e){const{userOffices:t}=T(),r=[];return t(e?e.can:null).forEach(i=>{let n=this.fetchInProcessInterviews(B(F({},e),{selectedId:i[8]}));r.push(n)}),await Promise.allSettled(r)},setInProcessInterviews({selectedId:e,data:t},r){this.inProcessInterviews[e]=t,r&&Q.setItem(`interviews_${e}`,t)},async fetchInProcess(e){this.inProcess.isLoading=!0;const t=this.getRequestedTimeStamps[e.selectedId]||{};let r=!0;const s=[{9:{value:e.selectedId},7:{value:"In Processes"}}];if(t.inProcess&&(t.inProcess.isBefore(p().subtract(1,"minute"))?r=!0:r=e.refresh?e.refresh:!1),r){this.setTimeStamp({selectedId:e.selectedId,name:"inProcess",timeStamp:p()},!0);const{data:i}=await A.fetchFromHiringApp({fields:s});return this.setInProcess({selectedId:e.selectedId,data:i},!0),this.inProcess.isLoading=!1,{data:i}}else return this.inProcess.isLoading=!1,{data:[]}},async fetchAllInProcess(e){const{userOffices:t}=T(),r=[];return t(e?e.can:null).forEach(i=>{let n=this.fetchInProcess(B(F({},e),{selectedId:i[8]}));r.push(n)}),await Promise.allSettled(r)},setInProcess({selectedId:e,data:t},r){this.inProcess[e]=t,r&&Q.setItem(`inProcess_${e}`,t)},async fetchPending(e){this.pending.isLoading=!0;const t=this.getRequestedTimeStamps[e.selectedId]||{};let r=!0;const s=[{9:{value:e.selectedId},7:{value:"Dispatches"}}];if(t.pending&&(t.pending.isBefore(p().subtract(1,"minute"))?r=!0:r=e.refresh?e.refresh:!1),r){this.setTimeStamp({selectedId:e.selectedId,name:"pending",timeStamp:p()},!0);const{data:i}=await A.fetchFromHiringApp({fields:s});return this.setPending({selectedId:e.selectedId,data:i},!0),this.pending.isLoading=!1,{data:i}}else return this.pending.isLoading=!1,{data:[]}},async fetchAllPending(e){const{userOffices:t}=T(),r=[];return t(e?e.can:null).forEach(i=>{let n=this.fetchPending(B(F({},e),{selectedId:i[8]}));r.push(n)}),await Promise.allSettled(r)},setPending({selectedId:e,data:t},r){this.pending[e]=t,r&&Q.setItem(`pending_${e}`,t)},async fetchOpenRequest(e){this.openRequest.isLoading=!0;const t=this.getRequestedTimeStamps[e.selectedId]||{};let r=!0;const s=[{9:{value:e.selectedId},7:{value:"Open Request"}}];if(t.openRequest&&(t.openRequest.isBefore(p().subtract(1,"minute"))?r=!0:r=e.refresh?e.refresh:!1),r){this.setTimeStamp({selectedId:e.selectedId,name:"openRequest",timeStamp:p()},!0);const{data:i}=await A.fetchFromProjectsApp({fields:s});return this.setOpenRequest({selectedId:e.selectedId,data:i},!0),this.openRequest.isLoading=!1,{data:i}}else return this.openRequest.isLoading=!1,{data:[]}},async fetchAllOpenRequest(e){const{userOffices:t}=T(),r=[];return t(e?e.can:null).forEach(i=>{let n=this.fetchOpenRequest(B(F({},e),{selectedId:i[8]}));r.push(n)}),await Promise.allSettled(r)},setOpenRequest({selectedId:e,data:t},r){this.openRequest[e]=t,r&&Q.setItem(`openRequest_${e}`,t)},async fetchPendingRequest(e){this.pendingRequest.isLoading=!0;const t=this.getRequestedTimeStamps[e.selectedId]||{};let r=!0;const s=[{9:{value:e.selectedId},7:{value:"Pending Request"}}];if(t.pendingRequest&&(t.pendingRequest.isBefore(p().subtract(1,"minute"))?r=!0:r=e.refresh?e.refresh:!1),r){this.setTimeStamp({selectedId:e.selectedId,name:"pendingRequest",timeStamp:p()},!0);const{data:i}=await A.fetchFromProjectsApp({fields:s});return this.setPendingRequest({selectedId:e.selectedId,data:i},!0),this.pendingRequest.isLoading=!1,{data:i}}else return this.pendingRequest.isLoading=!1,{data:[]}},async fetchAllPendingRequest(e){const{userOffices:t}=T(),r=[];return t(e?e.can:null).forEach(i=>{let n=this.fetchPendingRequest(B(F({},e),{selectedId:i[8]}));r.push(n)}),await Promise.allSettled(r)},setPendingRequest({selectedId:e,data:t},r){this.pendingRequest[e]=t,r&&Q.setItem(`pendingRequest_${e}`,t)},async fetchProjects(e){const{getOffice:t,getUserType:r}=T();this.projects.isLoading=!0;const s=this.getRequestedTimeStamps[e.selectedId]||{};let i=!0,n=1;if(e&&e.can&&r==="QuickBase User"){const o=t(e.selectedId);if(e.can==="read"&&o&&o[39]!==!0)return{data:[]};if((e.can==="create"||e.can==="update")&&o&&o[40]!==!0)return{data:[]};if(e.can==="manage"&&o&&o[41]!==!0)return{data:[]}}e.extendTime&&(n=e.extendTime);const a=[];if(r==="QuickBase User")a.push({9:{value:e.selectedId},7:{value:"Projects"}});else if(r==="Project User"){let o="";e.projects&&(o+=e.projects.map((c,l)=>`{'3'.EX.'${c}'}OR`).join("")),e.facilities&&(o+=e.facilities.map((c,l)=>`{'8'.EX.'${c}'}OR`).join("")),a.push({9:{value:e.selectedId},7:{value:"Projects"},8:{value:`${o?"("+o+")":""}AND{'77'.EX.'17'}AND{'21'.EX.'Complete'}`}})}if(s.projects&&(s.projects.isBefore(p().subtract(n,"minute"))?i=!0:i=e.refresh?e.refresh:!1),i){this.setTimeStamp({selectedId:e.selectedId,name:"projects",timeStamp:p()},!0);const{data:o}=await A.fetchFromProjectsApp({fields:a});return this.setProjects({selectedId:e.selectedId,data:o},!0),this.projects.isLoading=!1,{data:o}}else return this.projects.isLoading=!1,{data:[]}},async fetchAllProjects(e){const{userOffices:t,userProjects:r,getUser:s,getUserType:i,userFacilities:n}=T();if(i==="Project User"){const a=[],o=[],c=[];return r(e?e.can:null).forEach(u=>{a.push(u[9])}),n(e?e.can:null).forEach(u=>{o.push(u[31])}),(a.length>0||o.length>0)&&c.push(this.fetchProjects(B(F({},e),{selectedId:s[3],projects:a,facilities:o}))),await Promise.allSettled(c)}else if(i==="QuickBase User"){const a=[];return t(e?e.can:null).forEach(c=>{let l=this.fetchProjects(B(F({},e),{selectedId:c[8]}));a.push(l)}),await Promise.allSettled(a)}},setProjects({selectedId:e,data:t},r){e&&t&&(this.projects[e]=t),r&&e&&Q.setItem(`projects_${e}`,t)},async fetchPendingProjects(e){this.pendingProjects.isLoading=!0;const t=this.getRequestedTimeStamps[e.selectedId]||{};let r=!0;const s=[{9:{value:e.selectedId},7:{value:"Pending Projects"}}];if(t.pendingProjects&&(t.pendingProjects.isBefore(p().subtract(1,"minute"))?r=!0:r=e.refresh?e.refresh:!1),r){this.setTimeStamp({selectedId:e.selectedId,name:"pendingProjects",timeStamp:p()},!0);const{data:i}=await A.fetchFromProjectsApp({fields:s});return this.setPendingProjects({selectedId:e.selectedId,data:i},!0),this.pendingProjects.isLoading=!1,{data:i}}else return this.pendingProjects.isLoading=!1,{data:[]}},async fetchAllPendingProjects(e){const{userOffices:t}=T(),r=[];return t(e?e.can:null).forEach(i=>{let n=this.fetchPendingProjects(B(F({},e),{selectedId:i[8]}));r.push(n)}),await Promise.allSettled(r)},setPendingProjects({selectedId:e,data:t},r){this.pendingProjects[e]=t,r&&Q.setItem(`pendingProjects_${e}`,t)},async fetchDeployments(e){this.deployments.isLoading=!0;const t=this.getRequestedTimeStamps[e.selectedId]||{};let r=!0;const s=[{9:{value:e.selectedId},7:{value:"Deployments"}}];if(t.deployments&&(t.deployments.isBefore(p().subtract(1,"minute"))?r=!0:r=e.refresh?e.refresh:!1),r){this.setTimeStamp({selectedId:e.selectedId,name:"deployments",timeStamp:p()},!0);const{data:i}=await A.fetchFromHiringApp({fields:s});return this.setDeployments({selectedId:e.selectedId,data:i},!0),this.deployments.isLoading=!1,{data:i}}else return this.deployments.isLoading=!1,{data:[]}},async fetchAllDeployments(e){const{userOffices:t}=T(),r=[];return t(e?e.can:null).forEach(i=>{let n=this.fetchDeployments(B(F({},e),{selectedId:i[8]}));r.push(n)}),await Promise.allSettled(r)},setDeployments({selectedId:e,data:t},r){this.deployments[e]=t,r&&Q.setItem(`deployments_${e}`,t)},async fetchReleases(e){this.releases.isLoading=!0;const t=this.getRequestedTimeStamps[e.selectedId]||{};let r=!0;const s=[{9:{value:e.selectedId},7:{value:"Releases"}}];if(t.releases&&(t.releases.isBefore(p().subtract(1,"minute"))?r=!0:r=e.refresh?e.refresh:!1),r){this.setTimeStamp({selectedId:e.selectedId,name:"releases",timeStamp:p()},!0);const{data:i}=await A.fetchFromHiringApp({fields:s});return this.setReleases({selectedId:e.selectedId,data:i},!0),this.releases.isLoading=!1,{data:i}}else return this.releases.isLoading=!1,{data:[]}},async fetchAllReleases(e){const{userOffices:t}=T(),r=[];return t(e?e.can:null).forEach(i=>{let n=this.fetchReleases(B(F({},e),{selectedId:i[8]}));r.push(n)}),await Promise.allSettled(r)},setReleases({selectedId:e,data:t},r){this.releases[e]=t,r&&Q.setItem(`releases_${e}`,t)},async fetchJobPost(e){this.jobPost.isLoading=!0;const t=this.getRequestedTimeStamps[e.selectedId]||{};let r=!0;const s=[{9:{value:e.selectedId},7:{value:"Job Post"}}];if(t.jobPost&&(t.jobPost.isBefore(p().subtract(1,"minute"))?r=!0:r=e.refresh?e.refresh:!1),r){this.setTimeStamp({selectedId:e.selectedId,name:"jobPost",timeStamp:p()},!0);const{data:i}=await A.fetchFromRecruitingApp({fields:s});return this.setJobPost({selectedId:e.selectedId,data:i},!0),this.jobPost.isLoading=!1,{data:i}}else return this.jobPost.isLoading=!1,{data:[]}},async fetchAllJobPost(e){const{userOffices:t}=T(),r=[];return t(e?e.can:null).forEach(i=>{let n=this.fetchJobPost(B(F({},e),{selectedId:i[8]}));r.push(n)}),await Promise.allSettled(r)},setJobPost({selectedId:e,data:t},r){this.jobPost[e]=t,r&&Q.setItem(`jobPost_${e}`,t)},async fetchOnlineApplications(e){this.onlineApplications.isLoading=!0;const t=this.getRequestedTimeStamps[e.selectedId]||{};let r=!0;const s=[{9:{value:e.selectedId},7:{value:"Online Applications 30 Days"}}];if(t.onlineApplications&&(t.onlineApplications.isBefore(p().subtract(1,"minute"))?r=!0:r=e.refresh?e.refresh:!1),r){this.setTimeStamp({selectedId:e.selectedId,name:"onlineApplications",timeStamp:p()},!0);const{data:i}=await A.fetchFromRecruitingApp({fields:s});return this.setOnlineApplications({selectedId:e.selectedId,data:i},!0),this.onlineApplications.isLoading=!1,{data:i}}else return this.onlineApplications.isLoading=!1,{data:[]}},async fetchAllOnlineApplications(e){const{userOffices:t}=T(),r=[];return t(e?e.can:null).forEach(i=>{let n=this.fetchOnlineApplications(B(F({},e),{selectedId:i[8]}));r.push(n)}),await Promise.allSettled(r)},setOnlineApplications({selectedId:e,data:t},r){this.onlineApplications[e]=t,r&&Q.setItem(`onlineApplications_${e}`,t)},async fetchForms(e){this.forms.isLoading=!0;const t=this.getRequestedTimeStamps[e.selectedId]||{};let r=!0;const s=[{9:{value:e.selectedId},7:{value:"Forms"}}];if(t.forms&&(t.forms.isBefore(p().subtract(1,"minute"))?r=!0:r=e.refresh?e.refresh:!1),r){this.setTimeStamp({selectedId:e.selectedId,name:"forms",timeStamp:p()},!0);const{data:i}=await A.fetchFromStructureApp({fields:s});return this.setForms({selectedId:e.selectedId,data:i},!0),this.forms.isLoading=!1,{data:i}}else return this.forms.isLoading=!1,{data:[]}},async fetchAllForms(e){const{userOffices:t}=T(),r=[];return t(e?e.can:null).forEach(i=>{let n=this.fetchForms(B(F({},e),{selectedId:i[8]}));r.push(n)}),await Promise.allSettled(r)},setForms({selectedId:e,data:t},r){this.forms[e]=t,r&&Q.setItem(`forms_${e}`,t)}}}),T=ee("user",{state:()=>({user:{},access:[],permissions:[],notifications:[],feathersNotification:null,strapiUser:{}}),getters:{getUser:e=>e.user,getUserType:e=>e.user[32],userData:e=>e.user,fullName:e=>`${e.user[35]}${e.user[36]!==""?` ${e.user[36]} `:" "}${e.user[37]}`,userLoggedIn:e=>!!e.user[3],userAccess:e=>e.access,employeeLinkRequired:e=>e.user[84]===!0&&(e.user[85]===!0||e.user[82]===!1||e.user[82]===!0&&(e.user[80]===""||!e.user[80])),verifyRequired:e=>(e.user[32]==="Candidate"||e.user[32]==="Employee"||e.user[32]==="Project User")&&!e.user.verified,phoneNumberRequired:e=>e.user[111]||e.user[8]==="",emailRequired:e=>e.user[112]||e.user[6]==="",passwordRequired:e=>e.user[17]||e.user[7]==="",employeeLinked:e=>e.user[82],employeeProfileRID:e=>e.user[80],createEmployeeProfile:e=>e.user[85],userPermissions:e=>e.permissions,primaryOffice:e=>e.access.find(t=>t[15]===!0&&t[7]==="Office")||null,userOffices:e=>t=>e.access.filter(r=>t?t==="read"?r[7]==="Office"&&(r[39]===!0||r[41]===!0):t==="create"||t==="update"?r[7]==="Office"&&(r[40]===!0||r[41]===!0):t==="manage"?r[7]==="Office"&&r[41]===!0:!1:r[7]==="Office"),userOfficesRead:e=>e.access.filter(t=>t[7]==="Office"&&t[39]===!0),userOfficesCreate:e=>e.access.filter(t=>t[7]==="Office"&&t[40]===!0),userOfficesManage:e=>e.access.filter(t=>t[7]==="Office"&&t[41]===!0),primaryProject:e=>e.access.find(t=>t[15]===!0&&t[7]==="Project")||null,userProjects:e=>t=>e.access.filter(r=>t?t==="read"?r[7]==="Project"&&(r[39]===!0||r[41]===!0):t==="create"||t==="update"?r[7]==="Project"&&(r[40]===!0||r[41]===!0):t==="manage"?r[7]==="Project"&&r[41]===!0:!1:r[7]==="Project"),userFacilities:e=>t=>e.access.filter(r=>t?t==="read"?r[7]==="Facility"&&(r[39]===!0||r[41]===!0):t==="create"||t==="update"?r[7]==="Facility"&&(r[40]===!0||r[41]===!0):t==="manage"?r[7]==="Facility"&&r[41]===!0:!1:r[7]==="Project"),getOffice:e=>t=>t?e.access.find(r=>r[7]==="Office"&&r[8]===t):null},actions:{async fetchUser(e){const t=`{'10'.EX.'Active'}${e.rid?`AND{'3'.EX.'${e.rid}'}`:""}${e.email?`AND{'6'.EX.'${e.email}'}`:""}${e.phoneNumber?`AND{'8'.EX.'${e.phoneNumber}'}`:""}${e.userType?`AND{'32'.EX.'${e.userType}'}`:""}`,r=[{7:{value:"User Clean"},8:{value:t},9:{value:e.rid?e.rid:1},14:{value:76}}],s=await A.fetchFromStructureApp({fields:r}),{user:i,access:n,permissions:a}=s.data;return this.setUser(i,!0),this.setAccess(n,!0),this.setPermissions(a,!0),s},async updateUserData({fields:e}){if(!e)throw"No Fields Provided";e[3]===void 0&&Object.assign(e,{3:{value:this.userData[3]}});const{data:t,metadata:r}=await A.upsertRecordsXML({to:"br4pxrbs6",fieldsToReturn:[3,76],data:[e],formatObject:76});if(r.lineErrors)throw{lineErrors:r.lineErrors[1],error:r.lineErrors};const s=t[0][76],i=Object.assign({},s);return delete i.access,delete i.permissions,this.setUser(i,!0),s},setUser(e,t){const{setQueryBy:r}=Re();this.user=e,e[32]==="QuickBase User"?r("office"):e[32]==="Project User"&&r("project"),t&&x.setItem(k.storageUserKeyName,e)},setStrapiUser(e,t){this.strapiUser=e,t&&x.setItem(k.storageStrapiUserKeyName,e)},setPhoneNumberVerified(e){this.user[50]=e},setVerified(e){this.user.verified=e},setPhoneNumber(e){this.user[8]=e,this.user[111]=!0},setEmail(e){this.user[6]=e,this.user[112]=!0},setIdentityVerified(e){typeof e=="number"?this.user[80]=e:this.user[85]=e},setAccess(e,t){this.access=e,t&&x.setItem(k.storageAccessKeyName,e)},setPermissions(e,t){for(let s=0;s<e.length;s++)if(e[s].conditions){if(e[s].conditions.deny&&!Array.isArray(e[s].conditions.deny)){let i=e[s].conditions.deny.split(",");i.forEach(n=>{n=n.trim()}),e[s].conditions.deny=i;continue}if(e[s].conditions.accept&&!Array.isArray(e[s].conditions.accept)){let i=e[s].conditions.accept.split(",");i.forEach(n=>{n=n.trim()}),e[s].conditions.accept=i;continue}}const r=e.concat(ir);Ee.update(r),this.permissions=r,t&&x.setItem(k.storagePermissionsKeyName,e)},setFeathersNotification(e){this.feathersNotification=e},async logout(){return await A.logout(),Ee.update(ir)}}});class $a{constructor(t,r){R(this,"axiosIns",null);R(this,"appConfig",k);R(this,"config",F({},Bs));R(this,"isAlreadyFetchingAccessToken",!1);R(this,"subscribers",[]);R(this,"socket",null);R(this,"userStore",null);this.axiosIns=t,this.config=F(F({},this.config),r)}loginLocal(t){return this.axiosIns.post("api/auth/local",t).then(r=>r.data).catch(r=>{throw r})}loginQuickbase(t){return this.axiosIns.post("api/auth/quickbase",t).then(r=>r.data).then(r=>{this.setToken(r.jwt),this.setStrapiUser(r.user,!0)}).catch(r=>{throw r})}logout(){this.removeToken()}getToken(){_.get(this.config.token)}setToken(t){_.set(this.config.token,t,{expires:this.config.tokenExpiration,secure:!0,sameSite:"Strict"})}removeToken(){_.remove(this.config.token,{secure:!0,sameSite:"Strict"})}async setStrapiUser(t,r){this.userStore=this.userStore||T(),this.userStore.setStrapiUser(t,r)}getConversations(t){return this.axiosIns.get("api/conversations",t).then(r=>r.data).catch(r=>{throw r})}createConversation(t){return this.axiosIns.post("api/conversations",t).then(r=>r.data).catch(r=>{throw r})}getContacts(t){return this.axiosIns.get("api/contacts",t).then(r=>r.data).catch(r=>{throw r})}createContact(t){return this.axiosIns.post("api/contacts",t).then(r=>r.data).catch(r=>{throw r})}getWorkers(t){return this.axiosIns.post("api/workday/get-workers",t).then(r=>r.data).catch(r=>{throw r})}getApplicants(t){return this.axiosIns.post("api/workday/get-applicants",t).then(r=>r.data).catch(r=>{throw r})}updateQuickbaseWorker(t){return this.axiosIns.post("api/workday/update-quickbase-worker",t).then(r=>r.data).catch(r=>{throw r})}}function Ta(e,t){return{strapi:new $a(e,t)}}var Pa=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),s=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(s)!=="[object Symbol]")return!1;var i=42;t[r]=i;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var n=Object.getOwnPropertySymbols(t);if(n.length!==1||n[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,r);if(a.value!==i||a.enumerable!==!0)return!1}return!0},Zr=typeof Symbol!="undefined"&&Symbol,Ra=Pa,ja=function(){return typeof Zr!="function"||typeof Symbol!="function"||typeof Zr("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Ra()},Da="Function.prototype.bind called on incompatible ",Ft=Array.prototype.slice,Ea=Object.prototype.toString,Fa="[object Function]",Na=function(t){var r=this;if(typeof r!="function"||Ea.call(r)!==Fa)throw new TypeError(Da+r);for(var s=Ft.call(arguments,1),i,n=function(){if(this instanceof i){var u=r.apply(this,s.concat(Ft.call(arguments)));return Object(u)===u?u:this}else return r.apply(t,s.concat(Ft.call(arguments)))},a=Math.max(0,r.length-s.length),o=[],c=0;c<a;c++)o.push("$"+c);if(i=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this,arguments); }")(n),r.prototype){var l=function(){};l.prototype=r.prototype,i.prototype=new l,l.prototype=null}return i},qa=Na,Pr=Function.prototype.bind||qa,_a=Pr,Ma=_a.call(Function.call,Object.prototype.hasOwnProperty),j,rt=SyntaxError,Pi=Function,Fe=TypeError,Nt=function(e){try{return Pi('"use strict"; return ('+e+").constructor;")()}catch{}},ke=Object.getOwnPropertyDescriptor;if(ke)try{ke({},"")}catch{ke=null}var qt=function(){throw new Fe},La=ke?function(){try{return arguments.callee,qt}catch{try{return ke(arguments,"callee").get}catch{return qt}}}():qt,Pe=ja(),ge=Object.getPrototypeOf||function(e){return e.__proto__},je={},Ua=typeof Uint8Array=="undefined"?j:ge(Uint8Array),Ne={"%AggregateError%":typeof AggregateError=="undefined"?j:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?j:ArrayBuffer,"%ArrayIteratorPrototype%":Pe?ge([][Symbol.iterator]()):j,"%AsyncFromSyncIteratorPrototype%":j,"%AsyncFunction%":je,"%AsyncGenerator%":je,"%AsyncGeneratorFunction%":je,"%AsyncIteratorPrototype%":je,"%Atomics%":typeof Atomics=="undefined"?j:Atomics,"%BigInt%":typeof BigInt=="undefined"?j:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?j:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?j:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?j:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?j:FinalizationRegistry,"%Function%":Pi,"%GeneratorFunction%":je,"%Int8Array%":typeof Int8Array=="undefined"?j:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?j:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?j:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Pe?ge(ge([][Symbol.iterator]())):j,"%JSON%":typeof JSON=="object"?JSON:j,"%Map%":typeof Map=="undefined"?j:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!Pe?j:ge(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?j:Promise,"%Proxy%":typeof Proxy=="undefined"?j:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?j:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?j:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!Pe?j:ge(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?j:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Pe?ge(""[Symbol.iterator]()):j,"%Symbol%":Pe?Symbol:j,"%SyntaxError%":rt,"%ThrowTypeError%":La,"%TypedArray%":Ua,"%TypeError%":Fe,"%Uint8Array%":typeof Uint8Array=="undefined"?j:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?j:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?j:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?j:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?j:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?j:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?j:WeakSet},Ba=function e(t){var r;if(t==="%AsyncFunction%")r=Nt("async function () {}");else if(t==="%GeneratorFunction%")r=Nt("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=Nt("async function* () {}");else if(t==="%AsyncGenerator%"){var s=e("%AsyncGeneratorFunction%");s&&(r=s.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&(r=ge(i.prototype))}return Ne[t]=r,r},es={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},It=Pr,yt=Ma,Ha=It.call(Function.call,Array.prototype.concat),za=It.call(Function.apply,Array.prototype.splice),ts=It.call(Function.call,String.prototype.replace),mt=It.call(Function.call,String.prototype.slice),Ka=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ya=/\\(\\)?/g,Qa=function(t){var r=mt(t,0,1),s=mt(t,-1);if(r==="%"&&s!=="%")throw new rt("invalid intrinsic syntax, expected closing `%`");if(s==="%"&&r!=="%")throw new rt("invalid intrinsic syntax, expected opening `%`");var i=[];return ts(t,Ka,function(n,a,o,c){i[i.length]=o?ts(c,Ya,"$1"):a||n}),i},Xa=function(t,r){var s=t,i;if(yt(es,s)&&(i=es[s],s="%"+i[0]+"%"),yt(Ne,s)){var n=Ne[s];if(n===je&&(n=Ba(s)),typeof n=="undefined"&&!r)throw new Fe("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:s,value:n}}throw new rt("intrinsic "+t+" does not exist!")},Rr=function(t,r){if(typeof t!="string"||t.length===0)throw new Fe("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Fe('"allowMissing" argument must be a boolean');var s=Qa(t),i=s.length>0?s[0]:"",n=Xa("%"+i+"%",r),a=n.name,o=n.value,c=!1,l=n.alias;l&&(i=l[0],za(s,Ha([0,1],l)));for(var u=1,m=!0;u<s.length;u+=1){var v=s[u],w=mt(v,0,1),O=mt(v,-1);if((w==='"'||w==="'"||w==="`"||O==='"'||O==="'"||O==="`")&&w!==O)throw new rt("property names with quotes must have matching quotes");if((v==="constructor"||!m)&&(c=!0),i+="."+v,a="%"+i+"%",yt(Ne,a))o=Ne[a];else if(o!=null){if(!(v in o)){if(!r)throw new Fe("base intrinsic for "+t+" exists, but the property is not available.");return}if(ke&&u+1>=s.length){var C=ke(o,v);m=!!C,m&&"get"in C&&!("originalValue"in C.get)?o=C.get:o=o[v]}else m=yt(o,v),o=o[v];m&&!c&&(Ne[a]=o)}}return o},Ri={exports:{}};(function(e){var t=Pr,r=Rr,s=r("%Function.prototype.apply%"),i=r("%Function.prototype.call%"),n=r("%Reflect.apply%",!0)||t.call(i,s),a=r("%Object.getOwnPropertyDescriptor%",!0),o=r("%Object.defineProperty%",!0),c=r("%Math.max%");if(o)try{o({},"a",{value:1})}catch{o=null}e.exports=function(m){var v=n(t,i,arguments);if(a&&o){var w=a(v,"length");w.configurable&&o(v,"length",{value:1+c(0,m.length-(arguments.length-1))})}return v};var l=function(){return n(t,s,arguments)};o?o(e.exports,"apply",{value:l}):e.exports.apply=l})(Ri);var ji=Rr,Di=Ri.exports,Wa=Di(ji("String.prototype.indexOf")),Va=function(t,r){var s=ji(t,!!r);return typeof s=="function"&&Wa(t,".prototype.")>-1?Di(s):s},Ja={},Ga=Object.freeze(Object.defineProperty({__proto__:null,default:Ja},Symbol.toStringTag,{value:"Module"})),Za=Rn(Ga),jr=typeof Map=="function"&&Map.prototype,_t=Object.getOwnPropertyDescriptor&&jr?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,gt=jr&&_t&&typeof _t.get=="function"?_t.get:null,eo=jr&&Map.prototype.forEach,Dr=typeof Set=="function"&&Set.prototype,Mt=Object.getOwnPropertyDescriptor&&Dr?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,vt=Dr&&Mt&&typeof Mt.get=="function"?Mt.get:null,to=Dr&&Set.prototype.forEach,ro=typeof WeakMap=="function"&&WeakMap.prototype,Ze=ro?WeakMap.prototype.has:null,so=typeof WeakSet=="function"&&WeakSet.prototype,et=so?WeakSet.prototype.has:null,io=typeof WeakRef=="function"&&WeakRef.prototype,rs=io?WeakRef.prototype.deref:null,no=Boolean.prototype.valueOf,ao=Object.prototype.toString,oo=Function.prototype.toString,co=String.prototype.match,Er=String.prototype.slice,xe=String.prototype.replace,lo=String.prototype.toUpperCase,ss=String.prototype.toLowerCase,Ei=RegExp.prototype.test,is=Array.prototype.concat,pe=Array.prototype.join,uo=Array.prototype.slice,ns=Math.floor,nr=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Lt=Object.getOwnPropertySymbols,ar=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,qe=typeof Symbol=="function"&&typeof Symbol.iterator=="object",V=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===qe?"object":"symbol")?Symbol.toStringTag:null,Fi=Object.prototype.propertyIsEnumerable,as=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function os(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||Ei.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var s=e<0?-ns(-e):ns(e);if(s!==e){var i=String(s),n=Er.call(t,i.length+1);return xe.call(i,r,"$&_")+"."+xe.call(xe.call(n,/([0-9]{3})/g,"$&_"),/_$/,"")}}return xe.call(t,r,"$&_")}var Ut=Za.custom,Bt=Ut&&qi(Ut)?Ut:null,fo=function e(t,r,s,i){var n=r||{};if(ve(n,"quoteStyle")&&n.quoteStyle!=="single"&&n.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ve(n,"maxStringLength")&&(typeof n.maxStringLength=="number"?n.maxStringLength<0&&n.maxStringLength!==1/0:n.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=ve(n,"customInspect")?n.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ve(n,"indent")&&n.indent!==null&&n.indent!=="	"&&!(parseInt(n.indent,10)===n.indent&&n.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ve(n,"numericSeparator")&&typeof n.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var o=n.numericSeparator;if(typeof t=="undefined")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return Mi(t,n);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var c=String(t);return o?os(t,c):c}if(typeof t=="bigint"){var l=String(t)+"n";return o?os(t,l):l}var u=typeof n.depth=="undefined"?5:n.depth;if(typeof s=="undefined"&&(s=0),s>=u&&u>0&&typeof t=="object")return or(t)?"[Array]":"[Object]";var m=Ro(n,s);if(typeof i=="undefined")i=[];else if(_i(i,t)>=0)return"[Circular]";function v(h,d,f){if(d&&(i=uo.call(i),i.push(d)),f){var b={depth:n.depth};return ve(n,"quoteStyle")&&(b.quoteStyle=n.quoteStyle),e(h,b,s+1,i)}return e(h,n,s+1,i)}if(typeof t=="function"){var w=Ao(t),O=at(t,v);return"[Function"+(w?": "+w:" (anonymous)")+"]"+(O.length>0?" { "+pe.call(O,", ")+" }":"")}if(qi(t)){var C=qe?xe.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):ar.call(t);return typeof t=="object"&&!qe?Qe(C):C}if($o(t)){for(var D="<"+ss.call(String(t.nodeName)),P=t.attributes||[],te=0;te<P.length;te++)D+=" "+P[te].name+"="+Ni(po(P[te].value),"double",n);return D+=">",t.childNodes&&t.childNodes.length&&(D+="..."),D+="</"+ss.call(String(t.nodeName))+">",D}if(or(t)){if(t.length===0)return"[]";var ie=at(t,v);return m&&!Po(ie)?"["+cr(ie,m)+"]":"[ "+pe.call(ie,", ")+" ]"}if(mo(t)){var he=at(t,v);return"cause"in t&&!Fi.call(t,"cause")?"{ ["+String(t)+"] "+pe.call(is.call("[cause]: "+v(t.cause),he),", ")+" }":he.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+pe.call(he,", ")+" }"}if(typeof t=="object"&&a){if(Bt&&typeof t[Bt]=="function")return t[Bt]();if(a!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(So(t)){var ne=[];return eo.call(t,function(h,d){ne.push(v(d,t,!0)+" => "+v(h,t))}),cs("Map",gt.call(t),ne,m)}if(ko(t)){var re=[];return to.call(t,function(h){re.push(v(h,t))}),cs("Set",vt.call(t),re,m)}if(Oo(t))return Ht("WeakMap");if(Co(t))return Ht("WeakSet");if(Io(t))return Ht("WeakRef");if(vo(t))return Qe(v(Number(t)));if(xo(t))return Qe(v(nr.call(t)));if(bo(t))return Qe(no.call(t));if(go(t))return Qe(v(String(t)));if(!ho(t)&&!yo(t)){var le=at(t,v),Oe=as?as(t)===Object.prototype:t instanceof Object||t.constructor===Object,ae=t instanceof Object?"":"null prototype",ue=!Oe&&V&&Object(t)===t&&V in t?Er.call(Se(t),8,-1):ae?"Object":"",g=Oe||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",y=g+(ue||ae?"["+pe.call(is.call([],ue||[],ae||[]),": ")+"] ":"");return le.length===0?y+"{}":m?y+"{"+cr(le,m)+"}":y+"{ "+pe.call(le,", ")+" }"}return String(t)};function Ni(e,t,r){var s=(r.quoteStyle||t)==="double"?'"':"'";return s+e+s}function po(e){return xe.call(String(e),/"/g,"&quot;")}function or(e){return Se(e)==="[object Array]"&&(!V||!(typeof e=="object"&&V in e))}function ho(e){return Se(e)==="[object Date]"&&(!V||!(typeof e=="object"&&V in e))}function yo(e){return Se(e)==="[object RegExp]"&&(!V||!(typeof e=="object"&&V in e))}function mo(e){return Se(e)==="[object Error]"&&(!V||!(typeof e=="object"&&V in e))}function go(e){return Se(e)==="[object String]"&&(!V||!(typeof e=="object"&&V in e))}function vo(e){return Se(e)==="[object Number]"&&(!V||!(typeof e=="object"&&V in e))}function bo(e){return Se(e)==="[object Boolean]"&&(!V||!(typeof e=="object"&&V in e))}function qi(e){if(qe)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!ar)return!1;try{return ar.call(e),!0}catch{}return!1}function xo(e){if(!e||typeof e!="object"||!nr)return!1;try{return nr.call(e),!0}catch{}return!1}var wo=Object.prototype.hasOwnProperty||function(e){return e in this};function ve(e,t){return wo.call(e,t)}function Se(e){return ao.call(e)}function Ao(e){if(e.name)return e.name;var t=co.call(oo.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function _i(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,s=e.length;r<s;r++)if(e[r]===t)return r;return-1}function So(e){if(!gt||!e||typeof e!="object")return!1;try{gt.call(e);try{vt.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function Oo(e){if(!Ze||!e||typeof e!="object")return!1;try{Ze.call(e,Ze);try{et.call(e,et)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function Io(e){if(!rs||!e||typeof e!="object")return!1;try{return rs.call(e),!0}catch{}return!1}function ko(e){if(!vt||!e||typeof e!="object")return!1;try{vt.call(e);try{gt.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function Co(e){if(!et||!e||typeof e!="object")return!1;try{et.call(e,et);try{Ze.call(e,Ze)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function $o(e){return!e||typeof e!="object"?!1:typeof HTMLElement!="undefined"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function Mi(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,s="... "+r+" more character"+(r>1?"s":"");return Mi(Er.call(e,0,t.maxStringLength),t)+s}var i=xe.call(xe.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,To);return Ni(i,"single",t)}function To(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+lo.call(t.toString(16))}function Qe(e){return"Object("+e+")"}function Ht(e){return e+" { ? }"}function cs(e,t,r,s){var i=s?cr(r,s):pe.call(r,", ");return e+" ("+t+") {"+i+"}"}function Po(e){for(var t=0;t<e.length;t++)if(_i(e[t],`
`)>=0)return!1;return!0}function Ro(e,t){var r;if(e.indent==="	")r="	";else if(typeof e.indent=="number"&&e.indent>0)r=pe.call(Array(e.indent+1)," ");else return null;return{base:r,prev:pe.call(Array(t+1),r)}}function cr(e,t){if(e.length===0)return"";var r=`
`+t.prev+t.base;return r+pe.call(e,","+r)+`
`+t.prev}function at(e,t){var r=or(e),s=[];if(r){s.length=e.length;for(var i=0;i<e.length;i++)s[i]=ve(e,i)?t(e[i],e):""}var n=typeof Lt=="function"?Lt(e):[],a;if(qe){a={};for(var o=0;o<n.length;o++)a["$"+n[o]]=n[o]}for(var c in e)!ve(e,c)||r&&String(Number(c))===c&&c<e.length||qe&&a["$"+c]instanceof Symbol||(Ei.call(/[^\w$]/,c)?s.push(t(c,e)+": "+t(e[c],e)):s.push(c+": "+t(e[c],e)));if(typeof Lt=="function")for(var l=0;l<n.length;l++)Fi.call(e,n[l])&&s.push("["+t(n[l])+"]: "+t(e[n[l]],e));return s}var Fr=Rr,Me=Va,jo=fo,Do=Fr("%TypeError%"),ot=Fr("%WeakMap%",!0),ct=Fr("%Map%",!0),Eo=Me("WeakMap.prototype.get",!0),Fo=Me("WeakMap.prototype.set",!0),No=Me("WeakMap.prototype.has",!0),qo=Me("Map.prototype.get",!0),_o=Me("Map.prototype.set",!0),Mo=Me("Map.prototype.has",!0),Nr=function(e,t){for(var r=e,s;(s=r.next)!==null;r=s)if(s.key===t)return r.next=s.next,s.next=e.next,e.next=s,s},Lo=function(e,t){var r=Nr(e,t);return r&&r.value},Uo=function(e,t,r){var s=Nr(e,t);s?s.value=r:e.next={key:t,next:e.next,value:r}},Bo=function(e,t){return!!Nr(e,t)},Ho=function(){var t,r,s,i={assert:function(n){if(!i.has(n))throw new Do("Side channel does not contain "+jo(n))},get:function(n){if(ot&&n&&(typeof n=="object"||typeof n=="function")){if(t)return Eo(t,n)}else if(ct){if(r)return qo(r,n)}else if(s)return Lo(s,n)},has:function(n){if(ot&&n&&(typeof n=="object"||typeof n=="function")){if(t)return No(t,n)}else if(ct){if(r)return Mo(r,n)}else if(s)return Bo(s,n);return!1},set:function(n,a){ot&&n&&(typeof n=="object"||typeof n=="function")?(t||(t=new ot),Fo(t,n,a)):ct?(r||(r=new ct),_o(r,n,a)):(s||(s={key:{},next:null}),Uo(s,n,a))}};return i},zo=String.prototype.replace,Ko=/%20/g,zt={RFC1738:"RFC1738",RFC3986:"RFC3986"},qr={default:zt.RFC3986,formatters:{RFC1738:function(e){return zo.call(e,Ko,"+")},RFC3986:function(e){return String(e)}},RFC1738:zt.RFC1738,RFC3986:zt.RFC3986},Yo=qr,Kt=Object.prototype.hasOwnProperty,Ie=Array.isArray,fe=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),Qo=function(t){for(;t.length>1;){var r=t.pop(),s=r.obj[r.prop];if(Ie(s)){for(var i=[],n=0;n<s.length;++n)typeof s[n]!="undefined"&&i.push(s[n]);r.obj[r.prop]=i}}},Li=function(t,r){for(var s=r&&r.plainObjects?Object.create(null):{},i=0;i<t.length;++i)typeof t[i]!="undefined"&&(s[i]=t[i]);return s},Xo=function e(t,r,s){if(!r)return t;if(typeof r!="object"){if(Ie(t))t.push(r);else if(t&&typeof t=="object")(s&&(s.plainObjects||s.allowPrototypes)||!Kt.call(Object.prototype,r))&&(t[r]=!0);else return[t,r];return t}if(!t||typeof t!="object")return[t].concat(r);var i=t;return Ie(t)&&!Ie(r)&&(i=Li(t,s)),Ie(t)&&Ie(r)?(r.forEach(function(n,a){if(Kt.call(t,a)){var o=t[a];o&&typeof o=="object"&&n&&typeof n=="object"?t[a]=e(o,n,s):t.push(n)}else t[a]=n}),t):Object.keys(r).reduce(function(n,a){var o=r[a];return Kt.call(n,a)?n[a]=e(n[a],o,s):n[a]=o,n},i)},Wo=function(t,r){return Object.keys(r).reduce(function(s,i){return s[i]=r[i],s},t)},Vo=function(e,t,r){var s=e.replace(/\+/g," ");if(r==="iso-8859-1")return s.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(s)}catch{return s}},Jo=function(t,r,s,i,n){if(t.length===0)return t;var a=t;if(typeof t=="symbol"?a=Symbol.prototype.toString.call(t):typeof t!="string"&&(a=String(t)),s==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(u){return"%26%23"+parseInt(u.slice(2),16)+"%3B"});for(var o="",c=0;c<a.length;++c){var l=a.charCodeAt(c);if(l===45||l===46||l===95||l===126||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||n===Yo.RFC1738&&(l===40||l===41)){o+=a.charAt(c);continue}if(l<128){o=o+fe[l];continue}if(l<2048){o=o+(fe[192|l>>6]+fe[128|l&63]);continue}if(l<55296||l>=57344){o=o+(fe[224|l>>12]+fe[128|l>>6&63]+fe[128|l&63]);continue}c+=1,l=65536+((l&1023)<<10|a.charCodeAt(c)&1023),o+=fe[240|l>>18]+fe[128|l>>12&63]+fe[128|l>>6&63]+fe[128|l&63]}return o},Go=function(t){for(var r=[{obj:{o:t},prop:"o"}],s=[],i=0;i<r.length;++i)for(var n=r[i],a=n.obj[n.prop],o=Object.keys(a),c=0;c<o.length;++c){var l=o[c],u=a[l];typeof u=="object"&&u!==null&&s.indexOf(u)===-1&&(r.push({obj:a,prop:l}),s.push(u))}return Qo(r),t},Zo=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},ec=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},tc=function(t,r){return[].concat(t,r)},rc=function(t,r){if(Ie(t)){for(var s=[],i=0;i<t.length;i+=1)s.push(r(t[i]));return s}return r(t)},Ui={arrayToObject:Li,assign:Wo,combine:tc,compact:Go,decode:Vo,encode:Jo,isBuffer:ec,isRegExp:Zo,maybeMap:rc,merge:Xo},Bi=Ho,lr=Ui,tt=qr,sc=Object.prototype.hasOwnProperty,ls={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,r){return t+"["+r+"]"},repeat:function(t){return t}},me=Array.isArray,ic=String.prototype.split,nc=Array.prototype.push,Hi=function(e,t){nc.apply(e,me(t)?t:[t])},ac=Date.prototype.toISOString,us=tt.default,X={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:lr.encode,encodeValuesOnly:!1,format:us,formatter:tt.formatters[us],indices:!1,serializeDate:function(t){return ac.call(t)},skipNulls:!1,strictNullHandling:!1},oc=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},Yt={},cc=function e(t,r,s,i,n,a,o,c,l,u,m,v,w,O,C,D){for(var P=t,te=D,ie=0,he=!1;(te=te.get(Yt))!==void 0&&!he;){var ne=te.get(t);if(ie+=1,typeof ne!="undefined"){if(ne===ie)throw new RangeError("Cyclic object value");he=!0}typeof te.get(Yt)=="undefined"&&(ie=0)}if(typeof c=="function"?P=c(r,P):P instanceof Date?P=m(P):s==="comma"&&me(P)&&(P=lr.maybeMap(P,function(I){return I instanceof Date?m(I):I})),P===null){if(n)return o&&!O?o(r,X.encoder,C,"key",v):r;P=""}if(oc(P)||lr.isBuffer(P)){if(o){var re=O?r:o(r,X.encoder,C,"key",v);if(s==="comma"&&O){for(var le=ic.call(String(P),","),Oe="",ae=0;ae<le.length;++ae)Oe+=(ae===0?"":",")+w(o(le[ae],X.encoder,C,"value",v));return[w(re)+(i&&me(P)&&le.length===1?"[]":"")+"="+Oe]}return[w(re)+"="+w(o(P,X.encoder,C,"value",v))]}return[w(r)+"="+w(String(P))]}var ue=[];if(typeof P=="undefined")return ue;var g;if(s==="comma"&&me(P))g=[{value:P.length>0?P.join(",")||null:void 0}];else if(me(c))g=c;else{var y=Object.keys(P);g=l?y.sort(l):y}for(var h=i&&me(P)&&P.length===1?r+"[]":r,d=0;d<g.length;++d){var f=g[d],b=typeof f=="object"&&typeof f.value!="undefined"?f.value:P[f];if(!(a&&b===null)){var S=me(P)?typeof s=="function"?s(h,f):h:h+(u?"."+f:"["+f+"]");D.set(t,ie);var $=Bi();$.set(Yt,D),Hi(ue,e(b,S,s,i,n,a,o,c,l,u,m,v,w,O,C,$))}}return ue},lc=function(t){if(!t)return X;if(t.encoder!==null&&typeof t.encoder!="undefined"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=t.charset||X.charset;if(typeof t.charset!="undefined"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var s=tt.default;if(typeof t.format!="undefined"){if(!sc.call(tt.formatters,t.format))throw new TypeError("Unknown format option provided.");s=t.format}var i=tt.formatters[s],n=X.filter;return(typeof t.filter=="function"||me(t.filter))&&(n=t.filter),{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:X.addQueryPrefix,allowDots:typeof t.allowDots=="undefined"?X.allowDots:!!t.allowDots,charset:r,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:X.charsetSentinel,delimiter:typeof t.delimiter=="undefined"?X.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:X.encode,encoder:typeof t.encoder=="function"?t.encoder:X.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:X.encodeValuesOnly,filter:n,format:s,formatter:i,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:X.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:X.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:X.strictNullHandling}},uc=function(e,t){var r=e,s=lc(t),i,n;typeof s.filter=="function"?(n=s.filter,r=n("",r)):me(s.filter)&&(n=s.filter,i=n);var a=[];if(typeof r!="object"||r===null)return"";var o;t&&t.arrayFormat in ls?o=t.arrayFormat:t&&"indices"in t?o=t.indices?"indices":"repeat":o="indices";var c=ls[o];if(t&&"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var l=c==="comma"&&t&&t.commaRoundTrip;i||(i=Object.keys(r)),s.sort&&i.sort(s.sort);for(var u=Bi(),m=0;m<i.length;++m){var v=i[m];s.skipNulls&&r[v]===null||Hi(a,cc(r[v],v,c,l,s.strictNullHandling,s.skipNulls,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,u))}var w=a.join(s.delimiter),O=s.addQueryPrefix===!0?"?":"";return s.charsetSentinel&&(s.charset==="iso-8859-1"?O+="utf8=%26%2310003%3B&":O+="utf8=%E2%9C%93&"),w.length>0?O+w:""},_e=Ui,ur=Object.prototype.hasOwnProperty,fc=Array.isArray,K={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:_e.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},dc=function(e){return e.replace(/&#(\d+);/g,function(t,r){return String.fromCharCode(parseInt(r,10))})},zi=function(e,t){return e&&typeof e=="string"&&t.comma&&e.indexOf(",")>-1?e.split(","):e},pc="utf8=%26%2310003%3B",hc="utf8=%E2%9C%93",yc=function(t,r){var s={},i=r.ignoreQueryPrefix?t.replace(/^\?/,""):t,n=r.parameterLimit===1/0?void 0:r.parameterLimit,a=i.split(r.delimiter,n),o=-1,c,l=r.charset;if(r.charsetSentinel)for(c=0;c<a.length;++c)a[c].indexOf("utf8=")===0&&(a[c]===hc?l="utf-8":a[c]===pc&&(l="iso-8859-1"),o=c,c=a.length);for(c=0;c<a.length;++c)if(c!==o){var u=a[c],m=u.indexOf("]="),v=m===-1?u.indexOf("="):m+1,w,O;v===-1?(w=r.decoder(u,K.decoder,l,"key"),O=r.strictNullHandling?null:""):(w=r.decoder(u.slice(0,v),K.decoder,l,"key"),O=_e.maybeMap(zi(u.slice(v+1),r),function(C){return r.decoder(C,K.decoder,l,"value")})),O&&r.interpretNumericEntities&&l==="iso-8859-1"&&(O=dc(O)),u.indexOf("[]=")>-1&&(O=fc(O)?[O]:O),ur.call(s,w)?s[w]=_e.combine(s[w],O):s[w]=O}return s},mc=function(e,t,r,s){for(var i=s?t:zi(t,r),n=e.length-1;n>=0;--n){var a,o=e[n];if(o==="[]"&&r.parseArrays)a=[].concat(i);else{a=r.plainObjects?Object.create(null):{};var c=o.charAt(0)==="["&&o.charAt(o.length-1)==="]"?o.slice(1,-1):o,l=parseInt(c,10);!r.parseArrays&&c===""?a={0:i}:!isNaN(l)&&o!==c&&String(l)===c&&l>=0&&r.parseArrays&&l<=r.arrayLimit?(a=[],a[l]=i):c!=="__proto__"&&(a[c]=i)}i=a}return i},gc=function(t,r,s,i){if(!!t){var n=s.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,a=/(\[[^[\]]*])/,o=/(\[[^[\]]*])/g,c=s.depth>0&&a.exec(n),l=c?n.slice(0,c.index):n,u=[];if(l){if(!s.plainObjects&&ur.call(Object.prototype,l)&&!s.allowPrototypes)return;u.push(l)}for(var m=0;s.depth>0&&(c=o.exec(n))!==null&&m<s.depth;){if(m+=1,!s.plainObjects&&ur.call(Object.prototype,c[1].slice(1,-1))&&!s.allowPrototypes)return;u.push(c[1])}return c&&u.push("["+n.slice(c.index)+"]"),mc(u,r,s,i)}},vc=function(t){if(!t)return K;if(t.decoder!==null&&t.decoder!==void 0&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset!="undefined"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof t.charset=="undefined"?K.charset:t.charset;return{allowDots:typeof t.allowDots=="undefined"?K.allowDots:!!t.allowDots,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:K.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:K.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:K.arrayLimit,charset:r,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:K.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:K.comma,decoder:typeof t.decoder=="function"?t.decoder:K.decoder,delimiter:typeof t.delimiter=="string"||_e.isRegExp(t.delimiter)?t.delimiter:K.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:K.depth,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:K.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:K.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:K.plainObjects,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:K.strictNullHandling}},bc=function(e,t){var r=vc(t);if(e===""||e===null||typeof e=="undefined")return r.plainObjects?Object.create(null):{};for(var s=typeof e=="string"?yc(e,r):e,i=r.plainObjects?Object.create(null):{},n=Object.keys(s),a=0;a<n.length;++a){var o=n[a],c=gc(o,s[o],r,typeof e=="string");i=_e.merge(i,c,r)}return r.allowSparse===!0?i:_e.compact(i)},xc=uc,wc=bc,Ac=qr,Sc={formats:Ac,parse:wc,stringify:xc};const Oc=mr(gr.create({baseURL:Bs.baseURL,timeout:25e3,headers:{"Content-Type":"application/json"},requestInterceptor:(e,{store:t})=>(e.paramsSerializer=r=>Sc.stringify(r,{arrayFormat:"brackets"}),e)}),{maxRequests:6,perMilliseconds:1e3}),{strapi:_r}=Ta(Oc,{});var Ic=_s(({app:e})=>{e.config.globalProperties.$strapi=_r}),py=Object.freeze(Object.defineProperty({__proto__:null,default:Ic,strapi:_r},Symbol.toStringTag,{value:"Module"})),Ki={get dev(){return!1},realm:"elitehcms",appDBID:"bp3gargfh",baseURL:"https://api.quickbase.com/v1",loginEndpoint:"https://elitehcms.quickbase.com/db/main?act=API_Authenticate",appToken:"cjibuvub93rvd2dbh4iksbeft4n4",refreshEndpoint:"https://api.quickbase.com/v1/auth/temporary",queryRecords:"https://api.quickbase.com/v1/records/query",insertRecords:"https://api.quickbase.com/v1/records",updateRecords:"https://api.quickbase.com/v1/records",runReport:"https://api.quickbase.com/v1/reports",storageUserKeyName:"clm_emp_user",storageUserTicketKeyName:"clm_emp_ticket",storageIPInfoKeyName:"clm_emp_ip",storagePermissionsKeyName:"clm_emp_permissions",storageAccessKeyName:"clm_emp_access",storageOfficeLocationKeyName:"clm_emp_office",storageEmployeeKeyName:"clm_emp_employee",storageCheckInKeyName:"clm_emp_checkin",storageJobBoardKeyName:"clm_emp_jobboard",cookieExpiration:"1d",kioskExpiration:"14d",officeExpiration:"6h",checkInExpiration:"5m",tokenExpiration:"4m 45s",userToken:"b3rntv_ng3q_0_b3f26wpbjxp4xdhqrxjmdpjmvus",commonParameters:{msInUTC:0,includeRids:1,fmt:"structured",options:"num-5000"},maxLoginAttempts:5,lastAttemptExpMinutes:5,loginAttemptMinutesBeforeLast:2,booleanFields:{br26nivmr:[21]}};function kc(e){const t=Object.assign({noopener:!0},e),r=[];for(const s in t){const i=t[s];i===!0?r.push(s):(In(i)||typeof i=="string"&&i!=="")&&r.push(s+"="+i)}return r.join(",")}function fs(e,t,r){let s=window.open;if(Jt.is.cordova===!0){if(cordova!==void 0&&cordova.InAppBrowser!==void 0&&cordova.InAppBrowser.open!==void 0)s=cordova.InAppBrowser.open;else if(navigator!==void 0&&navigator.app!==void 0)return navigator.app.loadUrl(e,{openExternal:!0})}const i=s(e,"_blank",kc(r));if(i)return Jt.is.desktop&&i.focus(),i;t&&t()}var Cc=(e,t,r)=>{if(Jt.is.ios===!0&&window.SafariViewController!==void 0){window.SafariViewController.isAvailable(s=>{s?window.SafariViewController.show({url:e},On,t):fs(e,t,r)});return}return fs(e,t,r)};const G=ee("hiringCenter",{state:()=>({hiringCenterInfo:null}),getters:{hiringCenter:e=>e.hiringCenterInfo,hiringCenterAvailable:e=>e.hiringCenterInfo!==null},actions:{async fetchHiringCenter(e,t){const r=[{9:{value:e},7:{value:"Hiring Center"}}];if(!this.hiringCenterInfo||t){const{data:s}=await A.fetchFromStructureApp({fields:r});return this.setHiringCenter(s,!0),s}else return this.hiringCenterInfo},setHiringCenter(e,t){this.hiringCenterInfo=e,t&&e?x.setItem(k.storageHiringCenter,e):e||x.removeItem(k.storageHiringCenter)}}});var $c=[{title:"Home",i18n:"home",caption:"Home",icon:"home",to:{name:"home",exact:!0},resource:"dashboard",action:"read",userType:"All"},{title:"Profile",caption:"Information",icon:"assignment_ind",to:{name:"profile",exact:!0},resource:"profile",action:"read",access:{userType:"none",public:!1,private:!1}},{title:"Job Board",caption:"Job Board",icon:"work",to:{name:"jobs",exact:!0},resource:"jobBoardMenu",action:"read",userType:"Candidate",access:{userType:"Candidate",public:!0,private:!1,checkIn:!1}},{title:"Apply",caption:"Apply",icon:"feed",to:{name:"apply",exact:!0},resource:"applyMenu",action:"read",userType:"Candidate",access:{userType:"Candidate",public:!0,private:!0,checkIn:!0}}],Tc=[{title:"Home",caption:"Dashboard",icon:"fa-solid fa-house",to:{name:"home",exact:!0},resource:"dashboard",userType:"Project User"},{title:"Expected Arrivals",caption:"Arrivals",icon:"fa-solid fa-plane-arrival",to:{name:"arrivals",exact:!0},resource:"projectArrivals",userType:"Project User"},{title:"Hire Requests",caption:"Requests",icon:"fa-solid fa-user-plus",to:{name:"requests",exact:!0},resource:"projectRequests",userType:"Project User"},{title:"Pipeline",caption:"Pipeline",icon:"fa-solid fa-bars-progress",to:{name:"pipeline",exact:!0},resource:"projectPipeline",userType:"Project User"},{title:"Employees",caption:"Employees",icon:"fa-solid fa-people-group",to:{name:"employees",exact:!0},resource:"projectEmployees",userType:"Project User"},{title:"Compliance",caption:"Compliance",icon:"fa-solid fa-shield-halved",to:{name:"compliance",exact:!0},resource:"compliance",userType:"Project User"},{title:"Manage Projects",caption:"Manage Projects",icon:"fa-solid fa-building-columns",to:{name:"manage-projects",exact:!0},resource:"manageProjects",userType:"Project User"},{title:"Insights",caption:"Insights",icon:"fa-solid fa-chart-line",to:{name:"insights",exact:!0},resource:"insights",userType:"Project User"}],Pc=[{title:"Self Check-Ins",caption:"self-check-ins",icon:"list_alt",to:{name:"self-check-ins",exact:!0},resource:"selfCheckIns",userType:"QuickBase User"},{title:"Hiring",caption:"Hiring",icon:"group_add",to:{name:"profiles",exact:!0},resource:"hiring",userType:"QuickBase User"},{title:"Recruiting",caption:"Recruiting",icon:"connect_without_contact",to:{name:"jobPost",exact:!0},resource:"recruiting",userType:"QuickBase User"},{title:"Projects",caption:"Projects",icon:"corporate_fare",to:{name:"projects",exact:!0},resource:"projects",userType:"QuickBase User"},{title:"Releases",caption:"Releases",icon:"receipt",to:{name:"releases",exact:!0},resource:"releases",userType:"QuickBase User"},{title:"Chat",caption:"Chat",icon:"chat",to:{name:"chat",exact:!0},resource:"chat",userType:"QuickBase User"}],Rc=[{title:"Summary",caption:"Summary",icon:"preview",resource:"open",to:{name:"ee-summary",exact:!0}},{title:"Training",caption:"Training",icon:"grading",resource:"open",to:{name:"ee-training",exact:!0}}];const H=ee("app",{state:()=>({title:k.toolbarTitle,lang:null,checkIn:k.pageType==="Candidate"||k.pageType==="Candidate Kiosk",checkInData:{},pageType:k.pageType,userType:k.userType,menu:k.userType==="Candidate"?$c:k.userType==="Project User"?Tc:k.userType==="QuickBase User"?Pc:[],startPage:k.startPage,version:k.version,homeButton:k.homeButton,event:null,kioskActive:!1,country:k.country}),getters:{appVersion:e=>e.version,toolbarTitle:e=>e.title,currentPageType:e=>e.pageType,currentUserType:e=>e.userType,inHiringCenter:e=>e.checkInData[15]?e.checkInData[15]==="Waiting":!1,checkedIn:e=>e.checkInData[15]?e.checkInData[15]==="Waiting":!1,checkedInStatus:e=>e.checkInData[15]||null,onKiosk(){return this.currentPageType==="Candidate Kiosk"},currentLang:e=>e.lang,startPageEnabled:e=>e.startPage,homeButtonEnabled:e=>e.homeButton,activeMenu(){const{hiringCenterAvailable:e}=G();return this.menu.filter(r=>{let s=!0,i=!0;if(Ee.can(r.action||"read",r.resource)){let n=Ee.possibleRulesFor(r.action||"read",r.resource)[0].conditions;return n&&(n.userType&&(s=n.userType===this.currentUserType,s||(i=!1)),n.accept&&(s=n.accept.find(a=>a==="checkedIn"&&this.checkedIn||a==="kiosk"&&this.onKiosk?!0:!!(a==="office"&&e)),s||(i=!1)),n.deny&&(s=n.deny.filter(a=>a==="checkedIn"&&this.checkedIn||a==="kiosk"&&this.onKiosk?!0:!!(a==="office"&&e)).length===0,s||(i=!1))),i}else return!1})},viewEmployeeMenu(){return Rc.filter(t=>{let r=!0,s=!0;if(Ee.can(t.action||"read",t.resource)){let i=Ee.possibleRulesFor(t.action||"read",t.resource)[0].conditions;return i&&i.userType&&(r=i.userType===this.currentUserType,r||(s=!1)),s}else return!1})},currentEvent:e=>e.event,getCountry:e=>e.country},actions:{setCheckInData(e){const{setHiringCenter:t}=G();this.checkInData=e,x.setItem(k.storageCheckInKeyName,e),this.currentPageType==="Candidate"&&e[15]==="Waiting"&&t(e.office,!0)},openWindow(e,t){(t.fullScreen===null||t.fullScreen===void 0)&&(t.fullScreen=!0),t.name==="Full Profile"&&!t.height&&(t.height=775),t.width=t.width?t.width:screen.availWidth&&t.fullScreen?screen.availWidth:1450,t.height=t.height?t.height:screen.availHeight&&t.fullScreen?screen.availHeight:700;const r=window.top.outerHeight/2+window.top.screenY-t.height/2,s=window.top.outerWidth/2+window.top.screenX-t.width/2;`${t.width}`,`${t.height}`,t.fullScreen,Cc(t.url,null,{width:t.width,height:t.height,top:r,left:s,popup:!0,fullscreen:t.fullScreen||!0,menubar:!1,toolbar:!1})},async addTaskToCheckin({task:e,reason:t,active:r}){const s={3:{value:this.checkInData[3]},10:{value:t},27:{value:e}};r&&Object.assign(s,{36:{value:!0}});const{data:i}=await A.upsertRecordsXML({to:"br26nivmr",data:[s],fieldsToReturn:[31],formatObject:31});if(i[0])return this.checkInData=i[0][31],this.checkInData;throw"Something went wrong"},setLang(e){this.lang=e},setEvent(e,t){this.event=e,t&&x.setItem(k.storageEvent,e),e||x.removeItem(k.storageEvent)},setKioskActive(e){this.kioskActive=e},setStartPage(e,t){this.startPage=e,t&&x.setItem(k.storageStartPage,e),e||x.removeItem(k.storageStartPage)},setHomeButton(e,t){this.homeButton=e,t&&x.setItem(k.storageHomeButton,e),e||x.removeItem(k.storageHomeButton)},setCountry(e){this.country=e}}}),lt=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function jc(e){return Ec(e)===0}function Dc(e,t){return t<=6?31:t<=11||jc(e)?30:29}function Ec(e){const t=lt.length;let r=lt[0],s,i,n,a,o;if(e<r||e>=lt[t-1])throw new Error("Invalid Jalaali year "+e);for(o=1;o<t&&(s=lt[o],i=s-r,!(e<s));o+=1)r=s;return a=e-r,i-a<6&&(a=a-i+Fc(i+4,33)*33),n=ds(ds(a+1,33)-1,4),n===-1&&(n=4),n}function Fc(e,t){return~~(e/t)}function ds(e,t){return e-~~(e/t)*t}const Yi=864e5,Nc=36e5,fr=6e4,Qi="YYYY-MM-DDTHH:mm:ss.SSSZ",qc=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,_c=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,Qt={};function Mc(e,t){const r="("+t.days.join("|")+")",s=e+r;if(Qt[s]!==void 0)return Qt[s];const i="("+t.daysShort.join("|")+")",n="("+t.months.join("|")+")",a="("+t.monthsShort.join("|")+")",o={};let c=0;const l=e.replace(_c,m=>{switch(c++,m){case"YY":return o.YY=c,"(-?\\d{1,2})";case"YYYY":return o.YYYY=c,"(-?\\d{1,4})";case"M":return o.M=c,"(\\d{1,2})";case"MM":return o.M=c,"(\\d{2})";case"MMM":return o.MMM=c,a;case"MMMM":return o.MMMM=c,n;case"D":return o.D=c,"(\\d{1,2})";case"Do":return o.D=c++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return o.D=c,"(\\d{2})";case"H":return o.H=c,"(\\d{1,2})";case"HH":return o.H=c,"(\\d{2})";case"h":return o.h=c,"(\\d{1,2})";case"hh":return o.h=c,"(\\d{2})";case"m":return o.m=c,"(\\d{1,2})";case"mm":return o.m=c,"(\\d{2})";case"s":return o.s=c,"(\\d{1,2})";case"ss":return o.s=c,"(\\d{2})";case"S":return o.S=c,"(\\d{1})";case"SS":return o.S=c,"(\\d{2})";case"SSS":return o.S=c,"(\\d{3})";case"A":return o.A=c,"(AM|PM)";case"a":return o.a=c,"(am|pm)";case"aa":return o.aa=c,"(a\\.m\\.|p\\.m\\.)";case"ddd":return i;case"dddd":return r;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return o.Z=c,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return o.ZZ=c,"(Z|[+-]\\d{2}\\d{2})";case"X":return o.X=c,"(-?\\d+)";case"x":return o.x=c,"(-?\\d{4,})";default:return c--,m[0]==="["&&(m=m.substring(1,m.length-1)),m.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),u={map:o,regex:new RegExp("^"+l)};return Qt[s]=u,u}function Xi(e,t){return e!==void 0?e:t!==void 0?t.date:Cn.date}function ps(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),i=Math.floor(s/60),n=s%60;return r+L(i)+t+L(n)}function Lc(e,t,r){let s=e.getFullYear(),i=e.getMonth();const n=e.getDate();return t.year!==void 0&&(s+=r*t.year,delete t.year),t.month!==void 0&&(i+=r*t.month,delete t.month),e.setDate(1),e.setMonth(2),e.setFullYear(s),e.setMonth(i),e.setDate(Math.min(n,Lr(e))),t.date!==void 0&&(e.setDate(e.getDate()+r*t.date),delete t.date),e}function Uc(e,t,r){const s=t.year!==void 0?t.year:e[`get${r}FullYear`](),i=t.month!==void 0?t.month-1:e[`get${r}Month`](),n=new Date(s,i+1,0).getDate(),a=Math.min(n,t.date!==void 0?t.date:e[`get${r}Date`]());return e[`set${r}Date`](1),e[`set${r}Month`](2),e[`set${r}FullYear`](s),e[`set${r}Month`](i),e[`set${r}Date`](a),delete t.year,delete t.month,delete t.date,e}function Mr(e,t,r){const s=Wi(t),i=new Date(e),n=s.year!==void 0||s.month!==void 0||s.date!==void 0?Lc(i,s,r):i;for(const a in s){const o=kn(a);n[`set${o}`](n[`get${o}`]()+r*s[a])}return n}function Wi(e){const t=F({},e);return e.years!==void 0&&(t.year=e.years,delete t.years),e.months!==void 0&&(t.month=e.months,delete t.months),e.days!==void 0&&(t.date=e.days,delete t.days),e.day!==void 0&&(t.date=e.day,delete t.day),e.hour!==void 0&&(t.hours=e.hour,delete t.hour),e.minute!==void 0&&(t.minutes=e.minute,delete t.minute),e.second!==void 0&&(t.seconds=e.second,delete t.second),e.millisecond!==void 0&&(t.milliseconds=e.millisecond,delete t.millisecond),t}function Vi(e,t,r){const s=Wi(t),i=r===!0?"UTC":"",n=new Date(e),a=s.year!==void 0||s.month!==void 0||s.date!==void 0?Uc(n,s,i):n;for(const o in s){const c=o.charAt(0).toUpperCase()+o.slice(1);a[`set${i}${c}`](s[o])}return a}function Bc(e,t,r){const s=Hc(e,t,r),i=new Date(s.year,s.month===null?null:s.month-1,s.day===null?1:s.day,s.hour,s.minute,s.second,s.millisecond),n=i.getTimezoneOffset();return s.timezoneOffset===null||s.timezoneOffset===n?i:Mr(i,{minutes:s.timezoneOffset-n},1)}function Hc(e,t,r,s,i){const n={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(i!==void 0&&Object.assign(n,i),e==null||e===""||typeof e!="string")return n;t===void 0&&(t=Qi);const a=Xi(r,Ms.props),o=a.months,c=a.monthsShort,{regex:l,map:u}=Mc(t,a),m=e.match(l);if(m===null)return n;let v="";if(u.X!==void 0||u.x!==void 0){const w=parseInt(m[u.X!==void 0?u.X:u.x],10);if(isNaN(w)===!0||w<0)return n;const O=new Date(w*(u.X!==void 0?1e3:1));n.year=O.getFullYear(),n.month=O.getMonth()+1,n.day=O.getDate(),n.hour=O.getHours(),n.minute=O.getMinutes(),n.second=O.getSeconds(),n.millisecond=O.getMilliseconds()}else{if(u.YYYY!==void 0)n.year=parseInt(m[u.YYYY],10);else if(u.YY!==void 0){const w=parseInt(m[u.YY],10);n.year=w<0?w:2e3+w}if(u.M!==void 0){if(n.month=parseInt(m[u.M],10),n.month<1||n.month>12)return n}else u.MMM!==void 0?n.month=c.indexOf(m[u.MMM])+1:u.MMMM!==void 0&&(n.month=o.indexOf(m[u.MMMM])+1);if(u.D!==void 0){if(n.day=parseInt(m[u.D],10),n.year===null||n.month===null||n.day<1)return n;const w=s!=="persian"?new Date(n.year,n.month,0).getDate():Dc(n.year,n.month);if(n.day>w)return n}u.H!==void 0?n.hour=parseInt(m[u.H],10)%24:u.h!==void 0&&(n.hour=parseInt(m[u.h],10)%12,(u.A&&m[u.A]==="PM"||u.a&&m[u.a]==="pm"||u.aa&&m[u.aa]==="p.m.")&&(n.hour+=12),n.hour=n.hour%24),u.m!==void 0&&(n.minute=parseInt(m[u.m],10)%60),u.s!==void 0&&(n.second=parseInt(m[u.s],10)%60),u.S!==void 0&&(n.millisecond=parseInt(m[u.S],10)*10**(3-m[u.S].length)),(u.Z!==void 0||u.ZZ!==void 0)&&(v=u.Z!==void 0?m[u.Z].replace(":",""):m[u.ZZ],n.timezoneOffset=(v[0]==="+"?-1:1)*(60*v.slice(1,3)+1*v.slice(3,5)))}return n.dateHash=L(n.year,6)+"/"+L(n.month)+"/"+L(n.day),n.timeHash=L(n.hour)+":"+L(n.minute)+":"+L(n.second)+v,n}function zc(e){return typeof e=="number"?!0:isNaN(Date.parse(e))===!1}function Kc(e,t){return Vi(new Date,e,t)}function Yc(e){const t=new Date(e).getDay();return t===0?7:t}function dr(e){const t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);const r=new Date(t.getFullYear(),0,4);r.setDate(r.getDate()-(r.getDay()+6)%7+3);const s=t.getTimezoneOffset()-r.getTimezoneOffset();t.setHours(t.getHours()-s);const i=(t-r)/(Yi*7);return 1+Math.floor(i)}function Qc(e){return e.getFullYear()*1e4+e.getMonth()*100+e.getDate()}function Xt(e,t){const r=new Date(e);return t===!0?Qc(r):r.getTime()}function Xc(e,t,r,s={}){const i=Xt(t,s.onlyDate),n=Xt(r,s.onlyDate),a=Xt(e,s.onlyDate);return(a>i||s.inclusiveFrom===!0&&a===i)&&(a<n||s.inclusiveTo===!0&&a===n)}function Wc(e,t){return Mr(e,t,1)}function Vc(e,t){return Mr(e,t,-1)}function de(e,t,r){const s=new Date(e),i=`set${r===!0?"UTC":""}`;switch(t){case"year":case"years":s[`${i}Month`](0);case"month":case"months":s[`${i}Date`](1);case"day":case"days":case"date":s[`${i}Hours`](0);case"hour":case"hours":s[`${i}Minutes`](0);case"minute":case"minutes":s[`${i}Seconds`](0);case"second":case"seconds":s[`${i}Milliseconds`](0)}return s}function Jc(e,t,r){const s=new Date(e),i=`set${r===!0?"UTC":""}`;switch(t){case"year":case"years":s[`${i}Month`](11);case"month":case"months":s[`${i}Date`](Lr(s));case"day":case"days":case"date":s[`${i}Hours`](23);case"hour":case"hours":s[`${i}Minutes`](59);case"minute":case"minutes":s[`${i}Seconds`](59);case"second":case"seconds":s[`${i}Milliseconds`](999)}return s}function Gc(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(r=>{t=Math.max(t,new Date(r))}),t}function Zc(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(r=>{t=Math.min(t,new Date(r))}),t}function ut(e,t,r){return(e.getTime()-e.getTimezoneOffset()*fr-(t.getTime()-t.getTimezoneOffset()*fr))/r}function Ji(e,t,r="days"){const s=new Date(e),i=new Date(t);switch(r){case"years":case"year":return s.getFullYear()-i.getFullYear();case"months":case"month":return(s.getFullYear()-i.getFullYear())*12+s.getMonth()-i.getMonth();case"days":case"day":case"date":return ut(de(s,"day"),de(i,"day"),Yi);case"hours":case"hour":return ut(de(s,"hour"),de(i,"hour"),Nc);case"minutes":case"minute":return ut(de(s,"minute"),de(i,"minute"),fr);case"seconds":case"second":return ut(de(s,"second"),de(i,"second"),1e3)}}function pr(e){return Ji(e,de(e,"year"),"days")+1}function el(e){return Ls(e)===!0?"date":typeof e=="number"?"number":"string"}function tl(e,t,r){const s=new Date(e);if(t){const i=new Date(t);if(s<i)return i}if(r){const i=new Date(r);if(s>i)return i}return s}function rl(e,t,r){const s=new Date(e),i=new Date(t);if(r===void 0)return s.getTime()===i.getTime();switch(r){case"second":case"seconds":if(s.getSeconds()!==i.getSeconds())return!1;case"minute":case"minutes":if(s.getMinutes()!==i.getMinutes())return!1;case"hour":case"hours":if(s.getHours()!==i.getHours())return!1;case"day":case"days":case"date":if(s.getDate()!==i.getDate())return!1;case"month":case"months":if(s.getMonth()!==i.getMonth())return!1;case"year":case"years":if(s.getFullYear()!==i.getFullYear())return!1;break;default:throw new Error(`date isSameDate unknown unit ${r}`)}return!0}function Lr(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function hs(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const ys={YY(e,t,r){const s=this.YYYY(e,t,r)%100;return s>=0?L(s):"-"+L(Math.abs(s))},YYYY(e,t,r){return r!=null?r:e.getFullYear()},M(e){return e.getMonth()+1},MM(e){return L(e.getMonth()+1)},MMM(e,t){return t.monthsShort[e.getMonth()]},MMMM(e,t){return t.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return hs(this.Q(e))},D(e){return e.getDate()},Do(e){return hs(e.getDate())},DD(e){return L(e.getDate())},DDD(e){return pr(e)},DDDD(e){return L(pr(e),3)},d(e){return e.getDay()},dd(e,t){return this.dddd(e,t).slice(0,2)},ddd(e,t){return t.daysShort[e.getDay()]},dddd(e,t){return t.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return dr(e)},ww(e){return L(dr(e))},H(e){return e.getHours()},HH(e){return L(e.getHours())},h(e){const t=e.getHours();return t===0?12:t>12?t%12:t},hh(e){return L(this.h(e))},m(e){return e.getMinutes()},mm(e){return L(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return L(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return L(Math.floor(e.getMilliseconds()/10))},SSS(e){return L(e.getMilliseconds(),3)},A(e){return this.H(e)<12?"AM":"PM"},a(e){return this.H(e)<12?"am":"pm"},aa(e){return this.H(e)<12?"a.m.":"p.m."},Z(e,t,r,s){const i=s==null?e.getTimezoneOffset():s;return ps(i,":")},ZZ(e,t,r,s){const i=s==null?e.getTimezoneOffset():s;return ps(i)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function sl(e,t,r,s,i){if(e!==0&&!e||e===1/0||e===-1/0)return;const n=new Date(e);if(isNaN(n))return;t===void 0&&(t=Qi);const a=Xi(r,Ms.props);return t.replace(qc,(o,c)=>o in ys?ys[o](n,a,s,i):c===void 0?o:c.split("\\]").join("]"))}function il(e){return Ls(e)===!0?new Date(e.getTime()):e}var J={isValid:zc,extractDate:Bc,buildDate:Kc,getDayOfWeek:Yc,getWeekOfYear:dr,isBetweenDates:Xc,addToDate:Wc,subtractFromDate:Vc,adjustDate:Vi,startOfDate:de,endOfDate:Jc,getMaxDate:Gc,getMinDate:Zc,getDateDiff:Ji,getDayOfYear:pr,inferDateFormat:el,getDateBetween:tl,isSameDate:rl,daysInMonth:Lr,formatDate:sl,clone:il};const Gi=ee("boardAppStore",{state:()=>({boardApp:{},requestJobs:null,requestedTimestamp:null}),getters:{getBoardApp:e=>e.boardApp,profileData(){const{profileData:e}=Ae();return e},jobsForBoard(){if(this.requestJobs){const{employeeData:e}=U(),t=this.requestJobs;return e[3]||(t.forEach(r=>{Object.assign(r,{recommended:r[68]===e[53]&&r[69]===e[51]});const s=e[537].find(i=>i[10]===r[3]);s!==void 0&&Object.assign(r,{applied:!0,appliedOn:s[1].$d!==void 0?J.formatDate(s[1].$d,"MM-DD-YYYY"):s[1].date})}),t.sort((r,s)=>r.recommended===s.recommended?s[1].isAfter(r[1]):r.recommended?-1:1)),t}else return[]},timeRequested(){return this.requestedTimestamp}},actions:{async getRequestJobs(){const e=[{14:{value:224},9:{value:1},8:{value:"{'17'.EX.'Open'}AND{'182'.EX.'false'}AND{'175'.EX.'true'}"},7:{value:"Table Query"},6:{value:"bpzpyqcu4"}}],{data:t}=await A.fetchFromProjectsApp({fields:e});if(t.length>0)return this.setRequestJobs(t,!0),this.requestedTimestamp=p(),t;throw"No jobs"},async applyOnBoard({job:e}){const{employeeData:t}=U(),{data:r}=await A.upsertRecordsXML({to:"bsfq6uktu",data:[{6:{value:t[3]},8:{value:e[56]},10:{value:e[3]},12:{value:e[61]}}],fieldsToReturn:[19],formatObject:19});if(console.log(r),r[0])return r[0][19];throw"Cannot apply"},storeBoardApp(e){this.boardApp=e},setRequestJobs(e,t){const r=e.sort((s,i)=>i[1].isAfter(s[1]));this.requestJobs=r,t&&x.setItem(k.storageJobBoardKeyName,r)}}}),Wt=[{link:"https://beis-newhire.sabacloud.com/Saba/Web_wdk/NA3P1PRD0029/index/prelogin.rdf",linkName:"BSLN",img:"https://static-na3p1.sabacloud.com/assets/s/s13cvy4thve9/common/img/favicon.ico"},{link:"https://hrx.talx.com/ec/#/login/13917?divisionid=42",linkName:"HireExpress",img:"https://hrx.talx.com/ec/favicon.ico"}],Y=ee("kiosk",{state:()=>({kiosk:null,access:null,permissions:null,bookmarks:Wt,bookMarksOnly:!1}),getters:{getBookMarksOnly:e=>e.bookMarksOnly,getBookmarks:e=>e.bookmarks,kioskAccount:e=>e.kiosk,kioskAvailable:e=>e.kiosk!==null,kioskHiringCenter:e=>e.kiosk?e.kiosk[37]:null,hasAffirmative:e=>e.kiosk?e.kiosk.voluntaryForms.affirmative:!1,hasVets:e=>e.kiosk?e.kiosk.voluntaryForms.vets:!1,hasDisability:e=>e.kiosk?!!e.kiosk.voluntaryForms.disability:!1,goToVoluntary:e=>e.hasAffirmative||e.hasVets||e.hasDisability,availableTests:e=>e.kiosk&&e.kiosk.tests?e.kiosk.tests:[],hasTests:e=>e.kiosk&&e.kiosk.tests?e.kiosk.tests.length>0:!1,testForCraft:e=>{const{currentLang:t}=H(),{craftId:r}=Ae();let s=1;return t==="en-US"?s=1:t==="es"&&(s=2),e.kiosk&&e.kiosk.tests&&e.kiosk.tests.find(i=>i[15]===r&&i[16]===s)||!1}},actions:{async fetchKioskAccount(e,t){const r=`{'11'.EX.'${e.email}'}AND{'6'.EX.'Active'}`,s=[{7:{value:"Kiosks"},8:{value:r},9:{value:1},14:{value:30}}];if(!this.kiosk||t){const{data:i}=await A.fetchFromStructureApp({fields:s});if(i.length>0){const n=Object.assign({},i[0][37]);delete n.kiosk,i[0][37]=n,this.setKioskAccount(i[0],!0),e.ticket&&A.setKioskTicket(e.ticket),i[0][45]===!0&&this.setBookmarksOnly(!0,!0),i[0].bookmarks&&this.setBookmarks(i[0].bookmarks,!0)}return i}else return[this.kiosk]},async loginKiosk(e){const t=`{'10'.EX.'Active'}AND{'6'.EX.'${e.email}'}AND{'32'.EX.'Kiosk Profile'}`,r=[{7:{value:"User Request"},8:{value:t},9:{value:1},14:{value:77}}],{data:s}=await A.fetchFromStructureApp({fields:r}),i=[{6:{value:"login"}}];let n=await A.getIpInfo();if(n&&n.query)i[0][8]={value:n.ip?n.ip:"N/A"},i[0][10]={value:n.userAgent?n.userAgent:"N/A"},i[0][27]={value:n.continent?n.continent:"N/A"},i[0][28]={value:n.continentCode?n.continentCode:"N/A"},i[0][29]={value:n.country?n.country:"N/A"},i[0][30]={value:n.countryCode},i[0][31]={value:n.region?n.region:"N/A"},i[0][32]={value:n.regionName?n.regionName:"N/A"},i[0][33]={value:n.city?n.city:"N/A"},i[0][34]={value:n.district?n.district:"N/A"},i[0][38]={value:n.zip?n.zip:"N/A"},i[0][36]={value:n.lat?n.lat:"N/A"},i[0][37]={value:n.lon?n.lon:"N/A"},i[0][38]={value:n.timezone?n.timezone:"N/A"},i[0][39]={value:n.offset?n.offset:"N/A"},i[0][40]={value:n.isp?n.isp:"N/A"},i[0][41]={value:n.org?n.org:"N/A"},i[0][42]={value:n.as?n.as:"N/A"},i[0][43]={value:n.asname?n.asname:"N/A"},i[0][44]={value:n.mobile?n.mobile:!1},i[0][45]={value:n.proxy?n.proxy:!1},i[0][46]={value:n.hosting?n.hosting:!1},i[0][46]={value:n.hosting?n.hosting:"N/A"},i[0][47]={value:n.query?n.query:"N/A"};else{try{n=await A.fetchIpInfo()}catch{n=null}n&&n.query&&(i[0][8]={value:n.ip?n.ip:"N/A"},i[0][10]={value:n.userAgent?n.userAgent:"N/A"},i[0][27]={value:n.continent?n.continent:"N/A"},i[0][28]={value:n.continentCode?n.continentCode:"N/A"},i[0][29]={value:n.country?n.country:"N/A"},i[0][30]={value:n.countryCode},i[0][31]={value:n.region?n.region:"N/A"},i[0][32]={value:n.regionName?n.regionName:"N/A"},i[0][33]={value:n.city?n.city:"N/A"},i[0][34]={value:n.district?n.district:"N/A"},i[0][38]={value:n.zip?n.zip:"N/A"},i[0][36]={value:n.lat?n.lat:"N/A"},i[0][37]={value:n.lon?n.lon:"N/A"},i[0][38]={value:n.timezone?n.timezone:"N/A"},i[0][39]={value:n.offset?n.offset:"N/A"},i[0][40]={value:n.isp?n.isp:"N/A"},i[0][41]={value:n.org?n.org:"N/A"},i[0][42]={value:n.as?n.as:"N/A"},i[0][43]={value:n.asname?n.asname:"N/A"},i[0][44]={value:n.mobile?n.mobile:!1},i[0][45]={value:n.proxy?n.proxy:!1},i[0][46]={value:n.hosting?n.hosting:!1},i[0][47]={value:n.query?n.query:"N/A"})}if(s.length===1){const a=s[0];if(i[0][12]={value:a[3]},a[32]==="Kiosk Profile"){if(await Ve.compare(e.password,a[7]))return i[0][7]={value:"Successful"},await A.addLoginAttempt(i),this.fetchKioskAccountV2(a);throw i[0][7]={value:"Invalid Password"},{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}}else throw i[0][7]={value:"Invalid Login"},A.addLoginAttempt(i),{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}}else throw i[0][7]={value:"Invalid Login"},A.addLoginAttempt(i),{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}},async fetchKioskAccountV2(e,t){const r=`{'10'.EX.'Active'}AND{'6'.EX.'${e[6]}'}AND{'32'.EX.'Kiosk Profile'}`,s=[{7:{value:"User"},8:{value:r},9:{value:e[3]},14:{value:76}}],i=await A.fetchFromStructureApp({fields:s}),{user:n,access:a,permissions:o}=i.data;if(a.length>0){const c=[];a.forEach(l=>{l[7]==="Bookmark"&&c.push(l)}),this.setBookmarks(c,!0)}return n[113]===!0&&this.setBookmarksOnly(!0,!0),n[102]&&A.setKioskTicket(n[102]),console.log("fetchKioskV2:",n,a,o),n},setKioskAccount(e,t){const{setKioskActive:r}=H(),{setHiringCenter:s}=G();if(this.kiosk=e,r(!!e),t&&e)x.setItem(k.storageKioskAccount,e),r(!0),this.setLastKioskFetch();else if(!e){x.removeItem(k.storageKioskAccount),r(!1),this.removeLastKioskFetch(),s(null,t);return}if(e&&e[37]){const i=Object.assign({},e[37]);s(i,t)}},setBookmarks(e,t){let r=e||[];return r=Wt.concat(r),this.bookmarks=r,t&&e&&x.setItem(k.storageBookmarks,JSON.parse(JSON.stringify(r))),!0},setLastKioskFetch(){x.setItem(k.storageLastKioskFetch,p())},removeLastKioskFetch(){x.removeItem(k.storageLastKioskFetch)},setBookmarksFromStorage(e,t){return this.bookmarks=e,!0},setBookmarksOnly(e,t){this.bookMarksOnly=e,t&&x.setItem(k.storageBookmarksOnly,e),e||x.removeItem(k.storageBookmarksOnly)},removeBookmarks(){this.setBookmarksOnly(!1),this.kioskAvailable&&this.getBookMarksOnly&&this.setKioskAccount(null,!1),this.bookmarks=Wt,this.bookMarksOnly=!1,x.removeItem(k.storageBookmarks),x.removeItem(k.storageBookmarksOnly)}}}),Ae=ee("profile",{state:()=>({profile:{6:{field:"Related Employee"},15:{field:"Related Hiring Center"},19:{field:"Related Job"},23:{field:"First"},24:{field:"Middle"},25:{field:"Last"},26:{field:"Suffix"},27:{field:"Phone"},28:{field:"Email"},32:{field:"Street1"},33:{field:"Street2"},34:{field:"City"},35:{field:"State"},36:{field:"Zip"},37:{field:"Country"},38:{field:"Preferred Name"},40:{field:"Related Craft"},42:{field:"Related Experience Option"},44:{field:"Related Employment Status"},46:{field:"Related Contact Method"},49:{field:"Related Kiosk Session"},67:{field:"Related Available Language"}},voluntaryForms:{affirmative:{6:{field:"Related Kiosk Profile"},12:{field:"Related Hiring Center"},16:{field:"Related Affirmative Option (Gender)"},18:{field:"Related Job"},20:{field:"Related Affirmative Option (Ethnicity)"},22:{field:"Related Affirmative Option (Race)"},25:{field:"Related Kiosk Session"},24:{field:"Completion Timestamp"}},veterans:{6:{field:"Related Kiosk Profile"},8:{field:"Related Veteran Status Form"},10:{field:"Related Hiring Center"},16:{field:"Initials"},18:{field:"Related Kiosk Session"},17:{field:"Completion Timestamp"}},disability:{6:{field:"Completion Timestamp"},7:{field:"Name Entered"},8:{field:"Date Entered"},9:{field:"Related Kiosk Profile"},10:{field:"Related Disability Form"},15:{field:"Related Disability Form Option"},17:{field:"Related Hiring Center"},19:{field:"Related Job"},21:{field:"Related Kiosk Session"}},children:{vets:{field:"Veteran Form Selections",value:[]}}},step:0,loading:!0,completed:!1,jobBoardApplication:{},vetsSelections:null,vetsForm:null,craft:null,levelStartTest:null}),getters:{personalInfoNeeded(){const{employeeData:e}=U();return!(e[3]&&e[20]!==""&&e[22]!==""&&e[41]!==""&&e[43]!==""&&e[44]!==""&&e[45]!==""&&e[46]!=="")},onJobBoard(){const{getBoardApp:e}=Gi();return!(!e[3]||e[3]===void 0)},profileData:e=>e.profile,profileComplete:e=>e.completed,loadingState:e=>e.loading,proceedToTest(){const{onKiosk:e}=H(),{testForCraft:t}=Y(),{employeeData:r}=U();return r.needsTest&&r.needsTest?e&&!!t:!1},selectedPreferencesOnProfile(){return{craft:this.profile[40],language:this.profile[67]}},experienceLevelOnProfile(){return this.profile[42].value?this.profile[42].value:null},submitProfileData(){const{employeeData:e}=U(),{hiringCenter:t}=G(),r={},s=[3];for(const[i,n]of Object.entries(this.profile))n.value!==void 0&&n.value!==null&&(Object.assign(r,{[i]:{value:n.value}}),s.push(parseInt(i)));return r[6]===void 0?(Object.assign(r,{6:{value:e[3]}}),s.push(6)):r[6].value=e[3],r[15]===void 0?(Object.assign(r,{15:{value:t?t[3]:""}}),s.push(15)):r[15].value=t?t[3]:"",r[77]&&delete r[77],s.push(77),{to:"bp3gci48x",data:[r],fieldsToReturn:s}},submitDisabilityData(){const{employeeData:e}=U(),{hiringCenter:t}=G(),r={},s=[];for(const[i,n]of Object.entries(this.voluntaryForms.disability))n.value!==void 0&&n.value!==null&&(Object.assign(r,{[i]:{value:n.value}}),s.push(parseInt(i)));return r[17]===void 0?(Object.assign(r,{17:{value:t?t[3]:""}}),s.push(17)):r[17].value=t?t[3]:"",this.onJobBoard?r[24]===void 0?(Object.assign(r,{24:{value:this.jobBoardApplication[3]?this.jobBoardApplication[3]:""}}),s.push(24)):r[24].value=this.jobBoardApplication[3]?this.jobBoardApplication[3]:"":r[9]===void 0?(Object.assign(r,{9:{value:this.profile[3]?this.profile[3].value:""}}),s.push(9)):r[9].value=this.profile[3]?this.profile[3].value:"",r[22]===void 0?(Object.assign(r,{22:{value:e[3]?e[3]:""}}),s.push(22)):r[22].value=e[3]?e[3]:"",{to:"bqaiuve9q",data:[r],fieldsToReturn:s}},submitAffirmativeData(){const{employeeData:e}=U(),{hiringCenter:t}=G(),r={},s=[];for(const[i,n]of Object.entries(this.voluntaryForms.affirmative))n.value!==void 0&&n.value!==null&&(Object.assign(r,{[i]:{value:n.value}}),s.push(parseInt(i)));return r[12]===void 0?(Object.assign(r,{12:{value:t?t[3]:""}}),s.push(12)):r[12].value=t?t[3]:"",this.onJobBoard?r[38]===void 0?(Object.assign(r,{38:{value:this.jobBoardApplication[3]?this.jobBoardApplication[3]:""}}),s.push(38)):r[38].value=this.jobBoardApplication[3]?this.jobBoardApplication[3]:"":r[6]===void 0?(Object.assign(r,{6:{value:this.profile[3]?this.profile[3].value:""}}),s.push(6)):r[6].value=this.profile[3]?this.profile[3].value:"",r[35]===void 0?(Object.assign(r,{35:{value:e[3]?e[3]:""}}),s.push(35)):r[35].value=e[3]?e[3]:"",s.push(33),s.push(17),{to:"bp3gcmump",data:[r],fieldsToReturn:s}},async submitVeteransData(){const{employeeData:e}=U(),{hiringCenter:t}=G(),r={},s=[];if(this.vetsForm){for(const[i,n]of Object.entries(this.voluntaryForms.veterans))n.value!==void 0&&n.value!==null?(Object.assign(r,{[i]:{value:n.value}}),s.push(parseInt(i))):this.vetsForm[i]&&this.vetsForm[i].value&&(Object.assign(r,{[i]:{value:this.vetsForm[i].value}}),s.push(parseInt(i)));return r[10]===void 0?(Object.assign(r,{10:{value:t?t[3]:""}}),s.push(10)):r[10].value=t?t[3]:"",this.onJobBoard?r[20]===void 0?(Object.assign(r,{20:{value:this.jobBoardApplication[3]?this.jobBoardApplication[3]:""}}),s.push(20)):r[20].value=this.jobBoardApplication[3]?this.jobBoardApplication[3]:"":r[6]===void 0?(Object.assign(r,{6:{value:this.profile[3]?this.profile[3].value:""}}),s.push(6)):r[6].value=this.profile[3]?this.profile[3].value:"",r[19]===void 0?(Object.assign(r,{19:{value:e[3]?e[3]:""}}),s.push(19)):r[19].value=e[3]?e[3]:"",s.includes(3)||s.push(3),{to:"bqamq3kr4",data:[r],fieldsToReturn:s}}else return{}},vetsFormSelections(){const e=this.vetsSelections?this.vetsSelections:[],t=[];return e.length>0&&e.forEach(r=>{const s={};for(const[i,n]of Object.entries(r))n.value!==void 0&&n.value!==null&&Object.assign(s,{[i]:{value:n.value}});s[6]===void 0?Object.assign(s,{6:{value:this.voluntaryForms.veterans[3]?this.voluntaryForms.veterans[3].value:""}}):s[6].value=this.voluntaryForms.veterans[3]?this.voluntaryForms.veterans[3].value:"",this.onJobBoard||(s[10]===void 0?Object.assign(s,{10:{value:this.profile[19]?this.profile[19].value:""}}):s[10].value=this.profile[19]?this.profile[19].value:""),t.push(s)}),{to:"bqamrfpj9",data:t,fieldsToReturn:[1,2,3,8,9]}},startLevelForTest:e=>e.levelStartTest,craftId:e=>e.craft},actions:{async submitProfileToQB(){const{updateEmployeeData:e}=U(),{onKiosk:t}=H(),{testForCraft:r}=Y(),{hiringCenter:s}=G();if(this.onJobBoard)return(await e({fields:{16:{value:s[3]},20:{value:this.profile[23].value===void 0?"":this.profile[23].value},21:{value:this.profile[24].value===void 0?"":this.profile[24].value},22:{value:this.profile[25].value===void 0?"":this.profile[25].value},23:{value:this.profile[26].value===void 0?"":this.profile[26].value},41:{value:this.profile[32].value===void 0?"":this.profile[32].value},42:{value:this.profile[33].value===void 0?"":this.profile[33].value},43:{value:this.profile[34].value===void 0?"":this.profile[34].value},44:{value:this.profile[35].value===void 0?"":this.profile[35].value},45:{value:this.profile[36].value===void 0?"":this.profile[36].value},46:{value:this.profile[37].value===void 0?"":this.profile[37].value},51:{value:this.profile[40].value===void 0?"":this.profile[40].value},53:{value:this.profile[42].value===void 0?"":this.profile[42].value},55:{value:this.profile[44].value===void 0?"":this.profile[44].value},57:{value:this.profile[46].value===void 0?"":this.profile[46].value}}})).needsTest&&r?(e({fields:{122:{value:7}}}),this.storeLocalForage(),this.submitProfileData):(this.storeLocalForage(),this.submitProfileData);{const{data:i}=await A.upsertRecordsXML(this.submitProfileData);if(i[0]){const n=i[0];!this.profile[3]||this.profile[3].value===void 0?Object.assign(this.profile,{3:{value:i[0][3]}}):this.profile[3].value=i[0][3],!this.profile[77]||this.profile[77].value===void 0?Object.assign(this.profile,{77:{value:i[0][77]}}):this.profile[77].value=i[0][77];const a={16:{value:s[3]},20:{value:n[23]===void 0?"":n[23]},21:{value:n[24]===void 0?"":n[24]},22:{value:n[25]===void 0?"":n[25]},23:{value:n[26]===void 0?"":n[26]},41:{value:n[32]===void 0?"":n[32]},42:{value:n[33]===void 0?"":n[33]},43:{value:n[34]===void 0?"":n[34]},44:{value:n[35]===void 0?"":n[35]},45:{value:n[36]===void 0?"":n[36]},46:{value:n[37]===void 0?"":n[37]},51:{value:n[40]===void 0?"":n[40]},53:{value:n[42]===void 0?"":n[42]},55:{value:n[44]===void 0?"":n[44]},57:{value:n[46]===void 0?"":n[46]}},o=await e({fields:a});return o[119]!==void 0&&(this.profile[77].value=o[119]==="Yes"?"No":"Yes"),this.storeLocalForage(),o.needsTest&&r&&!t&&await e({fields:{122:{value:7}}}),n}else throw"Something went wrong"}},async submitDisabilityToQB(){const{updateEmployeeFromApp:e}=U(),{data:t}=await A.upsertRecordsXML(this.submitDisabilityData);if(t[0])Object.assign(this.voluntaryForms.disability,{3:{value:t[0][3]}}),e({action:"push",values:this.voluntaryForms.disability,key:"disability"});else throw"Something went wrong";return this.submitDisabilityData},async submitAffirmativeToQB(){const{updateEmployeeData:e}=U(),{data:t}=await A.upsertRecordsXML(this.submitAffirmativeData);if(t[0]){Object.assign(this.voluntaryForms.affirmative,{3:{value:t[0][3]}});const r={406:{value:t[0][33]},380:{value:t[0][17]}};e({fields:r})}else throw"Something went wrong";return this.submitAffirmativeData},async submitVeteransToQB(){const{updateEmployeeFromApp:e}=U(),t=await this.submitVeteransData,{data:r}=await A.upsertRecordsXML(t);if(r[0]){if(this.voluntaryForms.veterans[3]===void 0?Object.assign(this.voluntaryForms.veterans,{3:{value:r[0][3]}}):this.voluntaryForms.veterans[3].value=r[0][3],(await A.upsertRecordsXML(this.vetsFormSelections)).data.length>0)return Object.assign(this.voluntaryForms.veterans,{selections:r}),e({action:"push",values:this.voluntaryForms.veterans,key:"vets"}),!0;throw"Cannot save vets form selections"}else throw"Cannot save veterans"},async updateProfile(e){if(this.completed=e.completed===void 0?!1:e.completed,this.step=e.next?e.next:0,e.values&&Object.entries(e.values).length>0)for(const[t,r]of Object.entries(e.values))r&&(this.profile[t]!==void 0?(this.profile[t].value=r.value?r.value:r||"",this.profile[t].label=r.label?r.label:""):Object.assign(this.profile,{[t]:{value:!r.value||r.value===void 0?!r||r===void 0?"":r:r.value,label:!r.label||r.label===void 0?"":r.label}}));return this.storeLocalForage(),this.submitProfileData},async updateVoluntaryForm(e){this.step=e.next?e.next:0;const t=this.voluntaryForms[e.type];if(e.values&&Object.entries(e.values).length>0){for(const[r,s]of Object.entries(e.values))t[r]!==void 0?Array.isArray(t[r].value)?s.value&&Array.isArray(s.value)?s.value.forEach(i=>{t[r].value.push(i)}):s&&Array.isArray(s)?s.forEach(i=>{t[r].value.push(i)}):t[r].value.push(s.value?s.value:s||""):(t[r].value=s.value?s.value:s||"",t[r].label=s.label?s.label:""):Object.assign(t,{[r]:{value:s.value?s.value:s||"",label:s.label?s.label:""}});return!0}else throw"Missing data"},async updateVetsForm({next:e,values:t,selections:r}){return this.step=e||0,this.vetsForm=t,this.vetsSelections=r,!0},async updateVetsSelections(e){this.vetsSelections=e},updateStep(e){this.step=e},dataLoaded(e){this.loading=e===void 0?!1:e},toggleLoader(e){this.loading=e},setLevelStartTest(e){this.levelStartTest=e},setCraft(e){this.craft=e},resetProfile(){this.profile={6:{field:"Related Employee"},15:{field:"Related Hiring Center"},19:{field:"Related Job"},23:{field:"First"},24:{field:"Middle"},25:{field:"Last"},26:{field:"Suffix"},27:{field:"Phone"},28:{field:"Email"},32:{field:"Street1"},33:{field:"Street2"},34:{field:"City"},35:{field:"State"},36:{field:"Zip"},37:{field:"Country"},38:{field:"Preferred Name"},40:{field:"Related Craft"},42:{field:"Related Experience Option"},44:{field:"Related Employment Status"},46:{field:"Related Contact Method"},49:{field:"Related Kiosk Session"},67:{field:"Related Available Language"}},this.step=0,this.voluntaryForms={affirmative:{6:{field:"Related Kiosk Profile"},12:{field:"Related Hiring Center"},16:{field:"Related Affirmative Option (Gender)"},18:{field:"Related Job"},20:{field:"Related Affirmative Option (Ethnicity)"},22:{field:"Related Affirmative Option (Race)"},25:{field:"Related Kiosk Session"},24:{field:"Completion Timestamp"}},veterans:{6:{field:"Related Kiosk Profile"},8:{field:"Related Veteran Status Form"},10:{field:"Related Hiring Center"},16:{field:"Initials"},18:{field:"Related Kiosk Session"},17:{field:"Completion Timestamp"}},disability:{6:{field:"Completion Timestamp"},7:{field:"Name Entered"},8:{field:"Date Entered"},9:{field:"Related Kiosk Profile"},10:{field:"Related Disability Form"},15:{field:"Related Disability Form Option"},17:{field:"Related Hiring Center"},19:{field:"Related Job"},21:{field:"Related Kiosk Session"}},children:{vets:{field:"Veteran Form Selections",value:[]}}}},setProfile(e,t){this.profile=e,t&&x.setItem(k.storageProfile,e)},setProfileStep(e,t){this.step=e,t&&x.setItem(k.storageProfileStep,e)},setVoluntaryForms(e,t){this.voluntaryForms=e,t&&x.setItem(k.storageProfileVoluntaryForms,e)},storeLocalForage(){const e=JSON.parse(JSON.stringify(this.profile)),t=JSON.parse(JSON.stringify(this.voluntaryForms));x.setItem(k.storageProfile,e),x.setItem(k.storageProfileStep,this.step),x.setItem(k.storageProfileVoluntaryForms,t)}}}),U=ee("employee",{state:()=>({devEmployee:{3:46},employee:{},emergencyContacts:[],history:[],training:[{3:2,6:"Security Passport",7:1,8:"Identification Credentials",11:"",20:"IDs",21:1},{3:1,6:"TWIC Card",7:1,8:"Identification Credentials",11:"",20:"IDs",21:1}],jobBoardApplications:[]}),getters:{noTasks(){return!this.checkInActive&&this.employeeData.complete&&this.voluntaryFormsComplete&&!this.showInProcess&&!this.employeeData.needsTest},employeeActive(){return this.employeeData[408]==="Active"},checkInActive(){const{checkedIn:e,checkInData:t}=H();return this.showInProcess||this.employeeData[79]===6||t[36]?!1:!!(this.employeeData[408]==="Active"&&e)},voluntaryFormsSubmitted(){return this.employee[3]?{disability:this.employee.disability.length>0?this.employee.disability.sort((e,t)=>e[3]>t[3]?-1:1)[0]:null,affirmative:this.employee.affirmative.length>0?this.employee.affirmative.sort((e,t)=>e[3]>t[3]?-1:1)[0]:null,vets:this.employee.vets.length>0?this.employee.vets.filter(e=>e.selections.length>0).sort((e,t)=>e[3]>t[3]?-1:1)[0]:null}:null},voluntaryFormsComplete(){return!(!this.voluntaryFormsSubmitted||!this.voluntaryFormsSubmitted.disability||!this.voluntaryFormsSubmitted.affirmative||!this.voluntaryFormsSubmitted.vets)},applicationsSubmitted:e=>e.jobBoardApplications,showInProcess(){return this.employee[519]?this.employee[519]===1:!1},showEmployment(){return this.employee[408]?this.employee[408]==="Active":!1},employeeData:e=>e.employee,employeeAvailable(){return!!this.employee[3]},offerData(){return this.employee[1516]&&!Array.isArray(this.employee[1516].offer)?this.employee[1516].offer:null},processingData(){return this.employee[1516]&&!Array.isArray(this.employee[1516].processing)?this.employee[1516].processing:null},savedEmergencyContacts(){return this.emergencyContacts},savedHistory(){const e=[];return this.employee[513]&&this.employee[513].forEach(t=>{const r=t[12]&&t[12].includes("-")?t[12].split("-"):null,s=t[13]&&t[13].includes("-")?t[13].split("-"):null,i=r?J.buildDate({year:r[2],date:r[1],month:r[0]}):t[12],n=s?J.buildDate({year:s[2],date:s[1],month:s[0]}):t[13];t[12]=J.formatDate(i,"MM/DD/YYYY"),t[13]=J.formatDate(n,"MM/DD/YYYY"),Object.assign(t,{company:{value:t[6],label:t[7]}}),Object.assign(t,{craft:{value:t[15],label:t[16]}}),e.push(t)}),e},savedTraining(){return this.training},getEmployee:e=>e.employee,socialRequired:e=>{const{getCountry:t}=H();return t==="CA"?!e.employee[3]||e.employee[564]===""||!e.employee[564]:!e.employee[3]||e.employee[109]===""||!e.employee[109]}},actions:{addMatrixToEmployee({data:e}){Object.assign(this.employee,{[e.key]:e.value})},async updateEmployeeData({fields:e}){if(!e)throw"No Fields Provided";e[3]===void 0&&Object.assign(e,{3:{value:this.employeeData[3]}});const{data:t}=await A.upsertRecordsXML({to:"bp3gb7ng2",fieldsToReturn:[500],data:[e],formatObject:500}),r=t[0][500];return this.setEmployee(r,!0),r},setEmployee(e,t){const{setCraft:r,setLevelStartTest:s}=Ae();e[507]&&(this.emergencyContacts=e[507]),e.craft&&r(e.craft),e[53]&&s(e[53]),this.employee=e,t&&x.setItem(k.storageEmployeeKeyName,e)},async removeContact(e){await A.upsertRecordsXML({to:"bruxz7dsh",data:[{3:{value:e},17:{value:!0},18:{value:new Date}}],fieldsToReturn:[3,14],formatObject:14}),this.employee[507]=this.employee[507].filter(t=>t[3]!==e)},async addContact(e){const{data:t}=await A.upsertRecordsXML({to:"bruxz7dsh",data:[{6:{value:e[6]},7:{value:e[7]},8:{value:e[16]},10:{value:this.employee[3]},11:{value:e[11]}}],fieldsToReturn:[3,14],formatObject:14});if(!t.length>0)throw"Cannot save contact";e=t[0][14],this.employee[507].push(e)},async updateContact(e){const{data:t}=await A.upsertRecordsXML({to:"bruxz7dsh",data:[{3:{value:e[3]},6:{value:e[6]},7:{value:e[7]},8:{value:e[16]},11:{value:e[11]}}],fieldsToReturn:[3,14],formatObject:14});this.employee[507].forEach((r,s)=>{r[3]===e[3]&&(this.employee[507][s]=t[0][14])})},async addHistory(e){const t={6:{value:e.company.value},10:{value:e[10]},11:{value:e[11]},12:{value:e[12]},13:{value:e[13]},15:{value:e.craft.value},34:{value:this.employeeData[3]}};this.employeeData[234]>0&&Object.assign(t,{8:{value:this.employeeData[234]}});const{data:r}=await A.upsertRecordsXML({to:"bpzpy6pj7",data:[t],fieldsToReturn:[3]});if(!r.length>0)throw"Cannot save experience";e[3]=r[0][3],e[12]=J.formatDate(J.addToDate(e[12],{days:1}),"MM/DD/YYYY"),e[13]=J.formatDate(J.addToDate(e[13],{days:1}),"MM/DD/YYYY"),this.employee[513]&&Array.isArray(this.employee[513])?this.employee[513].push(e):this.employee[513]=[e]},async updateHistory(e){const{data:t}=await A.upsertRecordsXML({to:"bpzpy6pj7",data:[{3:{value:e[3]},6:{value:e.company.value},10:{value:e[10]},11:{value:e[11]},12:{value:e[12]},13:{value:e[13]},15:{value:e.craft.value},34:{value:this.employeeData[3]}}],fieldsToReturn:[3]});if(!t.length>0)throw"Cannot save history";e[12]=J.formatDate(J.addToDate(e[12],{days:1}),"MM/DD/YYYY"),e[13]=J.formatDate(J.addToDate(e[13],{days:1}),"MM/DD/YYYY"),this.employee[513].forEach((r,s)=>{r[3]===e[3]&&(this.employee[513][s]=e)})},async removeHistory(e){const{data:t}=await A.upsertRecordsXML({to:"bpzpy6pj7",data:[{3:{value:e},32:{value:!0},33:{value:new Date}}],fieldsToReturn:[3]});if(!t.length>0)throw"Cannot save history";this.employee[513]=this.employee[513].filter(r=>r[3]!==t[0][3])},addTraining(e){this.training.push(e)},updateTraining(e){this.training.forEach((t,r)=>{t[3]===e[3]&&(this.training[r]=e)})},removeTraining(e){this.training=this.training.filter(t=>t[3]!==e)},async applyOnBoard(e){const{data:t}=await A.upsertRecordsXML({to:"bsfq6uktu",data:[{6:{value:this.employeeData[3]},8:{value:e[56]},10:{value:e[3]},12:{value:e[61]}}],fieldsToReturn:[19],formatObject:19});if(t[0])return this.employee[537].push(t[0][19]),t;throw"Cannot apply"},async acceptDeployment(e){const{data:t}=await A.upsertRecordsXML({to:"bsf2qqd63",data:[{8:{value:this.employeeData[3]},9:{value:e},6:{value:new Date},7:{value:"accept"}}],fieldsToReturn:[11],formatObject:11});if(t[0])return this.employee[1516].processing=t[0][11],t;throw"Cannot accept"},updateEmployeeFromApp({action:e,values:t,key:r}){e==="push"?this.employee[r]===void 0?Object.assign(this.employee,{[r]:t}):this.employee[r].push(t):e==="replace"&&(this.employee[r]===void 0?Object.assign(this.employee,{[r]:t}):this.employee[r]=t)}}});class nl{formatName(t){if(typeof t!="string")return"";const r=t.trim().split(" ");if(r.length===1){if(t=t.toLowerCase(),t==="de"||t==="dela"||t==="del"||t==="las"||t==="y"||t==="la")return t;try{t=t.charAt(0).toUpperCase()+t.slice(1)}catch{t=t.charAt(0)+t.slice(1)}if(t.startsWith("Mc"))try{t=t.slice(0,2)+t.charAt(2).toUpperCase()+t.slice(3)}catch{t=t.slice(0,2)+t.charAt(2)+t.slice(3)}if(t.includes("'")){const s=t.indexOf("'");try{t=t.slice(0,s+1)+t.charAt(s+1).toUpperCase()+t.slice(s+2)}catch{t=t.slice(0,s+1)+t.charAt(s+1)+(t.slice(s+2)?t.slice(s+2):"")}}if(t.includes("-")){const s=t.indexOf("-");try{t=t.slice(0,s+1)+t.charAt(s+1).toUpperCase()+t.slice(s+2)}catch{t=t.slice(0,s+1)+t.charAt(s+1)+(t.slice(s+2)?t.slice(s+2):"")}}return t}else{for(let s=r.length-1;s>=0;s--)if(r[s]===""){r.splice(s);continue}else{try{r[s]=r[s].toLowerCase()}catch{return r[s]}if(r[s]==="de"||r[s]==="dela"||r[s]==="del"||r[s]==="la"||r[s]==="las"||r[s]==="y")if(s===0&&r[s]==="la"){try{r[s]=r[s].charAt(0).toUpperCase()+r[s].slice(1)}catch{r[s]=r[s].charAt(0)+r[s].slice(1)}continue}else continue;else{try{r[s]=r[s].charAt(0).toUpperCase()+r[s].slice(1)}catch{r[s]=r[s].charAt(0)+r[s].slice(1)}if(r[s].startsWith("Mc"))try{r[s]=r[s].slice(0,2)+r[s][2].toUpperCase()+r[s].slice(3)}catch{r[s]=r[s].slice(0,2)+r[s][2]+r[s].slice(3)}if(r[s].includes("'")){const i=r[s].indexOf("'");try{r[s]=r[s].slice(0,i+1)+r[s][i+1].toUpperCase()+(r[s].slice(i+2)?r[s].slice(i+2):"")}catch{r[s]=r[s].slice(0,i+1)+(r[s][i+1]?r[s][i+1]:"")+(r[s].slice(i+2)?r[s].slice(i+2):"")}}if(r[s].includes("-")){const i=r[s].indexOf("-");try{r[s]=r[s].slice(0,i+1)+r[s][i+1].toUpperCase()+r[s].slice(i+2)}catch{r[s]=r[s].slice(0,i+1)+(r[s][i+1]?r[s][i+1]:"")+(r[s].slice(i+2)?r[s].slice(i+2):"")}}}}return r.join(" ")}}calculateDuration(t){return J.getDateDiff(t.end,t.start,t.unit)}formatPhone(t){const s=(""+t).replace(/\D/g,"").match(/^(\d{3})(\d{3})(\d{4})$/);return s?`(${s[1]}) ${s[2]}-${s[3]}`:null}async converter(t){let r;return t&&Array.isArray(t)?(r=[],t.forEach(s=>{const i=JSON.parse(s);r.push(i)})):r=JSON.parse(t),r}async decode(t){if(t){const r=document.createElement("div");return r.innerHTML=t,r.childNodes[0].nodeValue}else return""}fileToBase64(t){return new Promise(r=>{const s=new FileReader;s.onload=function(i){r(i.target.result.split(",")[1])},s.readAsDataURL(t)})}}function al(){return{helpers:new nl}}const{helpers:ms}=al(),ol=25,hy=ee("assessment",{state:()=>({step:0,loading:!0,tools:[],testData:{allQuestions:[],selectedQuestions:[],completedQuestions:[],nextQuestions:null,testStatus:"In Progress",currentScope:0,loadIteration:0,qb:{testRecord:{3:{field:"Record ID#",value:24712},6:{field:"Related Kiosk Profile"},13:{field:"Related Hiring Center"},15:{field:"Related Employee"},17:{field:"Related Craft"},23:{field:"Related Available Language"},34:{field:"Test Completion Timestamp"},37:{field:"Test Status"},testQuestions:[{6:{field:"Related Test"},7:{field:"Related All Test Question"},11:{field:"Status"},questionResponse:[{6:{field:"Related Test Question"},8:{field:"Related Question Alternative"}}]}]}}},testId:null,qb:null,questions:[],answers:[],toolListId:null,toolChecklists:[]}),getters:{questionsLoaded(){return this.testData.allQuestions.length>0},nextQuestions(){return this.testData.nextQuestions?this.testData.nextQuestions:null},completedOnIteration(){return this.testData.completedQuestions.filter(e=>e.iteration===this.testData.loadIteration)},algo(){const e=this.testData.completedQuestions.filter(t=>t.selection[14]===1&&t.iteration===this.testData.loadIteration);return e!==void 0?e:[]},ratio(){return isNaN(this.algo.length/this.completedOnIteration.length)?0:(this.algo.length/this.completedOnIteration.length).toFixed(2)},nextScope(){return this.completedOnIteration.length>0?this.ratio>.6?this.testData.currentScope<6?this.testData.currentScope+1:this.testData.currentScope:this.ratio===.6?this.testData.currentScope:this.testData.currentScope>2?this.testData.currentScope-1:this.testData.currentScope:this.testData.currentScope},nextIteration(){return this.testData.loadIteration+1},timeToStop(){const e=this.testData.completedQuestions.filter(r=>r[23]>this.testData.currentScope).length,t=this.testData.completedQuestions.filter(r=>r[23]<this.testData.currentScope).length;return e>0&&t>0&&this.testData.completedQuestions.length>=ol},toolChecklistData(){const{testForCraft:e}=Y(),{hiringCenter:t}=G(),{employeeData:r}=U(),s={6:{value:this.testId?this.testId:0},11:{value:t?t[3]:0},15:{value:r[3]?r[3]:0},20:{value:e[15]?e[15]:0},22:{value:e[16]?e[16]:0}};return{to:"bp3gcpk2w",data:[s],fieldsToReturn:[3]}},toolsData(){const e=[];return this.tools.length>0&&this.tools.forEach(t=>{const r={6:{value:this.toolListId?this.toolListId:0},7:{value:t.value}};e.push(r)}),{to:"bp928wac2",data:e,fieldsToReturn:[3]}},availableToolChecklists:e=>e.toolChecklists,toolsForCraft(){const{testForCraft:e}=Y();if(e){const t=this.availableToolChecklists.find(r=>r[6]===e[3]);return t!==void 0?t[11]:[]}else return[]},toolListInstructions(){const{testForCraft:e}=Y();if(e){const t=this.availableToolChecklists.find(r=>r[6]===e[3]);return t!==void 0?t[13]:null}else return null},toolListName(){const{testForCraft:e}=Y();if(e){const t=this.availableToolChecklists.find(r=>r[6]===e[3]);return t!==void 0?t[8]:null}else return null}},actions:{async startAssessment(){const{profile:e}=Ae(),{testForCraft:t}=Y(),{hiringCenter:r}=G(),{employeeData:s,updateEmployeeData:i}=U(),n={13:{value:r[3]},15:{value:s[3]},17:{value:t[15]},23:{value:t[16]},51:{value:t[3]}};e[3]!==void 0&&Object.assign(n,{6:{value:e[3].value}});const{data:a}=await A.upsertRecordsXML({to:"bp3gckirf",data:[n],fieldsToReturn:[3]});if(a[0])return this.testId=a[0][3],i({fields:{122:{value:8}}}),a[0];throw"Something went wrong"},async finishAssessment(){const{metadata:e}=await A.upsertRecordsXML({to:"bp3gckirf",data:[{3:{value:this.testId},34:{value:new Date},37:{value:"Complete"}}],mergeFieldId:3,fieldsToReturn:[3]});if(e.updatedRecordIds[0]){const{data:t}=await A.upsertRecordsXML({to:"bp9np6ckn",data:this.questions,fieldsToReturn:[3,7]});if(!t.length>0)throw"Cannot save questions";{const r=[];t.forEach(i=>{const n=this.answers.findIndex(a=>a.link===i[7]);if(n>-1){const a={6:{value:i[3]},8:{value:this.answers[n][8]}};r.push(a)}});const{metadata:s}=await A.upsertRecordsXML({to:"bp9np9vk7",data:r,fieldsToReturn:[3]});if(!s.createdRecordIds.length===this.answers.length)throw"Something went wrong";return{success:!0}}}else throw"Cannot finish assessment"},async startToolChecklist(){const{data:e}=await A.upsertRecordsXML(this.toolChecklistData);if(e[0])return this.toolListId=e[0][3],e[0];throw"Cannot start checklist"},async finishToolChecklist(){const{metadata:e}=await A.upsertRecordsXML({to:"bp3gcpk2w",data:[{3:{value:this.toolListId},18:{value:new Date},17:{value:"Complete"}}],mergeFieldId:3,fieldsToReturn:[3]});if(e.updatedRecordIds[0]){const{data:t}=await A.upsertRecordsXML(this.toolsData);if(t.length>0)return!0;throw"Cannot save tools"}else throw"Cannot finish tool checklist"},async submitToQB(){const{profile:e}=Ae(),{testForCraft:t}=Y(),{hiringCenter:r}=G(),{devEmployee:s}=U();this.testData.qb.testRecord[6].value=e[3].value,this.testData.qb.testRecord[13].value=r[3],this.testData.qb.testRecord[15].value=s[3],this.testData.qb.testRecord[17].value=t[15],this.testData.qb.testRecord[23].value=t[16],this.testData.qb.testRecord[34].value=Date.now(),this.testData.qb.testRecord[37].value="Complete";const i=[];return this.testData.completedQuestions.forEach(n=>{const a={6:{value:this.testData.qb.testRecord[3].value},7:{value:n[8]},11:{value:"Complete"},questionResponse:[{6:{value:0},8:{value:n.selection[3]}}]};i.push(a)}),this.testData.qb.testRecord.testQuestions=i,this.testData.qb.testRecord},async updateAssessment(e){return this.step=e.next,e.type==="tools"&&(this.tools=e.values),!0},updateStep(e){this.step=e},dataLoaded(){this.loading=!1},async getAllQuestions(){const{testForCraft:e}=Y();if(this.questionsLoaded)return!0;if(e)try{const{data:t}=await A.fetchFromStructureApp({fields:[{6:{value:"bqamed7sr"},7:{value:"Table Query"},8:{value:`{'6'.EX.'${e[9]}'}`},9:{value:1},14:{value:17}}]});if(t)return t.forEach(async r=>{r[20]&&(r.hasImage=!0,r.imageData={src:r[22],alt:r[21]}),r[19].forEach(s=>{s.value=s[3],s.label=s[6]})}),this.testData.allQuestions=t,!0;throw"Something went wrong"}catch(t){console.log(t);const{data:r}=await A.doQuery({from:"bqamed7sr",where:`{'6'.EX.'${e[9]}'}`,select:[3,6,8,9,10,11,12,13,14,18,19,20,21,22,23,24],sortBy:[{fieldId:11,order:"ASC"}]});if(r)return r.forEach(async s=>{s[20]==="Yes"&&(s.hasImage=!0,s.imageData={src:s[22],alt:s[21]}),s[19]=await ms.converter(s[19]),s[24]=await ms.converter(s[24]),s[19].forEach(i=>{i.value=i[3],i.label=i[6]})}),this.testData.allQuestions=r,!0;throw"Something went wrong"}else throw"No test for craft"},async loadQuestionGroup(e,t){if(e!==void 0){const r=this.testData.allQuestions.filter(s=>s[23]===e);if(r.length>0)return r.length>5&&(r.length=5),r.forEach(s=>{s.response=null;const i=this.testData.allQuestions.findIndex(n=>n[3]===s[3]);i>-1&&this.testData.allQuestions.splice(i,1)}),this.testData.nextQuestions=r,this.testData.currentScope=e,this.testData.loadIteration=t,r;throw"There are no questions"}},async completeQuestion(e){const t=e.response,r=e[19].find(n=>n.value===t);if(r!==void 0)e.selection=r;else throw"No selection";e.iteration=this.testData.loadIteration,e.storedData={};const s={6:{value:this.testId},7:{value:e[8]},11:{value:"Complete"}};this.questions.push(s);const i={6:null,8:e.selection[3],link:e[8]};return this.answers.push(i),this.testData.completedQuestions.push(e),this.testData.nextQuestions=this.testData.nextQuestions.filter(n=>n[3]!==e[3]),{data:{nextQuestions:this.timeToStop?[]:this.testData.nextQuestions,scope:this.nextScope,iteration:this.nextIteration}}},async fetchCraftToolsFromStorage(){const e=await x.getItem(k.storageToolCheckList);if(e){for(let t=0;t<e.length;t++){const r=Object.keys(e[t]);for(let s=0;s<r.length;s++){typeof e[t][r[s]]=="object"&&e[t][r[s]]!==null&&Object.prototype.hasOwnProperty.call(e[t][r[s]],"$d")&&(e[t][r[s]]=p(e[t][r[s]].$d));try{e[t][r[s]].endsWith(".000Z")&&(e[t][r[s]]=p(e[t][r[s]]))}catch{}}}this.setCraftTools(e,!1)}else return!1},async fetchCraftTools(e){await this.fetchCraftToolsFromStorage();const t=[{6:{value:"bqamh3rpi"},7:{value:"Table Query"},8:{value:"{'10'.EX.'Active'}"},9:{value:1},14:{value:12}}];if(this.toolChecklists.length===0||e){const{data:r}=await A.fetchFromStructureApp({fields:t});return this.setCraftTools(r,!0),r}else return this.toolChecklists},setCraftTools(e,t){this.toolChecklists=e,t&&x.setItem(k.storageToolCheckList,e)}}}),se=ee("application",{state:()=>({formOptions:{crafts:[],experience:[],companies:[],credentials:[],relationships:[],employment:[],contactMethods:[]},voluntaryFormOptions:{affirmative:[],veterans:[],disability:{pages:[],options:[],form:{}}},formOptionsLoading:!1,voluntaryFormsLoading:!1,evergreenJobs:[]}),getters:{craftOptions:e=>e.formOptions.crafts,experienceOptions:e=>e.formOptions.experience,companyOptions:e=>e.formOptions.companies,credentialOptions:e=>e.formOptions.credentials,relationshipOptions:e=>e.formOptions.relationships,employmentOptions:e=>e.formOptions.employment,contactMethodOptions:e=>e.formOptions.contactMethods,affirmativeOptions:e=>e.voluntaryFormOptions.affirmative,veteranOptions:e=>e.voluntaryFormOptions.veterans,disabilityOptions:e=>e.voluntaryFormOptions.disability.options,disabilityPages:e=>e.voluntaryFormOptions.disability.pages,disabilityForm:e=>e.voluntaryFormOptions.disability.form,evergreenJobOptions:e=>e.evergreenJobs,formOptionsLoadingState:e=>e.formOptionsLoading,voluntaryLoadingState:e=>e.voluntaryFormsLoading,credentialGroups(){const e=[];return this.formOptions.credentials.forEach(t=>{const r={value:t[7],label:t[8],acronym:t[20],number:t[21]};e.find(i=>i.value===r.value)||e.push(r)}),e.sort((t,r)=>t.number>r.number?1:t.number<r.number?-1:0)},compiledCredentials(){const e=[];return this.credentialGroups.forEach(t=>{const r=t.value;t.list=[],this.formOptions.credentials.forEach(s=>{s[7]===r&&t.list.push(s)}),e.push(t)}),e}},actions:{async fetchFormOptions(){this.formOptionsLoading=!0;const e=[this.fetchExperienceOptions(),this.fetchContactMethodOptions(),this.fetchEmploymentOptions(),this.fetchCompanyOptions(),this.fetchCraftOptions(),this.fetchRelationshipOptions(),this.fetchEverGreenJobs()],t=await Promise.allSettled(e);return this.formOptionsLoading=!1,t},async fetchVoluntaryForms(){this.voluntaryFormsLoading=!0;const e=[this.fetchAffirmativeOptions(!0),this.fetchVeteranStatusOptions(),this.fetchDisabilityPages()],t=await Promise.allSettled(e);return this.voluntaryFormsLoading=!1,t},async fetchExperienceOptions(e){const t=[{7:{value:"Experience Options"},9:{value:1},14:{value:44}}];if(this.formOptions.experience.length===0||e){const{data:r}=await A.fetchFromRecruitingApp({fields:t});return this.setExperienceOptions(r,!0),r}else return this.formOptions.experience},setExperienceOptions(e,t){this.formOptions.experience=e,t&&x.setItem(k.storageExperienceOptions,e)},async fetchContactMethodOptions(e){const t=[{7:{value:"Contact Methods"},9:{value:1},14:{value:15}}];if(this.formOptions.contactMethods.length===0||e){const{data:r}=await A.fetchFromRecruitingApp({fields:t});return this.setContactMethods(r,!0),r}else return this.formOptions.contactMethods},setContactMethods(e,t){this.formOptions.contactMethods=e,t&&x.setItem(k.storageContactMethods,e)},async fetchEmploymentOptions(e){const t=[{7:{value:"Employment Options"},9:{value:1},14:{value:15}}];if(this.formOptions.employment.length===0||e){const{data:r}=await A.fetchFromRecruitingApp({fields:t});return this.setEmploymentOptions(r,!0),r}else return this.formOptions.employment},setEmploymentOptions(e,t){this.formOptions.employment=e,t&&x.setItem(k.storageEmploymentOptions,e)},async fetchCompanyOptions(e){const t=[{7:{value:"Company Options"},9:{value:1},14:{value:15}}];if(this.formOptions.companies.length===0||e){const{data:r}=await A.fetchFromStructureApp({fields:t});return this.setCompanyOptions(r,!0),r}else return this.formOptions.companies},setCompanyOptions(e,t){this.formOptions.companies=e,t&&x.setItem(k.storageCompanyOptions,e)},async fetchCraftOptions(e){const t=[{6:{value:"bp2pcb379"},7:{value:"Table Query"},8:{value:"{'12'.EX.'Yes'}"},9:{value:1},14:{value:59}}];if(this.formOptions.crafts.length===0||e){const{data:r}=await A.fetchFromStructureApp({fields:t});return this.setCraftOptions(r,!0),r}else return this.formOptions.crafts},setCraftOptions(e,t){this.formOptions.crafts=e,t&&x.setItem(k.storageCraftOptions,e)},async fetchRelationshipOptions(e){const t=[{6:{value:"brux2ptjd"},7:{value:"Table Query"},8:{value:"{'3'.GT.0}"},9:{value:1},14:{value:15}}];if(this.formOptions.relationships.length===0||e){const{data:r}=await A.fetchFromHiringApp({fields:t});return this.setRelationshipOptions(r,!0),r}else return this.formOptions.relationships},setRelationshipOptions(e,t){this.formOptions.relationships=e,t&&x.setItem(k.storageRelationshipOptions,e)},async fetchCredentialOptions(e){const t=[{6:{value:"bp2cdv2rd"},7:{value:"Table Query"},8:{value:"{'3'.GT.0}"},9:{value:1},14:{value:22}}];if(this.formOptions.credentials.length===0||e){const{data:r}=await A.fetchFromCredentialsAndTrainingApp({fields:t});return this.setCredentialOptions(r,!0),r}else return this.formOptions.credentials},setCredentialOptions(e,t){this.formOptions.credentials=e,t&&x.setItem(k.storageCredentialOptions,e)},async fetchAffirmativeOptions(e){const t=[{6:{value:"bqamkyebu"},7:{value:"Table Query"},8:{value:"{'7'.EX.'Active'}"},9:{value:1},14:{value:18}}];if(this.voluntaryFormOptions.affirmative.length===0||e){const{data:r}=await A.fetchFromCredentialsAndTrainingApp({fields:t});return r.forEach(s=>{s.val=s.value,s.value=s[3]}),this.setAffirmativeOptions(r,!0),r}else return this.voluntaryFormOptions.affirmative},setAffirmativeOptions(e,t){this.voluntaryFormOptions.affirmative=e,t&&x.setItem(k.storageAffirmativeOptions,e)},async fetchVeteranStatusOptions(e){const t=[{6:{value:"bqampwqag"},7:{value:"Table Query"},8:{value:"{'8'.EX.'Active'}"},9:{value:1},14:{value:14}}];if(this.voluntaryFormOptions.veterans.length===0||e){const{data:r}=await A.fetchFromCredentialsAndTrainingApp({fields:t});return this.setVeteranStatusOptions(r,!0),r}else return this.voluntaryFormOptions.veterans},setVeteranStatusOptions(e,t){this.voluntaryFormOptions.veterans=e,t&&x.setItem(k.storageVeteranStatusOptions,e)},async fetchDisabilityPages(e){const{hasDisability:t,kioskAccount:r}=Y();if(t){const s=[{6:{value:"bp96dpdmp"},7:{value:"Table Query"},8:{value:`{26.EX.${r.voluntaryForms.disability[9]}}AND{'46'.EX.'Active'}`},9:{value:1},14:{value:59}}],i=Object.assign({},r.voluntaryForms.disability);if(i.controlNumber=i[11],i.expiration=i[13],i.formId=i[12],i.rid=i[9],i.title=i[10],i.pages=this.voluntaryFormOptions.disability.pages,this.voluntaryFormOptions.disability.pages.length===0||e){const{data:n}=await A.fetchFromCredentialsAndTrainingApp({fields:s});return this.setDisabilityPages(n,!0),i.pages=n,this.setDisabilityForm(i,!0),n}else return this.voluntaryFormOptions.disability.pages}else return!1},setDisabilityPages(e,t){this.voluntaryFormOptions.disability.pages=e,t&&x.setItem(k.storageDisabilityPages,e)},setDisabilityForm(e,t){this.voluntaryFormOptions.disability.form=e,t&&x.setItem(k.storageDisabilityForm,e)},async fetchEverGreenJobs(e){const t=[{6:{value:"bpzpqe2q5"},7:{value:"Jobs"},8:{value:"{'60'.EX.'Yes'}AND{'71'.XEX.'Pending'}"},9:{value:1},14:{value:94}}];if(this.evergreenJobs.length===0||e){const{data:r}=await A.fetchFromStructureApp({fields:t});return this.setEverGreenJobs(r,!0),r}else return this.evergreenJobs},setEverGreenJobs(e,t){this.evergreenJobs=e,t&&x.setItem(k.storageEverGreenJobs,e)}}});var dt={get dev(){return!1},get baseURL(){return this.dev?this.productionURL:this.productionURL},get token(){return this.dev?this.prodToken:this.prodToken},productionURL:"https://api.disa.com/api",devURL:"https://apisandbox.disa.com/api",tokenType:"Basic",prodToken:"YnJhbmRzYWZ3YXlhcGk6WFhUSkxXNFMy",devToken:"QnJhbmRzYWZ3YXlhcGk6V0RYQ1YxTEM2"};class cl{constructor(t,r){R(this,"axiosIns",null);R(this,"config",F({},dt));R(this,"isAlreadyFetchingAccessToken",!1);R(this,"subscribers",[]);this.axiosIns=t,this.config=F(F({},this.config),r)}onAccessTokenFetched(t){this.subscribers=this.subscribers.filter(r=>r(t))}addSubscriber(t){this.subscribers.push(t)}async status(t,r,s){const i=[],n=[],a=[];let o={};r[10].forEach(w=>{const O=w.trim().replace("  "," ");a.push({name:O,label:`${O} Status`,status:"N/A",dateLabel:`Last ${O} Test`,date:"N/A",type:"DrugScreen"})}),(r[36]||r[10].includes("Background Only"))&&a.push({name:"Background",label:"Background Status",status:"Inactive",dateLabel:"Background Expiration Date",date:"N/A",type:"Background"});const c=[this.justChecking({ownerId:t.ownerId,socialSecurityNumbers:[t.ssn]},s),this.employeeStatus({employeeIdentifiers:{ssn:t.ssn}},s)],l=await Promise.allSettled(c),u=l[0].value.results;let m=[];if(l[1].status==="rejected")if(!t.firstName||!t.lastName||!t.phoneNumber)m=[];else{const w={employeeIdentifiers:{ssn:t.ssn,externalEmployeeId:gs(t.externalEmployeeId)?t.externalEmployeeId:""},firstName:t.firstName,lastName:t.lastName,phoneNumber:t.phoneNumber.replace(/[^0-9]/g,""),emailAddress:gs(t.email)?t.email:""};await this.createEmployee(w,s);try{m=await this.employeeStatus({employeeIdentifiers:{ssn:t.ssn}},s)}catch{m=[]}}else m=l[1].value;return u.length>0&&(o=u[0],o.dateChecked=p(),o.ownerStatus="Inactive",n.push({name:"Last Urine Test",date:p(o.lastUrineTest).isValid()?p(o.lastUrineTest).format("MM/DD/YYYY"):"N/A"}),n.push({name:"Last Hair Test",date:p(o.lastHairTest).isValid()?p(o.lastHairTest).format("MM/DD/YYYY"):"N/A"})),a.forEach(w=>{const O=m.find(C=>{const D=C.policyId.split("-")[1].trim().split("Consortium Policy")[0].trim();return D===w.name?C:(w.name==="DCCHT w/ Randoms"||w.name==="DCCHT w/  Randoms")&&(D==="DCCHT w/Randoms"||D==="DCCHT w/ Randoms")?w:""});w.name==="Background"&&(o.backgrounds==="Active"&&(w.status="Active"),w.date=p(o.backgroundsExpDate).isValid()?p(o.backgroundsExpDate).format("MM/DD/YYYY"):"N/A"),w.name==="NASAP"&&(o.nasapStatus==="Active"&&(w.status="Active"),w.date=p(o.lastNASAPTest).isValid()?p(o.lastNASAPTest).format("MM/DD/YYYY"):"N/A"),w.name.startsWith("DCCHA")&&(w.dateLabel="Last Urine Test",w.date=p(o.lastUrineTest).isValid()?p(o.lastUrineTest).format("MM/DD/YYYY"):"N/A"),w.name.startsWith("DCCHT")&&(w.dateLabel="Last Hair Test",w.date=p(o.lastHairTest).isValid()?p(o.lastHairTest).format("MM/DD/YYYY"):"N/A"),w.name==="DCCOF"&&(n.push({name:"Last Oral Fluid Test",date:p(o.lastOralFluidTest).isValid()?p(o.lastOralFluidTest).format("MM/DD/YYYY"):"N/A"}),w.date=p(o.lastOralFluidTest).isValid()?p(o.lastOralFluidTest).format("MM/DD/YYYY"):"N/A"),O&&(w=F(F({},w),O),w.status=O.policyStatus),i.push(w)}),i.find(w=>w.status==="Inactive"||w.status==="Inactive Retest"||w.status==="INACTIVE"||w.status==="Inactive Pending"||w.status==="")||o.dccStatus!=="ACTIVE"?o.ownerStatus="Inactive":o.ownerStatus="Active",{disaStatus:o,policies:i,testDates:n}}async justChecking(t){return this.axiosIns({method:"post",url:"/justChecking",data:t,withCredentials:!0}).then(r=>r.data).catch(r=>{throw r})}employeeStatus(t,r){return this.axiosIns.post("/employee/status",t,{headers:{Authorization:`Basic ${r}`}}).then(s=>s.data).catch(s=>{throw s})}policies(t){return this.axiosIns.get("/drugTest/policy",{headers:{Authorization:`Basic ${t}`}}).then(r=>r.data).catch(r=>{throw r})}testPurposes(t){return this.axiosIns.get("/drugTest/testPurpose",{headers:{Authorization:`Basic ${t}`}}).then(r=>r.data).catch(r=>{throw r})}clientLocations(t){return this.axiosIns.get("/client/locations",{headers:{Authorization:`Basic ${t}`}}).then(r=>r.data).catch(r=>{throw r})}collectionSites(t,r){let s="/drugTest/collectionSite";return t.collectionSiteId?s=`/drugTest/collectionSite/${t.collectionSiteId}`:t.zipCode&&t.radius?s=`/drugTest/collectionSite/zipCode/${t.zipCode}/radius/${t.radius}`:t.zipCode?s=`/drugTest/collectionSite/zipCode/${t.zipCode}`:t.countryCode&&t.stateProvinceCode&&t.cityName?s=`/drugTest/collectionSite/country/${t.countryCode}/stateProvince/${t.stateProvinceCode}/city/${t.cityName}`:t.countryCode&&t.stateProvinceCode&&(s=`/drugTest/collectionSite/country/${t.countryCode}/stateProvince/${t.stateProvinceCode}`),this.axiosIns.get(s,{headers:{Authorization:`Basic ${r}`}}).then(i=>i.data).catch(i=>{throw i})}orderECCF(t,r){return this.axiosIns.post("/drugTest/eccf/order",t,{headers:{Authorization:`Basic ${r}`}}).then(s=>s.data).catch(s=>{throw s})}validateECCF(t,r){return this.axiosIns.post("/drugTest/eccf/validate",t,{headers:{Authorization:`Basic ${r}`}}).then(s=>s.data).catch(s=>{throw s})}getECCFOrder(t,r){if(!t.authorizationNumber)throw"Authorization Number Required!";let s=`/drugTest/eccf/order/${t.authorizationNumber}`;return t.policyId&&t.authorizationNumber&&(s=`/drugTest/eccf/order/${t.authorizationNumber}/policy/${t.policyId}`),this.axiosIns.get(s,{headers:{Authorization:`Basic ${r}`}}).then(i=>i.data).catch(i=>{throw i})}getECCFOrderStatus(t,r){if(!t.authorizationNumber)throw"Authorization Number Required!";let s=`/drugTest/eccf/order/${t.authorizationNumber}/status`;return t.policyId&&t.authorizationNumber&&(s=`/drugTest/eccf/order/${t.authorizationNumber}/policy/${t.policyId}/status`),this.axiosIns.get(s,{headers:{Authorization:`Basic ${r}`}}).then(i=>i.data).catch(i=>{throw i})}}const gs=e=>!(typeof e=="undefined"||e===null||e==="");function ll(e,t){return{disa:new cl(e,t)}}const ul=mr(gr.create({baseURL:dt.baseURL,timeout:5e4,headers:{"Content-Type":"application/json",Authorization:`${dt.tokenType} ${dt.token}`}}),{maxRequests:6,perMilliseconds:1e3}),{disa:fl}=ll(ul,{}),pt=ee("hiring",{state:()=>({deployments:[],dispatches:[],inprocesses:[],assignments:[],flaggedAssignments:[],newEmployee:{}}),getters:{userAccess(){const{userAccess:e}=W();return e||[]},deploymentsForProject(){const{active:e}=W();return this.modifiedDeployment.length>0?this.modifiedDeployment.filter(t=>t.map.pid===e[3]):[]},alreadyArrived(){const{active:e}=W();return this.modifiedDeployment.filter(t=>t[20]==="Complete"&&t.map.pid===e[3])},deploymentQuery(){let e="";return this.userAccess.forEach((t,r)=>{e+=`{'134'.EX.'${t[3]}'}${r<this.userAccess.length-1?"OR":""}`}),`(${e})AND({'33'.OAF.'today'}OR{'33'.IR.'last 10 d'})AND({'20'.EX.'In Process'}OR{'20'.EX.'Complete'})AND{'128'.EX.'Yes'}AND({'27'.EX.'6'}OR{'27'.EX.'7'})`},dispatchQuery(){let e="";return this.userAccess.forEach((t,r)=>{e+=`{'94'.EX.'${t[3]}'}${r<this.userAccess.length-1?"OR":""}`}),`(${e})AND{'17'.EX.'In Process'}`},inProcessQuery(){let e="";return this.userAccess.forEach((t,r)=>{e+=`{'108'.EX.'${t[3]}'}${r<this.userAccess.length-1?"OR":""}`}),`(${e})AND{'37'.EX.'In Process'}`},assignmentQuery(){let e="";return this.userAccess.forEach((t,r)=>{e+=`{'74'.EX.'${t[3]}'}${r<this.userAccess.length-1?"OR":""}`}),`(${e})AND{'21'.EX.'In Process'}AND{'102'.EX.'Active'}`},pipelineForProject(){const{active:e}=W();return this.modifiedInProcess.concat(this.modifiedDispatch).concat(this.modifiedDeployment).filter(r=>r.map.pid===e[3])},assignmentsForProject(){const{active:e}=W();return this.modifiedAssignments.filter(t=>t.map.pid===e[3])},modifiedInProcess(){const e=[];return this.inprocesses.forEach(t=>{const r={pid:t[108],name:t[39],phone:t[14],status:"In Process",offerDate:t[197].$d,fullJob:t[106],craft:t[175],job:t[120],start:null,jobNumber:t[44],workdayId:t[216]};Object.assign(t,{map:r}),e.push(t)}),e},modifiedDeployment(){const e=[];return this.deployments.forEach(t=>{const r={pid:t[134],name:t[31],phone:t[42],status:"Deployed",offerDate:t[144]===void 0?"":t[144].$d,fullJob:t[45],craft:t[132],job:t[60],start:t[33],jobNumber:t[85],workdayId:t[152],contact:t[186]};Object.assign(t,{map:r}),e.push(t)}),e},modifiedDispatch(){const e=[];return this.dispatches.forEach(t=>{const r={pid:t[157],name:t[25],phone:t[14],status:"In Process",offerDate:t[165].$d,fullJob:t[45],craft:t[141],job:t[76],start:null,jobNumber:t[63],workdayId:t[178]};Object.assign(t,{map:r}),e.push(t)}),e},modifiedAssignments(){const e=[];return this.assignments.forEach(t=>{const r={pid:t[74],name:t[75],phone:t[76],status:"Arrived",offerDate:t[79].$d,fullJob:t[20],craft:t[68],job:t[33],start:t[1].$d,jobNumber:t[105],workdayId:t[104]};Object.assign(t,{map:r}),e.push(t)}),e},getFlaggedAssignments(){return this.assignmentsForProject.filter(e=>e[112])},getNewEmployee:e=>e.newEmployee},actions:{refreshAssignment({assignment:e}){const t=this.assignments.findIndex(r=>r[3]===e[3]);t>-1&&(this.assignments[t]=e)},async checkDisa({project:e,roster:t}){const r=[];t.forEach(i=>{i.employee[188].length===9&&r.push(i.employee[188])});const s={ownerId:e[322],socialSecurityNumbers:r};try{const n=(await fl.justChecking(s)).results;console.log(n);const a=[];n.forEach(c=>{c.dateChecked=p(),e[321][36]&&c.dccStatus==="ACTIVE"||c.dccStatus==="ACTIVE"?c.ownerStatus="Active":c.ownerStatus="Inactive";const l=c.socialSecurityNumber.slice(c.socialSecurityNumber.length-4),u=c.name.toLowerCase().trim(),m=t.filter(v=>v.employee[188].slice(v.employee[188].length-4)===l?v:null);if(m.length===1){const v={6:{value:m[0].employee[3]},7:{value:m[0].offer[3]},10:{value:JSON.stringify(c)}};a.push(v)}else if(m.length>1){const v=m.find(w=>{const O=w.employee[20].toLowerCase().trim().split(),C=w.employee[22].toLowerCase().trim().split();return u.includes(O)||u.includes(C)?w:null});if(v){const w={6:{value:v.employee[3]},7:{value:v.offer[3]},10:{value:JSON.stringify(c)}};a.push(w)}}else console.log(c)});const{data:o}=await A.upsertRecordsXML({to:"bsfjg3kz9",data:a,fieldsToReturn:[15],formatObject:15});if(!o.length>0)throw"Something went wrong";o.forEach(c=>{const l=this.assignments.findIndex(u=>u.employee[3]===c[15][6]);l>-1?this.assignments[l].employee[556]=c[15]:console.log("no employee found")})}catch(i){throw console.log(i),"Something went wrong"}},async checkHiringData(){const{getUser:e}=T();if(e[11]===11)return await this.getDeployments();if(e[11]===5)return await this.getHiringData()},async getHiringData(){const e=await this.getDeployments();return this.getDispatches(),this.getInProcesses(),this.getAssignments(),e},async getInProcesses(){if(this.inprocesses.length===0){const{data:e}=await A.fetchFromHiringApp({fields:[{6:{value:"bp3gawbee"},7:{value:"Table Query"},8:{value:this.inProcessQuery},9:{value:1},14:{value:239}}]});return this.inprocesses=e,e}else return this.inprocesses},async getDispatches(){if(this.dispatches.length===0){const{data:e}=await A.fetchFromHiringApp({fields:[{6:{value:"bp3gaxedv"},7:{value:"Table Query"},8:{value:this.dispatchQuery},9:{value:1},14:{value:193}}]});return this.dispatches=e,e}else return this.dispatches},async getDeployments(){if(this.deployments.length===0){const{data:e}=await A.fetchFromHiringApp({fields:[{6:{value:"bp3gaymc3"},7:{value:"Table Query"},8:{value:this.deploymentQuery},9:{value:1},14:{value:201}}]});return this.deployments=e,e}else return this.dispatches},async getAssignments(){if(this.assignments.length===0){const{data:e}=await A.fetchFromHiringApp({fields:[{6:{value:"bp3gazpqj"},7:{value:"Table Query"},8:{value:this.assignmentQuery},9:{value:1},14:{value:132}}]});return console.log(e),this.assignments=e,e}else return this.assignments},async updateArrival({row:e,added:t}){const r=e,s=this.deployments.find(i=>i[3]===r[3]?i:!1);s&&(t?(await this.addAssignment(s),await this.editEmployee({id:s.employee[3],status:7}),this.editDeployment(s[3],"Complete")):(await this.cancelAssignment(s),await this.editEmployee({id:s.employee[3],status:6}),this.editDeployment(s[3],"In Process")))},async editEmployee({id:e,status:t}){const{data:r}=await A.upsertRecordsXML({to:"bp3gb7ng2",data:[{3:{value:e},79:{value:t}}],fieldsToReturn:[3]});if(r[0]===void 0)throw"Something went wrong";return r[0]},async editDeployment(e,t){const{data:r}=await A.upsertRecordsXML({to:"bp3gaymc3",data:[{3:{value:e},20:{value:t},22:{value:new Date}}],fieldsToReturn:[201],formatObject:201});if(r[0]!==void 0){const s=this.deployments.findIndex(i=>i[3]===r[0][201][3]);s>-1&&(this.deployments[s]=r[0][201])}},async addAssignment(e){const{data:t}=await A.upsertRecordsXML({to:"bp3gazpqj",data:[{6:{value:e[3]},13:{value:e[15]},18:{value:e.employee[3]},60:{value:""}}],fieldsToReturn:[108],formatObject:108});if(t[0]===void 0)throw"There was an error";return this.assignments.push(t[0][108]),t[0]},async cancelAssignment(e){const{data:t}=await A.upsertRecordsXML({to:"bp3gazpqj",data:[{3:{value:e.assignment[0][3]},22:{value:new Date},21:{value:"Canceled"},19:{value:""},60:{value:""}}],fieldsToReturn:[108],formatObject:108});if(t[0]===void 0)throw"There was an error";{const r=this.assignments.findIndex(s=>s[3]===t[0][108][3]);r>-1&&this.assignments.splice(r,1)}return t[0]},async flagAssignment({record:e,status:t}){const{data:r}=await A.upsertRecordsXML({to:"bp3gazpqj",data:[{3:{value:e[3]},112:{value:t}}],fieldsToReturn:[108],formatObject:108});if(r[0]===void 0)throw"There was an error";{const s=this.assignments.findIndex(i=>i[3]===r[0][108][3]);s>-1&&(this.assignments[s]=r[0][108])}return r[0]},updateNewEmployee({info:e}){for(const[t,r]of Object.entries(e))this.newEmployee[t]===void 0?Object.assign(this.newEmployee,{[t]:{value:r}}):this.newEmployee[t]=r}}}),vs=ee("request",{state:()=>({requests:[],newRequest:{},addedClassifications:[],addedNames:[]}),getters:{getClassifications(){return this.addedClassifications},getNames(){const e=[];return this.addedClassifications.forEach(t=>{t.names.forEach(r=>{e.push(r)})}),e},activeProject(){const{active:e}=W();return e},requestOptions(){return{contacts:[...new Map(this.activeProject.contacts.map(e=>[e[18],e])).values()],crafts:this.activeProject.crafts,jobNumbers:this.activeProject.jobNumbers,locations:this.activeProject.locations,perdiem:this.activeProject.perdiem}},siteContacts(){return[...new Map(this.activeProject.contacts.map(e=>[e[18],e])).values()]},requestQuery(){const{userAccess:e}=T();let t="";return e.forEach((r,s)=>{t+=`{'6'.EX.'${r[9]}'}${s<e.length-1?"OR":""}`}),`(${t})AND{'14'.XEX.'Canceled'}AND{'147'.XEX.'6'}`},modifiedOpenRequests(){const{active:e}=W(),{modifiedInProcess:t,modifiedDispatch:r,modifiedDeployment:s,modifiedAssignments:i}=pt(),n=[];return e.openRequests.forEach(a=>{a.classes.forEach(c=>{Object.assign(c,{duration:c[17]==="Closed"?p.duration(p(c[50].$d).diff(p(c[29].$d))).humanize():p(c[50].$d).fromNow(),aboveAvg:c[23]>c.avgRate,aboveAmount:c[23]>c.avgRate?`$ ${(c[23]-c.avgRate).toFixed(2)} above average`:"",balance:c[18]-c.offers.filter(l=>l[21]==="Accepted").length,offers:c.offers,offersCount:c.offers.length,accepted:c.offers.filter(l=>l[21]==="Accepted"),rejected:c.offers.filter(l=>l[21]==="Rejected"),rescinded:c.offers.filter(l=>l[21]==="Rescinded"),need:c[18],title:`${c[43]} ${c[12]}`})});const o={openDate:a[82],closedDate:a[86],id:a[3],pid:a[6],office:a[103],jobNumber:a[27],offers:a.offers,offersCount:a.offers.length,accepted:a.offers.filter(c=>c[21]==="Accepted"),rejected:a.offers.filter(c=>c[21]==="Rejected"),rescinded:a.offers.filter(c=>c[21]==="Rescinded"),deployNumber:a[243],balance:a.classes.reduce((c,l)=>c+l[18],0)-a.offers.filter(c=>c[21]==="Accepted").length,need:a.classes.reduce((c,l)=>c+l[18],0),inprocesses:t.filter(c=>c[138]===a[3]),dispatches:r.filter(c=>c[95]===a[3]),deployments:s.filter(c=>c[80]===a[3]),assignments:i.filter(c=>c[109]===a[3]),status:a[14],hot:a[121],duration:p(a[82].$d).fromNow()};Object.assign(a,{map:o}),n.push(a)}),n},modifiedClosedRequests(){const{active:e}=W(),{modifiedInProcess:t,modifiedDispatch:r,modifiedDeployment:s,modifiedAssignments:i}=pt(),n=[];return e.closedRequests.forEach(a=>{a.classes.forEach(c=>{Object.assign(c,{duration:p.duration(p(c[50].$d).diff(p(c[29].$d))).humanize(),balance:c[18]-c.offers.filter(l=>l[21]==="Accepted").length,offers:c.offers,offersCount:c.offers.length,accepted:c.offers.filter(l=>l[21]==="Accepted"),rejected:c.offers.filter(l=>l[21]==="Rejected"),rescinded:c.offers.filter(l=>l[21]==="Rescinded"),need:c[18],title:`${c[43]} ${c[12]}`})});const o={created:p(a[82].$d).fromNow(),openDate:a[82],closedDate:a[86],id:a[3],pid:a[6],office:a[103],jobNumber:a[27],need:a.classes.reduce((c,l)=>c+l[18],0),offers:a.offers,offersCount:a.offers.length,accepted:a.offers.filter(c=>c[21]==="Accepted"),rejected:a.offers.filter(c=>c[21]==="Rejected"),rescinded:a.offers.filter(c=>c[21]==="Rescinded"),deployNumber:a[243],balance:a.classes.reduce((c,l)=>c+l[18],0)-a.offers.filter(c=>c[21]==="Accepted").length,inprocesses:t.filter(c=>c[138]===a[3]),dispatches:r.filter(c=>c[95]===a[3]),deployments:s.filter(c=>c[80]===a[3]),assignments:i.filter(c=>c[109]===a[3]),status:a[14],hot:a[121],duration:p.duration(p(a[82].$d).diff(p(a[86].$d))).humanize(),durationRaw:p.duration(p(a[82].$d).diff(p(a[86].$d))).as("milliseconds")};Object.assign(a,{map:o}),n.push(a)}),n},modifiedPendingRequests(){const{active:e}=W(),{modifiedInProcess:t,modifiedDispatch:r,modifiedDeployment:s,modifiedAssignments:i}=pt(),n=[];return e.pendingRequests.forEach(a=>{a.classes.forEach(c=>{Object.assign(c,{duration:p.duration(p(c[50].$d).diff(p(c[29].$d))).humanize(),balance:c[18]-c.offers.filter(l=>l[21]==="Accepted").length,offers:c.offers,offersCount:c.offers.length,accepted:c.offers.filter(l=>l[21]==="Accepted"),rejected:c.offers.filter(l=>l[21]==="Rejected"),rescinded:c.offers.filter(l=>l[21]==="Rescinded"),need:c[18],title:`${c[43]} ${c[12]}`})});const o={created:p(a[82].$d).fromNow(),openDate:a[82],closedDate:a[86],id:a[3],pid:a[6],office:a[103],jobNumber:a[27],need:a.classes.reduce((c,l)=>c+l[18],0),offers:a.offers,offersCount:a.offers.length,accepted:a.offers.filter(c=>c[21]==="Accepted"),rejected:a.offers.filter(c=>c[21]==="Rejected"),rescinded:a.offers.filter(c=>c[21]==="Rescinded"),deployNumber:a[243],balance:a.classes.reduce((c,l)=>c+l[18],0)-a.offers.filter(c=>c[21]==="Accepted").length,inprocesses:t.filter(c=>c[138]===a[3]),dispatches:r.filter(c=>c[95]===a[3]),deployments:s.filter(c=>c[80]===a[3]),assignments:i.filter(c=>c[109]===a[3]),status:a[14],hot:a[121],duration:p.duration(p(a[82].$d).diff(p(a[86].$d))).humanize(),durationRaw:p.duration(p(a[82].$d).diff(p(a[86].$d))).as("milliseconds")};Object.assign(a,{map:o}),n.push(a)}),n.sort((a,o)=>a[1].$d>o[1].$d?-1:1)},openRequestsForProject(){return this.modifiedOpenRequests.length>0?this.modifiedOpenRequests:[]},closedRequestsForProject(){return this.modifiedClosedRequests.length>0?this.modifiedClosedRequests:[]},pendingRequestsForProject(){return this.modifiedPendingRequests.length>0?this.modifiedPendingRequests:[]},openRequestsForProjectSummary(){const e=[];this.openRequestsForProject.forEach(s=>{s.classes.forEach(i=>{e.push(i)})});const{length:t}=e,r=e.reduce((s,i)=>s+i[23]/t,0);return{requestCount:this.openRequestsForProject.length,classCount:this.openRequestsForProject.reduce((s,i)=>s+i.classes.length,0),need:this.openRequestsForProject.reduce((s,i)=>s+i.map.need,0),offers:this.openRequestsForProject.reduce((s,i)=>s+i.map.offersCount,0),balance:this.openRequestsForProject.reduce((s,i)=>s+i.map.balance,0),avgRate:r.toFixed(2)}},closedRequestsForProjectSummary(){const e=[];this.closedRequestsForProject.forEach(s=>{s.classes.forEach(i=>{e.push(i)})});const{length:t}=e,r=e.reduce((s,i)=>s+i[23]/t,0);return{requestCount:this.closedRequestsForProject.length,classCount:this.closedRequestsForProject.reduce((s,i)=>s+i.classes.length,0),need:this.closedRequestsForProject.reduce((s,i)=>s+i.map.need,0),offers:this.closedRequestsForProject.reduce((s,i)=>s+i.map.offersCount,0),balance:this.closedRequestsForProject.reduce((s,i)=>s+i.map.balance,0),avgRate:r.toFixed(2),avgDuration:p.duration(this.closedRequestsForProject.reduce((s,i)=>s+i.map.durationRaw/this.closedRequestsForProject.length,0)).humanize()}},pendingRequestsForProjectSummary(){const e=[];this.pendingRequestsForProject.forEach(s=>{s.classes.forEach(i=>{e.push(i)})});const{length:t}=e,r=e.reduce((s,i)=>s+i[23]/t,0);return{requestCount:this.pendingRequestsForProject.length,classCount:this.pendingRequestsForProject.reduce((s,i)=>s+i.classes.length,0),need:this.pendingRequestsForProject.reduce((s,i)=>s+i.map.need,0),offers:this.pendingRequestsForProject.reduce((s,i)=>s+i.map.offersCount,0),balance:this.pendingRequestsForProject.reduce((s,i)=>s+i.map.balance,0),avgRate:r.toFixed(2)}},nameRequestsForProject(){const e=[],t=this.openRequestsForProject.concat(this.pendingRequestsForProject),r=[];return t.forEach(s=>{s.classes.forEach(i=>{r.push(i)})}),r.forEach(s=>{s.names.forEach(i=>{Object.assign(i,{expand:!1}),e.push(i)})}),e}},actions:{pushClassification(e){this.addedClassifications.push(e)},spliceClassification({item:e}){const t=this.addedClassifications.findIndex(r=>r.id===e.id);t>-1&&this.addedClassifications.splice(t,1)},pushName(e){const t=this.addedClassifications.findIndex(r=>r.id===e.classification.id);this.addedClassifications[t].names===void 0?Object.assign(this.addedClassifications[t],{names:[e]}):this.addedClassifications[t].names.push(e),console.log(this.addedClassifications),console.log(this.getNames)},spliceName({item:e}){const t=this.addedNames.findIndex(r=>r.id===e.id);t>-1&&this.addedNames.splice(t,1)},async storeRequest({request:e}){const{checkForMatch:t}=W(),r=await t({request:e}),{addPendingRequest:s}=W(),{getUser:i}=T();this.newRequest=e;const n={6:{value:this.activeProject[3]},14:{value:"Pending"},92:{value:this.activeProject[12]},9:{value:e.jobNumber[3]},31:{value:e.location[3]},60:{value:e.contact[3]},64:{value:J.formatDate(e.dateNeeded,"MM-DD-YYYY")},68:{value:e.perdiem!==void 0?"Yes":"No"},82:{value:new Date},272:{value:i[3]},147:{value:2},281:{value:!0},280:{value:r?r[3]:""},282:{value:e.restriction.value},284:{value:e.reason.value}};e.perdiem&&e.perdiem[3]!==void 0&&Object.assign(n,{65:{value:e.perdiem[3]}});const{data:a}=await A.upsertRecordsXML({to:"bpzpyjbuy",data:[n],fieldsToReturn:[266],formatObject:266});if(a.length>0){this.newRequest=a[0][266];const o=[],c=[];return this.addedClassifications.forEach(u=>{const m={6:{value:this.newRequest[3]},9:{value:u.job[3]},17:{value:"Pending"},18:{value:u.qty},23:{value:u.rate},238:{value:u.id}};o.push(m),u.names.length>0&&u.names.forEach(v=>{c.push(v)})}),(await this.upsertClassifications({fields:o,names:c})).forEach(u=>{this.newRequest.classes.push(u[220])}),s(this.newRequest),!0}else return!1},async addToRequest({request:e}){const{mergePendingRequest:t}=W();this.newRequest=e;const r=[],s=[];return this.addedClassifications.forEach(n=>{const a=e.classes.find(c=>c[9]===n.job[3]&&c[23]===parseFloat(n.rate)),o=a===void 0?{6:{value:this.newRequest[3]},9:{value:n.job[3]},17:{value:"Pending"},18:{value:parseInt(n.qty)<n.names.length?n.names.length:n.qty},23:{value:n.rate},238:{value:n.id}}:{3:{value:a[3]},18:{value:parseInt(n.qty)<n.names.length?n.names.length+a[18]:parseInt(n.qty)+a[18]},238:{value:n.id}};r.push(o),n.names.length>0&&n.names.forEach(c=>{s.push(c)})}),(await this.upsertClassifications({fields:r,names:s})).forEach(n=>{const a=!this.newRequest.classes||this.newRequest.classes.length===0?-1:this.newRequest.classes.findIndex(o=>o[3]===n[220][3]);a<0?this.newRequest.classes.push(n[220]):this.newRequest.classes[a]=n[220]}),t(this.newRequest),e},async upsertClassifications({fields:e,names:t}){const{getUser:r}=T(),{data:s}=await A.upsertRecordsXML({to:"bpzpyqcu4",data:e,fieldsToReturn:[220],formatObject:220});if(s.length>0)if(t.length>0){const i=[];t.forEach(a=>{const o={6:{value:a.firstName},7:{value:a.lastName},8:{value:a.phone},19:{value:p().tz("America/Chicago")},16:{value:a.ssn},10:{value:"Has Not Arrived"},14:{value:`${r[35]} ${r[37]}`}},c=s.find(l=>l[220][238]===a.classification.id);c!==void 0&&Object.assign(o,{17:{value:c[220][3]}}),i.push(o)});const n=await A.upsertRecordsXML({to:"bsg4yb4wa",data:i,fieldsToReturn:[15],formatObject:15});if(n.data.length>0)return n.data.forEach(a=>{const o=s.findIndex(c=>c[220][3]===a[15][17]);s[o][220].names===void 0?Object.assign(s[o][220],{names:[a[15]]}):s[o][220].names.push(a[15])}),s;throw"Something went wrong"}else return s;else throw"Something went wrong"},resetRequest(){this.newRequest={},this.addedClassifications=[],this.addedNames=[]},async submitCancelRequest({request:e}){const{removeRequest:t}=W(),{getUser:r}=T(),s=[];if(e.classes.forEach(n=>{const a={3:{value:n[3]},17:{value:"Cancelled"},51:{value:new Date},128:{value:6}};s.push(a)}),s.length>0)try{await A.upsertRecordsXML({to:"bpzpyqcu4",data:s,fieldsToReturn:[220],formatObject:220})}catch{throw"There was a problem. Try again later."}const{data:i}=await A.upsertRecordsXML({to:"bpzpyjbuy",data:[{3:{value:e[3]},14:{value:"Cancelled"},84:{value:new Date},147:{value:6},276:{value:r[3]},277:{value:`${r[35]} ${r[37]}`}}],fieldsToReturn:[266],formatObject:266});if(i.length>0)return t({request:i[0][266]}),!0;throw"There was a problem. Try again later."},async submitCancelClassification({item:e}){const{removeClassification:t}=W(),r=[{3:{value:e[3]},17:{value:"Cancelled"},51:{value:new Date},128:{value:6}}],{data:s}=await A.upsertRecordsXML({to:"bpzpyqcu4",data:r,fieldsToReturn:[220],formatObject:220});if(s.length>0){if(s[0][220][243]>0)return t({classification:s[0][220]}),"Classification removed!";{const i={3:s[0][220][6],classes:[]};return await this.submitCancelRequest({request:i}),"Classification removed and request canceled!"}}else throw"There was a problem. Try again later."},async upsertName({name:e,action:t}){const{getUser:r}=T(),{refreshClassification:s}=W(),i=t==="create"?{6:{value:e.firstName},7:{value:e.lastName},8:{value:e.phone},17:{value:e.classification[3]},19:{value:p().tz("America/Chicago")},16:{value:e.ssn},10:{value:"Has Not Arrived"},14:{value:`${r[35]} ${r[37]}`}}:{3:{value:e[3]},11:{value:!0},12:{value:p().tz("America/Chicago")},13:{value:`${r[35]} ${r[37]}`}},{data:n}=await A.upsertRecordsXML({to:"bsg4yb4wa",data:[i],fieldsToReturn:[20],formatObject:20});if(n[0]!==void 0)return s({classification:n[0][20]}),n[0][20]}}}),{capitalize:bs}=$n,W=ee("projects",{state:()=>({projects:[],requests:[],activeProject:{},matrixColumns:[]}),getters:{active(){return this.activeProject[3]!==void 0?this.activeProject:this.projects.length>0?this.projects[0]:{openRequests:[],closedRequests:[]}},userAccess(){return this.projects.length>0?this.projects:null},projectCrafts(){return this.active.crafts!==void 0?this.active.crafts.sort((e,t)=>e.order>t.order?1:-1):null},usersForProject(){return this.active.users!==void 0?this.active.users:[]},availableMatrixColumns(){const e=this.active?this.active.matrix:[],t=[];return this.matrixColumns.forEach(r=>{e.findIndex(i=>i[18]===r[12])<0&&t.push(r)}),t.forEach(r=>{const s=r[6].split(" ");let i="";s.forEach((n,a)=>{i+=a>0?` ${bs(n)}`:bs(n)}),r[6]=i}),t.length>0?[...new Map(t.map(r=>[r[6],r])).values()]:[]}},actions:{addNewMatrixColumn({project:e,data:t}){const r=this.projects.findIndex(s=>s[3]===e[3]);r>-1&&this.projects[r].matrix.push(t)},async getMatrixColumns(){if(this.matrixColumns.length===0){const{data:e}=await A.fetchFromProjectsApp({fields:[{14:{value:9},9:{value:1},8:{value:"{'13'.EX.false}"},7:{value:"Table Query"},6:{value:"bsjdig6gn"}}]});return this.matrixColumns=e,this.availableMatrixColumns}else return this.availableMatrixColumns},refreshClassification({classification:e}){const t=this.projects.findIndex(r=>r[3]===e[7]);if(e[131]==="Pending"){const r=this.projects[t].pendingRequests.findIndex(i=>i[3]===e[6]),s=this.projects[t].pendingRequests[r].classes.findIndex(i=>i[3]===e[3]);this.projects[t].pendingRequests[r].classes[s]=e}else if(e[131]==="Open"){const r=this.projects[t].openRequests.findIndex(i=>i[3]===e[6]),s=this.projects[t].openRequests[r].classes.findIndex(i=>i[3]===e[3]);this.projects[t].openRequests[r].classes[s]=e}},addUser({user:e}){this.projects.find(r=>r[3]===this.active[3]).users.push(e)},updateActive({project:e}){this.activeProject=e},async getProjectsData(){const{userAccess:e}=T();return e.forEach(t=>{if(t[7]==="Project"){const r=t.project?t.project:{};(r[3]===void 0?0:this.projects.findIndex(i=>i[3]===r[3]))<0&&this.projects.push(r)}else t[7]==="Facility"&&t.facility.projects.forEach(s=>{this.projects.findIndex(n=>n[3]===s[3])<0&&this.projects.push(s)})}),this.projects},addPendingRequest(e){const t=this.projects.findIndex(r=>r[3]===e[6]);if(t>-1){this.projects[t].pendingRequests.unshift(e);const{resetRequest:r}=vs();r()}},mergePendingRequest(e){console.log(e),Object.assign(e,{updated:!0});const t=this.projects.findIndex(r=>r[3]===e[6]);if(t>-1){const r=this.projects[t].pendingRequests.findIndex(i=>i[3]===e[3]);r>-1&&(this.projects[t].pendingRequests[r]=e,setTimeout(()=>{this.projects[t].pendingRequests[r].updated=!1},1e4));const{resetRequest:s}=vs();s()}},removeRequest({request:e}){const t=this.projects.findIndex(r=>r[3]===e[6]);if(t>-1){const r=this.projects[t].pendingRequests.findIndex(s=>s[3]===e[3]);r>-1&&this.projects[t].pendingRequests.splice(r,1)}},removeClassification({classification:e}){const t=this.projects.findIndex(r=>r[3]===e[7]);if(t>-1){const r=this.projects[t].pendingRequests.findIndex(s=>s[3]===e[6]);if(r>-1){const s=this.projects[t].pendingRequests[r].classes.findIndex(i=>i[3]===e[3]);s>-1&&this.projects[t].pendingRequests[r].classes.splice(s,1)}}},udpateProjectCrafts({craft:e}){const t=this.projects.findIndex(r=>r[3]===e[7]);if(t>-1){const r=this.projects[t].crafts.findIndex(s=>s[3]===e[3]);r>-1&&(this.projects[t].crafts[r]=e)}},async checkForMatch({request:e}){let t;return e.perdiem===void 0?t=this.active.openRequests.filter(r=>r[9]===e.jobNumber[3]&&r[31]===e.location[3]&&r[60]===e.contact[3]):t=this.active.openRequests.filter(r=>r[9]===e.jobNumber[3]&&r[31]===e.location[3]&&r[60]===e.contact[3]&&r[65]===e.perdiem[3]),t.length>0?(t.sort((r,s)=>r[1].$d<s[1].$d?1:-1),t[0]):null}}});function dl(){this.__data__=[],this.size=0}var pl=dl;function hl(e,t){return e===t||e!==e&&t!==t}var kt=hl,yl=kt;function ml(e,t){for(var r=e.length;r--;)if(yl(e[r][0],t))return r;return-1}var Ct=ml,gl=Ct,vl=Array.prototype,bl=vl.splice;function xl(e){var t=this.__data__,r=gl(t,e);if(r<0)return!1;var s=t.length-1;return r==s?t.pop():bl.call(t,r,1),--this.size,!0}var wl=xl,Al=Ct;function Sl(e){var t=this.__data__,r=Al(t,e);return r<0?void 0:t[r][1]}var Ol=Sl,Il=Ct;function kl(e){return Il(this.__data__,e)>-1}var Cl=kl,$l=Ct;function Tl(e,t){var r=this.__data__,s=$l(r,e);return s<0?(++this.size,r.push([e,t])):r[s][1]=t,this}var Pl=Tl,Rl=pl,jl=wl,Dl=Ol,El=Cl,Fl=Pl;function Le(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}Le.prototype.clear=Rl;Le.prototype.delete=jl;Le.prototype.get=Dl;Le.prototype.has=El;Le.prototype.set=Fl;var $t=Le,Nl=$t;function ql(){this.__data__=new Nl,this.size=0}var _l=ql;function Ml(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var Ll=Ml;function Ul(e){return this.__data__.get(e)}var Bl=Ul;function Hl(e){return this.__data__.has(e)}var zl=Hl,Kl=typeof We=="object"&&We&&We.Object===Object&&We,Zi=Kl,Yl=Zi,Ql=typeof self=="object"&&self&&self.Object===Object&&self,Xl=Yl||Ql||Function("return this")(),Ue=Xl,Wl=Ue,Vl=Wl.Symbol,en=Vl,xs=en,tn=Object.prototype,Jl=tn.hasOwnProperty,Gl=tn.toString,Xe=xs?xs.toStringTag:void 0;function Zl(e){var t=Jl.call(e,Xe),r=e[Xe];try{e[Xe]=void 0;var s=!0}catch{}var i=Gl.call(e);return s&&(t?e[Xe]=r:delete e[Xe]),i}var eu=Zl,tu=Object.prototype,ru=tu.toString;function su(e){return ru.call(e)}var iu=su,ws=en,nu=eu,au=iu,ou="[object Null]",cu="[object Undefined]",As=ws?ws.toStringTag:void 0;function lu(e){return e==null?e===void 0?cu:ou:As&&As in Object(e)?nu(e):au(e)}var Tt=lu;function uu(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var $e=uu,fu=Tt,du=$e,pu="[object AsyncFunction]",hu="[object Function]",yu="[object GeneratorFunction]",mu="[object Proxy]";function gu(e){if(!du(e))return!1;var t=fu(e);return t==hu||t==yu||t==pu||t==mu}var Ur=gu,vu=Ue,bu=vu["__core-js_shared__"],xu=bu,Vt=xu,Ss=function(){var e=/[^.]+$/.exec(Vt&&Vt.keys&&Vt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function wu(e){return!!Ss&&Ss in e}var Au=wu,Su=Function.prototype,Ou=Su.toString;function Iu(e){if(e!=null){try{return Ou.call(e)}catch{}try{return e+""}catch{}}return""}var ku=Iu,Cu=Ur,$u=Au,Tu=$e,Pu=ku,Ru=/[\\^$.*+?()[\]{}|]/g,ju=/^\[object .+?Constructor\]$/,Du=Function.prototype,Eu=Object.prototype,Fu=Du.toString,Nu=Eu.hasOwnProperty,qu=RegExp("^"+Fu.call(Nu).replace(Ru,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function _u(e){if(!Tu(e)||$u(e))return!1;var t=Cu(e)?qu:ju;return t.test(Pu(e))}var Mu=_u;function Lu(e,t){return e==null?void 0:e[t]}var Uu=Lu,Bu=Mu,Hu=Uu;function zu(e,t){var r=Hu(e,t);return Bu(r)?r:void 0}var Br=zu,Ku=Br,Yu=Ue,Qu=Ku(Yu,"Map"),rn=Qu,Xu=Br,Wu=Xu(Object,"create"),Pt=Wu,Os=Pt;function Vu(){this.__data__=Os?Os(null):{},this.size=0}var Ju=Vu;function Gu(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Zu=Gu,ef=Pt,tf="__lodash_hash_undefined__",rf=Object.prototype,sf=rf.hasOwnProperty;function nf(e){var t=this.__data__;if(ef){var r=t[e];return r===tf?void 0:r}return sf.call(t,e)?t[e]:void 0}var af=nf,of=Pt,cf=Object.prototype,lf=cf.hasOwnProperty;function uf(e){var t=this.__data__;return of?t[e]!==void 0:lf.call(t,e)}var ff=uf,df=Pt,pf="__lodash_hash_undefined__";function hf(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=df&&t===void 0?pf:t,this}var yf=hf,mf=Ju,gf=Zu,vf=af,bf=ff,xf=yf;function Be(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}Be.prototype.clear=mf;Be.prototype.delete=gf;Be.prototype.get=vf;Be.prototype.has=bf;Be.prototype.set=xf;var wf=Be,Is=wf,Af=$t,Sf=rn;function Of(){this.size=0,this.__data__={hash:new Is,map:new(Sf||Af),string:new Is}}var If=Of;function kf(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Cf=kf,$f=Cf;function Tf(e,t){var r=e.__data__;return $f(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Rt=Tf,Pf=Rt;function Rf(e){var t=Pf(this,e).delete(e);return this.size-=t?1:0,t}var jf=Rf,Df=Rt;function Ef(e){return Df(this,e).get(e)}var Ff=Ef,Nf=Rt;function qf(e){return Nf(this,e).has(e)}var _f=qf,Mf=Rt;function Lf(e,t){var r=Mf(this,e),s=r.size;return r.set(e,t),this.size+=r.size==s?0:1,this}var Uf=Lf,Bf=If,Hf=jf,zf=Ff,Kf=_f,Yf=Uf;function He(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}He.prototype.clear=Bf;He.prototype.delete=Hf;He.prototype.get=zf;He.prototype.has=Kf;He.prototype.set=Yf;var Qf=He,Xf=$t,Wf=rn,Vf=Qf,Jf=200;function Gf(e,t){var r=this.__data__;if(r instanceof Xf){var s=r.__data__;if(!Wf||s.length<Jf-1)return s.push([e,t]),this.size=++r.size,this;r=this.__data__=new Vf(s)}return r.set(e,t),this.size=r.size,this}var Zf=Gf,ed=$t,td=_l,rd=Ll,sd=Bl,id=zl,nd=Zf;function ze(e){var t=this.__data__=new ed(e);this.size=t.size}ze.prototype.clear=td;ze.prototype.delete=rd;ze.prototype.get=sd;ze.prototype.has=id;ze.prototype.set=nd;var ad=ze,od=Br,cd=function(){try{var e=od(Object,"defineProperty");return e({},"",{}),e}catch{}}(),sn=cd,ks=sn;function ld(e,t,r){t=="__proto__"&&ks?ks(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Hr=ld,ud=Hr,fd=kt;function dd(e,t,r){(r!==void 0&&!fd(e[t],r)||r===void 0&&!(t in e))&&ud(e,t,r)}var nn=dd;function pd(e){return function(t,r,s){for(var i=-1,n=Object(t),a=s(t),o=a.length;o--;){var c=a[e?o:++i];if(r(n[c],c,n)===!1)break}return t}}var hd=pd,yd=hd,md=yd(),gd=md,hr={exports:{}};(function(e,t){var r=Ue,s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,n=i&&i.exports===s,a=n?r.Buffer:void 0,o=a?a.allocUnsafe:void 0;function c(l,u){if(u)return l.slice();var m=l.length,v=o?o(m):new l.constructor(m);return l.copy(v),v}e.exports=c})(hr,hr.exports);var vd=Ue,bd=vd.Uint8Array,xd=bd,Cs=xd;function wd(e){var t=new e.constructor(e.byteLength);return new Cs(t).set(new Cs(e)),t}var Ad=wd,Sd=Ad;function Od(e,t){var r=t?Sd(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var Id=Od;function kd(e,t){var r=-1,s=e.length;for(t||(t=Array(s));++r<s;)t[r]=e[r];return t}var Cd=kd,$d=$e,$s=Object.create,Td=function(){function e(){}return function(t){if(!$d(t))return{};if($s)return $s(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),Pd=Td;function Rd(e,t){return function(r){return e(t(r))}}var jd=Rd,Dd=jd,Ed=Dd(Object.getPrototypeOf,Object),an=Ed,Fd=Object.prototype;function Nd(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Fd;return e===r}var on=Nd,qd=Pd,_d=an,Md=on;function Ld(e){return typeof e.constructor=="function"&&!Md(e)?qd(_d(e)):{}}var Ud=Ld;function Bd(e){return e!=null&&typeof e=="object"}var it=Bd,Hd=Tt,zd=it,Kd="[object Arguments]";function Yd(e){return zd(e)&&Hd(e)==Kd}var Qd=Yd,Ts=Qd,Xd=it,cn=Object.prototype,Wd=cn.hasOwnProperty,Vd=cn.propertyIsEnumerable,Jd=Ts(function(){return arguments}())?Ts:function(e){return Xd(e)&&Wd.call(e,"callee")&&!Vd.call(e,"callee")},ln=Jd,Gd=Array.isArray,un=Gd,Zd=9007199254740991;function ep(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Zd}var fn=ep,tp=Ur,rp=fn;function sp(e){return e!=null&&rp(e.length)&&!tp(e)}var zr=sp,ip=zr,np=it;function ap(e){return np(e)&&ip(e)}var op=ap,bt={exports:{}};function cp(){return!1}var lp=cp;(function(e,t){var r=Ue,s=lp,i=t&&!t.nodeType&&t,n=i&&!0&&e&&!e.nodeType&&e,a=n&&n.exports===i,o=a?r.Buffer:void 0,c=o?o.isBuffer:void 0,l=c||s;e.exports=l})(bt,bt.exports);var up=Tt,fp=an,dp=it,pp="[object Object]",hp=Function.prototype,yp=Object.prototype,dn=hp.toString,mp=yp.hasOwnProperty,gp=dn.call(Object);function vp(e){if(!dp(e)||up(e)!=pp)return!1;var t=fp(e);if(t===null)return!0;var r=mp.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&dn.call(r)==gp}var bp=vp,xp=Tt,wp=fn,Ap=it,Sp="[object Arguments]",Op="[object Array]",Ip="[object Boolean]",kp="[object Date]",Cp="[object Error]",$p="[object Function]",Tp="[object Map]",Pp="[object Number]",Rp="[object Object]",jp="[object RegExp]",Dp="[object Set]",Ep="[object String]",Fp="[object WeakMap]",Np="[object ArrayBuffer]",qp="[object DataView]",_p="[object Float32Array]",Mp="[object Float64Array]",Lp="[object Int8Array]",Up="[object Int16Array]",Bp="[object Int32Array]",Hp="[object Uint8Array]",zp="[object Uint8ClampedArray]",Kp="[object Uint16Array]",Yp="[object Uint32Array]",q={};q[_p]=q[Mp]=q[Lp]=q[Up]=q[Bp]=q[Hp]=q[zp]=q[Kp]=q[Yp]=!0;q[Sp]=q[Op]=q[Np]=q[Ip]=q[qp]=q[kp]=q[Cp]=q[$p]=q[Tp]=q[Pp]=q[Rp]=q[jp]=q[Dp]=q[Ep]=q[Fp]=!1;function Qp(e){return Ap(e)&&wp(e.length)&&!!q[xp(e)]}var Xp=Qp;function Wp(e){return function(t){return e(t)}}var Vp=Wp,yr={exports:{}};(function(e,t){var r=Zi,s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,n=i&&i.exports===s,a=n&&r.process,o=function(){try{var c=i&&i.require&&i.require("util").types;return c||a&&a.binding&&a.binding("util")}catch{}}();e.exports=o})(yr,yr.exports);var Jp=Xp,Gp=Vp,Ps=yr.exports,Rs=Ps&&Ps.isTypedArray,Zp=Rs?Gp(Rs):Jp,pn=Zp;function eh(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var hn=eh,th=Hr,rh=kt,sh=Object.prototype,ih=sh.hasOwnProperty;function nh(e,t,r){var s=e[t];(!(ih.call(e,t)&&rh(s,r))||r===void 0&&!(t in e))&&th(e,t,r)}var ah=nh,oh=ah,ch=Hr;function lh(e,t,r,s){var i=!r;r||(r={});for(var n=-1,a=t.length;++n<a;){var o=t[n],c=s?s(r[o],e[o],o,r,e):void 0;c===void 0&&(c=e[o]),i?ch(r,o,c):oh(r,o,c)}return r}var uh=lh;function fh(e,t){for(var r=-1,s=Array(e);++r<e;)s[r]=t(r);return s}var dh=fh,ph=9007199254740991,hh=/^(?:0|[1-9]\d*)$/;function yh(e,t){var r=typeof e;return t=t==null?ph:t,!!t&&(r=="number"||r!="symbol"&&hh.test(e))&&e>-1&&e%1==0&&e<t}var yn=yh,mh=dh,gh=ln,vh=un,bh=bt.exports,xh=yn,wh=pn,Ah=Object.prototype,Sh=Ah.hasOwnProperty;function Oh(e,t){var r=vh(e),s=!r&&gh(e),i=!r&&!s&&bh(e),n=!r&&!s&&!i&&wh(e),a=r||s||i||n,o=a?mh(e.length,String):[],c=o.length;for(var l in e)(t||Sh.call(e,l))&&!(a&&(l=="length"||i&&(l=="offset"||l=="parent")||n&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||xh(l,c)))&&o.push(l);return o}var Ih=Oh;function kh(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var Ch=kh,$h=$e,Th=on,Ph=Ch,Rh=Object.prototype,jh=Rh.hasOwnProperty;function Dh(e){if(!$h(e))return Ph(e);var t=Th(e),r=[];for(var s in e)s=="constructor"&&(t||!jh.call(e,s))||r.push(s);return r}var Eh=Dh,Fh=Ih,Nh=Eh,qh=zr;function _h(e){return qh(e)?Fh(e,!0):Nh(e)}var mn=_h,Mh=uh,Lh=mn;function Uh(e){return Mh(e,Lh(e))}var Bh=Uh,js=nn,Hh=hr.exports,zh=Id,Kh=Cd,Yh=Ud,Ds=ln,Es=un,Qh=op,Xh=bt.exports,Wh=Ur,Vh=$e,Jh=bp,Gh=pn,Fs=hn,Zh=Bh;function e0(e,t,r,s,i,n,a){var o=Fs(e,r),c=Fs(t,r),l=a.get(c);if(l){js(e,r,l);return}var u=n?n(o,c,r+"",e,t,a):void 0,m=u===void 0;if(m){var v=Es(c),w=!v&&Xh(c),O=!v&&!w&&Gh(c);u=c,v||w||O?Es(o)?u=o:Qh(o)?u=Kh(o):w?(m=!1,u=Hh(c,!0)):O?(m=!1,u=zh(c,!0)):u=[]:Jh(c)||Ds(c)?(u=o,Ds(o)?u=Zh(o):(!Vh(o)||Wh(o))&&(u=Yh(c))):m=!1}m&&(a.set(c,u),i(u,c,s,n,a),a.delete(c)),js(e,r,u)}var t0=e0,r0=ad,s0=nn,i0=gd,n0=t0,a0=$e,o0=mn,c0=hn;function gn(e,t,r,s,i){e!==t&&i0(t,function(n,a){if(i||(i=new r0),a0(n))n0(e,t,a,r,gn,s,i);else{var o=s?s(c0(e,a),n,a+"",e,t,i):void 0;o===void 0&&(o=n),s0(e,a,o)}},o0)}var l0=gn;function u0(e){return e}var vn=u0;function f0(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var d0=f0,p0=d0,Ns=Math.max;function h0(e,t,r){return t=Ns(t===void 0?e.length-1:t,0),function(){for(var s=arguments,i=-1,n=Ns(s.length-t,0),a=Array(n);++i<n;)a[i]=s[t+i];i=-1;for(var o=Array(t+1);++i<t;)o[i]=s[i];return o[t]=r(a),p0(e,this,o)}}var y0=h0;function m0(e){return function(){return e}}var g0=m0,v0=g0,qs=sn,b0=vn,x0=qs?function(e,t){return qs(e,"toString",{configurable:!0,enumerable:!1,value:v0(t),writable:!0})}:b0,w0=x0,A0=800,S0=16,O0=Date.now;function I0(e){var t=0,r=0;return function(){var s=O0(),i=S0-(s-r);if(r=s,i>0){if(++t>=A0)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var k0=I0,C0=w0,$0=k0,T0=$0(C0),P0=T0,R0=vn,j0=y0,D0=P0;function E0(e,t){return D0(j0(e,t,R0),e+"")}var F0=E0,N0=kt,q0=zr,_0=yn,M0=$e;function L0(e,t,r){if(!M0(r))return!1;var s=typeof t;return(s=="number"?q0(r)&&_0(t,r.length):s=="string"&&t in r)?N0(r[t],e):!1}var U0=L0,B0=F0,H0=U0;function z0(e){return B0(function(t,r){var s=-1,i=r.length,n=i>1?r[i-1]:void 0,a=i>2?r[2]:void 0;for(n=e.length>3&&typeof n=="function"?(i--,n):void 0,a&&H0(r[0],r[1],a)&&(n=i<3?void 0:n,i=1),t=Object(t);++s<i;){var o=r[s];o&&e(t,o,s,n)}return t})}var K0=z0,Y0=l0,Q0=K0,X0=Q0(function(e,t,r){Y0(e,t,r)}),W0=X0;class V0{constructor(t,r){R(this,"axiosIns",null);R(this,"config",F({},Ki));R(this,"appConfig",k);R(this,"isAlreadyFetchingAccessToken",{});R(this,"subscribers",[]);R(this,"rateLimit",null);R(this,"rateLimitRemaining",null);R(this,"rateLimitReset",null);R(this,"router",null);R(this,"loginAttempts",{invalidLogins:0,login:null,exp:null,currentTime:null});R(this,"appStore",null);R(this,"userStore",null);R(this,"employeeStore",null);R(this,"jobBoardStore",null);R(this,"profileStore",null);R(this,"assessmentStore",null);R(this,"applicationStore",null);R(this,"kioskStore",null);R(this,"hiringCenterStore",null);R(this,"projectsStore",null);R(this,"hiringStore",null);R(this,"dataStore",null);R(this,"serverAPI",jn);if(this.axiosIns=t,this.config=F(F({},this.config),r),this.axiosIns.interceptors.request.use(async s=>new Promise(i=>{const{url:n,data:a}=s;let o=null;if(n.includes("act=API_Authenticate")||n.includes("a=API_GetUserInfo")||n.includes("a=API_DoQuery")||n.includes("a=API_AddRecord")||n.includes("?a=API_EditRecord")){if(n.includes("a=API_DoQuery")){o=n.split("/db/")[1].split("?")[0];const c={6:{value:`${this.appConfig.pageType}-${this.appConfig.pageId}`},7:{value:"DoQuery"},8:{value:o}};this.addLogRecord({data:[c]})}i(s)}else if(n.includes("auth/temporary"))this.config.realm&&(s.headers["QB-Realm-Hostname"]=`${this.config.realm}.quickbase.com`),this.config.appToken&&(s.headers["QB-App-Token"]=this.config.appToken),s.headers["Request-Count"]?s.headers["Request-Count"]+=1:s.headers["Request-Count"]=1,i(s);else{if(this.config.realm&&(s.headers["QB-Realm-Hostname"]=`${this.config.realm}.quickbase.com`),this.config.appToken&&(s.headers["QB-App-Token"]=this.config.appToken),s.headers["Request-Count"]?s.headers["Request-Count"]+=1:s.headers["Request-Count"]=1,n==="https://api.quickbase.com/v1/records/query"){o=a.from;const l={6:{value:`${this.appConfig.pageType}-${this.appConfig.pageId}`},7:{value:"Rest Query"},8:{value:o}};this.addLogRecord({data:[l]})}else if(n==="https://api.quickbase.com/v1/records")o=a.to;else if(n.startsWith("https://api.quickbase.com/v1/reports")){const l=new URL(n);o=new URLSearchParams(l.search).get("tableId"),o=a.from;const m={6:{value:`${this.appConfig.pageType}-${this.appConfig.pageId}`},7:{value:"Rest Report"},8:{value:o}};this.addLogRecord({data:[m]})}const c=this;if(!o){const l=JSON.parse(a);o=l.from?l.from:l.to}this.getToken(o).then(l=>{const u=l;if(u)s.headers.Authorization=u,i(s);else if(!c.isAlreadyFetchingAccessToken[`${o}`])c.isAlreadyFetchingAccessToken[`${o}`]=!0,c.refreshToken(o).then(m=>{const{data:v}=m;c.isAlreadyFetchingAccessToken[`${o}`]=!1,c.setToken(v.temporaryAuthorization,o).then(()=>{c.onAccessTokenFetched(v.temporaryAuthorization),s.headers.Authorization=`QB-TEMP-TOKEN ${v.temporaryAuthorization}`,i(s)})});else{const m=u;async function v(){c.getToken(o).then(w=>{const O=w;if(O===m){setTimeout(v,50);return}s.headers.Authorization=O,i(s)})}v()}})}}),s=>Promise.reject(s)),this.axiosIns.interceptors.response.use(s=>{if(s&&s.headers){const{headers:i}=s;this.rateLimit=i["x-ratelimit-limit"],this.rateLimitRemaining=i["x-ratelimit-remaining"],this.rateLimitReset=i["x-ratelimit-reset"]}return s},s=>new Promise((i,n)=>{const{config:a,response:o}=s;console.log(s);const{headers:c}=o;this.rateLimit=c["x-ratelimit-limit"],this.rateLimitRemaining=c["x-ratelimit-remaining"],this.rateLimitReset=c["x-ratelimit-reset"];const l=a,{url:u,data:m}=l;let v=this.config.appDBID;const w=m?JSON.parse(m):null;if(u==="https://api.quickbase.com/v1/records/query"?v=w.from:u==="https://api.quickbase.com/v1/records"&&(v=w.to),o&&o.status===401){const O=new Promise(C=>{this.addSubscriber(D=>{l.headers.Authorization=D,C(this.axiosIns(l))})});this.isAlreadyFetchingAccessToken[`${v}`]||(this.isAlreadyFetchingAccessToken[`${v}`]=!0,this.refreshToken(v).then(C=>{this.isAlreadyFetchingAccessToken[`${v}`]=!1,this.setToken(C.data.temporaryAuthorization,v),this.onAccessTokenFetched(C.data.temporaryAuthorization)})),i(O)}else if(o&&o.status===429){const O=this,C=new Promise(D=>{setTimeout(()=>{D(this.axiosIns(l))},O.rateLimitReset)});l.headers["Request-Count"]&&l.headers["Request-Count"]>4?n(s):i(C)}else if(o&&o.status===400){const{data:O}=o;if(O.description==="You are not currently signed into the realm.")window.close(),n(s);else if(O.description==="Required header 'Authorization' not specified"){this.isAlreadyFetchingAccessToken[`${v}`]||(this.isAlreadyFetchingAccessToken[`${v}`]=!0,this.refreshToken(v).then(D=>{this.isAlreadyFetchingAccessToken[`${v}`]=!1,this.setToken(D.data.temporaryAuthorization,v),this.onAccessTokenFetched(D.data.temporaryAuthorization)}));const C=new Promise(D=>{this.addSubscriber(P=>{l.headers.Authorization=P,D(this.axiosIns(l))})});i(C)}else if(O.description==="Invalid Authorization"){this.isAlreadyFetchingAccessToken[`${v}`]||(this.isAlreadyFetchingAccessToken[`${v}`]=!0,this.refreshToken(v).then(D=>{this.isAlreadyFetchingAccessToken[`${v}`]=!1,this.setToken(D.data.temporaryAuthorization,v),this.onAccessTokenFetched(D.data.temporaryAuthorization)}));const C=new Promise(D=>{this.addSubscriber(P=>{l.headers.Authorization=P,D(this.axiosIns(l))})});i(C)}}n(s)})),this.serverAPI.feathersClient){const s=this;this.serverAPI.feathersClient.service("notifications").on("created",function(i){s.processServerNotifications(i)})}}processServerNotifications(t){t.type==="user-notification"?t.task==="reload-user"?this.reloadUserInfo({reAuthenticate:!0}):t.task==="reload-page"?window.location.reload(!0):t.task==="logout"&&this.logout():t.type==="office-notification"&&(t.task==="reload-page"?window.location.reload(!0):this.userStore.setFeathersNotification(t))}onAccessTokenFetched(t){this.subscribers=this.subscribers.filter(r=>r(t))}addSubscriber(t){this.subscribers.push(t)}async getToken(t){return this.config.dev&&this.config.userToken?`QB-USER-TOKEN ${this.config.userToken}`:_.has(`${t}`)?`QB-TEMP-TOKEN ${_.get(`${t}`)}`:null}refreshToken(t){return this.axiosIns.get(`${this.config.refreshEndpoint}/${t}`,{withCredentials:!0})}async setToken(t,r){const s=r||this.config.appDBID;_.set(`${s}`,t,{expires:this.config.tokenExpiration,secure:!0,sameSite:"Strict"})}async setIpInfo(t){x.setItem(this.appConfig.storageIPInfoKeyName,t),t.countryCode!==this.appConfig.country&&this.appConfig.pageId!==26&&this.setCountry(t.countryCode)}async setCountry(t){this.appStore=this.appStore||H(),this.appStore.setCountry(t)}async getIpInfo(){return await x.getItem(this.appConfig.storageIPInfoKeyName)}setUserTicket(t,r){_.set(this.appConfig.storageUserTicketKeyName,t,{expires:r||this.config.cookieExpiration,secure:!0,sameSite:"Strict"})}getUserTicket(){return _.get(this.appConfig.storageUserTicketKeyName)}setKioskTicket(t,r){_.set(this.appConfig.storageKioskAccountTicket,t,{expires:r||this.config.kioskExpiration,secure:!0,sameSite:"Strict"})}getKioskTicket(){return _.get(this.appConfig.storageKioskAccountTicket)}removeKioskTicket(){_.remove(this.appConfig.storageKioskAccountTicket,{secure:!0,sameSite:"Strict"})}setOfficeLocation(t){this.hiringCenterStore=this.hiringCenterStore||G(),this.appConfig.pageType!=="Candidate Kiosk"&&this.hiringCenterStore.fetchHiringCenter(t.rid,!0),_.set(this.appConfig.storageOfficeLocationKeyName,t,{expires:this.config.officeExpiration,secure:!0,sameSite:"Strict"})}setCheckIn(t){console.log(t),_.set(this.appConfig.storageCheckInKeyName,t,{expires:this.config.checkInExpiration,secure:!0,sameSite:"Strict"})}removeCheckIn(){_.remove(this.appConfig.storageCheckInKeyName,{secure:!0,sameSite:"Strict"})}getCheckIn(){return _.get(this.appConfig.storageCheckInKeyName)}getOfficeLocation(){return _.get(this.appConfig.storageOfficeLocationKeyName)}removeOfficeLocation(){_.remove(this.appConfig.storageOfficeLocationKeyName,{secure:!0,sameSite:"Strict"})}async setUserInfo(t,r){this.userStore.setUser(t,r)}async setStrapiUser(t,r){this.userStore.setStrapiUser(t,r)}async setUserAccess(t,r){this.userStore.setAccess(t,r)}async setUserPermissions(t,r){this.userStore.setPermissions(t,r)}async getUserInfo(){return await x.getItem(this.appConfig.storageUserKeyName)}async getUserAccess(){return await x.getItem(this.appConfig.storageAccessKeyName)}async getUserPermissions(){return await x.getItem(this.appConfig.storagePermissionsKeyName)}async setEmployee(t,r){this.employeeStore.setEmployee(t,r)}async setJobBoard(t,r){this.jobBoardStore.setRequestJobs(t,r)}async getUserTypeFromStore(){return this.appStore.currentUserType}async getEmployeeFromStore(){return this.employeeStore.getEmployee}async getSocialRequired(t){return(this.appConfig.pageType==="Candidate Kiosk"||this.appConfig.pageType==="Candidate")&&t?(this.employeeStore=this.employeeStore||U(),this.employeeStore.socialRequired):!1}async getUserFromStore(t){return t?(this.userStore=this.userStore||T(),this.userStore.getUser):!1}async getLoggedInFromStore(){return this.userStore.isLoggedIn}async verifyRequired(t){return t?(this.userStore=this.userStore||T(),this.userStore.verifyRequired):!1}async phoneNumberRequired(t){return t?(this.userStore=this.userStore||T(),this.userStore.phoneNumberRequired):!1}async setEvent(t,r){this.appStore=this.appStore||H(),this.appStore.setEvent(t,r)}async getEvent(t){return this.appStore=this.appStore||H(),t?this.appStore.currentEvent:null}async emailRequired(t){return t?(this.userStore=this.userStore||T(),this.userStore.emailRequired):!1}async setPhoneNumberVerified(t){this.userStore.setPhoneNumberVerified(t)}async setVerified(t){this.userStore.setVerified(t)}async employeeLinkRequired(t){return t?(this.userStore=this.userStore||T(),this.userStore.employeeLinkRequired):!1}async bookmarksValid(){return this.kioskStore=this.kioskStore||Y(),!!(this.kioskStore.getBookmarks&&this.kioskStore.getBookmarks.length>0)}async getKioskAccount(){return this.kioskStore?this.kioskStore.kioskAccount:null}async logoutKiosk(t){if(this.kioskStore=this.kioskStore||Y(),t)this.removeKioskTicket(),this.kioskStore.setKioskAccount(null,!1),this.clearBookmarks();else if(!this.kioskStore.kioskAvailable)this.clearBookmarks();else if(this.kioskStore.getBookMarksOnly&&this.kioskStore.kioskAccount[45]===!0)this.removeKioskTicket(),this.kioskStore.setKioskAccount(null,!1),this.clearBookmarks();else return!0}async clearBookmarks(){this.kioskStore=this.kioskStore||Y(),this.kioskStore.removeBookmarks()}async bookMarksOnly(){return this.kioskStore=this.kioskStore||Y(),this.kioskStore.getBookMarksOnly}async startPageEnabled(){return this.appStore=this.appStore||H(),this.appStore.startPageEnabled}async setIdentityVerified(t){this.userStore.setIdentityVerified(t)}async setPhoneNumber(t){this.userStore.setPhoneNumber(t)}async setEmail(t){this.userStore.setEmail(t)}async isUserLoggedIn(){const t=this.getUserInfo(),r=this.getUserAccess(),s=this.getUserPermissions(),i=this.getUserTicket(),n=await t,a=await r,o=await s;return!!(n&&a&&o&&i||i)}async reloadUserInfo(t){const r=await this.getUserInfo();if(this.userStore=this.userStore||T(),t.reAuthenticate&&r)return await this.fetchAndSetUserData({phoneNumber:r[8],userType:r[32],rid:r[3],reAuthenticate:t.reAuthenticate}),this.updateStore();if(!r&&this.appConfig.pageType==="QuickBase User"){const{data:s}=await this.getNativeQuickbaseUser({qbUser:!0});if(s.login==="Anonymous")return this.userStore.logout();const i=`{'10'.EX.'Active'}AND{'6'.EX.'${s.email}'}AND{'32'.EX.'QuickBase User'}`,n=[{7:{value:"User Request"},8:{value:i},9:{value:1},14:{value:77}}],{data:a}=await this.fetchFromStructureApp({fields:n});return a[0]&&a[0][10]==="Active"?(await this.fetchAndSetUserData({email:a[0][6],rid:a[0][3],userType:a[0][32],reAuthenticate:t.reAuthenticate}),this.updateStore()):a[0]&&a[0][10]!=="Active"?this.userStore.logout():this.createQBUser({qbUser:s,login:!0})}else return this.updateStore()}async createQBUser(t){const r=t.qbUser||null;if(!r&&t.login)return this.userStore.logout();if(!r)return t;const s=[{7:{value:"Hiring Center User"},9:{value:1},16:{value:r.email}}],{data:i}=await this.fetchFromStructureApp({fields:s});if(typeof i=="object"&&!Array.isArray(i)&&i!==null&&i.user&&typeof i.user=="object")try{const n=new Date,a=await Ve.genSalt(10),o=Ve.hashSync("welcome",a),c=i.user,l=i.accessiblePayGroups,u=i.accessibleHiringCenters,m=r.email.match(/^([^@]*)@/)[1],v=[{6:{value:r.email},7:{value:o},10:{value:"Active"},11:{value:4},17:{value:!1},32:{value:"QuickBase User"},35:{value:r.firstName},37:{value:r.lastName},23:{value:0},24:{value:0},25:{value:n},26:{value:n},33:{value:m},49:{value:!!r.isVerified},65:{value:c[13]},70:{value:c[251]},100:{value:"en-US"},110:{value:r.id}}],w=[],{data:O}=await this.upsertRecordsXML({to:"br4pxrbs6",fieldsToReturn:[76],data:v,formatObject:76});return O.length===0?this.userStore.logout():(l.forEach(C=>{const D={6:{value:O[0][76][3]},7:{value:"Pay Group"},13:{value:C[10]},20:{value:!0},21:{value:!0},22:{value:!0}};w.push(D)}),u.forEach(C=>{const D={6:{value:O[0][76][3]},7:{value:"Office"},8:{value:C[10]},20:{value:!0},21:{value:!0},22:{value:!0}};w.push(D)}),await this.upsertRecordsXML({to:"br598isx6",fieldsToReturn:[3],data:w,formatObject:24}),await this.fetchAndSetUserData({email:O[0][76][6],rid:O[0][76][3],userType:O[0][76][32],reAuthenticate:t.reAuthenticate}))}catch{return this.userStore.logout()}else return this.userStore.logout()}async updateUserData(t){const r=await this.getUserInfo();if(this.appStore=this.appStore||H(),r)return this.userStore=this.userStore||T(),await this.userStore.updateUserData(t)}async updateEmployeeData(t){const r=await this.getUserInfo();if(this.appStore=this.appStore||H(),(this.appStore.pageType==="Candidate"||this.appStore.pageType==="Candidate Kiosk")&&r)return this.employeeStore=this.employeeStore||U(),await this.employeeStore.updateEmployeeData(t)}async updateStore(t){const r=await x.keys();for(let s=0;s<r.length;s++){if(r[s]===this.appConfig.storageUserKeyName){const i=await x.getItem(r[s]);Object.keys(i).forEach(n=>{if(typeof i[n]=="object"&&i[n]!==null&&Object.prototype.hasOwnProperty.call(i[n],"$d")){i[n]=p(i[n].$d);return}try{i[n].endsWith(".000Z")&&(i[n]=p(i[n]))}catch{}}),await this.setUserInfo(i,!1)}if(r[s]===this.appConfig.storageStrapiUserKeyName){const i=await x.getItem(r[s]);Object.keys(i).forEach(n=>{if(typeof i[n]=="object"&&i[n]!==null&&Object.prototype.hasOwnProperty.call(i[n],"$d")){i[n]=p(i[n].$d);return}try{i[n].endsWith(".000Z")&&(i[n]=p(i[n]))}catch{}}),await this.setStrapiUser(i,!1)}if(r[s]===this.appConfig.storageAccessKeyName){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}await this.setUserAccess(i,!1)}if(r[s]===this.appConfig.storagePermissionsKeyName){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}await this.setUserPermissions(i,!1)}if(r[s]===this.appConfig.storageEmployeeKeyName){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}await this.setEmployee(i,!1)}if(r[s]===this.appConfig.storageJobBoardKeyName){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.jobBoardStore=this.jobBoardStore||Gi(),await this.setJobBoard(i,!1)}if(r[s]===this.appConfig.storageExperienceOptions){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setExperienceOptions(i,!1)}if(r[s]===this.appConfig.storageContactMethods){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setContactMethods(i,!1)}if(r[s]===this.appConfig.storageEmploymentOptions){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setEmploymentOptions(i,!1)}if(r[s]===this.appConfig.storageCompanyOptions){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setCompanyOptions(i,!1)}if(r[s]===this.appConfig.storageCraftOptions){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setCraftOptions(i,!1)}if(r[s]===this.appConfig.storageRelationshipOptions){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setRelationshipOptions(i,!1)}if(r[s]===this.appConfig.storageCredentialOptions){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setCredentialOptions(i,!1)}if(r[s]===this.appConfig.storageAffirmativeOptions){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setAffirmativeOptions(i,!1)}if(r[s]===this.appConfig.storageVeteranStatusOptions){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setVeteranStatusOptions(i,!1)}if(r[s]===this.appConfig.storageDisabilityPages){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setDisabilityPages(i,!1)}if(r[s]===this.appConfig.storageDisabilityForm){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setDisabilityForm(i,!1)}if(r[s]===this.appConfig.storageEverGreenJobs){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setEverGreenJobs(i,!1)}if(r[s]===this.appConfig.storageProfile){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.profileStore=this.profileStore||Ae(),await this.profileStore.setProfile(i,!1)}if(r[s]===this.appConfig.storageProfileStep){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.profileStore=this.profileStore||Ae(),await this.profileStore.setProfileStep(i,!1)}if(r[s]===this.appConfig.storageProfileVoluntaryForms){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.profileStore=this.profileStore||Ae(),await this.profileStore.setVoluntaryForms(i,!1)}if(r[s]===this.appConfig.storageKioskAccount){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.kioskStore=this.kioskStore||Y(),await this.kioskStore.setKioskAccount(i,!1)}if(r[s]===this.appConfig.storageBookmarks){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.kioskStore=this.kioskStore||Y(),await this.kioskStore.setBookmarksFromStorage(i)}if(r[s]===this.appConfig.storageBookmarksOnly){const i=await x.getItem(r[s]);this.kioskStore=this.kioskStore||Y(),await this.kioskStore.setBookmarksOnly(i,!1)}if(r[s]===this.appConfig.storageHiringCenter&&this.appConfig.pageType==="Candidate"){const i=await x.getItem(r[s]);if(i){for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.hiringCenterStore=this.hiringCenterStore||G(),await this.hiringCenterStore.setHiringCenter(i,!1)}}if(this.appConfig.pageType==="QuickBase User"){if(r[s].startsWith(this.appConfig.storageSelfCheckIns)){const i=r[s].split("_")[4],n=await x.getItem(r[s]);if(n){for(let a=0;a<n.length;a++){const o=Object.keys(n[a]);for(let c=0;c<o.length;c++){typeof n[a][o[c]]=="object"&&n[a][o[c]]!==null&&Object.prototype.hasOwnProperty.call(n[a][o[c]],"$d")&&(n[a][o[c]]=p(n[a][o[c]].$d));try{n[a][o[c]].endsWith(".000Z")&&(n[a][o[c]]=p(n[a][o[c]]))}catch{}}}this.dataStore=this.dataStore||Re(),await this.dataStore.setSelfCheckIns({officeId:i,data:n},!1)}}if(r[s].startsWith(this.appConfig.storageProcessTimeStamps)){const i=await x.getItem(r[s]);if(i){const n=Object.keys(i);for(let a=0;a<n.length;a++){const o=Object.keys(i[n[a]]);for(let c=0;c<o.length;c++){typeof i[n[a]][o[c]]=="object"&&i[n[a]][o[c]]!==null&&Object.prototype.hasOwnProperty.call(i[n[a]][o[c]],"$d")&&(i[n[a]][o[c]]=p(i[n[a]][o[c]].$d));try{i[n[a]][o[c]]&&(i[n[a]][o[c]]=p(i[n[a]][o[c]]))}catch{}}}this.dataStore=this.dataStore||Re(),await this.dataStore.setTimeStampState(i)}}if(r[s].startsWith(this.appConfig.storageProjects)){const i=r[s].split("_")[3],n=await x.getItem(r[s]);if(n){for(let a=0;a<n.length;a++){const o=Object.keys(n[a]);for(let c=0;c<o.length;c++){typeof n[a][o[c]]=="object"&&n[a][o[c]]!==null&&Object.prototype.hasOwnProperty.call(n[a][o[c]],"$d")&&(n[a][o[c]]=p(n[a][o[c]].$d));try{n[a][o[c]].endsWith(".000Z")&&(n[a][o[c]]=p(n[a][o[c]]))}catch{}}}this.dataStore=this.dataStore||Re(),await this.dataStore.setProjects({officeId:i,data:n},!1)}}if(r[s].startsWith(this.appConfig.storagePendingProjects)){const i=r[s].split("_")[4],n=await x.getItem(r[s]);if(n){for(let a=0;a<n.length;a++){const o=Object.keys(n[a]);for(let c=0;c<o.length;c++){typeof n[a][o[c]]=="object"&&n[a][o[c]]!==null&&Object.prototype.hasOwnProperty.call(n[a][o[c]],"$d")&&(n[a][o[c]]=p(n[a][o[c]].$d));try{n[a][o[c]].endsWith(".000Z")&&(n[a][o[c]]=p(n[a][o[c]]))}catch{}}}this.dataStore=this.dataStore||Re(),await this.dataStore.setPendingProjects({officeId:i,data:n},!1)}}}if(r[s]===this.appConfig.storageEvent){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.appStore=this.appStore||H(),await this.appStore.setEvent(i,!1)}if(r[s]===this.appConfig.storageStartPage){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.appStore=this.appStore||H(),await this.appStore.setStartPage(i,!1)}if(r[s]===this.appConfig.storageHomeButton){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.appStore=this.appStore||H(),await this.appStore.setHomeButton(i,!1)}}return!0}async login(t){let r=null;t.redirectPath&&(r=t.redirectPath,delete t.redirectPath);const s=`{'10'.EX.'Active'}${t.email?`AND{'6'.EX.'${t.email}'}`:""}${t.phoneNumber?`AND{'8'.EX.'${t.phoneNumber}'}`:""}${t.userType?`AND{'32'.EX.'${t.userType}'}`:""}`,i=[{7:{value:"User Request"},8:{value:s},9:{value:1},14:{value:77}}],n=t.email?t.email:t.phoneNumber,a=p();if(this.loginAttempts.invalidLogins>=this.config.maxLoginAttempts&&n===this.loginAttempts.login)if(a.isBefore(this.loginAttempts.exp)){const u=a.to(this.loginAttempts.exp,!0);throw{response:{data:{errtext:"Too many failed Login Attempts",errdetail:`Please wait ${u} before attempting to try again.`}}}}else this.loginAttempts={invalidLogins:0,login:null,exp:null,currentTime:null};else this.loginAttempts.exp&&a.isAfter(this.loginAttempts.exp)&&(this.loginAttempts={invalidLogins:0,login:null,exp:null,currentTime:null});const{data:o}=await this.fetchFromStructureApp({fields:i}),c=[{6:{value:"login"}}];let l=await this.getIpInfo();if(l&&l.query)c[0][8]={value:l.ip?l.ip:"N/A"},c[0][10]={value:l.userAgent?l.userAgent:"N/A"},c[0][27]={value:l.continent?l.continent:"N/A"},c[0][28]={value:l.continentCode?l.continentCode:"N/A"},c[0][29]={value:l.country?l.country:"N/A"},c[0][30]={value:l.countryCode},c[0][31]={value:l.region?l.region:"N/A"},c[0][32]={value:l.regionName?l.regionName:"N/A"},c[0][33]={value:l.city?l.city:"N/A"},c[0][34]={value:l.district?l.district:"N/A"},c[0][38]={value:l.zip?l.zip:"N/A"},c[0][36]={value:l.lat?l.lat:"N/A"},c[0][37]={value:l.lon?l.lon:"N/A"},c[0][38]={value:l.timezone?l.timezone:"N/A"},c[0][39]={value:l.offset?l.offset:"N/A"},c[0][40]={value:l.isp?l.isp:"N/A"},c[0][41]={value:l.org?l.org:"N/A"},c[0][42]={value:l.as?l.as:"N/A"},c[0][43]={value:l.asname?l.asname:"N/A"},c[0][44]={value:l.mobile?l.mobile:!1},c[0][45]={value:l.proxy?l.proxy:!1},c[0][46]={value:l.hosting?l.hosting:!1},c[0][46]={value:l.hosting?l.hosting:"N/A"},c[0][47]={value:l.query?l.query:"N/A"};else{try{l=await this.fetchIpInfo()}catch{l=null}l&&l.query&&(c[0][8]={value:l.ip?l.ip:"N/A"},c[0][10]={value:l.userAgent?l.userAgent:"N/A"},c[0][27]={value:l.continent?l.continent:"N/A"},c[0][28]={value:l.continentCode?l.continentCode:"N/A"},c[0][29]={value:l.country?l.country:"N/A"},c[0][30]={value:l.countryCode},c[0][31]={value:l.region?l.region:"N/A"},c[0][32]={value:l.regionName?l.regionName:"N/A"},c[0][33]={value:l.city?l.city:"N/A"},c[0][34]={value:l.district?l.district:"N/A"},c[0][38]={value:l.zip?l.zip:"N/A"},c[0][36]={value:l.lat?l.lat:"N/A"},c[0][37]={value:l.lon?l.lon:"N/A"},c[0][38]={value:l.timezone?l.timezone:"N/A"},c[0][39]={value:l.offset?l.offset:"N/A"},c[0][40]={value:l.isp?l.isp:"N/A"},c[0][41]={value:l.org?l.org:"N/A"},c[0][42]={value:l.as?l.as:"N/A"},c[0][43]={value:l.asname?l.asname:"N/A"},c[0][44]={value:l.mobile?l.mobile:!1},c[0][45]={value:l.proxy?l.proxy:!1},c[0][46]={value:l.hosting?l.hosting:!1},c[0][47]={value:l.query?l.query:"N/A"})}if(o.length===1){const u=o[0];if(c[0][12]={value:u[3]},u[63]===!0&&a.isBefore(u[60])){this.loginAttempts={invalidLogins:u[59],login:n,exp:u[60],currentTime:null};const m=a.to(this.loginAttempts.exp,!0);throw{response:{data:{errtext:"Too many failed Login Attempts",errdetail:`Please wait ${m} before attempting to try again.`}}}}if(u[32]==="QuickBase User"){const m={qdbapi:{username:t.email,password:t.password,hours:t.hours||72}};if(!t.email)throw c[0][7]={value:"Invalid Login"},this.addLoginAttempt(c),{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}};return this.axiosIns({method:"post",url:this.config.loginEndpoint,headers:{"QUICKBASE-ACTION":"API_Authenticate","Content-Type":"application/xml"},data:ce(m),withCredentials:!0}).then(v=>{const w=ye(new window.DOMParser().parseFromString(v.data,"text/xml"));if(w.email=t.email,w.errcode!==0)throw v.data=w,c[0][7]={value:"Invalid Login"},this.addLoginAttempt(c),{response:v};if(w.userid==="1.ckbs"||w.userid.startsWith("1."))throw v.data=w,c[0][7]={value:"Invalid Login"},this.addLoginAttempt(c),{response:v};return delete w.action,delete w.errcode,delete w.errtext,v.data=w,c[0][7]={value:"Successful"},this.addLoginAttempt(c),this.setUserTicket(v.data.ticket),this.fetchAndSetUserData(B(F({},v.data),{redirect:!0,redirectPath:r,rid:u[3],userType:t.userType}))}).catch(v=>{throw c[0][7]={value:"Invalid Password"},this.addLoginAttempt(c),v})}else if(u[32]==="Candidate"){if(await Ve.compare(t.password,u[7]))return c[0][7]={value:"Successful"},await this.addLoginAttempt(c,!0),this.fetchAndSetUserData({redirect:!0,redirectPath:r,rid:u[3],userType:t.userType});throw c[0][7]={value:"Invalid Password"},{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}}else if(u[32]==="Project User"){if(await Ve.compare(t.password,u[7]))return c[0][7]={value:"Successful"},await this.addLoginAttempt(c,!0),this.fetchAndSetUserData({redirect:!0,redirectPath:r,rid:u[3],userType:t.userType});throw c[0][7]={value:"Invalid Password"},this.addLoginAttempt(c),{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}}else throw c[0][7]={value:"Invalid Login"},this.addLoginAttempt(c),{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}}else throw c[0][7]={value:"Invalid Login"},this.addLoginAttempt(c),{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}}async checkIfUserExist(t){const r=`{'10'.EX.'Active'}${t.email?`AND{'6'.EX.'${t.email}'}`:""}${t.phoneNumber?`AND{'8'.EX.'${t.phoneNumber}'}`:""}${t.userType?`AND{'32'.EX.'${t.userType}'}`:""}`,s=[{7:{value:"User Request"},8:{value:r},9:{value:1},14:{value:77}}],{data:i}=await this.fetchFromStructureApp({fields:s});return i.length>0}async fetchAndSetUserData(t){this.userStore=this.userStore||T();const{data:r}=await this.userStore.fetchUser(t);if(!r.user)throw{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}};const s=r.user,i=this.getOfficeLocation(),n=this.getCheckIn();if(this.userType=s[32],s[32]==="QuickBase User"?(t.reAuthenticate&&this.nativeQuickbaseReAuthenticate({}),this.dataStore=this.dataStore||Re(),this.dataStore.getSelectedOffice||this.dataStore.setSelectedOffice(r.access.find(a=>a[15]===!0&&a[7]==="Office")),this.loginFeathers({email:s[6],id:s[3]}).catch(async a=>{console.log(a)})):s[32]==="Candidate"?(this.employeeStore=this.employeeStore||U(),we(s[102])&&await this.setUserTicket(s[102],s[104].toDate())):s[32]==="Project User"&&(we(s[102])&&await this.setUserTicket(s[102],s[104].toDate()),r.access.length>0&&(this.projectsStore=this.projectsStore||W(),this.hiringStore=this.hiringStore||pt(),await this.projectsStore.getProjectsData())),s[82]===!0&&s.empRID&&s[32]==="Candidate"){const a=[{9:{value:s[80]},7:{value:"Employee"}}],{data:o}=await this.fetchFromHiringApp({fields:a});if(this.employeeStore=this.employeeStore||U(),this.employeeStore.setEmployee(o.employee,!0),!o.employee.lang||o.employee.lang===0){let c=1;Ye.global.locale.value==="en-US"?c=1:Ye.global.locale.value==="es"&&(c=2);const l={339:{value:c}};this.updateEmployeeData({fields:l})}}if(s[100]===""){this.userStore.$patch(o=>o.user[100]=Ye.global.locale.value);const a=[{3:{value:s[3]},26:{value:"now"},100:{value:Ye.global.locale.value}}];this.upsertRecordsXML({to:"br4pxrbs6",fieldsToReturn:[76],data:a,formatObject:76})}else this.appStore=this.appStore||H(),Ye.global.locale.value=s[100],this.appStore.setLang(s[100]);if(we(s[86])&&s[32]==="Candidate"){const a=[{9:{value:s[86]},7:{value:"Self Check-In"}}],{data:o}=await this.fetchFromRecruitingApp({fields:a});o&&(o[13].isToday()&&o[15]==="Called"&&i&&n?this.checkInUser():o[13].isToday()?(this.appStore=this.appStore||H(),this.appStore.setCheckInData(o)):i&&n?this.checkInUser():(this.appStore=this.appStore||H(),this.appStore.setCheckInData({})))}else i&&n&&s[32]==="Candidate"&&this.checkInUser();return s}loginFeathers(t){return this.serverAPI.login({strategy:"local-quickbase",email:t.email,quickbaseId:t.id,token:this.getUserTicket()}).catch(r=>{throw r})}feathersReAuthenticate(){return this.serverAPI.reAuthenticate()}feathersAuthenticated(){return this.serverAPI.authenticated()}async nativeQuickbaseLogin(t){const r={qdbapi:{username:t.email,password:t.password,hours:t.hours||720}};return this.axiosIns({method:"post",url:this.config.loginEndpoint,headers:{"QUICKBASE-ACTION":"API_Authenticate","Content-Type":"application/xml"},data:ce(r),withCredentials:!0}).then(s=>{const i=ye(new window.DOMParser().parseFromString(s.data,"text/xml"));if(i.email=t.email,i.errcode!==0)throw s.data=i,{response:s};if(i.userid==="1.ckbs"||i.userid.startsWith("1."))throw s.data=i,{response:s};return s.data=i,s.data}).catch(s=>{throw s})}async nativeQuickbaseReAuthenticate(t){let r=this.getUserTicket();if(t.kiosk&&(r=this.getKioskTicket()),!r)return null;const s={qdbapi:{ticket:r,hours:t.hours||336}};return this.axiosIns({method:"post",url:this.config.loginEndpoint,headers:{"QUICKBASE-ACTION":"API_Authenticate","Content-Type":"application/xml"},data:ce(s),withCredentials:!0}).then(i=>{const n=ye(new window.DOMParser().parseFromString(i.data,"text/xml"));if(n.errcode!==0)throw i.data=n,{response:i};if(n.userid==="1.ckbs"||n.userid.startsWith("1."))throw i.data=n,{response:i};return i.data=n,t.kiosk?this.setKioskTicket(i.data.ticket):this.setUserTicket(i.data.ticket),i.data}).catch(i=>{throw i})}async checkInUser(t){t=t||{};const r=await this.getUserInfo(),s=this.getOfficeLocation(),i=await this.getIpInfo();if(this.userStore=this.userStore||T(),this.appStore=this.appStore||H(),this.employeeStore=this.employeeStore||U(),!r||!s)return;if(this.appStore.checkedIn){console.log("already checked in",this.appStore.checkedIn),this.removeCheckIn();return}const n=[{6:{value:r[9]?r[9].phoneNumber:r[8].replace(/[^0-9]/g,"")},7:{value:r[35]},8:{value:r[37]},9:{value:s.rid},10:{value:t.reason?t.reason:"Applying"},11:{value:t.position?t.position:""},13:{value:"now"},16:{value:r[80]},21:{value:!0},24:{value:i?JSON.stringify(i):""}}];try{const{data:a}=await this.upsertRecordsXML({to:"br26nivmr",fieldsToReturn:[3,31],data:n,formatObject:31});this.removeCheckIn(),this.appStore.setCheckInData(a[0][31]);const o=[{3:{value:r[3]},26:{value:"now"},86:{value:a[0][3]}}],{data:c}=await this.upsertRecordsXML({to:"br4pxrbs6",fieldsToReturn:[76],data:o,formatObject:76}),l=c[0][76];if(this.userStore.userLoggedIn){const u=Object.assign({},l);delete u.access,delete u.permissions,this.setUserPermissions(l.permissions,!0),this.setUserAccess(l.access,!0),await this.setUserInfo(u,!0)}return l}catch(a){console.log(a)}}async deActivateAccount(t){const r=`{'10'.EX.'Active'}${t.email?`AND{'6'.EX.'${t.email}'}`:""}${t.phoneNumber?`AND{'8'.EX.'${t.phoneNumber}'}`:""}${t.userType?`AND{'32'.EX.'${t.userType}'}`:""}`,s=[{7:{value:"User Request"},8:{value:r},9:{value:1},14:{value:77}}],{data:i}=await this.fetchFromStructureApp({fields:s});if(i.length>0){const a=[{3:{value:i[0][3]},10:{value:"Inactive"},50:{value:!1},17:{value:!1}}];return await this.upsertRecordsFormat({to:"br4pxrbs6",fieldsToReturn:[76],data:a}),!0}return i}async resetPassword(t){const r=t.firstName.split(" "),s=t.lastName.split(" ");let i=`AND{'35'.CT.'${t.firstName}'}`,n=`AND{'37'.CT.'${t.lastName}'}`;r.length>1&&(r.forEach((m,v)=>{v===0?i=`({'35'.CT.'${m}'}`:i+=`OR{'35'.CT.'${m}'}`}),i+=")"),s.length>1&&(s.forEach((m,v)=>{v===0?n=`AND({'37'.CT.'${m}'}`:n+=`OR{'37'.CT.'${m}'}`}),n+=")");const a=`{'10'.EX.'Active'}${t.email?`AND{'6'.EX.'${t.email}'}`:""}${t.phoneNumber?`AND{'8'.EX.'${t.phoneNumber}'}`:""}${t.userType?`AND{'32'.EX.'${t.userType}'}`:""}${i}${n}`,o=[{7:{value:"User Request"},8:{value:a},9:{value:1},14:{value:77}}],c=await this.fetchFromStructureApp({fields:o}),l=c.data,u=new Date;if(l.length>0){const v=[{3:{value:l[0][3]},26:{value:u},17:{value:!0}}];return await this.upsertRecordsXML({to:"br4pxrbs6",fieldsToReturn:[76],formatObject:76,data:v})}return c}async findAndUpdateUser(t){const r=t.firstName?t.firstName.split(" "):[],s=t.lastName?t.lastName.split(" "):[];let i=t.firstName?`AND{'35'.CT.'${t.firstName}'}`:"",n=t.firstName?`AND{'37'.CT.'${t.lastName}'}`:"";r.length>1&&(r.forEach((u,m)=>{m===0?i=`({'35'.CT.'${u}'}`:i+=`OR{'35'.CT.'${u}'}`}),i+=")"),s.length>1&&(s.forEach((u,m)=>{m===0?n=`AND({'37'.CT.'${u}'}`:n+=`OR{'37'.CT.'${u}'}`}),n+=")");const a=`{'10'.EX.'Active'}${t.email?`AND{'6'.EX.'${t.email}'}`:""}${t.phoneNumber?`AND{'8'.EX.'${t.phoneNumber}'}`:""}${t.userType?`AND{'32'.EX.'${t.userType}'}`:""}${i}${n}`,o=[{7:{value:"User Request"},8:{value:a},9:{value:1},14:{value:77}}],c=await this.fetchFromStructureApp({fields:o}),l=c.data;if(l.length>0){const u=l[0];let m=JSON.parse(JSON.stringify(t.fields[0]));return m=await W0({3:{value:u[3]}},m),await this.upsertRecordsXML({to:"br4pxrbs6",fieldsToReturn:[76],formatObject:76,data:[m]})}return c}async clearLocalForage(){let t=[x.removeItem(this.appConfig.storageUserKeyName),x.removeItem(this.appConfig.storageUserTicketKeyName),x.removeItem(this.appConfig.storagePermissionsKeyName),x.removeItem(this.appConfig.storageAccessKeyName),x.removeItem(this.appConfig.storageOfficeLocationKeyName),x.removeItem(this.appConfig.storageEmployeeKeyName),x.removeItem(this.appConfig.storageCheckInKeyName),x.removeItem(this.appConfig.storageJobBoardKeyName),x.removeItem(this.appConfig.storageProfile),x.removeItem(this.appConfig.storageProfileStep),x.removeItem(this.appConfig.storageProfileVoluntaryForms),x.removeItem(this.appConfig.storageHiringCenter),Q.clear()];return this.appConfig.pageType!=="Candidate Kiosk"&&(t=t.concat([x.removeItem(this.appConfig.storageExperienceOptions),x.removeItem(this.appConfig.storageContactMethods),x.removeItem(this.appConfig.storageEmploymentOptions),x.removeItem(this.appConfig.storageCompanyOptions),x.removeItem(this.appConfig.storageCraftOptions),x.removeItem(this.appConfig.storageRelationshipOptions),x.removeItem(this.appConfig.storageCredentialOptions),x.removeItem(this.appConfig.storageAffirmativeOptions),x.removeItem(this.appConfig.storageVeteranStatusOptions),x.removeItem(this.appConfig.storageDisabilityPages),x.removeItem(this.appConfig.storageDisabilityForm),x.removeItem(this.appConfig.storageEverGreenJobs),x.removeItem(this.appConfig.storageToolCheckList)])),await Promise.allSettled(t)}async storeLogout(){return this.userStore=this.userStore||T(),this.userStore.logout()}async logout(t){const r=Tn(),s=[this.clearLocalForage(),this.removeOfficeLocation()];_r.logout();const i=r._s[Symbol.iterator]();for(const n of i)if(this.appConfig.pageType==="Candidate"||this.appConfig.pageType==="Candidate Kiosk"){if(n[0]==="employee"){s.push(n[1].$reset());continue}if(n[0]==="boardAppStore"){s.push(n[1].$reset());continue}if(n[0]==="profile"){s.push(n[1].$reset());continue}if(n[0]==="assessment"){s.push(n[1].$reset());continue}if(n[0]==="hiringCenter"){s.push(n[1].$reset());continue}}else{s.push(n[1].$reset());continue}return _.remove(this.appConfig.storageUserTicketKeyName,{secure:!0,sameSite:"Strict"}),await Promise.allSettled(s),!0}async upsertRecordsFormat(...t){const r=t[0].formatObject||null;t[0].formatObject&&delete t[0].formatObject;const s=await this.axiosIns.post(this.config.insertRecords,...t).then(async i=>{let{data:n}=i.data;const a=n.map(async c=>{Object.keys(c).map(async u=>{c[u]=await c[u].value})});return n=await Promise.all(a),i.data});return r&&s.data.length>0&&s.data.forEach(i=>{Array.isArray(r)?r.forEach(n=>{Z(n)&&i[n]&&(i[n]=ft(i[n]))}):Z(r)&&(i[r]=ft(i[r])),i[1]&&(i[1]=p(i[1]).tz("America/Chicago")),i[2]&&(i[2]=p(i[2]).tz("America/Chicago"))}),s}async addRecordNoUser(t){const r={qdbapi:{msInUTC:1}};return this.config.appToken&&(r.qdbapi.apptoken=this.config.appToken),t.fields&&(r.qdbapi.fields=t.fields),r.qdbapi.usertoken=this.config.userToken,this.axiosIns({method:"post",url:`https://elitehcms.quickbase.com/db/${t.to}?a=API_AddRecord`,headers:{"QUICKBASE-ACTION":"API_AddRecord","Content-Type":"application/xml"},data:ce(r)}).then(i=>{const n=ye(new window.DOMParser().parseFromString(i.data,"text/xml"));return i.data=n,i.data})}async upsertRecordsXML(t){if(t.data.length>1){const r=[];for(let n=0;n<t.data.length;n++){const a=Object.assign({},t);a.data=[t.data[n]],r.push(this.upsertRecordXML(a))}const s=await Promise.all(r),i={data:[],metadata:{createdRecordIds:[],totalNumberOfRecordsProcessed:0,unchangedRecordIds:[],updatedRecordIds:[]}};return s.forEach((n,a)=>{n.data[0]&&i.data.push(n.data[0]),i.metadata.createdRecordIds=i.metadata.createdRecordIds.concat(n.metadata.createdRecordIds),i.metadata.unchangedRecordIds=i.metadata.unchangedRecordIds.concat(n.metadata.unchangedRecordIds),i.metadata.updatedRecordIds=i.metadata.updatedRecordIds.concat(n.metadata.updatedRecordIds),i.metadata.totalNumberOfRecordsProcessed+=n.metadata.totalNumberOfRecordsProcessed,n.metadata.lineErrors&&(i.metadata.lineErrors||(i.metadata.lineErrors={}),i.metadata.lineErrors[a+1]=n.metadata.lineErrors[1])}),i}else return this.upsertRecordXML(t)}async upsertRecordXML(t){const r={qdbapi:{msInUTC:1}},s=t.formatObject||null,i=t.booleanFields?t.booleanFields.concat(this.config.booleanFields[`${t.to}`]||[]):this.config.booleanFields[`${t.to}`]||[];let n="";t.data[0][3]?(n="API_EditRecord",r.qdbapi.rid=t.data[0][3].value,delete t.data[0][3]):n="API_AddRecord",this.config.appToken&&(r.qdbapi.apptoken=this.config.appToken),t.data&&(r.qdbapi.fields=t.data),t.fieldsToReturn&&(r.qdbapi.clist=t.fieldsToReturn.join("."));const a=await this.getUserTicket();if(a)r.qdbapi.ticket=a;else if(this.config.userToken&&this.config.dev)r.qdbapi.usertoken=this.config.userToken;else if(t.to==="br54phpqz"&&this.appConfig.pageType==="Candidate Kiosk"){const c=this.getKioskTicket();c&&(r.qdbapi.ticket=c)}return this.axiosIns({method:"post",url:`https://elitehcms.quickbase.com/db/${t.to}?a=${n}`,headers:{"QUICKBASE-ACTION":`${n}`,"Content-Type":"application/xml"},data:xt(r)}).then(c=>{let l=ye(new window.DOMParser().parseFromString(c.data,"text/xml"));return l.metadata=B(F({createdRecordIds:[]},l.errcode!==0&&{lineErrors:{}}),{totalNumberOfRecordsProcessed:0,unchangedRecordIds:[],updatedRecordIds:[]}),l.errcode!==0?(l.data=[],l.metadata.lineErrors[1]=[l.errdetail]):(l.data=[Z0(new window.DOMParser().parseFromString(c.data,"text/xml"))],s&&(Array.isArray(s)?s.forEach(u=>{Z(u)&&l.data[0][u]&&(l.data[0][u]=ft(l.data[0][u]))}):Z(s)&&l.data[0][s]&&l.data[0][s]&&(l.data[0][s]=ft(l.data[0][s]))),i.length>0&&i.forEach(u=>{l.data[0][u]&&(l.data[0][u]=l.data[0][u]===1)}),l.data[0][1]&&(l.data[0][1]=p(l.data[0][1]).tz("America/Chicago")),l.data[0][2]&&(l.data[0][2]=p(l.data[0][2]).tz("America/Chicago"))),l.data[0]&&l.rid&&(l.metadata.totalNumberOfRecordsProcessed=1,l.num_fields_changed===0&&(l.metadata.unchangedRecordIds=[l.rid]),n==="API_EditRecord"&&l.num_fields_changed>0?l.metadata.updatedRecordIds=[l.rid]:n==="API_AddRecord"&&(l.metadata.createdRecordIds=[l.rid])),delete l.action,delete l.errcode,delete l.errdetail,delete l.errtext,delete l.num_fields_changed,delete l.rid,delete l.update_id,delete l.record,c.data=l,c.data})}async addRecordXML(t){const r={qdbapi:{msInUTC:1}};this.config.appToken&&(r.qdbapi.apptoken=this.config.appToken),t.fields&&(r.qdbapi.fields=t.fields),t.list&&(r.qdbapi.clist=t.list.join("."));const s=await this.getUserTicket();return s?r.qdbapi.ticket=s:this.config.userToken&&this.config.dev&&(r.qdbapi.usertoken=this.config.userToken),this.axiosIns({method:"post",url:`https://elitehcms.quickbase.com/db/${t.to}?a=API_AddRecord`,headers:{"QUICKBASE-ACTION":"API_AddRecord","Content-Type":"application/xml"},data:ce(r)}).then(n=>{const a=ye(new window.DOMParser().parseFromString(n.data,"text/xml"));return n.data=a,n.data})}async editRecordXML(t){const r={qdbapi:{msInUTC:1}};if(t.rid)r.qdbapi.rid=t.rid;else throw"You must supply rid!";this.config.appToken&&(r.qdbapi.apptoken=this.config.appToken),t.fields&&(r.qdbapi.fields=t.fields),t.list&&(r.qdbapi.clist=t.list.join("."));const s=await this.getUserTicket();return s?r.qdbapi.ticket=s:this.config.userToken&&this.config.dev&&(r.qdbapi.usertoken=this.config.userToken),this.axiosIns({method:"post",url:`https://elitehcms.quickbase.com/db/${t.to}?a=API_EditRecord`,headers:{"QUICKBASE-ACTION":"API_EditRecord","Content-Type":"application/xml"},data:ce(r)}).then(n=>{const a=ye(new window.DOMParser().parseFromString(n.data,"text/xml"));return n.data=a,n.data})}async addLogRecord(t){const r={qdbapi:{}};return r.qdbapi.apptoken="dx47ve3djh2kcybbetrvscuqa2gk",t.data&&(r.qdbapi.fields=t.data),t.list&&(r.qdbapi.clist=t.list.join(".")),r.qdbapi.usertoken="b596fu_ng3q_0_dxyp9j657g8xdbgiftajcj56p7s",fetch("https://elitehcms.quickbase.com/db/bsh2qrysj?a=API_AddRecord",{method:"POST",credentials:"omit",headers:{"Content-Type":"application/xml"},body:xt(r)}).then(n=>n.text()).then(n=>n).catch(n=>{throw n})}async fetchFromProjectsApp(t){const r=await this.upsertRecordsXML({to:"bsazqhchc",fieldsToReturn:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],formatObject:12,data:t.fields});return r.data=r.data[0][12],r}async fetchFromStructureApp(t){const r=await this.upsertRecordsXML({to:"br9srnufv",fieldsToReturn:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],formatObject:12,data:t.fields});return r.data=r.data[0][12],r}async fetchFromHiringApp(t){const r=await this.upsertRecordsXML({to:"br9vuzuj7",fieldsToReturn:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],formatObject:12,data:t.fields});return r.data=r.data[0][12],r}async fetchFromRecruitingApp(t){const r=await this.upsertRecordsXML({to:"br9j45fg5",fieldsToReturn:[1,2,3,4,5,6,7,8,9,10,11,12,13,14],formatObject:12,data:t.fields});return r.data=r.data[0][12],r}async fetchFromCredentialsAndTrainingApp(t){const r=await this.upsertRecordsXML({to:"bsgydhtiq",fieldsToReturn:[1,2,3,4,5,6,7,8,9,10,11,12,13,14],formatObject:12,data:t.fields});return r.data=r.data[0][12],r}async softDeleteEmployee(t){const r=new Date,s=[{3:{value:t},109:{value:""},25:{value:""},28:{value:""},16:{value:""},26:{value:""},34:{value:""},509:{value:!0},510:{value:r}}],{data:i}=await this.upsertRecordsFormat({to:"bp3gb7ng2",fieldsToReturn:[3,500],data:s,formatObject:500});return i[3]}fetchIpInfo(){return fetch("https://api-v1.elitehcms.com/ipInfo").then(t=>t.json()).then(t=>(this.setIpInfo(t),t))}async addLoginAttempt(t,r){try{let c=null;_.has("clm-qb-id")?c=_.get("clm-qb-id"):(c=new DeviceUUID().get(),_.set("clm-qb-id",c,{expires:"365d",secure:!0,sameSite:"Strict"})),t[0][24]={value:c}}catch(c){console.log(c)}const s=t[0][6]?t[0][6].value:"",i=t[0][7]?t[0][7].value:"",n=p(),a=n.add(this.config.lastAttemptExpMinutes,"minute");i[7]==="Invalid Login"||i[7]==="Invalid Password"?s[6]===this.loginAttempts.login?(this.loginAttempts.invalidLogins+=1,this.loginAttempts.exp=a,this.loginAttempts.currentTime=n,t[0][15]={value:this.loginAttempts.invalidLogins},t[0][16]={value:a.valueOf()}):(this.loginAttempts.invalidLogins=1,this.loginAttempts.exp=a,this.loginAttempts.currentTime=n,this.loginAttempts.login=s[6],t[0][15]={value:this.loginAttempts.invalidLogins},t[0][16]={value:a.valueOf()}):i[7]==="Successful"&&(this.loginAttempts={invalidLogins:0,login:null,exp:null,currentTime:null}),t[0][25]={value:this.appConfig.pageId},t[0][26]={value:this.appConfig.appId};const{data:o}=await this.upsertRecordsXML({to:"br54phpqz",data:t,formatObject:22,fieldsToReturn:[3,22]});if(r&&o.length===1&!!o[0][22])return this.setUserTicket(o[0][22][20],o[0][22][23].toDate())}async doQuery(t){const r={qdbapi:F({},this.config.commonParameters)};t.queryTotalRecords=we(t.queryTotalRecords)?t.queryTotalRecords:!1,t.select&&(r.qdbapi.clist=t.select.join(".")),t.where&&(r.qdbapi.query=t.where);let s=null;if(t.sortBy)for(let c=0;c<t.sortBy.length;c++)c===0?(r.qdbapi.slist=`${t.sortBy[c].fieldId?`${t.sortBy[c].fieldId}.`:""}`,s=`${t.sortBy[c].order==="ASC"?"sortorder-A.":"sortorder-D."}`):(r.qdbapi.slist+=`${t.sortBy[c].fieldId?`${t.sortBy[c].fieldId}.`:""}`,s+=`${t.sortBy[c].order==="ASC"?"sortorder-A.":"sortorder-D."}`);t.options&&(r.qdbapi.options=`${t.options.top?`num-${t.options.top}.`:""}${s||""}${t.options.skip&&t.options.skip>0?`skp-${t.options.skip}`:""}`),this.config.appToken&&(r.qdbapi.apptoken=this.config.appToken);const i=await this.getUserTicket();i&&!t.refresh?r.qdbapi.ticket=i:this.config.userToken&&this.config.dev&&(r.qdbapi.usertoken=this.config.userToken);const n=this.axiosIns({method:"post",url:`https://elitehcms.quickbase.com/db/${t.from}?a=API_DoQuery`,headers:{"QUICKBASE-ACTION":"API_DoQuery","Content-Type":"application/xml"},data:ce(r)}).then(c=>{const l={};l.data=G0(new window.DOMParser().parseFromString(c.data,"text/xml")),l.fields=ey(new window.DOMParser().parseFromString(c.data,"text/xml"));const u=[];return l.fields.forEach(m=>{m.type==="checkbox"&&u.push(m.id)}),l.data.forEach(m=>{for(const[v,w]of Object.entries(m))u.includes(v)&&(m[`${v}`]=w===1)}),l.metadata=F({totalRecords:l.data.length,numRecords:l.data.length,numFields:t.select?t.select.length:0,skip:t.options&&t.options.skip?t.options.skip:0},t.options&&t.options.top?{top:t.options.top}:{}),c.data=l,c.data});let a=null;t.queryTotalRecords&&(a=this.axiosIns({method:"post",url:`https://elitehcms.quickbase.com/db/${t.from}?a=API_DoQueryCount`,headers:{"QUICKBASE-ACTION":"API_DoQueryCount","Content-Type":"application/xml"},data:ce(r)}).then(c=>{const l=ye(new window.DOMParser().parseFromString(c.data,"text/xml"));return c.data=l,c.data}));const o=await n;if(t.queryTotalRecords){const c=await a;o.metadata.totalRecords=c.numMatches}return o}async checkKioskStatus(t){this.kioskStore=this.kioskStore||Y(),this.hiringCenterStore=this.hiringCenterStore||G();let r=await x.getItem(this.appConfig.storageLastKioskFetch);const s=this.getKioskTicket();let i=!1;if(r&&r.$d&&!t&&(r=p(r.$d),t=r.isBefore(p().subtract(2,"day")),i=t),!s)return!1;if(r)if(t||!this.kioskStore.kioskAvailable||!this.hiringCenterStore.hiringCenterAvailable){const{data:n}=await this.getNativeQuickbaseUser({kiosk:!0});if(n.login==="Anonymous")return!1;{const a=await this.kioskStore.fetchKioskAccount(n,!0);return s&&i&&this.nativeQuickbaseReAuthenticate({kiosk:!0}),a.length!==0}}else{if(this.kioskStore.kioskAvailable&&this.hiringCenterStore.hiringCenterAvailable&&"45"in this.kioskStore.kioskAccount&&"bookmarks"in this.kioskStore.kioskAccount&&(!t||this.config.dev))return!0;if(this.kioskStore.kioskAvailable&&this.hiringCenterStore.hiringCenterAvailable&&(!t||this.config.dev)){const{data:n}=await this.getNativeQuickbaseUser({kiosk:!0});if(n.login==="Anonymous")return!1;{const a=await this.kioskStore.fetchKioskAccount(n,!0);return s&&this.nativeQuickbaseReAuthenticate({kiosk:!0}),a.length!==0}}else return!1}else{const{data:n}=await this.getNativeQuickbaseUser({kiosk:!0});if(n.login==="Anonymous")return!1;{const a=await this.kioskStore.fetchKioskAccount(n,!1);return s&&i&&this.nativeQuickbaseReAuthenticate({kiosk:!0}),a.length!==0}}}async getNativeQuickbaseUser(t){const r={qdbapi:{}};if(t.qbUser){const n=await this.getUserTicket();r.qdbapi.ticket=n}if(this.config.dev&&t.kiosk){const n=this.getKioskTicket();r.qdbapi.ticket=n}return await this.axiosIns({method:"post",url:"https://elitehcms.quickbase.com/db/main?a=API_GetUserInfo",headers:{"QUICKBASE-ACTION":"API_GetUserInfo","Content-Type":"application/xml"},data:ce(r)}).then(n=>{const a={};return a.data=J0(new window.DOMParser().parseFromString(n.data,"text/xml")),a.data.errcode&&(a.data.email="",a.data.externalAuth=0,a.data.firstName="",a.data.id="1.ckbs",a.data.isVerified=0,a.data.lastName="",a.data.login="Anonymous",a.data.screenName="Anonymous"),n.data=a,n.data})}}const we=e=>!(typeof e=="undefined"||e===null||e===""),Z=e=>!isNaN(parseFloat(e))&&isFinite(e),ce=e=>{let t="";for(const r in e){if(t+=e[r]instanceof Array?"":`<${r}>`,e[r]instanceof Array)if(r==="fields")for(let s=0;s<e[r].length;s++)if(Object.keys(e[r][s]).length===2&&e[r][s].filename){let i=null;for(const n in e[r][s])Z(n)&&(i=n);t+=`<field fid="${i}" filename="${e[r][s].filename}">${e[r][s][`${i}`]}</field>`}else for(const i in e[r][s])t+=`<field fid="${i}">${e[r][s][i].replaceAll("&","&#38;").replaceAll("<","&#60;").replaceAll(">","&#62;")}</field>`;else for(const s in e[r])t+=`<${r}>`,t+=ce(e[r][s]),t+=`</${r}>`;else typeof e[r]=="object"?t+=ce(e[r]):t+=e[r];t+=e[r]instanceof Array?"":`</${r}>`}return t=t.replace(/<\/?[0-9]{1,}>/g,""),t},xt=e=>{let t="";for(const r in e){if(t+=e[r]instanceof Array?"":`<${r}>`,e[r]instanceof Array)if(r==="fields")for(let s=0;s<e[r].length;s++)if(Object.keys(e[r][s]).length===2&&e[r][s].filename){let i=null;for(const n in e[r][s])Z(n)&&(i=n);t+=`<field fid="${i}" filename="${e[r][s].filename}">${e[r][s][`${i}`].value}</field>`}else for(const i in e[r][s])if(Object.keys(e[r][s][i]).length===2&&(e[r][s][i].filename||e[r][s][i].fileName)){let n=e[r][s][i].filename||e[r][s][i].fileName;t+=`<field fid="${i}" filename="${n}">${e[r][s][i].value}</field>`}else try{t+=`<field fid="${i}">${e[r][s][i].value.replaceAll("&","&#38;").replaceAll("<","&#60;").replaceAll(">","&#62;")}</field>`}catch{t+=`<field fid="${i}">${e[r][s][i].value}</field>`}else for(const s in e[r])t+=`<${r}>`,t+=xt(e[r][s]),t+=`</${r}>`;else typeof e[r]=="object"?t+=xt(e[r]):t+=e[r];t+=e[r]instanceof Array?"":`</${r}>`}return t=t.replace(/<\/?[0-9]{1,}>/g,""),t},ye=e=>{const t=e.querySelector("qdbapi").children,r={};for(let s=0;s<t.length;s++)t[s].tagName!=="table"&&(r[`${t[s].tagName}`]=Z(t[s].innerHTML)?parseInt(t[s].innerHTML):t[s].innerHTML);return r},J0=e=>{const t=e.querySelector("qdbapi user");if(!t)return ye(e);const r={id:Z(t.id)?parseInt(t.id):t.id};for(let s=0;s<t.children.length;s++)r[`${t.children[s].tagName}`]=Z(t.children[s].innerHTML)?parseInt(t.children[s].innerHTML):t.children[s].innerHTML;return r},G0=e=>{const t=e.querySelector("qdbapi table records"),r=[];for(let s=0;s<t.children.length;s++){const i={};for(let n=0;n<t.children[s].children.length;n++)t.children[s].children[n].id&&(i[`${t.children[s].children[n].id}`]=Z(t.children[s].children[n].innerHTML)?parseInt(t.children[s].children[n].innerHTML):t.children[s].children[n].innerHTML);r.push(i)}return r},Z0=e=>{const t=e.querySelector("qdbapi record"),r={};for(let s=0;s<t.children.length;s++)t.children[s].id&&(r[`${t.children[s].id}`]=Z(t.children[s].innerHTML)?parseInt(t.children[s].innerHTML):t.children[s].innerHTML);return r},ey=e=>{const t=e.querySelector("qdbapi table fields"),r=[];for(let s=0;s<t.children.length;s++){let i=t.children[s].attributes.field_type.value,n=t.children[s].firstElementChild.nodeName==="label"?t.children[s].firstElementChild.innerHTML:null;if(!n){for(let o=0;o<t.children[s].children.length;o++)if(t.children[s].children[o].nodeName==="label"){n=t.children[s].children[o].innerHTML;break}}i==="float"&&(i="numeric");const a={id:t.children[s].id,label:n,type:i};r.push(a)}return r},be=(e,t)=>(Array.isArray(e)?e.forEach(r=>{Object.keys(r).forEach(s=>{r[s]&&(r[s]=be(r[s],s))})}):!Z(t)&&typeof e=="object"&&!Array.isArray(e)&&e!==null?Object.keys(e).forEach(r=>{e[r]&&(e[r]=be(e[r],r))}):we(e.date)&&we(e.time)&&e.time!=="::"?(e=`${e.date} ${e.time}`,e=p(e,"MM-DD-YYYY H:m:s").tz("America/Chicago")):we(e.date)?(e=`${e.date}`,e=p(e,"MM-DD-YYYY").tz("America/Chicago")):we(e.time)&&e.time!=="::"?(e=`${e.time}`,e=p(e,"H:m:s").tz("America/Chicago")):typeof e=="object"&&!Array.isArray(e)&&e!==null&&Object.keys(e).forEach(r=>{e[r]&&(e[r]=be(e[r],r))}),e),ft=e=>{try{let t=JSON.parse(e);return Array.isArray(t)?t.forEach(r=>{Object.keys(r).forEach(s=>{r[s]&&(r[s]=be(r[s],s))})}):typeof t=="object"&&!Array.isArray(t)&&t!==null&&Object.keys(t).forEach(r=>{Array.isArray(t[r])?t[r].forEach(s=>{Object.keys(s).forEach(i=>{Z(i)&&s[i]?s[i]=be(s[i],i):s[i]&&typeof s[i]=="object"&&!Array.isArray(s[i])&&s[i]!==null&&Object.keys(s[i]).forEach(n=>{s[i][n]&&(s[i][n]=be(s[i][n],n))})})}):typeof t[r]=="object"&&!Array.isArray(t[r])&&t[r]!==null&&(Z(r)?t[r]=be(t[r],r):Object.keys(t[r]).forEach(s=>{t[r][s]&&(t[r][s]=be(t[r][s],s))}))}),t}catch(t){return console.log(t),console.log("error parsing:",e),[]}};function ty(e,t){return{quickbase:new V0(e,t)}}const ry=mr(gr.create({baseURL:Ki.baseURL,timeout:25e3,headers:{"Content-Type":"application/json"}}),{maxRequests:6,perMilliseconds:1e3}),{quickbase:A}=ty(ry,{});var sy=_s(({app:e})=>{e.config.globalProperties.$quickbase=A}),yy=Object.freeze(Object.defineProperty({__proto__:null,default:sy,quickbase:A},Symbol.toStringTag,{value:"Module"}));export{pn as A,$e as B,vn as C,Hr as D,ms as E,U as F,G,J as H,Ve as I,Ae as J,se as K,hy as L,W as M,pt as N,fl as O,Gi as P,Re as Q,py as R,dy as S,yy as T,Tt as _,Ee as a,H as b,Y as c,un as d,Qf as e,en as f,ln as g,yn as h,it as i,fn as j,jd as k,on as l,Ih as m,zr as n,gd as o,xd as p,A as q,kt as r,da as s,Br as t,T as u,Ue as v,rn as w,ku as x,ad as y,bt as z};
