import{_ as Q,r as w,bU as C,c as l,b4 as x,y as T,ap as B,bq as c,B as s,d as n,cT as k,cU as j,aw as N,ab as U,cV as F}from"./index.5ce04a7d.js";import{Q as $}from"./QPage.d4eb12e0.js";import{u as z}from"./use-quasar.93d4018c.js";import{c as E}from"./app.d7de81a1.js";import"./dayjs.e9c58f53.js";import{u as G}from"./dataStore.60a0f3ce.js";import{P as H}from"./projectPipeline.7c56984c.js";import{_ as J}from"./projectSelector.08ca0d8d.js";import"./_commonjsHelpers.a26ce4be.js";import"./localForage.997eedf9.js";import"./index.04bc0a32.js";import"./i18n.31e4f477.js";import"./QInnerLoading.f90947e9.js";import"./QTable.9005f751.js";import"./QList.d5021feb.js";import"./QMarkupTable.02c95792.js";import"./QSelect.2514ef37.js";import"./QChip.f756e44b.js";import"./QMenu.e4a73618.js";import"./position-engine.2b2e7648.js";import"./selection.a822afb9.js";import"./rtl.b51694b1.js";import"./use-fullscreen.ef8d794f.js";import"./QTr.0e3ecb97.js";import"./QTd.ec2de2a5.js";import"./export-file.dc78ba05.js";const K={name:"Pipeline",components:{ProjectPipelineTable:H,projectSelector:J},setup(){const i=z(),a=E(),h=w(null),e=w(""),{getSelectedProject:p}=C(a),{fetchAllDeployments:v,fetchDeployments:m,fetchAllInProcess:d,fetchInProcess:r,fetchAllPending:y,fetchPending:q,getDeployments:P,getInProcess:b,getPending:D}=G(),t=l(()=>p.value?p.value[3]:null),S=l(()=>P(t.value).filter(o=>o[20]==="Complete")),I=l(()=>P(t.value)),R=l(()=>D(t.value)),V=l(()=>b(t.value)),A=l(()=>V.value.concat(R.value.concat(I.value)));async function g(o){if(i.loading.show(),t.value){const u=m({projectId:t.value,refresh:o}),f=r({projectId:t.value,refresh:o}),_=q({projectId:t.value,refresh:o});await u,await f,await _}else{const u=v({refresh:o}),f=d({refresh:o}),_=y({refresh:o});await u,await f,await _}i.loading.hide()}return g(),{projectFilter:h,arrived:S,allPipeline:A,search:e,loadData:g}}},L={class:"q-pt-sm"},M={class:"text-h5 text-dark"},O={class:"text-body2 text-italic q-ml-sm"},W=s("div",{class:"text-subtitle2 text-accent"},"The following people are currently in process or deployed for your job site(s).",-1),X={class:"row items-center"},Y={class:"col-12 col-md-3 q-px-sm"},Z={class:"col-12 col-md-3 q-px-sm"};function ee(i,a,h,e,p,v){const m=x("projectSelector"),d=x("project-pipeline-table");return T(),B($,{style:{"max-width":"100vw"}},{default:c(()=>[s("div",L,[n(k,{flat:""},{default:c(()=>[n(j,{class:"q-pb-none"},{default:c(()=>[s("div",M,[N(" Staffing Pipeline "),s("span",O,"("+U(e.allPipeline.length)+" total)",1)]),W]),_:1}),n(j,null,{default:c(()=>[s("div",X,[s("div",Y,[n(m,{dense:""})]),s("div",Z,[n(F,{dense:"",modelValue:e.search,"onUpdate:modelValue":a[0]||(a[0]=r=>e.search=r),label:"Search"},null,8,["modelValue"])])])]),_:1})]),_:1}),n(d,{rows:e.allPipeline,onRefreshData:a[1]||(a[1]=r=>e.loadData(!0)),filter:e.search},null,8,["rows","filter"])])]),_:1})}var Se=Q(K,[["render",ee]]);export{Se as default};
