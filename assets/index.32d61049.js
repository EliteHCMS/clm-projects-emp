import{c as $,bX as Ne,i as Oe,p as Ee,dv as Re,h as U,bW as j,bQ as ee,co as _e,g as Ve,c0 as Te,c3 as Fe,r as S,d1 as Qe,c8 as Ue,b0 as Me,bY as Be,l as B,_ as F,b5 as P,A as c,B as V,d as l,br as r,D as f,ac as A,ar as N,cF as J,bO as ve,aq as h,cI as pe,G as $e,cE as T,F as W,b4 as ae,cH as X,bT as ce,ax as ne,y as Ae,w as ge,bS as Ie,cG as K,H as Je,bU as Xe}from"./index.4017ca31.js";import{Q as te,b as oe,a as ze}from"./QTabPanels.ec244ca6.js";import{Q as Ye}from"./QTabs.e985372c.js";import{Q as Se}from"./QPage.de97fdf1.js";import{u as H}from"./use-quasar.5edd4060.js";import{q as E,u as me}from"./quickbase.4804bb81.js";import{dayjs as Y}from"./dayjs.01a1f0cd.js";import{a as z,c as se,e as Ce}from"./array.46b57c33.js";import{a as le,b as He}from"./useQuerySaver.d29ff9ee.js";import{u as Z}from"./dataStore.0038134c.js";import{a as re}from"./QSelect.f649ca34.js";import{Q as ye}from"./QForm.09001e6a.js";import{a as he,u as M}from"./vee-validate.esm.12a7079e.js";import{A as Ge,a as Ke}from"./addNewCustomer.f7bdd9b1.js";import{Q as ie,a as qe}from"./QTable.cf3c1214.js";import{Q as de}from"./QTr.a6004cec.js";import{Q as ue}from"./QTd.a5677bd1.js";import{N as We}from"./nameRequestData.f9b4a06f.js";import{P as Ze}from"./projectPipeline.d760f453.js";import{u as je,P as xe,c as ea}from"./pay-rate-v2.72718442.js";import"./use-panel.55e8ac5d.js";import"./touch.70a9dd44.js";import"./selection.238bfdbe.js";import"./QResizeObserver.1fc8b5d0.js";import"./rtl.b51694b1.js";import"./_commonjsHelpers.a26ce4be.js";import"./index.04bc0a32.js";import"./localForage.8295c071.js";import"./api.a5c07642.js";import"./i18n.c0a86e49.js";import"./QChip.4797ac30.js";import"./QMenu.f2054918.js";import"./position-engine.9b406c07.js";import"./states.03e3d448.js";import"./QList.5e1c5b15.js";import"./QMarkupTable.73ed5d05.js";import"./use-fullscreen.61aac10e.js";import"./QTooltip.1e7f358f.js";import"./workday.bdde527e.js";import"./syncEmployeeWithWorkday.31215d0e.js";import"./workdayAPI.fc27fac9.js";import"./QInnerLoading.a464eed9.js";import"./export-file.dc78ba05.js";const aa=["top","right","bottom","left"],De={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>aa.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function Pe(e,t){return{formClass:$(()=>`q-fab--form-${e.square===!0?"square":"rounded"}`),stacked:$(()=>e.externalLabel===!1&&["top","bottom"].includes(e.labelPosition)),labelProps:$(()=>{if(e.externalLabel===!0){const u=e.hideLabel===null?t.value===!1:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${e.labelPosition}`+(u===!0?" q-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${e.labelPosition}`+(e.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:e.labelStyle}}})}}const Le={start:"self-end",center:"self-center",end:"self-start"},ta=Object.keys(Le);var G=Ne({name:"QFabAction",props:{...De,icon:{type:String,default:""},anchor:{type:String,validator:e=>ta.includes(e)},to:[String,Object],replace:Boolean},emits:["click"],setup(e,{slots:t,emit:u}){const o=Oe(Re,()=>({showing:{value:!0},onChildClick:Ee})),{formClass:s,labelProps:y}=Pe(e,o.showing),a=$(()=>{const g=Le[e.anchor];return s.value+(g!==void 0?` ${g}`:"")}),i=$(()=>e.disable===!0||o.showing.value!==!0);function v(g){o.onChildClick(g),u("click",g)}function _(){const g=[];return t.icon!==void 0?g.push(t.icon()):e.icon!==""&&g.push(U(ee,{name:e.icon})),(e.label!==""||t.label!==void 0)&&g[y.value.action](U("div",y.value.data,t.label!==void 0?t.label():[e.label])),_e(t.default,g)}const R=Ve();return Object.assign(R.proxy,{click:v}),()=>U(j,{class:a.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:i.value,onClick:v},_)}});const oa=["up","right","down","left"],sa=["left","center","right"];var ke=Ne({name:"QFab",props:{...De,...Te,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{default:null},direction:{type:String,default:"right",validator:e=>oa.includes(e)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>sa.includes(e)}},emits:Fe,setup(e,{slots:t}){const u=S(null),o=S(e.modelValue===!0),s=Qe(),{proxy:{$q:y}}=Ve(),{formClass:a,labelProps:i}=Pe(e,o),v=$(()=>e.persistent!==!0),{hide:_,toggle:R}=Ue({showing:o,hideOnRouteChange:v}),g=$(()=>({opened:o.value})),k=$(()=>`q-fab z-fab row inline justify-center q-fab--align-${e.verticalActionsAlign} ${a.value}`+(o.value===!0?" q-fab--opened":" q-fab--closed")),p=$(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${e.direction} q-fab__actions--${o.value===!0?"opened":"closed"}`),d=$(()=>{const w={id:s,role:"menu"};return o.value!==!0&&(w["aria-hidden"]="true"),w}),b=$(()=>`q-fab__icon-holder  q-fab__icon-holder--${o.value===!0?"opened":"closed"}`);function q(w,L){const D=t[w],Q=`q-fab__${w} absolute-full`;return D===void 0?U(ee,{class:Q,name:e[L]||y.iconSet.fab[L]}):U("div",{class:Q},D(g.value))}function I(){const w=[];return e.hideIcon!==!0&&w.push(U("div",{class:b.value},[q("icon","icon"),q("active-icon","activeIcon")])),(e.label!==""||t.label!==void 0)&&w[i.value.action](U("div",i.value.data,t.label!==void 0?t.label(g.value):[e.label])),_e(t.tooltip,w)}return Me(Re,{showing:o,onChildClick(w){_(w),u.value!==null&&u.value.$el.focus()}}),()=>U("div",{class:k.value},[U(j,{ref:u,class:a.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":o.value===!0?"true":"false","aria-haspopup":"true","aria-controls":s,onClick:R},I),U("div",{class:p.value,...d.value},Be(t.default))])}});const la=B({emits:["cancelEdit"],components:{AddProjectLocationForm:Ge,AddCustomerForm:Ke},props:{config:Object},setup(e,{emit:t}){const u=S(null),o=S(null),s=S(!1),y=async()=>{const{type:d,initialValue:b}=e.config;if(d==="options"){const{getter:q}=e.config;o.value=await q(),u.value=o.value,R.value=b(u.value)}else R.value=b},a=$(()=>z({entry:e.config.formRules})),{meta:i,errors:v,handleSubmit:_}=he({validationSchema:a}),{value:R}=M("entry"),g=(d,b)=>{const{filter:q}=e.config;d===""&&b(()=>{u.value=o.value}),b(()=>{const I=d.toLowerCase();u.value=q(o.value,I)})},k=d=>{s.value=!1,o.value.push(d),u.value.push(d),R.value=d},p=_(async d=>{const{setter:b}=e.config;await b(d.entry),t("cancelEdit")});return y(),{rawOptions:o,options:u,entry:R,formErrors:v,formMeta:i,submit:p,filterOptions:g,addNew:s,newOptionAdded:k}}}),na={key:0,class:"q-pr-xl"},ra={class:"text-caption"},ia={key:0,class:"text-center bg-info"},da={key:0,class:"text-center bg-info"},ua={key:1,class:"q-pr-xl"},ca={class:"text-caption"};function ma(e,t,u,o,s,y){const a=P("add-project-location-form"),i=P("add-customer-form");return c(),V("div",null,[l(ye,{onSubmit:ve(e.submit,["prevent"])},{default:r(()=>[e.config.type==="options"?(c(),V("div",na,[l(re,{class:"q-mb-sm",dense:"",label:`Select a ${e.config.fieldLabel}`,"transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.entry,"onUpdate:modelValue":t[3]||(t[3]=v=>e.entry=v),options:e.options,"option-label":e.config.optionLabel,"display-value":`${e.entry?e.entry[e.config.displayValue]:""}`,"bottom-slots":"",error:!!e.formErrors.entry,"stack-label":"","use-input":"","input-debounce":"0",onFilter:e.filterOptions,clearable:"",loading:!e.rawOptions,disable:!e.rawOptions},{error:r(()=>[f("div",ra,A(e.formErrors.entry),1)]),after:r(()=>[l(j,{type:"submit",color:"info",icon:"done",dense:"",onClick:e.submit},null,8,["onClick"]),l(j,{color:"dark",icon:"close",dense:"",onClick:t[0]||(t[0]=v=>e.$emit("cancelEdit"))})]),"after-options":r(()=>[e.config.allowNew&&e.options&&e.options.length>0?(c(),V("div",ia,[l(j,{flat:"",color:"white",label:`Add a New ${e.config.fieldLabel}`,onClick:t[1]||(t[1]=v=>e.addNew=!0)},null,8,["label"])])):N("",!0)]),"no-option":r(()=>[e.config.allowNew?(c(),V("div",da,[l(j,{flat:"",color:"white",label:`Add a New ${e.config.fieldLabel}`,onClick:t[2]||(t[2]=v=>e.addNew=!0)},null,8,["label"])])):N("",!0)]),_:1},8,["label","modelValue","options","option-label","display-value","error","onFilter","loading","disable"])])):N("",!0),e.config.type==="input"?(c(),V("div",ua,[l(J,{class:"q-mb-sm",dense:"",label:e.config.fieldLabel,modelValue:e.entry,"onUpdate:modelValue":t[5]||(t[5]=v=>e.entry=v),"bottom-slots":"",error:!!e.formErrors.entry,"stack-label":""},{error:r(()=>[f("div",ca,A(e.formErrors.entry),1)]),after:r(()=>[l(j,{type:"submit",color:"info",icon:"done",dense:"",onClick:e.submit},null,8,["onClick"]),l(j,{color:"dark",icon:"close",dense:"",onClick:t[4]||(t[4]=v=>e.$emit("cancelEdit"))})]),_:1},8,["label","modelValue","error"])])):N("",!0)]),_:1},8,["onSubmit"]),l(pe,{modelValue:e.addNew,"onUpdate:modelValue":t[8]||(t[8]=v=>e.addNew=v)},{default:r(()=>[e.config.newType==="location"?(c(),h(a,{key:0,onCancelAdd:t[6]||(t[6]=v=>e.addNew=!1),onAddComplete:e.newOptionAdded},null,8,["onAddComplete"])):N("",!0),e.config.newType==="customer"?(c(),h(i,{key:1,onCancelAdd:t[7]||(t[7]=v=>e.addNew=!1),onAddComplete:e.newOptionAdded},null,8,["onAddComplete"])):N("",!0)]),_:1},8,["modelValue"])])}var fa=F(la,[["render",ma]]);const ba=B({emits:[],props:{item:Object},components:{EditDetailsForm:fa},setup(e,{emit:t}){const u=S(!1),o=$(()=>{const{permission:s}=e.item.editable&&e.item.config?e.item.config:{action:null,subject:null};return s});return{edit:u,permission:o}}}),pa={key:0,class:"row"},va={class:"col-12 col-md-4"},ga={class:"col-12 col-md-8"};function ya(e,t,u,o,s,y){const a=P("edit-details-form");return c(),h(T,{class:"q-py-sm"},{default:r(()=>[e.edit?(c(),h(a,{key:1,type:e.item.label,config:e.item.config,onCancelEdit:t[1]||(t[1]=i=>e.edit=!1)},null,8,["type","config"])):(c(),V("div",pa,[f("div",va,[f("div",null,[f("span",{class:$e(e.$q.screen.gt.lg?"text-body2":"text-caption")},A(e.item.label),3)])]),f("div",ga,[f("div",null,[f("span",{class:$e(["text-weight-light",e.$q.screen.gt.lg?"text-body2":"text-caption"])},A(e.item.value),3),e.item.editable&&e.$can(e.permission.action,e.permission.subject)?(c(),h(j,{key:0,color:"accent",flat:"",dense:"",round:"",icon:"edit",size:"sm",onClick:t[0]||(t[0]=i=>e.edit=!0)})):N("",!0)])])]))]),_:1})}var ha=F(ba,[["render",ya]]);const qa=B({props:{title:String,details:Array},components:{DetailsSection:ha}}),wa={class:"text-body1 text-white"};function $a(e,t,u,o,s,y){const a=P("details-section");return c(),V("div",null,[l(X,{class:"text-dark q-pb-sm"},{default:r(()=>[e.title&&e.title!==""?(c(),h(T,{key:0,class:"bg-info q-py-sm"},{default:r(()=>[f("div",wa,A(e.title.toUpperCase()),1)]),_:1})):N("",!0),(c(!0),V(W,null,ae(e.details,i=>(c(),V(W,{key:i},[i.hide?N("",!0):(c(),h(a,{key:0,item:i},null,8,["item"]))],64))),128))]),_:1})])}var Ca=F(qa,[["render",$a]]);const ka=B({props:{rows:Array},setup(e,t){const u=H();ce();const o=$(()=>u.screen.gt.sm?[{name:1,label:"Created",align:"left",field:a=>a[1].$d,format:a=>`${Y(a).fromNow()}`,sortable:!0},{name:2,label:"ID",align:"left",field:a=>a[3],format:a=>`${a}`,sortable:!0,required:!0},{name:3,label:"Classification",align:"left",field:a=>a[21],format:a=>`${a===""?"Open":a}`,sortable:!0,required:!0},{name:4,label:"Status",align:"left",field:a=>a[17],format:a=>`${a}`,sortable:!0},{name:5,label:"Rate",align:"left",field:a=>a[23],format:a=>`$ ${a.toFixed(2)}`,sortable:!0,required:!0},{name:6,label:"# Requested",align:"right",field:a=>a[18],format:a=>`${a}`},{name:7,label:"Offers",align:"right",field:a=>s(a),format:a=>`${a}`,sortable:!0,required:!0},{name:8,label:"# Names",align:"right",field:a=>a.names,format:a=>a?a.length:0,sortable:!0,required:!0},{name:9,label:"Balance",align:"right",field:a=>y(a),format:a=>`${a}`,sortable:!0,required:!0}]:[]);function s(a){return a.offers.filter(i=>i[21]==="Accepted").length}function y(a){const i=s(a);return a[18]-i}return{columns:o,props:e}}}),Na={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function Ra(e,t,u,o,s,y){return c(),V("div",null,[l(qe,{columns:e.columns,rows:e.props.rows,"row-key":a=>a[3],class:"q-pa-sm",pagination:{rowsPerPage:10},"table-header-class":"bg-dark text-white","no-data-label":"There are no classifications",dense:""},{header:r(a=>[l(de,{class:"bg-dark text-white",props:a},{default:r(()=>[(c(!0),V(W,null,ae(a.cols,i=>(c(),h(ie,{key:i.name,props:a},{default:r(()=>[ne(A(i.label),1)]),_:2},1032,["props"]))),128)),l(ie,{"auto-width":""})]),_:2},1032,["props"])]),body:r(a=>[l(de,{props:a},{default:r(()=>[(c(!0),V(W,null,ae(a.cols,i=>(c(),h(ue,{key:i.name,props:a},{default:r(()=>[ne(A(i.value),1)]),_:2},1032,["props"]))),128)),l(ue,{"auto-width":""},{default:r(()=>[a.row[17]==="Pending"&&e.$can("manage","projectRequests")&&!e.$can("read","hireRequests")?(c(),h(ee,{key:0,class:"cursor-pointer",size:e.$q.screen.gt.sm?"sm":"xs",color:"primary",round:"",dense:"",onClick:i=>e.$emit("removeRow",a.row),name:"delete_forever"},null,8,["size","onClick"])):N("",!0)]),_:2},1024)]),_:2},1032,["props"])]),"no-data":r(({message:a})=>[f("div",Na,[l(ee,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),f("span",null,A(a),1)])]),"top-right":r(()=>[l(j,{color:"secondary",flat:"","icon-right":"refresh",label:"Refresh",onClick:t[0]||(t[0]=a=>e.$emit("refresh"))})]),_:1},8,["columns","rows","row-key"])])}var _a=F(ka,[["render",Ra]]);const Va=B({props:{data:Object},components:{ClassificationsTable:_a},setup(e,t){const u=H(),{getClassifications:o,fetchClassifications:s,removeData:y,updateViewedRequests:a,getHireRequest:i}=Z(),v=$(()=>i(e.data[3])&&i(e.data[3]).classes?i(e.data[3]).classes:o(e.data[3]).sort((g,k)=>g[1].$d<k[1].$d?1:-1));async function _(g){u.loading.show();const{data:k}=await s({id:e.data[3]});a({id:e.data[3],dataset:"classes",data:k}),u.loading.hide()}async function R(g){u.dialog({title:"Confirm",message:`Are you sure you want to remove ${g[12]} from request# ${g[6]}?`,cancel:!0,persistent:!0}).onOk(async()=>{try{const{data:k}=await E.upsertRecordsXML({to:"bpzpyqcu4",data:[{3:{value:g[3]},17:{value:"Cancelled"},51:{value:new Date},128:{value:6}}],fieldsToReturn:[220],formatObject:220});y({type:"classifications",key:k[0][220][6],item:k[0][220],storageKey:"storageRequestClassifications"});const p=v.value.filter(d=>d[3]!==k[0][220][3]);a({id:e.data[3],dataset:"classes",data:p})}catch(k){u.notify({type:"negative",message:"Cannot remove classification"}),console.log(k)}})}return _(),console.log(e.data),{rows:v,removeRow:R,loadData:_}}});function Aa(e,t,u,o,s,y){const a=P("classifications-table");return c(),V("div",null,[l(a,{rows:e.rows,onRemoveRow:e.removeRow,onRefresh:t[0]||(t[0]=i=>e.loadData(!0))},null,8,["rows","onRemoveRow"])])}var Sa=F(Va,[["render",Aa]]);const ja=B({props:{data:Object},components:{NameRequestDataTable:We},setup(e,t){const u=H(),o=ce(),{capitalize:s}=Ae,y=S(""),{getNameRequest:a,fetchNameRequest:i,removeData:v}=Z(),{userData:_}=me(),R=$(()=>a(e.data[3]).sort((b,q)=>b[1].$d<q[1].$d?1:-1));async function g(){u.loading.show(),await i({id:e.data[3]}),u.loading.hide()}function k(b){return`${s(b[6].toLowerCase())} ${s(b[7].toLowerCase())}`}async function p(b){u.dialog({title:"Confirm",message:`Are you sure you want to remove ${k(b)} from request# ${b[18]}?`,cancel:!0,persistent:!0}).onOk(async()=>{try{const{data:q}=await E.upsertRecordsXML({to:"bsg4yb4wa",data:[{3:{value:b[3]},11:{value:!0},12:{value:Y().tz("America/Chicago")},13:{value:`${_[35]} ${_[37]}`}}],fieldsToReturn:[15],formatObject:15});v({type:"nameRequest",key:q[0][15][18],item:q[0][15],storageKey:"storageNameRequest"})}catch(q){u.notify({type:"negative",message:"Cannot remove name request"}),console.log(q)}})}const d=b=>{o.push({name:"ee-summary",params:{id:b[3]}})};return g(),{nameRequests:R,search:y,removeName:p,viewEmployee:d}}}),Da={class:"row items-center"},Pa={class:"col-12 col-md-4"};function La(e,t,u,o,s,y){const a=P("name-request-data-table");return c(),V("div",null,[l(X,{flat:""},{default:r(()=>[l(T,null,{default:r(()=>[f("div",Da,[f("div",Pa,[l(J,{dense:"",modelValue:e.search,"onUpdate:modelValue":t[0]||(t[0]=i=>e.search=i),label:"Search"},null,8,["modelValue"])])])]),_:1})]),_:1}),l(a,{requests:e.nameRequests,status:"Named",onRemoveName:e.removeName,onViewEmployee:e.viewEmployee},null,8,["requests","onRemoveName","onViewEmployee"])])}var Oa=F(ja,[["render",La]]);const Ea=B({props:{rows:Array},setup(e,t){const u=H();return ce(),{columns:$(()=>u.screen.gt.sm?[{name:1,label:"Created",align:"left",field:s=>s[1].$d,format:s=>`${Y(s).fromNow()}`,sortable:!0},{name:2,label:"Offered To",align:"left",field:s=>s.employee[24],format:s=>`${s}`,sortable:!0,required:!0},{name:3,label:"Classification",align:"left",field:s=>s[57],format:s=>`${s===""?"Open":s}`,sortable:!0,required:!0},{name:4,label:"Status",align:"left",field:s=>s[21],format:s=>`${s}`,sortable:!0},{name:5,label:"Rate Offered",align:"left",field:s=>s[22],format:s=>`$ ${s.toFixed(2)}`,sortable:!0,required:!0}]:[{name:1,label:"Created",align:"left",field:s=>s[1].$d,format:s=>`${Y(s).fromNow()}`,sortable:!0},{name:2,label:"Offered To",align:"left",field:s=>s.employee[24],format:s=>`${s}`,sortable:!0,required:!0},{name:3,label:"Classification",align:"left",field:s=>s[57],format:s=>`${s===""?"Open":s}`,sortable:!0,required:!0},{name:4,label:"Status",align:"left",field:s=>s[21],format:s=>`${s}`,sortable:!0},{name:5,label:"Rate Offered",align:"left",field:s=>s[22],format:s=>`$ ${s.toFixed(2)}`,sortable:!0,required:!0}]),props:e}}}),Ta={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function Fa(e,t,u,o,s,y){return c(),V("div",null,[l(qe,{columns:e.columns,rows:e.props.rows,"row-key":a=>a[3],class:"q-pa-sm",pagination:{rowsPerPage:10},"table-header-class":"bg-dark text-white","no-data-label":"There are no offers",dense:""},{"no-data":r(({message:a})=>[f("div",Ta,[l(ee,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),f("span",null,A(a),1)])]),_:1},8,["columns","rows","row-key"])])}var Qa=F(Ea,[["render",Fa]]);const Ua=B({props:{data:Array},components:{OffersDataTable:Qa},setup(e){const t=S("");return{offers:$(()=>{const o=[];return e.data.forEach(s=>{`${s.employee[24].toLowerCase}`.includes(t.value.toLowerCase())&&o.push(s)}),o}),search:t}}}),Ma={class:"row items-center"},Ba={class:"col-12 col-md-4"};function Ia(e,t,u,o,s,y){const a=P("offers-data-table");return c(),V("div",null,[l(X,{flat:""},{default:r(()=>[l(T,null,{default:r(()=>[f("div",Ma,[f("div",Ba,[l(J,{dense:"",modelValue:e.search,"onUpdate:modelValue":t[0]||(t[0]=i=>e.search=i),label:"Search"},null,8,["modelValue"])])])]),_:1})]),_:1}),l(a,{rows:e.offers},null,8,["rows"])])}var Ja=F(Ua,[["render",Ia]]);const Xa={name:"Pipeline",components:{ProjectPipelineTable:Ze},props:{request:Object},setup(e){const t=H(),u=S(""),{fetchDeployments:o,fetchInProcess:s,fetchPending:y,getDeployments:a,getInProcess:i,getPending:v}=Z(),_=$(()=>a(e.request[3]).filter(b=>b[20]==="Complete")),R=$(()=>{const b=[];return a(e.request[3]).forEach(q=>{q[31].toLowerCase().includes(u.value.toLowerCase())&&b.push(q)}),b}),g=$(()=>{const b=[];return v(e.request[3]).forEach(q=>{q[25].toLowerCase().includes(u.value.toLowerCase())&&b.push(q)}),b}),k=$(()=>{const b=[];return i(e.request[3]).forEach(q=>{q[39].toLowerCase().includes(u.value.toLowerCase())&&b.push(q)}),b}),p=$(()=>k.value.concat(g.value.concat(R.value)));async function d(){t.loading.show(),await o({requestId:e.request[3]}),await s({requestId:e.request[3]}),await y({requestId:e.request[3]}),t.loading.hide()}return d(),ge(p,(b,q)=>{console.log(b)}),{arrived:_,allPipeline:p,search:u}}},za={class:"q-pt-sm"},Ya={class:"text-h5 text-dark"},Ha={class:"text-body2 text-italic q-ml-sm"},Ga=f("div",{class:"text-subtitle2 text-accent"},"The following people are currently in process or deployed for this request.",-1),Ka={class:"row items-center"},Wa={class:"col-12 col-md-3 q-px-sm"};function Za(e,t,u,o,s,y){const a=P("project-pipeline-table");return c(),h(Se,{style:{"max-width":"100vw"}},{default:r(()=>[f("div",za,[l(X,{flat:""},{default:r(()=>[l(T,{class:"q-pb-none"},{default:r(()=>[f("div",Ya,[ne(" Staffing Pipeline "),f("span",Ha,"("+A(o.allPipeline.length)+" total)",1)]),Ga]),_:1}),l(T,null,{default:r(()=>[f("div",Ka,[f("div",Wa,[l(J,{dense:"",modelValue:o.search,"onUpdate:modelValue":t[0]||(t[0]=i=>o.search=i),label:"Search"},null,8,["modelValue"])])])]),_:1})]),_:1}),l(a,{rows:o.allPipeline},null,8,["rows"])])]),_:1})}var xa=F(Xa,[["render",Za]]);const et=B({emits:["namesAdded","closeNames"],components:{},props:{request:Object},setup(e,{emit:t}){const u=H(),{getClassifications:o,addNameRequest:s}=Z(),{userData:y}=me(),{capitalize:a}=Ae;S(!1);const i=S(10);S(null);const v=S([]),_=$(()=>o(e.request[3])||[]),R=[{name:0,label:"#",align:"left",field:n=>n.id,format:n=>`${n}`},{name:1,label:"First Name",align:"left",field:n=>n.firstName,format:n=>`${a(n.toLowerCase())}`,sortable:!0},{name:2,label:"Last Name",align:"left",field:n=>n.lastName,format:n=>`${a(n.toLowerCase())}`,sortable:!0},{name:3,label:"Phone",align:"left",field:n=>n.phone,format:n=>`${n}`,sortable:!1,required:!0},{name:4,label:"Last 4",align:"left",field:n=>n.ssn,format:n=>`${n}`}],g=$(()=>{const n=new RegExp("^[0-9]{"+i.value+"}","g");return z({job:z().required("Classification is required"),firstName:se().required().label("First Name"),lastName:se().required().label("Last Name"),phoneNumber:se().matches(n,{excludeEmptyString:!0,message:"Number Only!"}).required().label("Phone Number"),ssn:se().matches(/^\d+$/,{excludeEmptyString:!0,message:"Numbers Only!"}).required().label("Last 4 of SSN")})}),{errors:k,handleSubmit:p,resetForm:d,isSubmitting:b}=he({validationSchema:g,initialValues:{job:_.value.length===1?_.value[0]:null}}),{value:q}=M("job"),{value:I}=M("firstName"),{value:w}=M("lastName"),{value:L}=M("phoneNumber"),{value:D}=M("ssn"),Q=p(n=>{const m={id:v.value.length+1,classification:n.job,firstName:n.firstName,lastName:n.lastName,phone:n.phoneNumber,ssn:n.ssn};v.value.push(m),d()}),fe=n=>{const m=v.value.filter(C=>C.id!==n.id);v.value=m},x=async n=>{const m=y;m.access&&delete m.access,m.permissions&&delete m.permissions;const{data:C}=await E.upsertRecordsXML({to:"bsg4yb4wa",data:[{6:{value:n.firstName},7:{value:n.lastName},8:{value:n.phone},10:{value:"Has Not Arrived"},19:{value:Y()},16:{value:n.ssn},14:{value:`${m[35]} ${m[37]}`},17:{value:n.classification[3]}}],fieldsToReturn:[15],formatObject:15}),O=C[0][15];return O[45]>O[43]&&je({id:O[17],qty:O[45]}),O};return{formErrors:k,submit:Q,job:q,firstName:I,lastName:w,phoneNumber:L,ssn:D,resetForm:d,classifications:_,names:v,columns:R,removeRow:fe,submitNames:async()=>{u.loading.show();const n=[];v.value.forEach(O=>{const be=x(O);n.push(be)});const C=(await Promise.allSettled(n)).map(O=>O.value);console.log(C),s({id:e.request[3],data:C}),u.notify({type:"positive",message:"Names successfully added!"}),t("namesAdded"),u.loading.hide()}}}}),at={class:"q-mb-sm"},tt={class:"text-caption"},ot={class:"q-mb-sm"},st={class:"text-caption"},lt={class:"q-mb-sm"},nt={class:"text-caption"},rt={class:"q-mb-sm"},it={class:"text-caption"},dt={class:"text-caption"},ut={class:"text-caption"};function ct(e,t,u,o,s,y){return c(),h(ye,{onSubmit:ve(e.submit,["prevent"])},{default:r(()=>[l(X,null,{default:r(()=>[l(T,{class:"q-pb-sm"},{default:r(()=>[f("div",at,[l(J,{dense:"",label:"First Name",modelValue:e.firstName,"onUpdate:modelValue":t[0]||(t[0]=a=>e.firstName=a),error:!!e.formErrors.firstName,"bottom-slots":""},{error:r(()=>[f("div",tt,A(e.formErrors.firstName),1)]),_:1},8,["modelValue","error"])]),f("div",ot,[l(J,{dense:"",label:"Last Name",modelValue:e.lastName,"onUpdate:modelValue":t[1]||(t[1]=a=>e.lastName=a),error:!!e.formErrors.lastName,"bottom-slots":""},{error:r(()=>[f("div",st,A(e.formErrors.lastName),1)]),_:1},8,["modelValue","error"])]),f("div",lt,[l(J,{dense:"",label:"Phone Number",modelValue:e.phoneNumber,"onUpdate:modelValue":t[2]||(t[2]=a=>e.phoneNumber=a),error:!!e.formErrors.phoneNumber,"bottom-slots":""},{error:r(()=>[f("div",nt,A(e.formErrors.phoneNumber),1)]),_:1},8,["modelValue","error"])]),f("div",rt,[l(J,{maxlength:"4",dense:"",label:"SSN Last 4",modelValue:e.ssn,"onUpdate:modelValue":t[3]||(t[3]=a=>e.ssn=a),error:!!e.formErrors.ssn,"bottom-slots":""},{error:r(()=>[f("div",it,A(e.formErrors.ssn),1)]),_:1},8,["modelValue","error"])]),f("div",null,[l(re,{dense:"",label:"Classification","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.job,"onUpdate:modelValue":t[4]||(t[4]=a=>e.job=a),options:e.classifications,"option-label":a=>a?`${a[21]}`:"","display-value":e.job?`${e.job[21]}`:"","bottom-slots":"",error:!!e.formErrors.job},{error:r(()=>[f("div",dt,A(e.formErrors.job),1)]),_:1},8,["modelValue","options","option-label","display-value","error"])])]),_:1}),l(Ie),l(K,{class:"q-pt-sm",align:"right"},{default:r(()=>[e.names.length===0?(c(),h(j,{key:0,dense:"",label:"Cancel",color:"secondary",onClick:t[5]||(t[5]=a=>e.$emit("closeNames"))})):N("",!0),l(j,{dense:"",color:"info",label:"Save Name",type:"submit",onClick:e.submit},null,8,["onClick"])]),_:1}),e.names.length>0?(c(),h(T,{key:0,class:"q-px-none"},{default:r(()=>[l(qe,{flat:"",columns:e.columns,rows:e.names,"row-key":a=>a.name,class:"q-pa-sm",pagination:{rowsPerPage:100},"table-header-class":"bg-dark text-white",dense:"","hide-pagination":""},{header:r(a=>[l(de,{class:"bg-dark text-white",props:a},{default:r(()=>[(c(!0),V(W,null,ae(a.cols,i=>(c(),h(ie,{class:"text-left",key:i.name},{default:r(()=>[ne(A(i.label),1)]),_:2},1024))),128)),l(ie,{"auto-width":""})]),_:2},1032,["props"])]),body:r(a=>[l(de,{"no-hover":"",props:a},{default:r(()=>[(c(!0),V(W,null,ae(a.cols,i=>(c(),h(ue,{key:i.name,props:a},{default:r(()=>[f("span",ut,A(i.value),1)]),_:2},1032,["props"]))),128)),l(ue,{"auto-width":""},{default:r(()=>[l(j,{round:"",flat:"",icon:"delete",color:"accent",onClick:i=>e.removeRow(a.row)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["columns","rows","row-key"])]),_:1})):N("",!0),e.names.length>0?(c(),h(K,{key:1,align:"right"},{default:r(()=>[l(j,{dense:"",label:"Cancel",color:"secondary",onClick:t[6]||(t[6]=a=>e.$emit("closeNames"))}),l(j,{dense:"",color:"primary",label:"Submit These Names",onClick:e.submitNames},null,8,["onClick"])]),_:1})):N("",!0)]),_:1})]),_:1},8,["onSubmit"])}var mt=F(et,[["render",ct]]);const ft=B({emits:["jobsAdded","closeJobs","jobUpdated"],components:{PayRateField:xe},props:{request:Object},setup(e,{emit:t}){H();const{getClassifications:u}=Z();me();const o=S([]),s=$(()=>u(e.request[3])||[]),y=z({craft:z().required().nullable().label("Craft"),classification:z().required().nullable().label("Classification"),rate:Ce().required().nullable().label("Rate"),qty:Ce().required().nullable().label("Quantity")}),{errors:a,handleSubmit:i,resetForm:v,isSubmitting:_,setFieldError:R}=he({validationSchema:y}),{value:g}=M("craft"),{value:k}=M("classification"),{value:p}=M("rate"),{value:d}=M("qty"),b=i(async w=>{const L=s.value.find(D=>D[9]===w.classification[3]&&D[23]===w.rate);if(L){const D=L[18]+w.qty,Q=await je({id:L[3],qty:D});t("jobUpdated",Q)}else{const D=await ea({requestData:e.request,job:w});t("jobsAdded",D)}}),q=async()=>{const{data:w}=await E.fetchFromProjectsApp({fields:[le({type:"projectCrafts",query:`{'7'.EX.'${e.request[6]}'}AND{'6'.EX.'Active'}`})]}),L=w.sort((D,Q)=>D[20]>Q[20]?1:-1);o.value=L,console.log(s.value)},I=$(()=>{const w=g.value&&g.value.classifications?g.value.classifications:[];return w.length>0?w.sort((L,D)=>L[32]>D[32]?-1:1):[]});return ge(k,(w,L)=>{w&&w.hasFixedRate?p.value=w.fixedRate:p.value&&(p.value=null)}),q(),{errors:a,submit:b,classificationOptions:I,craft:g,classification:k,rate:p,qty:d,crafts:o}}}),bt={key:0,class:"text-body2 text-italic text-weight-bold text-dark"},pt={key:1,class:"text-body2 text-italic text-weight-bold text-dark"},vt={class:"row q-mb-md"},gt={class:"col-6 q-pr-sm"},yt={class:"text-caption"},ht={class:"col-6 q-pl-sm"},qt={class:"text-caption"},wt={class:"row"},$t={class:"col-6 q-pr-sm"},Ct={class:"text-caption"},kt={class:"col-6 q-pl-sm"};function Nt(e,t,u,o,s,y){const a=P("pay-rate-field");return c(),h(ye,Je(e.$attrs,{onSubmit:ve(e.submit,["prevent"])}),{default:r(()=>[l(X,null,{default:r(()=>[l(T,null,{default:r(()=>[e.$attrs.hideInstructions?(c(),V("div",pt," Enter the following information about the classification and click Submit. ")):(c(),V("div",bt," Enter the following information about the classification and click Save. Repeat until all classifications you are requesting have been saved. Then click Continue. ")),f("div",vt,[f("div",gt,[l(re,{class:"q-mt-md",dense:"",clearable:"","transition-show":"flip-up","transition-hide":"flip-down",label:"Select Craft",modelValue:e.craft,"onUpdate:modelValue":t[0]||(t[0]=i=>e.craft=i),options:e.crafts,"option-label":i=>i[10],"display-value":e.craft?`${e.craft[10]}`:"",error:!!e.errors.craft,"bottom-slots":""},{error:r(()=>[f("div",yt,A(e.errors.craft),1)]),_:1},8,["modelValue","options","option-label","display-value","error"])]),f("div",ht,[l(re,{class:"q-mt-md",dense:"",clearable:"","transition-show":"flip-up","transition-hide":"flip-down",label:"Classification",modelValue:e.classification,"onUpdate:modelValue":t[1]||(t[1]=i=>e.classification=i),options:e.classificationOptions,"option-label":i=>i[18],"display-value":e.classification?`${e.classification[18]}`:"",error:!!e.errors.classification,"bottom-slots":"",disable:!e.craft},{error:r(()=>[f("div",qt,A(e.errors.classification),1)]),_:1},8,["modelValue","options","option-label","display-value","error","disable"])])]),f("div",wt,[f("div",$t,[l(J,{dense:"",type:"number",label:"Quantity",modelValue:e.qty,"onUpdate:modelValue":t[2]||(t[2]=i=>e.qty=i),modelModifiers:{number:!0},error:!!e.errors.qty,disable:!e.classification,"bottom-slots":""},{error:r(()=>[f("div",Ct,A(e.errors.qty),1)]),_:1},8,["modelValue","error","disable"])]),f("div",kt,[l(a,{class:"q-mb-md",type:"number",step:"any",dense:"",label:"Hourly Rate",modelValue:e.rate,"onUpdate:modelValue":t[3]||(t[3]=i=>e.rate=i),modelModifiers:{number:!0},prefix:"$",disable:!e.classification||e.classification.hasFixedRate&&!e.$can("manage","rates"),error:!!e.errors.rate,"error-message":e.errors.rate,"bottom-slots":""},null,8,["modelValue","disable","error","error-message"])])])]),_:1}),l(K,{align:"right"},{default:r(()=>[l(j,{dense:"",color:"secondary",label:"Cancel",onClick:t[4]||(t[4]=i=>e.$emit("closeJobs"))}),l(j,{dense:"",color:"primary",label:"Submit",type:"submit",onClick:e.submit},null,8,["onClick"])]),_:1})]),_:1})]),_:1},16,["onSubmit"])}var Rt=F(ft,[["render",Nt]]);const _t={name:"View Request",components:{ClassificationsTab:Sa,NamesTab:Oa,PipelineTab:xa,OffersTab:Ja,NamesForm:mt,DetailsCard:Ca,ClassificationForm:Rt},setup(){const e=S(!0),t=S(!1),u=S(!1),o=S(!1),s=H(),y=Xe(),a=ce(),i=S(0),{getHireRequest:v,fetchHireRequest:_,updateViewedRequests:R,setHireRequests:g}=Z(),{getUserType:k,userData:p}=me(),d=$(()=>v(y.params.id)),b=async n=>{if(!d.value[3]||n){s.loading.show();const{data:m}=await E.fetchFromProjectsApp({fields:[le({type:"requests",id:y.params.id})]});g({requestId:y.params.id,data:m}),s.loading.hide()}},q=()=>{a.go(-1)},I=()=>{a.push({name:"project-general",params:{id:d.value[6]}})};b(),ge(d,(n,m)=>{console.log(n)});const w=()=>{s.dialog({title:"Confirm",message:"Are you sure you want to cancel this request?",cancel:!0,persistent:!0}).onOk(()=>{L()})},L=async()=>{const n={3:{value:d.value[3]},14:{value:"Cancelled"},84:{value:new Date},147:{value:6},276:{value:p[3]},277:{value:`${p[35]} ${p[37]}`}},m=[];d.value.classes.forEach(C=>{const O={3:{value:C[3]},17:{value:"Cancelled"},51:{value:new Date},128:{value:6}};m.push(O)});try{E.upsertRecordsXML({to:"bpzpyjbuy",data:[n],fieldsToReturn:[3]}),E.upsertRecordsXML({to:"bpzpyqcu4",data:m,fieldsToReturn:[3]}),a.go(-1),s.notify({type:"positive",message:"Request successfully canceled"})}catch(C){throw{error:C,message:"Cannot cancel request"}}},D=()=>{i.value=1,u.value=!1,b(!0)},Q=n=>{o.value=!1,b(!0),R({id:d.value[3],dataset:"classes",data:n,push:!0})},fe=n=>{o.value=!1,b(!0);const m=v(d.value[3]).classes,C=m.findIndex(O=>O[3]===n[3]);C>-1?(m[C]=n,R({id:d.value[3],dataset:"classes",data:m})):R({id:d.value[3],dataset:"classes",data:n,push:!0})},x=n=>{const m=[];for(const[C,O]of Object.entries(n)){const be={fid:C,value:O};m.push(be)}R({id:d.value[3],props:m})},we=$(()=>d.value[3]?[{label:"Request ID",value:d.value[3],editable:!1},{label:"Date Created",value:Y(d.value[1].$d).format("MM/DD/YYYY hh:mm:ss a"),editable:!1},{label:"Status",value:`${d.value[14]} (${d.value[59]})`,editable:!1},{label:"Opened On",value:d.value[82].$d?Y(d.value[82].$d).format("MM/DD/YYYY hh:mm:ss a"):null,editable:!1,hide:d.value[14]!=="Open"&&d.value[14]!=="Closed"},{label:"Closed On",value:d.value[86].$d?Y(d.value[86].$d).format("MM/DD/YYYY hh:mm:ss a"):null,editable:!1,hide:d.value[14]!=="Closed"},{label:"Project Name",value:d.value[91],editable:!1},{label:"Job Number",value:d.value[27],editable:d.value[14]!=="Closed",config:{permission:{action:"manage",subject:"projectRequests"},type:"options",allowNew:!1,newType:"customer",initialValue:n=>n.find(m=>m[3]===d.value[9]),formRules:z().required().label("Job Number").nullable(),fieldLabel:"Job Number",optionLabel:"11",displayValue:11,getter:async()=>{const{data:n}=await E.fetchFromProjectsApp({fields:[le({type:"jobNumbers",query:`{'6'.EX.'${d.value[6]}'}AND{'29'.EX.'Active'}`})]});return n.sort((m,C)=>m[1].$d>C[1].$d?-1:1)},setter:async n=>{try{const{data:m}=await E.upsertRecordsXML({to:"bpzpyjbuy",data:[{3:{value:d.value[3]},9:{value:n[3]}}],fieldsToReturn:[9,27]});x(m[0]),s.notify({type:"positive",message:"Job Number successfully updated"})}catch{s.notify({type:"negative",message:"Error updating Job Number"})}},filter:(n,m)=>n.filter(C=>C[11].toLowerCase().indexOf(m)>-1)}},{label:"Site Contact",value:d.value[76],editable:d.value[14]!=="Closed",config:{permission:{action:"manage",subject:"projectRequests"},type:"options",allowNew:!1,newType:"location",initialValue:n=>n.find(m=>m[3]===d.value[60]),formRules:z().required().label("Site Contact").nullable(),fieldLabel:"Site Contact",optionLabel:"17",displayValue:17,getter:async()=>{const{data:n}=await E.fetchFromProjectsApp({fields:[le({type:"siteContacts",query:`{'7'.EX.'${d.value[6]}'}AND{'6'.EX.'Active'}`})]});return n.sort((m,C)=>m[17]>C[17]?1:-1)},setter:async n=>{try{const{data:m}=await E.upsertRecordsXML({to:"bpzpyjbuy",data:[{3:{value:d.value[3]},60:{value:n[3]}}],fieldsToReturn:[60,76]});x(m[0]),s.notify({type:"positive",message:"Site Contact successfully updated"})}catch{s.notify({type:"negative",message:"Error updating Site Contact"})}},filter:(n,m)=>n.filter(C=>C[17].toLowerCase().indexOf(m)>-1)}},{label:"Meeting Location",value:d.value[32],editable:d.value[14]!=="Closed",config:{permission:{action:"manage",subject:"projectRequests"},type:"options",allowNew:!1,newType:"location",initialValue:n=>n.find(m=>m[3]===d.value[31]),formRules:z().required().label("Meeting Location").nullable(),fieldLabel:"Meeting Location",optionLabel:"6",displayValue:6,getter:async()=>{const{data:n}=await E.fetchFromStructureApp({fields:[He({type:"meetingLocations",query:`{'15'.EX.'${d.value[8]}'}AND{'14'.EX.'Active'}`})]});return n.sort((m,C)=>m[6]>C[6]?1:-1)},setter:async n=>{try{const{data:m}=await E.upsertRecordsXML({to:"bpzpyjbuy",data:[{3:{value:d.value[3]},31:{value:n[3]}}],fieldsToReturn:[31,32,33]});x(m[0]),s.notify({type:"positive",message:"Meeting Location successfully updated"})}catch{s.notify({type:"negative",message:"Error updating Meeting Location"})}},filter:(n,m)=>n.filter(C=>C[6].toLowerCase().indexOf(m)>-1)}},{label:"Address",value:d.value[33],editable:!1}]:[]);return console.log(d.value),{hireRequestData:d,tab:i,back:q,confirmCancel:w,showAddNames:u,showAddJobs:o,namesAdded:D,details:we,viewProject:I,actions:e,navs:t,jobsAdded:Q,jobUpdated:fe,getUserType:k}}},Vt={key:0,class:"q-pa-sm"},At={class:"row"},St={class:"col-12 col-md-6"},jt={class:"col-12 col-md-6"},Dt={class:"row"},Pt={class:"col-12 col-md-4 q-pr-sm"},Lt={class:"col-12 col-md-8 q-pl-sm"};function Ot(e,t,u,o,s,y){const a=P("details-card"),i=P("classifications-tab"),v=P("names-tab"),_=P("offers-tab"),R=P("pipeline-tab"),g=P("names-form"),k=P("classification-form");return c(),h(Se,{style:{"max-width":"100vw"}},{default:r(()=>[o.hireRequestData[3]?(c(),V("div",Vt,[l(X,{flat:""},{default:r(()=>[l(T,{class:"q-pa-none"},{default:r(()=>[f("div",At,[f("div",St,[l(K,{class:"q-pt-none",align:"left"},{default:r(()=>[l(j,{label:"Go Back",color:"secondary",icon:"keyboard_return",onClick:o.back},null,8,["onClick"])]),_:1})]),f("div",jt,[o.getUserType==="Project User"?(c(),h(K,{key:0,class:"q-pt-none",align:"right"},{default:r(()=>[e.$can("manage","projectRequests")&&o.hireRequestData[14]==="Pending"||e.$can("manage","nameRequests")&&o.hireRequestData[14]!=="Closed"&&o.hireRequestData[282]!=="Open"||e.$can("manage","projectRequests")&&!e.$can("read","hireRequests")&&o.hireRequestData[14]==="Pending"?(c(),h(ke,{key:0,modelValue:o.actions,"onUpdate:modelValue":t[2]||(t[2]=p=>o.actions=p),square:"",color:"accent",icon:"keyboard_arrow_left",direction:"left",label:"Actions",padding:"sm"},{default:r(()=>[e.$can("manage","projectRequests")&&o.hireRequestData[14]==="Pending"?(c(),h(G,{key:0,label:"Add Classifications",color:"primary",icon:"add",onClick:t[0]||(t[0]=p=>o.showAddJobs=!0)})):N("",!0),e.$can("manage","nameRequests")&&o.hireRequestData[14]!=="Closed"&&o.hireRequestData[282]!=="Open"?(c(),h(G,{key:1,label:"Add Names to Request",color:"accent",icon:"person_add",onClick:t[1]||(t[1]=p=>o.showAddNames=!0)})):N("",!0),e.$can("manage","projectRequests")&&!e.$can("read","hireRequests")&&o.hireRequestData[14]==="Pending"?(c(),h(G,{key:2,label:"Cancel Hire Request",color:"dark",icon:"cancel",onClick:o.confirmCancel},null,8,["onClick"])):N("",!0)]),_:1},8,["modelValue"])):N("",!0)]),_:1})):o.getUserType==="QuickBase User"?(c(),h(K,{key:1,class:"q-pt-none",align:"right"},{default:r(()=>[l(ke,{modelValue:o.actions,"onUpdate:modelValue":t[5]||(t[5]=p=>o.actions=p),square:"",color:"accent",icon:"keyboard_arrow_left",direction:"left",label:"Actions",padding:"sm"},{default:r(()=>[e.$can("manage","projectRequests")&&(o.hireRequestData[14]==="Open"||o.hireRequestData[14]==="Pending")?(c(),h(G,{key:0,label:"Add Classifications",color:"primary",icon:"add",onClick:t[3]||(t[3]=p=>o.showAddJobs=!0)})):N("",!0),e.$can("manage","nameRequests")&&(o.hireRequestData[14]==="Open"||o.hireRequestData[14]==="Pending")?(c(),h(G,{key:1,label:"Add Names to Request",color:"accent",icon:"person_add",onClick:t[4]||(t[4]=p=>o.showAddNames=!0)})):N("",!0),e.$can("manage","projectRequests")&&(o.hireRequestData[14]==="Open"||o.hireRequestData[14]==="Pending")?(c(),h(G,{key:2,label:"Cancel Hire Request",color:"dark",icon:"cancel",onClick:o.confirmCancel},null,8,["onClick"])):N("",!0)]),_:1},8,["modelValue"])]),_:1})):N("",!0)])])]),_:1})]),_:1}),f("div",Dt,[f("div",Pt,[l(a,{details:o.details,title:"Details"},null,8,["details"])]),f("div",Lt,[l(Ye,{class:"q-py-xs bg-info text-white shadow-2 rounded-borders",align:"left",modelValue:o.tab,"onUpdate:modelValue":t[6]||(t[6]=p=>o.tab=p),dense:"","indicator-color":"accent","outside-arrows":"","mobile-arrows":"","inline-label":""},{default:r(()=>[l(te,{name:0,label:"Classifications"}),l(te,{name:1,label:"Names"}),o.hireRequestData[14]!=="Pending"?(c(),h(te,{key:0,name:2,label:"Offers"})):N("",!0),o.hireRequestData[14]!=="Pending"?(c(),h(te,{key:1,name:3,label:"Pipeline"})):N("",!0)]),_:1},8,["modelValue"]),l(ze,{modelValue:o.tab,"onUpdate:modelValue":t[7]||(t[7]=p=>o.tab=p),animated:"",class:"q-px-none"},{default:r(()=>[l(oe,{class:"q-px-xs",name:0},{default:r(()=>[o.hireRequestData[3]?(c(),h(i,{key:0,data:o.hireRequestData},null,8,["data"])):N("",!0)]),_:1}),l(oe,{class:"q-px-xs",name:1},{default:r(()=>[l(v,{data:o.hireRequestData},null,8,["data"])]),_:1}),l(oe,{class:"q-px-xs",name:2},{default:r(()=>[l(_,{data:o.hireRequestData.offers},null,8,["data"])]),_:1}),l(oe,{class:"q-px-xs",name:3},{default:r(()=>[l(R,{request:o.hireRequestData},null,8,["request"])]),_:1})]),_:1},8,["modelValue"])])]),l(pe,{persistent:"",modelValue:o.showAddNames,"onUpdate:modelValue":t[9]||(t[9]=p=>o.showAddNames=p)},{default:r(()=>[l(X,{flat:"",style:{width:"500px"}},{default:r(()=>[l(T,{class:"q-pa-none"},{default:r(()=>[l(g,{onCloseNames:t[8]||(t[8]=p=>o.showAddNames=!1),onNamesAdded:o.namesAdded,request:o.hireRequestData},null,8,["onNamesAdded","request"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(pe,{persistent:"",modelValue:o.showAddJobs,"onUpdate:modelValue":t[11]||(t[11]=p=>o.showAddJobs=p)},{default:r(()=>[l(X,{flat:"",style:{width:"500px"}},{default:r(()=>[l(T,{class:"q-pa-none"},{default:r(()=>[l(k,{hideInstructions:!0,request:o.hireRequestData,onCloseJobs:t[10]||(t[10]=p=>o.showAddJobs=!1),onJobsAdded:o.jobsAdded,onJobUpdated:o.jobUpdated},null,8,["request","onJobsAdded","onJobUpdated"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):N("",!0)]),_:1})}var Ro=F(_t,[["render",Ot]]);export{Ro as default};
