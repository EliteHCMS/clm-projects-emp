import{l as E,r as P,c as y,_ as M,A as c,aq as h,br as n,d as a,cT as v,D as e,ac as o,bS as w,bW as I,ax as O,ar as x,B as g,F as V,b4 as B,cS as C,bt as se,bR as te,bP as j,bQ as oe,da as ae,cV as le,bO as ge,bU as we,bT as De,w as xe,b5 as N,y as ke}from"./index.62f4c3c5.js";import{Q as Ce}from"./QPage.f4574d3b.js";import{u as ne}from"./use-quasar.4c4dbdcf.js";import{u as z}from"./useQuerySaver.d29ff9ee.js";import{u as J,q as L}from"./app.ae0068fa.js";import{dayjs as D}from"./dayjs.b3414925.js";import"./workday.94e77e73.js";import"./workdayAPI.b406c901.js";import{f as Re,t as H,r as Ye}from"./submitRelease.113ec470.js";import{a as X,b as Se,u as Te}from"./checkTermStatus.19f267a2.js";import{u as A}from"./dataStore.423cc352.js";import{Q as ie}from"./QTooltip.9c964233.js";import{Q as Me}from"./QInnerLoading.e16d5622.js";import{o as de,d as ce}from"./helpers.510249e6.js";import{a as Z}from"./syncEmployeeWithWorkday.d8408974.js";import{d as U}from"./decode.3998c82c.js";import{Q}from"./QRating.86ebca6d.js";import{Q as re}from"./QList.11a66c2b.js";import{a as Ne}from"./QSelect.63d295fd.js";import{Q as Ee}from"./QForm.617a9252.js";import{a as Ie,u as Pe}from"./vee-validate.esm.bd7c3d30.js";import{a as ee}from"./array.5117e02c.js";import"./_commonjsHelpers.a26ce4be.js";import"./localForage.f977d509.js";import"./api.646f206c.js";import"./index.04bc0a32.js";import"./i18n.3f666946.js";import"./dataStore.1a862b68.js";import"./position-engine.9f816e9b.js";import"./selection.3494d29b.js";import"./QChip.9ae5b419.js";import"./QMenu.83b714c5.js";import"./rtl.b51694b1.js";const Le=E({props:{employee:Object,assignment:Object,release:Object},setup(s){const{getUserType:d}=J(),{updateViewedReleases:r,getReleases:t}=A(),f=P(!0),$=P(!0),i=y(()=>t(s.release[3])),_=y(()=>i.value&&i.value.employee?i.value.employee:null),k=y(()=>i.value&&i.value.assignment?i.value.assignment:null),S=y(()=>{if(!_.value||!_.value.workday)return[];{const{personalData:u}=_.value.workday;if(u){const{customIds:T}=u.identificationData?u.identificationData:{customIds:[]};return T}else return[]}}),p=async()=>{if(_.value){const{sync:u}=await Z({clm:_.value});r({id:s.release[3],dataset:"employee",nested:!0,subset:"workday",data:u}),f.value=!1}else{const{data:u}=await L.fetchFromHiringApp({fields:[z({type:"employee",id:s.release[25]})]}),{sync:T}=await Z({clm:u});await r({id:s.release[3],dataset:"employee",data:u}),r({id:s.release[3],dataset:"employee",nested:!0,subset:"workday",data:T}),f.value=!1}if(k.value)$.value=!1;else{const{data:u}=await L.fetchFromHiringApp({fields:[z({type:"rawAssignments",id:s.release[28]})]});r({id:s.release[3],dataset:"assignment",data:u}),$.value=!1}},R=u=>{if(!!u)return u[145].$d?D(u[145].$d).format("MM/DD/YYYY"):D(u[1].$d).format("MM/DD/YYYY")},b=({id:u,idType:T})=>T.includes("J&amp;E")?`${u.slice(1,4)} / ${u.slice(-5)}`:u;return p(),{dayjs:D,openWindow:de,getUserType:d,employeeData:_,assignmentData:k,eeLoading:f,assignLoading:$,getArrivalDate:R,employeeCustomIds:S,decodeHTML:U,processCustomID:b}}}),Ae=e("div",{class:"text-primary text-h6 text-bold"},"Employee Information",-1),Qe={class:"row q-py-sm"},je={class:"col-12 col-sm-3"},ze=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Name")],-1),Oe={class:"text-body2 q-pl-md"},Ve={class:"col-12 col-sm-3"},Be=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Last 4 Digits of SS#")],-1),Ue={class:"text-body2 q-pl-md"},Fe={class:"col-12 col-sm-3"},We=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Phone")],-1),He={class:"text-body2 q-pl-md"},Je={class:"row q-py-sm"},Ke={class:"col-12 col-sm-3"},Ge={class:"text-body2"},Xe=e("span",{class:"text-bold q-mr-md"},"Workday Employee ID",-1),Ze={class:"text-body2 q-pl-md"},es={class:"text-body2"},ss={class:"text-bold q-mr-md"},ts={class:"text-body2 q-pl-md"},os={class:"row q-py-sm"},as={class:"col-12 col-sm-3"},ls=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Arrival Date")],-1),ns={class:"text-body2 q-pl-md"},is={class:"col-12 col-sm-3"},ds=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Last Hire Date")],-1),cs={class:"text-body2 q-pl-md"},rs={class:"col-12 col-sm-3"},ms=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Last Day Worked")],-1),ps={class:"text-body2 q-pl-md"},us={class:"col-12 col-sm-3"},_s=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Effective Date")],-1),vs={class:"text-body2 q-pl-md"},ys={class:"row q-py-sm"},hs={class:"col-12 col-sm-4"},fs=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Job Site/ Location")],-1),bs={class:"text-body2 q-pl-md"},$s={class:"col-12 col-sm-4"},qs=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Job Title")],-1),gs={class:"text-body2 q-pl-md"},ws={class:"col-12 col-sm-4"},Ds=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Pay Rate")],-1),xs={class:"text-body2 q-pl-md"};function ks(s,d,r,t,f,$){return c(),h(C,null,{default:n(()=>[a(v,{class:"text-center q-py-sm"},{default:n(()=>[Ae]),_:1}),!s.eeLoading&&!s.assignLoading?(c(),h(v,{key:0,class:"q-py-none"},{default:n(()=>[e("div",Qe,[e("div",je,[ze,e("div",Oe,[e("span",null,o(s.employeeData[22])+", "+o(s.employeeData[20]),1)])]),e("div",Ve,[Be,e("div",Ue,[e("span",null,o(s.employeeData[188].substring(s.employeeData[188].length-4)),1)])]),e("div",Fe,[We,e("div",He,[e("span",null,o(s.employeeData[25]),1)])])]),a(w),e("div",Je,[e("div",Ke,[e("div",Ge,[Xe,s.getUserType==="QuickBase User"?(c(),h(I,{key:0,dense:"",size:"sm",flat:"",icon:"open_in_new",color:"info",onClick:d[0]||(d[0]=i=>s.openWindow({url:s.employeeData[451]}))},{default:n(()=>[a(ie,null,{default:n(()=>[O("Open in Workday")]),_:1})]),_:1})):x("",!0)]),e("div",Ze,[e("span",null,o(s.employeeData[378]),1)])]),(c(!0),g(V,null,B(s.employeeCustomIds,(i,_)=>(c(),g("div",{key:_,class:"col-12 col-sm-3"},[e("div",es,[e("span",ss,o(s.decodeHTML(i.idType)),1)]),e("div",ts,[e("span",null,o(s.processCustomID(i)),1)])]))),128))]),a(w),e("div",os,[e("div",as,[ls,e("div",ns,[e("span",null,o(s.getArrivalDate(s.assignmentData)),1)])]),e("div",is,[ds,e("div",cs,[e("span",null,o(s.dayjs(s.employeeData[397].$d).format("MM/DD/YYYY")),1)])]),e("div",rs,[ms,e("div",ps,[e("span",null,o(s.dayjs(s.release[36].$d).format("MM/DD/YYYY")),1)])]),e("div",us,[_s,e("div",vs,[e("span",null,o(s.dayjs(s.release[36].$d).format("MM/DD/YYYY")),1)])])]),a(w),e("div",ys,[e("div",hs,[fs,e("div",bs,[e("span",null,o(s.assignmentData[141]),1)])]),e("div",$s,[qs,e("div",gs,[e("span",null,o(s.assignmentData[20]),1)])]),e("div",ws,[Ds,e("div",xs,[e("span",null,"$ "+o(s.assignmentData[116].toFixed(2)),1)])])])]),_:1})):(c(),h(v,{key:1,class:"q-my-lg"},{default:n(()=>[a(Me,{color:"primary",showing:""})]),_:1}))]),_:1})}var Cs=M(Le,[["render",ks]]);const Rs=E({props:{data:Object},setup(s){return{evaluation:y(()=>s.data),convertScore:t=>({1:"Strongly Disagreed",2:"Disagreed",3:"Neutral",4:"Agreed",5:"Strongly Agreed",0:"Did Not Know"})[t]}}}),Ys=e("div",{class:"text-primary text-h6 text-bold"},"Employee Performance Evaluation",-1),Ss={class:"row q-py-sm"},Ts={class:"col-12 col-sm-6 col-md-3"},Ms=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Has good attendance")],-1),Ns={class:"text-body2 q-pl-md"},Es={class:"q-mr-md"},Is={class:"col-12 col-sm-6 col-md-3"},Ps=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Has a good attitude")],-1),Ls={class:"text-body2 q-pl-md"},As={class:"q-mr-md"},Qs={class:"col-12 col-sm-6 col-md-3"},js=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Can do their job")],-1),zs={class:"text-body2 q-pl-md"},Os={class:"q-mr-md"},Vs={class:"col-12 col-sm-6 col-md-3"},Bs=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Can be promoted in the future")],-1),Us={class:"text-body2 q-pl-md"},Fs={class:"q-mr-md"};function Ws(s,d,r,t,f,$){return c(),h(C,null,{default:n(()=>[a(v,{class:"text-center q-py-sm"},{default:n(()=>[Ys]),_:1}),a(v,{class:"q-py-none"},{default:n(()=>[e("div",Ss,[e("div",Ts,[Ms,e("div",Ns,[e("span",Es,o(s.convertScore(s.evaluation.attendance)),1),a(Q,{modelValue:s.evaluation.attendance,"onUpdate:modelValue":d[0]||(d[0]=i=>s.evaluation.attendance=i),max:"5",size:"sm",color:"accent",icon:"star_border","icon-selected":"star","icon-half":"star_half","no-dimming":"",readonly:""},null,8,["modelValue"])])]),e("div",Is,[Ps,e("div",Ls,[e("span",As,o(s.convertScore(s.evaluation.attitude)),1),a(Q,{modelValue:s.evaluation.attitude,"onUpdate:modelValue":d[1]||(d[1]=i=>s.evaluation.attitude=i),max:"5",size:"sm",color:"accent",icon:"star_border","icon-selected":"star","icon-half":"star_half","no-dimming":"",readonly:""},null,8,["modelValue"])])]),e("div",Qs,[js,e("div",zs,[e("span",Os,o(s.convertScore(s.evaluation.capable)),1),a(Q,{modelValue:s.evaluation.capable,"onUpdate:modelValue":d[2]||(d[2]=i=>s.evaluation.capable=i),max:"5",size:"sm",color:"accent",icon:"star_border","icon-selected":"star","icon-half":"star_half","no-dimming":"",readonly:""},null,8,["modelValue"])])]),e("div",Vs,[Bs,e("div",Us,[e("span",Fs,o(s.convertScore(s.evaluation.promotion)),1),a(Q,{modelValue:s.evaluation.promotion,"onUpdate:modelValue":d[3]||(d[3]=i=>s.evaluation.promotion=i),max:"5",size:"sm",color:"accent",icon:"star_border","icon-selected":"star","icon-half":"star_half","no-dimming":"",readonly:""},null,8,["modelValue"])])])])]),_:1})]),_:1})}var Hs=M(Rs,[["render",Ws]]);const Js=E({props:{release:Object,employee:Object},setup(s){const{getReleases:d}=A(),r=y(()=>d(s.release[3])&&d(s.release[3]).employee?d(s.release[3]).employee:null);return{deductNeeded:y(()=>r.value&&!s.release[72]&&D.duration(D(s.release[36].$d).diff(D(s.employee[397].$d))).asDays()<30?"Yes":"No"),downloadFile:ce,decodeHTML:U}}}),Ks=e("div",{class:"text-primary text-h6 text-bold"},"Departure Information",-1),Gs={class:"row"},Xs={class:"col-12 col-sm-9"},Zs={class:"row q-py-sm"},et={class:"col-12 col-sm-6 col-md-6"},st={class:"text-body2"},tt=e("span",{class:"text-bold q-mr-md"},"Return Company Equipment and/or PPE",-1),ot={class:"col-12 col-sm-6 col-md-6"},at={class:"text-body2"},lt=e("span",{class:"text-bold q-mr-md"},"Payroll Deduction Needed",-1),nt={class:"row q-py-sm"},it={class:"col-12"},dt={class:"text-body2"},ct=e("span",{class:"text-bold q-mr-md"},"Reason",-1),rt=e("div",{class:"row q-py-sm"},[e("div",{class:"col-12"},[e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Recommendation for Rehire / Reassignment"),e("span",null,"Need to add this to form")])])],-1),mt={class:"row q-py-sm"},pt={class:"col-12"},ut=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Comments")],-1),_t={class:"text-body2 text-italic q-pl-md"},vt={class:"col-12 col-sm-3 q-pl-sm"},yt=e("div",{class:"text-body2 text-bold text-center q-mb-sm"},"Supporting Documents",-1),ht={key:1,class:"text-body2 text-italic text-center"},ft=e("span",null,"No Supporting Documents",-1),bt=[ft];function $t(s,d,r,t,f,$){return c(),h(C,null,{default:n(()=>[a(v,{class:"text-center q-py-sm"},{default:n(()=>[Ks]),_:1}),a(v,{class:"q-py-none"},{default:n(()=>[e("div",Gs,[e("div",Xs,[e("div",Zs,[e("div",et,[e("div",st,[tt,e("span",null,o(s.release[72]?"Yes":"No"),1)])]),e("div",ot,[e("div",at,[lt,e("span",null,o(s.deductNeeded),1)])])]),a(w),e("div",nt,[e("div",it,[e("div",dt,[ct,e("span",null,o(s.release[32]),1)])])]),a(w),rt,a(w),e("div",mt,[e("div",pt,[ut,e("div",_t,[e("span",null,o(s.release[60]===""?"No Comments":s.decodeHTML(s.release[60])),1)])])])]),e("div",vt,[yt,s.release[70].length>0?(c(),h(re,{key:0},{default:n(()=>[(c(!0),g(V,null,B(s.release[70],(i,_)=>se((c(),h(te,{key:_,clickable:"",class:"text-body2",onClick:k=>s.downloadFile({tableId:"bsstsai5d",recordId:i[3],fieldId:6,versionNumber:1,name:i[7]})},{default:n(()=>[a(j,null,{default:n(()=>[O(o(_+1)+". "+o(i[7]),1)]),_:2},1024),a(j,{avatar:""},{default:n(()=>[a(oe,{color:"info",name:"file_download"})]),_:1})]),_:2},1032,["onClick"])),[[ae]])),128))]),_:1})):(c(),g("div",ht,bt))])])]),_:1})]),_:1})}var qt=M(Js,[["render",$t]]);const gt=E({props:{employee:Object,assignment:Object,release:Object},setup(s){const{getUserType:d}=J(),{updateViewedReleases:r,getReleases:t}=A(),f=P(!0),$=P(!0),i=y(()=>t(s.release[3])),_=y(()=>i.value&&i.value.employee?i.value.employee:null),k=y(()=>i.value&&i.value.assignment?i.value.assignment:null),S=y(()=>{if(!_.value||!_.value.workday)return[];{const{personalData:b}=_.value.workday;if(b){const{customIds:u}=b.identificationData?b.identificationData:{customIds:[]};return u}else return[]}});return{dayjs:D,openWindow:de,getUserType:d,employeeData:_,assignmentData:k,eeLoading:f,assignLoading:$,getArrivalDate:b=>b[145].$d?D(b[145].$d).format("MM/DD/YYYY"):D(b[1].$d).format("MM/DD/YYYY"),employeeCustomIds:S,processCustomID:({id:b,idType:u})=>u.includes("J&amp;E")?`${b.slice(1,4)} / ${b.slice(-5)}`:b,decodeHTML:U}}}),wt=e("div",{class:"text-body1 text-bold"},"Employee Information",-1),Dt={class:"row q-py-sm"},xt={class:"col-3"},kt=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Name")],-1),Ct={class:"text-caption q-pl-md"},Rt={class:"col-3"},Yt=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Last 4 Digits of SS#")],-1),St={class:"text-caption q-pl-md"},Tt={class:"col-3"},Mt=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Phone")],-1),Nt={class:"text-caption q-pl-md"},Et={class:"row q-py-sm"},It={class:"col-3"},Pt={class:"text-caption"},Lt=e("span",{class:"text-bold q-mr-md"},"Workday Employee ID",-1),At={class:"text-caption q-pl-md"},Qt={class:"text-caption"},jt={class:"text-bold q-mr-md"},zt={class:"text-caption q-pl-md"},Ot={class:"row q-py-sm"},Vt={class:"col-3"},Bt=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Arrival Date")],-1),Ut={class:"text-caption q-pl-md"},Ft={class:"col-3"},Wt=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Last Hire Date")],-1),Ht={class:"text-caption q-pl-md"},Jt={class:"col-3"},Kt=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Last Day Worked")],-1),Gt={class:"text-caption q-pl-md"},Xt={class:"col-3"},Zt=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Effective Date")],-1),eo={class:"text-caption q-pl-md"},so={class:"row q-py-sm"},to={class:"col-4"},oo=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Job Site/ Location")],-1),ao={class:"text-caption q-pl-md"},lo={class:"col-4"},no=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Job Title")],-1),io={class:"text-caption q-pl-md"},co={class:"col-2"},ro=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Pay Rate")],-1),mo={class:"text-caption q-pl-md"};function po(s,d,r,t,f,$){return c(),h(C,{flat:""},{default:n(()=>[a(v,{class:"q-py-sm"},{default:n(()=>[wt]),_:1}),a(v,{class:"q-py-none"},{default:n(()=>[e("div",Dt,[e("div",xt,[kt,e("div",Ct,[e("span",null,o(s.employeeData[22])+", "+o(s.employeeData[20]),1)])]),e("div",Rt,[Yt,e("div",St,[e("span",null,o(s.employeeData[188].substring(s.employeeData[188].length-4)),1)])]),e("div",Tt,[Mt,e("div",Nt,[e("span",null,o(s.employeeData[25]),1)])])]),a(w),e("div",Et,[e("div",It,[e("div",Pt,[Lt,s.getUserType==="QuickBase User"?(c(),h(I,{key:0,dense:"",size:"sm",flat:"",icon:"open_in_new",color:"info",onClick:d[0]||(d[0]=i=>s.openWindow({url:s.employeeData[451]}))},{default:n(()=>[a(ie,null,{default:n(()=>[O("Open in Workday")]),_:1})]),_:1})):x("",!0)]),e("div",At,[e("span",null,o(s.employeeData[378]),1)])]),(c(!0),g(V,null,B(s.employeeCustomIds,(i,_)=>(c(),g("div",{key:_,class:"col-3"},[e("div",Qt,[e("span",jt,o(s.decodeHTML(i.idType)),1)]),e("div",zt,[e("span",null,o(s.processCustomID(i)),1)])]))),128))]),a(w),e("div",Ot,[e("div",Vt,[Bt,e("div",Ut,[e("span",null,o(s.getArrivalDate(s.assignmentData)),1)])]),e("div",Ft,[Wt,e("div",Ht,[e("span",null,o(s.dayjs(s.employeeData[397].$d).format("MM/DD/YYYY")),1)])]),e("div",Jt,[Kt,e("div",Gt,[e("span",null,o(s.dayjs(s.release[36].$d).format("MM/DD/YYYY")),1)])]),e("div",Xt,[Zt,e("div",eo,[e("span",null,o(s.dayjs(s.release[36].$d).format("MM/DD/YYYY")),1)])])]),a(w),e("div",so,[e("div",to,[oo,e("div",ao,[e("span",null,o(s.assignmentData[141]),1)])]),e("div",lo,[no,e("div",io,[e("span",null,o(s.assignmentData[20]),1)])]),e("div",co,[ro,e("div",mo,[e("span",null,"$ "+o(s.assignmentData[116].toFixed(2)),1)])])])]),_:1})]),_:1})}var uo=M(gt,[["render",po]]);const _o=E({props:{data:Object},setup(s){return{evaluation:y(()=>s.data),convertScore:t=>({1:"Strongly Disagreed",2:"Disagreed",3:"Neutral",4:"Agreed",5:"Strongly Agreed",0:"Did Not Know"})[t]}}}),vo=e("div",{class:"text-body1 text-bold"},"Employee Performance Evaluation",-1),yo={class:"row q-py-sm"},ho={class:"col-3"},fo=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Has good attendance")],-1),bo={class:"text-caption q-pl-md"},$o={class:"q-mr-md"},qo={class:"col-3"},go=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Has a good attitude")],-1),wo={class:"text-caption q-pl-md"},Do={class:"q-mr-md"},xo={class:"col-3"},ko=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Can do their job")],-1),Co={class:"text-caption q-pl-md"},Ro={class:"q-mr-md"},Yo={class:"col-3"},So=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Can be promoted in the future")],-1),To={class:"text-caption q-pl-md"},Mo={class:"q-mr-md"};function No(s,d,r,t,f,$){return c(),h(C,{flat:"",class:"q-my-none q-py-none"},{default:n(()=>[a(v,{class:"q-py-sm"},{default:n(()=>[vo]),_:1}),a(v,{class:"q-py-none"},{default:n(()=>[e("div",yo,[e("div",ho,[fo,e("div",bo,[e("span",$o,o(s.evaluation.attendance)+" / 5 - "+o(s.convertScore(s.evaluation.attendance)),1)])]),e("div",qo,[go,e("div",wo,[e("span",Do,o(s.evaluation.attitude)+" / 5 - "+o(s.convertScore(s.evaluation.attitude)),1)])]),e("div",xo,[ko,e("div",Co,[e("span",Ro,o(s.evaluation.capable)+" / 5 - "+o(s.convertScore(s.evaluation.capable)),1)])]),e("div",Yo,[So,e("div",To,[e("span",Mo,o(s.evaluation.promotion)+" / 5 - "+o(s.convertScore(s.evaluation.promotion)),1)])])])]),_:1})]),_:1})}var Eo=M(_o,[["render",No]]);const Io=E({props:{release:Object,employee:Object},setup(s){const{getReleases:d}=A(),r=y(()=>d(s.release[3])&&d(s.release[3]).employee?d(s.release[3]).employee:null);return{deductNeeded:y(()=>r.value&&!s.release[72]&&D.duration(D(s.release[36].$d).diff(D(s.employee[397].$d))).asDays()<30?"Yes":"No"),downloadFile:ce,decodeHTML:U}}}),Po=e("div",{class:"text-body1 text-bold"},"Departure Information",-1),Lo={class:"row"},Ao={class:"col-9"},Qo={class:"row q-py-sm"},jo={class:"col-6"},zo={class:"text-caption"},Oo=e("span",{class:"text-bold q-mr-md"},"Return Company Equipment and/or PPE",-1),Vo={class:"col-6"},Bo={class:"text-caption"},Uo=e("span",{class:"text-bold q-mr-md"},"Payroll Deduction Needed",-1),Fo={class:"row q-py-sm"},Wo={class:"col-12"},Ho={class:"text-caption"},Jo=e("span",{class:"text-bold q-mr-md"},"Reason",-1),Ko=e("div",{class:"row q-py-sm"},[e("div",{class:"col-12"},[e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Recommendation for Rehire / Reassignment"),e("span",null,"Need to add this to form")])])],-1),Go={class:"row q-py-sm"},Xo={class:"col-12"},Zo=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Comments")],-1),ea={class:"text-caption text-italic q-pl-md"},sa={class:"col-3 q-pl-sm"},ta=e("div",{class:"text-caption text-bold text-center q-mb-sm"},"Supporting Documents",-1),oa={key:1,class:"text-caption text-italic text-center"},aa=e("span",null,"No Supporting Documents",-1),la=[aa];function na(s,d,r,t,f,$){return c(),h(C,{flat:""},{default:n(()=>[a(v,{class:"q-py-sm"},{default:n(()=>[Po]),_:1}),a(v,{class:"q-py-none"},{default:n(()=>[e("div",Lo,[e("div",Ao,[e("div",Qo,[e("div",jo,[e("div",zo,[Oo,e("span",null,o(s.release[72]?"Yes":"No"),1)])]),e("div",Vo,[e("div",Bo,[Uo,e("span",null,o(s.deductNeeded),1)])])]),a(w),e("div",Fo,[e("div",Wo,[e("div",Ho,[Jo,e("span",null,o(s.release[32]),1)])])]),a(w),Ko,a(w),e("div",Go,[e("div",Xo,[Zo,e("div",ea,[e("span",null,o(s.release[60]===""?"No Comments":s.decodeHTML(s.release[60])),1)])])])]),e("div",sa,[ta,s.release[70].length>0?(c(),h(re,{key:0},{default:n(()=>[(c(!0),g(V,null,B(s.release[70],(i,_)=>se((c(),h(te,{key:_,clickable:"",class:"text-caption",onClick:k=>s.downloadFile({tableId:"bsstsai5d",recordId:i[3],fieldId:6,versionNumber:1,name:i[7]})},{default:n(()=>[a(j,null,{default:n(()=>[O(o(_+1)+". "+o(i[7]),1)]),_:2},1024),a(j,{avatar:""},{default:n(()=>[a(oe,{color:"info",name:"file_download"})]),_:1})]),_:2},1032,["onClick"])),[[ae]])),128))]),_:1})):(c(),g("div",oa,la))])])]),_:1})]),_:1})}var ia=M(Io,[["render",na]]);const da=E({emits:["releaseReviewed"],props:{release:Object},setup(s,{emit:d}){const r=ne(),t=ee({selection:ee().required().label("Disposition")}),{meta:f,errors:$,handleSubmit:i,handleReset:_}=Ie({validationSchema:t}),{value:k}=Pe("selection"),S=i(async p=>{console.log(p),r.dialog({title:"Confirm",message:`Are you sure you want to ${p.selection.value} this employee?`,cancel:!0,persistent:!0}).onOk(async()=>{try{r.loading.show();const{release:R,employee:b}=await Re({release:s.release,disp:p.selection});d("releaseReviewed",{release:R,employee:b}),window.postMessage("reloadDepartures"),_()}catch{r.loading.hide(),r.notify({type:"negative",message:"Cannot update release."})}})});return{formErrors:$,formMeta:f,submit:S,selection:k}}}),ca=e("div",{class:"text-body2 text-weight-bold"},"How would you like to proceed with this employee?",-1),ra={class:"text-caption"};function ma(s,d,r,t,f,$){return c(),g("div",null,[a(Ee,{onSubmit:ge(s.submit,["prevent"])},{default:n(()=>[a(C,null,{default:n(()=>[a(v,{class:"q-pb-xs"},{default:n(()=>[ca,a(Ne,{class:"q-mb-sm",dense:"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:s.selection,"onUpdate:modelValue":d[0]||(d[0]=i=>s.selection=i),options:[{label:"Reassign this Employee",value:"Reassign"},{label:"Terminate this Employee",value:"Terminate"}],"bottom-slots":"",error:!!s.formErrors.selection},{error:n(()=>[e("div",ra,o(s.formErrors.selection),1)]),_:1},8,["modelValue","error"])]),_:1}),a(le,{class:"q-pt-xs",align:"right"},{default:n(()=>[a(I,{color:"primary",label:"Submit",type:"submit"})]),_:1})]),_:1})]),_:1},8,["onSubmit"])])}var pa=M(da,[["render",ma]]);const ua={name:"View Release",directives:{},components:{EmployeeInformation:Cs,Evaluation:Hs,DepartureInformation:qt,PrintDepartureInformation:ia,PrintEmployeeInformation:uo,PrintEvaluation:Eo,ReviewForm:pa},setup(){const s=P(!1),d=P(!1),r=ne(),t=we();De();const{capitalize:f}=ke,{getUserType:$,userData:i}=J(),{getReleases:_,setReleases:k,updateViewedReleases:S}=A(),p=y(()=>_(t.params.release)),R=y(()=>p.value&&p.value.employee?p.value.employee:null),b=y(()=>p.value&&p.value.assignment?p.value.assignment:null),u=y(()=>p.value[59]&&p.value[59][0]?p.value[59][0]:null),T=y(()=>{const{data:l}=u.value?u.value:{data:null};return l}),K=y(()=>p.value?p.value[38]:null),me=y(()=>u.value&&u.value[44]?u.value[44]:null),pe=y(()=>p.value?p.value[75]:null),ue=y(()=>p.value?p.value[76]:null),_e=async()=>{const l=await X({release:p.value});let m={referenceId:"N/A",logDescription:"N/A",logEffectiveMoment:"N/A",logEntryMoment:"N/A",eventType:"N/A",organizationReferenceID:"N/A",positionID:"N/A",employeeID:l[50],logType:"N/A"},q=p.value[36].$d;if(l.lastTerm&&(m=l.lastTerm),l.termEntryDate&&(q=l.termEntryDate.$d),R.value[397].isSameOrAfter(p.value[36])&&(!l.terminated||!l.lastTerm)){const{data:W}=await H({release:l,entryMoment:q,workdayData:m});Y({data:W,notify:!0})}else if(!l.terminated||!l.lastTerm)r.dialog({title:"Alert",message:"Please complete the termination in Workday first."});else{const{data:W}=await H({release:l,entryMoment:q,workdayData:m});Y({data:W,notify:!0})}},ve=({release:l,employee:m})=>{if(l[43]==="Reassign"){const q=`https://elitehcms.quickbase.com/db/bpzpy6n3x?a=dbpage&pageID=2&ee=${m[3]}`;window.location.href=q}else Y({data:l,notify:!0,employee:m})},ye=()=>{window.close()},he=async()=>{if(!_(t.params.release)){r.loading.show();const{data:l}=await L.fetchFromHiringApp({fields:[z({type:"releases",query:"",id:t.params.release})]});k({id:l[3],data:l}),r.loading.hide(),$==="QuickBase User"&&fe({data:l})}},fe=async({data:l})=>{if(l[87]==="Active"&&l[95]&&l[42]!=="Complete"){const{reassigned:m,timestamp:q}=await Se({release:l});m&&$e({release:l,timestamp:q})}else if(l[73]==="Processed"){if(l.workdayTerm)return;const{release:m}=await F({release:l});Y({data:m})}else if(l[79]!=="Complete"&&l[36].$d&&!D().isBefore(D(l[36].$d))){const{completed:m}=await be({release:l}),{release:q}=await F({release:m});q.terminated?G({release:q}):Y({data:q})}else{const{release:m}=await F({release:l});m.terminated?G({release:m}):Y({data:m})}},F=async({release:l})=>{if(l[87]!=="Terminated")return l.terminated=!1,{release:l};{const m=await X({release:l});if(m.terminated&&m.lastTerm)if(m[73]==="Processed"){const{data:q}=await L.upsertRecordsXML({to:"bp3ga39ut",data:[{3:{value:m[3]},106:{value:JSON.stringify(m.lastTerm)}}],fieldsToReturn:[80],formatObject:80});return{release:q[0][80]}}else return{release:m};else return{release:m}}},be=async({release:l})=>{await Ye({id:l[28]});const{data:m}=await L.fetchFromHiringApp({fields:[z({type:"releases",query:"",id:l[3]})]});return{completed:m}},G=async({release:l})=>{r.dialog({title:"Confirm",message:"It looks like this termination has already been processed in Workday. Would you like to update this employee in CEM now?",persistent:!0,cancel:!0}).onOk(async()=>{const{data:m}=await H({release:l,entryMoment:l.termEntryDate.$d,workdayData:l.lastTerm});Y({data:m,notify:!0})}).onCancel(()=>{Y({data:l})})},$e=async({release:l,timestamp:m})=>{r.dialog({title:"Confirm",message:"It looks like this employee has been reassigned. Would you like to update this release in CEM now?",persistent:!0,cancel:!0}).onOk(async()=>{const q=await Te({release:l,disposition:"Reassign",ts:m,updatedBy:i});Y({data:q,notify:!0})}).onCancel(()=>{Y({data:l})})},Y=({data:l,notify:m,employee:q})=>{r.loading.isActive&&r.loading.hide(),p.value.employee?l.employee=p.value.employee:q&&(l.employee=q),p.value.assignment&&(l.assignment=p.value.assignment),k({id:l[3],data:l}),m&&r.notify({type:"positive",message:"Employee updated in CEM"})},qe=()=>{s.value=!0};return xe(s,(l,m)=>{s.value&&setTimeout(()=>{print(),setTimeout(()=>{s.value=!1},500)},200)}),he(),{release:p,employee:R,assignment:b,evaluation:T,evaluator:me,reviewer:pe,processor:ue,getUserType:$,fab:d,dayjs:D,submitter:K,capitalize:f,showPrint:s,printPage:qe,releaseReviewed:ve,completeTermination:_e,closeWindow:ye}}},_a={class:"q-px-sm q-pb-xl"},va={class:"row q-py-sm"},ya={class:"col-12 col-sm-3"},ha=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Submitted By")],-1),fa={class:"text-body2 q-pl-md"},ba={class:"col-12 col-sm-3"},$a=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Evaluated By")],-1),qa={class:"text-body2 q-pl-md"},ga={key:0},wa={key:1},Da={key:0,class:"col-12 col-sm-3"},xa=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Reviewed By")],-1),ka={class:"text-body2 q-pl-md"},Ca={key:1,class:"col-3"},Ra=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Processed By")],-1),Ya={class:"text-body2 q-pl-md"},Sa=e("div",{class:"text-primary text-h6 text-bold"},"Termination Workday Data",-1),Ta={class:"row q-py-sm"},Ma={class:"col-12 col-sm-3"},Na=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Entry Date")],-1),Ea={class:"text-body2 q-pl-md"},Ia={class:"col-12 col-sm-3"},Pa=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Effective Date")],-1),La={class:"text-body2 q-pl-md"},Aa={class:"row"},Qa={class:"col-12 col-md-6"},ja={class:"row q-py-sm"},za={class:"col-3"},Oa=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Submitted By")],-1),Va={class:"text-body2 q-pl-md"},Ba={class:"col-3"},Ua=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Evaluated By")],-1),Fa={class:"text-body2 q-pl-md"},Wa={key:0},Ha={key:1},Ja={key:0,class:"col-3"},Ka=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Reviewed By")],-1),Ga={class:"text-body2 q-pl-md"},Xa={key:1,class:"col-3"},Za=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Processed By")],-1),el={class:"text-body2 q-pl-md"};function sl(s,d,r,t,f,$){const i=N("employee-information"),_=N("evaluation"),k=N("departure-information"),S=N("review-form"),p=N("print-employee-information"),R=N("print-evaluation"),b=N("print-departure-information");return c(),h(Ce,{style:{"max-width":"100vw"}},{default:n(()=>[e("div",_a,[t.release&&!t.showPrint?(c(),h(C,{key:0,flat:"",class:"text-dark"},{default:n(()=>[s.$route.name==="view-release"?(c(),h(le,{key:0,class:"q-pb-xs print-hide",align:"right"},{default:n(()=>[t.release[42]==="Reviewed"&&t.release[43]==="Terminate"&&t.getUserType==="QuickBase User"?(c(),h(I,{key:0,icon:"done",label:"Termination Processed",color:"positive",onClick:t.completeTermination},null,8,["onClick"])):x("",!0),a(I,{icon:"print",label:"Print",color:"info",onClick:t.printPage},null,8,["onClick"]),a(I,{icon:"close",label:"Close",color:"dark",onClick:d[0]||(d[0]=u=>t.getUserType==="QuickBase User"?t.closeWindow():s.$router.replace({name:"employees"}))})]),_:1})):x("",!0),a(v,{class:"q-py-xs"},{default:n(()=>[a(i,{assignment:t.assignment,employee:t.employee,release:t.release},null,8,["assignment","employee","release"])]),_:1}),t.evaluation?(c(),h(v,{key:1,class:"q-py-xs"},{default:n(()=>[a(_,{data:t.evaluation},null,8,["data"])]),_:1})):x("",!0),a(v,{class:"q-py-xs"},{default:n(()=>[a(k,{employee:t.employee,release:t.release},null,8,["employee","release"])]),_:1}),a(v,{class:"q-py-xs"},{default:n(()=>[a(C,null,{default:n(()=>[a(v,{class:"q-py-none"},{default:n(()=>[e("div",va,[e("div",ya,[ha,e("div",fa,[e("span",null,o(t.submitter[37])+", "+o(t.submitter[35]),1)])]),e("div",ba,[$a,e("div",qa,[t.evaluator?(c(),g("span",ga,o(t.capitalize(t.evaluator[22].toLowerCase()))+", "+o(t.capitalize(t.evaluator[20].toLowerCase())),1)):(c(),g("span",wa,"Not Specified"))])]),t.reviewer?(c(),g("div",Da,[xa,e("div",ka,[e("span",null,o(t.capitalize(t.reviewer[37].toLowerCase()))+", "+o(t.capitalize(t.reviewer[35].toLowerCase())),1)])])):x("",!0),t.processor?(c(),g("div",Ca,[Ra,e("div",Ya,[e("span",null,o(t.capitalize(t.processor[37].toLowerCase()))+", "+o(t.capitalize(t.processor[35].toLowerCase())),1)])])):x("",!0)])]),_:1})]),_:1})]),_:1}),t.release.workdayTerm?(c(),h(v,{key:2,class:"q-py-xs"},{default:n(()=>[a(C,null,{default:n(()=>[a(v,{class:"text-center q-py-sm"},{default:n(()=>[Sa]),_:1}),a(v,{class:"q-py-none"},{default:n(()=>[e("div",Ta,[e("div",Ma,[Na,e("div",Ea,[e("span",null,o(s.$dayjs(t.release.workdayTerm.logEntryMoment).format("MM/DD/YYYY hh:mm:ss a z")),1)])]),e("div",Ia,[Pa,e("div",La,[e("span",null,o(s.$dayjs(t.release.workdayTerm.logEffectiveMoment).format("MM/DD/YYYY hh:mm:ss a z")),1)])])])]),_:1})]),_:1})]),_:1})):x("",!0),t.release[42]==="Pending"&&t.getUserType==="QuickBase User"?(c(),h(v,{key:3,class:"q-py-sm"},{default:n(()=>[e("div",Aa,[e("div",Qa,[a(S,{release:t.release,onReleaseReviewed:t.releaseReviewed},null,8,["release","onReleaseReviewed"])])])]),_:1})):x("",!0)]),_:1})):x("",!0),t.release&&t.showPrint?(c(),h(C,{key:1,id:"printArea",flat:"",class:"text-body2"},{default:n(()=>[a(v,{class:"q-py-xs"},{default:n(()=>[a(p,{assignment:t.assignment,employee:t.employee,release:t.release},null,8,["assignment","employee","release"])]),_:1}),a(w),t.evaluation?(c(),h(v,{key:0,class:"q-py-xs"},{default:n(()=>[a(R,{data:t.evaluation},null,8,["data"])]),_:1})):x("",!0),a(w),a(v,{class:"q-py-xs"},{default:n(()=>[a(b,{employee:t.employee,release:t.release},null,8,["employee","release"])]),_:1}),a(w),a(v,{class:"q-pb-sm"},{default:n(()=>[a(C,{flat:""},{default:n(()=>[a(v,{class:"q-py-none"},{default:n(()=>[e("div",ja,[e("div",za,[Oa,e("div",Va,[e("span",null,o(t.submitter[37])+", "+o(t.submitter[35]),1)])]),e("div",Ba,[Ua,e("div",Fa,[t.evaluator?(c(),g("span",Wa,o(t.capitalize(t.evaluator[22].toLowerCase()))+", "+o(t.capitalize(t.evaluator[20].toLowerCase())),1)):(c(),g("span",Ha,"Not Specified"))])]),t.reviewer?(c(),g("div",Ja,[Ka,e("div",Ga,[e("span",null,o(t.capitalize(t.reviewer[37].toLowerCase()))+", "+o(t.capitalize(t.reviewer[35].toLowerCase())),1)])])):x("",!0),t.processor?(c(),g("div",Xa,[Za,e("div",el,[e("span",null,o(t.capitalize(t.processor[37].toLowerCase()))+", "+o(t.capitalize(t.processor[35].toLowerCase())),1)])])):x("",!0)])]),_:1})]),_:1})]),_:1})]),_:1})):x("",!0)])]),_:1})}var Pl=M(ua,[["render",sl]]);export{Pl as default};
