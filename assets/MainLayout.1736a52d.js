import{l as C,_ as L,B as o,ar as s,bs as a,bQ as S,d as t,bR as $,as as p,ay as z,ad as _,H as E,bS as A,b6 as m,bT as te,C as h,F as K,b5 as F,I as Q,r as y,bU as ae,bV as oe,bW as O,w as N,bX as w,E as b,bu as ne}from"./index.f532dd3a.js";import{Q as se,a as P}from"./QHeader.3a567915.js";import{Q as re}from"./QMenu.219b0d4b.js";import{Q as j}from"./QToolbar.c471e185.js";import{Q as ie}from"./QImg.c4db01a4.js";import{Q as D}from"./QList.2a81b73f.js";import{Q as W}from"./QSelect.40ac6683.js";import{Q as le,a as ue}from"./QDrawer.d390e1ed.js";import{Q as me,a as pe}from"./QLayout.4b919ba9.js";import{C as de}from"./ClosePopup.49b5470b.js";import{Q as ce}from"./QBadge.b36b5db8.js";import{M as fe,Q as ve}from"./MenuSubLink.5b65389c.js";import{u as ge}from"./use-quasar.45d0ed96.js";import{u as ye}from"./i18n.c56fe056.js";import{u as ke,b as be,c as _e,q as R}from"./app.c2decb41.js";import{_ as he}from"./KioskLogin.5640b025.js";import{_ as Se}from"./languageSelector.e6f4f9f8.js";import{_ as Me}from"./version.e8f56180.js";import{h as H}from"./HelpDeskTicket.0e5586d9.js";import"./QResizeObserver.fdf89ea6.js";import"./position-engine.9267cf84.js";import"./selection.36689ad5.js";import"./QChip.055ed411.js";import"./rtl.b51694b1.js";import"./TouchPan.2eb56edf.js";import"./touch.3df10340.js";import"./QSlideTransition.bfff612e.js";import"./_commonjsHelpers.a26ce4be.js";import"./dayjs.bb7adb48.js";import"./localForage.627988b4.js";import"./api.df6fe10b.js";import"./index.04bc0a32.js";import"./vee-validate.esm.f12921ec.js";import"./array.59f93f43.js";import"./QTooltip.3a6805dc.js";import"./QFile.f0ca71c6.js";import"./QSpinnerGears.57d3dbb7.js";import"./QForm.75a0f1ba.js";const qe=C({name:"MenuLink",props:{title:{type:String,required:!0},caption:{type:String,default:""},to:{type:Object,default:()=>({path:"",exact:!0})},icon:{type:String,default:""},mini:{type:Boolean,default:!1},subMenu:{type:Array,default:null},count:{type:Number,default:null}}});function we(e,r,v,i,g,d){return o(),s(A,{to:e.to,class:E(["rounded-borders bg-white",{"q-ma-sm":!e.mini,"q-ma-xs":e.mini}]),"active-class":e.mini?"brand-active-menu text-white":"brand-active-menu text-white q-py-md",exact:""},{default:a(()=>[e.icon?(o(),s(S,{key:0,avatar:""},{default:a(()=>[t($,{name:e.icon},null,8,["name"])]),_:1})):p("",!0),t(S,null,{default:a(()=>[t(W,null,{default:a(()=>[z(_(e.title),1)]),_:1})]),_:1}),e.count?(o(),s(S,{key:1,side:"",top:""},{default:a(()=>[t(ce,{color:"primary",label:e.count},null,8,["label"])]),_:1})):p("",!0)]),_:1},8,["to","class","active-class"])}var $e=L(qe,[["render",we]]);const Qe=C({name:"MenuExpanded",components:{MenuSubLink:fe},props:{title:{type:String,required:!0},caption:{type:String,default:""},to:{type:Object,default:()=>({path:"",exact:!0})},icon:{type:String,default:""},mini:{type:Boolean,default:!1},subMenu:{type:Array,default:null}}});function Ce(e,r,v,i,g,d){const c=m("MenuSubLink");return o(),s(ve,{icon:e.icon,label:e.title,class:E(["rounded-borders bg-white",{"q-ma-sm":!e.mini,"q-ma-xs":e.mini}]),"active-class":"brand-active-menu text-white",exact:""},{default:a(()=>[t(te),t(S,null,{default:a(()=>[t(D,null,{default:a(()=>[(o(!0),h(K,null,F(e.subMenu,l=>(o(),s(c,Q({key:l},l,{mini:e.mini}),null,16,["mini"]))),128))]),_:1})]),_:1})]),_:1},8,["icon","label","class"])}var Le=L(Qe,[["render",Ce]]);const Te=C({name:"MenuNav",components:{MenuLink:$e,MenuExpanded:Le},props:{title:{type:String,required:!0},caption:{type:String,default:""},to:{type:Object,default:()=>({path:"",exact:!0})},icon:{type:String,default:""},mini:{type:Boolean,default:!1},subMenu:{type:Array,default:null}}});function Ue(e,r,v,i,g,d){const c=m("MenuLink"),l=m("MenuExpanded");return o(),h("div",null,[!e.subMenu&&e.to?(o(),s(c,Q({key:0},{...e.$props,...e.$attrs},{mini:e.mini}),null,16,["mini"])):e.subMenu&&e.subMenu.length>0?(o(),s(l,Q({key:1},{...e.$props,...e.$attrs},{mini:e.mini}),null,16,["mini"])):p("",!0)])}var Be=L(Te,[["render",Ue]]);const De=C({name:"MainLayout",components:{MenuNav:Be,kioskLogin:he,languageSelector:Se,version:Me,helpDeskTicket:H},setup(){const e=ge(),{locale:r}=ye(),v=y(!1),i=y(!1),g=y(!1),d=y(!1),c=y(!1),l=ae(),f=oe(),M=ke(),q=be(),T=_e(),{getUnReadCount:U}=O(T),{toolbarTitle:u}=q,{getUserType:X}=M,{onKiosk:k,activeMenu:G,pageType:J,startPageEnabled:I,kioskActive:Y,homeButtonEnabled:Z}=O(q),x=y(!1),B=async n=>{await R.checkKioskStatus(n)||(c.value=!0)};if(k.value&&B(!0),f.query&&f.query.office_id){const n=Object.assign({},f.query);delete n.office_id,delete n.qr,l.replace({query:n})}N(Y,n=>{!n&&k.value&&B()}),N(()=>f.query,async()=>{if(k.value&&B(!1),f.query.office_id){const n=Object.assign({},f.query);delete n.office_id,n.qr&&(R.checkInUser(),delete n.qr),l.replace({query:n})}});const V=async()=>{k.value&&(r.value="en-US"),M.logout().then(()=>{I.value&&k.value?l.replace({name:"start"}):l.replace({name:"login"})})},ee=()=>{V()};return{tab:y("mails"),userStore:M,leftDrawerOpen:v,rightDrawerOpen:g,miniState:i,miniHover:d,kioskPrompt:c,onIdle:ee,onKiosk:k,activeMenu:G,homeButtonEnabled:Z,miniMouseOver(){i.value===!0&&(d.value=!1)},miniMouseOut(){i.value===!0&&(d.value=!0)},toggleLeftDrawer(){e.screen.gt.sm?(i.value=!i.value,i.value===!0&&(d.value=!0)):v.value=!v.value},toggleRightDrawer(){g.value=!g.value},drawerClick(n){i.value&&(i.value=!1,n.stopPropagation())},logout:V,toolbarTitle:u,pageType:J,startPageEnabled:I,helpDeskTicket:H,addTicket:x,getUserType:X,getUnReadCount:U}}}),Ee={key:0,class:"q-mr-sm q-ml-sm",src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo-white.png",alt:"BrandSafway Logo",height:"25"},Ie={key:0},Ve={key:1},Oe={class:"q-gutter-sm row items-center no-wrap"},Ne={class:"row no-wrap q-pa-md"},Pe={class:"column items-center"},je={class:"text-subtitle1 q-mt-md q-mb-xs"};function Re(e,r,v,i,g,d){const c=m("languageSelector"),l=m("MenuNav"),f=m("router-view"),M=m("kioskLogin"),q=m("v-idle"),T=m("version"),U=m("helpDeskTicket");return o(),s(pe,{view:"hHh lpR fFf"},{default:a(()=>[t(se,{elevated:""},{default:a(()=>[t(j,{style:{height:"62px"}},{default:a(()=>[t(w,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),e.$q.screen.gt.sm?(o(),h("img",Ee)):p("",!0),t(P,null,{default:a(()=>[e.$q.screen.lt.sm?(o(),h("span",Ie)):(o(),h("span",Ve,_(e.toolbarTitle),1))]),_:1}),b("div",Oe,[t(c,{dense:"",borderless:"",class:"lang-white"}),t(w,{flat:"",dense:"",color:"white"},{default:a(()=>[b("div",null,_(e.userStore.getUser[35])+" "+_(e.userStore.getUser[37]),1),t($,{right:"",size:"2.2em",name:"account_circle"}),t(re,null,{default:a(()=>[b("div",Ne,[b("div",Pe,[t($,{right:"",size:"72px",name:"account_circle",class:"q-mr-md"}),b("div",je,_(e.userStore.getUser[35])+" "+_(e.userStore.getUser[37]),1),ne(t(w,{color:"primary",label:e.$t("logout"),push:"",size:"sm",onClick:e.logout},null,8,["label","onClick"]),[[de]])])])]),_:1})]),_:1})])]),_:1})]),_:1}),t(le,{modelValue:e.leftDrawerOpen,"onUpdate:modelValue":r[1]||(r[1]=u=>e.leftDrawerOpen=u),side:"left","show-if-above":"",bordered:"",mini:e.miniState&&e.miniHover,onMouseover:e.miniMouseOver,onMouseout:e.miniMouseOut,onClickCapture:e.drawerClick,class:"text-primary bg-white"},{default:a(()=>[t(ue,{class:"fit"},{default:a(()=>[e.$q.screen.lt.sm?(o(),s(j,{key:0,style:{height:"64px"}},{default:a(()=>[t(P,{class:"items-center"},{default:a(()=>[t(ie,{src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo.svg",style:{"max-width":"245px"},fit:"center",class:"q-ml-md"})]),_:1})]),_:1})):p("",!0),t(D,{class:"q-mt-sm"},{default:a(()=>[(o(!0),h(K,null,F(e.activeMenu,u=>(o(),s(l,Q({key:u.title},u,{mini:e.miniState}),null,16,["mini"]))),128))]),_:1}),e.getUserType==="Project User"||e.getUserType==="QuickBase User"?(o(),s(D,{key:1,class:"q-mt-sm"},{default:a(()=>[b("div",null,[t(A,{class:E(["rounded-borders bg-white",{"q-ma-sm":!e.miniState,"q-ma-xs":e.miniState}]),clickable:"",onClick:r[0]||(r[0]=u=>e.addTicket=!0)},{default:a(()=>[t(S,{avatar:""},{default:a(()=>[t($,{name:"fa-solid fa-circle-info"})]),_:1}),t(S,null,{default:a(()=>[t(W,null,{default:a(()=>[z("Request Support")]),_:1})]),_:1})]),_:1},8,["class"])])]),_:1})):p("",!0)]),_:1})]),_:1},8,["modelValue","mini","onMouseover","onMouseout","onClickCapture"]),t(me,null,{default:a(()=>[t(f)]),_:1}),e.onKiosk?(o(),s(M,{key:0,modelValue:e.kioskPrompt,"onUpdate:modelValue":r[2]||(r[2]=u=>e.kioskPrompt=u)},null,8,["modelValue"])):p("",!0),e.onKiosk?(o(),s(q,{key:1,onIdle:e.onIdle,duration:300,style:{display:"none"}},null,8,["onIdle"])):p("",!0),e.onKiosk&&e.startPageEnabled&&e.homeButtonEnabled?(o(),s(w,{key:2,icon:"o_home",onClick:e.onIdle,class:"z-max home-button-main",size:"xl",ripple:!0},null,8,["onClick"])):p("",!0),t(T),t(U,{modelValue:e.addTicket,"onUpdate:modelValue":r[3]||(r[3]=u=>e.addTicket=u)},null,8,["modelValue"])]),_:1})}var Qt=L(De,[["render",Re]]);export{Qt as default};
