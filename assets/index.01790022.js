import{l as D,bL as O,_ as T,A as o,an as m,bi as a,d as t,cw as U,D as n,ab as c,B as u,ao as y,cy as j,bO as b,cz as L,r as k,c as M,G as h,au as R,bM as F,w as I,aZ as q,bI as B,bk as P,aY as G,H as Y,F as Z}from"./index.7f467912.js";import{Q as N,a as J}from"./QHeader.ccb24b58.js";import{Q as K}from"./QMenu.ee595e6f.js";import{Q as E}from"./QToolbar.b7f407c3.js";import{Q as X}from"./QImg.484fb7a5.js";import{Q as x}from"./QList.86507577.js";import{Q as ee,a as te}from"./QDrawer.d74ab556.js";import{a as oe,Q as se}from"./QLayout.f0be64d5.js";import{C as ae}from"./ClosePopup.aa9d4031.js";import{u as re}from"./use-quasar.bf22106c.js";import{u as ne}from"./useQuerySaver.c5fe436e.js";import{u as le,b as ie,q as me}from"./quickbase.159c15f2.js";import{u as W}from"./dataStore.6465eb17.js";import{_ as ce}from"./version.99b13dea.js";import{M as ue}from"./MenuNav.1bcd6bec.js";import{_ as pe}from"./languageSelector.cb7f0948.js";import"./workday.60a35b68.js";import"./dayjs.0f1a0bc9.js";import"./workdayAPI.3922a68e.js";import{Q as de}from"./QSpinnerBall.bf7bcc1d.js";import{a as ye}from"./syncEmployeeWithWorkday.2c6ed7a9.js";import"./QResizeObserver.d592ab8a.js";import"./position-engine.7d860d3d.js";import"./selection.8b006c7f.js";import"./TouchPan.b5d261cd.js";import"./touch.60582172.js";import"./_commonjsHelpers.a26ce4be.js";import"./index.7dbe61ef.js";import"./localForage.24410b96.js";import"./i18n.5ecfa174.js";import"./api.54911380.js";import"./QItemLabel.6ffcf1f7.js";import"./QBadge.0722d15c.js";import"./MenuSubLink.29afc01c.js";import"./QSlideTransition.1f4b8792.js";import"./QSelect.a345da3a.js";import"./QChip.6a7808a8.js";import"./rtl.cf9bbe47.js";const fe=D({props:{employee:Object,mini:Boolean},setup(e){const s=O();return W(),{props:e,goToTermination:()=>{s.push({name:"ee-termination"})}}}}),ge={class:"text-h5 text-white q-mb-sm"},ve={key:0,class:"text-body1 text-white q-mb-sm"},ke={class:"text-body1 text-white"};function we(e,s,p,f,r,d){return o(),m(L,{class:"bg-accent q-my-lg q-pt-none",flat:"",square:""},{default:a(()=>[t(U,{class:"text-center q-pb-xs"},{default:a(()=>[n("div",ge,c(e.employee[24]),1),e.employee[378]!==""?(o(),u("div",ve,"ID: "+c(e.employee[378]),1)):y("",!0),n("div",ke,c(e.employee[25]),1)]),_:1}),e.$can("manage","employees")?(o(),m(j,{key:0,class:"q-pb-xs",align:"center"},{default:a(()=>[e.$route.name!=="ee-termination"&&e.$route.name!=="view-ee-release"&&!e.employee[581]&&e.employee[408]==="Active"&&e.employee[79]===7?(o(),m(b,{key:0,label:"Release",color:"primary",dense:"",onClick:e.goToTermination},null,8,["onClick"])):y("",!0)]),_:1})):y("",!0)]),_:1})}var he=T(fe,[["render",we]]);const be=D({name:"Last Workday Sync",props:{employee:Object},setup(e){const s=k(!0),{setWorkdayData:p,updateViewedEmployees:f,getEmployee:r}=W(),d=async i=>{s.value=!0;const{clm:g,sync:w}=await ye({clm:e.employee},i);w&&(p({id:g[3],data:w}),f({id:g[3],dataset:"workday",data:w})),s.value=!1},l=M(()=>r(e.employee[3])&&r(e.employee[3]).workday?r(e.employee[3]).workday:null),$=M(()=>{if(l.value){const{employmentData:i}=l.value;return i&&i.workerStatus&&i.workerStatus.active?"Active":"Terminated"}else return"N/A"});return d(!1),{syncing:s,checkWorkday:d,workday:l,workerStatus:$}}}),$e={key:1};function qe(e,s,p,f,r,d){return o(),u("div",null,[e.syncing?(o(),u("div",{key:0,class:h(["text-dark q-mr-sm",e.$q.screen.gt.lg?"text-body2":"text-caption"])},[R(" Checking Workday Now... "),t(de,{class:"q-ml-sm",color:"primary",size:e.$q.screen.gt.lg?"3em":"2em"},null,8,["size"])],2)):y("",!0),e.workday&&!e.syncing?(o(),u("div",$e,[e.workday[22]?(o(),u("div",{key:0,class:h(["text-primary",e.$q.screen.gt.lg?"text-body2":"text-caption"])},"No Data in Workday",2)):(o(),u("div",{key:1,class:h(e.$q.screen.gt.lg?"text-body2":"text-caption")},[n("span",{class:h(["text-dark q-mr-sm",e.$q.screen.gt.lg?"text-body2":"text-caption"])},"Worker Status:",2),n("span",{class:h(["text-primary text-weight-bold",e.$q.screen.gt.lg?"text-body2":"text-caption"])},c(e.workerStatus),3)],2)),n("div",null,[n("span",{class:h(["text-dark q-mr-sm",e.$q.screen.gt.lg?"text-body2":"text-caption"])},"Last Check in Workday:",2),n("span",{class:h(["text-weight-light text-secondary text-italic",e.$q.screen.gt.lg?"text-body2":"text-caption"])},c(e.$dayjs(e.workday[1].$d).fromNow()),3),t(b,{color:"accent",label:"Check Now",flat:"",icon:"refresh",size:"sm",onClick:s[0]||(s[0]=l=>e.checkWorkday(!0))})])])):y("",!0)])}var Ce=T(be,[["render",qe]]);const Se=D({name:"View Employee",components:{MenuNav:ue,version:ce,languageSelector:pe,BasicEmployeeCard:he,LastWorkdaySync:Ce},setup(){const e=k(null),s=k(!1),p=re(),f=k(!1),r=k(!1),d=k(!1),l=k(!1),$=O(),i=F(),g=le(),{getUserType:w}=g,{toolbarTitle:S,viewEmployeeMenu:v}=ie(),{setEmployees:H,getEmployee:V}=W(),_=M(()=>V(i.params.id)),z=async()=>{const{state:C}=$.options.history;if(e.value=C.back,!_.value){p.loading.show();const{data:Q}=await me.fetchFromHiringApp({fields:[ne({type:"employee",query:"",id:i.params.id})]},{action:"read",type:"employee"});H({id:Q[3],data:Q}),p.loading.hide()}},A=async()=>{g.logout().then(()=>{$.replace({name:"login"})})};return z(),I(_,(C,Q)=>{}),{tab:k("mails"),fab:s,userStore:g,leftDrawerOpen:f,rightDrawerOpen:d,miniState:r,miniHover:l,miniMouseOver(){r.value===!0&&(l.value=!1)},miniMouseOut(){r.value===!0&&(l.value=!0)},toggleLeftDrawer(){p.screen.gt.sm?(r.value=!r.value,r.value===!0&&(l.value=!0)):f.value=!f.value},toggleRightDrawer(){d.value=!d.value},drawerClick(C){r.value&&(r.value=!1,C.stopPropagation())},logout:A,toolbarTitle:S,viewEmployeeMenu:v,employee:_,getUserType:w,opener:e,closeWindow(){window.close()}}}}),_e={key:0,class:"q-mr-sm q-ml-sm",src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo-white.png",alt:"BrandSafway Logo",height:"25"},Qe={key:0},Me={key:1},De={class:"q-gutter-sm row items-center no-wrap"},Te={class:"row no-wrap q-pa-md"},We={class:"column items-center"},Be={class:"text-subtitle1 q-mt-md q-mb-xs"},Ne={class:"row items-start"},Ee={class:"col-8"},Oe={class:"col-4 text-right"};function Ue(e,s,p,f,r,d){const l=q("languageSelector"),$=q("basic-employee-card"),i=q("MenuNav"),g=q("last-workday-sync"),w=q("router-view"),S=q("version");return o(),m(se,{view:"hHh lpR fFf"},{default:a(()=>[t(J,{elevated:""},{default:a(()=>[t(E,{style:{height:"62px"}},{default:a(()=>[t(b,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),e.$q.screen.gt.sm?(o(),u("img",_e)):y("",!0),t(N,null,{default:a(()=>[e.$q.screen.lt.sm?(o(),u("span",Qe)):(o(),u("span",Me,c(e.toolbarTitle),1))]),_:1}),n("div",De,[t(l,{dense:"",borderless:"",class:"lang-white"}),t(b,{flat:"",dense:"",color:"white"},{default:a(()=>[n("div",null,c(e.userStore.getUser[35])+" "+c(e.userStore.getUser[37]),1),t(B,{right:"",size:"2.2em",name:"account_circle"}),t(K,null,{default:a(()=>[n("div",Te,[n("div",We,[t(B,{right:"",size:"72px",name:"account_circle",class:"q-mr-md"}),n("div",Be,c(e.userStore.getUser[35])+" "+c(e.userStore.getUser[37]),1),P(t(b,{color:"primary",label:e.$t("logout"),push:"",size:"sm",onClick:e.logout},null,8,["label","onClick"]),[[ae]])])])]),_:1})]),_:1})])]),_:1})]),_:1}),t(te,{modelValue:e.leftDrawerOpen,"onUpdate:modelValue":s[0]||(s[0]=v=>e.leftDrawerOpen=v),side:"left","show-if-above":"",bordered:"",mini:e.miniState&&e.miniHover,onMouseover:e.miniMouseOver,onMouseout:e.miniMouseOut,onClickCapture:e.drawerClick,class:"text-primary bg-accent print-hide"},{default:a(()=>[t(ee,{class:"fit"},{default:a(()=>[e.$q.screen.lt.sm?(o(),m(E,{key:0,class:"bg-white",style:{height:"64px"}},{default:a(()=>[t(N,{class:"items-center"},{default:a(()=>[t(X,{src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo.svg",style:{"max-width":"245px"},fit:"center",class:"q-ml-md"})]),_:1})]),_:1})):y("",!0),e.employee?(o(),m($,{key:1,employee:e.employee,mini:e.miniState},null,8,["employee","mini"])):y("",!0),t(x,{class:"q-mt-sm"},{default:a(()=>[(o(!0),u(Z,null,G(e.viewEmployeeMenu,v=>(o(),m(i,Y({key:v.title},v,{mini:e.miniState}),null,16,["mini"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue","mini","onMouseover","onMouseout","onClickCapture"]),t(oe,null,{default:a(()=>[t(L,{class:"print-hide",flat:""},{default:a(()=>[t(U,{class:"q-pb-xs q-pt-sm"},{default:a(()=>[n("div",Ne,[n("div",Ee,[e.employee?(o(),m(g,{key:0,employee:e.employee},null,8,["employee"])):y("",!0)]),n("div",Oe,[e.$q.screen.gt.sm?(o(),m(b,{key:0,icon:"close",label:"Close",color:"dark",onClick:s[1]||(s[1]=v=>e.getUserType==="QuickBase User"?e.closeWindow():e.$router.replace({path:"/"}))})):(o(),m(b,{key:1,icon:"close",round:"",color:"dark",onClick:s[2]||(s[2]=v=>e.getUserType==="QuickBase User"?e.closeWindow():e.$router.replace({path:"/"}))}))])])]),_:1})]),_:1}),t(w)]),_:1}),t(S)]),_:1})}var bt=T(Se,[["render",Ue]]);export{bt as default};
