import{Q as V}from"./QSpace.8372e47f.js";import{bN as M,r,w as R,aL as E,c as w,A as h,B as x,d as t,bi as l,cw as G,D as c,G as j,a7 as i,ab as u,cz as W,cx as F,bI as H,bO as p,au as y}from"./index.544726d2.js";import{Q as k}from"./QTooltip.05196fe9.js";import{Q as I}from"./QTd.c0f5d399.js";import{u as K}from"./use-quasar.de9b4251.js";import{e as X}from"./export-file.eb604dd4.js";import{Q as Z,b as ee,u as te}from"./quickbase.dc759386.js";import{dayjs as oe}from"./dayjs.18653603.js";import{_ as ae}from"./recruitingTabs.3cdd99dc.js";import{_ as le,a as se}from"./aTable.edaf4847.js";import"./position-engine.9b566ae2.js";import"./selection.019ae5ac.js";import"./_commonjsHelpers.a26ce4be.js";import"./index.7dbe61ef.js";import"./localForage.cf0f4dd4.js";import"./i18n.95b8f7c4.js";import"./api.c454b805.js";import"./QBadge.4603a12d.js";import"./QRouteTab.67d25471.js";import"./QTabs.c4173b25.js";import"./QResizeObserver.271a1872.js";import"./rtl.cf9bbe47.js";import"./QSelect.152777d1.js";import"./QChip.2eb47deb.js";import"./QItemLabel.9df651b6.js";import"./QMenu.afaf079f.js";import"./QTable.1089518a.js";import"./QList.8b6cd145.js";import"./QMarkupTable.871b0fab.js";import"./use-fullscreen.6fa96420.js";const ie={class:"q-pa-md"},ne={class:"row items-center"},re={class:"col-12 col-md-5 q-px-sm"},ce={class:"col-12 col-md-3 q-px-sm"},de={class:"col-12 col-md-5 q-px-sm"},fe={key:0},me={key:1},Me={__name:"index",setup(ue){const f=K(),C=Z(),{openWindow:S}=ee(),q=te(),{primaryOffice:Q}=q,{fetchJobPost:N,fetchAllJobPost:T}=C,{getJobPost:L,getSelectedOffice:n,getLoadingState:$}=M(C),m=r(n.value?n.value[8]:null),b=r("Job Post"),D=r("jobPost"),v=r(""),P=r({sortBy:"1",descending:!1,rowsPerPage:150}),_=o=>{m.value?N({selectedId:m.value,refresh:o}):T({can:"read",refresh:o})};_(!0),R(n,()=>{m.value=n.value?n.value[8]:null,_()});const z=r(new Date),A=setInterval(()=>{z.value=new Date},1e3);E(()=>{clearInterval(A)});const O=w(()=>["index","craft","job","locationCity","#applications","action",...n.value?[]:["office"]]),g=w(()=>[{name:"index",align:"left",label:"#",sortable:!1},{name:"craft",align:"left",label:"Craft",field:"17",sortable:!1},{name:"job",align:"left",label:"Job",field:"19",sortable:!1},{name:"locationCity",align:"center",label:"Location City",field:"42",sortable:!1},{name:"#applications",align:"center",label:"# of Applications",field:"30",sortable:!1},{name:"office",align:"center",label:"Office",field:"93",sortable:!1},{name:"action",align:"center",label:"",sortable:!1}]),d=w(()=>L.value(m.value).filter(o=>!0).sort((o,s)=>P.value.descending?o[1].isBefore(s[1]):o[1].isAfter(s[1]))),B=(o,s,e)=>{let a=s!==void 0?s(o,e):o;return a=a==null?"":String(a),a=a.split('"').join('""'),`"${a}"`},Y=o=>{S(null,{url:`https://elitehcms.quickbase.com/db/bpz457c9d?a=dbpage&pageID=37&post_id=${o[3]}&page_id=15&office_id=${Q[8]}`,name:"Job Post"})},U=o=>{S(null,{url:`https://elitehcms.quickbase.com/db/bpz457c9d?a=dbpage&pageID=33&office_id=${Q[8]}&page_id=13`,name:"Post New Job"})},J=()=>{const o=[g.value.map(e=>B(e.label))].concat(d.value.map(e=>g.value.map(a=>B(typeof a.field=="function"?a.field(e):e[a.field===void 0?a.name:a.field],a.format,e)).join(","))).join(`\r
`);X(`${b.value} ${oe().format("MM.DD.YYYY")}.csv`,o,"text/csv")!==!0&&f.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})};return(o,s)=>(h(),x("div",ie,[t(ae),t(W,{flat:"",class:"q-pt-none"},{default:l(()=>[t(G,null,{default:l(()=>[c("div",ne,[c("div",re,[c("div",{class:j(["text-dark",i(f).screen.lt.md?"text-body1":"text-h5"])},u(b.value),3)]),t(V),c("div",ce,[t(le,{styleSelection:!0})])])]),_:1})]),_:1}),t(se,{rows:i(d),columns:i(g),pagination:P.value,filter:v.value,title:b.value,separator:"vertical","row-key":"3",loading:i($)(D.value),"visible-columns":i(O),downloadButton:!0,onDownload:J},{top:l(()=>[c("div",de,[t(F,{dense:i(f).screen.lt.md,modelValue:v.value,"onUpdate:modelValue":s[0]||(s[0]=e=>v.value=e),label:"Search...",clearable:""},{prepend:l(()=>[t(H,{name:"search"})]),_:1},8,["dense","modelValue"])]),t(V),c("div",{class:j(["text-dark text-caption text-italic",i(f).screen.lt.md?"offset-xs-5":""])},"(Total: "+u(i(d).length)+")",3),t(p,{flat:"",round:"",color:"primary",icon:"download",disable:i(d).length<1,onClick:J},{default:l(()=>[t(k,{class:"bg-accent text-black shadow-4",offset:[10,10]},{default:l(()=>[y(" Download ")]),_:1})]),_:1},8,["disable"]),t(p,{flat:"",round:"",color:"primary",icon:"add_circle",disable:i(d).length<1,onClick:U},{default:l(()=>[t(k,{class:"bg-accent text-black shadow-4",offset:[10,10]},{default:l(()=>[y(" Post New Job ")]),_:1})]),_:1},8,["disable"]),t(p,{flat:"",round:"",color:"primary",icon:"refresh",onClick:s[1]||(s[1]=e=>_(!0)),loading:i($)(D.value)},{default:l(()=>[t(k,{class:"bg-accent text-black shadow-4",offset:[10,10]},{default:l(()=>[y(" Refresh ")]),_:1})]),_:1},8,["loading"])]),"body-cell-submissionTime":l(e=>[t(I,{props:e},{default:l(()=>[o.$dayjs(e.value).isValid()?(h(),x("div",fe,u(e.value.format("L LT")),1)):(h(),x("div",me,u(e.row[1].format("L LT")),1))]),_:2},1032,["props"])]),"body-cell-action":l(e=>[t(I,{props:e},{default:l(()=>[t(p,{color:"primary",label:"View",onClick:a=>Y(e.row),size:".75rem"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination","filter","title","loading","visible-columns"])]))}};export{Me as default};
