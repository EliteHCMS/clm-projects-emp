import{k as ne,c1 as H,c as W,_ as re,z as i,am as V,bh as n,A as S,C as t,d as l,aa as a,D as Re,c6 as C,bE as ve,an as m,r as U,o as De,cx as A,b$ as ae,aY as ie,c2 as _,at as se,E as w,c3 as ue,aX as Ee,F as Se,c4 as ze,w as Qe,cl as He}from"./index.229e64ce.js";import{Q as Te}from"./QPage.0b5a8d20.js";import{Q as fe,a as he,b as Ye}from"./QStep.4b7a872b.js";import{c as Be,i as me,j as ye,e as ge,h as $e,d as Fe,f as Le}from"./quickbase.94e4f77e.js";import{a as K}from"./QSelect.8a52fd77.js";import{u as Ce}from"./i18n.cb2b8ad6.js";import{a as z,b as qe,u as p,c as q}from"./array.501827dd.js";import{u as Ne}from"./use-quasar.e4511157.js";import{Q as we}from"./QTooltip.a10effec.js";import"./use-panel.d8eecf82.js";import"./touch.d8ab472d.js";import"./selection.7a6c9b60.js";import"./QSlideTransition.60080786.js";import"./_commonjsHelpers.dfee5925.js";import"./dayjs.a43389e4.js";import"./localForage.7afe4812.js";import"./index.7dbe61ef.js";import"./api.37aa3d8d.js";import"./QChip.dd85d21d.js";import"./QMenu.bb32b8eb.js";import"./position-engine.9238d783.js";import"./rtl.65b79c69.js";const je=ne({props:{title:String,step:Number,name:Number},setup(){const{checkedIn:e,onKiosk:s}=Be(),{profile:$,updateProfile:u}=me(),k=ye(),{evergreenJobOptions:g}=H(k),{t:o}=Ce(),h=W(()=>e?z({selection:z().required(`${o("pleaseSelectAJob")}`).nullable()}):!1),{meta:r,errors:T,handleSubmit:B,isSubmitting:j}=qe({validationSchema:h,initialValues:{selection:$[19].value?{value:$[19].value,label:$[19].label}:null}}),{value:J}=p("selection"),F=B(R=>{const D={19:{value:R.selection.value,label:R.selection.label},40:{value:R.selection[13],label:R.selection[12]}};u({next:1,values:D})});return{checkedIn:e,onKiosk:s,selection:J,formMeta:r,formErrors:T,isSubmitting:j,submitUpdate:F,evergreenJobOptions:g}}}),Je={key:0},Ze={class:"text-caption"};function Ke(e,s,$,u,k,g){return i(),V(he,{name:e.name,title:e.title,done:e.step>0},{default:n(()=>[e.checkedIn||e.onKiosk?(i(),S("div",Je,[t("form",{onSubmit:s[1]||(s[1]=ve((...o)=>e.submitUpdate&&e.submitUpdate(...o),["prevent"]))},[l(K,{autofocus:"",label:e.$t("selectAJob"),modelValue:e.selection,"onUpdate:modelValue":s[0]||(s[0]=o=>e.selection=o),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:e.evergreenJobOptions,style:Re(e.$q.screen.gt.md?"width: 50%":"width: 100%"),error:!!e.formErrors.selection,"bottom-slots":"",dense:""},{error:n(()=>[t("div",Ze,a(e.formErrors.selection),1)]),_:1},8,["label","modelValue","options","style","error"]),l(fe,{class:"text-right"},{default:n(()=>[l(C,{type:"submit",color:"info",label:e.$t("continue")},null,8,["label"])]),_:1})],32)])):m("",!0)]),_:1},8,["name","title","done"])}var We=re(je,[["render",Ke]]);const Ge=["Alabama","Alaska","American Samoa","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","District of Columbia","Federated States of Micronesia","Florida","Georgia","Guam","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Marshall Islands","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Northern Mariana Islands","Ohio","Oklahoma","Oregon","Palau","Pennsylvania","Puerto Rico","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virgin Island","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],Xe=["Alberta","British Columbia","Manitoba","New Brunswick","Newfoundland and Labrador","Northwest Territories","Nova Scotia","Nunavut","Ontario","Prince Edward Island","Quebec","Saskatchewan","Yukon Territory"],_e=ne({props:{title:String,step:Number,name:Number},components:{},setup(){const{employee:e}=H(ge()),s=[{label:"Call",value:1},{label:"Text",value:2},{label:"Email",value:3},{label:"Call, Text, or Email",value:4},{label:"Do Not Contact Me",value:5}],$=[{label:"United States",value:"United States"},{label:"Canada",value:"Canada"}],u=U(!1),k=U(!1),g=U(null),o=me(),{onJobBoard:h}=H(o),r=z({first:q().required("First name is required!").matches(/^[aA-zZ\s]+$/,{excludeEmptyString:!0,message:"Only letters are allowed for this field!"}),middle:q().matches(/^[aA-zZ\s]+$/,{excludeEmptyString:!0,message:"Only letters are allowed for this field!"}).nullable().notRequired(),last:q().required("Last name is required!").matches(/^[aA-zZ\s]+$/,{excludeEmptyString:!0,message:"Only letters are allowed for this field!"}),suffix:q().nullable().notRequired(),street1:q().required(),street2:q().nullable().notRequired(),city:q().required(),state:q().required(),postal:q().required(),addressCountry:z().required(),contact:z().nullable().notRequired()}),{meta:T,errors:B,handleSubmit:j,isSubmitting:J}=qe({validationSchema:r,initialValues:{first:e.value[20]?e.value[20]:"",middle:e.value[21]?e.value[21]:"",last:e.value[22]?e.value[22]:"",suffix:e.value[23]?e.value[23]:"",contact:e.value[57]?{value:e.value[57],label:e.value[58]}:null,street1:e.value[41]?e.value[41]:"",street2:e.value[42]?e.value[42]:"",city:e.value[43]?e.value[43]:"",state:e.value[44]?e.value[44]:"",postal:e.value[45]?e.value[45]:"",addressCountry:e.value[46]?{value:e.value[46],label:e.value[46]}:null}}),{value:F,meta:R}=p("first"),{value:D,meta:I}=p("middle"),{value:x,meta:G}=p("last"),{value:ee}=p("suffix"),{value:te}=p("contact"),{value:oe}=p("street1"),{value:N}=p("street2"),{value:le}=p("city"),{value:M}=p("state"),{value:Q}=p("postal"),{value:P}=p("addressCountry"),d=W(()=>{const v=`${F.value} ${x.value} ${ee.value}`;return $e.formatName(v)}),y=W(()=>`${oe.value}${N.value===""?"":` ${N.value}`}, ${le.value}, ${M.value}, ${Q.value}, ${P.value.value}`);function b(){const v={next:2};o.updateProfile(v)}function Z(){u.value=!0}const X=j(async v=>{const ce={23:v.first,24:v.middle,25:v.last,26:v.suffix,27:e.value[27],28:e.value[26],46:v.contact,32:v.street1,33:v.street2,34:v.city,35:v.state,36:v.postal,37:v.addressCountry.value},Y={next:2,values:ce};u.value=!1;const be=await o.updateProfile(Y);console.log(be)});function L(){const v={next:0};o.updateProfile(v)}const de=v=>{g.value=v};return De(()=>{console.log(e.value)}),{submitUpdate:X,isSubmitting:J,save:b,back:L,updateCountry:de,first:F,middle:D,last:x,suffix:ee,contact:te,street1:oe,street2:N,city:le,state:M,postal:Q,addressCountry:P,hasPersonalInfo:k,showEdit:u,firstMeta:R,middleMeta:I,lastMeta:G,formMeta:T,formErrors:B,options:s,countries:$,fullName:d,fullAddress:y,employee:e,showEditFunction:Z,onJobBoard:h,states:Ge,provinces:Xe}}}),xe={class:"row justify-between"},et={class:"col-12 col-md-5"},tt={class:"text-caption"},ot={class:"text-caption"},lt={class:"text-caption"},st={class:"text-caption"},at={class:"text-caption"},nt={class:"col-12 col-md-6"},rt={class:"text-caption"},it={class:"text-caption"};function dt(e,s,$,u,k,g){return i(),S("form",{onSubmit:s[12]||(s[12]=ve((...o)=>e.submitUpdate&&e.submitUpdate(...o),["prevent"]))},[t("div",xe,[t("div",et,[l(A,{dense:"",modelValue:e.first,"onUpdate:modelValue":s[0]||(s[0]=o=>e.first=o),label:`${e.$t("firstName")} *`,error:!!e.formErrors.first,"bottom-slots":""},{error:n(()=>[t("div",tt,a(e.formErrors.first),1)]),_:1},8,["modelValue","label","error"]),l(A,{dense:"",modelValue:e.middle,"onUpdate:modelValue":s[1]||(s[1]=o=>e.middle=o),label:e.$t("middleName"),error:!!e.formErrors.middle,"bottom-slots":""},{error:n(()=>[t("div",ot,a(e.formErrors.middle),1)]),_:1},8,["modelValue","label","error"]),l(A,{dense:"",modelValue:e.last,"onUpdate:modelValue":s[2]||(s[2]=o=>e.last=o),label:`${e.$t("lastName")} *`,error:!!e.formErrors.last,"bottom-slots":""},{error:n(()=>[t("div",lt,a(e.formErrors.last),1)]),_:1},8,["modelValue","label","error"]),l(A,{dense:"",modelValue:e.suffix,"onUpdate:modelValue":s[3]||(s[3]=o=>e.suffix=o),label:e.$t("suffix"),error:!!e.formErrors.suffix,"bottom-slots":""},{error:n(()=>[t("div",st,a(e.formErrors.suffix),1)]),_:1},8,["modelValue","label","error"]),l(K,{dense:"",modelValue:e.contact,"onUpdate:modelValue":s[4]||(s[4]=o=>e.contact=o),label:e.$t("preferredContactMethod"),options:e.options,error:!!e.formErrors.contact,"bottom-slots":""},{error:n(()=>[t("div",at,a(e.formErrors.contact),1)]),_:1},8,["modelValue","label","options","error"])]),e.$q.screen.gt.sm?(i(),V(ae,{key:0,vertical:""})):m("",!0),t("div",nt,[l(K,{dense:"",modelValue:e.addressCountry,"onUpdate:modelValue":s[5]||(s[5]=o=>e.addressCountry=o),label:`${e.$t("country")} *`,options:e.countries,error:!!e.formErrors.addressCountry,"bottom-slots":""},{error:n(()=>[t("div",rt,a(e.formErrors.addressCountry),1)]),_:1},8,["modelValue","label","options","error"]),l(A,{dense:"",modelValue:e.street1,"onUpdate:modelValue":s[6]||(s[6]=o=>e.street1=o),label:`${e.$t("streetAddress1")} *`,error:!!e.formErrors.street1,"bottom-slots":""},null,8,["modelValue","label","error"]),l(A,{dense:"",modelValue:e.street2,"onUpdate:modelValue":s[7]||(s[7]=o=>e.street2=o),label:e.$t("streetAddress2"),error:!!e.formErrors.street2,"bottom-slots":""},null,8,["modelValue","label","error"]),l(A,{dense:"",modelValue:e.city,"onUpdate:modelValue":s[8]||(s[8]=o=>e.city=o),label:`${e.$t("city")} *`,error:!!e.formErrors.city,"bottom-slots":""},null,8,["modelValue","label","error"]),l(K,{dense:"",modelValue:e.state,"onUpdate:modelValue":s[9]||(s[9]=o=>e.state=o),label:`${e.$t("stateRegion")} *`,options:e.addressCountry?e.addressCountry.value==="United States"?e.states:e.provinces:e.states,error:!!e.formErrors.state,"bottom-slots":""},{error:n(()=>[t("div",it,a(e.formErrors.state),1)]),_:1},8,["modelValue","label","options","error"]),l(A,{dense:"",modelValue:e.postal,"onUpdate:modelValue":s[10]||(s[10]=o=>e.postal=o),label:`${e.$t("zipCode")} *`,error:!!e.formErrors.postal,"bottom-slots":""},null,8,["modelValue","label","error"])])]),l(fe,{class:"text-right"},{default:n(()=>[e.onJobBoard?m("",!0):(i(),V(C,{key:0,onClick:s[11]||(s[11]=o=>e.$emit("back")),color:"secondary",label:e.$t("back"),class:"q-mr-sm"},null,8,["label"])),l(C,{type:"submit",color:"info",label:e.$t("continue")},null,8,["label"])]),_:1})],32)}var ut=re(_e,[["render",dt]]);const mt=/^[0-9]{10}/g,ct=ne({props:{title:String,step:Number,name:Number},components:{editPersonalInfo:ut},setup(){const{employee:e}=H(ge()),s=[{label:"Call",value:0},{label:"Text",value:1},{label:"Email",value:2}],$=[{label:"United States",value:"United States"},{label:"Canada",value:"Canada"}],u=U(!0),k=U(!1),g=U(null),o=me(),{onJobBoard:h,personalInfoNeeded:r}=H(o),T=z({first:q().required("First name is required!").matches(/^[aA-zZ\s]+$/,{excludeEmptyString:!0,message:"Only letters are allowed for this field!"}),middle:q().matches(/^[aA-zZ\s]+$/,{excludeEmptyString:!0,message:"Only letters are allowed for this field!"}).nullable().notRequired(),last:q().required("Last name is required!").matches(/^[aA-zZ\s]+$/,{excludeEmptyString:!0,message:"Only letters are allowed for this field!"}),suffix:q().nullable().notRequired(),email:q().required("Email is required!").email("You must provide a valid email!"),phone:q().matches(mt,{message:"Valid Phone Number Required!"}).required("Phone number is required!"),street1:q().required(),street2:q().nullable().notRequired(),city:q().required(),state:q().required(),postal:q().required(),addressCountry:z().required(),contact:z().nullable().notRequired()}),{meta:B,errors:j,handleSubmit:J,isSubmitting:F}=qe({validationSchema:T,initialValues:{first:e.value[20]?e.value[20]:"",middle:e.value[21]?e.value[21]:"",last:e.value[22]?e.value[22]:"",suffix:e.value[23]?e.value[23]:"",phone:e.value[27]?e.value[27]:"",email:e.value[26]?e.value[26]:"",contact:e.value[57]?{value:e.value[57],label:e.value[58]}:null,street1:e.value[41]?e.value[41]:"",street2:e.value[42]?e.value[42]:"",city:e.value[43]?e.value[43]:"",state:e.value[44]?e.value[44]:"",postal:e.value[45]?e.value[45]:"",addressCountry:e.value[46]?{value:e.value[46],label:e.value[46]}:null}}),{value:R,meta:D}=p("first"),{value:I,meta:x}=p("middle"),{value:G,meta:ee}=p("last"),{value:te}=p("suffix"),{value:oe}=p("email"),{value:N}=p("phone"),{value:le}=p("contact"),{value:M}=p("street1"),{value:Q}=p("street2"),{value:P}=p("city"),{value:d}=p("state"),{value:y}=p("postal"),{value:b}=p("addressCountry"),Z=W(()=>{const f=`${R.value} ${G.value} ${te.value}`;return $e.formatName(f)}),X=W(()=>`${M.value}${Q.value===""?"":` ${Q.value}`}, ${P.value}, ${d.value}, ${y.value}, ${b.value.value}`),L=W(()=>{let f="";return N.value.length===11?f=N.value.substring(1):f=N.value,$e.formatPhone(f)});async function de(){const f={23:e.value[20],24:e.value[21],25:e.value[22],26:e.value[23],27:e.value[27],28:e.value[26],46:e.value[57],32:e.value[41],33:e.value[42],34:e.value[43],35:e.value[44],36:e.value[45],37:e.value[46]},pe={next:2,values:f};o.updateProfile(pe)}function v(){u.value=!0}const ce=J(f=>{const pe={23:f.first,24:f.middle,25:f.last,26:f.suffix,27:f.phone,28:f.email,46:f.contact,32:f.street1,33:f.street2,34:f.city,35:f.state,36:f.postal,37:f.addressCountry.name},ke={next:2,values:pe};u.value=!1,o.updateProfile(ke)});function Y(){u.value=!1;const f={next:0};o.updateProfile(f)}return{submitUpdate:ce,isSubmitting:F,save:de,back:Y,updateCountry:f=>{g.value=f},first:R,middle:I,last:G,suffix:te,email:oe,phone:N,contact:le,street1:M,street2:Q,city:P,state:d,postal:y,addressCountry:b,hasPersonalInfo:k,showEdit:u,firstMeta:D,middleMeta:x,lastMeta:ee,formMeta:B,formErrors:j,options:s,countries:$,fullName:Z,fullAddress:X,formatPhone:L,employee:e,showEditFunction:v,onJobBoard:h,personalInfoNeeded:r}}}),pt={key:1},vt={class:"col-12 col-md-3 q-py-sm"},ft={class:"text-primary"},bt={class:"text-dark q-pl-sm"},$t={class:"col-12 col-md-6 q-py-sm"},ht={class:"text-primary"},yt={class:"text-dark q-pl-sm"},gt={class:"col-12 col-md-3 q-py-sm"},qt={class:"text-primary"},kt={class:"text-dark q-pl-sm"};function Vt(e,s,$,u,k,g){const o=ie("edit-personal-info");return i(),V(he,{name:e.name,title:e.title,done:e.step>1},{default:n(()=>[e.showEdit||e.personalInfoNeeded?(i(),V(o,{key:0,onBack:e.back},null,8,["onBack"])):m("",!0),!e.showEdit&&!e.personalInfoNeeded?(i(),S("div",pt,[l(ue,null,{default:n(()=>[l(_,null,{default:n(()=>[t("div",{class:w(["text-dark",e.$q.screen.gt.sm?"text-h6":"text-body2"])},[se(a(e.$q.screen.gt.sm?`${e.$t("personalInfo")}`:`${e.$t("personal")}`)+" ",1),l(C,{class:"q-ml-sm",round:"",size:e.$q.screen.gt.sm?"sm":"xs",color:"accent",icon:"edit",onClick:e.showEditFunction},null,8,["size","onClick"])],2),t("div",{class:w(["row q-mt-sm",e.$q.screen.gt.sm?"text-body1":"text-caption"])},[t("div",vt,[t("div",ft,a(e.$t("name")),1),t("div",bt,a(e.employee[24]),1)]),t("div",$t,[t("div",ht,a(e.$t("address")),1),t("div",yt,a(e.employee[40]),1)]),t("div",gt,[t("div",qt,a(e.$t("preferredContactMethod")),1),t("div",kt,a(e.employee[58]),1)])],2)]),_:1})]),_:1}),l(fe,{class:"text-right"},{default:n(()=>[e.onJobBoard?m("",!0):(i(),V(C,{key:0,onClick:e.back,color:"secondary",label:e.$t("back"),class:"q-mr-sm"},null,8,["onClick","label"])),l(C,{onClick:e.save,color:"info",label:e.$t("continue")},null,8,["onClick","label"])]),_:1})])):m("",!0)]),_:1},8,["name","title","done"])}var Ct=re(ct,[["render",Vt]]);const wt=/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/,Et=ne({props:{title:String,step:Number,name:Number},setup(){const e=Ne(),s=me(),$=ye(),u=ge(),{t:k}=Ce(),{relationshipOptions:g}=H($),{savedEmergencyContacts:o}=H(u),{removeContact:h,addContact:r,updateContact:T,employeeData:B}=u,j=U({name:"first",value:null}),J=U({name:"last",value:null}),F=U({name:"phone",value:null}),R=U({name:"relationship",value:null}),D=U([]),I=W(()=>{const d=o.value.concat(D.value);return d.sort(function(y,b){return y.editing&&!b.editing?-1:!y.editing&&b.editing?1:0}),d}),x=W(()=>I.value.filter(y=>y.editing).length>0);function G(){const d={next:3};s.updateProfile(d)}function ee(){const d={next:1};s.updateProfile(d)}function te(){const d={3:I.value.length+1,6:"",7:"",8:"",11:"",12:"",16:"",editing:!0,new:!0,contact:null};D.value.push(d),console.log(I.value)}function oe(d){o.value[d].editing=!0}function N(d){const y=I.value[d];console.log(y),e.dialog({title:"Alert",message:`Are you sure you want to remove ${y[6]} ${y[7]}?`,cancel:!0,persistent:!0}).onOk(()=>{h(y[3])})}const le=z({relationship:z().required("Relationship is required.").nullable(),phone:q().matches(wt,{message:`${k("validPhoneIsRequired")}`}).length(10,{message:`${k("validPhoneIsRequired")}`}).required("Phone is required.").label(`${k("phoneNumber")}`),last:q().required().label(`${k("lastName")}`),first:q().required().label(`${k("firstName")}`)}).required();function M(d){const y=[j.value,J.value,F.value,R.value];d?y.forEach(b=>{b.name===d.name?b.value=d.message:b.value=null}):y.forEach(b=>{b.value=null})}async function Q(d,y){console.log(d);const b=I.value[y];try{await le.validate({relationship:d.contact,phone:d[16],last:d[7],first:d[6]}),b[11]=d.contact.value,b[12]=d.contact.label,b.editing=!1,M(),b.new?(b.new=!1,r(b),D.value.forEach((Z,X)=>{Z[3]===b[3]&&D.value.splice(X,1)})):T(b)}catch({name:Z,path:X,errors:L,inner:de}){let v="";L[0]instanceof Object?v=L[0].message:v=L[0],M({name:X,message:v})}}function P(d){const y=I.value[d];console.log(y),y.new?D.value.forEach((b,Z)=>{b[3]===y[3]&&D.value.splice(Z,1)}):I.value[d].editing=!1}return{save:G,back:ee,savedEmergencyContacts:o,allContacts:I,editing:x,relationshipOptions:g,editItem:oe,removeItem:N,saveItem:Q,cancelEdit:P,addNewContactRow:te,addContact:r,updateContact:T,firstError:j,lastError:J,phoneError:F,relationshipError:R,helpers:$e,employeeData:B}}}),St={class:"col-12 col-md-4"},Nt={class:"text-primary"},Ut={class:"text-dark q-pl-sm"},It={class:"col-12 col-md-4"},Mt={class:"text-primary"},Pt={class:"text-dark q-pl-sm"},Ot={key:0,class:"text-body2 text-dark"},At={class:"row q-py-sm"},Rt={class:"col-12 col-md-6 text-left"},Dt={key:0,class:"text-body2 text-primary text-italic q-pb-sm q-pl-md"},zt=["id"],Qt={class:"col-12 col-md-4"},Ht={class:"text-primary"},Tt={class:"text-dark q-pl-sm"},Yt={class:"text-primary"},Bt={class:"text-dark q-pl-sm"},Ft={class:"text-primary"},Lt={class:"text-dark q-pl-sm"},jt={key:1,class:"items-center"},Jt=["onSubmit"],Zt={class:"row"},Kt={class:"col-12 col-md-3 q-pr-md"},Wt={class:"col-12 col-md-3 q-pr-md"},Gt={class:"col-12 col-md-3 q-pr-md"},Xt={class:"col-12 col-md-3"},_t={class:"row q-mt-md"},xt={class:"col text-right"};function eo(e,s,$,u,k,g){return i(),V(he,{name:e.name,title:e.title},{default:n(()=>[t("div",null,[l(ue,{class:"q-px-xs"},{default:n(()=>[l(_,null,{default:n(()=>[t("div",{class:w(["text-dark",e.$q.screen.gt.sm?"text-h6":"text-body2"])},[se(a(e.$q.screen.gt.sm?`${e.$t("personalContactInfo")}`:`${e.$t("personal")}`)+" ",1),l(C,{class:"q-ml-sm",round:"",size:e.$q.screen.gt.sm?"sm":"xs",color:"accent",icon:"edit"},null,8,["size"])],2),t("div",{class:w(["row q-mt-sm",e.$q.screen.gt.sm?"text-body1":"text-caption"])},[t("div",St,[t("div",Nt,a(e.$t("phoneNumber")),1),t("div",Ut,a(e.employeeData[25]),1)]),t("div",It,[t("div",Mt,a(e.$t("email")),1),t("div",Pt,a(e.employeeData[26]),1)])],2)]),_:1}),e.$q.screen.gt.sm?m("",!0):(i(),V(ae,{key:0})),e.editing?m("",!0):(i(),V(_,{key:1,class:w(e.$q.screen.lt.md?"q-px-xs":"")},{default:n(()=>[e.$q.screen.gt.sm?m("",!0):(i(),S("div",Ot,a(e.$t("emergencyContacts")),1)),t("div",At,[t("div",Rt,[l(C,{size:e.$q.screen.gt.sm?"md":"sm",color:"accent",label:(e.allContacts.length>0,e.$t("addEmergencyContact")),onClick:e.addNewContactRow,icon:"add"},null,8,["size","label","onClick"])])])]),_:1},8,["class"])),e.editing?(i(),V(ae,{key:2})):m("",!0),l(_,{class:w([e.editing?"q-pt-sm":"q-pt-none",e.$q.screen.gt.sm?"":"q-px-xs"])},{default:n(()=>[e.allContacts.length===0?(i(),S("div",Dt,a(e.$t("addEmergencyContactRequired")),1)):m("",!0),(i(!0),S(Se,null,Ee(e.allContacts,(o,h)=>(i(),S("div",{id:o[3],key:o[3]},[l(ue,{class:"q-pa-sm",flat:""},{default:n(()=>[o.editing?m("",!0):(i(),S("div",{key:0,class:w(["row items-center",e.$q.screen.gt.sm?"text-body2":"text-caption"])},[t("div",Qt,[t("div",null,[t("div",Ht,a(e.$t("name")),1),t("div",Tt,a(e.helpers.formatName(o[6]))+" "+a(e.helpers.formatName(o[7])),1)])]),t("div",{class:w(e.$q.screen.gt.sm?"col-3":"col-12 q-pt-sm")},[t("div",null,[t("div",Yt,a(e.$t("phoneNumber")),1),t("div",Bt,a(e.helpers.formatPhone(o[8])),1)])],2),t("div",{class:w(e.$q.screen.gt.sm?"col-3":"col-12 q-pt-sm")},[t("div",null,[t("div",Ft,a(e.$t("relationship")),1),t("div",Lt,a(o[12]),1)])],2),t("div",{class:w(e.$q.screen.gt.sm?"col-2 text-right":"col-12 q-pt-md text-right")},[t("div",null,[l(C,{size:"sm",round:"",onClick:r=>e.editItem(h),color:"secondary",icon:"edit",class:"q-mr-sm"},null,8,["onClick"]),l(C,{size:"sm",round:"",onClick:r=>e.removeItem(h),color:"primary",icon:"delete"},null,8,["onClick"])])],2)],2)),o.editing?(i(),S("div",jt,[t("form",{onSubmit:ve(r=>e.saveItem(o,h),["prevent"])},[t("div",Zt,[t("div",Kt,[l(A,{modelValue:o[6],"onUpdate:modelValue":r=>o[6]=r,dense:"",label:e.$t("firstName"),error:!!e.firstError.value,"bottom-slots":""},{error:n(()=>[se(a(e.firstError.value),1)]),_:2},1032,["modelValue","onUpdate:modelValue","label","error"])]),t("div",Wt,[l(A,{modelValue:o[7],"onUpdate:modelValue":r=>o[7]=r,dense:"",label:e.$t("lastName"),error:!!e.lastError.value,"bottom-slots":""},{error:n(()=>[se(a(e.lastError.value),1)]),_:2},1032,["modelValue","onUpdate:modelValue","label","error"])]),t("div",Gt,[l(A,{modelValue:o[16],"onUpdate:modelValue":r=>o[16]=r,dense:"",label:e.$t("phoneNumber"),error:!!e.phoneError.value,"bottom-slots":""},{error:n(()=>[se(a(e.phoneError.value),1)]),_:2},1032,["modelValue","onUpdate:modelValue","label","error"])]),t("div",Xt,[l(K,{behavior:"menu",position:"top middle",modelValue:o.contact,"onUpdate:modelValue":r=>o.contact=r,dense:"",label:e.$t("relationship"),options:e.relationshipOptions,error:!!e.relationshipError.value,"bottom-slots":""},{error:n(()=>[se(a(e.relationshipError.value),1)]),_:2},1032,["modelValue","onUpdate:modelValue","label","options","error"])])]),t("div",_t,[t("div",xt,[l(C,{onClick:r=>e.cancelEdit(h),color:"secondary",label:e.$t("cancel"),class:"q-mr-sm"},null,8,["onClick","label"]),l(C,{type:"submit",color:"info",label:e.$t("save")},null,8,["label"])])])],40,Jt)])):m("",!0)]),_:2},1024),h<e.allContacts.length-1?(i(),V(ae,{key:0})):m("",!0)],8,zt))),128))]),_:1},8,["class"])]),_:1}),e.editing?m("",!0):(i(),V(fe,{key:0,class:"text-right"},{default:n(()=>[l(C,{onClick:e.back,color:"secondary",label:e.$t("back"),class:"q-mr-sm"},null,8,["onClick","label"]),l(C,{onClick:e.save,color:"info",label:e.$t("continue"),disabled:e.savedEmergencyContacts.length===0},null,8,["onClick","label","disabled"])]),_:1}))])]),_:1},8,["name","title"])}var to=re(Et,[["render",eo]]);const oo=ne({props:{title:String,step:Number,name:Number},setup(){const{t:e}=Ce(),s=ze(),$=U(3),u=U(!1),k=Ne(),g=me(),o=ye(),h=Fe(),r=ge(),{fetchVoluntaryForms:T}=o,{experienceOptions:B,companyOptions:j,craftOptions:J,employmentOptions:F}=H(o),{hasAffirmative:R,hasVets:D,hasDisability:I,goToVoluntary:x}=H(h),{savedHistory:G}=H(r),{addHistory:ee,updateHistory:te,removeHistory:oe,employeeData:N,updateEmployeeData:le}=r,M=U([]),{toggleLoader:Q,profile:P}=g,{proceedToTest:d}=H(g),y=z({craft:z().required(`${e("selectACraft")}`).nullable(),experience:z().required(`${e("selectExperience")}`).nullable(),employment:z().required(`${e("selectEmploymentStatus")}`).nullable()}),{meta:b,errors:Z,handleSubmit:X}=qe({validationSchema:y,initialValues:{craft:P[40]?{value:P[40].value,label:P[40].label}:null,experience:N[53]?{value:N[53],label:N[54]}:null,employment:N[55]?{value:N[55],label:N[56]}:null}}),{value:L}=p("craft"),{value:de}=p("experience"),{value:v}=p("employment");Qe(P,()=>{P[40].value!==L.value.value&&(L.value={value:P[40].value,label:P[40].label})});const ce=X(async c=>{const O={40:{value:c.craft.value,label:c.craft.label},42:{value:c.experience.value,label:c.experience.label},44:{value:c.employment.value,label:c.employment.label},39:{value:new Date}};if(x.value){const E={next:I.value?6:R.value?7:D.value?8:0,values:O,completed:!0};Q(!0),await T(),await g.updateProfile(E),await g.submitProfileToQB(),Q(!1),s.push({name:"voluntary"})}else{const E={next:0,values:O,completed:!0};Q(!0),await g.updateProfile(E),await g.submitProfileToQB(),d.value?(le({fields:{122:{value:8}}}),s.replace({name:"assessment"})):(s.replace({name:"thanks"}),Q(!1))}}),Y=W(()=>{const c=G.value.concat(M.value);return c.sort(function(O,E){return O.editing&&!E.editing?-1:!O.editing&&E.editing?1:0}),c}),be=W(()=>Y.value.filter(O=>O.editing).length>0);function f(){const c={3:Y.value.length+1,6:"",7:"",10:"",11:"",12:"",13:"",15:"",16:"",editing:!0,new:!0,company:null,craft:null};M.value.push(c)}function pe(){const c={next:4};g.updateProfile(c)}function ke(){const c={next:2};g.updateProfile(c)}function Ue(c){G.value[c].editing=!0}function Ie(c){const O=Y.value[c];console.log(O),k.dialog({title:`${e("alert")}`,message:`${e("areYouSureYouWantToRemove")}`,cancel:!0,persistent:!0}).onOk(()=>{oe(O[3])})}function Me(c,O){const E=Y.value[O];E[6]=c.company.value,E[7]=c.company.label,E[15]=c.craft.value,E[16]=c.craft.label,E.editing=!1,E.new?(E.new=!1,M.value.forEach((Ve,Ae)=>{Ve[3]===E[3]&&M.value.splice(Ae,1)}),ee(E)):te(E)}function Pe(c){const O=Y.value[c];O.new?M.value.forEach((E,Ve)=>{E[3]===O[3]&&M.value.splice(Ve,1)}):Y.value[c].editing=!1}function Oe(){u.value?($.value=3,u.value=!1):(u.value=!0,$.value=Y.value.length)}return{save:pe,back:ke,allHistory:Y,addNewRow:f,editItem:Ue,removeItem:Ie,saveItem:Me,cancelEdit:Pe,editing:be,date:Le,show:$,expanded:u,adjustRows:Oe,formMeta:b,formErrors:Z,submitUpdate:ce,craft:L,experience:de,employment:v,experienceOptions:B,companyOptions:j,craftOptions:J,employmentOptions:F}}}),lo={class:"text-body2 text-dark"},so={class:"row"},ao={class:"col-12 col-md-4 q-px-xs"},no={class:"text-caption"},ro={class:"col-12 col-md-4 q-px-xs"},io={class:"text-caption"},uo={class:"col-12 col-md-4 q-px-xs"},mo={class:"text-caption"},co={class:"text-body2 text-dark"},po={class:"row q-py-sm"},vo={class:"col-12 col-md-6"},fo={key:0,class:"text-body2 text-primary text-italic q-pb-sm q-pl-md"},bo=["id"],$o={class:"col-12 col-md-3"},ho={class:"text-primary"},yo={class:"text-dark q-pl-sm"},go={class:"text-primary"},qo={class:"text-dark q-pl-sm"},ko={class:"text-primary"},Vo={class:"text-dark q-pl-sm"},Co={class:"text-primary"},wo={class:"text-dark q-pl-sm"},Eo={class:"text-primary"},So={class:"text-dark q-pl-sm"},No={key:1,class:"items-center"},Uo=["onSubmit"],Io={class:"row"},Mo={class:"col-12 col-md-2 q-pr-md"},Po={class:"col-12 col-md-2 q-pr-md"},Oo={class:"col-12 col-md-2 q-pr-md"},Ao={class:"col-12 col-md-2 q-pr-md"},Ro={class:"col-12 col-md-2 q-pr-md"},Do={class:"col-12 col-md-2 q-pr-md"},zo={class:"row q-mt-md"},Qo={class:"col text-right"},Ho={class:"row q-pt-md"},To={key:0,class:"col-12 text-right"};function Yo(e,s,$,u,k,g){return i(),V(he,{name:e.name,title:e.title,done:e.step>3},{default:n(()=>[t("div",null,[t("form",{onSubmit:s[3]||(s[3]=ve((...o)=>e.submitUpdate&&e.submitUpdate(...o),["prevent"]))},[l(ue,{class:"q-px-xs"},{default:n(()=>[l(_,{class:"q-pb-none q-mb-sm"},{default:n(()=>[t("div",lo,a(e.$t("applyingFor"))+":",1),t("div",so,[t("div",ao,[l(K,{behavior:"menu",position:"top middle",disable:!0,dense:"",modelValue:e.craft,"onUpdate:modelValue":s[0]||(s[0]=o=>e.craft=o),label:e.$t("primaryCraft"),options:e.craftOptions,error:!!e.formErrors.craft,"bottom-slots":""},{error:n(()=>[t("div",no,a(e.formErrors.craft),1)]),_:1},8,["modelValue","label","options","error"])]),t("div",ro,[l(K,{behavior:"menu",position:"top middle",dense:"",modelValue:e.experience,"onUpdate:modelValue":s[1]||(s[1]=o=>e.experience=o),label:e.$t("yearsOfExperience"),options:e.experienceOptions,error:!!e.formErrors.experience,"bottom-slots":""},{error:n(()=>[t("div",io,a(e.formErrors.experience),1)]),_:1},8,["modelValue","label","options","error"])]),t("div",uo,[l(K,{behavior:"menu",position:"top middle",dense:"",modelValue:e.employment,"onUpdate:modelValue":s[2]||(s[2]=o=>e.employment=o),label:e.$t("currentEmploymentStatus"),options:e.employmentOptions,error:!!e.formErrors.employment,"bottom-slots":""},{error:n(()=>[t("div",mo,a(e.formErrors.employment),1)]),_:1},8,["modelValue","label","options","error"])])])]),_:1}),l(ae),e.editing?m("",!0):(i(),V(_,{key:0,class:w(e.$q.screen.lt.md?"q-px-xs":"")},{default:n(()=>[t("div",co,a(e.$t("workHistory"))+":",1),t("div",po,[t("div",vo,[l(C,{size:e.$q.screen.gt.sm?"md":"sm",color:"accent",label:e.allHistory.length>0?`${e.$t("addMoreHistory")}`:`${e.$t("addEmploymentHistory")}`,onClick:e.addNewRow,icon:"add"},null,8,["size","label","onClick"])])])]),_:1},8,["class"])),e.editing?(i(),V(ae,{key:1})):m("",!0),l(_,{class:w([e.editing?"q-pt-sm":"q-pt-none",e.$q.screen.gt.sm?"":"q-px-xs"])},{default:n(()=>[e.allHistory.length===0?(i(),S("div",fo,a(e.$t("addYourEmploymentHistoryLater")),1)):m("",!0),(i(!0),S(Se,null,Ee(e.allHistory,(o,h)=>(i(),S("div",{id:o[3],key:h},[e.expanded||h+1<=e.show?(i(),V(ue,{key:0,class:"q-px-sm q-pt-xs q-pb-sm",flat:""},{default:n(()=>[o.editing?m("",!0):(i(),S("div",{key:0,class:w(["row items-center",e.$q.screen.gt.sm?"text-body2":"text-caption"])},[t("div",$o,[t("div",null,[t("div",ho,a(e.$t("company")),1),t("div",yo,a(o[7]),1)])]),t("div",{class:w(e.$q.screen.gt.sm?"col-2":"hidden")},[t("div",null,[t("div",go,a(e.$t("location")),1),t("div",qo,a(o[10]!==""?o[10]:"N/A"),1)])],2),t("div",{class:w(e.$q.screen.gt.sm?"col-2":"col-12 q-pt-md")},[t("div",null,[t("div",ko,a(e.$t("jobTitle")),1),t("div",Vo,a(o[16])+" "+a(o[11]),1)])],2),t("div",{class:w(e.$q.screen.gt.sm?"col-2":"col-6 q-pt-md")},[t("div",null,[t("div",Co,a(e.$t("startDate")),1),t("div",wo,a(e.date.formatDate(o[12],"MM-DD-YYYY")),1)])],2),t("div",{class:w(e.$q.screen.gt.sm?"col-2":"col-6 q-pt-md")},[t("div",null,[t("div",Eo,a(e.$t("endDate")),1),t("div",So,a(e.date.formatDate(o[13],"MM-DD-YYYY")),1)])],2),t("div",{class:w(e.$q.screen.gt.sm?"col-1 text-right":"col-12 q-pt-md text-right")},[t("div",null,[l(C,{size:"sm",round:"",onClick:r=>e.editItem(h),color:"secondary",icon:"edit",class:"q-mr-sm"},null,8,["onClick"]),l(C,{size:"sm",round:"",onClick:r=>e.removeItem(h),color:"primary",icon:"delete"},null,8,["onClick"])])],2)],2)),o.editing?(i(),S("div",No,[t("form",{onSubmit:ve(r=>e.saveItem(o,h),["prevent"])},[t("div",Io,[t("div",Mo,[l(K,{modelValue:o.company,"onUpdate:modelValue":r=>o.company=r,dense:"",label:e.$t("company"),options:e.companyOptions},null,8,["modelValue","onUpdate:modelValue","label","options"])]),t("div",Po,[l(K,{modelValue:o.craft,"onUpdate:modelValue":r=>o.craft=r,dense:"",label:e.$t("craft"),options:e.craftOptions},null,8,["modelValue","onUpdate:modelValue","label","options"])]),t("div",Oo,[l(A,{modelValue:o[11],"onUpdate:modelValue":r=>o[11]=r,dense:"",label:e.$t("jobTitle")},null,8,["modelValue","onUpdate:modelValue","label"])]),t("div",Ao,[l(A,{modelValue:o[10],"onUpdate:modelValue":r=>o[10]=r,dense:"",label:e.$t("location")},null,8,["modelValue","onUpdate:modelValue","label"])]),t("div",Ro,[l(A,{type:"date",modelValue:o[12],"onUpdate:modelValue":r=>o[12]=r,dense:"",filled:"",hint:e.$t("startDate")},null,8,["modelValue","onUpdate:modelValue","hint"])]),t("div",Do,[l(A,{type:"date",modelValue:o[13],"onUpdate:modelValue":r=>o[13]=r,dense:"",filled:"",hint:e.$t("endDate")},null,8,["modelValue","onUpdate:modelValue","hint"])])]),t("div",zo,[t("div",Qo,[l(C,{onClick:r=>e.cancelEdit(h),color:"secondary",label:e.$t("cancel"),class:"q-mr-sm"},null,8,["onClick","label"]),l(C,{type:"submit",color:"info",label:e.$t("save")},null,8,["label"])])])],40,Uo)])):m("",!0)]),_:2},1024)):m("",!0),h<e.allHistory.length-1?(i(),V(ae,{key:1})):m("",!0)],8,bo))),128)),e.allHistory.length>e.show||e.expanded?(i(),V(ae,{key:1})):m("",!0),t("div",Ho,[e.allHistory.length>e.show||e.expanded?(i(),S("div",To,[l(C,{round:"",color:"secondary",onClick:e.adjustRows,icon:e.expanded?"expand_less":"expand_more"},{default:n(()=>[e.expanded?(i(),V(we,{key:0,anchor:"top middle"},{default:n(()=>[se(a(e.$t("showLess")),1)]),_:1})):m("",!0),e.expanded?m("",!0):(i(),V(we,{key:1,anchor:"top middle"},{default:n(()=>[se(a(e.$t("showMore")),1)]),_:1}))]),_:1},8,["onClick","icon"])])):m("",!0)])]),_:1},8,["class"])]),_:1}),e.editing?m("",!0):(i(),V(fe,{key:0,class:"text-right"},{default:n(()=>[l(C,{onClick:e.back,color:"secondary",label:e.$t("back"),class:"q-mr-sm"},null,8,["onClick","label"]),l(C,{type:"submit",color:"info",label:e.$t("continue")},null,8,["label"])]),_:1}))],32)])]),_:1},8,["name","title","done"])}var Bo=re(oo,[["render",Yo]]);const Fo=ne({components:{selectJob:We,personalInfo:Ct,emergencyContact:to,workHistory:Bo},setup(){const e=me(),{resetProfile:s}=e,{step:$}=H(e);s();const u=U(null);return{step:$,jobSelection:u,jobOptions:[{label:"Default Job",value:0}]}}});function Lo(e,s,$,u,k,g){const o=ie("select-job"),h=ie("personal-info"),r=ie("emergency-contact"),T=ie("work-history");return i(),S("div",null,[l(Ye,{modelValue:e.step,"onUpdate:modelValue":s[0]||(s[0]=B=>e.step=B),vertical:"",animated:"","done-color":"info","active-color":"dark","inactive-color":"secondary",class:w(e.$q.screen.lt.md?"q-px-none q-mx-none":"")},{default:n(()=>[l(o,{title:e.$t("selectAJob"),step:e.step,name:0,done:e.step>0},null,8,["title","step","done"]),l(h,{title:e.$t("personalInformation"),step:e.step,name:1,done:e.step>1},null,8,["title","step","done"]),l(r,{title:e.$t("contactInformation"),step:e.step,name:2,done:e.step>2},null,8,["title","step","done"]),l(T,{title:e.$t("employmentInformation"),step:e.step,name:3,done:e.step>3},null,8,["title","step","done"])]),_:1},8,["modelValue","class"])])}var jo=re(Fo,[["render",Lo]]);const Jo=ne({components:{profileStepper:jo},setup(){}});function Zo(e,s,$,u,k,g){const o=ie("profile-stepper");return i(),S("div",null,[l(o)])}var Ko=re(Jo,[["render",Zo]]);const Wo=ne({components:{Profile:Ko},setup(){const e=U(0),s=ye(),{fetchFormOptions:$}=s,{formOptionsLoadingState:u}=H(s);return $(),{step:e,formOptionsLoadingState:u}}}),Go={key:0,class:"absolute-center"},Xo={key:1,class:"row"},_o={class:"col-12 q-pt-sm"},xo={class:"q-pl-sm"},el={class:"text-h6 text-dark"},tl={class:"text-body1 text-secondary text-italic"};function ol(e,s,$,u,k,g){const o=ie("profile");return i(),V(Te,{style:{"max-width":"100vw"}},{default:n(()=>[e.formOptionsLoadingState?(i(),S("div",Go,[l(He,{color:"primary",size:"5em"})])):m("",!0),e.formOptionsLoadingState?m("",!0):(i(),S("div",Xo,[t("div",_o,[l(ue,{flat:""},{default:n(()=>[l(_,{class:w(e.$q.screen.lt.md?"q-px-xs":"")},{default:n(()=>[t("div",xo,[t("div",el,a(e.$t("completeApplication")),1),t("div",tl,a(e.$t("pleaseCompleteYourApplication")),1)])]),_:1},8,["class"]),l(_,null,{default:n(()=>[l(o)]),_:1})]),_:1})])]))]),_:1})}var wl=re(Wo,[["render",ol]]);export{wl as default};
