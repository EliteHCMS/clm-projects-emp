var ce=Object.defineProperty,ue=Object.defineProperties;var de=Object.getOwnPropertyDescriptors;var W=Object.getOwnPropertySymbols;var me=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable;var Z=(e,a,n)=>a in e?ce(e,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[a]=n,P=(e,a)=>{for(var n in a||(a={}))me.call(a,n)&&Z(e,n,a[n]);if(W)for(var n of W(a))fe.call(a,n)&&Z(e,n,a[n]);return e},O=(e,a)=>ue(e,de(a));import{i as ye,bR as E,bS as ve,c as d,g as te,bQ as ge,h as Q,bP as oe,k as j,_ as Y,A as f,B as A,d as h,bi as g,D as u,ab as D,bJ as pe,bH as be,au as he,cy as _e,bO as z,bF as $e,r as ae,aZ as R,an as x,cw as C,cz as J,ao as H,w as le,F as N,aY as se,cW as Se,cN as xe,cX as Ae,dm as ke,aM as De,ch as qe,bI as Ce,dn as Ie,cd as Le,cb as U,bM as we,G as He}from"./index.df995f5f.js";import{Q as Me}from"./QPage.4a1eacda.js";import{u as B,a as ne}from"./dataStore.63aa5812.js";import{q as T}from"./quickbase.95274e2f.js";import{Q as Ve}from"./QSelect.08716fd1.js";import{Q as Pe}from"./QForm.bd2f8d44.js";import{a as ee,b as Qe,u as je}from"./array.c3373e59.js";import{u as Ye}from"./use-quasar.e1d67d94.js";import{u as Re}from"./dataStore.e1ab6f28.js";import{dayjs as M}from"./dayjs.2c96dcd3.js";import{d as Be}from"./decode.593c6ccc.js";import"./localForage.3844ce44.js";import"./_commonjsHelpers.dfee5925.js";import"./index.7dbe61ef.js";import"./i18n.bd13b955.js";import"./api.c05f3e59.js";import"./QChip.20ea4134.js";import"./QItemLabel.937e07e9.js";import"./QMenu.de16f5ac.js";import"./position-engine.ed057110.js";import"./selection.15ff2c8a.js";import"./rtl.cf9bbe47.js";const Fe={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},expand:Boolean};function Oe(){const{props:e,proxy:{$q:a}}=te(),n=ye(ve,E);if(n===E)return console.error("QPageSticky needs to be child of QLayout"),E;const c=d(()=>{const m=e.position;return{top:m.indexOf("top")>-1,right:m.indexOf("right")>-1,bottom:m.indexOf("bottom")>-1,left:m.indexOf("left")>-1,vertical:m==="top"||m==="bottom",horizontal:m==="left"||m==="right"}}),i=d(()=>n.header.offset),v=d(()=>n.right.offset),t=d(()=>n.footer.offset),s=d(()=>n.left.offset),y=d(()=>{let m=0,b=0;const p=c.value,_=a.lang.rtl===!0?-1:1;p.top===!0&&i.value!==0?b=`${i.value}px`:p.bottom===!0&&t.value!==0&&(b=`${-t.value}px`),p.left===!0&&s.value!==0?m=`${_*s.value}px`:p.right===!0&&v.value!==0&&(m=`${-_*v.value}px`);const k={transform:`translate(${m}, ${b})`};return e.offset&&(k.margin=`${e.offset[1]}px ${e.offset[0]}px`),p.vertical===!0?(s.value!==0&&(k[a.lang.rtl===!0?"right":"left"]=`${s.value}px`),v.value!==0&&(k[a.lang.rtl===!0?"left":"right"]=`${v.value}px`)):p.horizontal===!0&&(i.value!==0&&(k.top=`${i.value}px`),t.value!==0&&(k.bottom=`${t.value}px`)),k}),$=d(()=>`q-page-sticky row flex-center fixed-${e.position} q-page-sticky--${e.expand===!0?"expand":"shrink"}`);function I(m){const b=ge(m.default);return Q("div",{class:$.value,style:y.value},e.expand===!0?b:[Q("div",b)])}return{$layout:n,getStickyContent:I}}var Ee=oe({name:"QPageSticky",props:Fe,setup(e,{slots:a}){const{getStickyContent:n}=Oe();return()=>n(a)}});const Ue=j({emits:["supUpdated"],props:{record:Object},setup(e,{emit:a}){const n=Ye(),{getAssignments:c,fetchAssignments:i}=Re(),v=d(()=>c(e.record[74]).filter(p=>p[138]&&p[3]!==e.record[3]).sort((p,_)=>p[75]>_[75]?1:-1)),t=d(()=>ee({selection:ee().required().nullable().label("Supervisor")})),{errors:s,handleSubmit:y,handleReset:$}=Qe({validationSchema:t}),{value:I}=je("selection"),m=y(async b=>{const p=[{3:{value:e.record[3]},133:{value:b.selection[3]}}];try{const{data:_}=await T.upsertRecordsXML({to:"bp3gazpqj",data:p,fieldsToReturn:[110],formatObject:110});console.log(_),a("supUpdated",_[0][110]),n.notify({type:"positive",message:"Supervisor successfully updated!"})}catch(_){console.log(_),n.notify({type:"negative",message:"Cannot save supervisor."}),$()}});return i({projectId:e.record[74],refresh:!0}),{props:e,options:v,selection:I,submit:m,formErrors:s,handleReset:$}}}),ze={class:"text-caption"};function Ne(e,a,n,c,i,v){return f(),A("div",null,[h(Pe,{onSubmit:$e(e.submit,["prevent"])},{default:g(()=>[h(Ve,{dense:"",clearable:"",label:"Select a Supervisor","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.selection,"onUpdate:modelValue":a[0]||(a[0]=t=>e.selection=t),options:e.options,"option-label":t=>`${t[75]} - ${t[20]}`,"display-value":`${e.selection?e.selection[75]:""}`,"bottom-slots":"",error:!!e.formErrors.selection},{error:g(()=>[u("div",ze,D(e.formErrors.selection),1)]),"no-option":g(()=>[h(pe,null,{default:g(()=>[h(be,{class:"text-grey"},{default:g(()=>[he(" No Options Available ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","option-label","display-value","error"]),h(_e,{align:"right"},{default:g(()=>[h(z,{color:"info",label:"Submit",type:"submit"}),h(z,{color:"secondary",label:"Cancel",onClick:e.handleReset},null,8,["onClick"])]),_:1})]),_:1},8,["onSubmit"])])}var Je=Y(Ue,[["render",Ne]]);const Te=j({props:{employee:Object,assignment:Object},components:{UpdateSupervisor:Je},setup(e){const a=ae(!1),{setAssignmentsByEmployee:n}=B();return{props:e,supUpdated:i=>{a.value=!1,n({id:i[18],data:i})},editSup:a}}}),Ke=u("div",{class:"text-h6 text-dark q-pb-sm"},"Assign a Supervisor",-1),Xe={class:"row text-body2"},Ge={class:"col-12 col-md-6"},We=u("div",{class:"q-mb-xs text-dark"},"Current Location",-1),Ze={class:"q-pl-sm text-primary"},et={class:"col-12 col-md-6"},tt=u("div",{class:"q-mb-xs text-dark"},"Current Supervisor",-1),ot={class:"q-pl-sm text-primary"};function at(e,a,n,c,i,v){const t=R("update-supervisor");return f(),A("div",null,[e.props.assignment&&e.props.assignment[3]?(f(),x(J,{key:0},{default:g(()=>[e.editSup?(f(),x(C,{key:0},{default:g(()=>[Ke,h(t,{record:e.props.assignment,onSupUpdated:e.supUpdated},null,8,["record","onSupUpdated"])]),_:1})):(f(),x(C,{key:1},{default:g(()=>[u("div",Xe,[u("div",Ge,[We,u("div",Ze,D(e.props.assignment[141]),1)]),u("div",et,[tt,u("div",ot,D(e.props.assignment[140]),1)])])]),_:1}))]),_:1})):H("",!0)])}var lt=Y(Te,[["render",at]]);const st=j({props:{employee:Object,assignment:Object},components:{},setup(e){const{getWorkdayData:a}=B(),n=({id:s,idType:y})=>y.includes("J&amp;E")?s.slice(-5):s,c=d(()=>[]),i=d(()=>{const s=a(e.employee[3]);let y;if(s&&!e.employee[207]){const{employmentData:$,personalData:I}=s,{positionData:m,workerStatus:b}=$,{jobProfile:p}=m,{identificationData:_}=I;y=[{label:"Position",value:`${m.positionId} ${m.positionTitle}`},{label:"Job Profile",value:`${p.jobProfileId} - ${p.jobProfileName}`},{label:Be(_.customIds[0].idType),value:n(_.customIds[0])},{label:"Hire Date",value:M(b.hireDate).format("MM/DD/YYYY")},{label:"Original Hire Date",value:M(b.originalHireDate).format("MM/DD/YYYY")},{label:"Years Since Last Hire",value:M().diff(b.hireDate,"year",!0).toFixed(2)}]}else y=[];return y}),v=d(()=>{let s;return e.assignment[3]?s=[{label:"Project",value:e.assignment[94]},{label:"Job Title",value:e.assignment[20]}]:s=[],s}),t=d(()=>c.value.concat(v.value).concat(i.value));return le(i,(s,y)=>{console.log(a(e.employee[3]))}),{props:e,details:t}}}),nt=u("div",{class:"text-h6 text-weight-bold"},"Job Details",-1),rt=u("div",{class:"text-body1 text-accent text-italic"},"Employee has a pending release.",-1),it={class:"row"},ct={class:"col-12 col-md-4"},ut={class:"text-body2 text-dark"},dt={class:"col-12 col-md-8"},mt={class:"text-body2 text-weight-light text-primary"};function ft(e,a,n,c,i,v){return f(),A("div",null,[h(J,null,{default:g(()=>[h(C,{class:"q-pb-sm"},{default:g(()=>[nt]),_:1}),e.employee[581]?(f(),x(C,{key:0,class:"q-py-sm"},{default:g(()=>[rt]),_:1})):H("",!0),(f(!0),A(N,null,se(e.details,t=>(f(),x(C,{key:t,class:"q-py-sm"},{default:g(()=>[u("div",it,[u("div",ct,[u("div",ut,D(t.label),1)]),u("div",dt,[u("div",mt,D(t.value),1)])])]),_:2},1024))),128))]),_:1})])}var yt=Y(st,[["render",ft]]),vt=oe({name:"QRating",props:O(P(P({},Se),xe),{modelValue:{type:Number,required:!0},max:{type:[String,Number],default:5},icon:[String,Array],iconHalf:[String,Array],iconSelected:[String,Array],iconAriaLabel:[String,Array],color:[String,Array],colorHalf:[String,Array],colorSelected:[String,Array],noReset:Boolean,noDimming:Boolean,readonly:Boolean,disable:Boolean}),emits:["update:modelValue"],setup(e,{slots:a,emit:n}){const{proxy:{$q:c}}=te(),i=Ae(e),v=ke(e),t=Ie(v),s=ae(0);let y={};const $=d(()=>e.readonly!==!0&&e.disable!==!0),I=d(()=>`q-rating row inline items-center q-rating--${$.value===!0?"":"non-"}editable`+(e.noDimming===!0?" q-rating--no-dimming":"")+(e.disable===!0?" disabled":"")+(e.color!==void 0&&Array.isArray(e.color)===!1?` text-${e.color}`:"")),m=d(()=>{const r=Array.isArray(e.icon)===!0?e.icon.length:0,o=Array.isArray(e.iconSelected)===!0?e.iconSelected.length:0,S=Array.isArray(e.iconHalf)===!0?e.iconHalf.length:0,L=Array.isArray(e.color)===!0?e.color.length:0,w=Array.isArray(e.colorSelected)===!0?e.colorSelected.length:0,l=Array.isArray(e.colorHalf)===!0?e.colorHalf.length:0;return{iconLen:r,icon:r>0?e.icon[r-1]:e.icon,selIconLen:o,selIcon:o>0?e.iconSelected[o-1]:e.iconSelected,halfIconLen:S,halfIcon:S>0?e.iconHalf[o-1]:e.iconHalf,colorLen:L,color:L>0?e.color[L-1]:e.color,selColorLen:w,selColor:w>0?e.colorSelected[w-1]:e.colorSelected,halfColorLen:l,halfColor:l>0?e.colorHalf[l-1]:e.colorHalf}}),b=d(()=>{if(typeof e.iconAriaLabel=="string"){const r=e.iconAriaLabel.length>0?`${e.iconAriaLabel} `:"";return o=>`${r}${o}`}if(Array.isArray(e.iconAriaLabel)===!0){const r=e.iconAriaLabel.length;if(r>0)return o=>e.iconAriaLabel[Math.min(o,r)-1]}return(r,o)=>`${o} ${r}`}),p=d(()=>{const r=[],o=m.value,S=Math.ceil(e.modelValue),L=$.value===!0?0:null,w=e.iconHalf===void 0||S===e.modelValue?-1:S;for(let l=1;l<=e.max;l++){const q=s.value===0&&e.modelValue>=l||s.value>0&&s.value>=l,V=w===l&&s.value<l,F=s.value>0&&(V===!0?S:e.modelValue)>=l&&s.value<l,G=V===!0?l<=o.halfColorLen?e.colorHalf[l-1]:o.halfColor:o.selColor!==void 0&&q===!0?l<=o.selColorLen?e.colorSelected[l-1]:o.selColor:l<=o.colorLen?e.color[l-1]:o.color,ie=(V===!0?l<=o.halfIconLen?e.iconHalf[l-1]:o.halfIcon:o.selIcon!==void 0&&(q===!0||F===!0)?l<=o.selIconLen?e.iconSelected[l-1]:o.selIcon:l<=o.iconLen?e.icon[l-1]:o.icon)||c.iconSet.rating.icon;r.push({name:(V===!0?l<=o.halfIconLen?e.iconHalf[l-1]:o.halfIcon:o.selIcon!==void 0&&(q===!0||F===!0)?l<=o.selIconLen?e.iconSelected[l-1]:o.selIcon:l<=o.iconLen?e.icon[l-1]:o.icon)||c.iconSet.rating.icon,attrs:{tabindex:L,role:"radio","aria-checked":e.modelValue===l?"true":"false","aria-label":b.value(l,ie)},iconClass:"q-rating__icon"+(q===!0||V===!0?" q-rating__icon--active":"")+(F===!0?" q-rating__icon--exselected":"")+(s.value===l?" q-rating__icon--hovered":"")+(G!==void 0?` text-${G}`:"")})}return r}),_=d(()=>{const r={role:"radiogroup"};return e.disable===!0&&(r["aria-disabled"]="true"),e.readonly===!0&&(r["aria-readonly"]="true"),r});function k(r){if($.value===!0){const o=Le(parseInt(r,10),1,parseInt(e.max,10)),S=e.noReset!==!0&&e.modelValue===o?0:o;S!==e.modelValue&&n("update:modelValue",S),s.value=0}}function K(r){$.value===!0&&(s.value=r)}function re(r,o){switch(r.keyCode){case 13:case 32:return k(o),U(r);case 37:case 40:return y[`rt${o-1}`]&&y[`rt${o-1}`].$el.focus(),U(r);case 39:case 38:return y[`rt${o+1}`]&&y[`rt${o+1}`].$el.focus(),U(r)}}function X(){s.value=0}return De(()=>{y={}}),()=>{const r=[];return p.value.forEach(({iconClass:o,name:S,attrs:L},w)=>{const l=w+1;r.push(Q("div",O(P({key:l,ref:q=>{y[`rt${l}`]=q},class:"q-rating__icon-container flex flex-center"},L),{onClick(){k(l)},onMouseover(){K(l)},onMouseout:X,onFocus(){K(l)},onBlur:X,onKeyup(q){re(q,l)}}),qe(a[`tip-${l}`],[Q(Ce,{class:o,name:S})])))}),e.name!==void 0&&e.disable!==!0&&t(r,"push"),Q("div",P({class:I.value,style:i.value},_.value),r)}}});const gt=j({props:{employee:Object},components:{},setup(e){const{getReleases:a,setReleases:n}=B(),c=d(()=>a(e.employee[581])),i=d(()=>{let t;return c.value&&c.value[3]?t=[{label:"Reason",value:c.value[32]},{label:"Effective Date",value:M(c.value[36].$d).format("MM/DD/YYYY")},{label:"CAAP Rating",value:c.value[59][0][37],type:"rating"},{label:"Submitted By",value:`${c.value[38][35]} ${c.value[38][37]}`},{label:"Submitted On",value:M(c.value[1].$d).tz(M.tz.guess()).format("MM/DD/YYYY hh:mm a")},{label:"Comments",value:c.value[60],type:"comments"}]:t=[],t});return(async()=>{if(!c.value&&e.employee[581]){const{data:t}=await T.fetchFromHiringApp({fields:[ne({type:"releases",query:"",id:e.employee[581]})]});console.log(t),n({id:t[3],data:t})}})(),{releaseDetails:i}}}),pt=u("div",{class:"text-h6 text-weight-bold"},"Pending Release Details",-1),bt={class:"row"},ht={class:"col-12 col-md-4"},_t={class:"text-body2 text-dark"},$t={class:"col-12 col-md-8"},St={key:1,class:"text-body2 text-weight-light text-primary"},xt={class:"text-body1 text-primary q-mb-xs"},At={class:"text-body2 text-dark text-italic"};function kt(e,a,n,c,i,v){return f(),A("div",null,[h(J,null,{default:g(()=>[h(C,{class:"q-pb-sm"},{default:g(()=>[pt]),_:1}),(f(!0),A(N,null,se(e.releaseDetails,t=>(f(),A(N,{key:t},[t.type!=="comments"?(f(),x(C,{key:0,class:"q-py-sm"},{default:g(()=>[u("div",bt,[u("div",ht,[u("div",_t,D(t.label),1)]),u("div",$t,[t.type==="rating"?(f(),x(vt,{key:0,modelValue:t.value,"onUpdate:modelValue":s=>t.value=s,max:"5",size:"sm",color:"primary",icon:"star_border","icon-selected":"star","icon-half":"star_half","no-dimming":"",readonly:""},null,8,["modelValue","onUpdate:modelValue"])):(f(),A("div",St,D(t.value),1))])])]),_:2},1024)):t.value!==""?(f(),x(C,{key:1},{default:g(()=>[u("div",xt,D(t.label),1),u("div",At,D(t.value),1)]),_:2},1024)):H("",!0)],64))),128))]),_:1})])}var Dt=Y(gt,[["render",kt]]);const qt=j({components:{LocationAndManager:lt,EmployeeJobDetails:yt,PendingReleaseDetails:Dt},setup(){const e=we(),{getEmployee:a,getAssignmentsByEmployee:n,setAssignmentsByEmployee:c}=B(),i=d(()=>a(e.params.id)),v=d(()=>i.value?n(i.value[3]):null),t=async()=>{if(!v.value&&i.value[577]){const{data:s}=await T.fetchFromHiringApp({fields:[ne({type:"assignments",query:"",id:i.value[577]})]});console.log(s),c({id:i.value[3],data:s})}};return le(i,(s,y)=>{s&&t()}),{employee:i,assignment:v}}}),Ct={class:"q-px-sm q-py-md"},It={class:"row"},Lt={class:"col-12 col-md-6 q-px-xs"},wt={key:1},Ht={key:0};function Mt(e,a,n,c,i,v){const t=R("location-and-manager"),s=R("employee-job-details"),y=R("pending-release-details");return f(),x(Me,{style:{"max-width":"100vw"}},{default:g(()=>[u("div",Ct,[u("div",It,[u("div",Lt,[e.employee&&e.employee[408]==="Active"?(f(),x(t,{key:0,employee:e.employee,assignment:e.assignment},null,8,["employee","assignment"])):H("",!0),e.employee&&e.assignment?(f(),A("div",wt,[e.assignment[21]==="In Process"?(f(),x(s,{key:0,class:"q-mt-md",assignment:e.assignment,employee:e.employee},null,8,["assignment","employee"])):H("",!0)])):H("",!0)]),u("div",{class:He(["col-12 col-md-6 q-px-xs",e.employee&&e.employee[581]?"order-first":""])},[e.employee&&e.employee[581]?(f(),A("div",Ht,[h(y,{employee:e.employee},null,8,["employee"])])):H("",!0)],2)])]),h(Ee,{position:"bottom-right",offset:[18,18]},{default:g(()=>[h(z,{fab:"",icon:"close",color:"accent",onClick:a[0]||(a[0]=$=>e.$router.push({name:"employees"}))})]),_:1})]),_:1})}var ao=Y(qt,[["render",Mt]]);export{ao as default};
