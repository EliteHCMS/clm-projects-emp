import{c as q,bZ as je,i as Xe,n as Ye,dA as Le,h as X,bY as P,bS as re,cD as Ee,g as Oe,c2 as He,c5 as We,r as V,da as Ke,ca as Ge,b2 as Ze,b_ as xe,l as J,_ as F,b7 as E,B as u,C as _,d as l,bt as r,E as c,ae as A,at as k,cX as Z,bQ as $e,as as w,cB as ye,H as Se,cW as T,F as se,b6 as ie,cV as Y,bV as be,az as qe,z as Te,bX as Me,bU as ea,cY as te,w as aa,I as ta,bW as sa}from"./index.1bdfb1af.js";import{Q as ve,a as oa,b as ge}from"./QTabPanels.08b8c604.js";import{Q as la}from"./QTabs.f5a4b527.js";import{Q as Ue}from"./QPage.e6a76550.js";import{u as W}from"./use-quasar.04742e8f.js";import{q as U,u as de,b as na}from"./app.b866ce7a.js";import{dayjs as H}from"./dayjs.d9609b5e.js";import{a as z,c as ae,f as De}from"./array.164cfe36.js";import{a as he,b as ra}from"./useQuerySaver.d29ff9ee.js";import{u as oe}from"./dataStore.045be7a8.js";import{a as ue}from"./QSelect.bc92d132.js";import{Q as Ce}from"./QForm.8d55aca1.js";import{a as Re,u as B}from"./vee-validate.esm.21b9ad79.js";import{A as ia,a as ua}from"./addNewCustomer.d44a1c54.js";import{a as we,Q as Ae}from"./QTable.0c4bdbf7.js";import{Q as me}from"./QTr.381372db.js";import{Q as fe}from"./QTd.96769614.js";import{N as da}from"./nameRequestData.7b895c64.js";import{u as ca}from"./index.b8387053.js";import{P as ma}from"./projectPipeline.4327b7be.js";import{u as Fe,P as fa,c as ba}from"./pay-rate-v2.b7e77851.js";import{p as pa}from"./VueTelInput.39fd6324.js";import"./use-panel.2270b0a0.js";import"./touch.3df10340.js";import"./selection.424f2d7d.js";import"./QResizeObserver.e82f054c.js";import"./rtl.b51694b1.js";import"./_commonjsHelpers.a26ce4be.js";import"./localForage.34b90606.js";import"./index.04bc0a32.js";import"./i18n.8bfbf2a5.js";import"./QChip.4ce28263.js";import"./QMenu.92ffa49f.js";import"./position-engine.f90a4f55.js";import"./states.03e3d448.js";import"./QList.756f4e56.js";import"./QMarkupTable.cfd50ad9.js";import"./use-fullscreen.def6ffc2.js";import"./QSpinnerGears.cd899c2e.js";import"./QTooltip.fda9fa23.js";import"./QInnerLoading.15a7e337.js";import"./export-file.dc78ba05.js";const va=["top","right","bottom","left"],Qe={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>va.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function Ie(e,a){return{formClass:q(()=>`q-fab--form-${e.square===!0?"square":"rounded"}`),stacked:q(()=>e.externalLabel===!1&&["top","bottom"].includes(e.labelPosition)),labelProps:q(()=>{if(e.externalLabel===!0){const d=e.hideLabel===null?a.value===!1:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${e.labelPosition}`+(d===!0?" q-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${e.labelPosition}`+(e.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:e.labelStyle}}})}}const Be={start:"self-end",center:"self-center",end:"self-start"},ga=Object.keys(Be);var ne=je({name:"QFabAction",props:{...Qe,icon:{type:String,default:""},anchor:{type:String,validator:e=>ga.includes(e)},to:[String,Object],replace:Boolean},emits:["click"],setup(e,{slots:a,emit:d}){const t=Xe(Le,()=>({showing:{value:!0},onChildClick:Ye})),{formClass:m,labelProps:b}=Ie(e,t.showing),s=q(()=>{const g=Be[e.anchor];return m.value+(g!==void 0?` ${g}`:"")}),o=q(()=>e.disable===!0||t.showing.value!==!0);function p(g){t.onChildClick(g),d("click",g)}function N(){const g=[];return a.icon!==void 0?g.push(a.icon()):e.icon!==""&&g.push(X(re,{name:e.icon})),(e.label!==""||a.label!==void 0)&&g[b.value.action](X("div",b.value.data,a.label!==void 0?a.label():[e.label])),Ee(a.default,g)}const i=Oe();return Object.assign(i.proxy,{click:p}),()=>X(P,{class:s.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:o.value,onClick:p},N)}});const ha=["up","right","down","left"],ya=["left","center","right"];var Pe=je({name:"QFab",props:{...Qe,...He,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{default:null},direction:{type:String,default:"right",validator:e=>ha.includes(e)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>ya.includes(e)}},emits:We,setup(e,{slots:a}){const d=V(null),t=V(e.modelValue===!0),m=Ke(),{proxy:{$q:b}}=Oe(),{formClass:s,labelProps:o}=Ie(e,t),p=q(()=>e.persistent!==!0),{hide:N,toggle:i}=Ge({showing:t,hideOnRouteChange:p}),g=q(()=>({opened:t.value})),R=q(()=>`q-fab z-fab row inline justify-center q-fab--align-${e.verticalActionsAlign} ${s.value}`+(t.value===!0?" q-fab--opened":" q-fab--closed")),S=q(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${e.direction} q-fab__actions--${t.value===!0?"opened":"closed"}`),f=q(()=>{const C={id:m.value,role:"menu"};return t.value!==!0&&(C["aria-hidden"]="true"),C}),n=q(()=>`q-fab__icon-holder  q-fab__icon-holder--${t.value===!0?"opened":"closed"}`);function $(C,L){const D=a[C],I=`q-fab__${C} absolute-full`;return D===void 0?X(re,{class:I,name:e[L]||b.iconSet.fab[L]}):X("div",{class:I},D(g.value))}function Q(){const C=[];return e.hideIcon!==!0&&C.push(X("div",{class:n.value},[$("icon","icon"),$("active-icon","activeIcon")])),(e.label!==""||a.label!==void 0)&&C[o.value.action](X("div",o.value.data,a.label!==void 0?a.label(g.value):[e.label])),Ee(a.tooltip,C)}return Ze(Le,{showing:t,onChildClick(C){N(C),d.value!==null&&d.value.$el.focus()}}),()=>X("div",{class:R.value},[X(P,{ref:d,class:s.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":t.value===!0?"true":"false","aria-haspopup":"true","aria-controls":m.value,onClick:i},Q),X("div",{class:S.value,...f.value},xe(a.default))])}});const qa=J({emits:["cancelEdit"],components:{AddProjectLocationForm:ia,AddCustomerForm:ua},props:{config:Object},setup(e,{emit:a}){const d=V(null),t=V(null),m=V(!1),b=async()=>{const{type:f,initialValue:n}=e.config;if(f==="options"){const{getter:$}=e.config;t.value=await $(),d.value=t.value,i.value=n(d.value)}else i.value=n},s=q(()=>z({entry:e.config.formRules})),{meta:o,errors:p,handleSubmit:N}=Re({validationSchema:s}),{value:i}=B("entry"),g=(f,n)=>{const{filter:$}=e.config;f===""&&n(()=>{d.value=t.value}),n(()=>{const Q=f.toLowerCase();d.value=$(t.value,Q)})},R=f=>{m.value=!1,t.value.push(f),d.value.push(f),i.value=f},S=N(async f=>{const{setter:n}=e.config;await n(f.entry),a("cancelEdit")});return b(),{rawOptions:t,options:d,entry:i,formErrors:p,formMeta:o,submit:S,filterOptions:g,addNew:m,newOptionAdded:R}}}),wa={key:0,class:"q-pr-xl"},$a={class:"text-caption"},Ca={key:0,class:"text-center bg-info"},Ra={key:0,class:"text-center bg-info"},ka={key:1,class:"q-pr-xl"},Na={class:"text-caption"};function _a(e,a,d,t,m,b){const s=E("add-project-location-form"),o=E("add-customer-form");return u(),_("div",null,[l(Ce,{onSubmit:$e(e.submit,["prevent"])},{default:r(()=>[e.config.type==="options"?(u(),_("div",wa,[l(ue,{class:"q-mb-sm",dense:"",label:`Select a ${e.config.fieldLabel}`,"transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.entry,"onUpdate:modelValue":a[3]||(a[3]=p=>e.entry=p),options:e.options,"option-label":e.config.optionLabel,"display-value":`${e.entry?e.entry[e.config.displayValue]:""}`,"bottom-slots":"",error:!!e.formErrors.entry,"stack-label":"","use-input":"","input-debounce":"0",onFilter:e.filterOptions,clearable:"",loading:!e.rawOptions,disable:!e.rawOptions},{error:r(()=>[c("div",$a,A(e.formErrors.entry),1)]),after:r(()=>[l(P,{type:"submit",color:"info",icon:"done",dense:"",onClick:e.submit},null,8,["onClick"]),l(P,{color:"dark",icon:"close",dense:"",onClick:a[0]||(a[0]=p=>e.$emit("cancelEdit"))})]),"after-options":r(()=>[e.config.allowNew&&e.options&&e.options.length>0?(u(),_("div",Ca,[l(P,{flat:"",color:"white",label:`Add a New ${e.config.fieldLabel}`,onClick:a[1]||(a[1]=p=>e.addNew=!0)},null,8,["label"])])):k("",!0)]),"no-option":r(()=>[e.config.allowNew?(u(),_("div",Ra,[l(P,{flat:"",color:"white",label:`Add a New ${e.config.fieldLabel}`,onClick:a[2]||(a[2]=p=>e.addNew=!0)},null,8,["label"])])):k("",!0)]),_:1},8,["label","modelValue","options","option-label","display-value","error","onFilter","loading","disable"])])):k("",!0),e.config.type==="input"?(u(),_("div",ka,[l(Z,{class:"q-mb-sm",dense:"",label:e.config.fieldLabel,modelValue:e.entry,"onUpdate:modelValue":a[5]||(a[5]=p=>e.entry=p),"bottom-slots":"",error:!!e.formErrors.entry,"stack-label":""},{error:r(()=>[c("div",Na,A(e.formErrors.entry),1)]),after:r(()=>[l(P,{type:"submit",color:"info",icon:"done",dense:"",onClick:e.submit},null,8,["onClick"]),l(P,{color:"dark",icon:"close",dense:"",onClick:a[4]||(a[4]=p=>e.$emit("cancelEdit"))})]),_:1},8,["label","modelValue","error"])])):k("",!0)]),_:1},8,["onSubmit"]),l(ye,{modelValue:e.addNew,"onUpdate:modelValue":a[8]||(a[8]=p=>e.addNew=p)},{default:r(()=>[e.config.newType==="location"?(u(),w(s,{key:0,onCancelAdd:a[6]||(a[6]=p=>e.addNew=!1),onAddComplete:e.newOptionAdded},null,8,["onAddComplete"])):k("",!0),e.config.newType==="customer"?(u(),w(o,{key:1,onCancelAdd:a[7]||(a[7]=p=>e.addNew=!1),onAddComplete:e.newOptionAdded},null,8,["onAddComplete"])):k("",!0)]),_:1},8,["modelValue"])])}var Aa=F(qa,[["render",_a]]);const Va=J({emits:[],props:{item:Object},components:{EditDetailsForm:Aa},setup(e,{emit:a}){const d=V(!1),t=q(()=>{const{permission:m}=e.item.editable&&e.item.config?e.item.config:{action:null,subject:null};return m});return{edit:d,permission:t}}}),Sa={key:0,class:"row"},Da={class:"col-12 col-md-4"},Pa={class:"col-12 col-md-8"},ja=["innerHTML"];function La(e,a,d,t,m,b){const s=E("edit-details-form");return u(),w(T,{class:"q-py-sm"},{default:r(()=>[e.edit?(u(),w(s,{key:1,type:e.item.label,config:e.item.config,onCancelEdit:a[1]||(a[1]=o=>e.edit=!1)},null,8,["type","config"])):(u(),_("div",Sa,[c("div",Da,[c("div",null,[c("span",{class:Se(e.$q.screen.gt.lg?"text-body2":"text-caption")},A(e.item.label),3)])]),c("div",Pa,[c("div",null,[c("span",{class:Se(["text-weight-light",e.$q.screen.gt.lg?"text-body2":"text-caption"]),innerHTML:e.item.value},null,10,ja),e.item.editable&&e.$can(e.permission.action,e.permission.subject)?(u(),w(P,{key:0,color:"accent",flat:"",dense:"",round:"",icon:"edit",size:"sm",onClick:a[0]||(a[0]=o=>e.edit=!0)})):k("",!0)])])]))]),_:1})}var Ea=F(Va,[["render",La]]);const Oa=J({props:{title:String,details:Array},components:{DetailsSection:Ea}}),Ta={class:"text-body1 text-white"};function Ma(e,a,d,t,m,b){const s=E("details-section");return u(),_("div",null,[l(Y,{class:"text-dark q-pb-sm"},{default:r(()=>[e.title&&e.title!==""?(u(),w(T,{key:0,class:"bg-info q-py-sm"},{default:r(()=>[c("div",Ta,A(e.title.toUpperCase()),1)]),_:1})):k("",!0),(u(!0),_(se,null,ie(e.details,o=>(u(),_(se,{key:o},[o.hide?k("",!0):(u(),w(s,{key:0,item:o},null,8,["item"]))],64))),128))]),_:1})])}var Ua=F(Oa,[["render",Ma]]);const Fa=J({props:{rows:Array},setup(e,a){const d=W();be();const t=q(()=>d.screen.gt.sm?[{name:1,label:"Created",align:"left",field:s=>s[1].$d,format:s=>`${H(s).format("L LT")}`,sortable:!0},{name:2,label:"ID",align:"left",field:s=>s[3],format:s=>`${s}`,sortable:!0,required:!0},{name:3,label:"Classification",align:"left",field:s=>s[21],format:s=>`${s===""?"Open":s}`,sortable:!0,required:!0},{name:4,label:"Status",align:"left",field:s=>s[17],format:s=>`${s}`,sortable:!0},{name:5,label:"Rate",align:"left",field:s=>s[23],format:s=>`$ ${s.toFixed(2)}`,sortable:!0,required:!0},{name:6,label:"# Requested",align:"right",field:s=>s[18],format:s=>`${s}`},{name:7,label:"Offers",align:"right",field:s=>m(s),format:s=>`${s}`,sortable:!0,required:!0},{name:8,label:"# Names",align:"right",field:s=>s.names,format:s=>s?s.length:0,sortable:!0,required:!0},{name:9,label:"Balance",align:"right",field:s=>b(s),format:s=>`${s}`,sortable:!0,required:!0}]:[]);function m(s){return s.offers.filter(o=>o[21]==="Accepted").length}function b(s){const o=m(s);return s[18]-o}return{columns:t,props:e}}}),Qa={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function Ia(e,a,d,t,m,b){return u(),_("div",null,[l(Ae,{columns:e.columns,rows:e.props.rows,"row-key":s=>s[3],class:"q-pa-sm",pagination:{rowsPerPage:10},"table-header-class":"bg-dark text-white","no-data-label":"There are no classifications",dense:""},{header:r(s=>[l(me,{class:"bg-dark text-white",props:s},{default:r(()=>[(u(!0),_(se,null,ie(s.cols,o=>(u(),w(we,{key:o.name,props:s},{default:r(()=>[qe(A(o.label),1)]),_:2},1032,["props"]))),128)),l(we,{"auto-width":""})]),_:2},1032,["props"])]),body:r(s=>[l(me,{props:s},{default:r(()=>[(u(!0),_(se,null,ie(s.cols,o=>(u(),w(fe,{key:o.name,props:s},{default:r(()=>[qe(A(o.value),1)]),_:2},1032,["props"]))),128)),l(fe,{"auto-width":""},{default:r(()=>[s.row[17]==="Pending"&&e.$can("manage","projectRequests")&&!e.$can("read","hireRequests")?(u(),w(re,{key:0,class:"cursor-pointer",size:e.$q.screen.gt.sm?"sm":"xs",color:"primary",round:"",dense:"",onClick:o=>e.$emit("removeRow",s.row),name:"delete_forever"},null,8,["size","onClick"])):k("",!0)]),_:2},1024)]),_:2},1032,["props"])]),"no-data":r(({message:s})=>[c("div",Qa,[l(re,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),c("span",null,A(s),1)])]),"top-right":r(()=>[l(P,{color:"secondary",flat:"","icon-right":"refresh",label:"Refresh",onClick:a[0]||(a[0]=s=>e.$emit("refresh"))})]),_:1},8,["columns","rows","row-key"])])}var Ba=F(Fa,[["render",Ia]]);const za=J({props:{data:Object},components:{ClassificationsTable:Ba},setup(e,a){const d=W(),{getClassifications:t,fetchClassifications:m,removeData:b,updateViewedRequests:s,getHireRequest:o}=oe(),p=q(()=>o(e.data[3])&&o(e.data[3]).classes?o(e.data[3]).classes:t(e.data[3]).sort((g,R)=>g[1].$d<R[1].$d?1:-1));async function N(g){d.loading.show();const{data:R}=await m({id:e.data[3]});s({id:e.data[3],dataset:"classes",data:R}),d.loading.hide()}async function i(g){d.dialog({title:"Confirm",message:`Are you sure you want to remove ${g[12]} from request# ${g[6]}?`,cancel:!0,persistent:!0}).onOk(async()=>{try{const{data:R}=await U.upsertRecordsXML({to:"bpzpyqcu4",data:[{3:{value:g[3]},17:{value:"Cancelled"},51:{value:new Date},128:{value:6}}],fieldsToReturn:[220],formatObject:220});b({type:"classifications",key:R[0][220][6],item:R[0][220],storageKey:"storageRequestClassifications"});const S=p.value.filter(f=>f[3]!==R[0][220][3]);s({id:e.data[3],dataset:"classes",data:S})}catch(R){d.notify({type:"negative",message:"Cannot remove classification"}),console.log(R)}})}return N(),{rows:p,removeRow:i,loadData:N}}});function Ja(e,a,d,t,m,b){const s=E("classifications-table");return u(),_("div",null,[l(s,{rows:e.rows,onRemoveRow:e.removeRow,onRefresh:a[0]||(a[0]=o=>e.loadData(!0))},null,8,["rows","onRemoveRow"])])}var Xa=F(za,[["render",Ja]]);const Ya=J({props:{data:Object},components:{NameRequestDataTable:da},setup(e,a){const d=W(),t=be(),{capitalize:m}=Te,b=V(""),{getNameRequest:s,fetchNameRequest:o,removeData:p}=oe(),{userData:N}=de(),i=q(()=>s(e.data[3]).sort((n,$)=>n[1].$d<$[1].$d?1:-1));async function g(){d.loading.show(),await o({id:e.data[3]}),d.loading.hide()}function R(n){return`${m(n[6].toLowerCase())} ${m(n[7].toLowerCase())}`}async function S(n){d.dialog({title:"Confirm",message:`Are you sure you want to remove ${R(n)} from request# ${n[18]}?`,cancel:!0,persistent:!0}).onOk(async()=>{try{const{data:$}=await U.upsertRecordsXML({to:"bsg4yb4wa",data:[{3:{value:n[3]},11:{value:!0},12:{value:H().tz("America/Chicago")},13:{value:`${N[35]} ${N[37]}`}}],fieldsToReturn:[15],formatObject:15});p({type:"nameRequest",key:$[0][15][18],item:$[0][15],storageKey:"storageNameRequest"})}catch($){d.notify({type:"negative",message:"Cannot remove name request"}),console.log($)}})}const f=n=>{t.push({name:"ee-summary",params:{id:n[3]}})};return g(),{nameRequests:i,search:b,removeName:S,viewEmployee:f}}}),Ha={class:"row items-center"},Wa={class:"col-12 col-md-4"};function Ka(e,a,d,t,m,b){const s=E("name-request-data-table");return u(),_("div",null,[l(Y,{flat:""},{default:r(()=>[l(T,null,{default:r(()=>[c("div",Ha,[c("div",Wa,[l(Z,{dense:"",modelValue:e.search,"onUpdate:modelValue":a[0]||(a[0]=o=>e.search=o),label:"Search"},null,8,["modelValue"])])])]),_:1})]),_:1}),l(s,{requests:e.nameRequests,status:"Named",onRemoveName:e.removeName,onViewEmployee:e.viewEmployee},null,8,["requests","onRemoveName","onViewEmployee"])])}var Ga=F(Ya,[["render",Ka]]);const Za=J({props:{rows:Array},setup(e,a){const d=W();be();const{openWindow:t}=na(),m=de(),{getUserType:b}=Me(m),{can:s}=ca(),o=q(()=>d.screen.gt.sm?[{name:"Action",label:"",align:"left"},{name:1,label:"Created",align:"left",field:i=>i[1].$d,format:i=>`${H(i).format("L LT")}`,sortable:!0},{name:2,label:"Offered To",align:"left",field:i=>i.employee[24],format:i=>`${i}`,sortable:!0,required:!0},{name:3,label:"Classification",align:"left",field:i=>i[57],format:i=>`${i===""?"Open":i}`,sortable:!0,required:!0},{name:4,label:"Status",align:"left",field:i=>i[21],format:i=>`${i}`,sortable:!0},{name:5,label:"Rate Offered",align:"left",field:i=>i[22],format:i=>`$ ${i.toFixed(2)}`,sortable:!0,required:!0}]:[{name:"Action",label:"",align:"left"},{name:1,label:"Created",align:"left",field:i=>i[1].$d,format:i=>`${H(i).fromNow()}`,sortable:!0},{name:2,label:"Offered To",align:"left",field:i=>i.employee[24],format:i=>`${i}`,sortable:!0,required:!0},{name:3,label:"Classification",align:"left",field:i=>i[57],format:i=>`${i===""?"Open":i}`,sortable:!0,required:!0},{name:4,label:"Status",align:"left",field:i=>i[21],format:i=>`${i}`,sortable:!0},{name:5,label:"Rate Offered",align:"left",field:i=>i[22],format:i=>`$ ${i.toFixed(2)}`,sortable:!0,required:!0}]),p=q(()=>d.screen.gt.sm?["Action",1,2,3,4,s("read","rates")?5:[]]:["Action",1,2,3,4,s("read","rates")?5:[]]);return{getUserType:b,viewProfile:i=>{t(null,{url:`https://elitehcms.quickbase.com/db/bs7qsu6wh?a=dbpage&pageID=6&ee=${i[25]}`,name:"View Profile"})},columns:o,props:e,visibleColumns:p}}}),xa={key:0},et={key:1},at={key:2},tt={key:3},st={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function ot(e,a,d,t,m,b){return u(),_("div",null,[l(Ae,{columns:e.columns,"visible-columns":e.visibleColumns,rows:e.props.rows,"row-key":s=>s[3],class:"q-pa-sm",pagination:{rowsPerPage:10},"table-header-class":"bg-dark text-white","no-data-label":"There are no offers",dense:""},{body:r(s=>[l(me,{props:s},{default:r(()=>[(u(!0),_(se,null,ie(s.cols,o=>(u(),w(fe,{key:o.name,props:s,"auto-width":""},{default:r(()=>[o.name==="Action"?(u(),_("span",xa,[e.getUserType==="QuickBase User"?(u(),w(re,{key:0,class:"cursor-pointer",size:e.$q.screen.gt.sm?"sm":"xs",color:"info",round:"",dense:"",onClick:p=>e.viewProfile(s.row),name:s.expand?"visibility_off":"visibility"},null,8,["size","onClick","name"])):k("",!0)])):o.name===4?(u(),_("span",et,A(s.row[29]==="Review"?"Pending":o.value),1)):o.name===5?(u(),_("span",at,A(e.$can("read","rates")?o.value:"N/A"),1)):(u(),_("span",tt,A(o.value),1))]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"no-data":r(({message:s})=>[c("div",st,[l(re,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),c("span",null,A(s),1)])]),_:1},8,["columns","visible-columns","rows","row-key"])])}var lt=F(Za,[["render",ot]]);const nt=J({props:{data:Array},components:{OffersDataTable:lt},setup(e){const a=V("");return{offers:q(()=>{const t=[];return e.data.forEach(m=>{`${m.employee[24].toLowerCase}`.includes(a.value.toLowerCase())&&t.push(m)}),t}),search:a}}}),rt={class:"row items-center"},it={class:"col-12 col-md-4"};function ut(e,a,d,t,m,b){const s=E("offers-data-table");return u(),_("div",null,[l(Y,{flat:""},{default:r(()=>[l(T,null,{default:r(()=>[c("div",rt,[c("div",it,[l(Z,{dense:"",modelValue:e.search,"onUpdate:modelValue":a[0]||(a[0]=o=>e.search=o),label:"Search"},null,8,["modelValue"])])])]),_:1})]),_:1}),l(s,{rows:e.offers},null,8,["rows"])])}var dt=F(nt,[["render",ut]]);const ct={name:"Pipeline",components:{ProjectPipelineTable:ma},props:{request:Object},setup(e){const a=W(),d=V(""),{fetchDeployments:t,fetchInProcess:m,fetchPending:b,getDeployments:s,getInProcess:o,getPending:p}=oe(),N=q(()=>s(e.request[3]).filter(n=>n[20]==="Complete")),i=q(()=>{const n=[];return s(e.request[3]).forEach($=>{$[31].toLowerCase().includes(d.value.toLowerCase())&&n.push($)}),n}),g=q(()=>{const n=[];return p(e.request[3]).forEach($=>{$[25].toLowerCase().includes(d.value.toLowerCase())&&n.push($)}),n}),R=q(()=>{const n=[];return o(e.request[3]).forEach($=>{$[39].toLowerCase().includes(d.value.toLowerCase())&&n.push($)}),n}),S=q(()=>R.value.concat(g.value.concat(i.value)));async function f(){a.loading.show(),await t({requestId:e.request[3]}),await m({requestId:e.request[3]}),await b({requestId:e.request[3]}),a.loading.hide()}return f(),{arrived:N,allPipeline:S,search:d}}},mt={class:"q-pt-sm"},ft={class:"text-h5 text-dark"},bt={class:"text-body2 text-italic q-ml-sm"},pt=c("div",{class:"text-subtitle2 text-accent"},"The following people are currently in process or deployed for this request.",-1),vt={class:"row items-center"},gt={class:"col-12 col-md-3 q-px-sm"};function ht(e,a,d,t,m,b){const s=E("project-pipeline-table");return u(),w(Ue,{style:{"max-width":"100vw"}},{default:r(()=>[c("div",mt,[l(Y,{flat:""},{default:r(()=>[l(T,{class:"q-pb-none"},{default:r(()=>[c("div",ft,[qe(" Staffing Pipeline "),c("span",bt,"("+A(t.allPipeline.length)+" total)",1)]),pt]),_:1}),l(T,null,{default:r(()=>[c("div",vt,[c("div",gt,[l(Z,{dense:"",modelValue:t.search,"onUpdate:modelValue":a[0]||(a[0]=o=>t.search=o),label:"Search"},null,8,["modelValue"])])])]),_:1})]),_:1}),l(s,{rows:t.allPipeline},null,8,["rows"])])]),_:1})}var yt=F(ct,[["render",ht]]);const qt=J({emits:["namesAdded","closeNames"],components:{phoneNumberInput:pa},props:{request:Object},setup(e,{emit:a}){const d=W(),{getClassifications:t,addNameRequest:m}=oe(),{userData:b}=de(),{capitalize:s}=Te;V(!1);const o=V(10),p=V(null),N=V([]),i=q(()=>t(e.request[3])||[]),g=[{name:0,label:"#",align:"left",field:v=>v.id,format:v=>`${v}`},{name:1,label:"First Name",align:"left",field:v=>v.firstName,format:v=>`${s(v.toLowerCase())}`,sortable:!0},{name:2,label:"Last Name",align:"left",field:v=>v.lastName,format:v=>`${s(v.toLowerCase())}`,sortable:!0},{name:3,label:"Phone",align:"left",field:v=>v.phone,format:v=>`${v}`,sortable:!1,required:!0},{name:4,label:"Last 4",align:"left",field:v=>v.ssn,format:v=>`${v}`}],R=q(()=>{const v=new RegExp("^(?!0+$)\\d{"+o.value+"}","g");return z({job:z().required("Classification is required"),firstName:ae().required().label("First Name"),lastName:ae().required().label("Last Name"),phoneNumber:ae().matches(v,{excludeEmptyString:!0,message:"Valid Phone Number Required!"}).required().label("Phone Number"),ssn:ae().matches(/^\d+$/,{excludeEmptyString:!0,message:"Numbers Only!"}).label("Last 4 of SSN")})}),{errors:S,handleSubmit:f,resetForm:n,isSubmitting:$}=Re({validationSchema:R,initialValues:{job:i.value.length===1?i.value[0]:null}}),{value:Q}=B("job"),{value:C}=B("firstName"),{value:L}=B("lastName"),{value:D}=B("phoneNumber"),{value:I}=B("ssn"),x=f(v=>{const M={id:N.value.length+1,classification:v.job,firstName:v.firstName,lastName:v.lastName,phone:v.phoneNumber,ssn:v.ssn};N.value.push(M),n()}),pe=v=>{const M=N.value.filter(K=>K.id!==v.id);N.value=M},y=async v=>{const M=b;M.access&&delete M.access,M.permissions&&delete M.permissions;const{data:K}=await U.upsertRecordsXML({to:"bsg4yb4wa",data:[{6:{value:v.firstName},7:{value:v.lastName},8:{value:v.phone},10:{value:"Has Not Arrived"},19:{value:H()},16:{value:v.ssn},14:{value:`${M[35]} ${M[37]}`},17:{value:v.classification[3]}}],fieldsToReturn:[15],formatObject:15}),O=K[0][15];return O[45]>O[43]&&Fe({id:O[17],qty:O[45]}),O};return{formErrors:S,submit:x,job:Q,firstName:C,lastName:L,phoneNumber:D,ssn:I,resetForm:n,classifications:i,names:N,columns:g,removeRow:pe,submitNames:async()=>{d.loading.show();const v=[];N.value.forEach(O=>{const ee=y(O);v.push(ee)});const K=(await Promise.allSettled(v)).map(O=>O.value);m({id:e.request[3],data:K}),d.notify({type:"positive",message:"Names successfully added!"}),a("namesAdded"),d.loading.hide()},phoneLength:o,updateCountry:v=>{p.value=v},updatePhoneMaxLength:v=>{o.value=v}}}}),wt={class:"q-mb-sm"},$t={class:"text-caption"},Ct={class:"q-mb-sm"},Rt={class:"text-caption"},kt={class:"q-mb-sm"},Nt={class:"q-mb-sm"},_t={class:"text-caption"},At={class:"text-caption"},Vt={class:"text-caption"};function St(e,a,d,t,m,b){const s=E("phone-number-input");return u(),w(Ce,{onSubmit:$e(e.submit,["prevent"])},{default:r(()=>[l(Y,null,{default:r(()=>[l(T,{class:"q-pb-sm"},{default:r(()=>[c("div",wt,[l(Z,{tabindex:"1",dense:"",label:"First Name",modelValue:e.firstName,"onUpdate:modelValue":a[0]||(a[0]=o=>e.firstName=o),error:!!e.formErrors.firstName,"bottom-slots":""},{error:r(()=>[c("div",$t,A(e.formErrors.firstName),1)]),_:1},8,["modelValue","error"])]),c("div",Ct,[l(Z,{tabindex:"2",dense:"",label:"Last Name",modelValue:e.lastName,"onUpdate:modelValue":a[1]||(a[1]=o=>e.lastName=o),error:!!e.formErrors.lastName,"bottom-slots":""},{error:r(()=>[c("div",Rt,A(e.formErrors.lastName),1)]),_:1},8,["modelValue","error"])]),c("div",kt,[l(s,{name:"phoneNumber",class:"col-xs-12 col-sm-12",dense:"",modelValue:e.phoneNumber,"onUpdate:modelValue":a[2]||(a[2]=o=>e.phoneNumber=o),label:"Phone Number",tabindex:"3",onMaxLengthChanged:e.updatePhoneMaxLength,error:!!e.formErrors.phoneNumber,"error-message":e.formErrors.phoneNumber,onCountryChanged:e.updateCountry},null,8,["modelValue","onMaxLengthChanged","error","error-message","onCountryChanged"])]),c("div",Nt,[l(Z,{maxlength:"4",tabindex:"4",dense:"",label:"SSN Last 4 (Optional)",modelValue:e.ssn,"onUpdate:modelValue":a[3]||(a[3]=o=>e.ssn=o),error:!!e.formErrors.ssn,"bottom-slots":""},{error:r(()=>[c("div",_t,A(e.formErrors.ssn),1)]),_:1},8,["modelValue","error"])]),c("div",null,[l(ue,{dense:"",tabindex:"5",label:"Classification","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.job,"onUpdate:modelValue":a[4]||(a[4]=o=>e.job=o),options:e.classifications,"option-label":o=>o?`${o[21]}`:"","display-value":e.job?`${e.job[21]}`:"","bottom-slots":"",error:!!e.formErrors.job},{error:r(()=>[c("div",At,A(e.formErrors.job),1)]),_:1},8,["modelValue","options","option-label","display-value","error"])])]),_:1}),l(ea),l(te,{class:"q-pt-sm",align:"right"},{default:r(()=>[e.names.length===0?(u(),w(P,{key:0,dense:"",label:"Cancel",color:"secondary",onClick:a[5]||(a[5]=o=>e.$emit("closeNames"))})):k("",!0),l(P,{dense:"",color:"info",label:"Save Name",type:"submit",onClick:e.submit},null,8,["onClick"])]),_:1}),e.names.length>0?(u(),w(T,{key:0,class:"q-px-none"},{default:r(()=>[l(Ae,{flat:"",columns:e.columns,rows:e.names,"row-key":o=>o.name,class:"q-pa-sm",pagination:{rowsPerPage:100},"table-header-class":"bg-dark text-white",dense:"","hide-pagination":""},{header:r(o=>[l(me,{class:"bg-dark text-white",props:o},{default:r(()=>[(u(!0),_(se,null,ie(o.cols,p=>(u(),w(we,{class:"text-left",key:p.name},{default:r(()=>[qe(A(p.label),1)]),_:2},1024))),128)),l(we,{"auto-width":""})]),_:2},1032,["props"])]),body:r(o=>[l(me,{"no-hover":"",props:o},{default:r(()=>[(u(!0),_(se,null,ie(o.cols,p=>(u(),w(fe,{key:p.name,props:o},{default:r(()=>[c("span",Vt,A(p.value==="undefined"?"N/A":p.value),1)]),_:2},1032,["props"]))),128)),l(fe,{"auto-width":""},{default:r(()=>[l(P,{round:"",flat:"",icon:"delete",color:"accent",onClick:p=>e.removeRow(o.row)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["columns","rows","row-key"])]),_:1})):k("",!0),e.names.length>0?(u(),w(te,{key:1,align:"right"},{default:r(()=>[l(P,{dense:"",label:"Cancel",color:"secondary",onClick:a[6]||(a[6]=o=>e.$emit("closeNames"))}),l(P,{dense:"",color:"primary",label:"Submit These Names",onClick:e.submitNames},null,8,["onClick"])]),_:1})):k("",!0)]),_:1})]),_:1},8,["onSubmit"])}var Dt=F(qt,[["render",St]]);const Pt=J({emits:["jobsAdded","closeJobs","jobUpdated"],components:{PayRateField:fa},props:{request:Object},setup(e,{emit:a}){W();const{getClassifications:d}=oe();de();const t=V([]),m=q(()=>d(e.request[3])||[]),b=z({craft:z().required().nullable().label("Craft"),classification:z().required().nullable().label("Classification"),rate:De().required().nullable().label("Rate"),qty:De().required().nullable().label("Quantity")}),{errors:s,handleSubmit:o,resetForm:p,isSubmitting:N,setFieldError:i}=Re({validationSchema:b}),{value:g}=B("craft"),{value:R}=B("classification"),{value:S}=B("rate"),{value:f}=B("qty"),n=o(async C=>{const L=m.value.find(D=>D[9]===C.classification[3]&&D[23]===C.rate);if(L){const D=L[18]+C.qty,I=await Fe({id:L[3],qty:D});a("jobUpdated",I)}else{const D=await ba({requestData:e.request,job:C});a("jobsAdded",D)}}),$=async()=>{const{data:C}=await U.fetchFromProjectsApp({fields:[he({type:"projectCrafts",query:`{'7'.EX.'${e.request[6]}'}AND{'6'.EX.'Active'}`})]}),L=C.sort((D,I)=>D[20]>I[20]?1:-1);t.value=L,console.log(m.value)},Q=q(()=>{const C=g.value&&g.value.classifications?g.value.classifications:[];return C.length>0?C.sort((L,D)=>L[32]>D[32]?-1:1):[]});return aa(R,(C,L)=>{C&&C.hasFixedRate?S.value=C.fixedRate:S.value&&(S.value=null)}),$(),{errors:s,submit:n,classificationOptions:Q,craft:g,classification:R,rate:S,qty:f,crafts:t}}}),jt={key:0,class:"text-body2 text-italic text-weight-bold text-dark"},Lt={key:1,class:"text-body2 text-italic text-weight-bold text-dark"},Et={class:"row q-mb-md"},Ot={class:"col-6 q-pr-sm"},Tt={class:"text-caption"},Mt={class:"col-6 q-pl-sm"},Ut={class:"text-caption"},Ft={class:"row"},Qt={class:"col-6 q-pr-sm"},It={class:"text-caption"},Bt={class:"col-6 q-pl-sm"};function zt(e,a,d,t,m,b){const s=E("pay-rate-field");return u(),w(Ce,ta(e.$attrs,{onSubmit:$e(e.submit,["prevent"])}),{default:r(()=>[l(Y,null,{default:r(()=>[l(T,null,{default:r(()=>[e.$attrs.hideInstructions?(u(),_("div",Lt," Enter the following information about the classification and click Submit. ")):(u(),_("div",jt," Enter the following information about the classification and click Save. Repeat until all classifications you are requesting have been saved. Then click Continue. ")),c("div",Et,[c("div",Ot,[l(ue,{class:"q-mt-md",dense:"",clearable:"","transition-show":"flip-up","transition-hide":"flip-down",label:"Select Craft",modelValue:e.craft,"onUpdate:modelValue":a[0]||(a[0]=o=>e.craft=o),options:e.crafts,"option-label":o=>o[10],"display-value":e.craft?`${e.craft[10]}`:"",error:!!e.errors.craft,"bottom-slots":""},{error:r(()=>[c("div",Tt,A(e.errors.craft),1)]),_:1},8,["modelValue","options","option-label","display-value","error"])]),c("div",Mt,[l(ue,{class:"q-mt-md",dense:"",clearable:"","transition-show":"flip-up","transition-hide":"flip-down",label:"Classification",modelValue:e.classification,"onUpdate:modelValue":a[1]||(a[1]=o=>e.classification=o),options:e.classificationOptions,"option-label":o=>o[18],"display-value":e.classification?`${e.classification[18]}`:"",error:!!e.errors.classification,"bottom-slots":"",disable:!e.craft},{error:r(()=>[c("div",Ut,A(e.errors.classification),1)]),_:1},8,["modelValue","options","option-label","display-value","error","disable"])])]),c("div",Ft,[c("div",Qt,[l(Z,{dense:"",type:"number",label:"Quantity",modelValue:e.qty,"onUpdate:modelValue":a[2]||(a[2]=o=>e.qty=o),modelModifiers:{number:!0},error:!!e.errors.qty,disable:!e.classification,"bottom-slots":""},{error:r(()=>[c("div",It,A(e.errors.qty),1)]),_:1},8,["modelValue","error","disable"])]),c("div",Bt,[l(s,{class:"q-mb-md",type:"number",step:"any",dense:"",label:"Hourly Rate",modelValue:e.rate,"onUpdate:modelValue":a[3]||(a[3]=o=>e.rate=o),modelModifiers:{number:!0},prefix:"$",disable:!e.classification||e.classification.hasFixedRate&&!e.$can("manage","rates"),error:!!e.errors.rate,"error-message":e.errors.rate,"bottom-slots":""},null,8,["modelValue","disable","error","error-message"])])])]),_:1}),l(te,{align:"right"},{default:r(()=>[l(P,{dense:"",color:"secondary",label:"Cancel",onClick:a[4]||(a[4]=o=>e.$emit("closeJobs"))}),l(P,{dense:"",color:"primary",label:"Submit",type:"submit",onClick:e.submit},null,8,["onClick"])]),_:1})]),_:1})]),_:1},16,["onSubmit"])}var Jt=F(Pt,[["render",zt]]);const Xt=J({props:{request:Object},setup(e){const a=V(null),d=["Continue Processing","Remove from In Process"],t=["Client Headcount Met","Client Changed Work Scope"],m=de(),{userData:b}=Me(m),s=be(),o=W(),{getDeployments:p,getInProcess:N,getPending:i,fetchDeployments:g,fetchInProcess:R,fetchPending:S}=oe(),f=b.value&&b.value[35]?b.value[35]:"",n=b.value&&b.value[37]?b.value[37]:"",$=q(()=>p(e.request[3])),Q=q(()=>N(e.request[3])),C=q(()=>i(e.request[3])),L=q(()=>$.value.concat(Q.value)),D=q(()=>C.value.concat(Q.value));async function I(){await g({requestId:e.request[3],refresh:!0}),await R({requestId:e.request[3],refresh:!0}),await S({requestId:e.request[3],refresh:!0})}I();const x=q(()=>{let O={};return D.value.length>0?O=z({action:ae().required().label("Applicant(s) In Process, Action Needed?"),reason:ae().required().label("Reason for Closing")}):O=z({reason:ae().required().label("Reason for Closing")}),O}),{meta:pe,errors:y,handleSubmit:h,handleReset:j}=Re({validationSchema:x}),{value:le}=B("action"),{value:v}=B("reason"),M=h(async O=>{try{let ee=L.value.length===0?"Cancelled":"Closed",ke=L.value.length===0?6:5;e.request[305]>0&&(ee="Closed",ke=5);const ze={3:{value:e.request[3]},14:{value:ee},84:{value:new Date},86:{value:new Date},147:{value:ke},276:{value:b.value[3]},277:{value:`${f} ${n}`},303:{value:O.reason},306:{value:O.action||"N/A"}},Ve=[];e.request.classes&&Array.isArray(e.request.classes)&&e.request.classes.forEach(G=>{const _e=V(G[18]);O.action==="Continue Processing"?G.offers&&Array.isArray(G.offers)&&(_e.value=G.offers.filter(ce=>ce[21]==="Accepted").length):_e.value=$.value.filter(ce=>ce[89]===G[3]&&(ce[20]==="Complete"||ce[20]==="In Process")).length;const Je={3:{value:G[3]},17:{value:ee},29:{value:new Date},51:{value:new Date},128:{value:ke},255:{value:_e.value}};Ve.push(Je)});const{data:Ne}=await U.upsertRecordsXML({to:"bpzpyjbuy",data:[ze],fieldsToReturn:[3]});if(Ne&&Ne[0]&&Ne[0][3]){const{data:G}=await U.upsertRecordsXML({to:"bpzpyqcu4",data:Ve,fieldsToReturn:[3]});if(G)K(),s.go(-1),o.notify({position:"top-right",type:"positive",message:"Request successfully closed"});else throw"Error in canceling request"}else throw"Error in canceling request"}catch(ee){console.log(ee),o.notify({position:"top-right",type:"negative",message:"There was a problem closing request!"})}}),K=()=>{j(),a.value.hide()};return{cancelRequestDialog:a,hireRequestPipeline:D,actions:d,reasons:t,action:le,reason:v,formErrors:y,submitCancel:M,closeCancelDialog:K}}}),Yt=c("div",{class:"text-h6 text-info"},"Close Request",-1),Ht={key:0,class:"row"},Wt={class:"col-12 q-pr-sm"},Kt={class:"text-caption"},Gt={class:"row q-mb-md"},Zt={class:"col-12 q-pr-sm"},xt={class:"text-caption"};function es(e,a,d,t,m,b){return u(),w(ye,{ref:"cancelRequestDialog"},{default:r(()=>[l(Y,{flat:"",style:{width:"400px"}},{default:r(()=>[l(Ce,{onSubmit:$e(e.submitCancel,["prevent"])},{default:r(()=>[l(T,{class:"q-pb-none"},{default:r(()=>[Yt]),_:1}),l(T,null,{default:r(()=>[e.hireRequestPipeline.length>0?(u(),_("div",Ht,[c("div",Wt,[l(ue,{class:"q-mt-md",dense:"","transition-show":"flip-up","transition-hide":"flip-down",label:`${e.hireRequestPipeline.length} Applicant(s) In Process, Action Needed?`,modelValue:e.action,"onUpdate:modelValue":a[0]||(a[0]=s=>e.action=s),options:e.actions,error:!!e.formErrors.action,"bottom-slots":""},{error:r(()=>[c("div",Kt,A(e.formErrors.action),1)]),_:1},8,["label","modelValue","options","error"])])])):k("",!0),c("div",Gt,[c("div",Zt,[l(ue,{class:"q-mt-md",dense:"","transition-show":"flip-up","transition-hide":"flip-down",label:"Reason for Closing",modelValue:e.reason,"onUpdate:modelValue":a[1]||(a[1]=s=>e.reason=s),options:e.reasons,error:!!e.formErrors.reason,"bottom-slots":""},{error:r(()=>[c("div",xt,A(e.formErrors.reason),1)]),_:1},8,["modelValue","options","error"])])])]),_:1}),l(te,{align:"right"},{default:r(()=>[l(P,{dense:"",color:"secondary",label:"Cancel",onClick:e.closeCancelDialog},null,8,["onClick"]),l(P,{dense:"",color:"primary",label:"Submit",type:"submit",onClick:e.submitCancel},null,8,["onClick"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},512)}var as=F(Xt,[["render",es]]);const ts={name:"View Request",components:{ClassificationsTab:Xa,NamesTab:Ga,PipelineTab:yt,OffersTab:dt,NamesForm:Dt,DetailsCard:Ua,ClassificationForm:Jt,cancelHireRequest:as},setup(){const e=V(!0),a=V(!1),d=V(!1),t=V(!1),m=W(),b=sa(),s=be(),o=V(0),{getHireRequest:p,fetchHireRequest:N,updateViewedRequests:i,setHireRequests:g}=oe(),{getUserType:R,userData:S}=de(),f=V(!1),n=q(()=>p(b.params.id)),$=async y=>{if(!n.value[3]||y){m.loading.show();const{data:h}=await U.fetchFromProjectsApp({fields:[he({type:"requests",id:b.params.id})]});g({requestId:b.params.id,data:h}),m.loading.hide()}},Q=()=>{s.go(-1)},C=()=>{s.push({name:"project-general",params:{id:n.value[6]}})};$();const L=()=>{o.value=1,d.value=!1,$(!0)},D=y=>{t.value=!1,$(!0),i({id:n.value[3],dataset:"classes",data:y,push:!0})},I=y=>{t.value=!1,$(!0);const h=p(n.value[3]).classes,j=h.findIndex(le=>le[3]===y[3]);j>-1?(h[j]=y,i({id:n.value[3],dataset:"classes",data:h})):i({id:n.value[3],dataset:"classes",data:y,push:!0})},x=y=>{const h=[];for(const[j,le]of Object.entries(y)){const v={fid:j,value:le};h.push(v)}i({id:n.value[3],props:h})},pe=q(()=>n.value[3]?[{label:"Request ID",value:n.value[3],editable:!1},{label:"Date Created",value:H(n.value[1].$d).format("MM/DD/YYYY hh:mm:ss a"),editable:!1},{label:"Date Needed",value:H(n.value[64].$d).format("MM/DD/YYYY"),editable:!1},{label:"Status",value:`${n.value[14]} (${n.value[59]})`,editable:!1},{label:"Request Type",value:`${n.value[282]}`,editable:!1},{label:"Opened On",value:n.value[82].$d?H(n.value[82].$d).format("MM/DD/YYYY hh:mm:ss a"):null,editable:!1,hide:n.value[14]!=="Open"&&n.value[14]!=="Closed"},{label:"Closed On",value:n.value[86].$d?H(n.value[86].$d).format("MM/DD/YYYY hh:mm:ss a"):null,editable:!1,hide:n.value[14]!=="Closed"},{label:"Project Name",value:n.value[91],editable:!1},{label:"Job Number",value:n.value[27],editable:n.value[14]!=="Closed",config:{permission:{action:"manage",subject:"projectRequests"},type:"options",allowNew:!1,newType:"customer",initialValue:y=>y.find(h=>h[3]===n.value[9]),formRules:z().required().label("Job Number").nullable(),fieldLabel:"Job Number",optionLabel:"11",displayValue:11,getter:async()=>{const{data:y}=await U.fetchFromProjectsApp({fields:[he({type:"jobNumbers",query:`{'6'.EX.'${n.value[6]}'}AND{'29'.EX.'Active'}`})]});return y.sort((h,j)=>h[1].$d>j[1].$d?-1:1)},setter:async y=>{try{const{data:h}=await U.upsertRecordsXML({to:"bpzpyjbuy",data:[{3:{value:n.value[3]},9:{value:y[3]}}],fieldsToReturn:[9,27]});x(h[0]),m.notify({type:"positive",message:"Job Number successfully updated"})}catch{m.notify({type:"negative",message:"Error updating Job Number"})}},filter:(y,h)=>y.filter(j=>j[11].toLowerCase().indexOf(h)>-1)}},{label:"Site Contact",value:n.value[76],editable:n.value[14]!=="Closed",config:{permission:{action:"manage",subject:"projectRequests"},type:"options",allowNew:!1,newType:"location",initialValue:y=>y.find(h=>h[3]===n.value[60]),formRules:z().required().label("Site Contact").nullable(),fieldLabel:"Site Contact",optionLabel:"17",displayValue:17,getter:async()=>{const{data:y}=await U.fetchFromProjectsApp({fields:[he({type:"siteContacts",query:`{'7'.EX.'${n.value[6]}'}AND{'6'.EX.'Active'}`})]});return y.sort((h,j)=>h[17]>j[17]?1:-1)},setter:async y=>{try{const{data:h}=await U.upsertRecordsXML({to:"bpzpyjbuy",data:[{3:{value:n.value[3]},60:{value:y[3]}}],fieldsToReturn:[60,76]});x(h[0]),m.notify({type:"positive",message:"Site Contact successfully updated"})}catch{m.notify({type:"negative",message:"Error updating Site Contact"})}},filter:(y,h)=>y.filter(j=>j[17].toLowerCase().indexOf(h)>-1)}},{label:"Meeting Location",value:n.value[32],editable:n.value[14]!=="Closed",config:{permission:{action:"manage",subject:"projectRequests"},type:"options",allowNew:!1,newType:"location",initialValue:y=>y.find(h=>h[3]===n.value[31]),formRules:z().required().label("Meeting Location").nullable(),fieldLabel:"Meeting Location",optionLabel:"6",displayValue:6,getter:async()=>{const{data:y}=await U.fetchFromStructureApp({fields:[ra({type:"meetingLocations",query:`{'15'.EX.'${n.value[8]}'}AND{'14'.EX.'Active'}`})]});return y.sort((h,j)=>h[6]>j[6]?1:-1)},setter:async y=>{try{const{data:h}=await U.upsertRecordsXML({to:"bpzpyjbuy",data:[{3:{value:n.value[3]},31:{value:y[3]}}],fieldsToReturn:[31,32,33]});x(h[0]),m.notify({type:"positive",message:"Meeting Location successfully updated"})}catch{m.notify({type:"negative",message:"Error updating Meeting Location"})}},filter:(y,h)=>y.filter(j=>j[6].toLowerCase().indexOf(h)>-1)}},{label:"Address",value:n.value[33],editable:!1},{label:"Per-Diem",value:n.value[65]?`Amount: $${Number(n.value[67]).toFixed(2)}
<br>
            Rules: ${n.value[66]?n.value[66]:"N/A"}
<br>
            Miles: ${n.value[99]?n.value[99]:"N/A"}
<br>
            Approval: ${n.value[98]?n.value[98]:"N/A"}
<br>
            DL/ID: ${n.value[100]?n.value[100]:"N/A"}
<br>
            Map: ${n.value[101]?n.value[101]:"N/A"}`:"",editable:!1,hide:!n.value[65]},{label:"Notes",value:n.value[299]?n.value[299]:"N/A",editable:!1},{label:"",value:"",editable:!1},{label:"Submitted By",value:n.value[4],editable:!1}]:[]);return{hireRequestData:n,tab:o,back:Q,showAddNames:d,showAddJobs:t,namesAdded:L,details:pe,viewProject:C,actions:e,navs:a,jobsAdded:D,jobUpdated:I,getUserType:R,cancelRequest:f}}},ss={key:0,class:"q-pa-sm"},os={class:"row"},ls={class:"col-12 col-md-6"},ns={class:"col-12 col-md-6"},rs={class:"row"},is={class:"col-12 col-md-4 q-pr-sm"},us={class:"col-12 col-md-8 q-pl-sm"};function ds(e,a,d,t,m,b){const s=E("details-card"),o=E("classifications-tab"),p=E("names-tab"),N=E("offers-tab"),i=E("pipeline-tab"),g=E("names-form"),R=E("classification-form"),S=E("cancelHireRequest");return u(),w(Ue,{style:{"max-width":"100vw"}},{default:r(()=>[t.hireRequestData[3]?(u(),_("div",ss,[l(Y,{flat:""},{default:r(()=>[l(T,{class:"q-pa-none"},{default:r(()=>[c("div",os,[c("div",ls,[l(te,{class:"q-pt-none",align:"left"},{default:r(()=>[l(P,{label:"Go Back",color:"secondary",icon:"keyboard_return",onClick:t.back},null,8,["onClick"])]),_:1})]),c("div",ns,[t.getUserType==="Project User"?(u(),w(te,{key:0,class:"q-pt-none",align:"right"},{default:r(()=>[e.$can("manage","projectRequests")&&(t.hireRequestData[14]==="Pending"||t.hireRequestData[14]==="Open")||e.$can("manage","nameRequests")&&t.hireRequestData[14]!=="Closed"&&t.hireRequestData[282]!=="Open"||e.$can("manage","projectRequests")&&!e.$can("read","hireRequests")&&t.hireRequestData[14]==="Pending"?(u(),w(Pe,{key:0,modelValue:t.actions,"onUpdate:modelValue":a[3]||(a[3]=f=>t.actions=f),square:"",color:"accent",icon:"keyboard_arrow_left",direction:"left",label:"Actions",padding:"sm"},{default:r(()=>[e.$can("manage","projectRequests")&&t.hireRequestData[14]==="Pending"?(u(),w(ne,{key:0,label:"Add Classifications",color:"primary",icon:"add",onClick:a[0]||(a[0]=f=>t.showAddJobs=!0)})):k("",!0),e.$can("manage","nameRequests")&&(t.hireRequestData[14]==="Pending"||t.hireRequestData[14]==="Open")&&t.hireRequestData[282]!=="Open"?(u(),w(ne,{key:1,label:"Add Names to Request",color:"accent",icon:"person_add",onClick:a[1]||(a[1]=f=>t.showAddNames=!0)})):k("",!0),e.$can("manage","projectRequests")&&(t.hireRequestData[14]==="Pending"||t.hireRequestData[14]==="Open")?(u(),w(ne,{key:2,label:"Close Hire Request",color:"dark",icon:"cancel",onClick:a[2]||(a[2]=f=>t.cancelRequest=!0)})):k("",!0)]),_:1},8,["modelValue"])):k("",!0)]),_:1})):t.getUserType==="QuickBase User"?(u(),w(te,{key:1,class:"q-pt-none",align:"right"},{default:r(()=>[l(Pe,{modelValue:t.actions,"onUpdate:modelValue":a[7]||(a[7]=f=>t.actions=f),square:"",color:"accent",icon:"keyboard_arrow_left",direction:"left",label:"Actions",padding:"sm"},{default:r(()=>[e.$can("manage","projectRequests")&&(t.hireRequestData[14]==="Open"||t.hireRequestData[14]==="Pending")?(u(),w(ne,{key:0,label:"Add Classifications",color:"primary",icon:"add",onClick:a[4]||(a[4]=f=>t.showAddJobs=!0)})):k("",!0),e.$can("manage","nameRequests")&&(t.hireRequestData[14]==="Open"||t.hireRequestData[14]==="Pending")?(u(),w(ne,{key:1,label:"Add Names to Request",color:"accent",icon:"person_add",onClick:a[5]||(a[5]=f=>t.showAddNames=!0)})):k("",!0),e.$can("manage","projectRequests")&&(t.hireRequestData[14]==="Open"||t.hireRequestData[14]==="Pending")?(u(),w(ne,{key:2,label:"Close Hire Request",color:"dark",icon:"cancel",onClick:a[6]||(a[6]=f=>t.cancelRequest=!0)})):k("",!0)]),_:1},8,["modelValue"])]),_:1})):k("",!0)])])]),_:1})]),_:1}),c("div",rs,[c("div",is,[l(s,{details:t.details,title:"Details"},null,8,["details"])]),c("div",us,[l(la,{class:"q-py-xs bg-info text-white shadow-2 rounded-borders",align:"left",modelValue:t.tab,"onUpdate:modelValue":a[8]||(a[8]=f=>t.tab=f),dense:"","indicator-color":"accent","outside-arrows":"","mobile-arrows":"","inline-label":""},{default:r(()=>[l(ve,{name:0,label:"Classifications"}),l(ve,{name:1,label:"Names"}),t.hireRequestData[14]!=="Pending"?(u(),w(ve,{key:0,name:2,label:"Offers"})):k("",!0),t.hireRequestData[14]!=="Pending"?(u(),w(ve,{key:1,name:3,label:"Pipeline"})):k("",!0)]),_:1},8,["modelValue"]),l(oa,{modelValue:t.tab,"onUpdate:modelValue":a[9]||(a[9]=f=>t.tab=f),animated:"",class:"q-px-none"},{default:r(()=>[l(ge,{class:"q-px-xs",name:0},{default:r(()=>[t.hireRequestData[3]?(u(),w(o,{key:0,data:t.hireRequestData},null,8,["data"])):k("",!0)]),_:1}),l(ge,{class:"q-px-xs",name:1},{default:r(()=>[l(p,{data:t.hireRequestData},null,8,["data"])]),_:1}),l(ge,{class:"q-px-xs",name:2},{default:r(()=>[l(N,{data:t.hireRequestData.offers},null,8,["data"])]),_:1}),l(ge,{class:"q-px-xs",name:3},{default:r(()=>[l(i,{request:t.hireRequestData},null,8,["request"])]),_:1})]),_:1},8,["modelValue"])])]),l(ye,{persistent:"",modelValue:t.showAddNames,"onUpdate:modelValue":a[11]||(a[11]=f=>t.showAddNames=f)},{default:r(()=>[l(Y,{flat:"",style:{width:"500px"}},{default:r(()=>[l(T,{class:"q-pa-none"},{default:r(()=>[l(g,{onCloseNames:a[10]||(a[10]=f=>t.showAddNames=!1),onNamesAdded:t.namesAdded,request:t.hireRequestData},null,8,["onNamesAdded","request"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(ye,{persistent:"",modelValue:t.showAddJobs,"onUpdate:modelValue":a[13]||(a[13]=f=>t.showAddJobs=f)},{default:r(()=>[l(Y,{flat:"",style:{width:"500px"}},{default:r(()=>[l(T,{class:"q-pa-none"},{default:r(()=>[l(R,{hideInstructions:!0,request:t.hireRequestData,onCloseJobs:a[12]||(a[12]=f=>t.showAddJobs=!1),onJobsAdded:t.jobsAdded,onJobUpdated:t.jobUpdated},null,8,["request","onJobsAdded","onJobUpdated"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):k("",!0),t.hireRequestData[3]?(u(),w(S,{key:1,request:t.hireRequestData,modelValue:t.cancelRequest,"onUpdate:modelValue":a[14]||(a[14]=f=>t.cancelRequest=f)},null,8,["request","modelValue"])):k("",!0)]),_:1})}var xs=F(ts,[["render",ds]]);export{xs as default};
