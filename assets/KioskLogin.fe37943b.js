import{c4 as U,r as g,c as w,z as A,am as D,bh as t,d as s,c2 as p,cB as h,a6 as i,b as _,bX as v,cC as L,c6 as x,C as c,aa as S,c3 as z,G as E,bE as $,bD as I,cD as N}from"./index.5a62fd4c.js";import{u as j}from"./use-quasar.d7b5c1f7.js";import{c as q,u as C}from"./array.1ff2ee39.js";import{d as F,q as G}from"./quickbase.af2656ef.js";const H=c("div",{class:"text-h6"},"Hiring Center Kiosk Login",-1),O={class:"divider"},X={class:"divider-text"},J={class:"text-h6"},se={__name:"KioskLogin",setup(T){const{screen:n,notify:u}=j(),B=U(),{fetchKioskAccount:Q,setBookmarks:V,setBookmarksOnly:K}=F(),d=g(!0),f=g(null),o=g(!1),R=w(()=>q().email().required().nullable()),M=w(()=>q().required().nullable()),{errorMessage:k,value:r}=C("email",R),{errorMessage:b,value:l}=C("password",M),y=async()=>{if(r.value===""||l.value===""||!r.value||!l.value){u({type:"negative",message:"Email and password Required!",timeout:7e3,position:n.lt.md?"top":"top-right"});return}o.value=!0;const m={email:r.value,password:l.value};try{const e=await G.nativeQuickbaseLogin(m);if((await Q(e,!0)).length===0){u({type:"negative",message:"Valid Kiosk Account Required!",timeout:7e3,position:n.lt.md?"top":"top-right"}),o.value=!1;return}else o.value=!1,f.value.hide()}catch(e){o.value=!1;const{response:a}=e;a&&a.data.errtext&&a.data.errdetail?u({type:"negative",message:a.data.errdetail,timeout:7e3,position:n.lt.md?"top":"top-right"}):(console.log(e),u({type:"negative",message:"An error occurred, please try again later",timeout:7e3,position:n.lt.md?"top":"top-right"}))}},P=()=>{V(null,!0),K(!0,!0),B.push({name:"bookmarks"})};return(m,e)=>(A(),D(N,E({persistent:""},m.$attrs,{ref_key:"dialog",ref:f,onSubmit:e[3]||(e[3]=$(()=>{},["prevent"])),onKeyup:I(y,["enter"])}),{default:t(()=>[s(z,{style:{"min-width":"350px"}},{default:t(()=>[s(p,null,{default:t(()=>[H]),_:1}),s(p,{class:"q-pt-none"},{default:t(()=>[s(h,{for:"email-kiosk",style:{"padding-bottom":"0px"},autocomplete:"username",clearable:"",outlined:"",modelValue:i(r),"onUpdate:modelValue":e[0]||(e[0]=a=>_(r)?r.value=a:null),type:"email",label:"Email",tabindex:"1",error:!!i(k),"error-message":i(k)},{prepend:t(()=>[s(v,{name:"email"})]),_:1},8,["modelValue","error","error-message"])]),_:1}),s(p,{class:"q-pt-none"},{default:t(()=>[s(h,{for:"password-kiosk",class:"q-mt-lg",outlined:"",modelValue:i(l),"onUpdate:modelValue":e[2]||(e[2]=a=>_(l)?l.value=a:null),type:d.value?"password":"text",label:"Password",autocomplete:"current-password",tabindex:"2",error:!!i(b),"error-message":i(b)},{append:t(()=>[s(v,{name:d.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[1]||(e[1]=a=>d.value=!d.value)},null,8,["name"])]),prepend:t(()=>[s(v,{name:"lock"})]),_:1},8,["modelValue","type","error","error-message"])]),_:1}),s(L,{align:"right",class:"text-primary"},{default:t(()=>[s(x,{label:"Login",color:"primary",size:"lg",class:"full-width text-white",onClick:y,loading:o.value,disabled:o.value},null,8,["loading","disabled"])]),_:1}),c("div",O,[c("div",X,S(m.$t("or")),1)]),s(p,{align:"center"},{default:t(()=>[c("div",J,[s(x,{label:"Bookmarks",color:"primary",size:"lg",class:"full-width text-white",onClick:P})])]),_:1})]),_:1})]),_:1},16,["onKeyup"]))}};export{se as _};
