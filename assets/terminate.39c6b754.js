var Ne=Object.defineProperty,$e=Object.defineProperties;var Re=Object.getOwnPropertyDescriptors;var de=Object.getOwnPropertySymbols;var Ee=Object.prototype.hasOwnProperty,Qe=Object.prototype.propertyIsEnumerable;var me=(e,t,p)=>t in e?Ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:p}):e[t]=p,T=(e,t)=>{for(var p in t||(t={}))Ee.call(t,p)&&me(e,p,t[p]);if(de)for(var p of de(t))Qe.call(t,p)&&me(e,p,t[p]);return e},x=(e,t)=>$e(e,Re(t));import{r as M,c as y,g as Ve,cI as Ie,cb as he,cF as ze,h as K,bP as Pe,cJ as je,cN as Oe,cK as Be,cM as Te,cO as Le,dp as Ke,cP as ce,dq as Me,d4 as We,cL as He,cB as Ye,k as Se,bL as qe,w as Fe,_ as we,A as $,B as z,d as a,bi as m,cz as re,cw as ue,D as n,ab as L,bJ as _,bH as J,au as Y,cx as pe,bO as ee,F as fe,aY as Xe,bK as ve,ao as Ae,dr as f,cy as Je,bF as Ge,bM as Ze,aZ as xe,an as be}from"./index.e59a70b7.js";import{Q as _e}from"./QPage.33cc8e67.js";import{u as Ce}from"./use-quasar.fd84a131.js";import{u as De}from"./useQuerySaver.e863619d.js";import{q as Ue}from"./quickbase.c0a4ee71.js";import{u as ke}from"./dataStore.11b538de.js";import{Q as te}from"./QSelect.c16b42ed.js";import{Q as et}from"./QChip.564776f1.js";import{Q as tt}from"./QItemLabel.ca6bf70a.js";import{Q as lt}from"./QList.29ca1ca1.js";import{Q as at}from"./QForm.1910ac9d.js";import{a as le,f as ot,c as ge,e as ae,b as nt,u as D}from"./array.9733524d.js";import{dayjs as ye}from"./dayjs.126d3740.js";import{s as st}from"./submitRelease.22c809cb.js";import{u as it}from"./dataStore.ebf099da.js";import"./_commonjsHelpers.a26ce4be.js";import"./index.7dbe61ef.js";import"./localForage.cd6b7cb1.js";import"./i18n.c7f06f48.js";import"./api.5c8ce8a2.js";import"./QMenu.bb86617b.js";import"./position-engine.98e2e208.js";import"./selection.0080c2a7.js";import"./rtl.cf9bbe47.js";function H(e,t,p,S){const u=[];return e.forEach(v=>{S(v)===!0?u.push(v):t.push({failedPropValidation:p,file:v})}),u}function oe(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),he(e)}const rt={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},ut=["rejected"];function dt({editable:e,dnd:t,getFileInput:p,addFilesToQueue:S}){const{props:u,emit:v,proxy:l}=Ve(),V=M(null),U=y(()=>u.accept!==void 0?u.accept.split(",").map(o=>(o=o.trim(),o==="*"?"*/":(o.endsWith("/*")&&(o=o.slice(0,o.length-1)),o.toUpperCase()))):null),R=y(()=>parseInt(u.maxFiles,10)),E=y(()=>parseInt(u.maxTotalSize,10));function q(o){if(e.value)if(o!==Object(o)&&(o={target:null}),o.target!==null&&o.target.matches('input[type="file"]')===!0)o.clientX===0&&o.clientY===0&&Ie(o);else{const A=p();A&&A!==o.target&&A.click(o)}}function Q(o){e.value&&o&&S(null,o)}function P(o,A,j,O){let d=Array.from(A||o.target.files);const F=[],k=()=>{F.length>0&&v("rejected",F)};if(u.accept!==void 0&&U.value.indexOf("*/")===-1&&(d=H(d,F,"accept",c=>U.value.some(h=>c.type.toUpperCase().startsWith(h)||c.name.toUpperCase().endsWith(h))),d.length===0))return k();if(u.maxFileSize!==void 0){const c=parseInt(u.maxFileSize,10);if(d=H(d,F,"max-file-size",h=>h.size<=c),d.length===0)return k()}if(u.multiple!==!0&&d.length>0&&(d=[d[0]]),d.forEach(c=>{c.__key=c.webkitRelativePath+c.lastModified+c.name+c.size}),O===!0){const c=j.map(h=>h.__key);d=H(d,F,"duplicate",h=>c.includes(h.__key)===!1)}if(d.length===0)return k();if(u.maxTotalSize!==void 0){let c=O===!0?j.reduce((h,X)=>h+X.size,0):0;if(d=H(d,F,"max-total-size",h=>(c+=h.size,c<=E.value)),d.length===0)return k()}if(typeof u.filter=="function"){const c=u.filter(d);d=H(d,F,"filter",h=>c.includes(h))}if(u.maxFiles!==void 0){let c=O===!0?j.length:0;if(d=H(d,F,"max-files",()=>(c++,c<=R.value)),d.length===0)return k()}if(k(),d.length>0)return d}function I(o){oe(o),t.value!==!0&&(t.value=!0)}function s(o){he(o),(o.relatedTarget!==null||ze.is.safari!==!0?o.relatedTarget!==V.value:document.elementsFromPoint(o.clientX,o.clientY).includes(V.value)===!1)===!0&&(t.value=!1)}function b(o){oe(o);const A=o.dataTransfer.files;A.length>0&&S(null,A),t.value=!1}function C(o){if(t.value===!0)return K("div",{ref:V,class:`q-${o}__dnd absolute-full`,onDragenter:oe,onDragover:oe,onDragleave:s,onDrop:b})}return Object.assign(l,{pickFiles:q,addFiles:Q}),{pickFiles:q,addFiles:Q,onDragover:I,onDragleave:s,processFiles:P,getDndNode:C,maxFilesNumber:R,maxTotalSizeNumber:E}}var mt=Pe({name:"QFile",inheritAttrs:!1,props:x(T(T(T({},je),Oe),rt),{modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]}),emits:[...Be,...ut],setup(e,{slots:t,emit:p,attrs:S}){const{proxy:u}=Ve(),v=Te(),l=M(null),V=M(!1),U=Le(e),{pickFiles:R,onDragover:E,onDragleave:q,processFiles:Q,getDndNode:P}=dt({editable:v.editable,dnd:V,getFileInput:G,addFilesToQueue:Z}),I=Ke(e),s=y(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),b=y(()=>ce(s.value)),C=y(()=>s.value.map(r=>r.name).join(", ")),o=y(()=>Me(s.value.reduce((r,w)=>r+w.size,0))),A=y(()=>({totalSize:o.value,filesNumber:s.value.length,maxFiles:e.maxFiles})),j=y(()=>x(T({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:U.value},S),{id:v.targetUid.value,disabled:v.editable.value!==!0})),O=y(()=>"q-file q-field--auto-height"+(V.value===!0?" q-file--dnd":"")),d=y(()=>e.multiple===!0&&e.append===!0);function F(r){const w=s.value.slice();w.splice(r,1),c(w)}function k(r){const w=s.value.findIndex(r);w>-1&&F(w)}function c(r){p("update:modelValue",e.multiple===!0?r:r[0])}function h(r){r.keyCode===13&&Ye(r)}function X(r){(r.keyCode===13||r.keyCode===32)&&R(r)}function G(){return l.value}function Z(r,w){const i=Q(r,w,s.value,d.value),g=G();g!=null&&(g.value=""),i!==void 0&&((e.multiple===!0?e.modelValue&&i.every(N=>s.value.includes(N)):e.modelValue===i[0])||c(d.value===!0?s.value.concat(i):i))}function B(){return[K("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function ne(){if(t.file!==void 0)return s.value.length===0?B():s.value.map((w,i)=>t.file({index:i,file:w,ref:this}));if(t.selected!==void 0)return s.value.length===0?B():t.selected({files:s.value,ref:this});if(e.useChips===!0)return s.value.length===0?B():s.value.map((w,i)=>K(et,{key:"file-"+i,removable:v.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{F(i)}},()=>K("span",{class:"ellipsis",textContent:w.name})));const r=e.displayValue!==void 0?e.displayValue:C.value;return r.length>0?[K("div",{class:e.inputClass,style:e.inputStyle,textContent:r})]:B()}function se(){const r=x(T(T({ref:l},j.value),I.value),{class:"q-field__input fit absolute-full cursor-pointer",onChange:Z});return e.multiple===!0&&(r.multiple=!0),K("input",r)}return Object.assign(v,{fieldClass:O,emitValue:c,hasValue:b,inputRef:l,innerValue:s,floatingLabel:y(()=>b.value===!0||ce(e.displayValue)),computedCounter:y(()=>{if(e.counterLabel!==void 0)return e.counterLabel(A.value);const r=e.maxFiles;return`${s.value.length}${r!==void 0?" / "+r:""} (${o.value})`}),getControlChild:()=>P("file"),getControl:()=>{const r={ref:v.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return v.editable.value===!0&&Object.assign(r,{onDragover:E,onDragleave:q,onKeydown:h,onKeyup:X}),K("div",r,[se()].concat(ne()))}}),Object.assign(u,{removeAtIndex:F,removeFile:k,getNativeElement:()=>l.value}),We(u,"nativeEl",()=>l.value),He(v)}});const ct=Se({emits:["releaseSubmitted"],props:{record:Object,employee:Object},setup(e,{emit:t}){const p=M(!1),S=M(null),u=M([]),v=Ce(),l=qe(),{getTermReasons:V,setTermReasons:U}=ke(),{getAssignments:R,fetchAssignments:E}=it(),q=y(()=>le({selection:le().required().nullable().label("Reason"),effective:ot().required().label("Last Day On Site"),category:ge().nullable(),attendance:ae().required().label("Attendance"),capability:ae().required().label("Capability"),attitude:ae().required().label("Attitude"),promotable:ae().required().label("Promotability"),comments:ge().nullable().label("Comments"),equipment:le().required().nullable().label("Equipment Returned"),supervisor:le().nullable().label("Supervisor")})),{errors:Q,handleSubmit:P,handleReset:I}=nt({validationSchema:q,initialValues:{}}),{value:s}=D("selection"),{value:b}=D("effective"),{value:C}=D("category"),{value:o}=D("attachments"),{value:A}=D("capability"),{value:j}=D("attendance"),{value:O}=D("attitude"),{value:d}=D("promotable"),{value:F}=D("comments"),{value:k}=D("equipment"),{value:c}=D("supervisor"),h=y(()=>{const i=V();return C.value?i.filter(g=>g[6]===C.value).sort((g,N)=>g[12]>N[12]?1:-1):i.sort((g,N)=>g[12]>N[12]?1:-1)}),X=P(async i=>{if(p.value&&u.value.length===0)v.dialog({title:"Alert",message:"Supporting documents are required for this reason!"});else{const g={capability:i.capability,attendance:i.attendance,attitude:i.attitude,promotable:i.promotable,comments:i.comments};v.dialog({title:"Confirm",message:"Are you sure you want to release this employee?",cancel:!0,persistent:!0}).onOk(async()=>{try{const{release:N,employee:W,assignment:ie}=await st({employee:e.employee,assignment:e.record,values:i,effectiveNow:!B.value,attachments:u.value,ratings:g,supervisor:i.supervisor});t("releaseSubmitted",{release:N,employee:W,assignment:ie,effectiveNow:!B.value}),I()}catch{v.notify({type:"negative",message:"Cannot submit release."})}})}}),G=()=>{v.dialog({title:"Confirm",message:"Are you sure you want to cancel?",cancel:!0,persistent:!0}).onOk(()=>{I(),l.go(-1)})};Fe(s,(i,g)=>{i&&i[19]?(p.value=!0,o.value=!0):(o.value=!1,p.value=!1)});const Z=y(()=>{const i=V();return[...new Map(i.map(g=>[g[6],g[6]])).values()]}),B=y(()=>b.value&&b.value!==""?ye().isBefore(ye(b.value)):!1),ne=i=>new Promise((g,N)=>{const W=new FileReader;W.readAsDataURL(i),W.onload=()=>g(W.result.replace(/^data:.+;base64,/,"")),W.onerror=ie=>N(ie)}),se=()=>{S.value&&S.value.forEach(async i=>{const g={6:{value:await ne(i),filename:i.name},7:{value:i.name}};u.value.push(g),S.value=null}),console.log(u.value)},r=i=>{console.log(u.value[i]),u.value.splice(i,1)};return(async()=>{if(V().length===0){const{data:i}=await Ue.fetchFromHiringApp({fields:[De({type:"termReasons",query:"{'11'.EX.'true'}"})]});U({reasons:i})}E({projectId:e.record[74]})})(),{props:e,options:h,primaryReasons:Z,category:C,selection:s,effective:b,attachments:o,capability:A,attendance:j,attitude:O,promotable:d,comments:F,equipment:k,supervisor:c,attachmentsRequired:p,fileAttachment:S,attachedFiles:u,submit:X,formErrors:Q,handleReset:I,cancelRelease:G,showFiles:se,deleteFile:r,getAssignments:R}}}),pt={class:"row"},ft={class:"col-12 col-md-4 q-px-sm"},vt=n("div",{class:"text-caption"},"Is this release voluntary or involuntary?",-1),bt={class:"text-caption"},gt={class:"col-12 col-md-4 q-pl-xs q-pr-sm"},yt=n("div",{class:"text-caption"},"What is the reason for this release?",-1),Vt={class:"text-caption"},ht={class:"row"},St={class:"col-12 col-md-4 q-pl-xs q-pr-sm"},qt=n("div",{class:"text-caption"},"When is the employee's last day on site?",-1),Ft={class:"text-caption"},wt={class:"col-12 col-md-4 q-pl-xs q-pr-sm"},At=n("div",{class:"text-caption"},"Has all Company Equipment been returned?",-1),Ct={class:"text-caption"},Dt={class:"row items-top justify-between q-mt-sm"},Ut={class:"col-4 q-pl-xs q-pr-sm"},kt={key:0,class:"text-body2 text-negative text-italic"},Nt={key:0},$t={key:1},Rt={key:1,class:"text-body2 text-dark text-italic"},Et=n("span",null,"**Supporting documents are optional for this reason.",-1),Qt=[Et],It={key:0,class:"col-6 q-pl-xs q-pr-sm"},zt=n("div",{class:"text-body1 text-info q-mb-sm"},"Attached Documents",-1),Pt={class:"row q-my-md"},jt={class:"col-12"},Ot=n("div",{class:"q-pa-sm"},[n("div",{class:"text-h6 text-bold"},"CAAP Rating"),n("div",{class:"text-body1 text-dark text-italic"},"Capability, Attendance, Attitude, and Promotability"),n("div",{class:"text-body2 text-accent q-mt-sm"},"Select how much you agree with each of the following statements.")],-1),Bt={class:"q-pb-sm"},Tt=n("div",{class:"text-body2 text-info text-bold q-mb-sm"},"This employee is capable of performing their assigned job.",-1),Lt={class:"q-pb-sm"},Kt=n("div",{class:"text-body2 text-info text-bold q-mb-sm"},"This employee regularly shows up to work on time.",-1),Mt={class:"q-pb-sm"},Wt=n("div",{class:"text-body2 text-info text-bold q-mb-sm"},"This employee has a good attitude.",-1),Ht={class:"q-pb-sm"},Yt=n("div",{class:"text-body2 text-info text-bold q-mb-sm"},"I am confident that this employee can be promoted in the future.",-1),Xt={class:"row q-mt-md"},Jt={class:"col-12 col-md-5"},Gt=n("div",{class:"text-body2 text-weight-bold text-info"},[Y(" Who conducted this evaluation? "),n("span",{class:"text-italic text-weight-light text-dark"},"(recommended)")],-1),Zt={class:"text-caption"},xt={class:"row q-py-sm"},_t={class:"col-12"};function el(e,t,p,S,u,v){return $(),z("div",null,[a(at,{onSubmit:Ge(e.submit,["prevent"])},{default:m(()=>[a(re,null,{default:m(()=>[a(ue,null,{default:m(()=>[n("div",pt,[n("div",ft,[vt,a(te,{dense:"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.category,"onUpdate:modelValue":t[0]||(t[0]=l=>e.category=l),options:e.primaryReasons},{error:m(()=>[n("div",bt,L(e.formErrors.selection),1)]),"no-option":m(()=>[a(_,null,{default:m(()=>[a(J,{class:"text-grey"},{default:m(()=>[Y(" No Options Available ")]),_:1})]),_:1})]),_:1},8,["modelValue","options"])]),n("div",gt,[yt,a(te,{dense:"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.selection,"onUpdate:modelValue":t[1]||(t[1]=l=>e.selection=l),options:e.options,"option-label":"12","display-value":`${e.selection?e.selection[12]:""}`,"bottom-slots":"",error:!!e.formErrors.selection,disable:!e.category},{error:m(()=>[n("div",Vt,L(e.formErrors.selection),1)]),"no-option":m(()=>[a(_,null,{default:m(()=>[a(J,{class:"text-grey"},{default:m(()=>[Y(" No Options Available ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","display-value","error","disable"])])]),n("div",ht,[n("div",St,[qt,a(pe,{dense:"",type:"date",modelValue:e.effective,"onUpdate:modelValue":t[2]||(t[2]=l=>e.effective=l),error:!!e.formErrors.effective,"bottom-slots":""},{error:m(()=>[n("div",Ft,L(e.formErrors.effective),1)]),_:1},8,["modelValue","error"])]),n("div",wt,[At,a(te,{dense:"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.equipment,"onUpdate:modelValue":t[3]||(t[3]=l=>e.equipment=l),options:[{value:!0,label:"Yes"},{value:!1,label:"No"},{value:!0,label:"None Issued"}],"bottom-slots":"",error:!!e.formErrors.equipment},{error:m(()=>[n("div",Ct,L(e.formErrors.equipment),1)]),_:1},8,["modelValue","error"])])]),n("div",Dt,[n("div",Ut,[a(mt,{dense:"","bottom-slots":"",modelValue:e.fileAttachment,"onUpdate:modelValue":t[4]||(t[4]=l=>e.fileAttachment=l),multiple:"",append:"",label:"Attach Supporting Documents"},{after:m(()=>[a(ee,{dense:"",color:"info",round:"",flat:"",icon:"cloud_upload",onClick:e.showFiles},null,8,["onClick"])]),_:1},8,["modelValue"]),e.attachmentsRequired?($(),z("div",kt,[Y("!! "),e.selection[12].toLowerCase().includes("attendance")?($(),z("span",Nt,"Supporting attendance records must be attached.")):($(),z("span",$t,"Supporting documents are required for this reason."))])):($(),z("div",Rt,Qt))]),e.attachedFiles.length>0?($(),z("div",It,[zt,a(lt,{dense:""},{default:m(()=>[($(!0),z(fe,null,Xe(e.attachedFiles,(l,V)=>($(),z(fe,{key:l},[a(_,null,{default:m(()=>[a(J,null,{default:m(()=>[a(tt,null,{default:m(()=>[Y(L(V+1)+". "+L(l[6].filename),1)]),_:2},1024)]),_:2},1024),a(J,{side:""},{default:m(()=>[a(ee,{color:"accent",round:"",flat:"",class:"cursor-pointer",icon:"delete",size:"md",onClick:U=>e.deleteFile(V)},null,8,["onClick"])]),_:2},1024)]),_:2},1024),a(ve)],64))),128))]),_:1})])):Ae("",!0)])]),_:1})]),_:1}),a(ve),n("div",Pt,[n("div",jt,[Ot,a(re,null,{default:m(()=>[a(ue,null,{default:m(()=>[n("div",null,[n("div",Bt,[Tt,a(f,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[5]||(t[5]=l=>e.capability=l),val:"1",label:"Strongly Disagree"},null,8,["modelValue"]),a(f,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[6]||(t[6]=l=>e.capability=l),val:"2",label:"Disagree"},null,8,["modelValue"]),a(f,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[7]||(t[7]=l=>e.capability=l),val:"3",label:"Neutral"},null,8,["modelValue"]),a(f,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[8]||(t[8]=l=>e.capability=l),val:"4",label:"Agree"},null,8,["modelValue"]),a(f,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[9]||(t[9]=l=>e.capability=l),val:"5",label:"Strongly Agree"},null,8,["modelValue"]),a(f,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[10]||(t[10]=l=>e.capability=l),val:"0",label:"I Do Not Know"},null,8,["modelValue"])]),n("div",Lt,[Kt,a(f,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[11]||(t[11]=l=>e.attendance=l),val:"1",label:"Strongly Disagree"},null,8,["modelValue"]),a(f,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[12]||(t[12]=l=>e.attendance=l),val:"2",label:"Disagree"},null,8,["modelValue"]),a(f,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[13]||(t[13]=l=>e.attendance=l),val:"3",label:"Neutral"},null,8,["modelValue"]),a(f,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[14]||(t[14]=l=>e.attendance=l),val:"4",label:"Agree"},null,8,["modelValue"]),a(f,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[15]||(t[15]=l=>e.attendance=l),val:"5",label:"Strongly Agree"},null,8,["modelValue"]),a(f,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[16]||(t[16]=l=>e.attendance=l),val:"0",label:"I Do Not Know"},null,8,["modelValue"])]),n("div",Mt,[Wt,a(f,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[17]||(t[17]=l=>e.attitude=l),val:"1",label:"Strongly Disagree"},null,8,["modelValue"]),a(f,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[18]||(t[18]=l=>e.attitude=l),val:"2",label:"Disagree"},null,8,["modelValue"]),a(f,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[19]||(t[19]=l=>e.attitude=l),val:"3",label:"Neutral"},null,8,["modelValue"]),a(f,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[20]||(t[20]=l=>e.attitude=l),val:"4",label:"Agree"},null,8,["modelValue"]),a(f,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[21]||(t[21]=l=>e.attitude=l),val:"5",label:"Strongly Agree"},null,8,["modelValue"]),a(f,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[22]||(t[22]=l=>e.attitude=l),val:"0",label:"I Do Not Know"},null,8,["modelValue"])]),n("div",Ht,[Yt,a(f,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[23]||(t[23]=l=>e.promotable=l),val:"1",label:"Strongly Disagree"},null,8,["modelValue"]),a(f,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[24]||(t[24]=l=>e.promotable=l),val:"2",label:"Disagree"},null,8,["modelValue"]),a(f,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[25]||(t[25]=l=>e.promotable=l),val:"3",label:"Neutral"},null,8,["modelValue"]),a(f,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[26]||(t[26]=l=>e.promotable=l),val:"4",label:"Agree"},null,8,["modelValue"]),a(f,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[27]||(t[27]=l=>e.promotable=l),val:"5",label:"Strongly Agree"},null,8,["modelValue"]),a(f,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[28]||(t[28]=l=>e.promotable=l),val:"0",label:"I Do Not Know"},null,8,["modelValue"])])]),n("div",Xt,[n("div",Jt,[Gt,a(te,{dense:"",clearable:"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.supervisor,"onUpdate:modelValue":t[29]||(t[29]=l=>e.supervisor=l),options:e.getAssignments(e.props.record[74]).length>0?e.getAssignments(e.props.record[74]).filter(l=>l[3]!==e.props.record[3]).sort((l,V)=>l[75]>V[75]?1:-1):[],"option-label":l=>`${l[75]} - ${l[104]}`,"display-value":`${e.supervisor?e.supervisor[75]:""}`,"bottom-slots":"",error:!!e.formErrors.supervisor,hint:"Ex: Employee's Supervisor"},{error:m(()=>[n("div",Zt,L(e.formErrors.supervisor),1)]),"no-option":m(()=>[a(_,null,{default:m(()=>[a(J,{class:"text-grey"},{default:m(()=>[Y(" No Options Available ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","option-label","display-value","error"])])])]),_:1})]),_:1})])]),n("div",xt,[n("div",_t,[a(pe,{filled:"",type:"textarea",modelValue:e.comments,"onUpdate:modelValue":t[30]||(t[30]=l=>e.comments=l),label:"Comments"},null,8,["modelValue"])])]),a(Je,{align:"right"},{default:m(()=>[a(ee,{color:"info",label:"Submit",type:"submit"}),a(ee,{color:"secondary",label:"Cancel",onClick:e.cancelRelease},null,8,["onClick"])]),_:1})]),_:1},8,["onSubmit"])])}var tl=we(ct,[["render",el]]);const ll=Se({components:{ReleaseForm:tl},setup(){const e=M(0),t=Ze(),p=qe(),S=Ce(),{getEmployee:u,getAssignmentsByEmployee:v,setAssignmentsByEmployee:l,setEmployees:V,setReleases:U,setReleasesByAssignment:R,setReleasesByEmployee:E}=ke(),q=y(()=>u(t.params.id)),Q=y(()=>q.value?v(q.value[3]):null),P=async()=>{if(!Q.value&&q.value[577]){const{data:s}=await Ue.fetchFromHiringApp({fields:[De({type:"assignments",query:"",id:q.value[577]})]});console.log(s),l({id:q.value[3],data:s})}};return Fe(q,(s,b)=>{s&&P()}),{employee:q,assignment:Q,releaseSubmitted:({employee:s,release:b,assignment:C,effectiveNow:o})=>{S.notify({type:"positive",message:"Release successfully submitted."}),o?(s[581]=b[3],U({id:b[3],data:b}),V({id:s[3],data:s}),l({id:s[3],assignment:C}),R({id:C[3],data:b}),E({id:s[3],data:b})):(s[581]=b[3],V({id:s[3],data:s}),U({id:b[3],data:b}),R({id:C[3],data:b}),E({id:s[3],data:b})),p.replace({name:"view-ee-release",params:{id:s[3],release:b[3]}})},step:e}}}),al={class:"q-pa-sm"},ol={class:"row"},nl={class:"col-12"},sl=n("div",{class:"text-h6 text-weight-bold q-mb-md"},"Please complete the following to submit this release.",-1);function il(e,t,p,S,u,v){const l=xe("release-form");return $(),be(_e,{style:{"max-width":"100vw"}},{default:m(()=>[n("div",al,[n("div",ol,[n("div",nl,[a(re,{flat:""},{default:m(()=>[e.assignment?($(),be(ue,{key:0},{default:m(()=>[sl,a(l,{record:e.assignment,employee:e.employee,onReleaseSubmitted:e.releaseSubmitted},null,8,["record","employee","onReleaseSubmitted"])]),_:1})):Ae("",!0)]),_:1})])])])]),_:1})}var El=we(ll,[["render",il]]);export{El as default};
