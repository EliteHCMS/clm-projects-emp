import{l as A,r as P,c as y,_ as E,A as c,aq as h,br as n,d as a,cT as v,D as e,ac as o,bS as D,bW as L,ax as U,ar as w,B as g,F,b4 as W,cS as C,bt as oe,bR as ae,bP as V,bQ as le,dc as ne,bT as ie,w as de,cV as ce,bO as De,bU as xe,b5 as I,y as ke}from"./index.429672c4.js";import{Q as Re}from"./QPage.1c164a0a.js";import{u as re}from"./use-quasar.e6ca1583.js";import{u as z}from"./useQuerySaver.d29ff9ee.js";import{u as H,q as j}from"./app.d59c0f43.js";import{dayjs as x}from"./dayjs.cdbadc74.js";import{f as Ce,r as Ye,t as X,a as Se}from"./submitRelease.5541d898.js";import{a as ee,b as Te,u as Me}from"./checkTermStatus.6585589a.js";import{u as B}from"./dataStore.59ac3960.js";import{Q as me}from"./QTooltip.a483311b.js";import{Q as Ee}from"./QInnerLoading.d8d00bf0.js";import{o as pe,d as ue}from"./helpers.89f78de2.js";import{a as se}from"./syncEmployeeWithWorkday.a2432424.js";import{d as J}from"./decode.3998c82c.js";import{Q as O}from"./QRating.668eac5c.js";import{Q as _e}from"./QList.a027e3e6.js";import{a as Ne}from"./QSelect.4d6ed681.js";import{Q as Ie}from"./QForm.644d5019.js";import{a as Pe,u as Ae}from"./vee-validate.esm.217e8859.js";import{a as te}from"./array.59f93f43.js";import"./_commonjsHelpers.a26ce4be.js";import"./localForage.7b97ba34.js";import"./api.682a7e8f.js";import"./index.04bc0a32.js";import"./i18n.0152b37a.js";import"./dataStore.3d312598.js";import"./workdayAPI.2791dfac.js";import"./position-engine.daa72afe.js";import"./selection.fa3bc4cc.js";import"./workday.21ec7e65.js";import"./QChip.6eeb9910.js";import"./QMenu.c6a626a1.js";import"./rtl.b51694b1.js";const Le=A({props:{employee:Object,assignment:Object,release:Object},setup(s){const{getUserType:d}=H(),{updateViewedReleases:m,getReleases:t}=B(),f=P(!0),b=P(!0),i=y(()=>t(s.release[3])),_=y(()=>i.value&&i.value.employee?i.value.employee:null),k=y(()=>i.value&&i.value.assignment?i.value.assignment:null),M=y(()=>{if(!_.value||!_.value.workday)return[];{const{personalData:r}=_.value.workday;if(r){const{customIds:Y}=r.identificationData?r.identificationData:{customIds:[]};return Y}else return[]}}),u=async()=>{if(_.value){const{sync:r}=await se({clm:_.value});m({id:s.release[3],dataset:"employee",nested:!0,subset:"workday",data:r}),f.value=!1}else{const{data:r}=await j.fetchFromHiringApp({fields:[z({type:"employee",id:s.release[25]})]});if(r[207]===!1){const{sync:Y}=await se({clm:r});await m({id:s.release[3],dataset:"employee",data:r}),m({id:s.release[3],dataset:"employee",nested:!0,subset:"workday",data:Y})}else await m({id:s.release[3],dataset:"employee",data:r});f.value=!1}if(k.value)b.value=!1;else{const{data:r}=await j.fetchFromHiringApp({fields:[z({type:"rawAssignments",id:s.release[28]})]});m({id:s.release[3],dataset:"assignment",data:r}),b.value=!1}},T=r=>{if(!!r)return r[145].$d?x(r[145].$d).format("MM/DD/YYYY"):x(r[1].$d).format("MM/DD/YYYY")},$=({id:r,idType:Y})=>Y.includes("J&amp;E")?`${r.slice(1,4)} / ${r.slice(-5)}`:r;return u(),{dayjs:x,openWindow:pe,getUserType:d,employeeData:_,assignmentData:k,eeLoading:f,assignLoading:b,getArrivalDate:T,employeeCustomIds:M,decodeHTML:J,processCustomID:$}}}),Qe=e("div",{class:"text-primary text-h6 text-bold"},"Employee Information",-1),je={class:"row q-py-sm"},Be={class:"col-12 col-sm-3"},Oe=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Name")],-1),Ve={class:"text-body2 q-pl-md"},ze={class:"col-12 col-sm-3"},Ue=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Last 4 Digits of SS#")],-1),Fe={class:"text-body2 q-pl-md"},We={class:"col-12 col-sm-3"},He=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Phone")],-1),Je={class:"text-body2 q-pl-md"},Ke={class:"row q-py-sm"},Ge={class:"col-12 col-sm-3"},Xe={class:"text-body2"},Ze=e("span",{class:"text-bold q-mr-md"},"Workday Employee ID",-1),es={class:"text-body2 q-pl-md"},ss={class:"text-body2"},ts={class:"text-bold q-mr-md"},os={class:"text-body2 q-pl-md"},as={class:"row q-py-sm"},ls={class:"col-12 col-sm-3"},ns=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Arrival Date")],-1),is={class:"text-body2 q-pl-md"},ds={class:"col-12 col-sm-3"},cs=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Last Hire Date")],-1),rs={class:"text-body2 q-pl-md"},ms={class:"col-12 col-sm-3"},ps=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Last Day Worked")],-1),us={class:"text-body2 q-pl-md"},_s={class:"col-12 col-sm-3"},vs=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Effective Date")],-1),ys={class:"text-body2 q-pl-md"},hs={class:"row q-py-sm"},fs={class:"col-12 col-sm-4"},bs=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Job Site/ Location")],-1),$s={class:"text-body2 q-pl-md"},qs={class:"col-12 col-sm-4"},gs=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Job Title")],-1),ws={class:"text-body2 q-pl-md"},Ds={class:"col-12 col-sm-4"},xs=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Pay Rate")],-1),ks={class:"text-body2 q-pl-md"};function Rs(s,d,m,t,f,b){return c(),h(C,null,{default:n(()=>[a(v,{class:"text-center q-py-sm"},{default:n(()=>[Qe]),_:1}),!s.eeLoading&&!s.assignLoading?(c(),h(v,{key:0,class:"q-py-none"},{default:n(()=>[e("div",je,[e("div",Be,[Oe,e("div",Ve,[e("span",null,o(s.employeeData[22])+", "+o(s.employeeData[20]),1)])]),e("div",ze,[Ue,e("div",Fe,[e("span",null,o(s.employeeData[188].substring(s.employeeData[188].length-4)),1)])]),e("div",We,[He,e("div",Je,[e("span",null,o(s.employeeData[25]),1)])])]),a(D),e("div",Ke,[e("div",Ge,[e("div",Xe,[Ze,s.getUserType==="QuickBase User"?(c(),h(L,{key:0,dense:"",size:"sm",flat:"",icon:"open_in_new",color:"info",onClick:d[0]||(d[0]=i=>s.openWindow({url:s.employeeData[451]}))},{default:n(()=>[a(me,null,{default:n(()=>[U("Open in Workday")]),_:1})]),_:1})):w("",!0)]),e("div",es,[e("span",null,o(s.employeeData[378]),1)])]),(c(!0),g(F,null,W(s.employeeCustomIds,(i,_)=>(c(),g("div",{key:_,class:"col-12 col-sm-3"},[e("div",ss,[e("span",ts,o(s.decodeHTML(i.idType)),1)]),e("div",os,[e("span",null,o(s.processCustomID(i)),1)])]))),128))]),a(D),e("div",as,[e("div",ls,[ns,e("div",is,[e("span",null,o(s.getArrivalDate(s.assignmentData)),1)])]),e("div",ds,[cs,e("div",rs,[e("span",null,o(s.dayjs(s.employeeData[397].$d).format("MM/DD/YYYY")),1)])]),e("div",ms,[ps,e("div",us,[e("span",null,o(s.dayjs(s.release[36].$d).format("MM/DD/YYYY")),1)])]),e("div",_s,[vs,e("div",ys,[e("span",null,o(s.dayjs(s.release[36].$d).format("MM/DD/YYYY")),1)])])]),a(D),e("div",hs,[e("div",fs,[bs,e("div",$s,[e("span",null,o(s.assignmentData[141]),1)])]),e("div",qs,[gs,e("div",ws,[e("span",null,o(s.assignmentData[20]),1)])]),e("div",Ds,[xs,e("div",ks,[e("span",null,"$ "+o(s.assignmentData[116].toFixed(2)),1)])])])]),_:1})):(c(),h(v,{key:1,class:"q-my-lg"},{default:n(()=>[a(Ee,{color:"primary",showing:""})]),_:1}))]),_:1})}var Cs=E(Le,[["render",Rs]]);const Ys=A({props:{data:Object},setup(s){return{evaluation:y(()=>s.data),convertScore:t=>({1:"Strongly Disagreed",2:"Disagreed",3:"Neutral",4:"Agreed",5:"Strongly Agreed",0:"Did Not Know"})[t]}}}),Ss=e("div",{class:"text-primary text-h6 text-bold"},"Employee Performance Evaluation",-1),Ts={class:"row q-py-sm"},Ms={class:"col-12 col-sm-6 col-md-3"},Es=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Has good attendance")],-1),Ns={class:"text-body2 q-pl-md"},Is={class:"q-mr-md"},Ps={class:"col-12 col-sm-6 col-md-3"},As=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Has a good attitude")],-1),Ls={class:"text-body2 q-pl-md"},Qs={class:"q-mr-md"},js={class:"col-12 col-sm-6 col-md-3"},Bs=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Can do their job")],-1),Os={class:"text-body2 q-pl-md"},Vs={class:"q-mr-md"},zs={class:"col-12 col-sm-6 col-md-3"},Us=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Can be promoted in the future")],-1),Fs={class:"text-body2 q-pl-md"},Ws={class:"q-mr-md"};function Hs(s,d,m,t,f,b){return c(),h(C,null,{default:n(()=>[a(v,{class:"text-center q-py-sm"},{default:n(()=>[Ss]),_:1}),a(v,{class:"q-py-none"},{default:n(()=>[e("div",Ts,[e("div",Ms,[Es,e("div",Ns,[e("span",Is,o(s.convertScore(s.evaluation.attendance)),1),a(O,{modelValue:s.evaluation.attendance,"onUpdate:modelValue":d[0]||(d[0]=i=>s.evaluation.attendance=i),max:"5",size:"sm",color:"accent",icon:"star_border","icon-selected":"star","icon-half":"star_half","no-dimming":"",readonly:""},null,8,["modelValue"])])]),e("div",Ps,[As,e("div",Ls,[e("span",Qs,o(s.convertScore(s.evaluation.attitude)),1),a(O,{modelValue:s.evaluation.attitude,"onUpdate:modelValue":d[1]||(d[1]=i=>s.evaluation.attitude=i),max:"5",size:"sm",color:"accent",icon:"star_border","icon-selected":"star","icon-half":"star_half","no-dimming":"",readonly:""},null,8,["modelValue"])])]),e("div",js,[Bs,e("div",Os,[e("span",Vs,o(s.convertScore(s.evaluation.capable)),1),a(O,{modelValue:s.evaluation.capable,"onUpdate:modelValue":d[2]||(d[2]=i=>s.evaluation.capable=i),max:"5",size:"sm",color:"accent",icon:"star_border","icon-selected":"star","icon-half":"star_half","no-dimming":"",readonly:""},null,8,["modelValue"])])]),e("div",zs,[Us,e("div",Fs,[e("span",Ws,o(s.convertScore(s.evaluation.promotion)),1),a(O,{modelValue:s.evaluation.promotion,"onUpdate:modelValue":d[3]||(d[3]=i=>s.evaluation.promotion=i),max:"5",size:"sm",color:"accent",icon:"star_border","icon-selected":"star","icon-half":"star_half","no-dimming":"",readonly:""},null,8,["modelValue"])])])])]),_:1})]),_:1})}var Js=E(Ys,[["render",Hs]]);const Ks=A({props:{release:Object,employee:Object},setup(s){const{getReleases:d}=B(),m=y(()=>d(s.release[3])&&d(s.release[3]).employee?d(s.release[3]).employee:null);return{deductNeeded:y(()=>m.value&&!s.release[72]&&x.duration(x(s.release[36].$d).diff(x(s.employee[397].$d))).asDays()<30?"Yes":"No"),downloadFile:ue,decodeHTML:J}}}),Gs=e("div",{class:"text-primary text-h6 text-bold"},"Departure Information",-1),Xs={class:"row"},Zs={class:"col-12 col-sm-9"},et={class:"row q-py-sm"},st={class:"col-12 col-sm-6 col-md-6"},tt={class:"text-body2"},ot=e("span",{class:"text-bold q-mr-md"},"Return Company Equipment and/or PPE",-1),at={class:"col-12 col-sm-6 col-md-6"},lt={class:"text-body2"},nt=e("span",{class:"text-bold q-mr-md"},"Payroll Deduction Needed",-1),it={class:"row q-py-sm"},dt={class:"col-12"},ct={class:"text-body2"},rt=e("span",{class:"text-bold q-mr-md"},"Reason",-1),mt={class:"row q-py-sm"},pt={class:"col-12"},ut={class:"text-body2"},_t=e("span",{class:"text-bold q-mr-md"},"Recommendation for Rehire / Reassignment",-1),vt={class:"row q-py-sm"},yt={class:"col-12"},ht=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Comments")],-1),ft={class:"text-body2 text-italic q-pl-md"},bt={class:"col-12 col-sm-3 q-pl-sm"},$t=e("div",{class:"text-body2 text-bold text-center q-mb-sm"},"Supporting Documents",-1),qt={key:1,class:"text-body2 text-italic text-center"},gt=e("span",null,"No Supporting Documents",-1),wt=[gt];function Dt(s,d,m,t,f,b){return c(),h(C,null,{default:n(()=>[a(v,{class:"text-center q-py-sm"},{default:n(()=>[Gs]),_:1}),a(v,{class:"q-py-none"},{default:n(()=>[e("div",Xs,[e("div",Zs,[e("div",et,[e("div",st,[e("div",tt,[ot,e("span",null,o(s.release[72]?"Yes":"No"),1)])]),e("div",at,[e("div",lt,[nt,e("span",null,o(s.deductNeeded),1)])])]),a(D),e("div",it,[e("div",dt,[e("div",ct,[rt,e("span",null,o(s.release[32]),1)])])]),a(D),e("div",mt,[e("div",pt,[e("div",ut,[_t,e("span",null,o(s.release[12]),1)])])]),a(D),e("div",vt,[e("div",yt,[ht,e("div",ft,[e("span",null,o(s.release[60]===""?"No Comments":s.decodeHTML(s.release[60])),1)])])])]),e("div",bt,[$t,s.release[70].length>0?(c(),h(_e,{key:0},{default:n(()=>[(c(!0),g(F,null,W(s.release[70],(i,_)=>oe((c(),h(ae,{key:_,clickable:"",class:"text-body2",onClick:k=>s.downloadFile({tableId:"bsstsai5d",recordId:i[3],fieldId:6,versionNumber:1,name:i[7]})},{default:n(()=>[a(V,null,{default:n(()=>[U(o(_+1)+". "+o(i[7]),1)]),_:2},1024),a(V,{avatar:""},{default:n(()=>[a(le,{color:"info",name:"file_download"})]),_:1})]),_:2},1032,["onClick"])),[[ne]])),128))]),_:1})):(c(),g("div",qt,wt))])])]),_:1})]),_:1})}var xt=E(Ks,[["render",Dt]]);const kt=A({props:{employee:Object,assignment:Object,release:Object},setup(s){const{getUserType:d}=H(),{updateViewedReleases:m,getReleases:t}=B(),f=P(!0),b=P(!0),i=y(()=>t(s.release[3])),_=y(()=>i.value&&i.value.employee?i.value.employee:null),k=y(()=>i.value&&i.value.assignment?i.value.assignment:null),M=y(()=>{if(!_.value||!_.value.workday)return[];{const{personalData:$}=_.value.workday;if($){const{customIds:r}=$.identificationData?$.identificationData:{customIds:[]};return r}else return[]}});return{dayjs:x,openWindow:pe,getUserType:d,employeeData:_,assignmentData:k,eeLoading:f,assignLoading:b,getArrivalDate:$=>$[145].$d?x($[145].$d).format("MM/DD/YYYY"):x($[1].$d).format("MM/DD/YYYY"),employeeCustomIds:M,processCustomID:({id:$,idType:r})=>r.includes("J&amp;E")?`${$.slice(1,4)} / ${$.slice(-5)}`:$,decodeHTML:J}}}),Rt=e("div",{class:"text-body1 text-bold"},"Employee Information",-1),Ct={class:"row q-py-sm"},Yt={class:"col-3"},St=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Name")],-1),Tt={class:"text-caption q-pl-md"},Mt={class:"col-3"},Et=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Last 4 Digits of SS#")],-1),Nt={class:"text-caption q-pl-md"},It={class:"col-3"},Pt=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Phone")],-1),At={class:"text-caption q-pl-md"},Lt={class:"row q-py-sm"},Qt={class:"col-3"},jt={class:"text-caption"},Bt=e("span",{class:"text-bold q-mr-md"},"Workday Employee ID",-1),Ot={class:"text-caption q-pl-md"},Vt={class:"text-caption"},zt={class:"text-bold q-mr-md"},Ut={class:"text-caption q-pl-md"},Ft={class:"row q-py-sm"},Wt={class:"col-3"},Ht=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Arrival Date")],-1),Jt={class:"text-caption q-pl-md"},Kt={class:"col-3"},Gt=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Last Hire Date")],-1),Xt={class:"text-caption q-pl-md"},Zt={class:"col-3"},eo=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Last Day Worked")],-1),so={class:"text-caption q-pl-md"},to={class:"col-3"},oo=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Effective Date")],-1),ao={class:"text-caption q-pl-md"},lo={class:"row q-py-sm"},no={class:"col-4"},io=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Job Site/ Location")],-1),co={class:"text-caption q-pl-md"},ro={class:"col-4"},mo=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Job Title")],-1),po={class:"text-caption q-pl-md"},uo={class:"col-2"},_o=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Pay Rate")],-1),vo={class:"text-caption q-pl-md"};function yo(s,d,m,t,f,b){return c(),h(C,{flat:""},{default:n(()=>[a(v,{class:"q-py-sm"},{default:n(()=>[Rt]),_:1}),a(v,{class:"q-py-none"},{default:n(()=>[e("div",Ct,[e("div",Yt,[St,e("div",Tt,[e("span",null,o(s.employeeData[22])+", "+o(s.employeeData[20]),1)])]),e("div",Mt,[Et,e("div",Nt,[e("span",null,o(s.employeeData[188].substring(s.employeeData[188].length-4)),1)])]),e("div",It,[Pt,e("div",At,[e("span",null,o(s.employeeData[25]),1)])])]),a(D),e("div",Lt,[e("div",Qt,[e("div",jt,[Bt,s.getUserType==="QuickBase User"?(c(),h(L,{key:0,dense:"",size:"sm",flat:"",icon:"open_in_new",color:"info",onClick:d[0]||(d[0]=i=>s.openWindow({url:s.employeeData[451]}))},{default:n(()=>[a(me,null,{default:n(()=>[U("Open in Workday")]),_:1})]),_:1})):w("",!0)]),e("div",Ot,[e("span",null,o(s.employeeData[378]),1)])]),(c(!0),g(F,null,W(s.employeeCustomIds,(i,_)=>(c(),g("div",{key:_,class:"col-3"},[e("div",Vt,[e("span",zt,o(s.decodeHTML(i.idType)),1)]),e("div",Ut,[e("span",null,o(s.processCustomID(i)),1)])]))),128))]),a(D),e("div",Ft,[e("div",Wt,[Ht,e("div",Jt,[e("span",null,o(s.getArrivalDate(s.assignmentData)),1)])]),e("div",Kt,[Gt,e("div",Xt,[e("span",null,o(s.dayjs(s.employeeData[397].$d).format("MM/DD/YYYY")),1)])]),e("div",Zt,[eo,e("div",so,[e("span",null,o(s.dayjs(s.release[36].$d).format("MM/DD/YYYY")),1)])]),e("div",to,[oo,e("div",ao,[e("span",null,o(s.dayjs(s.release[36].$d).format("MM/DD/YYYY")),1)])])]),a(D),e("div",lo,[e("div",no,[io,e("div",co,[e("span",null,o(s.assignmentData[141]),1)])]),e("div",ro,[mo,e("div",po,[e("span",null,o(s.assignmentData[20]),1)])]),e("div",uo,[_o,e("div",vo,[e("span",null,"$ "+o(s.assignmentData[116].toFixed(2)),1)])])])]),_:1})]),_:1})}var ho=E(kt,[["render",yo]]);const fo=A({props:{data:Object},setup(s){return{evaluation:y(()=>s.data),convertScore:t=>({1:"Strongly Disagreed",2:"Disagreed",3:"Neutral",4:"Agreed",5:"Strongly Agreed",0:"Did Not Know"})[t]}}}),bo=e("div",{class:"text-body1 text-bold"},"Employee Performance Evaluation",-1),$o={class:"row q-py-sm"},qo={class:"col-3"},go=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Has good attendance")],-1),wo={class:"text-caption q-pl-md"},Do={class:"q-mr-md"},xo={class:"col-3"},ko=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Has a good attitude")],-1),Ro={class:"text-caption q-pl-md"},Co={class:"q-mr-md"},Yo={class:"col-3"},So=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Can do their job")],-1),To={class:"text-caption q-pl-md"},Mo={class:"q-mr-md"},Eo={class:"col-3"},No=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Can be promoted in the future")],-1),Io={class:"text-caption q-pl-md"},Po={class:"q-mr-md"};function Ao(s,d,m,t,f,b){return c(),h(C,{flat:"",class:"q-my-none q-py-none"},{default:n(()=>[a(v,{class:"q-py-sm"},{default:n(()=>[bo]),_:1}),a(v,{class:"q-py-none"},{default:n(()=>[e("div",$o,[e("div",qo,[go,e("div",wo,[e("span",Do,o(s.evaluation.attendance)+" / 5 - "+o(s.convertScore(s.evaluation.attendance)),1)])]),e("div",xo,[ko,e("div",Ro,[e("span",Co,o(s.evaluation.attitude)+" / 5 - "+o(s.convertScore(s.evaluation.attitude)),1)])]),e("div",Yo,[So,e("div",To,[e("span",Mo,o(s.evaluation.capable)+" / 5 - "+o(s.convertScore(s.evaluation.capable)),1)])]),e("div",Eo,[No,e("div",Io,[e("span",Po,o(s.evaluation.promotion)+" / 5 - "+o(s.convertScore(s.evaluation.promotion)),1)])])])]),_:1})]),_:1})}var Lo=E(fo,[["render",Ao]]);const Qo=A({props:{release:Object,employee:Object},setup(s){const{getReleases:d}=B(),m=y(()=>d(s.release[3])&&d(s.release[3]).employee?d(s.release[3]).employee:null);return{deductNeeded:y(()=>m.value&&!s.release[72]&&x.duration(x(s.release[36].$d).diff(x(s.employee[397].$d))).asDays()<30?"Yes":"No"),downloadFile:ue,decodeHTML:J}}}),jo=e("div",{class:"text-body1 text-bold"},"Departure Information",-1),Bo={class:"row"},Oo={class:"col-9"},Vo={class:"row q-py-sm"},zo={class:"col-6"},Uo={class:"text-caption"},Fo=e("span",{class:"text-bold q-mr-md"},"Return Company Equipment and/or PPE",-1),Wo={class:"col-6"},Ho={class:"text-caption"},Jo=e("span",{class:"text-bold q-mr-md"},"Payroll Deduction Needed",-1),Ko={class:"row q-py-sm"},Go={class:"col-12"},Xo={class:"text-caption"},Zo=e("span",{class:"text-bold q-mr-md"},"Reason",-1),ea={class:"row q-py-sm"},sa={class:"col-12"},ta={class:"text-caption"},oa=e("span",{class:"text-bold q-mr-md"},"Recommendation for Rehire / Reassignment",-1),aa={class:"row q-py-sm"},la={class:"col-12"},na=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Comments")],-1),ia={class:"text-caption text-italic q-pl-md"},da={class:"col-3 q-pl-sm"},ca=e("div",{class:"text-caption text-bold text-center q-mb-sm"},"Supporting Documents",-1),ra={key:1,class:"text-caption text-italic text-center"},ma=e("span",null,"No Supporting Documents",-1),pa=[ma];function ua(s,d,m,t,f,b){return c(),h(C,{flat:""},{default:n(()=>[a(v,{class:"q-py-sm"},{default:n(()=>[jo]),_:1}),a(v,{class:"q-py-none"},{default:n(()=>[e("div",Bo,[e("div",Oo,[e("div",Vo,[e("div",zo,[e("div",Uo,[Fo,e("span",null,o(s.release[72]?"Yes":"No"),1)])]),e("div",Wo,[e("div",Ho,[Jo,e("span",null,o(s.deductNeeded),1)])])]),a(D),e("div",Ko,[e("div",Go,[e("div",Xo,[Zo,e("span",null,o(s.release[32]),1)])])]),a(D),e("div",ea,[e("div",sa,[e("div",ta,[oa,e("span",null,o(s.release[12]),1)])])]),a(D),e("div",aa,[e("div",la,[na,e("div",ia,[e("span",null,o(s.release[60]===""?"No Comments":s.decodeHTML(s.release[60])),1)])])])]),e("div",da,[ca,s.release[70].length>0?(c(),h(_e,{key:0},{default:n(()=>[(c(!0),g(F,null,W(s.release[70],(i,_)=>oe((c(),h(ae,{key:_,clickable:"",class:"text-caption",onClick:k=>s.downloadFile({tableId:"bsstsai5d",recordId:i[3],fieldId:6,versionNumber:1,name:i[7]})},{default:n(()=>[a(V,null,{default:n(()=>[U(o(_+1)+". "+o(i[7]),1)]),_:2},1024),a(V,{avatar:""},{default:n(()=>[a(le,{color:"info",name:"file_download"})]),_:1})]),_:2},1032,["onClick"])),[[ne]])),128))]),_:1})):(c(),g("div",ra,pa))])])]),_:1})]),_:1})}var _a=E(Qo,[["render",ua]]);const va=A({emits:["releaseReviewed"],props:{release:Object},setup(s,{emit:d}){const m=re(),t=ie(),{getUserType:f}=H(),b=P(!1),i=y(()=>(f==="Project User","How would you like to proceed with this employee?")),_=y(()=>f==="Project User"?[{label:"Rescind Release (Add Back to Roster)",value:"Rescind"}]:[{label:"Reassign this Employee",value:"Reassign"},{label:"Terminate this Employee",value:"Terminate"},{label:"Rescind Release (Add Back to Roster)",value:"Rescind"}]),k=te({selection:te().required("Required field if taking action on this release.").label("Disposition").nullable()}),{meta:M,errors:u,handleSubmit:T,handleReset:$}=Pe({validationSchema:k}),{value:r}=Ae("selection");de(r,R=>{R?b.value=!0:b.value=!1});const Y=T(async R=>{m.dialog({title:"Confirm",message:`Are you sure you want to ${R.selection.value} this ${R.selection.value==="Rescind"?"release":"employee"}?`,cancel:!0,persistent:!0}).onOk(async()=>{try{if(m.loading.show(),R.selection.value==="Reassign"||R.selection.value==="Terminate"){const{release:N,employee:Q}=await Ce({release:s.release,disp:R.selection});d("releaseReviewed",{release:N,employee:Q}),window.postMessage("reloadDepartures"),$()}else if(R.selection.value==="Rescind"){const{release:N,employee:Q}=await Ye({release:s.release,disp:R.selection});d("releaseReviewed",{release:N,employee:Q}),t.replace({name:"employees",query:{refresh:!0}}),$()}}catch(N){console.log(N),m.loading.hide(),m.notify({type:"negative",message:"Cannot update release."})}})});return{formErrors:u,formMeta:M,submit:Y,selection:r,options:_,question:i,visibleButton:b}}}),ya={class:"text-body2 text-weight-bold"},ha={class:"text-caption"};function fa(s,d,m,t,f,b){return c(),g("div",null,[a(Ie,{onSubmit:De(s.submit,["prevent"])},{default:n(()=>[a(C,null,{default:n(()=>[a(v,{class:"q-pb-xs"},{default:n(()=>[e("div",ya,o(s.question),1),a(Ne,{class:"q-mb-sm",dense:"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:s.selection,"onUpdate:modelValue":d[0]||(d[0]=i=>s.selection=i),options:s.options,"bottom-slots":"",clearable:"",error:!!s.formErrors.selection},{error:n(()=>[e("div",ha,o(s.formErrors.selection),1)]),_:1},8,["modelValue","options","error"])]),_:1}),s.visibleButton?(c(),h(ce,{key:0,class:"q-pt-xs",align:"right"},{default:n(()=>[a(L,{color:"primary",label:"Submit",type:"submit"})]),_:1})):w("",!0)]),_:1})]),_:1},8,["onSubmit"])])}var ba=E(va,[["render",fa]]);const $a={name:"View Release",directives:{},components:{EmployeeInformation:Cs,Evaluation:Js,DepartureInformation:xt,PrintDepartureInformation:_a,PrintEmployeeInformation:ho,PrintEvaluation:Lo,ReviewForm:ba},setup(){const s=P(!1),d=P(!1),m=re(),t=xe();ie();const{capitalize:f}=ke,{getUserType:b,userData:i}=H(),{getReleases:_,setReleases:k,updateViewedReleases:M}=B(),u=y(()=>_(t.params.release)),T=y(()=>u.value&&u.value.employee?u.value.employee:null),$=y(()=>u.value&&u.value.assignment?u.value.assignment:null),r=y(()=>u.value[59]&&u.value[59][0]?u.value[59][0]:null),Y=y(()=>{const{data:l}=r.value?r.value:{data:null};return l}),R=y(()=>u.value?u.value[38]:null),N=y(()=>r.value&&r.value[44]?r.value[44]:null),Q=y(()=>u.value?u.value[75]:null),ve=y(()=>u.value?u.value[76]:null),ye=async()=>{const l=await ee({release:u.value});let p={referenceId:"N/A",logDescription:"N/A",logEffectiveMoment:"N/A",logEntryMoment:"N/A",eventType:"N/A",organizationReferenceID:"N/A",positionID:"N/A",employeeID:l[50],logType:"N/A"},q=u.value[36].$d;if(l.lastTerm&&(p=l.lastTerm),l.termEntryDate&&(q=l.termEntryDate.$d),T.value[397].isSameOrAfter(u.value[36])&&(!l.terminated||!l.lastTerm)){const{data:G}=await X({release:l,entryMoment:q,workdayData:p});S({data:G,notify:!0})}else if(!l.terminated||!l.lastTerm)m.dialog({title:"Alert",message:"Please complete the termination in Workday first."});else{const{data:G}=await X({release:l,entryMoment:q,workdayData:p});S({data:G,notify:!0})}},he=({release:l,employee:p})=>{if(l[43]==="Reassign"){const q=`https://elitehcms.quickbase.com/db/bs7qsu6wh?a=dbpage&pageID=6&ee=${p[3]}`;window.location.href=q}else S({data:l,notify:!0,employee:p})},fe=()=>{window.close()},be=async()=>{if(!_(t.params.release)){m.loading.show();const{data:l}=await j.fetchFromHiringApp({fields:[z({type:"releases",query:"",id:t.params.release})]});k({id:l[3],data:l}),m.loading.hide(),b==="QuickBase User"&&$e({data:l})}},$e=async({data:l})=>{if(l[87]==="Active"&&l[95]&&l[42]!=="Complete"){const{reassigned:p,timestamp:q}=await Te({release:l});p&&ge({release:l,timestamp:q})}else if(l[73]==="Processed"){if(l.workdayTerm)return;const{release:p}=await K({release:l});S({data:p})}else if(l[79]!=="Complete"&&l[36].$d&&!x().isBefore(x(l[36].$d))){const{completed:p}=await qe({release:l}),{release:q}=await K({release:p});q.terminated?Z({release:q}):S({data:q})}else{const{release:p}=await K({release:l});p.terminated?Z({release:p}):S({data:p})}},K=async({release:l})=>{if(l[87]!=="Terminated")return l.terminated=!1,{release:l};{const p=await ee({release:l});if(p.terminated&&p.lastTerm)if(p[73]==="Processed"){const{data:q}=await j.upsertRecordsXML({to:"bp3ga39ut",data:[{3:{value:p[3]},106:{value:JSON.stringify(p.lastTerm)}}],fieldsToReturn:[80],formatObject:80});return{release:q[0][80]}}else return{release:p};else return{release:p}}},qe=async({release:l})=>{await Se({id:l[28]});const{data:p}=await j.fetchFromHiringApp({fields:[z({type:"releases",query:"",id:l[3]})]});return{completed:p}},Z=async({release:l})=>{m.dialog({title:"Confirm",message:"It looks like this termination has already been processed in Workday. Would you like to update this employee in CEM now?",persistent:!0,cancel:!0}).onOk(async()=>{const{data:p}=await X({release:l,entryMoment:l.termEntryDate.$d,workdayData:l.lastTerm});S({data:p,notify:!0})}).onCancel(()=>{S({data:l})})},ge=async({release:l,timestamp:p})=>{m.dialog({title:"Confirm",message:"It looks like this employee has been reassigned. Would you like to update this release in CEM now?",persistent:!0,cancel:!0}).onOk(async()=>{const q=await Me({release:l,disposition:"Reassign",ts:p,updatedBy:i});S({data:q,notify:!0})}).onCancel(()=>{S({data:l})})},S=({data:l,notify:p,employee:q})=>{m.loading.isActive&&m.loading.hide(),u.value.employee?l.employee=u.value.employee:q&&(l.employee=q),u.value.assignment&&(l.assignment=u.value.assignment),k({id:l[3],data:l}),p&&m.notify({type:"positive",message:"Employee updated in CEM"})},we=()=>{s.value=!0};return de(s,(l,p)=>{s.value&&setTimeout(()=>{print(),setTimeout(()=>{s.value=!1},500)},200)}),be(),{release:u,employee:T,assignment:$,evaluation:Y,evaluator:N,reviewer:Q,processor:ve,getUserType:b,fab:d,dayjs:x,submitter:R,capitalize:f,showPrint:s,printPage:we,releaseReviewed:he,completeTermination:ye,closeWindow:fe}}},qa={class:"q-px-sm q-pb-xl"},ga={class:"row q-py-sm"},wa={class:"col-12 col-sm-3"},Da=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Submitted By")],-1),xa={class:"text-body2 q-pl-md"},ka={class:"col-12 col-sm-3"},Ra=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Evaluated By")],-1),Ca={class:"text-body2 q-pl-md"},Ya={key:0},Sa={key:1},Ta={key:0,class:"col-12 col-sm-3"},Ma=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Reviewed By")],-1),Ea={class:"text-body2 q-pl-md"},Na={key:1,class:"col-3"},Ia=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Processed By")],-1),Pa={class:"text-body2 q-pl-md"},Aa=e("div",{class:"text-primary text-h6 text-bold"},"Termination Workday Data",-1),La={class:"row q-py-sm"},Qa={class:"col-12 col-sm-3"},ja=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Entry Date")],-1),Ba={class:"text-body2 q-pl-md"},Oa={class:"col-12 col-sm-3"},Va=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Effective Date")],-1),za={class:"text-body2 q-pl-md"},Ua={class:"row"},Fa={class:"col-12 col-md-6"},Wa={class:"row q-py-sm"},Ha={class:"col-3"},Ja=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Submitted By")],-1),Ka={class:"text-body2 q-pl-md"},Ga={class:"col-3"},Xa=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Evaluated By")],-1),Za={class:"text-body2 q-pl-md"},el={key:0},sl={key:1},tl={key:0,class:"col-3"},ol=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Reviewed By")],-1),al={class:"text-body2 q-pl-md"},ll={key:1,class:"col-3"},nl=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Processed By")],-1),il={class:"text-body2 q-pl-md"};function dl(s,d,m,t,f,b){const i=I("employee-information"),_=I("evaluation"),k=I("departure-information"),M=I("review-form"),u=I("print-employee-information"),T=I("print-evaluation"),$=I("print-departure-information");return c(),h(Re,{style:{"max-width":"100vw"}},{default:n(()=>[e("div",qa,[t.release&&!t.showPrint?(c(),h(C,{key:0,flat:"",class:"text-dark"},{default:n(()=>[s.$route.name==="view-release"?(c(),h(ce,{key:0,class:"q-pb-xs print-hide",align:"right"},{default:n(()=>[t.release[42]==="Reviewed"&&t.release[43]==="Terminate"&&t.getUserType==="QuickBase User"?(c(),h(L,{key:0,icon:"done",label:"Termination Processed",color:"positive",onClick:t.completeTermination},null,8,["onClick"])):w("",!0),a(L,{icon:"print",label:"Print",color:"info",onClick:t.printPage},null,8,["onClick"]),a(L,{icon:"close",label:"Close",color:"dark",onClick:d[0]||(d[0]=r=>t.getUserType==="QuickBase User"?t.closeWindow():s.$router.replace({name:"employees",query:{refresh:!0}}))})]),_:1})):w("",!0),a(v,{class:"q-py-xs"},{default:n(()=>[a(i,{assignment:t.assignment,employee:t.employee,release:t.release},null,8,["assignment","employee","release"])]),_:1}),t.evaluation?(c(),h(v,{key:1,class:"q-py-xs"},{default:n(()=>[a(_,{data:t.evaluation},null,8,["data"])]),_:1})):w("",!0),a(v,{class:"q-py-xs"},{default:n(()=>[a(k,{employee:t.employee,release:t.release},null,8,["employee","release"])]),_:1}),a(v,{class:"q-py-xs"},{default:n(()=>[a(C,null,{default:n(()=>[a(v,{class:"q-py-none"},{default:n(()=>[e("div",ga,[e("div",wa,[Da,e("div",xa,[e("span",null,o(t.submitter[37])+", "+o(t.submitter[35]),1)])]),e("div",ka,[Ra,e("div",Ca,[t.evaluator?(c(),g("span",Ya,o(t.capitalize(t.evaluator[22].toLowerCase()))+", "+o(t.capitalize(t.evaluator[20].toLowerCase())),1)):(c(),g("span",Sa,"Not Specified"))])]),t.reviewer?(c(),g("div",Ta,[Ma,e("div",Ea,[e("span",null,o(t.capitalize(t.reviewer[37].toLowerCase()))+", "+o(t.capitalize(t.reviewer[35].toLowerCase())),1)])])):w("",!0),t.processor?(c(),g("div",Na,[Ia,e("div",Pa,[e("span",null,o(t.capitalize(t.processor[37].toLowerCase()))+", "+o(t.capitalize(t.processor[35].toLowerCase())),1)])])):w("",!0)])]),_:1})]),_:1})]),_:1}),t.release.workdayTerm?(c(),h(v,{key:2,class:"q-py-xs"},{default:n(()=>[a(C,null,{default:n(()=>[a(v,{class:"text-center q-py-sm"},{default:n(()=>[Aa]),_:1}),a(v,{class:"q-py-none"},{default:n(()=>[e("div",La,[e("div",Qa,[ja,e("div",Ba,[e("span",null,o(s.$dayjs(t.release.workdayTerm.logEntryMoment).format("MM/DD/YYYY hh:mm:ss a z")),1)])]),e("div",Oa,[Va,e("div",za,[e("span",null,o(s.$dayjs(t.release.workdayTerm.logEffectiveMoment).format("MM/DD/YYYY hh:mm:ss a z")),1)])])])]),_:1})]),_:1})]),_:1})):w("",!0),t.release[42]==="Pending"&&s.$can("manage","releases")?(c(),h(v,{key:3,class:"q-py-sm"},{default:n(()=>[e("div",Ua,[e("div",Fa,[a(M,{release:t.release,onReleaseReviewed:t.releaseReviewed},null,8,["release","onReleaseReviewed"])])])]),_:1})):w("",!0)]),_:1})):w("",!0),t.release&&t.showPrint?(c(),h(C,{key:1,id:"printArea",flat:"",class:"text-body2"},{default:n(()=>[a(v,{class:"q-py-xs"},{default:n(()=>[a(u,{assignment:t.assignment,employee:t.employee,release:t.release},null,8,["assignment","employee","release"])]),_:1}),a(D),t.evaluation?(c(),h(v,{key:0,class:"q-py-xs"},{default:n(()=>[a(T,{data:t.evaluation},null,8,["data"])]),_:1})):w("",!0),a(D),a(v,{class:"q-py-xs"},{default:n(()=>[a($,{employee:t.employee,release:t.release},null,8,["employee","release"])]),_:1}),a(D),a(v,{class:"q-pb-sm"},{default:n(()=>[a(C,{flat:""},{default:n(()=>[a(v,{class:"q-py-none"},{default:n(()=>[e("div",Wa,[e("div",Ha,[Ja,e("div",Ka,[e("span",null,o(t.submitter[37])+", "+o(t.submitter[35]),1)])]),e("div",Ga,[Xa,e("div",Za,[t.evaluator?(c(),g("span",el,o(t.capitalize(t.evaluator[22].toLowerCase()))+", "+o(t.capitalize(t.evaluator[20].toLowerCase())),1)):(c(),g("span",sl,"Not Specified"))])]),t.reviewer?(c(),g("div",tl,[ol,e("div",al,[e("span",null,o(t.capitalize(t.reviewer[37].toLowerCase()))+", "+o(t.capitalize(t.reviewer[35].toLowerCase())),1)])])):w("",!0),t.processor?(c(),g("div",ll,[nl,e("div",il,[e("span",null,o(t.capitalize(t.processor[37].toLowerCase()))+", "+o(t.capitalize(t.processor[35].toLowerCase())),1)])])):w("",!0)])]),_:1})]),_:1})]),_:1})]),_:1})):w("",!0)])]),_:1})}var Vl=E($a,[["render",dl]]);export{Vl as default};
