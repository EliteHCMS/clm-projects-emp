import{Q as T}from"./QSpace.0aefa4da.js";import{c1 as ee,r as m,w as le,aK as te,c as C,z as f,A as g,d as e,bh as t,c2 as y,C as n,E as q,a6 as r,aa as u,c3 as N,bY as w,a9 as ae,aA as se,bW as c,d5 as oe,cx as ne,bX as de,c6 as ue,b$ as ie,at as i,an as _,am as B}from"./index.52c71ca6.js";import{a as I,Q as d}from"./QSelect.02464590.js";import{Q as re}from"./QList.dade0d45.js";import{Q as S}from"./QTd.be89a153.js";import{u as ce}from"./use-quasar.8076b8cd.js";import{e as me}from"./export-file.6b95af49.js";import{R as fe}from"./quickbase.0d6b62e6.js";import{_ as _e,a as ve}from"./aTable.0ed71fc6.js";import{dayjs as D}from"./dayjs.7e2f14dc.js";import"./QChip.bee081d7.js";import"./QMenu.b5435217.js";import"./position-engine.901fa583.js";import"./selection.445971ab.js";import"./rtl.a367ced8.js";import"./_commonjsHelpers.dfee5925.js";import"./localForage.83b50c47.js";import"./index.7dbe61ef.js";import"./i18n.3d69f992.js";import"./api.14a19609.js";import"./QTable.34b4b377.js";import"./QMarkupTable.6709601e.js";import"./use-fullscreen.57b102bc.js";const pe={class:"q-pa-md"},he={class:"row items-center"},be={class:"col-12 col-md-6 q-px-sm"},ge=n("div",{class:"col-12 col-md-4 q-px-sm"},null,-1),we={class:"row items-center"},ke={class:"col-12 col-md-3 q-px-sm"},xe={class:"col-12 col-md-3 q-px-sm"},Ce={class:"col-12 col-md-4 q-px-sm"},ye={class:"col-12 col-md-5 q-px-sm"},Ie={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},Se=n("br",null,null,-1),Ve=i("Time Checked-In"),Qe=n("br",null,null,-1),Ae=i("\xA0"),Te=n("br",null,null,-1),qe=i("Phone Number"),Ne=i("Reason"),Be={key:0},De=i("\xA0"),Ue={key:0},$e=i("Task"),Oe=i("Time Checked-Out"),Pe=n("br",null,null,-1),We=i("\xA0"),je=n("br",null,null,-1),Le={key:0},Re={key:0},Ye={key:1},vl={__name:"index",setup(Me){const v=ce(),U=fe(),{fetchSelfCheckIns:$,fetchAllSelfCheckIns:O}=U,{getSelfCheckIns:K,getSelectedOffice:k,getLoadingState:E}=ee(U),h=m(k.value?k.value[8]:null),V=m("Self Check-Ins"),H=m("selfCheckIns"),Q=m(""),P=m({sortBy:"13",descending:!1,rowsPerPage:150});h.value?$({selectedId:h.value,refresh:!0}):O({can:"read"}),le(k,()=>{h.value=k.value?k.value[8]:null,h.value?$({selectedId:h.value}):O({can:"read"})});const W=m(new Date),X=setInterval(()=>{W.value=new Date},1e3);te(()=>{clearInterval(X)});const p=m("Waiting"),F=m(["Waiting","Called"]),G=m(["Waiting","Called","All"]),x=m([]),j=m([{label:"Kiosk",value:"Kiosk"},{label:"In Process",value:"In Process"},{label:"Deployment",value:"Deployment"},{label:"No Task Assigned",value:""}]),A=C(()=>[{name:"index",align:"left",label:"#",sortable:!1},{name:"timeCheckIn",align:"left",label:"Time Checked-In",field:"13",sortable:!1},{name:"name",align:"left",label:"Name",field:"17",sortable:!1},{name:"phoneNumber",align:"center",label:"Phone Number",field:"6",sortable:!1},{name:"reason",align:"center",label:"Reason",field:"10",sortable:!1},{name:"status",align:"center",label:"Status",field:"15",sortable:!1},{name:"task",align:"center",label:"Task",field:"27",sortable:!1},...p.value==="Called"||p.value==="All"?[{name:"timeCheckedOut",align:"center",label:"Time Checked Out",field:"14",sortable:!1}]:[]]),b=C(()=>K.value(h.value).filter(s=>{let o=!0,l=!0;return p.value&&(p.value==="All"?o=!0:o=s[15]===p.value,o||(l=!1)),x.value&&x.value.length!==0&&(o=x.value.some(a=>s[27]===a.value),o||(l=!1)),l}).sort((s,o)=>P.value.descending?s[13].isBefore(o[13]):s[13].isAfter(o[13]))),L=C(()=>b.value.map(s=>D(W.value).to(s[13]))),R=C(()=>b.value.map(s=>s[14]?D(s[13]).to(s[14],!0):"N/A")),Y=s=>{console.log(s)},M=(s,o,l)=>{let a=o!==void 0?o(s,l):s;return a=a==null?"":String(a),a=a.split('"').join('""'),`"${a}"`},z=()=>{const s=[A.value.map(l=>M(l.label))].concat(b.value.map(l=>A.value.map(a=>M(typeof a.field=="function"?a.field(l):l[a.field===void 0?a.name:a.field],a.format,l)).join(","))).join(`\r
`);me(`${V.value} ${D().format("MM.DD.YYYY")}.csv`,s,"text/csv")!==!0&&v.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})};return(s,o)=>(f(),g("div",pe,[e(N,{flat:"",class:"q-pt-none"},{default:t(()=>[e(y,null,{default:t(()=>[n("div",he,[n("div",be,[n("div",{class:q(["text-dark",r(v).screen.lt.md?"text-body1":"text-h5"])},u(V.value),3)]),e(T),ge])]),_:1})]),_:1}),e(N,{flat:""},{default:t(()=>[e(y,null,{default:t(()=>[n("div",we,[n("div",ke,[e(I,{label:"Select Status",modelValue:p.value,"onUpdate:modelValue":o[0]||(o[0]=l=>p.value=l),options:G.value},null,8,["modelValue","options"])]),n("div",xe,[e(I,{label:"Select Task",modelValue:x.value,"onUpdate:modelValue":o[1]||(o[1]=l=>x.value=l),options:j.value,multiple:"","use-chips":"",clearable:""},{option:t(({itemProps:l,opt:a,selected:J,toggleOption:Z})=>[e(w,ae(se(l)),{default:t(()=>[e(c,null,{default:t(()=>[e(d,{innerHTML:a.label},null,8,["innerHTML"])]),_:2},1024),e(c,{side:""},{default:t(()=>[e(oe,{"model-value":J,"onUpdate:modelValue":ze=>Z(a)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"])]),e(T),n("div",Ce,[e(_e,{can:"read",styleSelection:!0})])])]),_:1})]),_:1}),e(ve,{rows:r(b),columns:r(A),pagination:P.value,filter:Q.value,title:V.value,separator:"vertical","row-key":"3",grid:!r(v).screen.gt.sm,loading:r(E)(H.value),downloadButton:!0,onDownload:z},{top:t(()=>[n("div",ye,[e(ne,{dense:r(v).screen.lt.md,modelValue:Q.value,"onUpdate:modelValue":o[2]||(o[2]=l=>Q.value=l),label:"Search...",clearable:""},{prepend:t(()=>[e(de,{name:"search"})]),_:1},8,["dense","modelValue"])]),e(T),n("div",{class:q(["text-dark text-caption text-italic",r(v).screen.lt.md?"offset-xs-5":""])},"(Total: "+u(r(b).length)+")",3),e(ue,{dense:r(v).screen.lt.md,class:q(["q-ml-sm",r(v).screen.lt.md?"full-width":""]),color:"primary",label:"Download",disable:r(b).length<1,onClick:z},null,8,["dense","class","disable"])]),item:t(l=>[n("div",Ie,[e(N,null,{default:t(()=>[e(y,{class:"text-center"},{default:t(()=>[n("strong",null,u(l.row[17]),1),Se,n("span",null,u(l.row[15]),1)]),_:2},1024),e(ie),e(y,{class:"flex flex-center"},{default:t(()=>[e(re,{dense:""},{default:t(()=>[e(w,null,{default:t(()=>[e(c,null,{default:t(()=>[e(d,null,{default:t(()=>[Ve]),_:1}),Qe,e(d,null,{default:t(()=>[Ae]),_:1})]),_:1}),e(c,{side:""},{default:t(()=>[e(d,{caption:""},{default:t(()=>[i(u(l.row[13].format("h:mm:ss A")),1)]),_:2},1024),Te,e(d,{caption:""},{default:t(()=>[i(u(r(L)[l.rowIndex]),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(w,null,{default:t(()=>[e(c,null,{default:t(()=>[e(d,null,{default:t(()=>[qe]),_:1})]),_:1}),e(c,{side:""},{default:t(()=>[e(d,{caption:""},{default:t(()=>[i(u(l.row[20]),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(w,null,{default:t(()=>[e(c,null,{default:t(()=>[e(d,null,{default:t(()=>[Ne]),_:1}),l.row[10]==="Applying"?(f(),g("br",Be)):_("",!0),l.row[10]==="Applying"?(f(),B(d,{key:1},{default:t(()=>[De]),_:1})):_("",!0)]),_:2},1024),e(c,{side:""},{default:t(()=>[e(d,{caption:""},{default:t(()=>[i(u(l.row[10]),1)]),_:2},1024),l.row[10]==="Applying"?(f(),g("br",Ue)):_("",!0),l.row[10]==="Applying"?(f(),B(d,{key:1,caption:""},{default:t(()=>[i(u(l.row[11]),1)]),_:2},1024)):_("",!0)]),_:2},1024)]),_:2},1024),e(w,null,{default:t(()=>[e(c,null,{default:t(()=>[e(d,null,{default:t(()=>[$e]),_:1})]),_:1}),e(c,{side:""},{default:t(()=>[e(d,{caption:""},{default:t(()=>[i(u(l.row[20]),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),l.row[15]==="Called"?(f(),B(w,{key:0},{default:t(()=>[e(c,null,{default:t(()=>[e(d,null,{default:t(()=>[Oe]),_:1}),Pe,e(d,null,{default:t(()=>[We]),_:1})]),_:1}),e(c,{side:""},{default:t(()=>[e(d,{caption:""},{default:t(()=>[i(u(l.row[14].format("h:mm:ss A")),1)]),_:2},1024),je,e(d,{caption:""},{default:t(()=>[i("Wait: "+u(r(R)[l.rowIndex]),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)):_("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),"body-cell-timeCheckIn":t(l=>[e(S,{props:l},{default:t(()=>[n("div",null,u(l.value.format("h:mm:ss A")),1),l.row[15]==="Waiting"?(f(),g("div",Le,u(r(L)[l.rowIndex]),1)):_("",!0)]),_:2},1032,["props"])]),"body-cell-status":t(l=>[e(S,{props:l},{default:t(()=>[e(I,{dense:"",filled:"","model-value":l.value,"onUpdate:modelValue":a=>Y(l),options:F.value},null,8,["model-value","onUpdate:modelValue","options"])]),_:2},1032,["props"])]),"body-cell-task":t(l=>[e(S,{props:l},{default:t(()=>[e(I,{dense:"",filled:"","model-value":l.value,"onUpdate:modelValue":a=>Y(l),options:j.value},null,8,["model-value","onUpdate:modelValue","options"])]),_:2},1032,["props"])]),"body-cell-timeCheckedOut":t(l=>[e(S,{props:l},{default:t(()=>[l.row[15]==="Called"?(f(),g("div",Re,u(l.value.format("h:mm:ss A")),1)):_("",!0),l.row[15]==="Called"?(f(),g("div",Ye," Wait: "+u(r(R)[l.rowIndex]),1)):_("",!0)]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination","filter","title","grid","loading"])]))}};export{vl as default};
