import{l as z,bV as E,r as h,c as g,_ as F,B as t,C as l,ar as c,bs as s,d as m,bX as L,E as p,ad as i,as as d,F as b,b5 as k,ay as O,bR as U}from"./index.f532dd3a.js";import{Q as V}from"./QRating.8cc36a07.js";import{Q as _}from"./QInnerLoading.10bc7485.js";import{a as Q,Q as H}from"./QTable.0549a35a.js";import{Q as R}from"./QTr.3fa521d6.js";import{Q as $}from"./QTd.4c1c696b.js";import{u as I}from"./use-quasar.45d0ed96.js";import{u as S}from"./dataStore.67629934.js";import"./app.c2decb41.js";const j=z({props:{category:Object},components:{},setup(e){I();const u=E(),y=h(!0),w=h(!1),{getEmployee:v,updateViewedEmployees:C}=S(),a=g(()=>v(u.params.id)),o=g(()=>(a.value&&a.value.history&&a.value.history[e.category.key]?a.value.history[e.category.key]:[]).sort((r,q)=>r[1].$d>q[1].$d?-1:1)),f=async n=>{const{getter:r}=e.category;y.value=!0,await r(),y.value=!1},D=g(()=>{const{averageDuration:n,showDuration:r}=e.category;return r&&n?n(o.value):null}),T=g(()=>{const{completionRate:n,showCompletion:r}=e.category;return r&&n?n(o.value):null}),B=g(()=>{const{showRating:n,averageRating:r}=e.category;return n&&r?r(o.value):null}),N=n=>{const{viewer:r}=e.category;r&&r(n)};function P(n){}return f(),{props:e,loading:y,loadData:f,rows:o,initialPagination:h({rowsPerPage:100}),removeRow:P,addNew:w,duration:D,completion:T,rating:B,viewData:N}}}),A={key:0,class:"text-dark text-italic text-caption"},G={key:0},X={key:1},J={key:2},K=p("span",{class:"q-mr-sm"},"Rating:",-1),M={key:0,class:"text-caption"},W={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function Y(e,u,y,w,v,C){return t(),l("div",null,[e.addNew?d("",!0):(t(),c(H,{key:0,dense:"",columns:e.category.columns.filter(a=>!a.hide),rows:e.rows,"row-key":a=>a[3],"table-header-class":"bg-dark text-white",class:"sticky-header-table",pagination:e.initialPagination,loading:e.loading,"no-data-label":`This employee has no ${e.category.label}.`},{"top-right":s(()=>[m(L,{color:"secondary",flat:"","icon-right":"refresh",label:"Refresh",onClick:u[0]||(u[0]=a=>e.loadData(!0))})]),"top-left":s(()=>[e.rows.length>0?(t(),l("div",A,[p("div",null,"Total - "+i(e.rows.length)+" "+i(e.category.label),1),e.category.showDuration&&e.duration?(t(),l("div",G,"Avg. Duration - "+i(e.duration.toFixed(2))+" days",1)):d("",!0),e.category.showCompletion&&e.completion?(t(),l("div",X,i(e.category.completionRateOverride?e.category.completionRateOverride:"Completion Rate")+" - "+i(e.completion)+"%",1)):d("",!0),e.category.showRating&&e.rating?(t(),l("div",J,[K,m(V,{modelValue:e.rating,"onUpdate:modelValue":u[1]||(u[1]=a=>e.rating=a),max:"5",size:"xs",color:"accent",icon:"star_border","icon-selected":"star","icon-half":"star_half","no-dimming":"",readonly:""},null,8,["modelValue"])])):d("",!0)])):d("",!0)]),loading:s(()=>[m(_,{showing:e.loading,label:"Loading...","label-class":"text-info"},null,8,["showing"])]),header:s(a=>[m(R,{class:"bg-dark text-white",props:a},{default:s(()=>[e.category.showView?(t(),c(Q,{key:0,"auto-width":""})):d("",!0),(t(!0),l(b,null,k(a.cols,o=>(t(),c(Q,{class:"text-left",key:o.name},{default:s(()=>[O(i(o.label),1)]),_:2},1024))),128))]),_:2},1032,["props"])]),body:s(a=>[m(R,{props:a},{default:s(()=>[e.category.showView?(t(),c($,{key:0},{default:s(()=>[m(U,{class:"cursor-pointer",size:e.$q.screen.gt.sm?"sm":"xs",color:"info",round:"",dense:"",onClick:o=>e.viewData(a.row),name:a.expand?"visibility_off":"visibility"},null,8,["size","onClick","name"])]),_:2},1024)):d("",!0),(t(!0),l(b,null,k(a.cols,o=>(t(),c($,{key:o.name,props:a},{default:s(()=>[o.showRating?(t(),c(V,{key:1,modelValue:o.value,"onUpdate:modelValue":f=>o.value=f,max:"5",size:"xs",color:"accent",icon:"star_border","icon-selected":"star","icon-half":"star_half","no-dimming":"",readonly:""},null,8,["modelValue","onUpdate:modelValue"])):(t(),l("span",M,i(o.value),1))]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"no-data":s(({message:a})=>[p("div",W,[p("span",null,i(a),1)])]),_:1},8,["columns","rows","row-key","pagination","loading","no-data-label"]))])}var le=F(j,[["render",Y]]);export{le as H};
