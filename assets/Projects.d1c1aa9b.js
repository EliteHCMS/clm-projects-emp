import{Q as Je}from"./QPage.0b5a8d20.js";import{Q as H,a as fe,b as _,c as be}from"./QTabPanels.b693783b.js";import{Q as Pe}from"./QToolbar.c8984c40.js";import{u as ne}from"./use-quasar.e4511157.js";import{k as M,c as D,_ as Y,z as d,A as f,C as a,d as o,bh as l,c3 as z,c2 as T,aa as m,cx as P,b$ as De,cy as ee,c6 as w,bE as oe,c1 as te,r as V,w as je,aY as Q,am as q,F as B,aX as W,an as j,cz as Te,E as U,ar as Re,v as Ae,bX as x,at as he,bj as Ve,bC as Ce,d5 as Ne}from"./index.229e64ce.js";import{Q as ge}from"./QMarkupTable.d4cb1a7a.js";import{a as Z}from"./QSelect.8a52fd77.js";import{Q as ae}from"./QForm.f723faf4.js";import{Q as Fe}from"./QSplitter.c2063ce1.js";import{a as O,e as Qe,b as ie,u as R,c as I,d as Me}from"./array.501827dd.js";import{e as Ye}from"./export-file.deb9806e.js";import{b as X,q as L,u as Ie,f as $e,m as re}from"./quickbase.94e4f77e.js";import{dayjs as ve}from"./dayjs.a43389e4.js";import{Q as Se}from"./QSpace.54895883.js";import{Q as ye}from"./QTable.7266edca.js";import{p as Le}from"./VueTelInput.2712a8d2.js";import{Q as Oe}from"./QBadge.74329522.js";import{Q as ke}from"./QSlideTransition.60080786.js";import"./QResizeObserver.6208760f.js";import"./rtl.65b79c69.js";import"./use-panel.d8eecf82.js";import"./touch.d8ab472d.js";import"./selection.7a6c9b60.js";import"./QChip.dd85d21d.js";import"./QMenu.bb32b8eb.js";import"./position-engine.9238d783.js";import"./TouchPan.d5a2caaa.js";import"./_commonjsHelpers.dfee5925.js";import"./localForage.7afe4812.js";import"./index.7dbe61ef.js";import"./i18n.cb2b8ad6.js";import"./api.37aa3d8d.js";import"./QList.223811d2.js";import"./use-fullscreen.57f9ce89.js";const ze=M({props:{job:Object,craft:Object},setup(e,t){const u=ne(),{udpateProjectCrafts:c}=X(),p=D(()=>e.craft.options.jobs.find(g=>g[3]===e.job[13]).aliases),b=D(()=>O({alias:O().required().label("Custom Job Title"),fixedRate:Qe().moreThan(7.25,"Fixed rate must be greater than minimum wage.").lessThan(1e3).label("Fixed Rate").nullable()})),{meta:r,errors:s,handleSubmit:n,handleReset:E}=ie({validationSchema:b,initialValues:{alias:{3:e.job[9],7:e.job[18]},fixedRate:e.job.fixedRate>0?e.job.fixedRate:null}}),{value:C}=R("alias"),{value:A}=R("fixedRate"),F=n(async $=>{console.log($),u.loading.show();const g={3:{value:e.job[3]},20:{value:e.craft[3]}};C.value!=={3:e.job[9],7:e.job[18]}&&Object.assign(g,{9:{value:$.alias[3]}}),A.value!==e.job.fixedRate&&Object.assign(g,{155:{value:$.fixedRate}});try{const{data:N}=await L.upsertRecordsXML({to:"bpzpx5m7x",data:[g],fieldsToReturn:[153],formatObject:153});N.length>0&&(c({craft:N[0][153]}),E(),u.loading.hide(),u.notify({type:"positive",message:"New job added!"}),t.emit("closeEditJob"))}catch{u.notify({type:"negative",message:"Something went wrong"})}});async function S($,g){u.dialog({title:"Confirm",message:`Confirm you want to add "${$}" as a new alias.`,cancel:!0,persistent:!0}).onOk(async()=>{try{const{data:N}=await L.upsertRecordsXML({to:"bpzpi5rjh",data:[{6:{value:e.job[13]},7:{value:$},11:{value:"No"}}],fieldsToReturn:[25],formatObject:25});console.log(N),N.length>0&&(C.value=N[0][25],g(N[0][25]))}catch{u.notify({type:"negative",message:"Something went wrong"})}}).onCancel(()=>{g()})}return{formMeta:r,formErrors:s,submit:F,alias:C,fixedRate:A,aliasOptions:p,submitAlias:S}}}),Xe={class:"text-body1 text-white"},Be={class:"text-caption"},We={class:"text-caption"};function He(e,t,u,c,p,b){return d(),f("div",null,[a("div",null,[o(ae,{onSubmit:oe(e.submit,["prevent"])},{default:l(()=>[o(z,null,{default:l(()=>[o(T,{class:"bg-dark"},{default:l(()=>[a("div",Xe,"Edit "+m(e.craft[10])+" "+m(e.job[18]),1)]),_:1}),o(T,null,{default:l(()=>[o(Z,{class:"q-mb-sm",dense:"",label:"Select Custom Job Title (Alias)","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.alias,"onUpdate:modelValue":t[0]||(t[0]=r=>e.alias=r),options:e.aliasOptions,"option-label":"7","display-value":`${e.alias?e.alias[7]:""}`,"bottom-slots":"",error:!!e.formErrors.alias,onNewValue:e.submitAlias,"use-input":""},{error:l(()=>[a("div",Be,m(e.formErrors.alias),1)]),_:1},8,["modelValue","options","display-value","error","onNewValue"]),o(P,{step:"any",prefix:"$",type:"number",dense:"",label:"Fixed Rate",modelValue:e.fixedRate,"onUpdate:modelValue":t[1]||(t[1]=r=>e.fixedRate=r),error:!!e.formErrors.fixedRate,"bottom-slots":""},{error:l(()=>[a("div",We,m(e.formErrors.fixedRate),1)]),_:1},8,["modelValue","error"])]),_:1}),o(De),o(ee,{class:"bg-accent",align:"right"},{default:l(()=>[o(w,{size:e.$q.screen.lt.md?"sm":"",color:"secondary",label:"Cancel",onClick:t[2]||(t[2]=r=>e.$emit("closeEditJob"))},null,8,["size"]),o(w,{type:"submit",size:e.$q.screen.lt.md?"sm":"",color:"primary",label:"Save"},null,8,["size"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])])])}var _e=Y(ze,[["render",He]]);const Ge=[{name:0,label:"Job Title",align:"left",field:e=>e[18],format:e=>`${e}`,sortable:!0,required:!0},{name:1,label:"Avg. Rate",align:"right",field:e=>e.avgRate,format:e=>`$ ${e.toFixed(2)}`,sortable:!0},{name:3,label:"Times Requested",align:"right",field:e=>e.timesRequested,format:e=>`${e}`,sortable:!0},{name:4,label:"Quantity Requested",align:"right",field:e=>e.qtyRequested,format:e=>`${e}`,sortable:!0}],Ee=[{name:0,label:"Craft",align:"left",field:e=>e.craft,format:e=>`${e}`,sortable:!0,required:!0},{name:1,label:"Job Title",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0,required:!0},{name:2,label:"Contract Rate",align:"left",field:e=>e.rate,format:e=>`${e}`,sortable:!0,required:!0}],Ke=M({components:{EditJobDialog:_e},setup(){const e=ne(),{projectCrafts:t,active:u}=te(X()),{udpateProjectCrafts:c}=X(),p=V(t.value[0][3]),b=V(!1),r=V(!1),s=V(null),n=V(null);je(u,(h,v)=>{p.value=h.crafts.sort((i,y)=>i.order>y.order?1:-1)[0][3]});const E=D(()=>{const h=[];return t.value.forEach(v=>{for(let i=0;i<v.classifications.length;i++)h.push({craft:v[10],title:v.classifications[i][18],rate:v.classifications[i].fixedRate>0?`$${v.classifications[i].fixedRate.toFixed(2)}`:"N/A"})}),h}),C=D(()=>{const h=t.value.find(v=>v[3]===p.value).classifications;return h!==void 0?h.sort((v,i)=>v.order>i.order||v.order===i.order&&v.fixedRate>i.fixedRate?-1:1):[]}),A=O({job:O().required("Job is required."),alias:O().required("Alias is required.").nullable()}),{meta:F,errors:S,handleSubmit:$,handleReset:g}=ie({validationSchema:A}),{value:N}=R("job"),{value:G}=R("alias"),K=$(async h=>{const v=t.value.find(i=>i[9]===h.job[13]);if(v===void 0)e.notify({type:"negative",message:"Something went wrong"});else try{const{data:i}=await L.upsertRecordsXML({to:"bpzpx5m7x",data:[{9:{value:h.alias[3]},13:{value:h.job[3]},20:{value:v[3]}}],fieldsToReturn:[153],formatObject:153});i.length>0&&(c({craft:i[0][153]}),g(),b.value=!1,e.notify({type:"positive",message:"New job added!"}))}catch{e.notify({type:"negative",message:"Something went wrong"})}});async function k(h,v){e.dialog({title:"Confirm",message:`Confirm you want to add "${h}" as a new alias.`,cancel:!0,persistent:!0}).onOk(async()=>{try{const{data:i}=await L.upsertRecordsXML({to:"bpzpi5rjh",data:[{6:{value:N.value[3]},7:{value:h},11:{value:"No"}}],fieldsToReturn:[25],formatObject:25});console.log(i),i.length>0&&(G.value=i[0][25],v(i[0][25]))}catch{e.notify({type:"negative",message:"Something went wrong"})}}).onCancel(()=>{v()})}function J(){b.value=!1,g()}function le({craft:h,job:v}){s.value=h,n.value=v,r.value=!0,console.log(h),console.log(v)}function de(){s.value=null,n.value=null,r.value=!1}function ue(h,v,i){let y=v!==void 0?v(h,i):h;return y=y==null?"":String(y),y=y.split('"').join('""'),`"${y}"`}return{projectCrafts:t,tab:p,columns:Ge,initialPagination:{rowsPerPage:100},splitValue:V(20),showAddJob:b,showEditJob:r,formMeta:F,formErrors:S,job:N,alias:G,submitJob:K,submitAlias:k,cancelAddJob:J,editJob:le,rows:C,editJobCraft:s,editJobJob:n,closeEditJob:de,exportAllJobs(){const h=[Ee.map(i=>ue(i.label))].concat(E.value.map(i=>Ee.map(y=>ue(typeof y.field=="function"?y.field(i):i[y.field===void 0?y.name:y.field],y.format,i)).join(","))).join(`\r
`);Ye(`${ve().format("MM.DD.YYYY")} ${u.value[20]} All-Jobs-Export.csv`,h,"text/csv")!==!0&&e.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}}}}),Ze={key:0},xe={key:0,class:"q-mb-sm"},et=a("thead",{class:"bg-dark text-white"},[a("tr",null,[a("th",{class:"text-left"},"Job Title"),a("th",{class:"text-right"},"Fixed Rate"),a("th",{class:"text-right"},"Times Requested"),a("th",{class:"text-right"},"Qty Requested"),a("th")])],-1),tt={class:"text-left"},ot={class:"text-right"},at={class:"text-right"},lt={class:"text-right"},st={class:"text-right"},rt={key:1},nt={class:"row justify-between"},it={class:"col-5"},dt={class:"text-caption"},ut={class:"col-6"},mt={class:"text-caption"},pt={key:1},ct={key:0},ft={class:"q-mb-sm"},bt=a("thead",{class:"bg-dark text-white"},[a("tr",null,[a("th",{class:"text-left"},"Job Title"),a("th",{class:"text-right"},"Fixed Rate"),a("th",{class:"text-right"},"Avg. Rate"),a("th",{class:"text-right"},"Times Requested"),a("th",{class:"text-right"},"Quantity"),a("th")])],-1),gt={class:"text-left"},vt={class:"text-right"},yt={class:"text-right"},ht={class:"text-right"},$t={class:"text-right"},wt={class:"text-right"},qt={key:1},Vt={class:"text-caption"},Ct={class:"text-caption"};function Nt(e,t,u,c,p,b){const r=Q("edit-job-dialog");return d(),f("div",null,[e.$q.screen.gt.sm?(d(),q(Fe,{key:0,modelValue:e.splitValue,"onUpdate:modelValue":t[5]||(t[5]=s=>e.splitValue=s)},{before:l(()=>[o(fe,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=s=>e.tab=s),vertical:e.$q.screen.gt.md,align:"left","indicator-color":"accent","active-bg-color":"dark","active-color":"white"},{default:l(()=>[(d(!0),f(B,null,W(e.projectCrafts,s=>(d(),q(H,{key:s[3],name:s[3],label:s[10]},null,8,["name","label"]))),128))]),_:1},8,["modelValue","vertical"])]),after:l(()=>[o(be,{modelValue:e.tab,"onUpdate:modelValue":t[4]||(t[4]=s=>e.tab=s),animated:"",vertical:e.$q.screen.gt.md},{default:l(()=>[(d(!0),f(B,null,W(e.projectCrafts,s=>(d(),q(_,{key:s[3],name:s[3],class:"q-pt-none"},{default:l(()=>[e.showAddJob?(d(),f("div",rt,[o(ae,{onSubmit:oe(e.submitJob,["prevent"])},{default:l(()=>[o(z,{flat:""},{default:l(()=>[o(T,null,{default:l(()=>[a("div",nt,[a("div",it,[o(Z,{class:"q-mb-sm",dense:"",label:"Select Default Job","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.job,"onUpdate:modelValue":t[2]||(t[2]=n=>e.job=n),options:s.options.jobs,"option-label":"9","display-value":`${e.job?e.job[9]:""}`,"bottom-slots":"",error:!!e.formErrors.job},{error:l(()=>[a("div",dt,m(e.formErrors.job),1)]),_:2},1032,["modelValue","options","display-value","error"])]),a("div",ut,[o(Z,{disable:!e.job,class:"q-mb-sm",dense:"",label:"Select Custom Job Title (Alias)","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.alias,"onUpdate:modelValue":t[3]||(t[3]=n=>e.alias=n),options:e.job?e.job.aliases:[],"option-label":"7","display-value":`${e.alias?e.alias[7]:""}`,"bottom-slots":"",error:!!e.formErrors.alias,onNewValue:e.submitAlias,"use-input":""},{error:l(()=>[a("div",mt,m(e.formErrors.alias),1)]),_:1},8,["disable","modelValue","options","display-value","error","onNewValue"])])])]),_:2},1024),o(ee,{align:"right"},{default:l(()=>[o(w,{color:"secondary",label:"Cancel",onClick:e.cancelAddJob},null,8,["onClick"]),o(w,{color:"primary",label:"Submit Job",type:"submit"})]),_:1})]),_:2},1024)]),_:2},1032,["onSubmit"])])):(d(),f("div",Ze,[e.$can("create","jobs")?(d(),f("div",xe,[o(w,{color:"primary",label:"Add Another Job",onClick:t[1]||(t[1]=n=>e.showAddJob=!0)}),e.$can("read","jobs")?(d(),q(w,{key:0,class:"q-ml-sm",color:"info",label:"Export All Jobs",onClick:e.exportAllJobs},null,8,["onClick"])):j("",!0)])):j("",!0),o(ge,null,{default:l(()=>[et,a("tbody",null,[(d(!0),f(B,null,W(e.rows,n=>(d(),f("tr",{key:n[3]},[a("td",tt,m(n[18]),1),a("td",ot,m(n.fixedRate>0?`$ ${n.fixedRate.toFixed(2)}`:"Edit to Add"),1),a("td",at,m(n.timesRequested),1),a("td",lt,m(n.qtyRequested),1),a("td",st,[e.$can("manage","jobs")?(d(),q(w,{key:0,size:"sm",label:"edit",color:"primary",onClick:E=>e.editJob({craft:s,job:n})},null,8,["onClick"])):j("",!0)])]))),128))])]),_:2},1024)]))]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue","vertical"])]),_:1},8,["modelValue"])):(d(),f("div",pt,[o(fe,{modelValue:e.tab,"onUpdate:modelValue":t[6]||(t[6]=s=>e.tab=s),align:"left",class:"shadow-2","indicator-color":"accent"},{default:l(()=>[(d(!0),f(B,null,W(e.projectCrafts,s=>(d(),q(H,{key:s[3],name:s[3],label:s.abbr},null,8,["name","label"]))),128))]),_:1},8,["modelValue"]),o(be,{modelValue:e.tab,"onUpdate:modelValue":t[10]||(t[10]=s=>e.tab=s),animated:""},{default:l(()=>[(d(!0),f(B,null,W(e.projectCrafts,s=>(d(),q(_,{key:s[3],name:s[3]},{default:l(()=>[e.showAddJob?(d(),f("div",qt,[o(ae,{onSubmit:oe(e.submitJob,["prevent"])},{default:l(()=>[o(z,{flat:""},{default:l(()=>[o(T,null,{default:l(()=>[o(Z,{class:"q-mb-sm",dense:"",label:"Select Default Job","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.job,"onUpdate:modelValue":t[8]||(t[8]=n=>e.job=n),options:s.options.jobs,"option-label":"9","display-value":`${e.job?e.job[9]:""}`,"bottom-slots":"",error:!!e.formErrors.job},{error:l(()=>[a("div",Vt,m(e.formErrors.job),1)]),_:2},1032,["modelValue","options","display-value","error"]),o(Z,{disabled:!e.job,class:"q-mb-sm",dense:"",label:"Select Custom Job Title (Alias)","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.alias,"onUpdate:modelValue":t[9]||(t[9]=n=>e.alias=n),options:e.job?e.job.aliases:[],"option-label":"7","display-value":`${e.alias?e.alias[7]:""}`,"bottom-slots":"",error:!!e.formErrors.alias,onNewValue:e.submitAlias,"use-input":""},{error:l(()=>[a("div",Ct,m(e.formErrors.alias),1)]),_:1},8,["disabled","modelValue","options","display-value","error","onNewValue"])]),_:2},1024),o(ee,{align:"right"},{default:l(()=>[o(w,{color:"secondary",label:"Cancel",onClick:e.cancelAddJob},null,8,["onClick"]),o(w,{color:"primary",label:"Submit Job",type:"submit"})]),_:1})]),_:2},1024)]),_:2},1032,["onSubmit"])])):(d(),f("div",ct,[a("div",ft,[o(w,{color:"primary",label:"Add Another Job",onClick:t[7]||(t[7]=n=>e.showAddJob=!0)})]),o(ge,null,{default:l(()=>[bt,a("tbody",null,[(d(!0),f(B,null,W(e.rows,n=>(d(),f("tr",{key:n[3]},[a("td",gt,m(n[18]),1),a("td",vt,m(n.fixedRate>0?`$ ${n.fixedRate.toFixed(2)}`:"N/A"),1),a("td",yt,"$ "+m(n.avgRate.toFixed(2)),1),a("td",ht,m(n.timesRequested),1),a("td",$t,m(n.qtyRequested),1),a("td",wt,[o(w,{size:"sm",label:"edit",color:"primary",onClick:E=>e.editJob(n)},null,8,["onClick"])])]))),128))])]),_:1})]))]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])])),o(Te,{modelValue:e.showEditJob,"onUpdate:modelValue":t[11]||(t[11]=s=>e.showEditJob=s),persistent:""},{default:l(()=>[o(r,{craft:e.editJobCraft,job:e.editJobJob,onCloseEditJob:e.closeEditJob},null,8,["craft","job","onCloseEditJob"])]),_:1},8,["modelValue"])])}var kt=Y(Ke,[["render",Nt]]);const Et=M({components:{phoneNumberInput:Le},setup(e,t){const u=ne(),c=V(10),p=V(null),{active:b}=te(X()),{userPermissions:r,getUser:s}=te(Ie()),{addUser:n}=X(),E=D(()=>{const i=r.value.find(y=>y[7]==="create"&&y[16]==="users");return i!==void 0?i.roles:[]}),C=D(()=>{const i=new RegExp("^[0-9]{"+c.value+"}","g");return O({firstName:I().required().label("First Name"),lastName:I().required().label("Last Name"),email:I().email().required().label("Email"),phoneNumber:I().matches(i,{excludeEmptyString:!0,message:"Valid Phone Number Required!"}).required().label("Phone Number"),role:O().required().nullable().label("Role"),workdayId:I().required().label("Workday ID")})}),{meta:A,errors:F,handleSubmit:S,handleReset:$}=ie({validationSchema:C}),{value:g}=R("firstName"),{value:N}=R("lastName"),{value:G}=R("email"),{value:K}=R("phoneNumber"),{value:k}=R("role"),{value:J}=R("workdayId"),le=S(async i=>{console.log(i);const y={userType:"Project User",phoneNumber:`+${p.value?p.value.dialCode:"1"}${i.phoneNumber}`,email:i.email};if(b.value.users.filter(se=>se[6]===y.email||se[8]===y.phoneNumber).length>0)u.dialog({title:"Alert",message:"Your project already has a user with that phone or email."}).onOk(()=>{t.emit("userAdded")});else{const se=await L.checkIfUserExist(y);if(se){const{data:me}=await L.upsertRecordsXML({to:"br598isx6",data:[{6:{value:se[3]},7:{value:"Project"},9:{value:b.value[3]}}],fieldsToReturn:[28],formatObject:28});me.length>0&&(n({user:me[0][28]}),u.notify({type:"positive",message:"User successfully added"}),t.emit("userAdded"))}else{const me=G.value.match(/^([^@]*)@/)[1],Ue=Object.assign({phoneNumber:K.value},p.value),{data:qe}=await L.upsertRecordsXML({to:"br4pxrbs6",data:[{6:{value:i.email},7:{value:"temp"},8:{value:`+${p.value?p.value.dialCode:"1"}${i.phoneNumber}`},9:{value:JSON.stringify(Ue)},10:{value:"Active"},11:{value:i.role[3]},17:{value:!0},23:{value:s.value[3]},24:{value:s.value[3]},25:{value:new Date},26:{value:new Date},32:{value:"Project User"},33:{value:me},35:{value:g.value},37:{value:N.value},49:{value:!0},50:{value:!0},70:{value:i.workdayId}}],fieldsToReturn:[3,96],formatObject:96});if(qe[0]!==void 0){const pe=await L.upsertRecordsXML({to:"br598isx6",data:[{6:{value:qe[0][3]},7:{value:"Project"},9:{value:b.value[3]}}],fieldsToReturn:[28],formatObject:28});pe.data[0]!==void 0&&(n({user:pe.data[0][28]}),console.log(pe.data[0][28]),u.dialog({title:"Confirm",message:"User successfully added. Would you like to send them an invite?",cancel:!0,persistent:!0}).onOk(async()=>{(await L.upsertRecordsXML({to:"br4pxrbs6",data:[{3:{value:pe.data[0][28][3]},93:{value:new Date}}],fieldsToReturn:[3]})).data[0]!==void 0&&(u.notify({type:"positive",message:"User successfully added"}),u.notify({type:"positive",message:"User invite submitted"}),t.emit("userAdded"))}).onCancel(()=>{u.notify({type:"positive",message:"User successfully added"}),t.emit("userAdded")}))}}}$()}),de=D(()=>{const i=[];return b.value.users.forEach(y=>{console.log(y),i.push(y[9].phoneNumber)}),i});je(K,i=>{de.value.includes(i)&&u.notify({type:"negative",message:"Phone Number is already in use!",timeout:1e4,position:u.screen.lt.md?"top":"center"})});const ue=i=>{p.value=i},h=i=>{c.value=i};function v(){$(),t.emit("userCanceled")}return console.log(r.value,de.value),{updateCountry:ue,updatePhoneMaxLength:h,firstName:g,lastName:N,email:G,phoneNumber:K,role:k,workdayId:J,formMeta:A,formErrors:F,submitUser:le,active:b,roleOptions:E,cancel:v}}}),jt=a("div",{class:"text-primary text-h6 q-mb-sm"},"Add a New User",-1),Rt={class:"row justify-between"},At={class:"row justify-between"},St={class:"text-caption"},Ut={class:"text-caption"};function Jt(e,t,u,c,p,b){const r=Q("phone-number-input");return d(),f("div",null,[o(z,null,{default:l(()=>[o(ae,{onSubmit:oe(e.submitUser,["prevent"])},{default:l(()=>[o(T,null,{default:l(()=>[jt,a("div",Rt,[a("div",{class:U(["col-12 col-md-4",e.$q.screen.lt.md?"q-pt-sm":"q-pr-sm"])},[o(P,{dense:"",outlined:"",label:"First Name",modelValue:e.firstName,"onUpdate:modelValue":t[0]||(t[0]=s=>e.firstName=s),error:!!e.formErrors.firstName},null,8,["modelValue","error"])],2),a("div",{class:U(["col-12 col-md-4",e.$q.screen.lt.md?"q-pt-sm":"q-pr-sm"])},[o(P,{dense:"",outlined:"",label:"Last Name",modelValue:e.lastName,"onUpdate:modelValue":t[1]||(t[1]=s=>e.lastName=s),error:!!e.formErrors.lastName},null,8,["modelValue","error"])],2),a("div",{class:U(["col-12 col-md-4",e.$q.screen.lt.md?"q-pt-sm":"q-pr-sm"])},[o(P,{dense:"",outlined:"",label:"Workday ID",modelValue:e.workdayId,"onUpdate:modelValue":t[2]||(t[2]=s=>e.workdayId=s),error:!!e.formErrors.workdayId},null,8,["modelValue","error"])],2)]),a("div",At,[a("div",{class:U(["col-12 col-md-4",e.$q.screen.lt.md?"q-pt-sm":"q-pr-sm"])},[o(r,{name:"phoneNumber",class:"col-xs-12 col-sm-12",outlined:"",modelValue:e.phoneNumber,"onUpdate:modelValue":t[3]||(t[3]=s=>e.phoneNumber=s),label:"Phone Number",tabindex:"3",onMaxLengthChanged:e.updatePhoneMaxLength,error:!!e.formErrors.phoneNumber,"error-message":e.formErrors.phoneNumber,onCountryChanged:e.updateCountry,dense:""},null,8,["modelValue","onMaxLengthChanged","error","error-message","onCountryChanged"])],2),a("div",{class:U(["col-12 col-md-4",e.$q.screen.lt.md?"q-pt-sm":"q-pr-sm"])},[o(P,{dense:"",outlined:"",label:"Email","bottom-slots":"",modelValue:e.email,"onUpdate:modelValue":t[4]||(t[4]=s=>e.email=s),error:!!e.formErrors.email},{error:l(()=>[a("div",St,m(e.formErrors.email),1)]),_:1},8,["modelValue","error"])],2),a("div",{class:U(["col-12 col-md-4",e.$q.screen.lt.md?"q-pt-sm":"q-pr-sm"])},[o(Z,{dense:"",outlined:"",label:"Role","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.role,"onUpdate:modelValue":t[5]||(t[5]=s=>e.role=s),options:e.roleOptions,"option-label":"6","display-value":`${e.role?e.role[6]:""}`,"bottom-slots":"",error:!!e.formErrors.role},{error:l(()=>[a("div",Ut,m(e.formErrors.role),1)]),_:1},8,["modelValue","options","display-value","error"])],2)])]),_:1}),o(ee,{align:"right"},{default:l(()=>[o(w,{color:"secondary",onClick:e.cancel,label:"Cancel"},null,8,["onClick"]),o(w,{color:"primary",type:"submit",label:"Submit"})]),_:1})]),_:1},8,["onSubmit"])]),_:1})])}var Pt=Y(Et,[["render",Jt]]);const Dt=[{name:0,label:"Date Created",align:"left",field:e=>e[1],format:e=>`${$e.formatDate(e.$d,"MM/DD/YYYY")}`,sortable:!0},{name:1,label:"Name",align:"left",field:e=>e[35],format:(e,t)=>`${e} ${t[37]}`,sortable:!0},{name:2,label:"Role",align:"left",field:e=>e[44],format:e=>`${e}`,sortable:!0},{name:3,label:"Email",align:"left",field:e=>e[6],format:e=>`${e}`,sortable:!0},{name:4,label:"Last Access",align:"left",field:e=>e.lastLogin,format:(e,t)=>`${t.registered?e.date:"Never"}`,sortable:!0}],Tt=M({components:{CreateUser:Pt},setup(){const{usersForProject:e}=te(X()),t=V(!1);function u(){t.value=!1}function c(p){console.log(p)}return{usersForProject:e,columns:Dt,initialPagination:{rowsPerPage:100},showAddUser:t,userAdded:u,sendInvite:c}}}),Ft={key:1};function Qt(e,t,u,c,p,b){const r=Q("create-user");return d(),f("div",null,[e.showAddUser?(d(),f("div",Ft,[o(r,{onUserAdded:e.userAdded,onUserCanceled:t[1]||(t[1]=s=>e.showAddUser=!1)},null,8,["onUserAdded"])])):(d(),q(ye,{key:0,rows:e.usersForProject.sort((s,n)=>s[44]>n[44]?-1:1),columns:e.columns,"hide-pagination":!0,"row-key":"name",pagination:e.initialPagination,"table-header-class":"bg-dark text-white"},Re({_:2},[e.$can("create","users")?{name:"top",fn:l(()=>[o(w,{color:"primary",label:"Add Another User",onClick:t[0]||(t[0]=s=>e.showAddUser=!0)}),o(Se)])}:void 0]),1032,["rows","columns","pagination"]))])}var Mt=Y(Tt,[["render",Qt]]);const Yt=M({setup(e,t){const u=V(10),c=V(null),{capitalize:p}=Ae,{updateNewEmployee:b}=re(),r=D(()=>{const g=new RegExp("^[0-9]{"+u.value+"}","g");return O({firstName:I().required().label("First Name"),lastName:I().required().label("Last Name"),phoneNumber:I().matches(g,{excludeEmptyString:!0,message:"Valid Phone Number Required!"}).required().label("Phone Number")})}),{meta:s,errors:n,handleSubmit:E,handleReset:C}=ie({validationSchema:r}),{value:A}=R("firstName"),{value:F}=R("lastName"),{value:S}=R("phoneNumber"),$=E(async g=>{const N={20:p(g.firstName.trim().toLowerCase()),22:p(g.lastName.trim().toLowerCase()),25:g.phoneNumber};b({info:N}),t.emit("complete",1),C()});return{country:c,firstName:A,lastName:F,phoneNumber:S,formMeta:s,formErrors:n,submit:$,cancel(){C(),t.emit("cancel")}}}}),It={class:"row justify-between"},Lt={class:"text-caption"},Ot={class:"text-caption"},zt={class:"text-caption"};function Xt(e,t,u,c,p,b){return d(),f("div",null,[o(ae,{onSubmit:oe(e.submit,["prevent"])},{default:l(()=>[o(z,{flat:"",class:"q-pl-md q-mt-sm"},{default:l(()=>[o(T,{class:"q-px-none q-pb-none"},{default:l(()=>[a("div",It,[a("div",{class:U(["col-12 col-md-4",e.$q.screen.lt.md?"q-pt-sm":"q-pr-sm"])},[o(P,{dense:"",label:"First Name",modelValue:e.firstName,"onUpdate:modelValue":t[0]||(t[0]=r=>e.firstName=r),error:!!e.formErrors.firstName,"bottom-slots":""},{error:l(()=>[a("div",Lt,m(e.formErrors.firstName),1)]),_:1},8,["modelValue","error"])],2),a("div",{class:U(["col-12 col-md-4",e.$q.screen.lt.md?"q-pt-sm":"q-pr-sm"])},[o(P,{dense:"",label:"Last Name",modelValue:e.lastName,"onUpdate:modelValue":t[1]||(t[1]=r=>e.lastName=r),error:!!e.formErrors.lastName,"bottom-slots":""},{error:l(()=>[a("div",Ot,m(e.formErrors.lastName),1)]),_:1},8,["modelValue","error"])],2),a("div",{class:U(["col-12 col-md-4",e.$q.screen.lt.md?"q-pt-sm":"q-pr-sm"])},[o(P,{dense:"",label:"Phone Number",modelValue:e.phoneNumber,"onUpdate:modelValue":t[2]||(t[2]=r=>e.phoneNumber=r),error:!!e.formErrors.phoneNumber,"bottom-slots":""},{error:l(()=>[a("div",zt,m(e.formErrors.phoneNumber),1)]),_:1},8,["modelValue","error"])],2)])]),_:1}),o(ee,{align:"right"},{default:l(()=>[o(w,{color:"secondary",label:"Cancel",onClick:e.cancel},null,8,["onClick"]),o(w,{color:"primary",label:"Submit",type:"submit"})]),_:1})]),_:1})]),_:1},8,["onSubmit"])])}var Bt=Y(Yt,[["render",Xt]]);const Wt=M({setup(e,t){const u=V(!0),{updateNewEmployee:c}=re(),p=D(()=>O({ssn:I().matches(/^[0-9]{9}/g,{excludeEmptyString:!0,message:"9 Digits required."}).nullable().required().label("Social Security Number"),ssnConfirmation:I().oneOf([Me("ssn"),null],"Social Security Number must match").required().nullable().label("Confirm Social Security Number")})),{meta:b,errors:r,handleSubmit:s,handleReset:n}=ie({validationSchema:p}),{value:E}=R("ssn"),{value:C}=R("ssnConfirmation"),A=s(async S=>{console.log(S);const $=await F();if($)c({info:$}),t.emit("complete",2),n();else{const g={109:S.ssn};c({info:g}),t.emit("complete",2),n()}}),F=async()=>{const $=[{8:{value:`{'188'.EX.'${E.value}'}AND{'509'.EX.'false'}`},7:{value:"Employees"},9:{value:12}}],{data:g}=await L.fetchFromHiringApp({fields:$});return g[0]?g[0]:null};return{ssn:E,ssnConfirmation:C,formMeta:b,formErrors:r,submit:A,isPwd:u,cancel(){n(),t.emit("cancel")}}}}),Ht={class:"row"},_t={class:"col-12 col-md-5"},Gt={class:"text-caption"},Kt={class:"text-caption"};function Zt(e,t,u,c,p,b){return d(),f("div",null,[o(ae,{onSubmit:oe(e.submit,["prevent"])},{default:l(()=>[o(z,{flat:"",class:"q-pl-md q-mt-sm"},{default:l(()=>[o(T,{class:"q-px-none q-pb-none"},{default:l(()=>[a("div",Ht,[a("div",_t,[o(P,{dense:"",label:"Enter Social Security Number",mask:"#########",modelValue:e.ssn,"onUpdate:modelValue":t[0]||(t[0]=r=>e.ssn=r),maxlength:"9",type:"password",error:!!e.formErrors.ssn,"bottom-slots":""},{error:l(()=>[a("div",Gt,m(e.formErrors.ssn),1)]),prepend:l(()=>[o(x,{name:"lock"})]),_:1},8,["modelValue","error"]),o(P,{dense:"",label:"Confirm Social Security Number",mask:"#########",modelValue:e.ssnConfirmation,"onUpdate:modelValue":t[2]||(t[2]=r=>e.ssnConfirmation=r),maxlength:"9",type:e.isPwd?"password":"text",error:!!e.formErrors.ssnConfirmation,"bottom-slots":""},{error:l(()=>[a("div",Kt,m(e.formErrors.ssnConfirmation),1)]),prepend:l(()=>[o(x,{name:"lock"})]),append:l(()=>[o(x,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:t[1]||(t[1]=r=>e.isPwd=!e.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type","error"])])])]),_:1}),o(ee,{align:"right"},{default:l(()=>[o(w,{color:"secondary",label:"Cancel",onClick:e.cancel},null,8,["onClick"]),o(w,{color:"primary",label:"Submit",type:"submit"})]),_:1})]),_:1})]),_:1},8,["onSubmit"])])}var xt=Y(Wt,[["render",Zt]]);const eo=M({components:{Personal:Bt,EnterSsn:xt},setup(){const e=V(0),{getNewEmployee:t}=re();return{step:e,personalComplete(u){e.value=u},ssnComplete(u){e.value=u,console.log(t)}}}}),to=he(" Employee Personal Information "),oo=he(" Identification ");function ao(e,t,u,c,p,b){const r=Q("personal"),s=Q("enter-ssn");return d(),f("div",null,[o(z,null,{default:l(()=>[o(T,null,{default:l(()=>[a("div",{class:U(["text-primary",e.$q.screen.gt.sm?"text-h6":"text-body1"])},"Add a New Employee",2),a("div",{class:U(["text-dark text-italic",e.$q.screen.gt.sm?"text-body2":"text-caption"])},"Follow these steps to add a new employee.",2)]),_:1}),o(T,null,{default:l(()=>[a("div",{class:U([e.$q.screen.gt.sm?"text-body1":"text-body2",e.step===0?"text-info":e.step>0?"text-positive":"text-secondary"])},[e.$q.screen.gt.sm?(d(),q(x,{key:0,size:"md",color:e.step===0?"info":e.step>0?"positive":"secondary",name:"account_circle"},null,8,["color"])):j("",!0),to],2),e.step===0?(d(),q(r,{key:0,onComplete:e.personalComplete,onCancel:t[0]||(t[0]=n=>e.$emit("cancelAddEmployee"))},null,8,["onComplete"])):j("",!0)]),_:1}),o(T,null,{default:l(()=>[a("div",{class:U([e.$q.screen.gt.sm?"text-body1":"text-body2",e.step===1?"text-info":e.step>1?"text-positive":"text-secondary"])},[e.$q.screen.gt.sm?(d(),q(x,{key:0,size:"md",color:e.step===1?"info":e.step>1?"positive":"secondary",name:"admin_panel_settings"},null,8,["color"])):j("",!0),oo],2),e.step===1?(d(),q(s,{key:0,onComplete:e.ssnComplete,onCancel:t[1]||(t[1]=n=>e.step=0)},null,8,["onComplete"])):j("",!0)]),_:1})]),_:1})])}var lo=Y(eo,[["render",ao]]);const{capitalize:ce}=Ae,we=e=>{const t=e[20]!==""?ce(e[20]):"",u=e[22]!==""?ce(e[22]):"",c=e[21]!==""?` ${ce(e[21])}`:"",p=e[23]!==""?` ${ce(e[23])}`:"";return`${u}${p}, ${t}${c}`},so=[{name:1,label:"Name",align:"left",field:e=>e.employee[22],format:(e,t)=>`${we(t.employee)}`,sortable:!0},{name:7,label:"Workday ID",align:"left",field:e=>e.employee[378],format:e=>`${e}`,sortable:!0,sortOrder:"ad"},{name:2,label:"Payroll ID",align:"left",field:e=>e.employee[213],format:e=>e===""?"not available":e,sortable:!0},{name:4,label:"Classification",align:"left",field:e=>e.map.fullJob,format:e=>`${!e||e===""?"Not Assigned":e}`,sortable:!0},{name:5,label:"Job #",align:"left",field:e=>e.map.jobNumber,format:e=>`${e===""||!e?"Not Assigned":e}`,sortable:!0},{name:6,label:"Arrival Date",align:"left",field:e=>e.map.start,format:e=>`${e?$e.formatDate(e,"MM/DD/YYYY"):"TBD"}`,sortable:!0}],ro=[{name:1,label:"Name",align:"left",field:e=>e.employee[22],format:(e,t)=>`${we(t.employee)}`,sortable:!0},{name:7,label:"Workday ID",align:"left",field:e=>e.employee[378],format:e=>`${e}`,sortable:!0,sortOrder:"ad"},{name:2,label:"Payroll ID",align:"left",field:e=>e.employee[213],format:e=>e===""?"not available":e,sortable:!0},{name:4,label:"Classification",align:"left",field:e=>e.map.fullJob,format:e=>`${!e||e===""?"Not Assigned":e}`,sortable:!0},{name:5,label:"Job #",align:"left",field:e=>e.map.jobNumber,format:e=>`${e===""||!e?"Not Assigned":e}`,sortable:!0},{name:6,label:"Arrival Date",align:"left",field:e=>e.map.start,format:e=>`${e?$e.formatDate(e,"MM/DD/YYYY"):"TBD"}`,sortable:!0}],no=M({name:"Table",components:{AddNewEmployee:lo},setup(){const e=ne(),t=re(),u=X(),{assignmentsForProject:c,getFlaggedAssignments:p}=te(t),b=c,{active:r}=te(X()),{getAssignments:s,flagAssignment:n}=re(),E=V(""),C=V(null),A=V(null),F=V(0),S=V(!1),$=V(!1);s();const g=D(()=>{let k=[];return b.value.forEach(J=>{J[75].toLowerCase().includes(E.value.toLowerCase())&&k.push(J)}),k=C.value?k.filter(J=>ve(J[1].$d).tz("America/Chicago").format("MM/DD/YYYY")===ve(C.value).tz("America/Chicago").format("MM/DD/YYYY")):k,k=A.value?k.filter(J=>J[68]===A.value):k,k.sort((J,le)=>J.employee[24]>le.employee[24]?1:-1)}),N=D(()=>e.screen.lt.md?100:25),G=D(()=>[...new Map(c.value.map(k=>[k[68],k[68]])).values()]);async function K(k){n({record:k.rows[0],status:k.added})}return{columns:so,mobileColumns:ro,rows:g,initialPagination:{rowsPerPage:N},separator:"vertical",projectStore:u,active:r,search:E,startDateFilter:C,craftOptions:G,craftFilter:A,assignmentsForProject:c,tab:F,showEmployee:S,formatName:we,updateAssignment:K,getFlaggedAssignments:p,showAddEmployee:$}}}),io={class:"q-px-sm"},uo={class:"row items-center"},mo={class:"col-12 col-md-4 q-px-sm"},po={class:"col-12 col-md-4 q-px-sm"},co={class:"col-12 col-md-4 q-px-sm"},fo={class:"text-primary text-italic"},bo={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"},go={class:"text-dark text-caption text-italic"},vo={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function yo(e,t,u,c,p,b){const r=Q("add-new-employee");return d(),f("div",io,[a("div",null,[o(ke,null,{default:l(()=>[Ve(a("div",null,[o(fe,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=s=>e.tab=s),"bg-color":"none","indicator-color":"info",align:"left",dense:""},{default:l(()=>[o(H,{name:0,label:e.$q.screen.gt.xs?"All Employees":"Employees"},null,8,["label"]),o(H,{name:1,label:"Flagged to Remove"},{default:l(()=>[e.getFlaggedAssignments.length>0?(d(),q(Oe,{key:0,color:"accent",floating:"",transparent:""},{default:l(()=>[he(m(e.getFlaggedAssignments.length),1)]),_:1})):j("",!0)]),_:1})]),_:1},8,["modelValue"]),o(be,{modelValue:e.tab,"onUpdate:modelValue":t[5]||(t[5]=s=>e.tab=s),animated:""},{default:l(()=>[o(_,{class:"q-px-xs",name:0},{default:l(()=>[o(z,{flat:""},{default:l(()=>[o(T,{class:"q-pt-none"},{default:l(()=>[a("div",uo,[a("div",mo,[o(P,{dense:e.$q.screen.lt.md,modelValue:e.search,"onUpdate:modelValue":t[1]||(t[1]=s=>e.search=s),label:"Search"},null,8,["dense","modelValue"])]),a("div",po,[o(P,{dense:e.$q.screen.lt.md,modelValue:e.startDateFilter,"onUpdate:modelValue":t[2]||(t[2]=s=>e.startDateFilter=s),label:"Arrival Date",type:"date","stack-label":""},null,8,["dense","modelValue"])]),a("div",co,[o(Z,{dense:e.$q.screen.lt.md,label:"Craft","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.craftFilter,"onUpdate:modelValue":t[3]||(t[3]=s=>e.craftFilter=s),options:e.craftOptions,"use-chips":""},null,8,["dense","modelValue","options"])])])]),_:1})]),_:1}),o(ye,{"title-class":e.$q.screen.gt.sm?"text-primary text-h6":"text-primary text-body1",title:e.$q.screen.lt.sm?"Employees":`Employees for ${e.active[20]}`,columns:e.$q.screen.lt.md?e.mobileColumns:e.columns,rows:e.rows,"row-key":"3",class:"q-pa-sm",pagination:e.initialPagination,separator:"vertical","table-header-class":"bg-dark text-white","no-data-label":`There are no employees for ${e.active[20]}`,grid:e.$q.screen.lt.sm,selection:"multiple",selected:e.getFlaggedAssignments,onSelection:e.updateAssignment},Re({"top-right":l(()=>[a("div",fo,m(e.assignmentsForProject.length)+" total employees / "+m(e.getFlaggedAssignments.length)+" flagged to remove",1)]),"header-selection":l(s=>[o(Ne,{disable:"",modelValue:s.selected,"onUpdate:modelValue":n=>s.selected=n},null,8,["modelValue","onUpdate:modelValue"])]),"body-selection":l(s=>[o(Ne,{modelValue:s.selected,"onUpdate:modelValue":n=>s.selected=n},null,8,["modelValue","onUpdate:modelValue"])]),"no-data":l(({message:s})=>[a("div",bo,[o(x,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),a("span",null,m(s),1)])]),_:2},[e.$can("manage","employees")?{name:"top-left",fn:l(()=>[o(w,{color:"primary",label:"Add Another Employee",onClick:t[4]||(t[4]=s=>e.showAddEmployee=!0)}),o(Se)])}:void 0]),1032,["title-class","title","columns","rows","pagination","no-data-label","grid","selected","onSelection"])]),_:1}),o(_,{class:"q-px-xs",name:1},{default:l(()=>[o(ye,{"title-class":e.$q.screen.gt.sm?"text-primary text-h6":"text-primary text-body1",title:e.$q.screen.lt.sm?"Flagged to Remove":`Flagged to Remove from ${e.active[20]}`,columns:e.$q.screen.lt.md?e.mobileColumns:e.columns,rows:e.getFlaggedAssignments,"row-key":"3",class:"q-pa-sm",pagination:e.initialPagination,separator:"vertical","table-header-class":"bg-dark text-white","no-data-label":`There are no employees to remove from ${e.active[20]}`,grid:e.$q.screen.lt.sm},{"top-right":l(()=>[a("div",go,"(Total: "+m(e.getFlaggedAssignments.length)+" to remove)",1)]),"no-data":l(({message:s})=>[a("div",vo,[o(x,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),a("span",null,m(s),1)])]),_:1},8,["title-class","title","columns","rows","pagination","no-data-label","grid"])]),_:1})]),_:1},8,["modelValue"])],512),[[Ce,!e.showAddEmployee]])]),_:1}),o(ke,null,{default:l(()=>[Ve(a("div",null,[o(r,{onCancelAddEmployee:t[6]||(t[6]=s=>e.showAddEmployee=!1)})],512),[[Ce,e.showAddEmployee]])]),_:1})])])}var ho=Y(no,[["render",yo],["__scopeId","data-v-2a0f1111"]]);const $o=M({setup(){const{active:e}=te(X()),t=V(null);return{active:e,dayjs:ve,clicked:t}}}),wo={class:"q-px-sm"},qo={key:0,class:"row"},Vo={class:"col-5 q-px-sm"},Co=a("thead",{class:"bg-dark text-white"},[a("tr",null,[a("th"),a("th",{class:"text-left"},"Scheduled Date"),a("th",{class:"text-left"},"Status"),a("th",{class:"text-right"},"# of Releases")])],-1),No={class:"text-left"},ko={class:"text-left"},Eo={class:"text-right"},jo={class:"col-7 q-px-sm"},Ro=a("thead",{class:"bg-dark text-white"},[a("tr",null,[a("th",{class:"text-left"},"Name"),a("th",{class:"text-left"},"Classification"),a("th",{class:"text-left"},"Employee ID")])],-1),Ao={class:"text-left"},So={class:"text-left"},Uo={class:"text-left"};function Jo(e,t,u,c,p,b){return d(),f("div",wo,[o(z,{flat:""},{default:l(()=>[o(ee,{align:"left"},{default:l(()=>[o(w,{color:"primary",label:"Schedule Reduction in Force"})]),_:1}),o(T,{class:"q-px-none"},{default:l(()=>[e.active.reduction.length>0?(d(),f("div",qo,[a("div",Vo,[o(ge,{dense:""},{default:l(()=>[Co,a("tbody",null,[(d(!0),f(B,null,W(e.active.reduction,r=>(d(),f("tr",{key:r[3]},[a("td",null,[o(w,{label:e.clicked&&e.clicked[3]===r[3]?"Hide Roster":"View Roster",color:"info",size:"sm",onClick:s=>e.clicked?e.clicked=null:e.clicked=r},null,8,["label","onClick"])]),a("td",No,m(e.dayjs(r[6].$d).format("MM/DD/YYYY")),1),a("td",ko,m(r[13]),1),a("td",Eo,m(r[12].length),1)]))),128))])]),_:1})]),a("div",jo,[e.clicked?(d(),q(ge,{key:0,dense:""},{default:l(()=>[Ro,a("tbody",null,[(d(!0),f(B,null,W(e.clicked[12],r=>(d(),f("tr",{key:r[3]},[a("td",Ao,m(r[75]),1),a("td",So,m(r[33]),1),a("td",Uo,m(r[104]),1)]))),128))])]),_:1})):j("",!0)])])):j("",!0)]),_:1})]),_:1})])}var Po=Y($o,[["render",Jo]]);const Do=M({name:"Projects",components:{JobsTab:kt,UsersTab:Mt,EmployeesTab:ho,ReductionTab:Po},setup(){return ne(),{tab:V(0)}}}),To={class:"q-px-sm"};function Fo(e,t,u,c,p,b){const r=Q("jobs-tab"),s=Q("users-tab"),n=Q("employees-tab"),E=Q("reduction-tab");return d(),f("div",To,[o(Pe,{class:"bg-info text-white shadow-2 rounded-borders"},{default:l(()=>[o(fe,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=C=>e.tab=C),"bg-color":"none","indicator-color":"accent",align:"justify",dense:""},{default:l(()=>[o(H,{name:0,label:e.$q.screen.gt.xs?"Available Jobs":"Jobs"},null,8,["label"]),e.$can("read","users")?(d(),q(H,{key:0,name:1,label:"Users"})):j("",!0),e.$can("manage","employees")?(d(),q(H,{key:1,name:2,label:"Roster"})):j("",!0),e.$can("manage","rifs")?(d(),q(H,{key:2,name:3,label:e.$q.screen.lt.md?"RIF":"Reduction in Force"},null,8,["label"])):j("",!0)]),_:1},8,["modelValue"])]),_:1}),o(be,{modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=C=>e.tab=C),animated:""},{default:l(()=>[o(_,{class:"q-px-xs",name:0},{default:l(()=>[o(r)]),_:1}),e.$can("read","users")?(d(),q(_,{key:0,class:"q-px-xs",name:1},{default:l(()=>[o(s)]),_:1})):j("",!0),e.$can("manage","employees")?(d(),q(_,{key:1,class:"q-px-xs",name:2},{default:l(()=>[o(n)]),_:1})):j("",!0),e.$can("manage","rifs")?(d(),q(_,{key:2,class:"q-px-xs",name:3},{default:l(()=>[o(E)]),_:1})):j("",!0)]),_:1},8,["modelValue"])])}var Qo=Y(Do,[["render",Fo]]);const Mo=M({name:"PageIndex",components:{ProjectTabs:Qo},setup(){return{}}});function Yo(e,t,u,c,p,b){const r=Q("project-tabs");return d(),q(Je,{style:{"max-width":"100vw"}},{default:l(()=>[o(r)]),_:1})}var Va=Y(Mo,[["render",Yo]]);export{Va as default};
