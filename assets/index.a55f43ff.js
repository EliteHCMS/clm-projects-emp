import{Q as H,a as pe,b as G}from"./QTabPanels.7f2b2f83.js";import{Q as be}from"./QTabs.3a560d12.js";import{Q as ve}from"./QToolbar.6b905ef4.js";import{Q as ge}from"./QPage.8d15663e.js";import{bV as Z,bX as ee,r as u,w as I,o as ae,B as F,C as le,d as t,bt as i,cW as te,E as f,cX as Q,cV as oe,bS as j,aa as M,ae as Y,H as ye,bY as z,az as J,z as se,as as $e}from"./index.960d5b34.js";import{Q as T}from"./QTd.e3f90e32.js";import{Q as we}from"./QSpace.b3c62d84.js";import{Q as K}from"./QTooltip.7454b396.js";import{Q as ne}from"./QInnerLoading.13b17dc0.js";import{Q as re}from"./QTable.2cc075de.js";import{u as ie}from"./use-quasar.09536e80.js";import{e as de}from"./export-file.dc78ba05.js";import{dayjs as w}from"./dayjs.501e8a8e.js";import{c as fe,u as ce,i as ue}from"./app.bda2cd70.js";import{_ as me}from"./projectSelector.32d51d56.js";import"./use-panel.98705a6b.js";import"./touch.3df10340.js";import"./selection.4cab378b.js";import"./QResizeObserver.b1215cec.js";import"./rtl.b51694b1.js";import"./position-engine.40859e34.js";import"./QList.c2993b6b.js";import"./QMarkupTable.17a90ccc.js";import"./QSelect.ce23f885.js";import"./QChip.e4d2f168.js";import"./QMenu.dd57348b.js";import"./use-fullscreen.7e074d8e.js";import"./_commonjsHelpers.a26ce4be.js";import"./localForage.84a30b23.js";import"./index.04bc0a32.js";import"./i18n.2abc02f2.js";const De={class:"row items-center"},_e={class:"col-12 col-md-3 q-px-sm"},he={class:"col-12 col-md-3 q-px-sm"},xe={class:"col-12 col-md-3 q-px-sm"},Ne=f("div",{class:"col-12 col-md-3 q-px-sm"},null,-1),ke={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"},Re={class:"col-12 col-md-5 q-px-sm"},Ie={__name:"pending",setup(X){const h=Z(),x=ie(),N=fe();ce();const{getSelectedProject:m,getSelectedOffice:b}=ee(N),{capitalize:C}=se,B=u(b.value?b.value[8]:null),O=u(m.value?m.value[3]:null),k=u(),D=u([]),v=u(""),g=u(""),$=u(!1),d=u({sortBy:"effectiveDate",descending:!0,page:1,rowsPerPage:25,rowsNumber:0});I(b,()=>{B.value=b.value?b.value[8]:null}),I(m,()=>{O.value=m.value?m.value[3]:null}),I(g,()=>{q()});const R=u([{name:"action",label:"",align:"left",field:"action",sortable:!1},{name:"fullName",label:"Name",align:"left",field:"fullName",format:e=>`${S(e)}`,sortable:!1,sortOrder:"ad"},{name:"phoneNumber",label:"Phone #",align:"left",field:"phoneNumber",sortable:!1},{name:"workdayId",label:"Workday ID",align:"left",field:"workdayId",format:e=>`${e}`,sortable:!1,sortOrder:"ad"},{name:"payrollId",label:"Payroll ID",align:"left",field:"payrollId",format:e=>e===""?"not available":e,sortable:!1},{name:"classification",label:"Classification",align:"left",field:"classification",format:e=>`${!e||e===""?"Not Assigned":e}`,sortable:!1},{name:"reason",label:"Term Reason",align:"left",field:"reason",format:e=>`${e}`,sortable:!1},{name:"effectiveDate",label:"Release Date",align:"left",field:"effectiveDate",format:e=>`${w(e).format("MM/DD/YYYY")}`,sortable:!0},{name:"releaseDateCreated",label:"Date Submitted",align:"left",field:"releaseDateCreated",format:e=>`${w(e).format("MM/DD/YYYY")}`,sortable:!0}]),P=u([{name:"action",label:"",align:"left",field:"action",sortable:!1},{name:"fullName",label:"Name",align:"left",field:"fullName",format:e=>`${S(e)}`,sortable:!1,sortOrder:"ad"},{name:"phoneNumber",label:"Phone #",align:"left",field:"phoneNumber",sortable:!1},{name:"workdayId",label:"Workday ID",align:"left",field:"workdayId",format:e=>`${e}`,sortable:!1,sortOrder:"ad"},{name:"payrollId",label:"Payroll ID",align:"left",field:"payrollId",format:e=>e===""?"not available":e,sortable:!1},{name:"classification",label:"Classification",align:"left",field:"classification",format:e=>`${!e||e===""?"Not Assigned":e}`,sortable:!1},{name:"reason",label:"Term Reason",align:"left",field:"reason",format:e=>`${e}`,sortable:!1},{name:"effectiveDate",label:"Release Date",align:"left",field:"effectiveDate",format:e=>`${w(e).format("MM/DD/YYYY")}`,sortable:!0},{name:"releaseDateCreated",label:"Date Submitted",align:"left",field:"releaseDateCreated",format:e=>`${w(e).format("MM/DD/YYYY")}`,sortable:!0}]),S=e=>{const o=e.split(" ");let a="";return o.forEach((l,c)=>{a+=c>0?` ${C(l.toLowerCase())}`:C(l.toLowerCase())}),a},V=({page:e,pageSize:o,descending:a,filter:l,sortBy:c})=>{try{let r="";const y=l&&l!=="";y&&(r=l.trim());const n={$or:[{fullName:{$containsi:`${r}`}},{classification:{$containsi:`${r}`}},{jobNumber:{$containsi:`${r}`}},{workdayId:{$containsi:`${r}`}},{phoneNumber:{$containsi:`${r}`}},{payrollId:{$containsi:`${r}`}}]},s={$and:[...y?[n]:[],{status:{$in:["Pending","Reviewed"]}},{primaryReason:{$eq:"Involuntary"}},{workdayStatus:{$eq:"Active"}},{reason:{$in:["Lack of Work / End of Contract/Project","RIF/Elimination of Position","Project Cancelled Before Employee Started"]}},...g.value?[{effectiveDate:{$eq:g.value}}]:[]]};return ue.getReleases({pagination:{page:e,pageSize:o},sort:`${c||"releaseDateCreated"}:${a?"desc":"asc"}`,filters:s}).then(p=>{const{data:L,meta:W}=p;return $.value=!1,{data:L,meta:W}})}catch(r){console.log(r),$.value=!1}},U=async e=>{const{page:o,rowsPerPage:a,sortBy:l,descending:c}=e.pagination,r=e.filter,y=a===0?d.value.rowsNumber:a;$.value=!0;const n=await V({page:o,sortBy:l,descending:c,pageSize:y,filter:r});if($.value=!1,n){const{data:s,meta:p}=n;D.value.splice(0,D.value.length,...s),d.value.page=p.pagination.page,d.value.sortBy=l,d.value.descending=c,d.value.rowsPerPage=p.pagination.pageSize,d.value.rowsPerPage=p.pagination.pageSize,d.value.rowsNumber=p.pagination.total}};ae(()=>{k.value.requestServerInteraction()});const q=()=>{k.value.requestServerInteraction()};function _(e,o,a){let l=o!==void 0?o(e,a):e;return l=l==null?"":String(l),l=l.split('"').join('""'),`"${l}"`}const E=async()=>{const{page:e,rowsNumber:o,sortBy:a,descending:l}=d.value,c=await V({page:e,sortBy:a,descending:l,pageSize:o,filter:v.value});let r=[R.value.map(n=>_(n.label))].concat(D.value.map(n=>R.value.map(s=>_(typeof s.field=="function"?s.field(n):n[s.field===void 0?s.name:s.field],s.format,n)).join(","))).join(`\r
`);c&&c.data&&(r=[P.value.map(n=>_(n.label))].concat(c.data.map(n=>P.value.map(s=>_(typeof s.field=="function"?s.field(n):n[s.field===void 0?s.name:s.field],s.format,n)).join(","))).join(`\r
`)),de(`${w().format("MM.DD.YYYY")} Releases-Export.csv`,r,"text/csv")!==!0&&x.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})};function A(e){h.push({name:"view-release",params:{release:e.id}})}return(e,o)=>(F(),le("div",null,[t(oe,{flat:""},{default:i(()=>[t(te,null,{default:i(()=>[f("div",De,[f("div",_e,[t(me,{debounce:"300",dense:""})]),f("div",he,[t(Q,{dense:"",debounce:"300",modelValue:v.value,"onUpdate:modelValue":o[0]||(o[0]=a=>v.value=a),label:"Search"},null,8,["modelValue"])]),f("div",xe,[t(Q,{dense:"",debounce:"300",modelValue:g.value,"onUpdate:modelValue":o[1]||(o[1]=a=>g.value=a),label:"Release Date",type:"date","stack-label":""},null,8,["modelValue"])]),Ne])]),_:1})]),_:1}),f("div",null,[t(re,{title:"Pending Releases","title-class":"text-h5 text-primary",ref_key:"tableRef",ref:k,columns:R.value,rows:D.value,"row-key":a=>a[3],class:"q-pa-sm",pagination:d.value,"onUpdate:pagination":o[4]||(o[4]=a=>d.value=a),"table-header-class":"bg-dark text-white","no-data-label":"There are no releases",dense:"",separator:"horizontal",color:"accent","binary-state-sort":"",filter:v.value,onRequest:U},{"body-cell-action":i(a=>[t(T,{props:a},{default:i(()=>[t(j,{class:"cursor-pointer",size:M(x).screen.gt.sm?"sm":"xs",color:"info",round:"",dense:"",onClick:l=>A(a.row),name:a.expand?"visibility_off":"visibility"},null,8,["size","onClick","name"])]),_:2},1032,["props"])]),"body-cell-phoneNumber":i(a=>[t(T,{props:a},{default:i(()=>[f("span",null,Y(a.row.syncObject[56]),1)]),_:2},1032,["props"])]),"no-data":i(({message:a})=>[f("div",ke,[t(j,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),f("span",null,Y(a),1)])]),top:i(()=>[f("div",Re,[t(Q,{dense:"",modelValue:v.value,"onUpdate:modelValue":o[2]||(o[2]=a=>v.value=a),label:"Search...",clearable:""},{prepend:i(()=>[t(j,{name:"search"})]),_:1},8,["modelValue"])]),t(we),f("div",{class:ye(["text-dark text-caption text-italic",M(x).screen.lt.md?"offset-xs-5":""])},"(Total: "+Y(d.value.rowsNumber)+" releases)",3),t(z,{flat:"",round:"",color:"primary",icon:"download",disable:d.value.rowsNumber<1,onClick:E},{default:i(()=>[t(K,{class:"bg-accent text-black shadow-4",offset:[10,10]},{default:i(()=>[J(" Download ")]),_:1})]),_:1},8,["disable"]),t(z,{flat:"",round:"",color:"primary",icon:"refresh",onClick:o[3]||(o[3]=a=>q(!0)),loading:$.value},{default:i(()=>[t(K,{class:"bg-accent text-black shadow-4",offset:[10,10]},{default:i(()=>[J(" Refresh ")]),_:1})]),_:1},8,["loading"])]),loading:i(()=>[t(ne,{showing:"",color:"primary"})]),_:1},8,["columns","rows","row-key","pagination","filter"])])]))}},Ye={class:"row items-center"},Ce={class:"col-12 col-md-3 q-px-sm"},Pe={class:"col-12 col-md-3 q-px-sm"},Se={class:"col-12 col-md-3 q-px-sm"},Ve=f("div",{class:"col-12 col-md-3 q-px-sm"},null,-1),qe={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"},Qe={class:"text-dark text-caption text-italic"},je={__name:"releases",setup(X){const h=Z(),x=ie(),N=fe();ce();const{getSelectedProject:m,getSelectedOffice:b}=ee(N),{capitalize:C}=se,B=u(b.value?b.value[8]:null),O=u(m.value?m.value[3]:null),k=u(),D=u([]),v=u(""),g=u(""),$=u(!1),d=u({sortBy:"effectiveDate",descending:!0,page:1,rowsPerPage:25,rowsNumber:0});I(b,()=>{B.value=b.value?b.value[8]:null}),I(m,()=>{O.value=m.value?m.value[3]:null}),I(g,()=>{q()});const R=u([{name:"action",label:"",align:"left",field:"action",sortable:!1},{name:"fullName",label:"Name",align:"left",field:"fullName",format:e=>`${S(e)}`,sortable:!1,sortOrder:"ad"},{name:"phoneNumber",label:"Phone #",align:"left",field:"phoneNumber",sortable:!1},{name:"workdayId",label:"Workday ID",align:"left",field:"workdayId",format:e=>`${e}`,sortable:!1,sortOrder:"ad"},{name:"payrollId",label:"Payroll ID",align:"left",field:"payrollId",format:e=>e===""?"not available":e,sortable:!1},{name:"classification",label:"Classification",align:"left",field:"classification",format:e=>`${!e||e===""?"Not Assigned":e}`,sortable:!1},{name:"reason",label:"Term Reason",align:"left",field:"reason",format:e=>`${e}`,sortable:!1},{name:"effectiveDate",label:"Release Date",align:"left",field:"effectiveDate",format:e=>`${w(e).format("MM/DD/YYYY")}`,sortable:!0},{name:"releaseDateCreated",label:"Date Submitted",align:"left",field:"releaseDateCreated",format:e=>`${w(e).format("MM/DD/YYYY")}`,sortable:!0}]),P=u([{name:"action",label:"",align:"left",field:"action",sortable:!1},{name:"fullName",label:"Name",align:"left",field:"fullName",format:e=>`${S(e)}`,sortable:!1,sortOrder:"ad"},{name:"phoneNumber",label:"Phone #",align:"left",field:"phoneNumber",sortable:!1},{name:"workdayId",label:"Workday ID",align:"left",field:"workdayId",format:e=>`${e}`,sortable:!1,sortOrder:"ad"},{name:"payrollId",label:"Payroll ID",align:"left",field:"payrollId",format:e=>e===""?"not available":e,sortable:!1},{name:"classification",label:"Classification",align:"left",field:"classification",format:e=>`${!e||e===""?"Not Assigned":e}`,sortable:!1},{name:"reason",label:"Term Reason",align:"left",field:"reason",format:e=>`${e}`,sortable:!1},{name:"effectiveDate",label:"Release Date",align:"left",field:"effectiveDate",format:e=>`${w(e).format("MM/DD/YYYY")}`,sortable:!0},{name:"releaseDateCreated",label:"Date Submitted",align:"left",field:"releaseDateCreated",format:e=>`${w(e).format("MM/DD/YYYY")}`,sortable:!0}]),S=e=>{const o=e.split(" ");let a="";return o.forEach((l,c)=>{a+=c>0?` ${C(l.toLowerCase())}`:C(l.toLowerCase())}),a},V=({page:e,pageSize:o,descending:a,filter:l,sortBy:c})=>{try{let r="";const y=l&&l!=="";y&&(r=l.trim());const n={$or:[{fullName:{$containsi:`${r}`}},{classification:{$containsi:`${r}`}},{jobNumber:{$containsi:`${r}`}},{workdayId:{$containsi:`${r}`}},{phoneNumber:{$containsi:`${r}`}},{payrollId:{$containsi:`${r}`}}]},s={$and:[...y?[n]:[],{status:{$in:["Pending","Reviewed"]}},...g.value?[{effectiveDate:{$eq:g.value}}]:[]]};return ue.getReleases({pagination:{page:e,pageSize:o},sort:`${c||"releaseDateCreated"}:${a?"desc":"asc"}`,filters:s}).then(p=>{const{data:L,meta:W}=p;return $.value=!1,{data:L,meta:W}})}catch(r){console.log(r),$.value=!1}},U=async e=>{const{page:o,rowsPerPage:a,sortBy:l,descending:c}=e.pagination,r=e.filter,y=a===0?d.value.rowsNumber:a;$.value=!0;const n=await V({page:o,sortBy:l,descending:c,pageSize:y,filter:r});if($.value=!1,n){const{data:s,meta:p}=n;D.value.splice(0,D.value.length,...s),d.value.page=p.pagination.page,d.value.sortBy=l,d.value.descending=c,d.value.rowsPerPage=p.pagination.pageSize,d.value.rowsPerPage=p.pagination.pageSize,d.value.rowsNumber=p.pagination.total}};ae(()=>{k.value.requestServerInteraction()});const q=()=>{k.value.requestServerInteraction()};function _(e,o,a){let l=o!==void 0?o(e,a):e;return l=l==null?"":String(l),l=l.split('"').join('""'),`"${l}"`}const E=async()=>{const{page:e,rowsNumber:o,sortBy:a,descending:l}=d.value,c=await V({page:e,sortBy:a,descending:l,pageSize:o,filter:v.value});let r=[R.value.map(n=>_(n.label))].concat(D.value.map(n=>R.value.map(s=>_(typeof s.field=="function"?s.field(n):n[s.field===void 0?s.name:s.field],s.format,n)).join(","))).join(`\r
`);c&&c.data&&(r=[P.value.map(n=>_(n.label))].concat(c.data.map(n=>P.value.map(s=>_(typeof s.field=="function"?s.field(n):n[s.field===void 0?s.name:s.field],s.format,n)).join(","))).join(`\r
`)),de(`${w().format("MM.DD.YYYY")} Releases-Export.csv`,r,"text/csv")!==!0&&x.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})};function A(e){h.push({name:"view-release",params:{release:e.id}})}return(e,o)=>(F(),le("div",null,[t(oe,{flat:""},{default:i(()=>[t(te,null,{default:i(()=>[f("div",Ye,[f("div",Ce,[t(me,{debounce:"300",dense:""})]),f("div",Pe,[t(Q,{dense:"",debounce:"300",modelValue:v.value,"onUpdate:modelValue":o[0]||(o[0]=a=>v.value=a),label:"Search"},null,8,["modelValue"])]),f("div",Se,[t(Q,{dense:"",debounce:"300",modelValue:g.value,"onUpdate:modelValue":o[1]||(o[1]=a=>g.value=a),label:"Release Date",type:"date","stack-label":""},null,8,["modelValue"])]),Ve])]),_:1})]),_:1}),f("div",null,[t(re,{title:"Releases","title-class":"text-h5 text-primary",ref_key:"tableRef",ref:k,columns:R.value,rows:D.value,"row-key":a=>a[3],class:"q-pa-sm",pagination:d.value,"onUpdate:pagination":o[2]||(o[2]=a=>d.value=a),"table-header-class":"bg-dark text-white","no-data-label":"There are no releases",dense:"","binary-state-sort":"",filter:v.value,onRequest:U},{"body-cell-action":i(a=>[t(T,{props:a},{default:i(()=>[t(j,{class:"cursor-pointer",size:M(x).screen.gt.sm?"sm":"xs",color:"info",round:"",dense:"",onClick:l=>A(a.row),name:a.expand?"visibility_off":"visibility"},null,8,["size","onClick","name"])]),_:2},1032,["props"])]),"body-cell-phoneNumber":i(a=>[t(T,{props:a},{default:i(()=>[f("span",null,Y(a.row.syncObject[56]),1)]),_:2},1032,["props"])]),"no-data":i(({message:a})=>[f("div",qe,[t(j,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),f("span",null,Y(a),1)])]),"top-right":i(()=>[f("div",Qe,"(Total: "+Y(d.value.rowsNumber)+" releases)",1),t(z,{color:"secondary",flat:"","icon-right":"refresh",label:"Refresh",onClick:q}),t(z,{dense:M(x).screen.lt.md,class:"q-ml-sm",color:"primary",label:"Download",onClick:E,disable:d.value.rowsNumber<1},null,8,["dense","disable"])]),loading:i(()=>[t(ne,{showing:"",color:"primary"})]),_:1},8,["columns","rows","row-key","pagination","filter"])])]))}},Me={class:"q-pa-md"},ba={__name:"index",setup(X){const h=u(0);return(x,N)=>(F(),$e(ge,{style:{"max-width":"100vw"}},{default:i(()=>[f("div",Me,[t(ve,{class:"bg-info text-white shadow-2 rounded-borders"},{default:i(()=>[t(be,{modelValue:h.value,"onUpdate:modelValue":N[0]||(N[0]=m=>h.value=m),"bg-color":"none","indicator-color":"accent",align:"justify",dense:""},{default:i(()=>[t(H,{name:0,label:"Pending Releases"}),t(H,{name:1,label:"Releases"})]),_:1},8,["modelValue"])]),_:1}),t(pe,{modelValue:h.value,"onUpdate:modelValue":N[1]||(N[1]=m=>h.value=m),animated:""},{default:i(()=>[t(G,{name:0},{default:i(()=>[t(Ie)]),_:1}),t(G,{name:1},{default:i(()=>[t(je)]),_:1})]),_:1},8,["modelValue"])])]),_:1}))}};export{ba as default};
