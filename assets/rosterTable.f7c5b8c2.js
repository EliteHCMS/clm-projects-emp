import{Q as y,a as T}from"./QTable.cf3c1214.js";import{Q as k}from"./QTr.a6004cec.js";import{l as q,bT as B,c as E,_ as I,y as P,b5 as L,A as f,B as g,d as r,br as l,F as x,b4 as C,aq as D,ax as w,ac as u,bQ as Q,D as $,bW as _}from"./index.4017ca31.js";import{Q as v}from"./QTd.a5677bd1.js";import{Q as j}from"./QInnerLoading.a464eed9.js";import{u as z}from"./use-quasar.5edd4060.js";import{e as O}from"./export-file.dc78ba05.js";import{dayjs as R}from"./dayjs.01a1f0cd.js";import{A as V}from"./arrivalDate.fbf73788.js";const Y=q({components:{ArrivalDate:V},emits:["refreshData"],props:{rows:Array,title:String},setup(o,c){const b=z(),h=B(),{capitalize:m}=P,d=E(()=>b.screen.gt.sm?[{name:1,label:"Name",align:"left",field:e=>e.employee[22],format:(e,n)=>`${p(n.employee)}`,sortable:!0,sortOrder:"ad"},{name:7,label:"Phone #",align:"left",field:e=>e.employee[25],format:e=>`${e}`,sortable:!1},{name:2,label:"Workday ID",align:"left",field:e=>e.employee[378],format:e=>`${e}`,sortable:!0,sortOrder:"ad"},{name:3,label:"Payroll ID",align:"left",field:e=>e.employee[213],format:e=>e===""?"not available":e,sortable:!0},{name:4,label:"Classification",align:"left",field:e=>e[20],format:e=>`${!e||e===""?"Not Assigned":e}`,sortable:!0},{name:5,label:"Job #",align:"left",field:e=>e[105],format:e=>`${e===""||!e?"Not Assigned":e}`,sortable:!0}]:[{name:1,label:"Name",align:"left",field:e=>e.employee[22],format:(e,n)=>`${p(n.employee)}`,sortable:!0,sortOrder:"ad"},{name:7,label:"Phone #",align:"left",field:e=>e.employee[25],format:e=>`${e}`,sortable:!1},{name:2,label:"Workday ID",align:"left",field:e=>e.employee[378],format:e=>`${e}`,sortable:!0,sortOrder:"ad"},{name:3,label:"Payroll ID",align:"left",field:e=>e.employee[213],format:e=>e===""?"not available":e,sortable:!0},{name:4,label:"Classification",align:"left",field:e=>e[20],format:e=>`${!e||e===""?"Not Assigned":e}`,sortable:!0},{name:5,label:"Job #",align:"left",field:e=>e[105],format:e=>`${e===""||!e?"Not Assigned":e}`,sortable:!0}]),p=e=>{const n=e[20]!==""?m(e[20].toLowerCase().trim()):"",i=e[22]!==""?m(e[22].toLowerCase().trim()):"",a=e[21]!==""?` ${m(e[21].toLowerCase().trim())}`:"",N=e[23]!==""?` ${m(e[23])}`:"";return`${i}${N}, ${n}${a}`};function t(e){h.push({name:"ee-summary",params:{id:e[18]}})}function s(e,n,i){let a=n!==void 0?n(e,i):e;return a=a==null?"":String(a),a=a.split('"').join('""'),`"${a}"`}function A(){const e=[d.value.map(i=>s(i.label))].concat(o.rows.map(i=>d.value.map(a=>s(typeof a.field=="function"?a.field(i):i[a.field===void 0?a.name:a.field],a.format,i)).join(","))).join(`\r
`);O(`${R().format("MM.DD.YYYY")} Employees-Export.csv`,e,"text/csv")!==!0&&b.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}return{columns:d,props:o,exportAllEmployees:A,viewEmployee:t}}}),S={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"},W={class:"text-dark text-caption text-italic"};function F(o,c,b,h,m,d){const p=L("arrival-date");return f(),g("div",null,[r(T,{title:o.title,"title-class":"text-h5 text-primary",columns:o.columns,rows:o.rows,"row-key":t=>t[3],class:"q-pa-sm",pagination:{rowsPerPage:25},"table-header-class":"bg-dark text-white","no-data-label":"There are no employees in the roster",dense:""},{header:l(t=>[r(k,{class:"bg-dark text-white",props:t},{default:l(()=>[r(y,{"auto-width":""}),(f(!0),g(x,null,C(t.cols,s=>(f(),D(y,{key:s.name,props:t},{default:l(()=>[w(u(s.label),1)]),_:2},1032,["props"]))),128)),r(y,{class:"text-left","auto-width":""},{default:l(()=>[w("Arrival Date")]),_:1})]),_:2},1032,["props"])]),body:l(t=>[r(k,{props:t},{default:l(()=>[r(v,{"auto-width":""},{default:l(()=>[r(Q,{class:"cursor-pointer",size:o.$q.screen.gt.sm?"sm":"xs",color:"info",round:"",dense:"",onClick:s=>o.viewEmployee(t.row),name:t.expand?"visibility_off":"visibility"},null,8,["size","onClick","name"])]),_:2},1024),(f(!0),g(x,null,C(t.cols,s=>(f(),D(v,{key:s.name,props:t},{default:l(()=>[w(u(s.value),1)]),_:2},1032,["props"]))),128)),r(p,{class:"text-left",rowType:"assignment",row:t.row},null,8,["row"])]),_:2},1032,["props"])]),"no-data":l(({message:t})=>[$("div",S,[r(Q,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),$("span",null,u(t),1)])]),"top-right":l(()=>[$("div",W,"(Total: "+u(o.props.rows.length)+" employees)",1),r(_,{color:"secondary",flat:"","icon-right":"refresh",label:"Refresh",onClick:c[0]||(c[0]=t=>o.$emit("refreshData"))}),r(_,{dense:o.$q.screen.lt.md,class:"q-ml-sm",color:"primary",label:"Download",onClick:o.exportAllEmployees,disable:o.props.rows.length<1},null,8,["dense","onClick","disable"])]),loading:l(()=>[r(j,{showing:"",color:"primary"})]),_:1},8,["title","columns","rows","row-key"])])}var te=I(Y,[["render",F]]);export{te as R};
