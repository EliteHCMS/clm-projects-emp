import{Q as w,a as E}from"./QTable.e1302c63.js";import{Q as C}from"./QTr.dd5044c1.js";import{l as L,bT as R,c as v,_ as j,y as z,b5 as I,A as d,B as g,d as a,br as s,F as Q,b4 as A,aq as D,ax as $,ac as c,bQ as _,D as h,bW as T}from"./index.b3347518.js";import{Q as N}from"./QTd.c930b1ca.js";import{Q as P}from"./QInnerLoading.d3cd2b2b.js";import{u as V}from"./use-quasar.0481fcc5.js";import{e as Y}from"./export-file.dc78ba05.js";import{dayjs as F}from"./dayjs.3f8a4d98.js";import{u as S}from"./index.0efc7180.js";import{A as M}from"./arrivalDate.03daf308.js";const O=L({components:{ArrivalDate:M},emits:["refreshData"],props:{rows:Array,title:String},setup(o,p){const b=V(),x=R(),{can:y}=S(),{capitalize:m}=z,f=v(()=>[{name:1,label:"Name",align:"left",field:e=>e.employee[22],format:(e,n)=>`${l(n.employee)}`,sortable:!0,sortOrder:"ad"},{name:7,label:"Phone #",align:"left",field:e=>e.employee[25],format:e=>`${e}`,sortable:!1},{name:2,label:"Workday ID",align:"left",field:e=>e.employee[378],format:e=>`${e}`,sortable:!0,sortOrder:"ad"},{name:3,label:"Payroll ID",align:"left",field:e=>e.employee[213],format:e=>e===""?"not available":e,sortable:!0},{name:4,label:"Classification",align:"left",field:e=>e[20],format:e=>`${!e||e===""?"Not Assigned":e}`,sortable:!0},{name:116,label:"Rate",align:"left",field:e=>e[116],format:e=>`${e===""||!e||e===0?"N/A":`$${Number(e).toFixed(2)}`}`,sortable:!0},{name:5,label:"Job #",align:"left",field:e=>e[105],format:e=>`${e===""||!e?"Not Assigned":e}`,sortable:!0}]),t=v(()=>b.screen.gt.sm?[1,7,2,3,4,y("read","rates")?116:[],5]:[1,7,2,3,4,y("read","rates")?116:[],5]),l=e=>{const n=e[20]!==""?m(e[20].toLowerCase().trim()):"",u=e[22]!==""?m(e[22].toLowerCase().trim()):"",r=e[21]!==""?` ${m(e[21].toLowerCase().trim())}`:"",i=e[23]!==""?` ${m(e[23])}`:"";return`${u}${i}, ${n}${r}`};function q(e){x.push({name:"ee-summary",params:{id:e[18]}})}function k(e,n,u){let r=n!==void 0?n(e,u):e;return r=r==null?"":String(r),r=r.split('"').join('""'),`"${r}"`}function B(){const e=f.value.filter(r=>!!t.value.includes(r.name)),n=[e.map(r=>k(r.label))].concat(o.rows.map(r=>e.map(i=>k(typeof i.field=="function"?i.field(r):r[i.field===void 0?i.name:i.field],i.format,r)).join(","))).join(`\r
`);Y(`${F().format("MM.DD.YYYY")} Employees-Export.csv`,n,"text/csv")!==!0&&b.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}return{columns:f,visibleColumns:t,props:o,exportAllEmployees:B,viewEmployee:q}}}),W={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"},J={class:"text-dark text-caption text-italic"};function G(o,p,b,x,y,m){const f=I("arrival-date");return d(),g("div",null,[a(E,{title:o.title,"title-class":"text-h5 text-primary",columns:o.columns,"visible-columns":o.visibleColumns,rows:o.rows,"row-key":t=>t[3],class:"q-pa-sm",pagination:{rowsPerPage:25},"table-header-class":"bg-dark text-white","no-data-label":"There are no employees in the roster",dense:""},{header:s(t=>[a(C,{class:"bg-dark text-white",props:t},{default:s(()=>[a(w,{"auto-width":""}),(d(!0),g(Q,null,A(t.cols,l=>(d(),D(w,{key:l.name,props:t},{default:s(()=>[$(c(l.label),1)]),_:2},1032,["props"]))),128)),a(w,{class:"text-left","auto-width":""},{default:s(()=>[$("Arrival Date")]),_:1})]),_:2},1032,["props"])]),body:s(t=>[a(C,{props:t},{default:s(()=>[a(N,{"auto-width":""},{default:s(()=>[a(_,{class:"cursor-pointer",size:o.$q.screen.gt.sm?"sm":"xs",color:"info",round:"",dense:"",onClick:l=>o.viewEmployee(t.row),name:t.expand?"visibility_off":"visibility"},null,8,["size","onClick","name"])]),_:2},1024),(d(!0),g(Q,null,A(t.cols,l=>(d(),D(N,{key:l.name,props:t},{default:s(()=>[$(c(l.value),1)]),_:2},1032,["props"]))),128)),a(f,{class:"text-left",rowType:"assignment",row:t.row},null,8,["row"])]),_:2},1032,["props"])]),"no-data":s(({message:t})=>[h("div",W,[a(_,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),h("span",null,c(t),1)])]),"top-right":s(()=>[h("div",J,"(Total: "+c(o.props.rows.length)+" employees)",1),a(T,{color:"secondary",flat:"","icon-right":"refresh",label:"Refresh",onClick:p[0]||(p[0]=t=>o.$emit("refreshData"))}),a(T,{dense:o.$q.screen.lt.md,class:"q-ml-sm",color:"primary",label:"Download",onClick:o.exportAllEmployees,disable:o.props.rows.length<1},null,8,["dense","onClick","disable"])]),loading:s(()=>[a(P,{showing:"",color:"primary"})]),_:1},8,["title","columns","visible-columns","rows","row-key"])])}var se=j(O,[["render",G]]);export{se as R};
