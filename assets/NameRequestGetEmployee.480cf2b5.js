import{h as n,bP as L,c_ as $,c$ as N,l as S,r as k,w as z,_ as q,A as s,B as i,d as o,bi as r,au as v,bO as p,ao as y}from"./index.8bd7d03d.js";import{Q as w}from"./QTooltip.eb96006a.js";import{u as A}from"./use-quasar.4af32af0.js";import{q as b}from"./quickbase.c9a95ac7.js";import{u as _}from"./useQuerySaver.73c5586e.js";import{workday as Q}from"./workday.0bee28d5.js";import{a as T,s as M}from"./syncEmployeeWithWorkday.cec0f907.js";import{u as G}from"./dataStore.b8fdaaa5.js";const B=[n("g",{transform:"translate(-20,-20)"},[n("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[n("animateTransform",{attributeName:"transform",type:"rotate",from:"90 50 50",to:"0 50 50",dur:"1s",repeatCount:"indefinite"})])]),n("g",{transform:"translate(20,20) rotate(15 50 50)"},[n("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[n("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"90 50 50",dur:"1s",repeatCount:"indefinite"})])])];var R=L({name:"QSpinnerGears",props:$,setup(e){const{cSize:l,classes:d}=N(e);return()=>n("svg",{class:d.value,width:l.value,height:l.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},B)}});const D=S({emits:["viewEmployee"],props:{data:Object,type:String,query:String},setup(e){const l=A(),{getEmployee:d,setEmployees:g}=G(),t=k(null),f=k(!0);async function m(){if(e.data[39]&&e.data[39]!==""){if(d(e.data[39]))t.value=d([e.data[39]]);else{const{data:a}=await b.fetchFromHiringApp({fields:[_({type:e.type,query:`{'3'.EX.'${e.data[39]}'}`})]});t.value=a[0],g({id:t.value[3],data:t.value})}f.value=!1}else{const{data:a}=await b.fetchFromHiringApp({fields:[_({type:e.type,query:e.query})]});f.value=!1,a.length>0&&(a.length===1?t.value=a[0]:t.value=a.find(u=>u[24].toLowerCase().includes(e.data.firstName)||u[24].toLowerCase().includes(e.data.lastName)?u:null)),t.value&&(b.upsertRecordsXML({to:"bsg4yb4wa",data:[{3:{value:e.data[3]},39:{value:t.value[3]}}],fieldsToReturn:[3]}),g({id:t.value[3],data:t.value}))}}z(t,async a=>{if(a[408]==="Active"&&a[378]&&a[378]!==""&&!a[207]){const u={workerId:a[378]},{data:C}=await Q.getWorker(u);let c,h=null;C.length>0?c=C[0]:c=null,c&&(h=(await T({workday:c,clm:t.value})).employmentData.workerStatus.active),c&&!h&&(t.value=await M({workday:c,clm:t.value}))}});const E=()=>{l.notify({type:"negative",message:"This feature is not ready yet."})};return m(),{record:t,loading:f,viewEmployee:E}}}),F={key:0},H={key:1},V={key:0},I={key:1},O={key:2},P={key:3};function W(e,l,d,g,t,f){return s(),i("div",null,[e.loading?(s(),i("div",F,[o(R,{size:"2em",color:"info"})])):(s(),i("div",H,[e.record&&(e.record[408]===""||e.record[408]==="Terminated")&&e.record[421]?(s(),i("div",V,[o(p,{class:"table-button",size:"xs",color:"positive",label:"Available",onClick:l[0]||(l[0]=m=>e.$emit("viewEmployee",e.record))},{default:r(()=>[o(w,{anchor:"center left",self:"center end",class:"bg-positive"},{default:r(()=>[v("Click to view this employee.")]),_:1})]),_:1})])):y("",!0),e.record&&e.record[408]==="Terminated"&&!e.record[421]?(s(),i("div",I,[o(p,{class:"table-button",size:"xs",color:"negative",label:"Not Eligible",onClick:l[1]||(l[1]=m=>e.$emit("viewEmployee",e.record))},{default:r(()=>[o(w,{anchor:"center left",self:"center end",class:"bg-negative"},{default:r(()=>[v("Click to view this employee.")]),_:1})]),_:1})])):y("",!0),e.record&&e.record[408]==="Active"?(s(),i("div",O,[o(p,{class:"table-button",size:"xs",color:"accent",label:"Active Employee",onClick:l[2]||(l[2]=m=>e.$emit("viewEmployee",e.record))},{default:r(()=>[o(w,{anchor:"center left",self:"center end",class:"bg-accent"},{default:r(()=>[v("Click to view this employee.")]),_:1})]),_:1})])):y("",!0),e.record?y("",!0):(s(),i("div",P,[o(p,{class:"table-button",disable:"",size:"xs",color:"info",label:"Nothing Found"},{default:r(()=>[o(w,{anchor:"center left",self:"center end",class:"bg-info"},{default:r(()=>[v("No employee to view.")]),_:1})]),_:1})]))]))])}var te=q(D,[["render",W],["__scopeId","data-v-75100f0c"]]);export{te as G,R as Q};
