import{k as ne,c1 as P,c as X,_ as re,z as i,am as V,bh as n,A as U,C as t,d as l,aa as a,D as ze,c6 as C,bE as ve,an as m,r as I,o as Me,cx as z,b$ as ae,aY as ie,c2 as x,at as se,E,c3 as ue,aX as we,F as Se,c4 as De,w as Qe,cl as He}from"./index.f143ec23.js";import{Q as Te}from"./QPage.dbb8c2e6.js";import{Q as fe,a as he,b as Be}from"./QStep.c21ae686.js";import{c as Le,L as me,I as Ye,M as ye,H as qe,G as $e,d as je,J as Fe}from"./quickbase.f7f31bf8.js";import{a as W}from"./QSelect.542b2ebc.js";import{u as Ce}from"./i18n.b03e020c.js";import{a as D,b as ge,u as p,c as g}from"./array.337b6c82.js";import{s as Je}from"./states.03e3d448.js";import{u as Ue}from"./use-quasar.58a0a6a4.js";import{Q as Ee}from"./QTooltip.26e044f2.js";import"./use-panel.3dc9c77d.js";import"./touch.d8ab472d.js";import"./selection.7562683d.js";import"./QSlideTransition.fe506b03.js";import"./_commonjsHelpers.dfee5925.js";import"./dayjs.bcafcaf8.js";import"./localForage.6a9e6b1f.js";import"./index.7dbe61ef.js";import"./api.df21783a.js";import"./QChip.3a54d69e.js";import"./QMenu.a4bb863e.js";import"./position-engine.c88d530e.js";import"./rtl.65b79c69.js";const Ze=ne({props:{title:String,step:Number,name:Number},setup(){const{checkedIn:e,onKiosk:s}=P(Le()),q=me(),{hiringCenterAvailable:u}=P(Ye()),{updateProfile:k}=q,{profile:b}=P(q),o=ye(),{evergreenJobOptions:h}=P(o),{t:r}=Ce(),H=X(()=>e.value?D({selection:D().required(`${r("pleaseSelectAJob")}`).nullable()}):!1),{meta:B,errors:F,handleSubmit:J,isSubmitting:L}=ge({validationSchema:H,initialValues:{selection:b.value[19].value?{value:b.value[19].value,label:b.value[19].label}:null}}),{value:Y}=p("selection"),M=J(w=>{const Z={19:{value:w.selection.value,label:w.selection.label},40:{value:w.selection[13],label:w.selection[12]}};k({next:1,values:Z})});return{checkedIn:e,onKiosk:s,selection:Y,formMeta:B,formErrors:F,isSubmitting:L,submitUpdate:M,evergreenJobOptions:h,hiringCenterAvailable:u}}}),Ke={key:0},Ge={class:"text-caption"};function We(e,s,q,u,k,b){return i(),V(he,{name:e.name,title:e.title,done:e.step>0},{default:n(()=>[e.checkedIn||e.onKiosk||!e.onKiosk&&e.hiringCenterAvailable?(i(),U("div",Ke,[t("form",{onSubmit:s[1]||(s[1]=ve((...o)=>e.submitUpdate&&e.submitUpdate(...o),["prevent"]))},[l(W,{autofocus:"",label:e.$t("selectAJob"),modelValue:e.selection,"onUpdate:modelValue":s[0]||(s[0]=o=>e.selection=o),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:e.evergreenJobOptions,style:ze(e.$q.screen.gt.md?"width: 50%":"width: 100%"),error:!!e.formErrors.selection,"bottom-slots":"",dense:""},{error:n(()=>[t("div",Ge,a(e.formErrors.selection),1)]),_:1},8,["label","modelValue","options","style","error"]),l(fe,{class:"text-right"},{default:n(()=>[l(C,{type:"submit",color:"info",label:e.$t("continue")},null,8,["label"])]),_:1})],32)])):m("",!0)]),_:1},8,["name","title","done"])}var Xe=re(Ze,[["render",We]]);const _e=["Alberta","British Columbia","Manitoba","New Brunswick","Newfoundland and Labrador","Northwest Territories","Nova Scotia","Nunavut","Ontario","Prince Edward Island","Quebec","Saskatchewan","Yukon Territory"],xe=ne({props:{title:String,step:Number,name:Number},components:{},setup(){const{employee:e}=P(qe()),s=[{label:"Call",value:1},{label:"Text",value:2},{label:"Email",value:3},{label:"Call, Text, or Email",value:4},{label:"Do Not Contact Me",value:5}],q=[{label:"United States",value:"United States"},{label:"Canada",value:"Canada"}],u=I(!1),k=I(!1),b=I(null),o=me(),{onJobBoard:h}=P(o),r=D({first:g().required("First name is required!").matches(/^[aA-zZ\s]+$/,{excludeEmptyString:!0,message:"Only letters are allowed for this field!"}),middle:g().matches(/^[aA-zZ\s]+$/,{excludeEmptyString:!0,message:"Only letters are allowed for this field!"}).nullable().notRequired(),last:g().required("Last name is required!").matches(/^[aA-zZ\s]+$/,{excludeEmptyString:!0,message:"Only letters are allowed for this field!"}),suffix:g().nullable().notRequired(),street1:g().required(),street2:g().nullable().notRequired(),city:g().required(),state:g().required(),postal:g().required(),addressCountry:D().required(),contact:D().nullable().notRequired()}),{meta:H,errors:B,handleSubmit:F,isSubmitting:J}=ge({validationSchema:r,initialValues:{first:e.value[20]?e.value[20]:"",middle:e.value[21]?e.value[21]:"",last:e.value[22]?e.value[22]:"",suffix:e.value[23]?e.value[23]:"",contact:e.value[57]?{value:e.value[57],label:e.value[58]}:null,street1:e.value[41]?e.value[41]:"",street2:e.value[42]?e.value[42]:"",city:e.value[43]?e.value[43]:"",state:e.value[44]?e.value[44]:"",postal:e.value[45]?e.value[45]:"",addressCountry:e.value[46]?{value:e.value[46],label:e.value[46]}:null}}),{value:L,meta:Y}=p("first"),{value:M,meta:w}=p("middle"),{value:Z,meta:K}=p("last"),{value:ee}=p("suffix"),{value:te}=p("contact"),{value:oe}=p("street1"),{value:N}=p("street2"),{value:le}=p("city"),{value:O}=p("state"),{value:Q}=p("postal"),{value:A}=p("addressCountry"),d=X(()=>{const v=`${L.value} ${Z.value} ${ee.value}`;return $e.formatName(v)}),y=X(()=>`${oe.value}${N.value===""?"":` ${N.value}`}, ${le.value}, ${O.value}, ${Q.value}, ${A.value.value}`);function $(){const v={next:2};o.updateProfile(v)}function G(){u.value=!0}const _=F(async v=>{const ce={23:v.first,24:v.middle,25:v.last,26:v.suffix,27:e.value[27],28:e.value[26],46:v.contact,32:v.street1,33:v.street2,34:v.city,35:v.state,36:v.postal,37:v.addressCountry.value},T={next:2,values:ce};u.value=!1;const be=await o.updateProfile(T);console.log(be)});function j(){const v={next:0};o.updateProfile(v)}const de=v=>{b.value=v};return Me(()=>{console.log(e.value)}),{submitUpdate:_,isSubmitting:J,save:$,back:j,updateCountry:de,first:L,middle:M,last:Z,suffix:ee,contact:te,street1:oe,street2:N,city:le,state:O,postal:Q,addressCountry:A,hasPersonalInfo:k,showEdit:u,firstMeta:Y,middleMeta:w,lastMeta:K,formMeta:H,formErrors:B,options:s,countries:q,fullName:d,fullAddress:y,employee:e,showEditFunction:G,onJobBoard:h,states:Je,provinces:_e}}}),et={class:"row justify-between"},tt={class:"col-12 col-md-5"},ot={class:"text-caption"},lt={class:"text-caption"},st={class:"text-caption"},at={class:"text-caption"},nt={class:"text-caption"},rt={class:"col-12 col-md-6"},it={class:"text-caption"},dt={class:"text-caption"};function ut(e,s,q,u,k,b){return i(),U("form",{onSubmit:s[12]||(s[12]=ve((...o)=>e.submitUpdate&&e.submitUpdate(...o),["prevent"]))},[t("div",et,[t("div",tt,[l(z,{dense:"",modelValue:e.first,"onUpdate:modelValue":s[0]||(s[0]=o=>e.first=o),label:`${e.$t("firstName")} *`,error:!!e.formErrors.first,"bottom-slots":""},{error:n(()=>[t("div",ot,a(e.formErrors.first),1)]),_:1},8,["modelValue","label","error"]),l(z,{dense:"",modelValue:e.middle,"onUpdate:modelValue":s[1]||(s[1]=o=>e.middle=o),label:e.$t("middleName"),error:!!e.formErrors.middle,"bottom-slots":""},{error:n(()=>[t("div",lt,a(e.formErrors.middle),1)]),_:1},8,["modelValue","label","error"]),l(z,{dense:"",modelValue:e.last,"onUpdate:modelValue":s[2]||(s[2]=o=>e.last=o),label:`${e.$t("lastName")} *`,error:!!e.formErrors.last,"bottom-slots":""},{error:n(()=>[t("div",st,a(e.formErrors.last),1)]),_:1},8,["modelValue","label","error"]),l(z,{dense:"",modelValue:e.suffix,"onUpdate:modelValue":s[3]||(s[3]=o=>e.suffix=o),label:e.$t("suffix"),error:!!e.formErrors.suffix,"bottom-slots":""},{error:n(()=>[t("div",at,a(e.formErrors.suffix),1)]),_:1},8,["modelValue","label","error"]),l(W,{dense:"",modelValue:e.contact,"onUpdate:modelValue":s[4]||(s[4]=o=>e.contact=o),label:e.$t("preferredContactMethod"),options:e.options,error:!!e.formErrors.contact,"bottom-slots":""},{error:n(()=>[t("div",nt,a(e.formErrors.contact),1)]),_:1},8,["modelValue","label","options","error"])]),e.$q.screen.gt.sm?(i(),V(ae,{key:0,vertical:""})):m("",!0),t("div",rt,[l(W,{dense:"",modelValue:e.addressCountry,"onUpdate:modelValue":s[5]||(s[5]=o=>e.addressCountry=o),label:`${e.$t("country")} *`,options:e.countries,error:!!e.formErrors.addressCountry,"bottom-slots":""},{error:n(()=>[t("div",it,a(e.formErrors.addressCountry),1)]),_:1},8,["modelValue","label","options","error"]),l(z,{dense:"",modelValue:e.street1,"onUpdate:modelValue":s[6]||(s[6]=o=>e.street1=o),label:`${e.$t("streetAddress1")} *`,error:!!e.formErrors.street1,"bottom-slots":""},null,8,["modelValue","label","error"]),l(z,{dense:"",modelValue:e.street2,"onUpdate:modelValue":s[7]||(s[7]=o=>e.street2=o),label:e.$t("streetAddress2"),error:!!e.formErrors.street2,"bottom-slots":""},null,8,["modelValue","label","error"]),l(z,{dense:"",modelValue:e.city,"onUpdate:modelValue":s[8]||(s[8]=o=>e.city=o),label:`${e.$t("city")} *`,error:!!e.formErrors.city,"bottom-slots":""},null,8,["modelValue","label","error"]),l(W,{dense:"",modelValue:e.state,"onUpdate:modelValue":s[9]||(s[9]=o=>e.state=o),label:`${e.$t("stateRegion")} *`,options:e.addressCountry?e.addressCountry.value==="United States"?e.states:e.provinces:e.states,error:!!e.formErrors.state,"bottom-slots":""},{error:n(()=>[t("div",dt,a(e.formErrors.state),1)]),_:1},8,["modelValue","label","options","error"]),l(z,{dense:"",modelValue:e.postal,"onUpdate:modelValue":s[10]||(s[10]=o=>e.postal=o),label:`${e.$t("zipCode")} *`,error:!!e.formErrors.postal,"bottom-slots":""},null,8,["modelValue","label","error"])])]),l(fe,{class:"text-right"},{default:n(()=>[e.onJobBoard?m("",!0):(i(),V(C,{key:0,onClick:s[11]||(s[11]=o=>e.$emit("back")),color:"secondary",label:e.$t("back"),class:"q-mr-sm"},null,8,["label"])),l(C,{type:"submit",color:"info",label:e.$t("continue")},null,8,["label"])]),_:1})],32)}var mt=re(xe,[["render",ut]]);const ct=/^[0-9]{10}/g,pt=ne({props:{title:String,step:Number,name:Number},components:{editPersonalInfo:mt},setup(){const{employee:e}=P(qe()),s=[{label:"Call",value:0},{label:"Text",value:1},{label:"Email",value:2}],q=[{label:"United States",value:"United States"},{label:"Canada",value:"Canada"}],u=I(!0),k=I(!1),b=I(null),o=me(),{onJobBoard:h,personalInfoNeeded:r}=P(o),H=D({first:g().required("First name is required!").matches(/^[aA-zZ\s]+$/,{excludeEmptyString:!0,message:"Only letters are allowed for this field!"}),middle:g().matches(/^[aA-zZ\s]+$/,{excludeEmptyString:!0,message:"Only letters are allowed for this field!"}).nullable().notRequired(),last:g().required("Last name is required!").matches(/^[aA-zZ\s]+$/,{excludeEmptyString:!0,message:"Only letters are allowed for this field!"}),suffix:g().nullable().notRequired(),email:g().required("Email is required!").email("You must provide a valid email!"),phone:g().matches(ct,{message:"Valid Phone Number Required!"}).required("Phone number is required!"),street1:g().required(),street2:g().nullable().notRequired(),city:g().required(),state:g().required(),postal:g().required(),addressCountry:D().required(),contact:D().nullable().notRequired()}),{meta:B,errors:F,handleSubmit:J,isSubmitting:L}=ge({validationSchema:H,initialValues:{first:e.value[20]?e.value[20]:"",middle:e.value[21]?e.value[21]:"",last:e.value[22]?e.value[22]:"",suffix:e.value[23]?e.value[23]:"",phone:e.value[27]?e.value[27]:"",email:e.value[26]?e.value[26]:"",contact:e.value[57]?{value:e.value[57],label:e.value[58]}:null,street1:e.value[41]?e.value[41]:"",street2:e.value[42]?e.value[42]:"",city:e.value[43]?e.value[43]:"",state:e.value[44]?e.value[44]:"",postal:e.value[45]?e.value[45]:"",addressCountry:e.value[46]?{value:e.value[46],label:e.value[46]}:null}}),{value:Y,meta:M}=p("first"),{value:w,meta:Z}=p("middle"),{value:K,meta:ee}=p("last"),{value:te}=p("suffix"),{value:oe}=p("email"),{value:N}=p("phone"),{value:le}=p("contact"),{value:O}=p("street1"),{value:Q}=p("street2"),{value:A}=p("city"),{value:d}=p("state"),{value:y}=p("postal"),{value:$}=p("addressCountry"),G=X(()=>{const f=`${Y.value} ${K.value} ${te.value}`;return $e.formatName(f)}),_=X(()=>`${O.value}${Q.value===""?"":` ${Q.value}`}, ${A.value}, ${d.value}, ${y.value}, ${$.value.value}`),j=X(()=>{let f="";return N.value.length===11?f=N.value.substring(1):f=N.value,$e.formatPhone(f)});async function de(){const f={23:e.value[20],24:e.value[21],25:e.value[22],26:e.value[23],27:e.value[27],28:e.value[26],46:e.value[57],32:e.value[41],33:e.value[42],34:e.value[43],35:e.value[44],36:e.value[45],37:e.value[46]},pe={next:2,values:f};o.updateProfile(pe)}function v(){u.value=!0}const ce=J(f=>{const pe={23:f.first,24:f.middle,25:f.last,26:f.suffix,27:f.phone,28:f.email,46:f.contact,32:f.street1,33:f.street2,34:f.city,35:f.state,36:f.postal,37:f.addressCountry.name},ke={next:2,values:pe};u.value=!1,o.updateProfile(ke)});function T(){u.value=!1;const f={next:0};o.updateProfile(f)}return{submitUpdate:ce,isSubmitting:L,save:de,back:T,updateCountry:f=>{b.value=f},first:Y,middle:w,last:K,suffix:te,email:oe,phone:N,contact:le,street1:O,street2:Q,city:A,state:d,postal:y,addressCountry:$,hasPersonalInfo:k,showEdit:u,firstMeta:M,middleMeta:Z,lastMeta:ee,formMeta:B,formErrors:F,options:s,countries:q,fullName:G,fullAddress:_,formatPhone:j,employee:e,showEditFunction:v,onJobBoard:h,personalInfoNeeded:r}}}),vt={key:1},ft={class:"col-12 col-md-3 q-py-sm"},bt={class:"text-primary"},$t={class:"text-dark q-pl-sm"},ht={class:"col-12 col-md-6 q-py-sm"},yt={class:"text-primary"},qt={class:"text-dark q-pl-sm"},gt={class:"col-12 col-md-3 q-py-sm"},kt={class:"text-primary"},Vt={class:"text-dark q-pl-sm"};function Ct(e,s,q,u,k,b){const o=ie("edit-personal-info");return i(),V(he,{name:e.name,title:e.title,done:e.step>1},{default:n(()=>[e.showEdit||e.personalInfoNeeded?(i(),V(o,{key:0,onBack:e.back},null,8,["onBack"])):m("",!0),!e.showEdit&&!e.personalInfoNeeded?(i(),U("div",vt,[l(ue,null,{default:n(()=>[l(x,null,{default:n(()=>[t("div",{class:E(["text-dark",e.$q.screen.gt.sm?"text-h6":"text-body2"])},[se(a(e.$q.screen.gt.sm?`${e.$t("personalInfo")}`:`${e.$t("personal")}`)+" ",1),l(C,{class:"q-ml-sm",round:"",size:e.$q.screen.gt.sm?"sm":"xs",color:"accent",icon:"edit",onClick:e.showEditFunction},null,8,["size","onClick"])],2),t("div",{class:E(["row q-mt-sm",e.$q.screen.gt.sm?"text-body1":"text-caption"])},[t("div",ft,[t("div",bt,a(e.$t("name")),1),t("div",$t,a(e.employee[24]),1)]),t("div",ht,[t("div",yt,a(e.$t("address")),1),t("div",qt,a(e.employee[40]),1)]),t("div",gt,[t("div",kt,a(e.$t("preferredContactMethod")),1),t("div",Vt,a(e.employee[58]),1)])],2)]),_:1})]),_:1}),l(fe,{class:"text-right"},{default:n(()=>[e.onJobBoard?m("",!0):(i(),V(C,{key:0,onClick:e.back,color:"secondary",label:e.$t("back"),class:"q-mr-sm"},null,8,["onClick","label"])),l(C,{onClick:e.save,color:"info",label:e.$t("continue")},null,8,["onClick","label"])]),_:1})])):m("",!0)]),_:1},8,["name","title","done"])}var Et=re(pt,[["render",Ct]]);const wt=/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/,St=ne({props:{title:String,step:Number,name:Number},setup(){const e=Ue(),s=me(),q=ye(),u=qe(),{t:k}=Ce(),{relationshipOptions:b}=P(q),{savedEmergencyContacts:o}=P(u),{removeContact:h,addContact:r,updateContact:H,employeeData:B}=u,F=I({name:"first",value:null}),J=I({name:"last",value:null}),L=I({name:"phone",value:null}),Y=I({name:"relationship",value:null}),M=I([]),w=X(()=>{const d=o.value.concat(M.value);return d.sort(function(y,$){return y.editing&&!$.editing?-1:!y.editing&&$.editing?1:0}),d}),Z=X(()=>w.value.filter(y=>y.editing).length>0);function K(){const d={next:3};s.updateProfile(d)}function ee(){const d={next:1};s.updateProfile(d)}function te(){const d={3:w.value.length+1,6:"",7:"",8:"",11:"",12:"",16:"",editing:!0,new:!0,contact:null};M.value.push(d),console.log(w.value)}function oe(d){o.value[d].editing=!0}function N(d){const y=w.value[d];console.log(y),e.dialog({title:"Alert",message:`Are you sure you want to remove ${y[6]} ${y[7]}?`,cancel:!0,persistent:!0}).onOk(()=>{h(y[3])})}const le=D({relationship:D().required("Relationship is required.").nullable(),phone:g().matches(wt,{message:`${k("validPhoneIsRequired")}`}).length(10,{message:`${k("validPhoneIsRequired")}`}).required("Phone is required.").label(`${k("phoneNumber")}`),last:g().required().label(`${k("lastName")}`),first:g().required().label(`${k("firstName")}`)}).required();function O(d){const y=[F.value,J.value,L.value,Y.value];d?y.forEach($=>{$.name===d.name?$.value=d.message:$.value=null}):y.forEach($=>{$.value=null})}async function Q(d,y){console.log(d);const $=w.value[y];try{await le.validate({relationship:d.contact,phone:d[16],last:d[7],first:d[6]}),$[11]=d.contact.value,$[12]=d.contact.label,$.editing=!1,O(),$.new?($.new=!1,r($),M.value.forEach((G,_)=>{G[3]===$[3]&&M.value.splice(_,1)})):H($)}catch({name:G,path:_,errors:j,inner:de}){let v="";j[0]instanceof Object?v=j[0].message:v=j[0],O({name:_,message:v})}}function A(d){const y=w.value[d];console.log(y),y.new?M.value.forEach(($,G)=>{$[3]===y[3]&&M.value.splice(G,1)}):w.value[d].editing=!1}return{save:K,back:ee,savedEmergencyContacts:o,allContacts:w,editing:Z,relationshipOptions:b,editItem:oe,removeItem:N,saveItem:Q,cancelEdit:A,addNewContactRow:te,addContact:r,updateContact:H,firstError:F,lastError:J,phoneError:L,relationshipError:Y,helpers:$e,employeeData:B}}}),Ut={class:"col-12 col-md-4"},Nt={class:"text-primary"},It={class:"text-dark q-pl-sm"},Pt={class:"col-12 col-md-4"},Ot={class:"text-primary"},At={class:"text-dark q-pl-sm"},Rt={key:0,class:"text-body2 text-dark"},zt={class:"row q-py-sm"},Mt={class:"col-12 col-md-6 text-left"},Dt={key:0,class:"text-body2 text-primary text-italic q-pb-sm q-pl-md"},Qt=["id"],Ht={class:"col-12 col-md-4"},Tt={class:"text-primary"},Bt={class:"text-dark q-pl-sm"},Lt={class:"text-primary"},Yt={class:"text-dark q-pl-sm"},jt={class:"text-primary"},Ft={class:"text-dark q-pl-sm"},Jt={key:1,class:"items-center"},Zt=["onSubmit"],Kt={class:"row"},Gt={class:"col-12 col-md-3 q-pr-md"},Wt={class:"col-12 col-md-3 q-pr-md"},Xt={class:"col-12 col-md-3 q-pr-md"},_t={class:"col-12 col-md-3"},xt={class:"row q-mt-md"},eo={class:"col text-right"};function to(e,s,q,u,k,b){return i(),V(he,{name:e.name,title:e.title},{default:n(()=>[t("div",null,[l(ue,{class:"q-px-xs"},{default:n(()=>[l(x,null,{default:n(()=>[t("div",{class:E(["text-dark",e.$q.screen.gt.sm?"text-h6":"text-body2"])},[se(a(e.$q.screen.gt.sm?`${e.$t("personalContactInfo")}`:`${e.$t("personal")}`)+" ",1),l(C,{class:"q-ml-sm",round:"",size:e.$q.screen.gt.sm?"sm":"xs",color:"accent",icon:"edit"},null,8,["size"])],2),t("div",{class:E(["row q-mt-sm",e.$q.screen.gt.sm?"text-body1":"text-caption"])},[t("div",Ut,[t("div",Nt,a(e.$t("phoneNumber")),1),t("div",It,a(e.employeeData[25]),1)]),t("div",Pt,[t("div",Ot,a(e.$t("email")),1),t("div",At,a(e.employeeData[26]),1)])],2)]),_:1}),e.$q.screen.gt.sm?m("",!0):(i(),V(ae,{key:0})),e.editing?m("",!0):(i(),V(x,{key:1,class:E(e.$q.screen.lt.md?"q-px-xs":"")},{default:n(()=>[e.$q.screen.gt.sm?m("",!0):(i(),U("div",Rt,a(e.$t("emergencyContacts")),1)),t("div",zt,[t("div",Mt,[l(C,{size:e.$q.screen.gt.sm?"md":"sm",color:"accent",label:(e.allContacts.length>0,e.$t("addEmergencyContact")),onClick:e.addNewContactRow,icon:"add"},null,8,["size","label","onClick"])])])]),_:1},8,["class"])),e.editing?(i(),V(ae,{key:2})):m("",!0),l(x,{class:E([e.editing?"q-pt-sm":"q-pt-none",e.$q.screen.gt.sm?"":"q-px-xs"])},{default:n(()=>[e.allContacts.length===0?(i(),U("div",Dt,a(e.$t("addEmergencyContactRequired")),1)):m("",!0),(i(!0),U(Se,null,we(e.allContacts,(o,h)=>(i(),U("div",{id:o[3],key:o[3]},[l(ue,{class:"q-pa-sm",flat:""},{default:n(()=>[o.editing?m("",!0):(i(),U("div",{key:0,class:E(["row items-center",e.$q.screen.gt.sm?"text-body2":"text-caption"])},[t("div",Ht,[t("div",null,[t("div",Tt,a(e.$t("name")),1),t("div",Bt,a(e.helpers.formatName(o[6]))+" "+a(e.helpers.formatName(o[7])),1)])]),t("div",{class:E(e.$q.screen.gt.sm?"col-3":"col-12 q-pt-sm")},[t("div",null,[t("div",Lt,a(e.$t("phoneNumber")),1),t("div",Yt,a(e.helpers.formatPhone(o[8])),1)])],2),t("div",{class:E(e.$q.screen.gt.sm?"col-3":"col-12 q-pt-sm")},[t("div",null,[t("div",jt,a(e.$t("relationship")),1),t("div",Ft,a(o[12]),1)])],2),t("div",{class:E(e.$q.screen.gt.sm?"col-2 text-right":"col-12 q-pt-md text-right")},[t("div",null,[l(C,{size:"sm",round:"",onClick:r=>e.editItem(h),color:"secondary",icon:"edit",class:"q-mr-sm"},null,8,["onClick"]),l(C,{size:"sm",round:"",onClick:r=>e.removeItem(h),color:"primary",icon:"delete"},null,8,["onClick"])])],2)],2)),o.editing?(i(),U("div",Jt,[t("form",{onSubmit:ve(r=>e.saveItem(o,h),["prevent"])},[t("div",Kt,[t("div",Gt,[l(z,{modelValue:o[6],"onUpdate:modelValue":r=>o[6]=r,dense:"",label:e.$t("firstName"),error:!!e.firstError.value,"bottom-slots":""},{error:n(()=>[se(a(e.firstError.value),1)]),_:2},1032,["modelValue","onUpdate:modelValue","label","error"])]),t("div",Wt,[l(z,{modelValue:o[7],"onUpdate:modelValue":r=>o[7]=r,dense:"",label:e.$t("lastName"),error:!!e.lastError.value,"bottom-slots":""},{error:n(()=>[se(a(e.lastError.value),1)]),_:2},1032,["modelValue","onUpdate:modelValue","label","error"])]),t("div",Xt,[l(z,{modelValue:o[16],"onUpdate:modelValue":r=>o[16]=r,dense:"",label:e.$t("phoneNumber"),error:!!e.phoneError.value,"bottom-slots":""},{error:n(()=>[se(a(e.phoneError.value),1)]),_:2},1032,["modelValue","onUpdate:modelValue","label","error"])]),t("div",_t,[l(W,{behavior:"menu",position:"top middle",modelValue:o.contact,"onUpdate:modelValue":r=>o.contact=r,dense:"",label:e.$t("relationship"),options:e.relationshipOptions,error:!!e.relationshipError.value,"bottom-slots":""},{error:n(()=>[se(a(e.relationshipError.value),1)]),_:2},1032,["modelValue","onUpdate:modelValue","label","options","error"])])]),t("div",xt,[t("div",eo,[l(C,{onClick:r=>e.cancelEdit(h),color:"secondary",label:e.$t("cancel"),class:"q-mr-sm"},null,8,["onClick","label"]),l(C,{type:"submit",color:"info",label:e.$t("save")},null,8,["label"])])])],40,Zt)])):m("",!0)]),_:2},1024),h<e.allContacts.length-1?(i(),V(ae,{key:0})):m("",!0)],8,Qt))),128))]),_:1},8,["class"])]),_:1}),e.editing?m("",!0):(i(),V(fe,{key:0,class:"text-right"},{default:n(()=>[l(C,{onClick:e.back,color:"secondary",label:e.$t("back"),class:"q-mr-sm"},null,8,["onClick","label"]),l(C,{onClick:e.save,color:"info",label:e.$t("continue"),disabled:e.savedEmergencyContacts.length===0},null,8,["onClick","label","disabled"])]),_:1}))])]),_:1},8,["name","title"])}var oo=re(St,[["render",to]]);const lo=ne({props:{title:String,step:Number,name:Number},setup(){const{t:e}=Ce(),s=De(),q=I(3),u=I(!1),k=Ue(),b=me(),o=ye(),h=je(),r=qe(),{fetchVoluntaryForms:H}=o,{experienceOptions:B,companyOptions:F,craftOptions:J,employmentOptions:L}=P(o),{hasAffirmative:Y,hasVets:M,hasDisability:w,goToVoluntary:Z}=P(h),{savedHistory:K}=P(r),{addHistory:ee,updateHistory:te,removeHistory:oe,employeeData:N,updateEmployeeData:le}=r,O=I([]),{toggleLoader:Q,profile:A}=b,{proceedToTest:d}=P(b),y=D({craft:D().required(`${e("selectACraft")}`).nullable(),experience:D().required(`${e("selectExperience")}`).nullable(),employment:D().required(`${e("selectEmploymentStatus")}`).nullable()}),{meta:$,errors:G,handleSubmit:_}=ge({validationSchema:y,initialValues:{craft:A[40]?{value:A[40].value,label:A[40].label}:null,experience:N[53]?{value:N[53],label:N[54]}:null,employment:N[55]?{value:N[55],label:N[56]}:null}}),{value:j}=p("craft"),{value:de}=p("experience"),{value:v}=p("employment");Qe(A,()=>{A[40].value!==j.value.value&&(j.value={value:A[40].value,label:A[40].label})});const ce=_(async c=>{const R={40:{value:c.craft.value,label:c.craft.label},42:{value:c.experience.value,label:c.experience.label},44:{value:c.employment.value,label:c.employment.label},39:{value:new Date}};if(Z.value){const S={next:w.value?6:Y.value?7:M.value?8:0,values:R,completed:!0};Q(!0),await H(),await b.updateProfile(S),await b.submitProfileToQB(),Q(!1),s.push({name:"voluntary"})}else{const S={next:0,values:R,completed:!0};Q(!0),await b.updateProfile(S),await b.submitProfileToQB(),d.value?(le({fields:{122:{value:8}}}),s.replace({name:"assessment"})):(s.replace({name:"thanks"}),Q(!1))}}),T=X(()=>{const c=K.value.concat(O.value);return c.sort(function(R,S){return R.editing&&!S.editing?-1:!R.editing&&S.editing?1:0}),c}),be=X(()=>T.value.filter(R=>R.editing).length>0);function f(){const c={3:T.value.length+1,6:"",7:"",10:"",11:"",12:"",13:"",15:"",16:"",editing:!0,new:!0,company:null,craft:null};O.value.push(c)}function pe(){const c={next:4};b.updateProfile(c)}function ke(){const c={next:2};b.updateProfile(c)}function Ne(c){K.value[c].editing=!0}function Ie(c){const R=T.value[c];console.log(R),k.dialog({title:`${e("alert")}`,message:`${e("areYouSureYouWantToRemove")}`,cancel:!0,persistent:!0}).onOk(()=>{oe(R[3])})}function Pe(c,R){const S=T.value[R];S[6]=c.company.value,S[7]=c.company.label,S[15]=c.craft.value,S[16]=c.craft.label,S.editing=!1,S.new?(S.new=!1,O.value.forEach((Ve,Re)=>{Ve[3]===S[3]&&O.value.splice(Re,1)}),ee(S)):te(S)}function Oe(c){const R=T.value[c];R.new?O.value.forEach((S,Ve)=>{S[3]===R[3]&&O.value.splice(Ve,1)}):T.value[c].editing=!1}function Ae(){u.value?(q.value=3,u.value=!1):(u.value=!0,q.value=T.value.length)}return{save:pe,back:ke,allHistory:T,addNewRow:f,editItem:Ne,removeItem:Ie,saveItem:Pe,cancelEdit:Oe,editing:be,date:Fe,show:q,expanded:u,adjustRows:Ae,formMeta:$,formErrors:G,submitUpdate:ce,craft:j,experience:de,employment:v,experienceOptions:B,companyOptions:F,craftOptions:J,employmentOptions:L}}}),so={class:"text-body2 text-dark"},ao={class:"row"},no={class:"col-12 col-md-4 q-px-xs"},ro={class:"text-caption"},io={class:"col-12 col-md-4 q-px-xs"},uo={class:"text-caption"},mo={class:"col-12 col-md-4 q-px-xs"},co={class:"text-caption"},po={class:"text-body2 text-dark"},vo={class:"row q-py-sm"},fo={class:"col-12 col-md-6"},bo={key:0,class:"text-body2 text-primary text-italic q-pb-sm q-pl-md"},$o=["id"],ho={class:"col-12 col-md-3"},yo={class:"text-primary"},qo={class:"text-dark q-pl-sm"},go={class:"text-primary"},ko={class:"text-dark q-pl-sm"},Vo={class:"text-primary"},Co={class:"text-dark q-pl-sm"},Eo={class:"text-primary"},wo={class:"text-dark q-pl-sm"},So={class:"text-primary"},Uo={class:"text-dark q-pl-sm"},No={key:1,class:"items-center"},Io=["onSubmit"],Po={class:"row"},Oo={class:"col-12 col-md-2 q-pr-md"},Ao={class:"col-12 col-md-2 q-pr-md"},Ro={class:"col-12 col-md-2 q-pr-md"},zo={class:"col-12 col-md-2 q-pr-md"},Mo={class:"col-12 col-md-2 q-pr-md"},Do={class:"col-12 col-md-2 q-pr-md"},Qo={class:"row q-mt-md"},Ho={class:"col text-right"},To={class:"row q-pt-md"},Bo={key:0,class:"col-12 text-right"};function Lo(e,s,q,u,k,b){return i(),V(he,{name:e.name,title:e.title,done:e.step>3},{default:n(()=>[t("div",null,[t("form",{onSubmit:s[3]||(s[3]=ve((...o)=>e.submitUpdate&&e.submitUpdate(...o),["prevent"]))},[l(ue,{class:"q-px-xs"},{default:n(()=>[l(x,{class:"q-pb-none q-mb-sm"},{default:n(()=>[t("div",so,a(e.$t("applyingFor"))+":",1),t("div",ao,[t("div",no,[l(W,{behavior:"menu",position:"top middle",disable:!0,dense:"",modelValue:e.craft,"onUpdate:modelValue":s[0]||(s[0]=o=>e.craft=o),label:e.$t("primaryCraft"),options:e.craftOptions,error:!!e.formErrors.craft,"bottom-slots":""},{error:n(()=>[t("div",ro,a(e.formErrors.craft),1)]),_:1},8,["modelValue","label","options","error"])]),t("div",io,[l(W,{behavior:"menu",position:"top middle",dense:"",modelValue:e.experience,"onUpdate:modelValue":s[1]||(s[1]=o=>e.experience=o),label:e.$t("yearsOfExperience"),options:e.experienceOptions,error:!!e.formErrors.experience,"bottom-slots":""},{error:n(()=>[t("div",uo,a(e.formErrors.experience),1)]),_:1},8,["modelValue","label","options","error"])]),t("div",mo,[l(W,{behavior:"menu",position:"top middle",dense:"",modelValue:e.employment,"onUpdate:modelValue":s[2]||(s[2]=o=>e.employment=o),label:e.$t("currentEmploymentStatus"),options:e.employmentOptions,error:!!e.formErrors.employment,"bottom-slots":""},{error:n(()=>[t("div",co,a(e.formErrors.employment),1)]),_:1},8,["modelValue","label","options","error"])])])]),_:1}),l(ae),e.editing?m("",!0):(i(),V(x,{key:0,class:E(e.$q.screen.lt.md?"q-px-xs":"")},{default:n(()=>[t("div",po,a(e.$t("workHistory"))+":",1),t("div",vo,[t("div",fo,[l(C,{size:e.$q.screen.gt.sm?"md":"sm",color:"accent",label:e.allHistory.length>0?`${e.$t("addMoreHistory")}`:`${e.$t("addEmploymentHistory")}`,onClick:e.addNewRow,icon:"add"},null,8,["size","label","onClick"])])])]),_:1},8,["class"])),e.editing?(i(),V(ae,{key:1})):m("",!0),l(x,{class:E([e.editing?"q-pt-sm":"q-pt-none",e.$q.screen.gt.sm?"":"q-px-xs"])},{default:n(()=>[e.allHistory.length===0?(i(),U("div",bo,a(e.$t("addYourEmploymentHistoryLater")),1)):m("",!0),(i(!0),U(Se,null,we(e.allHistory,(o,h)=>(i(),U("div",{id:o[3],key:h},[e.expanded||h+1<=e.show?(i(),V(ue,{key:0,class:"q-px-sm q-pt-xs q-pb-sm",flat:""},{default:n(()=>[o.editing?m("",!0):(i(),U("div",{key:0,class:E(["row items-center",e.$q.screen.gt.sm?"text-body2":"text-caption"])},[t("div",ho,[t("div",null,[t("div",yo,a(e.$t("company")),1),t("div",qo,a(o[7]),1)])]),t("div",{class:E(e.$q.screen.gt.sm?"col-2":"hidden")},[t("div",null,[t("div",go,a(e.$t("location")),1),t("div",ko,a(o[10]!==""?o[10]:"N/A"),1)])],2),t("div",{class:E(e.$q.screen.gt.sm?"col-2":"col-12 q-pt-md")},[t("div",null,[t("div",Vo,a(e.$t("jobTitle")),1),t("div",Co,a(o[16])+" "+a(o[11]),1)])],2),t("div",{class:E(e.$q.screen.gt.sm?"col-2":"col-6 q-pt-md")},[t("div",null,[t("div",Eo,a(e.$t("startDate")),1),t("div",wo,a(e.date.formatDate(o[12],"MM-DD-YYYY")),1)])],2),t("div",{class:E(e.$q.screen.gt.sm?"col-2":"col-6 q-pt-md")},[t("div",null,[t("div",So,a(e.$t("endDate")),1),t("div",Uo,a(e.date.formatDate(o[13],"MM-DD-YYYY")),1)])],2),t("div",{class:E(e.$q.screen.gt.sm?"col-1 text-right":"col-12 q-pt-md text-right")},[t("div",null,[l(C,{size:"sm",round:"",onClick:r=>e.editItem(h),color:"secondary",icon:"edit",class:"q-mr-sm"},null,8,["onClick"]),l(C,{size:"sm",round:"",onClick:r=>e.removeItem(h),color:"primary",icon:"delete"},null,8,["onClick"])])],2)],2)),o.editing?(i(),U("div",No,[t("form",{onSubmit:ve(r=>e.saveItem(o,h),["prevent"])},[t("div",Po,[t("div",Oo,[l(W,{modelValue:o.company,"onUpdate:modelValue":r=>o.company=r,dense:"",label:e.$t("company"),options:e.companyOptions},null,8,["modelValue","onUpdate:modelValue","label","options"])]),t("div",Ao,[l(W,{modelValue:o.craft,"onUpdate:modelValue":r=>o.craft=r,dense:"",label:e.$t("craft"),options:e.craftOptions},null,8,["modelValue","onUpdate:modelValue","label","options"])]),t("div",Ro,[l(z,{modelValue:o[11],"onUpdate:modelValue":r=>o[11]=r,dense:"",label:e.$t("jobTitle")},null,8,["modelValue","onUpdate:modelValue","label"])]),t("div",zo,[l(z,{modelValue:o[10],"onUpdate:modelValue":r=>o[10]=r,dense:"",label:e.$t("location")},null,8,["modelValue","onUpdate:modelValue","label"])]),t("div",Mo,[l(z,{type:"date",modelValue:o[12],"onUpdate:modelValue":r=>o[12]=r,dense:"",filled:"",hint:e.$t("startDate")},null,8,["modelValue","onUpdate:modelValue","hint"])]),t("div",Do,[l(z,{type:"date",modelValue:o[13],"onUpdate:modelValue":r=>o[13]=r,dense:"",filled:"",hint:e.$t("endDate")},null,8,["modelValue","onUpdate:modelValue","hint"])])]),t("div",Qo,[t("div",Ho,[l(C,{onClick:r=>e.cancelEdit(h),color:"secondary",label:e.$t("cancel"),class:"q-mr-sm"},null,8,["onClick","label"]),l(C,{type:"submit",color:"info",label:e.$t("save")},null,8,["label"])])])],40,Io)])):m("",!0)]),_:2},1024)):m("",!0),h<e.allHistory.length-1?(i(),V(ae,{key:1})):m("",!0)],8,$o))),128)),e.allHistory.length>e.show||e.expanded?(i(),V(ae,{key:1})):m("",!0),t("div",To,[e.allHistory.length>e.show||e.expanded?(i(),U("div",Bo,[l(C,{round:"",color:"secondary",onClick:e.adjustRows,icon:e.expanded?"expand_less":"expand_more"},{default:n(()=>[e.expanded?(i(),V(Ee,{key:0,anchor:"top middle"},{default:n(()=>[se(a(e.$t("showLess")),1)]),_:1})):m("",!0),e.expanded?m("",!0):(i(),V(Ee,{key:1,anchor:"top middle"},{default:n(()=>[se(a(e.$t("showMore")),1)]),_:1}))]),_:1},8,["onClick","icon"])])):m("",!0)])]),_:1},8,["class"])]),_:1}),e.editing?m("",!0):(i(),V(fe,{key:0,class:"text-right"},{default:n(()=>[l(C,{onClick:e.back,color:"secondary",label:e.$t("back"),class:"q-mr-sm"},null,8,["onClick","label"]),l(C,{type:"submit",color:"info",label:e.$t("continue")},null,8,["label"])]),_:1}))],32)])]),_:1},8,["name","title","done"])}var Yo=re(lo,[["render",Lo]]);const jo=ne({components:{selectJob:Xe,personalInfo:Et,emergencyContact:oo,workHistory:Yo},setup(){const e=me(),{resetProfile:s}=e,{step:q}=P(e);s();const u=I(null);return{step:q,jobSelection:u,jobOptions:[{label:"Default Job",value:0}]}}});function Fo(e,s,q,u,k,b){const o=ie("select-job"),h=ie("personal-info"),r=ie("emergency-contact"),H=ie("work-history");return i(),U("div",null,[l(Be,{modelValue:e.step,"onUpdate:modelValue":s[0]||(s[0]=B=>e.step=B),vertical:"",animated:"","done-color":"info","active-color":"dark","inactive-color":"secondary",class:E(e.$q.screen.lt.md?"q-px-none q-mx-none":"")},{default:n(()=>[l(o,{title:e.$t("selectAJob"),step:e.step,name:0,done:e.step>0},null,8,["title","step","done"]),l(h,{title:e.$t("personalInformation"),step:e.step,name:1,done:e.step>1},null,8,["title","step","done"]),l(r,{title:e.$t("contactInformation"),step:e.step,name:2,done:e.step>2},null,8,["title","step","done"]),l(H,{title:e.$t("employmentInformation"),step:e.step,name:3,done:e.step>3},null,8,["title","step","done"])]),_:1},8,["modelValue","class"])])}var Jo=re(jo,[["render",Fo]]);const Zo=ne({components:{profileStepper:Jo},setup(){}});function Ko(e,s,q,u,k,b){const o=ie("profile-stepper");return i(),U("div",null,[l(o)])}var Go=re(Zo,[["render",Ko]]);const Wo=ne({components:{Profile:Go},setup(){const e=I(0),s=ye(),{fetchFormOptions:q}=s,{formOptionsLoadingState:u}=P(s);return q(),{step:e,formOptionsLoadingState:u}}}),Xo={key:0,class:"absolute-center"},_o={key:1,class:"row"},xo={class:"col-12 q-pt-sm"},el={class:"q-pl-sm"},tl={class:"text-h6 text-dark"},ol={class:"text-body1 text-secondary text-italic"};function ll(e,s,q,u,k,b){const o=ie("profile");return i(),V(Te,{style:{"max-width":"100vw"}},{default:n(()=>[e.formOptionsLoadingState?(i(),U("div",Xo,[l(He,{color:"primary",size:"5em"})])):m("",!0),e.formOptionsLoadingState?m("",!0):(i(),U("div",_o,[t("div",xo,[l(ue,{flat:""},{default:n(()=>[l(x,{class:E(e.$q.screen.lt.md?"q-px-xs":"")},{default:n(()=>[t("div",el,[t("div",tl,a(e.$t("completeApplication")),1),t("div",ol,a(e.$t("pleaseCompleteYourApplication")),1)])]),_:1},8,["class"]),l(x,null,{default:n(()=>[l(o)]),_:1})]),_:1})])]))]),_:1})}var Sl=re(Wo,[["render",ll]]);export{Sl as default};
