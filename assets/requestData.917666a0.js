import{Q as p,a as _}from"./QTable.335cc480.js";import{Q as $}from"./QTr.bac2d088.js";import{l as v,bL as R,c as C,w as O,_ as x,A as n,B as d,d as o,bi as l,F as h,aY as q,an as w,au as y,ab as m,bI as k,D as B,bO as N}from"./index.50a0cfd4.js";import{Q}from"./QTd.04fdd51a.js";import{u as A}from"./use-quasar.71e23bf0.js";import{dayjs as D}from"./dayjs.e4b3ebad.js";const I=v({emits:["refreshData"],props:{requests:Array,status:String,loading:Boolean},setup(r,u){const c=A(),b=R(),g=C(()=>c.screen.gt.sm?[{name:1,label:"Created",align:"left",field:e=>e[1].$d,format:e=>`${D(e).fromNow()}`,sortable:!0},{name:2,label:"ID",align:"left",field:e=>e[3],format:e=>`${e}`,sortable:!0,required:!0},{name:3,label:"Type",align:"left",field:e=>e[282],format:e=>`${e===""?"Open":e}`,sortable:!0,required:!0},{name:4,label:"Office",align:"left",field:e=>e[103],format:e=>`${e}`,sortable:!0},{name:5,label:"Job #",align:"left",field:e=>e[27],format:e=>`${e}`,sortable:!0,required:!0},{name:6,label:"# Requested",align:"right",field:e=>i(e),format:e=>`${e}`},{name:7,label:"Offers",align:"right",field:e=>a(e),format:e=>`${e}`,sortable:!0,required:!0},{name:8,label:"Deployed",align:"right",field:e=>e[254],format:e=>`${e}`,sortable:!0,required:!0},{name:9,label:"Balance",align:"right",field:e=>t(e),format:e=>`${e}`,sortable:!0,required:!0}]:[{name:1,label:"Created",align:"left",field:e=>e[1].$d,format:e=>`${D(e).fromNow()}`,sortable:!0},{name:2,label:"ID",align:"left",field:e=>e[3],format:e=>`${e}`,sortable:!0,required:!0},{name:3,label:"Type",align:"left",field:e=>e[282],format:e=>`${e===""?"Open":e}`,sortable:!0,required:!0},{name:4,label:"Office",align:"left",field:e=>e[103],format:e=>`${e}`,sortable:!0},{name:5,label:"Job #",align:"left",field:e=>e[27],format:e=>`${e}`,sortable:!0,required:!0},{name:6,label:"# Requested",align:"right",field:e=>i(e),format:e=>`${e}`},{name:7,label:"Offers",align:"right",field:e=>a(e),format:e=>`${e}`,sortable:!0,required:!0},{name:8,label:"Deployed",align:"right",field:e=>e[254],format:e=>`${e}`,sortable:!0,required:!0},{name:9,label:"Balance",align:"right",field:e=>t(e),format:e=>`${e}`,sortable:!0,required:!0}]);function i(e){return e.classes.reduce((s,f)=>s+f[18],0)}function a(e){return e.offers.filter(s=>s[21]==="Accepted").length}function t(e){const s=i(e),f=a(e);return s-f}function T(e){console.log(e),b.push({name:"hire-request",params:{id:e[3]}})}return O(r.requests,()=>{console.log(r.requests)}),{columns:g,props:r,viewRequest:T}}}),z={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function V(r,u,c,b,g,i){return n(),d("div",null,[o(_,{columns:r.columns,rows:r.requests,"row-key":a=>a[3],class:"q-pa-sm",pagination:{rowsPerPage:25},"table-header-class":"bg-dark text-white","no-data-label":`There are no ${r.status} requests`,dense:"",loading:r.loading},{header:l(a=>[o($,{class:"bg-dark text-white",props:a},{default:l(()=>[o(p,{"auto-width":""}),(n(!0),d(h,null,q(a.cols,t=>(n(),w(p,{key:t.name,props:a},{default:l(()=>[y(m(t.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(a=>[o($,{props:a},{default:l(()=>[o(Q,{"auto-width":""},{default:l(()=>[o(k,{class:"cursor-pointer",size:r.$q.screen.gt.sm?"sm":"xs",color:"info",round:"",dense:"",onClick:t=>r.viewRequest(a.row),name:a.expand?"visibility_off":"visibility"},null,8,["size","onClick","name"])]),_:2},1024),(n(!0),d(h,null,q(a.cols,t=>(n(),w(Q,{key:t.name,props:a},{default:l(()=>[y(m(t.value),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"no-data":l(({message:a})=>[B("div",z,[o(k,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),B("span",null,m(a),1)])]),"top-right":l(()=>[o(N,{color:"secondary",flat:"","icon-right":"refresh",label:"Refresh",onClick:u[0]||(u[0]=a=>r.$emit("refreshData"))})]),_:1},8,["columns","rows","row-key","no-data-label","loading"])])}var E=x(I,[["render",V]]);export{E as R};
