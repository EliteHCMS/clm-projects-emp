var He=Object.defineProperty,ze=Object.defineProperties;var Ye=Object.getOwnPropertyDescriptors;var Le=Object.getOwnPropertySymbols;var We=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable;var Pe=(e,t,u)=>t in e?He(e,t,{enumerable:!0,configurable:!0,writable:!0,value:u}):e[t]=u,de=(e,t)=>{for(var u in t||(t={}))We.call(t,u)&&Pe(e,u,t[u]);if(Le)for(var u of Le(t))Ge.call(t,u)&&Pe(e,u,t[u]);return e},he=(e,t)=>ze(e,Ye(t));import{k as Z,r as q,c as L,_ as Y,aZ as H,A as f,B as j,d as a,ao as C,y as Oe,an as A,bi as r,bN as oe,cw as B,D as l,ab as h,cz as te,cx as I,cy as re,bO as S,bF as pe,F as ae,aY as se,au as $e,bP as Ue,h as me,bQ as Je,dk as Qe,bW as Ke,cV as Ze,dl as xe,w as be,o as et,bI as Xe,g as tt,cI as ot,bK as we,bJ as at,bH as lt,cA as st,G as fe,as as rt,bM as nt,bL as it}from"./index.38805863.js";import{Q as G,a as Ae,b as K}from"./QTabPanels.7eddc9f8.js";import{Q as De}from"./QTabs.a375cc5a.js";import{Q as dt}from"./QToolbar.95ffd3e1.js";import{Q as ut}from"./QPage.01b0c28c.js";import{u as Q}from"./project.6383ce1d.js";import{u as ee}from"./use-quasar.89332f4e.js";import{Q as ct}from"./QSplitter.09c73efe.js";import{u as Fe,q as D,H as mt}from"./quickbase.7d900951.js";import{dayjs as Ce}from"./dayjs.44b7d839.js";import{a as Ee,u as ft}from"./useQuerySaver.26dfad14.js";import{u as bt}from"./dataStore.045afe97.js";import{R as pt}from"./requestData.d284c8aa.js";import{N as vt}from"./nameRequestData.2cc2adcc.js";import{Q as Te}from"./QMarkupTable.2efad729.js";import{d as Be}from"./decode.593c6ccc.js";import{Q as Ne,a as ue}from"./QTable.01ac401f.js";import{Q as Se}from"./QTr.44f2c854.js";import{Q as Ve}from"./QTd.67e96c6b.js";import{Q as F}from"./QSelect.880b9553.js";import{Q as ve}from"./QForm.761b9110.js";import{a as z,c as X,b as ge,u as J,e as gt}from"./array.5be2c861.js";import{s as yt}from"./states.03e3d448.js";import{Q as ht}from"./QList.8a1e5eb5.js";import{Q as wt}from"./QMenu.fc102b89.js";import{Q as $t}from"./QBadge.d4e3acf3.js";import{Q as jt}from"./QInnerLoading.62a52ad2.js";import"./use-panel.6552ca4d.js";import"./touch.60582172.js";import"./selection.c2e0124c.js";import"./QResizeObserver.929e66a3.js";import"./rtl.cf9bbe47.js";import"./TouchPan.cdff9eb6.js";import"./_commonjsHelpers.a26ce4be.js";import"./index.7dbe61ef.js";import"./localForage.af601597.js";import"./i18n.a3b5dc5f.js";import"./api.cf59cd7e.js";import"./NameRequestGetEmployee.372f8cc3.js";import"./QTooltip.9da812c0.js";import"./position-engine.237479d6.js";import"./workday.654eb891.js";import"./syncEmployeeWithWorkday.444df2d1.js";import"./workdayAPI.1d6d8f80.js";import"./dataStore.a3d2c04d.js";import"./use-fullscreen.86310391.js";import"./QChip.8fb44a31.js";import"./QItemLabel.e72aa125.js";const qt=Z({props:{type:String,project:Number},components:{RequestDataTable:pt,NameRequestDataTable:vt},setup(e){const t=ee(),{capitalize:u}=Oe,{getOpenRequest:i,getPendingRequest:p,getClosedRequest:y,getNameRequest:o,setNameRequest:d,setOpenRequest:m,setPendingRequest:g,setClosedRequest:c,removeData:b}=bt(),{userData:w}=Fe(),V=q(!0),N=L(()=>i(e.project)),$=L(()=>p(e.project)),k=L(()=>y(e.project)),E=L(()=>o(e.project)),U=_=>{V.value=!0;let P;e.type==="open"?(N.value.length===0||_)&&(P=[Ee({type:"requests",query:`{'6'.EX.'${e.project}'}AND{'147'.EX.'3'}`})],O(P)):e.type==="pending"?($.value.length===0||_)&&(P=[Ee({type:"requests",query:`{'6'.EX.'${e.project}'}AND{'147'.EX.'2'}`})],O(P)):e.type==="closed"?(k.value.length===0||_)&&(P=[Ee({type:"requests",query:`{'6'.EX.'${e.project}'}AND{'147'.EX.'5'}`})],O(P)):e.type==="named"&&(E.value.length===0||_)&&(P=[ft({type:"names",query:`{'38'.EX.'${e.project}'}AND{'31'.XEX.'Cancelled'}AND{'31'.XEX.'Closed'}AND{'11'.XEX.true}`})],O(P))},O=async _=>{const{data:P}=e.type==="named"?await D.fetchFromHiringApp({fields:_}):await D.fetchFromProjectsApp({fields:_});e.type==="open"?m({projectId:e.project,data:P}):e.type==="pending"?g({projectId:e.project,data:P}):e.type==="closed"?c({projectId:e.project,data:P}):e.type==="named"&&d({projectId:e.project,data:P}),V.value=!1};function R(_){return`${u(_[6].toLowerCase())} ${u(_[7].toLowerCase())}`}async function ce(_){t.dialog({title:"Confirm",message:`Are you sure you want to remove ${R(_)} from request# ${_[18]}?`,cancel:!0,persistent:!0}).onOk(async()=>{try{const{data:P}=await D.upsertRecordsXML({to:"bsg4yb4wa",data:[{3:{value:_[3]},11:{value:!0},12:{value:Ce().tz("America/Chicago")},13:{value:`${w[35]} ${w[37]}`}}],fieldsToReturn:[15],formatObject:15});b({type:"nameRequest",key:P[0][15][38],item:P[0][15],storageKey:"storageNameRequest"})}catch(P){t.notify({type:"negative",message:"Cannot remove name request"}),console.log(P)}})}return U(),{open:N,pending:$,closed:k,named:E,getOpenRequest:i,getPendingRequest:p,getClosedRequest:y,getNameRequest:o,configureFetch:U,removeName:ce,loading:V}}}),kt={key:0},Ct={key:1},Nt={key:2},St={key:3};function Vt(e,t,u,i,p,y){const o=H("request-data-table"),d=H("name-request-data-table");return f(),j("div",null,[e.type==="open"?(f(),j("div",kt,[a(o,{loading:e.loading,requests:e.getOpenRequest(e.project),status:"Open",onRefreshData:t[0]||(t[0]=m=>e.configureFetch(!0))},null,8,["loading","requests"])])):C("",!0),e.type==="pending"?(f(),j("div",Ct,[a(o,{loading:e.loading,requests:e.getPendingRequest(e.project),status:"Pending",onRefreshData:t[1]||(t[1]=m=>e.configureFetch(!0))},null,8,["loading","requests"])])):C("",!0),e.type==="closed"?(f(),j("div",Nt,[a(o,{loading:e.loading,requests:e.getClosedRequest(e.project),status:"Closed",onRefreshData:t[2]||(t[2]=m=>e.configureFetch(!0))},null,8,["loading","requests"])])):C("",!0),e.type==="named"?(f(),j("div",St,[a(d,{loading:e.loading,requests:e.getNameRequest(e.project),status:"Named",onRemoveName:e.removeName,onRefreshData:t[3]||(t[3]=m=>e.configureFetch(!0))},null,8,["loading","requests","onRemoveName"])])):C("",!0)])}var At=Y(qt,[["render",Vt]]);const Dt=Z({components:{RequestPanel:At},setup(){const e=q(0);return{splitValue:q(10),tab:e}}});function Rt(e,t,u,i,p,y){const o=H("request-panel");return f(),j("div",null,[e.$route.params.id?(f(),A(ct,{key:0,modelValue:e.splitValue,"onUpdate:modelValue":t[2]||(t[2]=d=>e.splitValue=d)},{before:r(()=>[a(De,{dense:"",modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=d=>e.tab=d),vertical:"",align:"left","indicator-color":"accent","active-bg-color":"info","active-color":"white"},{default:r(()=>[a(G,{name:0,label:"Open"}),a(G,{name:1,label:"Names"}),a(G,{name:2,label:"Pending"}),a(G,{name:3,label:"Complete"})]),_:1},8,["modelValue"])]),after:r(()=>[a(Ae,{modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=d=>e.tab=d),animated:"",vertical:""},{default:r(()=>[a(K,{class:"q-pt-none",name:0},{default:r(()=>[a(o,{project:parseInt(e.$route.params.id),type:"open"},null,8,["project"])]),_:1}),a(K,{class:"q-pt-none",name:1},{default:r(()=>[a(o,{project:parseInt(e.$route.params.id),type:"named"},null,8,["project"])]),_:1}),a(K,{class:"q-pt-none",name:2},{default:r(()=>[a(o,{project:parseInt(e.$route.params.id),type:"pending"},null,8,["project"])]),_:1}),a(K,{class:"q-pt-none",name:3},{default:r(()=>[a(o,{project:parseInt(e.$route.params.id),type:"closed"},null,8,["project"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])):C("",!0)])}var _t=Y(Dt,[["render",Rt]]);const Et={components:{},setup(){const{projectData:e}=oe(Q()),t=q(!1);return{projectData:e,decodeHTML:Be,showEditOrgs:t}}},Tt=l("div",{class:"text-h6 text-primary q-py-sm q-pl-md"},"Details",-1),Mt=l("thead",{class:"bg-dark text-white"},[l("tr",null,[l("th",{class:"text-left"},"Type"),l("th",{class:"text-left"},"ID"),l("th",{class:"text-left"},"Name")])],-1),Lt=l("td",{class:"text-left"},"Location",-1),Pt={class:"text-left"},Ot={class:"text-left"},Ut=l("td",{class:"text-left"},"Supervisory",-1),Jt={class:"text-left"},Qt={class:"text-left"},Xt=l("td",{class:"text-left"},"Company",-1),Ft={class:"text-left"},Bt={class:"text-left"},It=l("td",{class:"text-left"},"Region",-1),Ht={class:"text-left"},zt={class:"text-left"},Yt=l("td",{class:"text-left"},"Branch",-1),Wt={class:"text-left"},Gt={class:"text-left"},Kt=l("td",{class:"text-left"},"Pay Group",-1),Zt={class:"text-left"},xt={class:"text-left"},eo=l("td",{class:"text-left"},"Cost Center",-1),to={class:"text-left"},oo={class:"text-left"};function ao(e,t,u,i,p,y){return f(),j("div",null,[a(te,null,{default:r(()=>[a(B,{class:"q-pa-none"},{default:r(()=>[Tt,i.projectData?(f(),A(Te,{key:0,flat:"",dense:"",square:""},{default:r(()=>[Mt,l("tbody",null,[l("tr",null,[Lt,l("td",Pt,h(i.projectData[242]||"N/A"),1),l("td",Ot,h(i.projectData[241]?i.decodeHTML(i.projectData[241]):"N/A"),1)]),l("tr",null,[Ut,l("td",Jt,h(i.projectData[244]?i.decodeHTML(i.projectData[244]):"N/A"),1),l("td",Qt,h(i.projectData[259]?i.decodeHTML(i.projectData[259]):"N/A"),1)]),l("tr",null,[Xt,l("td",Ft,h(i.projectData[287]?i.decodeHTML(i.projectData[287]):"N/A"),1),l("td",Bt,h(i.projectData[286]?i.decodeHTML(i.projectData[286]):"N/A"),1)]),l("tr",null,[It,l("td",Ht,h(i.projectData[284]?i.decodeHTML(i.projectData[284]):"N/A"),1),l("td",zt,h(i.projectData[283]?i.decodeHTML(i.projectData[283]):"N/A"),1)]),l("tr",null,[Yt,l("td",Wt,h(i.projectData[290]?i.decodeHTML(i.projectData[290]):"N/A"),1),l("td",Gt,h(i.projectData[289]?i.decodeHTML(i.projectData[289]):"N/A"),1)]),l("tr",null,[Kt,l("td",Zt,h(i.projectData[262]?i.decodeHTML(i.projectData[262]):"N/A"),1),l("td",xt,h(i.projectData[261]?i.decodeHTML(i.projectData[261]):"N/A"),1)]),l("tr",null,[eo,l("td",to,h(i.projectData[275]?i.decodeHTML(i.projectData[275]):"N/A"),1),l("td",oo,h(i.projectData[276]?i.decodeHTML(i.projectData[276]):"N/A"),1)])])]),_:1})):C("",!0)]),_:1})]),_:1})])}var lo=Y(Et,[["render",ao]]);const so=Z({setup(e,t){const u=ee(),{projectData:i}=oe(Q()),{pushNewObject:p}=Q(),y=z({jobNumber:X().required().label("Job Number"),craft:z(),description:X()}),{meta:o,errors:d,handleSubmit:m,handleReset:g}=ge({validationSchema:y}),{value:c}=J("jobNumber"),{value:b}=J("craft"),{value:w}=J("description"),V=m(async N=>{const $={6:{value:i.value[3]},11:{value:N.jobNumber}};N.craft&&Object.assign($,{14:{value:N.craft[3]}}),N.description&&Object.assign($,{20:{value:N.description}});try{const{data:k}=await D.upsertRecordsXML({to:"bpzpwr2eh",data:[$],fieldsToReturn:[35],formatObject:35});p({array:"jobNumbers",object:k[0][35]}),u.notify({type:"positive",message:`Job Number ${k[0][35][11]} successfully added`})}catch(k){console.log(k),u.notify({type:"negative",message:"Something went wrong!"})}t.emit("jobNumberAdded"),g()});return{projectData:i,jobNumber:c,craft:b,description:w,formErrors:d,formMeta:o,submit:V}}}),ro={class:"row"},no={class:"col-12 col-md-4 q-pr-sm"},io={class:"text-caption"},uo={class:"col-12 col-md-4 q-pr-sm"},co={class:"col-12 col-md-4"};function mo(e,t,u,i,p,y){return f(),j("div",null,[a(ve,{onSubmit:pe(e.submit,["prevent"])},{default:r(()=>[a(te,null,{default:r(()=>[a(B,null,{default:r(()=>[l("div",ro,[l("div",no,[a(I,{label:"Job Number",dense:"",modelValue:e.jobNumber,"onUpdate:modelValue":t[0]||(t[0]=o=>e.jobNumber=o),error:!!e.formErrors.jobNumber,"bottom-slots":""},{error:r(()=>[l("div",io,h(e.formErrors.jobNumber),1)]),_:1},8,["modelValue","error"])]),l("div",uo,[a(F,{dense:"",label:"Craft","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.craft,"onUpdate:modelValue":t[1]||(t[1]=o=>e.craft=o),options:e.projectData.crafts,"option-label":"10","display-value":`${e.craft?e.craft[10]:""}`},null,8,["modelValue","options","display-value"])]),l("div",co,[a(I,{label:"Description",dense:"",modelValue:e.description,"onUpdate:modelValue":t[2]||(t[2]=o=>e.description=o)},null,8,["modelValue"])])])]),_:1}),a(re,{align:"right"},{default:r(()=>[a(S,{color:"secondary",label:"Cancel",onClick:t[3]||(t[3]=o=>e.$emit("cancelAddJobNumber"))}),a(S,{color:"primary",label:"Submit",type:"submit",onClick:e.submit},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])])}var fo=Y(so,[["render",mo]]);const bo=[{name:0,label:"Job Number",align:"left",field:e=>e[11],format:e=>`${e}`,sortable:!0},{name:1,label:"Craft",align:"left",field:e=>e[15],format:e=>`${e}`,sortable:!0,required:!0},{name:2,label:"Description",align:"left",field:e=>e[20],format:e=>`${e}`,sortable:!0,required:!0}],po=Z({components:{AddJobNumber:fo},setup(){const e=ee(),t=q(!1),{projectData:u}=oe(Q()),{removeObject:i}=Q(),p=L(()=>(u.value&&u.value.jobNumbers?u.value.jobNumbers:[]).sort((m,g)=>m[1].$d>g[1].$d?1:-1));function y(d){console.log(d),e.dialog({title:"Confirm",message:`Are you sure you want to remove job number ${d[11]}?`,cancel:!0,persistent:!0}).onOk(()=>{o(d)})}async function o(d){try{const{data:m}=await D.upsertRecordsXML({to:"bpzpwr2eh",data:[{3:{value:d[3]},29:{value:"Inactive"}}],fieldsToReturn:[35],formatObject:35});i({array:"jobNumbers",object:m[0][35]})}catch(m){console.log(m),e.notify({type:"negative",message:"Something went wrong"})}}return{projectData:u,jobNumberColumns:bo,jobNumbers:p,initialPagination:{rowsPerPage:q(15)},showAddJobNumber:t,removeRow:y}}});function vo(e,t,u,i,p,y){const o=H("add-job-number");return f(),j("div",null,[e.showAddJobNumber?C("",!0):(f(),A(ue,{key:0,dense:"",title:"Job Numbers","title-class":"text-primary",style:{},columns:e.jobNumberColumns,rows:e.jobNumbers,"row-key":d=>d[3],"table-header-class":"bg-dark text-white",pagination:e.initialPagination},{"top-left":r(()=>[a(S,{color:"accent",label:"Add a Job Number",icon:"add",onClick:t[0]||(t[0]=d=>e.showAddJobNumber=!0)})]),header:r(d=>[a(Se,{class:"bg-dark text-white",props:d},{default:r(()=>[(f(!0),j(ae,null,se(d.cols,m=>(f(),A(Ne,{class:"text-left",key:m.name},{default:r(()=>[$e(h(m.label),1)]),_:2},1024))),128)),a(Ne,{"auto-width":""})]),_:2},1032,["props"])]),body:r(d=>[a(Se,{props:d},{default:r(()=>[(f(!0),j(ae,null,se(d.cols,m=>(f(),A(Ve,{key:m.name,props:d},{default:r(()=>[$e(h(m.value),1)]),_:2},1032,["props"]))),128)),a(Ve,{"auto-width":""},{default:r(()=>[a(S,{color:"accent",dense:"",flat:"",round:"",icon:"delete",onClick:m=>e.removeRow(d.row)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["columns","rows","row-key","pagination"])),e.showAddJobNumber?(f(),A(o,{key:1,onJobNumberAdded:t[1]||(t[1]=d=>e.showAddJobNumber=!1),onCancelAddJobNumber:t[2]||(t[2]=d=>e.showAddJobNumber=!1)})):C("",!0)])}var go=Y(po,[["render",vo]]);const yo=Z({setup(e,t){const u=ee(),{projectData:i}=oe(Q()),{pushNewObject:p}=Q(),y=z({name:X().required().label("Location Name"),street1:X().required().label("Street Address 1"),street2:X(),city:X().required().label("City"),state:X().required().label("State"),postal:X().required().label("Postal Code")}),{meta:o,errors:d,handleSubmit:m,handleReset:g}=ge({validationSchema:y}),{value:c}=J("name"),{value:b}=J("street1"),{value:w}=J("street2"),{value:V}=J("city"),{value:N}=J("state"),{value:$}=J("postal"),k=m(async E=>{const U={6:{value:E.name},8:{value:E.street1},9:{value:E.street2?E.street2:""},10:{value:E.city},11:{value:E.state},12:{value:E.postal},13:{value:"United States"}};i.value[8]&&Object.assign(U,{15:{value:i.value[8]}});try{const{data:O}=await D.upsertRecordsXML({to:"bp5d2twyj",data:[U],fieldsToReturn:[22],formatObject:22});p({array:"locations",object:O[0][22]}),u.notify({type:"positive",message:`Meeting location ${O[0][22][6]} successfully added`})}catch(O){console.log(O),u.notify({type:"negative",message:"Something went wrong!"})}t.emit("addComplete"),g()});return{projectData:i,formErrors:d,formMeta:o,submit:k,name:c,street1:b,street2:w,city:V,state:N,postal:$,states:yt}}}),ho={class:"row"},wo={class:"col-12 col-md-6"},$o={class:"text-caption"},jo={class:"text-caption"},qo={class:"text-caption"},ko={class:"text-caption"},Co={class:"text-caption"};function No(e,t,u,i,p,y){return f(),j("div",null,[a(ve,{onSubmit:pe(e.submit,["prevent"])},{default:r(()=>[a(te,null,{default:r(()=>[a(B,null,{default:r(()=>[l("div",ho,[l("div",wo,[a(I,{label:"Location Name",dense:"",modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=o=>e.name=o),error:!!e.formErrors.name,"bottom-slots":""},{error:r(()=>[l("div",$o,h(e.formErrors.name),1)]),_:1},8,["modelValue","error"]),a(I,{label:"Street Address 1",dense:"",modelValue:e.street1,"onUpdate:modelValue":t[1]||(t[1]=o=>e.street1=o),error:!!e.formErrors.street1,"bottom-slots":""},{error:r(()=>[l("div",jo,h(e.formErrors.street1),1)]),_:1},8,["modelValue","error"]),a(I,{label:"Street Address 2",dense:"",modelValue:e.street2,"onUpdate:modelValue":t[2]||(t[2]=o=>e.street2=o),error:!!e.formErrors.street2,"bottom-slots":""},{error:r(()=>[l("div",qo,h(e.formErrors.street2),1)]),_:1},8,["modelValue","error"]),a(I,{label:"City",dense:"",modelValue:e.city,"onUpdate:modelValue":t[3]||(t[3]=o=>e.city=o),error:!!e.formErrors.city,"bottom-slots":""},{error:r(()=>[l("div",ko,h(e.formErrors.city),1)]),_:1},8,["modelValue","error"]),a(F,{dense:"",label:"State","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.state,"onUpdate:modelValue":t[4]||(t[4]=o=>e.state=o),options:e.states,"bottom-slots":""},null,8,["modelValue","options"]),a(I,{label:"Postal Code",dense:"",modelValue:e.postal,"onUpdate:modelValue":t[5]||(t[5]=o=>e.postal=o),error:!!e.formErrors.postal,"bottom-slots":""},{error:r(()=>[l("div",Co,h(e.formErrors.postal),1)]),_:1},8,["modelValue","error"])])])]),_:1}),a(re,{align:"right"},{default:r(()=>[a(S,{color:"secondary",label:"Cancel",onClick:t[6]||(t[6]=o=>e.$emit("cancelAddJobNumber"))}),a(S,{color:"primary",label:"Submit",type:"submit",onClick:e.submit},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])])}var So=Y(yo,[["render",No]]);const Vo=[{name:0,label:"Location Name",align:"left",field:e=>e[6],format:e=>`${e}`,sortable:!0},{name:1,label:"Address",align:"left",field:e=>e[7],format:e=>`${e}`,sortable:!0,required:!0}],Ao=Z({components:{AddMeetingLocation:So},setup(){const e=ee(),t=q(!1),{projectData:u}=oe(Q()),{removeObject:i}=Q();function p(o){console.log(o),e.dialog({title:"Confirm",message:`Are you sure you want to remove the ${o[6]} location?`,cancel:!0,persistent:!0}).onOk(()=>{y(o)})}async function y(o){try{const{data:d}=await D.upsertRecordsXML({to:"bp5d2twyj",data:[{3:{value:o[3]},14:{value:"Inactive"}}],fieldsToReturn:[22],formatObject:22});i({array:"locations",object:d[0][22]})}catch(d){console.log(d),e.notify({type:"negative",message:"Something went wrong"})}}return{projectData:u,columns:Vo,initialPagination:{rowsPerPage:q(15)},showAdd:t,removeRow:p}}});function Do(e,t,u,i,p,y){const o=H("add-meeting-location");return f(),j("div",null,[e.showAdd?C("",!0):(f(),A(ue,{key:0,dense:"",title:"Meeting Locations","title-class":"text-primary",style:{},columns:e.columns,rows:e.projectData.locations,"table-header-class":"bg-dark text-white",pagination:e.initialPagination},{"top-left":r(()=>[a(S,{color:"accent",label:"Add a Meeting Location",icon:"add",onClick:t[0]||(t[0]=d=>e.showAdd=!0)})]),header:r(d=>[a(Se,{class:"bg-dark text-white",props:d},{default:r(()=>[(f(!0),j(ae,null,se(d.cols,m=>(f(),A(Ne,{class:"text-left",key:m.name},{default:r(()=>[$e(h(m.label),1)]),_:2},1024))),128)),a(Ne,{"auto-width":""})]),_:2},1032,["props"])]),body:r(d=>[a(Se,{props:d},{default:r(()=>[(f(!0),j(ae,null,se(d.cols,m=>(f(),A(Ve,{key:m.name,props:d},{default:r(()=>[$e(h(m.value),1)]),_:2},1032,["props"]))),128)),a(Ve,{"auto-width":""},{default:r(()=>[a(S,{color:"accent",dense:"",flat:"",round:"",icon:"delete",onClick:m=>e.removeRow(d.row)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["columns","rows","pagination"])),e.showAdd?(f(),A(o,{key:1,onAddComplete:t[1]||(t[1]=d=>e.showAdd=!1),onCancelAdd:t[2]||(t[2]=d=>e.showAdd=!1)})):C("",!0)])}var Ro=Y(Ao,[["render",Do]]),_o=Ue({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:t}){const u=L(()=>{const i=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(p=>e[p]===!0).map(p=>`q-btn-group--${p}`).join(" ");return`q-btn-group row no-wrap${i.length>0?" "+i:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>me("div",{class:u.value},Je(t.default))}});const Eo=Object.keys(Qe),To=e=>Eo.reduce((t,u)=>{const i=e[u];return i!==void 0&&(t[u]=i),t},{});var Mo=Ue({name:"QBtnDropdown",props:he(de(de({},Qe),Ke),{modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String}),emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:u}){const{proxy:i}=tt(),p=q(e.modelValue),y=q(null),o=Ze(),d=L(()=>{const R={"aria-expanded":p.value===!0?"true":"false","aria-haspopup":"true","aria-controls":o,"aria-label":e.toggleAriaLabel||i.$q.lang.label[p.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(R["aria-disabled"]="true"),R}),m=L(()=>"q-btn-dropdown__arrow"+(p.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),g=L(()=>xe(e)),c=L(()=>To(e));be(()=>e.modelValue,R=>{y.value!==null&&y.value[R?"show":"hide"]()}),be(()=>e.split,O);function b(R){p.value=!0,u("beforeShow",R)}function w(R){u("show",R),u("update:modelValue",!0)}function V(R){p.value=!1,u("beforeHide",R)}function N(R){u("hide",R),u("update:modelValue",!1)}function $(R){u("click",R)}function k(R){ot(R),O(),u("click",R)}function E(R){y.value!==null&&y.value.toggle(R)}function U(R){y.value!==null&&y.value.show(R)}function O(R){y.value!==null&&y.value.hide(R)}return Object.assign(i,{show:U,hide:O,toggle:E}),et(()=>{e.modelValue===!0&&U()}),()=>{const R=[me(Xe,{class:m.value,name:e.dropdownIcon||i.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&R.push(me(wt,{ref:y,id:o,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:b,onShow:w,onBeforeHide:V,onHide:N},t.default)),e.split===!1?me(S,he(de(de({class:"q-btn-dropdown q-btn-dropdown--simple"},c.value),d.value),{disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:$}),{default:()=>Je(t.label,[]).concat(R),loading:t.loading}):me(_o,he(de({class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square},g.value),{glossy:e.glossy,stretch:e.stretch}),()=>[me(S,he(de({class:"q-btn-dropdown--current"},c.value),{disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:k}),{default:t.label,loading:t.loading}),me(S,he(de(de({class:"q-btn-dropdown__arrow-container q-anchor--skip"},d.value),g.value),{disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple}),()=>R)])}}});const Lo=Z({props:{job:Object,craft:Object},setup(e,t){const u=ee(),{upsertProjectCraft:i}=Q(),p=L(()=>e.craft.options.jobs.find($=>$[3]===e.job[13]).aliases),y=L(()=>z({alias:z().required().label("Custom Job Title"),fixedRate:gt().moreThan(7.25,"Fixed rate must be greater than minimum wage.").lessThan(1e3).label("Fixed Rate").nullable()})),{meta:o,errors:d,handleSubmit:m,handleReset:g}=ge({validationSchema:y,initialValues:{alias:{3:e.job[9],7:e.job[18]},fixedRate:e.job.fixedRate>0?e.job.fixedRate:null}}),{value:c}=J("alias"),{value:b}=J("fixedRate"),w=m(async N=>{u.loading.show();const $={3:{value:e.job[3]},20:{value:e.craft[3]}};c.value!=={3:e.job[9],7:e.job[18]}&&Object.assign($,{9:{value:N.alias[3]}}),b.value&&b.value!==e.job.fixedRate&&Object.assign($,{155:{value:N.fixedRate}});try{const{data:k}=await D.upsertRecordsXML({to:"bpzpx5m7x",data:[$],fieldsToReturn:[153],formatObject:153});k.length>0&&(i({craft:k[0][153]}),g(),u.loading.hide(),t.emit("editJobComplete"))}catch{u.notify({type:"negative",message:"Something went wrong"})}});async function V(N,$){u.dialog({title:"Confirm",message:`Confirm you want to add "${N}" as a new alias.`,cancel:!0,persistent:!0}).onOk(async()=>{try{const{data:k}=await D.upsertRecordsXML({to:"bpzpi5rjh",data:[{6:{value:e.job[13]},7:{value:N},11:{value:"No"}}],fieldsToReturn:[25],formatObject:25});console.log(k),k.length>0&&(c.value=k[0][25],$(k[0][25]))}catch{u.notify({type:"negative",message:"Something went wrong"})}}).onCancel(()=>{$()})}return{formMeta:o,formErrors:d,submit:w,alias:c,fixedRate:b,aliasOptions:p,submitAlias:V}}}),Po={class:"text-body1 text-white"},Oo={class:"text-caption"},Uo={class:"text-caption"};function Jo(e,t,u,i,p,y){return f(),j("div",null,[l("div",null,[a(ve,{onSubmit:pe(e.submit,["prevent"])},{default:r(()=>[a(te,null,{default:r(()=>[a(B,{class:"bg-dark"},{default:r(()=>[l("div",Po,"Edit "+h(e.craft[10])+" "+h(e.job[18]),1)]),_:1}),a(B,null,{default:r(()=>[a(F,{class:"q-mb-sm",dense:"",label:"Select Custom Job Title (Alias)","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.alias,"onUpdate:modelValue":t[0]||(t[0]=o=>e.alias=o),options:e.aliasOptions,"option-label":"7","display-value":`${e.alias?e.alias[7]:""}`,"bottom-slots":"",error:!!e.formErrors.alias,onNewValue:e.submitAlias,"use-input":""},{error:r(()=>[l("div",Oo,h(e.formErrors.alias),1)]),_:1},8,["modelValue","options","display-value","error","onNewValue"]),e.$can("manage","rates")?(f(),A(I,{key:0,step:"any",prefix:"$",type:"number",dense:"",label:"Fixed Rate",modelValue:e.fixedRate,"onUpdate:modelValue":t[1]||(t[1]=o=>e.fixedRate=o),error:!!e.formErrors.fixedRate,"bottom-slots":""},{error:r(()=>[l("div",Uo,h(e.formErrors.fixedRate),1)]),_:1},8,["modelValue","error"])):C("",!0)]),_:1}),a(we),a(re,{class:"bg-accent",align:"right"},{default:r(()=>[a(S,{size:e.$q.screen.lt.md?"sm":"",color:"secondary",label:"Cancel",onClick:t[2]||(t[2]=o=>e.$emit("closeEditJob"))},null,8,["size"]),a(S,{type:"submit",size:e.$q.screen.lt.md?"sm":"",color:"primary",label:"Save"},null,8,["size"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])])])}var Qo=Y(Lo,[["render",Jo]]);const Xo=Z({props:{craft:Object},setup(e,t){const u=ee(),i=z({job:z().required("Job is required."),alias:z().required("Alias is required.").nullable()}),{meta:p,errors:y,handleSubmit:o,handleReset:d}=ge({validationSchema:i}),{value:m}=J("job"),{value:g}=J("alias"),c=o(async V=>{try{const{data:N}=await D.upsertRecordsXML({to:"bpzpx5m7x",data:[{9:{value:V.alias[3]},13:{value:V.job[3]},20:{value:e.craft[3]}}],fieldsToReturn:[153],formatObject:153});N.length>0&&(t.emit("newJobAdded",{craft:N[0][153]}),d())}catch{u.notify({type:"negative",message:"Something went wrong"})}});async function b(V,N){u.dialog({title:"Confirm",message:`Confirm you want to add "${V}" as a new alias.`,cancel:!0,persistent:!0}).onOk(async()=>{try{const{data:$}=await D.upsertRecordsXML({to:"bpzpi5rjh",data:[{6:{value:m.value[3]},7:{value:V},11:{value:"No"}}],fieldsToReturn:[25],formatObject:25});$.length>0&&(g.value=$[0][25],N($[0][25]))}catch{u.notify({type:"negative",message:"Something went wrong"})}}).onCancel(()=>{N()})}function w(){t.emit("cancelAddJob"),d()}return{formErrors:y,formMeta:p,submitJob:c,submitAlias:b,cancelAddJob:w,job:m,alias:g,props:e}}}),Fo={class:"row justify-between"},Bo={class:"col-5"},Io={class:"text-caption"},Ho={class:"col-6"},zo={class:"text-caption"};function Yo(e,t,u,i,p,y){return f(),j("div",null,[a(ve,{onSubmit:pe(e.submitJob,["prevent"])},{default:r(()=>[a(te,{flat:""},{default:r(()=>[a(B,null,{default:r(()=>[l("div",Fo,[l("div",Bo,[a(F,{class:"q-mb-sm",dense:"",label:"Select Default Job","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.job,"onUpdate:modelValue":t[0]||(t[0]=o=>e.job=o),options:e.props.craft.options.jobs,"option-label":"9","display-value":`${e.job?e.job[9]:""}`,"bottom-slots":"",error:!!e.formErrors.job},{error:r(()=>[l("div",Io,h(e.formErrors.job),1)]),_:1},8,["modelValue","options","display-value","error"])]),l("div",Ho,[a(F,{disable:!e.job,class:"q-mb-sm",dense:"",label:"Select Custom Job Title (Alias)","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.alias,"onUpdate:modelValue":t[1]||(t[1]=o=>e.alias=o),options:e.job?e.job.aliases:[],"option-label":"7","display-value":`${e.alias?e.alias[7]:""}`,"bottom-slots":"",error:!!e.formErrors.alias,onNewValue:e.submitAlias,"use-input":""},{error:r(()=>[l("div",zo,h(e.formErrors.alias),1)]),_:1},8,["disable","modelValue","options","display-value","error","onNewValue"])])])]),_:1}),a(re,{align:"right"},{default:r(()=>[a(S,{color:"secondary",label:"Cancel",onClick:e.cancelAddJob},null,8,["onClick"]),a(S,{color:"primary",label:"Submit Job",type:"submit"})]),_:1})]),_:1})]),_:1},8,["onSubmit"])])}var Wo=Y(Xo,[["render",Yo]]);const Go=Z({props:{crafts:Array,project:Number},setup(e,t){const u=ee(),i=q([]),p=L(()=>{const $=new Set(e.crafts.map(E=>E[9]));return i.value.filter(E=>!$.has(E[3]))}),y=z({craftSelection:z().required("Craft is required.")}),{meta:o,errors:d,handleSubmit:m,handleReset:g}=ge({validationSchema:y}),{value:c}=J("craftSelection"),b=m(async $=>{u.loading.show();const k=await w($.craftSelection[3]),E=[];$.craftSelection.jobs.forEach(U=>{const O={9:{value:U[93]},13:{value:U[3]},20:{value:k[3]}};E.push(O)});try{const{data:U}=await D.upsertRecordsXML({to:"bpzpx5m7x",data:E,fieldsToReturn:[141],formatObject:141});U.forEach(O=>{k.classifications.push(O[141])}),u.loading.hide(),t.emit("newCraftAdded",{craft:k}),g()}catch{u.notify({type:"negative",message:"Something went wrong"})}});async function w($){try{const{data:k}=await D.upsertRecordsXML({to:"bp5g8rym8",data:[{6:{value:"Active"},7:{value:e.project},9:{value:$}}],fieldsToReturn:[120],formatObject:120});return k[0][120]}catch{u.notify({type:"negative",message:"Something went wrong"})}}async function V(){u.loading.show();const{data:$}=await D.fetchFromStructureApp({fields:[{6:{value:"bp2pcb379"},7:{value:"Table Query"},8:{value:"{'16'.EX.'Yes'}"},9:{value:1},14:{value:62}}]});i.value=$,u.loading.hide()}function N(){t.emit("cancelAddCraft"),g()}return V(),{formErrors:d,formMeta:o,submit:b,cancelAdd:N,props:e,craftSelection:c,availableCrafts:p}}}),Ko={class:"row justify-between"},Zo={class:"col-5"},xo={class:"text-caption"},ea=l("div",{class:"text-primary text-body1"},"This project already has all available crafts. Click cancel below to return.",-1);function ta(e,t,u,i,p,y){return f(),j("div",null,[a(ve,{onSubmit:pe(e.submit,["prevent"])},{default:r(()=>[a(te,{flat:""},{default:r(()=>[e.availableCrafts.length>0?(f(),A(B,{key:0},{default:r(()=>[l("div",Ko,[l("div",Zo,[a(F,{class:"q-mb-sm",dense:"",label:"Select the Craft","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.craftSelection,"onUpdate:modelValue":t[0]||(t[0]=o=>e.craftSelection=o),options:e.availableCrafts||[],"option-label":"6","display-value":`${e.craftSelection?e.craftSelection[6]:""}`,"bottom-slots":"",error:!!e.formErrors.craftSelection},{error:r(()=>[l("div",xo,h(e.formErrors.craftSelection),1)]),_:1},8,["modelValue","options","display-value","error"])])])]),_:1})):C("",!0),a(B,null,{default:r(()=>[ea]),_:1}),a(re,{align:"right"},{default:r(()=>[a(S,{color:"secondary",label:"Cancel",onClick:e.cancelAdd},null,8,["onClick"]),e.availableCrafts.length>0?(f(),A(S,{key:0,color:"primary",label:"Submit",type:"submit"})):C("",!0)]),_:1})]),_:1})]),_:1},8,["onSubmit"])])}var oa=Y(Go,[["render",ta]]);const aa=[{name:0,label:"Default Classification",align:"left",field:e=>e[17],format:e=>`${e}`,sortable:!1},{name:1,label:"Vanity Job Title (Alias)",align:"left",field:e=>e[18],format:e=>`${e}`,sortable:!1}],la=Z({components:{EditJobDialog:Qo,AddNewJob:Wo,AddNewCraft:oa},setup(){const e=ee(),{projectCrafts:t,projectData:u}=oe(Q()),{upsertProjectCraft:i}=Q(),p=L(()=>{const k=t.value?t.value:[];return k.forEach(E=>{E.classifications&&E.classifications.sort((U,O)=>U.order>O.order||U.order===O.order&&U.fixedRate>O.fixedRate?-1:1)}),k.sort((E,U)=>E[9]>U[9]?1:-1)}),y=p.value.length>0?q(p.value[0][3]):q(0),o=q(!1),d=q(null),m=q(null),g=q(!1),c=q(!1);be(t,()=>{t.value&&p.value.length>0&&(y.value=p.value[0][3])});function b(k,E){d.value=k,m.value=E,o.value=!0,console.log(k),console.log(E)}function w(){o.value=!1,d.value=null,m.value=null}function V(){o.value=!1,d.value=null,m.value=null,e.notify({type:"positive",message:"Job successfully updated!"})}function N({craft:k}){i({craft:k}),g.value=!1,e.notify({type:"positive",message:"New job added!"})}function $({craft:k}){i({craft:k}),c.value=!1,e.notify({type:"positive",message:"New craft added!"})}return{projectCrafts:t,projectData:u,crafts:p,jobColumns:aa,splitValue:q(20),tab:y,showEditJob:o,editJobCraft:d,editJobJob:m,editJob:b,closeEditJob:w,showAddJob:g,newJobAddComplete:N,editJobComplete:V,showAddCraft:c,newCraftAddComplete:$}}}),sa={key:0,class:"row"},ra={class:"col-12 q-px-sm"},na={class:"row"},ia={class:"col-12 col-md-10 q-pr-xs"},da={class:"col-12 col-md-2 text-right"},ua={key:0},ca=l("thead",{class:"bg-dark text-white"},[l("tr",null,[l("th",{class:"text-left"},"Default Classification"),l("th",{class:"text-left"},"Vanity Job Title (Alias)"),l("th")])],-1),ma={class:"text-left"},fa={class:"text-left"},ba={class:"text-right"},pa={key:1};function va(e,t,u,i,p,y){const o=H("add-new-job"),d=H("add-new-craft"),m=H("edit-job-dialog");return f(),j("div",null,[e.showAddCraft?C("",!0):(f(),j("div",sa,[l("div",ra,[l("div",na,[l("div",ia,[a(De,{dense:"",modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=g=>e.tab=g),align:"left","indicator-color":"accent","active-bg-color":"dark","active-color":"white","outside-arrows":"","inline-label":"",class:"bg-dark text-white shadow-2 rounded-borders"},{default:r(()=>[(f(!0),j(ae,null,se(e.crafts,(g,c)=>(f(),j(ae,{key:g[3]},[c<=4?(f(),A(G,{key:0,name:g[3],label:g[10]},null,8,["name","label"])):C("",!0)],64))),128)),e.crafts.length>5?(f(),A(Mo,{key:0,"auto-close":"",stretch:"",flat:"",label:"More..."},{default:r(()=>[a(ht,null,{default:r(()=>[(f(!0),j(ae,null,se(e.crafts,(g,c)=>(f(),j(ae,{key:g[3]},[c>4?(f(),A(at,{key:0,clickable:"",onClick:b=>e.tab=g[3]},{default:r(()=>[a(lt,null,{default:r(()=>[$e(h(g[10]),1)]),_:2},1024)]),_:2},1032,["onClick"])):C("",!0)],64))),128))]),_:1})]),_:1})):C("",!0)]),_:1},8,["modelValue"])]),l("div",da,[e.$can("manage","projects")?(f(),A(S,{key:0,color:"accent",label:"Add a Craft",icon:"add",onClick:t[1]||(t[1]=g=>e.showAddCraft=!0)})):C("",!0)])]),a(Ae,{modelValue:e.tab,"onUpdate:modelValue":t[4]||(t[4]=g=>e.tab=g),animated:""},{default:r(()=>[(f(!0),j(ae,null,se(e.crafts,g=>(f(),A(K,{key:g[3],name:g[3],class:"q-px-xs"},{default:r(()=>[e.showAddJob?C("",!0):(f(),j("div",ua,[e.$can("manage","projects")?(f(),A(te,{key:0,flat:""},{default:r(()=>[a(re,{class:"q-px-none q-pt-none",align:"left"},{default:r(()=>[a(S,{color:"accent",label:`Add another ${g[10]} Job`,icon:"add",onClick:t[2]||(t[2]=c=>e.showAddJob=!0)},null,8,["label"])]),_:2},1024)]),_:2},1024)):C("",!0),a(Te,{dense:""},{default:r(()=>[ca,l("tbody",null,[(f(!0),j(ae,null,se(g.classifications,c=>(f(),j("tr",{key:c[3]},[l("td",ma,h(c[17]),1),l("td",fa,h(c[18]),1),l("td",ba,[e.$can("manage","projects")?(f(),A(S,{key:0,size:"sm",label:"edit",color:"primary",onClick:b=>e.editJob(g,c)},null,8,["onClick"])):C("",!0)])]))),128))])]),_:2},1024)])),e.showAddJob?(f(),j("div",pa,[a(o,{craft:g,onCancelAddJob:t[3]||(t[3]=c=>e.showAddJob=!1),onNewJobAdded:e.newJobAddComplete},null,8,["craft","onNewJobAdded"])])):C("",!0)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])])])),e.showAddCraft?(f(),A(d,{key:1,crafts:e.projectCrafts,project:e.projectData[3],onCancelAddCraft:t[5]||(t[5]=g=>e.showAddCraft=!1),onNewCraftAdded:e.newCraftAddComplete},null,8,["crafts","project","onNewCraftAdded"])):C("",!0),a(st,{modelValue:e.showEditJob,"onUpdate:modelValue":t[6]||(t[6]=g=>e.showEditJob=g),persistent:""},{default:r(()=>[a(m,{craft:e.editJobCraft,job:e.editJobJob,onCloseEditJob:e.closeEditJob,onEditJobComplete:e.editJobComplete},null,8,["craft","job","onCloseEditJob","onEditJobComplete"])]),_:1},8,["modelValue"])])}var ga=Y(la,[["render",va]]);const ya=Z({props:{item:Object,spec:Number},setup(e,t){const u=ee(),{projectData:i}=oe(Q()),{pushNewObject:p,pushNewRequirementOptions:y,fetchOrientations:o,fetchDrugScreens:d,fetchFitTests:m,fetchMedicalScreens:g,fetchBackgroundScreens:c,storeNewRequirements:b}=Q(),w=q(null),V=q([]),N=q([]),$=q([]),k=q(!0),E=L(()=>{let n={};return e.item.key==="orientations"?n=z({category:z().required().label("Category").nullable(),name:X().required().label("Course Name").nullable(),code:X().label("Course Code").nullable()}):e.item.key==="drugScreens"?n=z({category:z().required().label("Category").nullable(),name:X().required().label("Description").nullable(),code:X().required().label("Type").nullable()}):e.item.key==="fitTests"?n=z({category:X().required().label("Manufacturer").nullable(),name:X().required().label("Model").nullable(),code:X().required().label("Type").nullable()}):e.item.key==="medical"&&(n=z({category:X().required().label("Screen Type").nullable()})),n}),{meta:U,errors:O,handleSubmit:R,handleReset:ce}=ge({validationSchema:E}),{value:_}=J("category"),{value:P}=J("name"),{value:le}=J("code"),qe=L(()=>{let n=w.value?w.value:[];if(e.item.key==="orientations")n=_.value?n.filter(s=>s[10]===_.value.value):n,n=P.value?n.filter(s=>s[6].toLowerCase().includes(P.value.toLowerCase())):n,n=le.value?n.filter(s=>s[8].toLowerCase().includes(le.value.toLowerCase())):n,n=n.sort((s,v)=>s[8]===""||s[6]>v[6]?1:-1);else if(e.item.key==="drugScreens")n=_.value?n.filter(s=>s[8]===_.value.value):n,n=P.value?n.filter(s=>s[7].toLowerCase().includes(P.value.toLowerCase())):n,n=le.value?n.filter(s=>s[6].toLowerCase().includes(le.value.toLowerCase())):n,n=n.sort((s,v)=>s[7]===""||s[6]>v[6]?1:-1);else if(e.item.key==="fitTests")n=_.value?n.filter(s=>s[11]===_.value):n,n=P.value?n.filter(s=>s[8].toLowerCase().includes(P.value.toLowerCase())):n,n=le.value?n.filter(s=>s[13].toLowerCase().includes(le.value.toLowerCase())):n,n=n.sort((s,v)=>s[11]===""||s[11]>v[11]?1:-1);else if(e.item.key==="medical")n=_.value?n.filter(s=>s[6]===_.value):n,n=n.sort((s,v)=>s[6]>v[6]?1:-1);else if(e.item.key==="backgrounds"){const s=_.value?_.value.value?_.value.label:_.value:null;n=s?n.filter(v=>v[6]===_.value||v[7].toLowerCase().includes(s.toLowerCase())):n,n=le.value?n.filter(v=>v[8].toLowerCase().includes(le.value.toLowerCase())):n,n=n.sort((v,M)=>v[7]>M[7]?1:-1)}return n}),Re=L(()=>{let n=[];return e.item.key==="orientations"?n=[{name:0,label:"Course Code",align:"left",field:s=>s[8],format:s=>`${s}`,sortable:!0},{name:1,label:"Course Name",align:"left",field:s=>s[6],format:s=>s===""?"N/A":`${s}`,sortable:!0,required:!0}]:e.item.key==="drugScreens"?n=[{name:0,label:"Category",align:"left",field:s=>s[9],format:s=>`${s}`,sortable:!0},{name:1,label:"Type",align:"left",field:s=>s[6],format:s=>s===""?"N/A":`${s}`,sortable:!0,required:!0},{name:2,label:"Description",align:"left",field:s=>s[7],format:s=>s===""?"N/A":`${s}`,sortable:!0,required:!0}]:e.item.key==="fitTests"?n=[{name:0,label:"Manufacturer",align:"left",field:s=>s[11],format:s=>`${s}`,sortable:!0},{name:1,label:"Model",align:"left",field:s=>s[8],format:s=>s===""?"N/A":`${s}`,sortable:!0,required:!0},{name:2,label:"Type",align:"left",field:s=>s[13],format:s=>s===""?"N/A":`${s} Face`,sortable:!0,required:!0}]:e.item.key==="medical"?n=[{name:0,label:"Medical Screen Type",align:"left",field:s=>s[6],format:s=>`${s}`,sortable:!0}]:e.item.key==="backgrounds"&&(n=[{name:0,label:"Background Type",align:"left",field:s=>s[7],format:(s,v)=>v[8]!==s?`${s} - ${v[8]}`:`${s}`,sortable:!0}]),n}),T=L(()=>{let n=[];return e.item.key==="orientations"?n=[{name:0,label:"Course Code",align:"left",field:s=>s[8],format:s=>`${s}`,sortable:!0},{name:1,label:"Course Name",align:"left",field:s=>s[6],format:s=>s===""?"N/A":`${s}`,sortable:!0,required:!0}]:e.item.key==="drugScreens"?n=[{name:0,label:"Category",align:"left",field:s=>s[9],format:s=>`${s}`,sortable:!0},{name:1,label:"Type",align:"left",field:s=>s[6],format:s=>s===""?"N/A":`${s}`,sortable:!0,required:!0},{name:2,label:"Description",align:"left",field:s=>s[7],format:s=>s===""?"N/A":`${s}`,sortable:!0,required:!0}]:e.item.key==="fitTests"?n=[{name:0,label:"Manufacturer",align:"left",field:s=>s[11],format:s=>`${s}`,sortable:!0},{name:1,label:"Model",align:"left",field:s=>s[8],format:s=>s===""?"N/A":`${s}`,sortable:!0,required:!0},{name:2,label:"Type",align:"left",field:s=>s[13],format:s=>s===""?"N/A":`${s} Face`,sortable:!0,required:!0}]:e.item.key==="medical"?n=[{name:0,label:"Medical Screen Type",align:"left",field:s=>s[6],format:s=>`${s}`,sortable:!0}]:e.item.key==="backgrounds"&&(n=[{name:0,label:"Background Type",align:"left",field:s=>s[7],format:(s,v)=>v[8]!==s?`${s} - ${v[8]}`:`${s}`,sortable:!0}]),n}),x=L(()=>{const n=w.value?w.value:[];if(e.item.key==="orientations")return[...new Map(n.map(s=>[s[10],{value:s[10],label:s[11]}])).values()];if(e.item.key==="drugScreens")return[...new Map(n.map(s=>[s[8],{value:s[8],label:s[9]}])).values()];if(e.item.key==="fitTests"){const s=n.concat(N.value);return[...new Map(s.map(v=>[v[11],v[11]])).values()]}else if(e.item.key==="medical"){const s=n.concat(N.value);return[...new Map(s.map(v=>[v[6],v[6]])).values()]}else if(e.item.key==="backgrounds"){const s=n.concat(N.value);return[...new Map(s.map(v=>[v[6],{value:v[6],label:v[7]}])).values()]}else return[]}),je=L(()=>{const n=w.value?w.value:[];if(e.item.key==="fitTests")return[...new Map(n.map(s=>[s[13],s[13]])).values()];if(e.item.key==="backgrounds"){const s=n.filter(v=>v[6]===1).concat($.value);return[...new Map(s.map(v=>[v[8],v[8]])).values()].sort((v,M)=>v>M?1:-1)}else return[]});function W(n,s){N.value.push(n),s(n)}function ne(n,s){$.value.push(n),s(n)}const _e=R(async n=>{if(console.log(n),e.item.key==="orientations"){const s={6:{value:n.name},8:{value:n.code},10:{value:n.category.value}};try{const{data:v}=await D.upsertRecordsXML({to:"bp6rvwu6i",data:[s],fieldsToReturn:[20],formatObject:20});w.value.unshift(v[0][20]),V.value.push(v[0][20]),y({array:"orientations",object:v[0][20]})}catch(v){console.log(v),u.notify({type:"negative",message:"Something went wrong!"})}}else if(e.item.key==="drugScreens"){const s={7:{value:n.name},6:{value:n.code},8:{value:n.category.value}};try{const{data:v}=await D.upsertRecordsXML({to:"bp6rvxmg3",data:[s],fieldsToReturn:[15],formatObject:15});w.value.unshift(v[0][15]),V.value.push(v[0][15]),y({array:"drugScreens",object:v[0][15]})}catch(v){console.log(v),u.notify({type:"negative",message:"Something went wrong!"})}}else if(e.item.key==="fitTests"){const s={8:{value:n.name},11:{value:n.category},13:{value:n.code}};try{const{data:v}=await D.upsertRecordsXML({to:"bp6rv4qnn",data:[s],fieldsToReturn:[16],formatObject:16});w.value.unshift(v[0][16]),V.value.push(v[0][16]),y({array:"fitTests",object:v[0][16]})}catch(v){console.log(v),u.notify({type:"negative",message:"Something went wrong!"})}}else if(e.item.key==="medical"){const s={6:{value:n.category}};try{const{data:v}=await D.upsertRecordsXML({to:"bp6rv3ne3",data:[s],fieldsToReturn:[12],formatObject:12});w.value.unshift(v[0][12]),V.value.push(v[0][12]),y({array:"medical",object:v[0][12]})}catch(v){console.log(v),u.notify({type:"negative",message:"Something went wrong!"})}}else if(e.item.key==="backgrounds"){const v={6:{value:n.category.value?n.category.value:await ke(n.category)},8:{value:n.code?n.code:n.category}};try{const{data:M}=await D.upsertRecordsXML({to:"bp6rvyr7k",data:[v],fieldsToReturn:[17],formatObject:17});w.value.unshift(M[0][17]),V.value.push(M[0][17]),y({array:"backgrounds",object:M[0][17]})}catch(M){console.log(M),u.notify({type:"negative",message:"Something went wrong!"})}}ce()});async function ke(n){const s={6:{value:n}};try{const{data:v}=await D.upsertRecordsXML({to:"bp6sjuy5b",data:[s],fieldsToReturn:[3]});return v[0][3]}catch(v){console.log(v),u.notify({type:"negative",message:"Something went wrong!"})}}async function ye(){if(e.item.key==="orientations"){const n=await o();console.log(n),w.value=n}else if(e.item.key==="drugScreens"){const n=await d();console.log(n),w.value=n}else if(e.item.key==="fitTests"){const n=await m();console.log(n),w.value=n}else if(e.item.key==="medical"){const n=await g();console.log(n),w.value=n}else if(e.item.key==="backgrounds"){const n=await c();console.log(n),w.value=n}k.value=!1}async function Me(){const{data:n}=await D.upsertRecordsXML({to:"bp6ru9fdi",data:[{6:{value:i.value[3]}}],fieldsToReturn:[20],formatObject:20});return console.log(n),p({array:"requirements",object:n[0][20]}),n[0][20][3]}async function Ie(){const n=[],s=i.value.requirements[0]?i.value.requirements[0][3]:await Me();if(e.item.key==="orientations"){V.value.forEach(M=>{const ie={6:{value:s},7:{value:M[3]}};n.push(ie)});const{data:v}=await D.upsertRecordsXML({to:"bp6rvdha2",data:n,fieldsToReturn:[24],formatObject:24});v.forEach(M=>{b({index:e.spec,array:"orientations",object:M[24]})})}else if(e.item.key==="drugScreens"){V.value.forEach(M=>{const ie={6:{value:s},7:{value:M[3]}};n.push(ie)});const{data:v}=await D.upsertRecordsXML({to:"bp6rvd7zc",data:n,fieldsToReturn:[22],formatObject:22});v.forEach(M=>{b({index:e.spec,array:"drugScreens",object:M[22]})})}else if(e.item.key==="fitTests"){V.value.forEach(M=>{const ie={6:{value:s},7:{value:M[3]}};n.push(ie)});const{data:v}=await D.upsertRecordsXML({to:"bp6rvmzc6",data:n,fieldsToReturn:[24],formatObject:24});v.forEach(M=>{b({index:e.spec,array:"fitTests",object:M[24]})})}else if(e.item.key==="backgrounds"){V.value.forEach(M=>{const ie={6:{value:s},7:{value:M[3]}};n.push(ie)});const{data:v}=await D.upsertRecordsXML({to:"bp6rvfzpj",data:n,fieldsToReturn:[25],formatObject:25});v.forEach(M=>{b({index:e.spec,array:"backgrounds",object:M[25]})})}else if(e.item.key==="medical"){V.value.forEach(M=>{const ie={6:{value:s},7:{value:M[3]}};n.push(ie)});const{data:v}=await D.upsertRecordsXML({to:"bp6rvj39b",data:n,fieldsToReturn:[18],formatObject:18});v.forEach(M=>{b({index:e.spec,array:"medical",object:M[18]})})}t.emit("addComplete",e.item)}return ye(),be(V,(n,s)=>{console.log(n),console.log(qe.value),ce()}),be(_,(n,s)=>{console.log(n)}),{pushNewObject:p,handleReset:ce,quickbase:D,initialPagination:{rowsPerPage:q(10)},projectData:i,formErrors:O,formMeta:U,submit:_e,props:e,selection:V,selectedColumns:T,options:w,tableColumns:Re,tableRows:qe,categories:x,category:_,name:P,code:le,types:je,addCustomOptions:W,addCustomTypes:ne,optionsLoading:k,addSelectionsToProject:Ie}}}),ha={class:"row"},wa={class:"col-12 col-md-3 q-pr-sm"},$a={class:"text-caption"},ja={class:"col-12 col-md-2 q-pr-sm"},qa={class:"text-caption"},ka={class:"col-12 col-md-4 q-pr-sm"},Ca={class:"text-caption"},Na={key:0,class:"col-12 col-md-3 text-right"},Sa={class:"row"},Va={class:"col-12 col-md-3 q-pr-sm"},Aa={class:"text-caption"},Da={class:"col-12 col-md-2 q-pr-sm"},Ra={class:"text-caption"},_a={class:"col-12 col-md-4 q-pr-sm"},Ea={class:"text-caption"},Ta={key:0,class:"col-12 col-md-3 text-right"},Ma={class:"row"},La={class:"col-12 col-md-3 q-pr-sm"},Pa={class:"text-caption"},Oa={class:"col-12 col-md-2 q-pr-sm"},Ua={class:"text-caption"},Ja={class:"col-12 col-md-4 q-pr-sm"},Qa={class:"text-caption"},Xa={key:0,class:"col-12 col-md-3 text-right"},Fa={class:"row"},Ba={class:"col-12 col-md-4 q-pr-sm"},Ia={class:"text-caption"},Ha=l("div",{class:"col-12 col-md-1 q-pr-sm"},null,-1),za=l("div",{class:"col-12 col-md-4 q-pr-sm"},null,-1),Ya={key:0,class:"col-12 col-md-3 text-right"},Wa={class:"row"},Ga={class:"col-12 col-md-4 q-pr-sm"},Ka={class:"text-caption"},Za={class:"col-12 col-md-4 q-pr-sm"},xa={class:"text-caption"},el=l("div",{class:"col-12 col-md-1 q-pr-sm"},null,-1),tl={key:0,class:"col-12 col-md-3 text-right"},ol={class:"row items-start"},al={key:0,class:"full-width row flex-center text-primary q-gutter-sm"},ll={key:0,class:"col-12 col-md-5"};function sl(e,t,u,i,p,y){return f(),j("div",null,[a(ve,{onSubmit:pe(e.submit,["prevent"])},{default:r(()=>[a(te,{flat:""},{default:r(()=>[e.props.item.key==="orientations"?(f(),A(B,{key:0},{default:r(()=>[l("div",ha,[l("div",wa,[a(F,{dense:"",label:"Select Category","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.category,"onUpdate:modelValue":t[0]||(t[0]=o=>e.category=o),options:e.categories||[],error:!!e.formErrors.category,"bottom-slots":""},{error:r(()=>[l("div",$a,h(e.formErrors.category),1)]),_:1},8,["modelValue","options","error"])]),l("div",ja,[a(I,{dense:"",label:"Course Code",modelValue:e.code,"onUpdate:modelValue":t[1]||(t[1]=o=>e.code=o),error:!!e.formErrors.code,"bottom-slots":""},{error:r(()=>[l("div",qa,h(e.formErrors.code),1)]),_:1},8,["modelValue","error"])]),l("div",ka,[a(I,{dense:"",label:"Course Name",modelValue:e.name,"onUpdate:modelValue":t[2]||(t[2]=o=>e.name=o),error:!!e.formErrors.name,"bottom-slots":""},{error:r(()=>[l("div",Ca,h(e.formErrors.name),1)]),_:1},8,["modelValue","error"])]),e.tableRows.length===0?(f(),j("div",Na,[a(S,{class:"q-mr-sm",color:"accent",label:"Reset",onClick:e.handleReset},null,8,["onClick"]),a(S,{color:"info",label:"Save",type:"submit"})])):C("",!0)])]),_:1})):C("",!0),e.props.item.key==="drugScreens"?(f(),A(B,{key:1},{default:r(()=>[l("div",Sa,[l("div",Va,[a(F,{dense:"",label:"Select Category","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.category,"onUpdate:modelValue":t[3]||(t[3]=o=>e.category=o),options:e.categories||[],error:!!e.formErrors.category,"bottom-slots":"","stack-label":""},{error:r(()=>[l("div",Aa,h(e.formErrors.category),1)]),_:1},8,["modelValue","options","error"])]),l("div",Da,[a(I,{dense:"",label:"Type of Test",modelValue:e.code,"onUpdate:modelValue":t[4]||(t[4]=o=>e.code=o),error:!!e.formErrors.code,"bottom-slots":"","stack-label":""},{error:r(()=>[l("div",Ra,h(e.formErrors.code),1)]),_:1},8,["modelValue","error"])]),l("div",_a,[a(I,{dense:"",label:"Description or Consortium",placeholder:"Ex: DCCHA or 10 Panel Urine",modelValue:e.name,"onUpdate:modelValue":t[5]||(t[5]=o=>e.name=o),error:!!e.formErrors.name,"bottom-slots":"","stack-label":""},{error:r(()=>[l("div",Ea,h(e.formErrors.name),1)]),_:1},8,["modelValue","error"])]),e.tableRows.length===0?(f(),j("div",Ta,[a(S,{class:"q-mr-sm",color:"accent",label:"Reset",onClick:e.handleReset},null,8,["onClick"]),a(S,{color:"info",label:"Save",type:"submit"})])):C("",!0)])]),_:1})):C("",!0),e.props.item.key==="fitTests"?(f(),A(B,{key:2},{default:r(()=>[l("div",Ma,[l("div",La,[a(F,{dense:"",label:"Select Manufacturer","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.category,"onUpdate:modelValue":t[6]||(t[6]=o=>e.category=o),options:e.categories||[],error:!!e.formErrors.category,"bottom-slots":"","stack-label":"","use-input":"","hide-dropdown-icon":"","new-value-mode":"add-unique",onNewValue:e.addCustomOptions},{error:r(()=>[l("div",Pa,h(e.formErrors.category),1)]),_:1},8,["modelValue","options","error","onNewValue"])]),l("div",Oa,[a(F,{dense:"",label:"Select Type","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.code,"onUpdate:modelValue":t[7]||(t[7]=o=>e.code=o),options:e.types||[],error:!!e.formErrors.code,"bottom-slots":"","stack-label":""},{error:r(()=>[l("div",Ua,h(e.formErrors.code),1)]),_:1},8,["modelValue","options","error"])]),l("div",Ja,[a(I,{dense:"",label:"Model",placeholder:"Ex: 6000 or AV2000",modelValue:e.name,"onUpdate:modelValue":t[8]||(t[8]=o=>e.name=o),error:!!e.formErrors.name,"bottom-slots":"","stack-label":""},{error:r(()=>[l("div",Qa,h(e.formErrors.name),1)]),_:1},8,["modelValue","error"])]),e.tableRows.length===0?(f(),j("div",Xa,[a(S,{class:"q-mr-sm",color:"accent",label:"Reset",onClick:e.handleReset},null,8,["onClick"]),a(S,{color:"info",label:"Save",type:"submit"})])):C("",!0)])]),_:1})):C("",!0),e.props.item.key==="medical"?(f(),A(B,{key:3},{default:r(()=>[l("div",Fa,[l("div",Ba,[a(F,{dense:"",label:"Select Screen Type","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.category,"onUpdate:modelValue":t[9]||(t[9]=o=>e.category=o),options:e.categories||[],error:!!e.formErrors.category,"bottom-slots":"","stack-label":"","use-input":"","hide-dropdown-icon":"","new-value-mode":"add-unique",onNewValue:e.addCustomOptions},{error:r(()=>[l("div",Ia,h(e.formErrors.category),1)]),_:1},8,["modelValue","options","error","onNewValue"])]),Ha,za,e.tableRows.length===0?(f(),j("div",Ya,[a(S,{class:"q-mr-sm",color:"accent",label:"Reset",onClick:e.handleReset},null,8,["onClick"]),a(S,{color:"info",label:"Save",type:"submit"})])):C("",!0)])]),_:1})):C("",!0),e.props.item.key==="backgrounds"?(f(),A(B,{key:4},{default:r(()=>[l("div",Wa,[l("div",Ga,[a(F,{dense:"",label:"Select or Enter Background Type","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.category,"onUpdate:modelValue":t[10]||(t[10]=o=>e.category=o),options:e.categories||[],error:!!e.formErrors.category,"bottom-slots":"","stack-label":"","use-input":"","hide-dropdown-icon":"","new-value-mode":"add-unique",onNewValue:e.addCustomOptions},{error:r(()=>[l("div",Ka,h(e.formErrors.category),1)]),_:1},8,["modelValue","options","error","onNewValue"])]),l("div",Za,[e.category&&e.category.value===1?(f(),A(F,{key:0,dense:"",label:"Select or Enter Owner","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.code,"onUpdate:modelValue":t[11]||(t[11]=o=>e.code=o),options:e.types||[],error:!!e.formErrors.code,"bottom-slots":"","stack-label":"","use-input":"","hide-dropdown-icon":"","new-value-mode":"add-unique",onNewValue:e.addCustomTypes},{error:r(()=>[l("div",xa,h(e.formErrors.code),1)]),_:1},8,["modelValue","options","error","onNewValue"])):C("",!0)]),el,e.tableRows.length===0?(f(),j("div",tl,[a(S,{class:"q-mr-sm",color:"accent",label:"Reset",onClick:e.handleReset},null,8,["onClick"]),a(S,{color:"info",label:"Save",type:"submit"})])):C("",!0)])]),_:1})):C("",!0),a(B,{class:"q-py-xs q-px-xs"},{default:r(()=>[l("div",ol,[l("div",{class:fe(["col-12",e.selection.length>0?"col-md-7 q-pr-sm":""])},[a(ue,{dense:"","title-class":"text-primary",title:`Available ${e.props.item.label}${e.props.item.label.charAt(e.props.item.label.length-1).toLowerCase()==="s"?"":"s"}`,columns:e.tableColumns||[],rows:e.tableRows||[],"row-key":o=>o[3],"table-header-class":"bg-dark text-white",pagination:e.initialPagination,selection:"multiple",selected:e.selection,"onUpdate:selected":t[13]||(t[13]=o=>e.selection=o),loading:e.optionsLoading,"no-data-label":`No ${e.props.item.label}${e.props.item.label.charAt(e.props.item.label.length-1).toLowerCase()==="s"?"":"s"} available to choose from. Please add one.`},{"top-right":r(()=>[e.selection.length===0?(f(),A(S,{key:0,color:"secondary",label:"Cancel",onClick:t[12]||(t[12]=o=>e.$emit("cancelAdd"))})):C("",!0)]),loading:r(()=>[a(jt,{showing:"",color:"primary"})]),"no-data":r(({message:o})=>[e.optionsLoading?C("",!0):(f(),j("div",al,[a(Xe,{size:"2em",name:"sentiment_very_dissatisfied"}),l("span",null,h(o),1)]))]),_:1},8,["title","columns","rows","row-key","pagination","selected","loading","no-data-label"])],2),e.selection.length>0?(f(),j("div",ll,[a(ue,{dense:"","title-class":"text-primary",title:`Selected ${e.props.item.label}${e.props.item.label.charAt(e.props.item.label.length-1).toLowerCase()==="s"?"":"s"}`,columns:e.selectedColumns||[],rows:e.selection||[],"row-key":o=>o[3],"table-header-class":"bg-dark text-white",pagination:{rowsPerPage:5}},null,8,["title","columns","rows","row-key"]),e.selection.length>0&&e.tableRows.length>0?(f(),A(re,{key:0,align:"right"},{default:r(()=>[a(S,{color:"secondary",label:"Cancel",onClick:t[14]||(t[14]=o=>e.$emit("cancelAdd"))}),a(S,{color:"primary",label:"Submit",onClick:e.addSelectionsToProject},null,8,["onClick"])]),_:1})):C("",!0)])):C("",!0)])]),_:1})]),_:1})]),_:1},8,["onSubmit"])])}var rl=Y(ya,[["render",sl]]);const nl=Z({components:{AddNewRequirement:rl},setup(){const e=ee(),{capitalize:t}=Oe,u=q(0),i=q("orientations"),p=q(null),{projectData:y}=oe(Q()),o=L(()=>{const c=y.value.requirements[u.value];return c||null}),d=L(()=>[{label:"Orientation",key:"orientations",values:o.value?o.value.orientations:[],fields:[8,9],columns:[{name:0,label:"Course Code",align:"left",field:b=>b[8],format:b=>b===""?"N/A":`${b}`,sortable:!0,required:!0},{name:1,label:"Course Name",align:"left",field:b=>b[9],format:b=>`${b}`,sortable:!0}]},{label:"D&A Screen",key:"drugScreens",values:o.value?o.value.drugScreens:[],fields:[10,8],columns:[{name:0,label:"Test Type",align:"left",field:b=>b[8],format:b=>b===""?"N/A":`${b}`,sortable:!0,required:!0},{name:1,label:"Description",align:"left",field:b=>b[10],format:b=>`${b}`,sortable:!0}]},{label:"Background",key:"backgrounds",values:o.value?o.value.backgrounds:[],fields:[8,9],columns:[{name:0,label:"Background Type",align:"left",field:b=>b[8],format:b=>b===""?"N/A":`${b}`,sortable:!0,required:!0},{name:1,label:"Background Name",align:"left",field:b=>b[9],format:b=>`${b}`,sortable:!0}]},{label:"Fit Test",key:"fitTests",values:o.value?o.value.fitTests:[],fields:[18],columns:[{name:0,label:"Mask",align:"left",field:b=>b[18],format:b=>b===""?"N/A":`${b}`,sortable:!0,required:!0},{name:1,label:"Manufacturer",align:"left",field:b=>b[20],format:b=>b===""?"N/A":`${b}`,sortable:!0}]},{label:"Medical Screen",key:"medical",values:o.value?o.value.medical:[],fields:[10],columns:[{name:0,label:"Screen Type",align:"left",field:b=>b[10],format:b=>b===""?"N/A":`${b}`,sortable:!0,required:!0}]}]);function m(c){console.log(c),p.value=c}function g(c){p.value=null,e.notify({type:"positive",message:`New ${c.label} Added!`})}return{projectData:y,requirements:o,categories:d,capitalize:t,spec:u,tab:i,initialPagination:q({rowsPerPage:100}),addNew:p,addNewItem:m,newItemAdded:g}}});function il(e,t,u,i,p,y){const o=H("add-new-requirement");return f(),j("div",null,[a(De,{dense:"",modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=d=>e.tab=d),align:"left","indicator-color":"accent","active-bg-color":"dark","active-color":"white","inline-label":"",class:"bg-dark text-white shadow-2 rounded-borders"},{default:r(()=>[(f(!0),j(ae,null,se(e.categories,d=>(f(),A(G,{key:d.key,name:d.key,label:`${d.label}s`},{default:r(()=>[a($t,{color:"accent",floating:"",transparent:""},{default:r(()=>[$e(h(d.values.length),1)]),_:2},1024)]),_:2},1032,["name","label"]))),128))]),_:1},8,["modelValue"]),a(Ae,{modelValue:e.tab,"onUpdate:modelValue":t[3]||(t[3]=d=>e.tab=d),animated:""},{default:r(()=>[(f(!0),j(ae,null,se(e.categories,d=>(f(),A(K,{key:d.key,name:d.key,class:"q-px-xs"},{default:r(()=>[e.addNew?C("",!0):(f(),A(ue,{key:0,dense:"",columns:d.columns,rows:d.values,"row-key":m=>m[3],"table-header-class":"bg-dark text-white",class:"sticky-header-table","hide-pagination":"",pagination:e.initialPagination,"onUpdate:pagination":t[1]||(t[1]=m=>e.initialPagination=m),"rows-per-page-options":[0]},{"top-left":r(()=>[a(S,{color:"accent",label:`Add new ${d.label}`,icon:"add",onClick:m=>e.addNewItem(d)},null,8,["label","onClick"])]),_:2},1032,["columns","rows","row-key","pagination"])),e.addNew?(f(),A(o,{key:1,spec:e.spec,item:d,onCancelAdd:t[2]||(t[2]=m=>e.addNew=null),onAddComplete:e.newItemAdded},null,8,["spec","item","onAddComplete"])):C("",!0)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])])}var dl=Y(nl,[["render",il]]);const ul=[{name:0,label:"Name",align:"left",field:e=>e.tableData.name,format:e=>`${e}`,sortable:!0},{name:1,label:"Status",align:"left",field:e=>e.tableData.status,format:e=>`${e}`,sortable:!0},{name:2,label:"Offer Date",align:"left",field:e=>e.tableData.offerDate,format:e=>e?`${Ce(e).format("MM/DD/YYYY")}`:"",sortable:!0,required:!0},{isSSN:!0,name:4,label:"SSN",align:"left",field:e=>e.tableData.ssn,format:(e,t)=>t.tableData.showSSN?`${e}`:`***-**-${e.slice(e.length-4)}`,sortable:!0,required:!0},{name:5,label:"Phone",align:"left",field:e=>e.tableData.phone,format:e=>`${e}`,sortable:!0,required:!0},{name:6,label:"Classification",align:"left",field:e=>e.tableData.job,format:e=>`${e}`,sortable:!0,required:!0},{name:7,label:"Job#",align:"left",field:e=>e.tableData.jobNumber,format:e=>`${e}`,sortable:!0,required:!0},{name:8,label:"Start Date",align:"left",field:e=>e.tableData.start,format:e=>e?`${Ce(e).format("MM/DD/YYYY")}`:"",sortable:!0,required:!0}],cl=Z({setup(){const e=q(null),t=q(null),u=q(null),i=q(null),p=q(""),{projectData:y}=oe(Q()),o=L(()=>{const m=y.value.pipeline||null;if(m){m.inProcess=[...new Map(m.inProcess.map(c=>[c.employee[3],c])).values()],m.dispatches=[...new Map(m.dispatches.map(c=>[c.employee[3],c])).values()],m.deployments=[...new Map(m.deployments.map(c=>[c.employee[3],c])).values()],m.inProcess.forEach((c,b)=>{Object.assign(c,{order:0,first:b===0,tableData:{showSSN:!1,name:c.employee[24],ssn:c.employee[109],phone:c.employee[25],offerDate:c[197].$d,hc:c[126],job:c[106],jobNumber:c[44],start:null,status:"In Process",request:c[138],craft:c[119]}})}),m.dispatches.forEach((c,b)=>{Object.assign(c,{order:1,first:b===0,tableData:{showSSN:!1,name:c.employee[24],ssn:c.employee[109],phone:c.employee[25],offerDate:c[165].$d,hc:c[61],job:c[45],jobNumber:c[63],start:null,status:"Pending",request:c[95],craft:c[141]}})}),m.deployments.forEach((c,b)=>{Object.assign(c,{order:2,first:b===0,tableData:{showSSN:!1,name:c.employee[24],ssn:c.employee[109],phone:c.employee[25],offerDate:c[144].$d,hc:c[68],job:c[45],jobNumber:c[85],start:Ce(c[33].$d).isValid()?c[33].$d:null,status:"Deployed",request:c[80],craft:c[132]}})});let g=m.inProcess.concat(m.dispatches.concat(m.deployments));return g=e.value?g.filter(c=>c.tableData.jobNumber===e.value):g,g=t.value?g.filter(c=>c.tableData.craft===t.value):g,g=u.value?g.filter(c=>c.tableData.request===u.value):g,g=i.value?g.filter(c=>c.tableData.status===i.value):g,g=g.filter(c=>c.tableData.name.toLowerCase().includes(p.value.toLowerCase())),g}else return null}),d=L(()=>{const m=o.value?[...new Map(o.value.map(w=>[w.tableData.jobNumber,w.tableData.jobNumber])).values()]:[],g=o.value?[...new Map(o.value.map(w=>[w.tableData.request,w.tableData.request])).values()]:[],c=o.value?[...new Map(o.value.map(w=>[w.tableData.craft,w.tableData.craft])).values()]:[],b=o.value?[...new Map(o.value.map(w=>[w.tableData.status,w.tableData.status])).values()]:[];return{jobNumbers:m,requestNumbers:g,crafts:c,statuses:b}});return{projectData:y,columns:ul,initialPagination:{rowsPerPage:q(25)},pipeline:o,filters:d,jobNumberFilter:e,craftFilter:t,requestNumberFilter:u,statusFilter:i,searchString:p}}}),ml={class:"row items-start"},fl={class:"col-12 col-md-9 q-pr-md"},bl=l("div",{class:"text-primary q-mb-sm text-body1"},"Search / Filter",-1),pl={class:"row q-my-sm"},vl={class:"col-12 col-md-6"},gl={class:"row q-mt-md items-start"},yl={class:"col-12 col-md-5 q-pr-sm"},hl={class:"col-12 col-md-2 q-pr-sm"},wl={class:"col-12 col-md-2 q-pr-sm"},$l={class:"col-12 col-md-2"},jl={class:"col-12 col-md-3 self-center"},ql=l("thead",{class:"bg-dark text-white"},[l("tr",null,[l("th",{class:"text-left"},"Status"),l("th",{class:"text-right"},"Qty")])],-1),kl=l("td",{class:"text-left"},"In Process",-1),Cl={class:"text-right"},Nl=l("td",{class:"text-left"},"Pending",-1),Sl={class:"text-right"},Vl=l("td",{class:"text-left"},"Deployed",-1),Al={class:"text-right"},Dl={class:"text-body2 text-italic"},Rl=l("span",{class:"text-primary"},"Total in Pipeline:",-1),_l={class:"q-pl-md text-dark"};function El(e,t,u,i,p,y){return f(),j("div",null,[a(te,{flat:"",class:"q-mb-sm"},{default:r(()=>[a(B,{class:"q-pa-sm"},{default:r(()=>[l("div",ml,[l("div",fl,[bl,l("div",pl,[l("div",vl,[a(I,{clearable:"","clear-icon":"close",dense:"",modelValue:e.searchString,"onUpdate:modelValue":t[0]||(t[0]=o=>e.searchString=o),label:"Search","stack-label":"",onClear:t[1]||(t[1]=o=>e.searchString="")},null,8,["modelValue"])])]),l("div",gl,[l("div",yl,[a(F,{dense:"",modelValue:e.jobNumberFilter,"onUpdate:modelValue":t[2]||(t[2]=o=>e.jobNumberFilter=o),options:e.filters.jobNumbers,label:"Job Number","use-chips":"","stack-label":""},null,8,["modelValue","options"])]),l("div",hl,[a(F,{dense:"",modelValue:e.craftFilter,"onUpdate:modelValue":t[3]||(t[3]=o=>e.craftFilter=o),options:e.filters.crafts,label:"Craft","use-chips":"","stack-label":""},null,8,["modelValue","options"])]),l("div",wl,[a(F,{dense:"",modelValue:e.requestNumberFilter,"onUpdate:modelValue":t[4]||(t[4]=o=>e.requestNumberFilter=o),options:e.filters.requestNumbers,label:"Request#","use-chips":"","stack-label":""},null,8,["modelValue","options"])]),l("div",$l,[a(F,{dense:"",modelValue:e.statusFilter,"onUpdate:modelValue":t[5]||(t[5]=o=>e.statusFilter=o),options:e.filters.statuses,label:"Status","use-chips":"","stack-label":""},null,8,["modelValue","options"])])])]),l("div",jl,[a(Te,{bordered:"",flat:"",dense:""},{default:r(()=>[ql,l("tbody",null,[l("tr",null,[kl,l("td",Cl,h(e.pipeline?e.pipeline.filter(o=>o.tableData.status==="In Process").length:0),1)]),l("tr",null,[Nl,l("td",Sl,h(e.pipeline?e.pipeline.filter(o=>o.tableData.status==="Pending").length:0),1)]),l("tr",null,[Vl,l("td",Al,h(e.pipeline?e.pipeline.filter(o=>o.tableData.status==="Deployed").length:0),1)])])]),_:1})])])]),_:1})]),_:1}),a(ue,{dense:"",title:"Pipeline","title-class":"text-primary",style:{},columns:e.columns,rows:e.pipeline||[],"row-key":o=>o[3],"table-header-class":"bg-dark text-white",pagination:e.initialPagination},{"top-right":r(()=>[l("div",Dl,[Rl,l("span",_l,h(e.pipeline.length),1)])]),_:1},8,["columns","rows","row-key","pagination"])])}var Tl=Y(cl,[["render",El]]);const Ml=[{name:0,label:"Name",align:"left",field:e=>e[75],format:e=>`${e}`,sortable:!0},{name:1,label:"Employee ID",align:"left",field:e=>e[104],format:e=>`${e}`},{name:2,label:"Payroll ID",align:"left",field:e=>e.employee[213],format:e=>`${e}`},{name:4,label:"SSN",align:"left",field:e=>e.employee[109],format:(e,t)=>t.showSSN?`${e}`:`***-**-${e.slice(e.length-4)}`,isSSN:!0},{name:5,label:"Phone",align:"left",field:e=>e.employee[25],format:e=>`${e}`},{name:6,label:"Classification",align:"left",field:e=>e[20],format:e=>`${e}`,sortable:!0},{name:7,label:"Job#",align:"left",field:e=>e[105],format:e=>`${e}`,sortable:!0}],Ll=Z({setup(){const e=q(null),t=q(null),u=q(""),{projectData:i}=oe(Q()),p=L(()=>{let o=i.value.roster||null;return o?(o.sort((d,m)=>d[1].$d>m[1].$d?-1:1),o=[...new Map(o.map(d=>[d.employee[3],d])).values()],o=o.filter(d=>!d[112]),o.forEach(d=>{Object.assign(d,{showSSN:!1})}),o=e.value?o.filter(d=>d[105]===e.value):o,o=t.value?o.filter(d=>d[68]===t.value):o,o=o.filter(d=>d[75].toLowerCase().includes(u.value.toLowerCase())||d[104].toLowerCase().includes(u.value.toLowerCase())||d.employee[109].toLowerCase().includes(u.value.toLowerCase())),o.sort((d,m)=>d[75].toLowerCase()>m[75].toLowerCase()?1:-1)):null}),y=L(()=>{const o=p.value?[...new Map(p.value.map(m=>[m[105],m[105]])).values()]:[],d=p.value?[...new Map(p.value.map(m=>[m[68],m[68]])).values()]:[];return{jobNumbers:o,crafts:d}});return{projectData:i,columns:Ml,initialPagination:{rowsPerPage:q(25)},roster:p,filters:y,jobNumberFilter:e,craftFilter:t,searchString:u}}}),Pl=l("div",{class:"text-primary q-mb-sm text-body1"},"Search / Filter",-1),Ol={class:"row q-my-sm"},Ul={class:"col-12 col-md-5 q-pr-sm"},Jl={class:"col-12 col-md-4 q-pr-sm"},Ql={class:"col-12 col-md-3 q-pr-sm"},Xl={class:"text-body2 text-italic"},Fl=l("span",{class:"text-primary"},"Total Employees:",-1),Bl={class:"q-pl-md text-dark"};function Il(e,t,u,i,p,y){return f(),j("div",null,[a(te,{flat:"",class:"q-mb-sm"},{default:r(()=>[a(B,{class:"q-pa-sm"},{default:r(()=>[Pl,l("div",Ol,[l("div",Ul,[a(I,{clearable:"","clear-icon":"close",dense:"",modelValue:e.searchString,"onUpdate:modelValue":t[0]||(t[0]=o=>e.searchString=o),label:"Search","stack-label":"",onClear:t[1]||(t[1]=o=>e.searchString="")},null,8,["modelValue"])]),l("div",Jl,[a(F,{dense:"",modelValue:e.jobNumberFilter,"onUpdate:modelValue":t[2]||(t[2]=o=>e.jobNumberFilter=o),options:e.filters.jobNumbers,label:"Job Number","use-chips":"","stack-label":""},null,8,["modelValue","options"])]),l("div",Ql,[a(F,{dense:"",modelValue:e.craftFilter,"onUpdate:modelValue":t[3]||(t[3]=o=>e.craftFilter=o),options:e.filters.crafts,label:"Craft","use-chips":"","stack-label":""},null,8,["modelValue","options"])])])]),_:1})]),_:1}),a(ue,{dense:"",title:"Roster","title-class":"text-primary",style:{},columns:e.columns,rows:e.roster||[],"row-key":o=>o[3],"table-header-class":"bg-dark text-white",pagination:e.initialPagination},{"top-right":r(()=>[l("div",Xl,[Fl,l("span",Bl,h(e.roster.length),1)])]),_:1},8,["columns","rows","row-key","pagination"])])}var Hl=Y(Ll,[["render",Il]]);const zl=Z({components:{},props:{project:Object},setup(e,t){const u=ee(),i=q(10),p=q(null),{getUser:y}=oe(Fe()),o=q(null),d=L(()=>{const T=new RegExp("^[0-9]{"+i.value+"}","g");return z({firstName:X().required().label("First Name"),lastName:X().required().label("Last Name"),email:X().email().required().label("Email"),phoneNumber:X().matches(T,{excludeEmptyString:!0,message:"Valid Phone Number Required!"}).required().label("Phone Number"),role:z().required().nullable().label("Role"),workdayId:X().required().label("Workday ID")})}),{meta:m,errors:g,handleSubmit:c,handleReset:b}=ge({validationSchema:d}),{value:w}=J("firstName"),{value:V}=J("lastName"),{value:N}=J("email"),{value:$}=J("phoneNumber"),{value:k}=J("role"),{value:E}=J("workdayId");async function U({accessID:T}){const{data:x}=await D.upsertRecordsXML({to:"br598isx6",data:[{3:{value:T},20:{value:!0}}],fieldsToReturn:[28],formatObject:28});t.emit("userAdded",{user:x[0][28]}),u.loading.hide(),b()}async function O(T){const{data:x}=await D.fetchFromStructureApp({fields:[{6:{value:"br598isx6"},7:{value:"Table Query"},8:{value:`{'6'.EX.${T}}`},9:{value:1},14:{value:24}}]});if(new Set(x.filter(W=>W[7]==="Project").map(W=>W[9])).has(e.project[3])){const W=x.find(ne=>ne[9]===e.project[3]);U({accessID:W[3]})}else return!1}async function R(T){const x=`{'10'.EX.'Active'}${T.email?`AND{'6'.EX.'${T.email}'}`:""}${T.phoneNumber?`AND{'8'.EX.'${T.phoneNumber}'}`:""}${T.userType?`AND{'32'.EX.'${T.userType}'}`:""}`,je=[{7:{value:"User Request"},8:{value:x},9:{value:1},14:{value:77}}],{data:W}=await D.fetchFromStructureApp({fields:je});if(W.length<1)return null;if(!await O(W[0][3]))return null}const ce=c(async T=>{u.loading.show();const x={userType:"Project User",phoneNumber:`+${p.value?p.value.dialCode:"1"}${T.phoneNumber}`,email:T.email};if(e.project.users.filter(W=>W[6]===x.email||W[8]===x.phoneNumber).length>0)u.dialog({title:"Alert",message:"Your project already has a user with that phone or email."}).onOk(()=>{t.emit("userCanceled")});else{const W=await R(x);if(console.log(W),W){const{data:ne}=await D.upsertRecordsXML({to:"br598isx6",data:[{6:{value:W[0][3]},7:{value:"Project"},9:{value:e.project[3]}}],fieldsToReturn:[28],formatObject:28});ne.length>0&&t.emit("userAdded",{user:ne[0][28]})}else{const ne=N.value.match(/^([^@]*)@/)[1],_e=Object.assign({phoneNumber:$.value},p.value),{data:ke}=await D.upsertRecordsXML({to:"br4pxrbs6",data:[{6:{value:T.email},7:{value:"temp"},8:{value:`+${p.value?p.value.dialCode:"1"}${T.phoneNumber}`},9:{value:JSON.stringify(_e)},10:{value:"Active"},11:{value:T.role[3]},17:{value:!0},23:{value:y.value[3]},24:{value:y.value[3]},25:{value:new Date},26:{value:new Date},32:{value:"Project User"},33:{value:ne},35:{value:w.value},37:{value:V.value},49:{value:!0},50:{value:!0},70:{value:T.workdayId}}],fieldsToReturn:[3,96],formatObject:96});if(ke[0]!==void 0){const ye=await D.upsertRecordsXML({to:"br598isx6",data:[{6:{value:ke[0][3]},7:{value:"Project"},9:{value:e.project[3]}}],fieldsToReturn:[28],formatObject:28});ye.data[0]!==void 0&&u.dialog({title:"Confirm",message:"User successfully added. Would you like to send them an invite?",cancel:!0,persistent:!0}).onOk(async()=>{(await D.upsertRecordsXML({to:"br4pxrbs6",data:[{3:{value:ye.data[0][28][3]},93:{value:new Date}}],fieldsToReturn:[3]})).data[0]!==void 0&&(u.notify({type:"positive",message:"User invite submitted"}),t.emit("userAdded",{user:ye.data[0][28]}))}).onCancel(()=>{t.emit("userAdded",{user:ye.data[0][28]})})}}}b(),u.loading.hide()}),_=L(()=>{const T=e.project.users.map(x=>x[9].phoneNumber);return new Set(T)});be($,T=>{_.value.has(T)&&u.notify({type:"negative",message:"Phone Number is already in use!",timeout:1e4,position:u.screen.lt.md?"top":"center"})});const P=T=>{p.value=T},le=T=>{i.value=T};function qe(){b(),t.emit("userCanceled")}async function Re(){u.loading.show();const{data:T}=await D.fetchFromStructureApp({fields:[{6:{value:"br5v4in72"},7:{value:"Table Query"},8:{value:"{'7'.EX.'Projects'}AND{'15'.EX.'Active'}AND{'17'.EX.true}"},9:{value:1},14:{value:18}}]});o.value=T,u.loading.hide()}return Re(),{updateCountry:P,updatePhoneMaxLength:le,firstName:w,lastName:V,email:N,phoneNumber:$,role:k,workdayId:E,formMeta:m,formErrors:g,submitUser:ce,roleOptions:o,cancel:qe}}}),Yl=l("div",{class:"text-primary text-h6 q-mb-sm"},"Add a New User",-1),Wl={class:"row justify-between"},Gl={class:"row justify-between"},Kl={class:"text-caption"},Zl={class:"text-caption"},xl={class:"text-caption"};function es(e,t,u,i,p,y){return f(),j("div",null,[a(te,null,{default:r(()=>[a(ve,{onSubmit:pe(e.submitUser,["prevent"])},{default:r(()=>[a(B,null,{default:r(()=>[Yl,l("div",Wl,[l("div",{class:fe(["col-12 col-md-4",e.$q.screen.lt.md?"q-pt-sm":"q-pr-sm"])},[a(I,{dense:"",outlined:"",label:"First Name",modelValue:e.firstName,"onUpdate:modelValue":t[0]||(t[0]=o=>e.firstName=o),error:!!e.formErrors.firstName},null,8,["modelValue","error"])],2),l("div",{class:fe(["col-12 col-md-4",e.$q.screen.lt.md?"q-pt-sm":"q-pr-sm"])},[a(I,{dense:"",outlined:"",label:"Last Name",modelValue:e.lastName,"onUpdate:modelValue":t[1]||(t[1]=o=>e.lastName=o),error:!!e.formErrors.lastName},null,8,["modelValue","error"])],2),l("div",{class:fe(["col-12 col-md-4",e.$q.screen.lt.md?"q-pt-sm":"q-pr-sm"])},[a(I,{dense:"",outlined:"",label:"Workday ID",modelValue:e.workdayId,"onUpdate:modelValue":t[2]||(t[2]=o=>e.workdayId=o),error:!!e.formErrors.workdayId},null,8,["modelValue","error"])],2)]),l("div",Gl,[l("div",{class:fe(["col-12 col-md-4",e.$q.screen.lt.md?"q-pt-sm":"q-pr-sm"])},[a(I,{dense:"",outlined:"",label:"Phone Number",modelValue:e.phoneNumber,"onUpdate:modelValue":t[3]||(t[3]=o=>e.phoneNumber=o),error:!!e.formErrors.phoneNumber,"bottom-slots":""},{error:r(()=>[l("div",Kl,h(e.formErrors.phoneNumber),1)]),_:1},8,["modelValue","error"])],2),l("div",{class:fe(["col-12 col-md-4",e.$q.screen.lt.md?"q-pt-sm":"q-pr-sm"])},[a(I,{dense:"",outlined:"",label:"Email","bottom-slots":"",modelValue:e.email,"onUpdate:modelValue":t[4]||(t[4]=o=>e.email=o),error:!!e.formErrors.email},{error:r(()=>[l("div",Zl,h(e.formErrors.email),1)]),_:1},8,["modelValue","error"])],2),l("div",{class:fe(["col-12 col-md-4",e.$q.screen.lt.md?"q-pt-sm":"q-pr-sm"])},[a(F,{dense:"",outlined:"",label:"Role","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.role,"onUpdate:modelValue":t[5]||(t[5]=o=>e.role=o),options:e.roleOptions,"option-label":"6","display-value":`${e.role?e.role[6]:""}`,"bottom-slots":"",error:!!e.formErrors.role},{error:r(()=>[l("div",xl,h(e.formErrors.role),1)]),_:1},8,["modelValue","options","display-value","error"])],2)])]),_:1}),a(re,{align:"right"},{default:r(()=>[a(S,{color:"secondary",onClick:e.cancel,label:"Cancel"},null,8,["onClick"]),a(S,{color:"primary",type:"submit",label:"Submit"})]),_:1})]),_:1},8,["onSubmit"])]),_:1})])}var ts=Y(zl,[["render",es]]);const os=[{name:0,label:"Date Created",align:"left",field:e=>e[1],format:e=>`${mt.formatDate(e.$d,"MM/DD/YYYY")}`,sortable:!0},{name:1,label:"Name",align:"left",field:e=>e[35],format:(e,t)=>`${e} ${t[37]}`,sortable:!0},{name:2,label:"Role",align:"left",field:e=>e[44],format:e=>`${e}`,sortable:!0},{name:3,label:"Email",align:"left",field:e=>e[6],format:e=>`${e}`,sortable:!0},{name:4,label:"Last Access",align:"left",field:e=>e.lastLogin,format:(e,t)=>`${t.registered?e.date:"Never"}`,sortable:!0}],as=Z({components:{AddUser:ts},setup(){const e=ee(),{projectData:t}=oe(Q()),{pushNewObject:u}=Q(),i=q(!1),p=L(()=>t.value.users.sort((m,g)=>m[44]>g[44]?-1:1));function y({user:d}){e.notify({type:"positive",message:"User successfully added!"}),i.value=!1,u({array:"users",object:d})}function o(d){console.log(d)}return{projectData:t,projectUsers:p,columns:os,initialPagination:{rowsPerPage:100},showAddUser:i,userAdded:y,sendInvite:o}}}),ls={key:1};function ss(e,t,u,i,p,y){const o=H("add-user");return f(),j("div",null,[e.showAddUser?(f(),j("div",ls,[a(o,{onUserAdded:e.userAdded,onUserCanceled:t[1]||(t[1]=d=>e.showAddUser=!1),project:e.projectData},null,8,["onUserAdded","project"])])):(f(),A(ue,{key:0,rows:e.projectUsers,columns:e.columns,"hide-pagination":!0,"row-key":d=>d[3],pagination:e.initialPagination,"table-header-class":"bg-dark text-white",dense:""},rt({_:2},[e.$can("manage","projects")?{name:"top-left",fn:r(()=>[a(S,{color:"accent",label:"Add Another User",onClick:t[0]||(t[0]=d=>e.showAddUser=!0),icon:"add"})]),key:"0"}:void 0]),1032,["rows","columns","row-key","pagination"]))])}var rs=Y(as,[["render",ss]]);const ns={components:{Workday:lo,JobNumbers:go,CraftsAndJobs:ga,Requests:_t,Pipeline:Tl,Roster:Hl,MeetingLocations:Ro,Requirements:dl,Users:rs},setup(){const e=nt(),t=it(),u=ee(),{fetchProject:i}=Q(),{projectData:p}=oe(Q()),y=Q();async function o(){u.loading.show(),await i({id:e.params.id}),u.loading.hide()}o(),be(p,()=>{console.log(p.value)});function d(){t.go(-1),y.$reset()}return{projectData:p,splitterModel:q(20),tab:q(0),decodeHTML:Be,closeViewProject:d}}},is={key:0,class:"q-pa-sm"},ds={class:"row"},us={class:"col-12 col-md-6"},cs={class:"col-12 col-md-6"},ms={class:"row"},fs={class:"col-12 col-md-3 q-pr-sm"},bs=l("div",{class:"text-h6 text-weight-regular"},"GENERAL INFO",-1),ps={class:"q-my-sm"},vs=l("div",{class:"text-primary"},"Project:",-1),gs={class:"text-dark q-pl-sm"},ys={class:"q-my-sm"},hs=l("div",{class:"text-primary"},"Job Site:",-1),ws={class:"text-dark q-pl-sm"},$s={class:"q-my-sm"},js=l("div",{class:"text-primary"},"Hiring Center:",-1),qs={class:"text-dark q-pl-sm"},ks={class:"q-my-sm"},Cs=l("div",{class:"text-primary"},"Sup Org Manager:",-1),Ns={class:"text-dark q-pl-sm"},Ss={class:"q-my-sm"},Vs=l("div",{class:"text-primary"},"Project Manager:",-1),As={class:"text-dark q-pl-sm"},Ds={class:"text-dark q-pl-sm"},Rs={class:"text-dark q-pl-sm"},_s={class:"q-my-sm"},Es=l("div",{class:"text-primary"},"Safety Manager:",-1),Ts={class:"text-dark q-pl-sm"},Ms={class:"text-dark q-pl-sm"},Ls={class:"text-dark q-pl-sm"},Ps={class:"col-12 col-md-9 q-pl-sm"};function Os(e,t,u,i,p,y){const o=H("requests"),d=H("workday"),m=H("job-numbers"),g=H("meeting-locations"),c=H("crafts-and-jobs"),b=H("requirements"),w=H("pipeline"),V=H("roster"),N=H("users");return f(),A(ut,{style:{"max-width":"100vw"}},{default:r(()=>[i.projectData?(f(),j("div",is,[a(te,{flat:""},{default:r(()=>[a(B,{class:"q-pa-none"},{default:r(()=>[l("div",ds,[l("div",us,[a(re,{class:"q-pt-none",align:"left"},{default:r(()=>[a(S,{label:"Back",color:"secondary",icon:"keyboard_return",onClick:i.closeViewProject},null,8,["onClick"])]),_:1})]),l("div",cs,[a(re,{class:"q-pt-none",align:"right"},{default:r(()=>[e.$can("create","hireRequests")?(f(),A(S,{key:0,label:"Add Hire Request",color:"accent",icon:"add"})):C("",!0),e.$can("manage","projects")?(f(),A(S,{key:1,label:"Close this Project",color:"dark"})):C("",!0)]),_:1})])])]),_:1})]),_:1}),l("div",ms,[l("div",fs,[a(te,{class:"q-mb-md"},{default:r(()=>[a(B,{class:"q-py-sm q-pl-md bg-info text-white"},{default:r(()=>[bs]),_:1}),a(B,{class:"text-body2 q-py-xs"},{default:r(()=>[l("div",ps,[vs,l("div",gs,h(i.projectData[20]),1)]),a(we),l("div",ys,[hs,l("div",ws,h(i.projectData[24]),1)]),a(we),l("div",$s,[js,l("div",qs,h(i.projectData[76]),1)]),a(we),l("div",ks,[Cs,l("div",Ns,h(i.projectData[245]!==""?i.projectData[245]:"N/A"),1)]),a(we),l("div",Ss,[Vs,l("div",As,h(i.projectData[46]),1),l("div",Ds,h(i.projectData[47]),1),l("div",Rs,h(i.projectData[48]),1)]),a(we),l("div",_s,[Es,l("div",Ts,h(i.projectData[50]),1),l("div",Ms,h(i.projectData[51]),1),l("div",Ls,h(i.projectData[52]),1)])]),_:1})]),_:1})]),l("div",Ps,[a(dt,{class:"bg-info text-white shadow-2 rounded-borders"},{default:r(()=>[a(De,{align:"left",modelValue:i.tab,"onUpdate:modelValue":t[0]||(t[0]=$=>i.tab=$),dense:"","indicator-color":"accent"},{default:r(()=>[a(G,{name:0,label:"Requests"}),a(G,{name:1,label:"Workday"}),a(G,{name:2,label:"Job Numbers"}),a(G,{name:3,label:"Per Diem"}),a(G,{name:4,label:"Locations"}),a(G,{name:5,label:"Crafts / Jobs"}),a(G,{name:6,label:"Requirements"}),a(G,{name:7,label:"Pipeline"}),a(G,{name:8,label:"Roster"}),a(G,{name:9,label:"Users"})]),_:1},8,["modelValue"])]),_:1}),i.projectData?(f(),A(Ae,{key:0,modelValue:i.tab,"onUpdate:modelValue":t[1]||(t[1]=$=>i.tab=$),animated:"",class:"q-px-none"},{default:r(()=>[a(K,{class:"q-px-xs",name:0},{default:r(()=>[a(o)]),_:1}),a(K,{class:"q-px-xs",name:1},{default:r(()=>[a(d)]),_:1}),a(K,{class:"q-px-xs",name:2},{default:r(()=>[a(m)]),_:1}),a(K,{class:"q-px-xs",name:3},{default:r(()=>[a(m)]),_:1}),a(K,{class:"q-px-xs",name:4},{default:r(()=>[a(g)]),_:1}),a(K,{class:"q-px-xs",name:5},{default:r(()=>[a(c)]),_:1}),a(K,{class:"q-px-xs",name:6},{default:r(()=>[a(b)]),_:1}),a(K,{class:"q-px-xs",name:7},{default:r(()=>[a(w)]),_:1}),a(K,{class:"q-px-xs",name:8},{default:r(()=>[a(V)]),_:1}),a(K,{class:"q-px-xs",name:9},{default:r(()=>[a(N)]),_:1})]),_:1},8,["modelValue"])):C("",!0)])])])):C("",!0)]),_:1})}var Tr=Y(ns,[["render",Os]]);export{Tr as default};
