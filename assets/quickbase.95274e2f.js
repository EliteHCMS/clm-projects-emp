var qi=Object.defineProperty,_i=Object.defineProperties;var Mi=Object.getOwnPropertyDescriptors;var Nt=Object.getOwnPropertySymbols;var Li=Object.prototype.hasOwnProperty,Ui=Object.prototype.propertyIsEnumerable;var ze=(e,t,s)=>t in e?qi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,j=(e,t)=>{for(var s in t||(t={}))Li.call(t,s)&&ze(e,s,t[s]);if(Nt)for(var s of Nt(t))Ui.call(t,s)&&ze(e,s,t[s]);return e},U=(e,t)=>_i(e,Mi(t));var R=(e,t,s)=>(ze(e,typeof t!="symbol"?t+"":t,s),s);import{m as et,n as Bi,p as Yi,q as J,l as I,s as Ki,t as vs,u as Xi,v as q,x as ys,y as Hi,P as B,z as zi,f as Qi}from"./index.df995f5f.js";import{c as Ji,a as we}from"./_commonjsHelpers.dfee5925.js";import{dayjs as d}from"./dayjs.2c96dcd3.js";import{localforage as y,stateDB as K}from"./localForage.3844ce44.js";import{r as bs,a as xs}from"./index.7dbe61ef.js";import{i as be}from"./i18n.bd13b955.js";import{api as Vi}from"./api.c05f3e59.js";var ws={exports:{}};(function(e){/**
 * @license bcrypt.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/bcrypt.js for details
 */(function(t,s){typeof Ji=="function"&&!0&&e&&e.exports?e.exports=s():(t.dcodeIO=t.dcodeIO||{}).bcrypt=s()})(we,function(){var t={},s=null;function i(g){if(e&&e.exports)try{return require("crypto").randomBytes(g)}catch{}try{var m;return(self.crypto||self.msCrypto).getRandomValues(m=new Uint32Array(g)),Array.prototype.slice.call(m)}catch{}if(!s)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return s(g)}var r=!1;try{i(1),r=!0}catch{}s=null,t.setRandomFallback=function(g){s=g},t.genSaltSync=function(g,m){if(g=g||E,typeof g!="number")throw Error("Illegal arguments: "+typeof g+", "+typeof m);g<4?g=4:g>31&&(g=31);var p=[];return p.push("$2a$"),g<10&&p.push("0"),p.push(g.toString()),p.push("$"),p.push(b(i(O),O)),p.join("")},t.genSalt=function(g,m,p){if(typeof m=="function"&&(p=m,m=void 0),typeof g=="function"&&(p=g,g=void 0),typeof g=="undefined")g=E;else if(typeof g!="number")throw Error("illegal arguments: "+typeof g);function f(u){n(function(){try{u(null,t.genSaltSync(g))}catch(v){u(v)}})}if(p){if(typeof p!="function")throw Error("Illegal callback: "+typeof p);f(p)}else return new Promise(function(u,v){f(function(k,C){if(k){v(k);return}u(C)})})},t.hashSync=function(g,m){if(typeof m=="undefined"&&(m=E),typeof m=="number"&&(m=t.genSaltSync(m)),typeof g!="string"||typeof m!="string")throw Error("Illegal arguments: "+typeof g+", "+typeof m);return He(g,m)},t.hash=function(g,m,p,f){function u(v){typeof g=="string"&&typeof m=="number"?t.genSalt(m,function(k,C){He(g,C,v,f)}):typeof g=="string"&&typeof m=="string"?He(g,m,v,f):n(v.bind(this,Error("Illegal arguments: "+typeof g+", "+typeof m)))}if(p){if(typeof p!="function")throw Error("Illegal callback: "+typeof p);u(p)}else return new Promise(function(v,k){u(function(C,S){if(C){k(C);return}v(S)})})};function a(g,m){for(var p=0,f=0,u=0,v=g.length;u<v;++u)g.charCodeAt(u)===m.charCodeAt(u)?++p:++f;return p<0?!1:f===0}t.compareSync=function(g,m){if(typeof g!="string"||typeof m!="string")throw Error("Illegal arguments: "+typeof g+", "+typeof m);return m.length!==60?!1:a(t.hashSync(g,m.substr(0,m.length-31)),m)},t.compare=function(g,m,p,f){function u(v){if(typeof g!="string"||typeof m!="string"){n(v.bind(this,Error("Illegal arguments: "+typeof g+", "+typeof m)));return}if(m.length!==60){n(v.bind(this,null,!1));return}t.hash(g,m.substr(0,29),function(k,C){k?v(k):v(null,a(C,m))},f)}if(p){if(typeof p!="function")throw Error("Illegal callback: "+typeof p);u(p)}else return new Promise(function(v,k){u(function(C,S){if(C){k(C);return}v(S)})})},t.getRounds=function(g){if(typeof g!="string")throw Error("Illegal arguments: "+typeof g);return parseInt(g.split("$")[2],10)},t.getSalt=function(g){if(typeof g!="string")throw Error("Illegal arguments: "+typeof g);if(g.length!==60)throw Error("Illegal hash length: "+g.length+" != 60");return g.substring(0,29)};var n=typeof process!="undefined"&&process&&typeof process.nextTick=="function"?typeof setImmediate=="function"?setImmediate:process.nextTick:setTimeout;function o(g){var m=[],p=0;return A.encodeUTF16toUTF8(function(){return p>=g.length?null:g.charCodeAt(p++)},function(f){m.push(f)}),m}var c="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),l=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1],h=String.fromCharCode;function b(g,m){var p=0,f=[],u,v;if(m<=0||m>g.length)throw Error("Illegal len: "+m);for(;p<m;){if(u=g[p++]&255,f.push(c[u>>2&63]),u=(u&3)<<4,p>=m){f.push(c[u&63]);break}if(v=g[p++]&255,u|=v>>4&15,f.push(c[u&63]),u=(v&15)<<2,p>=m){f.push(c[u&63]);break}v=g[p++]&255,u|=v>>6&3,f.push(c[u&63]),f.push(c[v&63])}return f.join("")}function w(g,m){var p=0,f=g.length,u=0,v=[],k,C,S,$,D,N;if(m<=0)throw Error("Illegal len: "+m);for(;p<f-1&&u<m&&(N=g.charCodeAt(p++),k=N<l.length?l[N]:-1,N=g.charCodeAt(p++),C=N<l.length?l[N]:-1,!(k==-1||C==-1||(D=k<<2>>>0,D|=(C&48)>>4,v.push(h(D)),++u>=m||p>=f)||(N=g.charCodeAt(p++),S=N<l.length?l[N]:-1,S==-1)||(D=(C&15)<<4>>>0,D|=(S&60)>>2,v.push(h(D)),++u>=m||p>=f)));)N=g.charCodeAt(p++),$=N<l.length?l[N]:-1,D=(S&3)<<6>>>0,D|=$,v.push(h(D)),++u;var G=[];for(p=0;p<u;p++)G.push(v[p].charCodeAt(0));return G}var A=function(){var g={};return g.MAX_CODEPOINT=1114111,g.encodeUTF8=function(m,p){var f=null;for(typeof m=="number"&&(f=m,m=function(){return null});f!==null||(f=m())!==null;)f<128?p(f&127):f<2048?(p(f>>6&31|192),p(f&63|128)):f<65536?(p(f>>12&15|224),p(f>>6&63|128),p(f&63|128)):(p(f>>18&7|240),p(f>>12&63|128),p(f>>6&63|128),p(f&63|128)),f=null},g.decodeUTF8=function(m,p){for(var f,u,v,k,C=function(S){S=S.slice(0,S.indexOf(null));var $=Error(S.toString());throw $.name="TruncatedError",$.bytes=S,$};(f=m())!==null;)if((f&128)===0)p(f);else if((f&224)===192)(u=m())===null&&C([f,u]),p((f&31)<<6|u&63);else if((f&240)===224)((u=m())===null||(v=m())===null)&&C([f,u,v]),p((f&15)<<12|(u&63)<<6|v&63);else if((f&248)===240)((u=m())===null||(v=m())===null||(k=m())===null)&&C([f,u,v,k]),p((f&7)<<18|(u&63)<<12|(v&63)<<6|k&63);else throw RangeError("Illegal starting byte: "+f)},g.UTF16toUTF8=function(m,p){for(var f,u=null;(f=u!==null?u:m())!==null;){if(f>=55296&&f<=57343&&(u=m())!==null&&u>=56320&&u<=57343){p((f-55296)*1024+u-56320+65536),u=null;continue}p(f)}u!==null&&p(u)},g.UTF8toUTF16=function(m,p){var f=null;for(typeof m=="number"&&(f=m,m=function(){return null});f!==null||(f=m())!==null;)f<=65535?p(f):(f-=65536,p((f>>10)+55296),p(f%1024+56320)),f=null},g.encodeUTF16toUTF8=function(m,p){g.UTF16toUTF8(m,function(f){g.encodeUTF8(f,p)})},g.decodeUTF8toUTF16=function(m,p){g.decodeUTF8(m,function(f){g.UTF8toUTF16(f,p)})},g.calculateCodePoint=function(m){return m<128?1:m<2048?2:m<65536?3:4},g.calculateUTF8=function(m){for(var p,f=0;(p=m())!==null;)f+=g.calculateCodePoint(p);return f},g.calculateUTF16asUTF8=function(m){var p=0,f=0;return g.UTF16toUTF8(m,function(u){++p,f+=g.calculateCodePoint(u)}),[p,f]},g}();Date.now=Date.now||function(){return+new Date};var O=16,E=10,F=16,ge=100,Rt=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],Dt=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],Pt=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function ve(g,m,p,f){var u,v=g[m],k=g[m+1];return v^=p[0],u=f[v>>>24],u+=f[256|v>>16&255],u^=f[512|v>>8&255],u+=f[768|v&255],k^=u^p[1],u=f[k>>>24],u+=f[256|k>>16&255],u^=f[512|k>>8&255],u+=f[768|k&255],v^=u^p[2],u=f[v>>>24],u+=f[256|v>>16&255],u^=f[512|v>>8&255],u+=f[768|v&255],k^=u^p[3],u=f[k>>>24],u+=f[256|k>>16&255],u^=f[512|k>>8&255],u+=f[768|k&255],v^=u^p[4],u=f[v>>>24],u+=f[256|v>>16&255],u^=f[512|v>>8&255],u+=f[768|v&255],k^=u^p[5],u=f[k>>>24],u+=f[256|k>>16&255],u^=f[512|k>>8&255],u+=f[768|k&255],v^=u^p[6],u=f[v>>>24],u+=f[256|v>>16&255],u^=f[512|v>>8&255],u+=f[768|v&255],k^=u^p[7],u=f[k>>>24],u+=f[256|k>>16&255],u^=f[512|k>>8&255],u+=f[768|k&255],v^=u^p[8],u=f[v>>>24],u+=f[256|v>>16&255],u^=f[512|v>>8&255],u+=f[768|v&255],k^=u^p[9],u=f[k>>>24],u+=f[256|k>>16&255],u^=f[512|k>>8&255],u+=f[768|k&255],v^=u^p[10],u=f[v>>>24],u+=f[256|v>>16&255],u^=f[512|v>>8&255],u+=f[768|v&255],k^=u^p[11],u=f[k>>>24],u+=f[256|k>>16&255],u^=f[512|k>>8&255],u+=f[768|k&255],v^=u^p[12],u=f[v>>>24],u+=f[256|v>>16&255],u^=f[512|v>>8&255],u+=f[768|v&255],k^=u^p[13],u=f[k>>>24],u+=f[256|k>>16&255],u^=f[512|k>>8&255],u+=f[768|k&255],v^=u^p[14],u=f[v>>>24],u+=f[256|v>>16&255],u^=f[512|v>>8&255],u+=f[768|v&255],k^=u^p[15],u=f[k>>>24],u+=f[256|k>>16&255],u^=f[512|k>>8&255],u+=f[768|k&255],v^=u^p[16],g[m]=k^p[F+1],g[m+1]=v,g}function ne(g,m){for(var p=0,f=0;p<4;++p)f=f<<8|g[m]&255,m=(m+1)%g.length;return{key:f,offp:m}}function Et(g,m,p){for(var f=0,u=[0,0],v=m.length,k=p.length,C,S=0;S<v;S++)C=ne(g,f),f=C.offp,m[S]=m[S]^C.key;for(S=0;S<v;S+=2)u=ve(u,0,m,p),m[S]=u[0],m[S+1]=u[1];for(S=0;S<k;S+=2)u=ve(u,0,m,p),p[S]=u[0],p[S+1]=u[1]}function Ni(g,m,p,f){for(var u=0,v=[0,0],k=p.length,C=f.length,S,$=0;$<k;$++)S=ne(m,u),u=S.offp,p[$]=p[$]^S.key;for(u=0,$=0;$<k;$+=2)S=ne(g,u),u=S.offp,v[0]^=S.key,S=ne(g,u),u=S.offp,v[1]^=S.key,v=ve(v,0,p,f),p[$]=v[0],p[$+1]=v[1];for($=0;$<C;$+=2)S=ne(g,u),u=S.offp,v[0]^=S.key,S=ne(g,u),u=S.offp,v[1]^=S.key,v=ve(v,0,p,f),f[$]=v[0],f[$+1]=v[1]}function Ft(g,m,p,f,u){var v=Pt.slice(),k=v.length,C;if(p<4||p>31)if(C=Error("Illegal number of rounds (4-31): "+p),f){n(f.bind(this,C));return}else throw C;if(m.length!==O)if(C=Error("Illegal salt length: "+m.length+" != "+O),f){n(f.bind(this,C));return}else throw C;p=1<<p>>>0;var S,$,D=0,N;Int32Array?(S=new Int32Array(Rt),$=new Int32Array(Dt)):(S=Rt.slice(),$=Dt.slice()),Ni(m,g,S,$);function G(){if(u&&u(D/p),D<p)for(var oe=Date.now();D<p&&(D=D+1,Et(g,S,$),Et(m,S,$),!(Date.now()-oe>ge)););else{for(D=0;D<64;D++)for(N=0;N<k>>1;N++)ve(v,N<<1,S,$);var L=[];for(D=0;D<k;D++)L.push((v[D]>>24&255)>>>0),L.push((v[D]>>16&255)>>>0),L.push((v[D]>>8&255)>>>0),L.push((v[D]&255)>>>0);if(f){f(null,L);return}else return L}f&&n(G)}if(typeof f!="undefined")G();else for(var ye;;)if(typeof(ye=G())!="undefined")return ye||[]}function He(g,m,p,f){var u;if(typeof g!="string"||typeof m!="string")if(u=Error("Invalid string / salt: Not a string"),p){n(p.bind(this,u));return}else throw u;var v,k;if(m.charAt(0)!=="$"||m.charAt(1)!=="2")if(u=Error("Invalid salt version: "+m.substring(0,2)),p){n(p.bind(this,u));return}else throw u;if(m.charAt(2)==="$")v=String.fromCharCode(0),k=3;else{if(v=m.charAt(2),v!=="a"&&v!=="b"&&v!=="y"||m.charAt(3)!=="$")if(u=Error("Invalid salt revision: "+m.substring(2,4)),p){n(p.bind(this,u));return}else throw u;k=4}if(m.charAt(k+2)>"$")if(u=Error("Missing salt rounds"),p){n(p.bind(this,u));return}else throw u;var C=parseInt(m.substring(k,k+1),10)*10,S=parseInt(m.substring(k+1,k+2),10),$=C+S,D=m.substring(k+3,k+25);g+=v>="a"?"\0":"";var N=o(g),G=w(D,O);function ye(oe){var L=[];return L.push("$2"),v>="a"&&L.push(v),L.push("$"),$<10&&L.push("0"),L.push($.toString()),L.push("$"),L.push(b(G,G.length)),L.push(b(oe,Pt.length*4-1)),L.join("")}if(typeof p=="undefined")return ye(Ft(N,G,$));Ft(N,G,$,function(oe,L){oe?p(oe,null):p(null,ye(L))},f)}return t.encodeBase64=b,t.decodeBase64=w,t})})(ws);var Ae=ws.exports,As={get dev(){return!1},realm:"elitehcms",appDBID:"bp3gargfh",baseURL:"https://api.quickbase.com/v1",loginEndpoint:"https://elitehcms.quickbase.com/db/main?act=API_Authenticate",appToken:"cjibuvub93rvd2dbh4iksbeft4n4",refreshEndpoint:"https://api.quickbase.com/v1/auth/temporary",queryRecords:"https://api.quickbase.com/v1/records/query",insertRecords:"https://api.quickbase.com/v1/records",updateRecords:"https://api.quickbase.com/v1/records",runReport:"https://api.quickbase.com/v1/reports",storageUserKeyName:"clm_emp_user",storageUserTicketKeyName:"clm_emp_ticket",storageIPInfoKeyName:"clm_emp_ip",storagePermissionsKeyName:"clm_emp_permissions",storageAccessKeyName:"clm_emp_access",storageOfficeLocationKeyName:"clm_emp_office",storageEmployeeKeyName:"clm_emp_employee",storageCheckInKeyName:"clm_emp_checkin",storageJobBoardKeyName:"clm_emp_jobboard",cookieExpiration:"1d",kioskExpiration:"14d",officeExpiration:"6h",checkInExpiration:"5m",tokenExpiration:"4m 45s",userToken:"b3rntv_ng3q_0_b3f26wpbjxp4xdhqrxjmdpjmvus",commonParameters:{msInUTC:0,includeRids:1,fmt:"structured",options:"num-5000"},maxLoginAttempts:5,lastAttemptExpMinutes:5,loginAttemptMinutesBeforeLast:2,booleanFields:{br26nivmr:[21]}};function Gi(e){const t=Object.assign({noopener:!0},e),s=[];for(const i in t){const r=t[i];r===!0?s.push(i):(Yi(r)||typeof r=="string"&&r!=="")&&s.push(i+"="+r)}return s.join(",")}function qt(e,t,s){let i=window.open;if(et.is.cordova===!0){if(cordova!==void 0&&cordova.InAppBrowser!==void 0&&cordova.InAppBrowser.open!==void 0)i=cordova.InAppBrowser.open;else if(navigator!==void 0&&navigator.app!==void 0)return navigator.app.loadUrl(e,{openExternal:!0})}const r=i(e,"_blank",Gi(s));if(r)return et.is.desktop&&r.focus(),r;t&&t()}var Wi=(e,t,s)=>{if(et.is.ios===!0&&window.SafariViewController!==void 0){window.SafariViewController.isAvailable(i=>{i?window.SafariViewController.show({url:e},Bi,t):qt(e,t,s)});return}return qt(e,t,s)};const z=J("hiringCenter",{state:()=>({hiringCenterInfo:null}),getters:{hiringCenter:e=>e.hiringCenterInfo,hiringCenterAvailable:e=>e.hiringCenterInfo!==null},actions:{async fetchHiringCenter(e,t){const s=[{9:{value:e},7:{value:"Hiring Center"}}];if(!this.hiringCenterInfo||t){const{data:i}=await x.fetchFromStructureApp({fields:s});return this.setHiringCenter(i,!0),i}else return this.hiringCenterInfo},setHiringCenter(e,t){this.hiringCenterInfo=e,t&&e?y.setItem(I.storageHiringCenter,e):e||y.removeItem(I.storageHiringCenter)}}});var Zi=[{title:"Home",i18n:"home",caption:"Home",icon:"home",to:{name:"home",exact:!0},resource:"dashboard",action:"read",userType:"All"},{title:"Profile",caption:"Information",icon:"assignment_ind",to:{name:"profile",exact:!0},resource:"profile",action:"read",access:{userType:"none",public:!1,private:!1}},{title:"Job Board",caption:"Job Board",icon:"work",to:{name:"jobs",exact:!0},resource:"jobBoardMenu",action:"read",userType:"Candidate",access:{userType:"Candidate",public:!0,private:!1,checkIn:!1}},{title:"Apply",caption:"Apply",icon:"feed",to:{name:"apply",exact:!0},resource:"applyMenu",action:"read",userType:"Candidate",access:{userType:"Candidate",public:!0,private:!0,checkIn:!0}}],er=[{title:"Home",caption:"Dashboard",icon:"fa-solid fa-house",to:{name:"home",exact:!0},resource:"dashboard",userType:"Project User"},{title:"Expected Arrivals",caption:"Arrivals",icon:"fa-solid fa-plane-arrival",to:{name:"arrivals",exact:!0},resource:"projectArrivals",userType:"Project User"},{title:"Hire Requests",caption:"Requests",icon:"fa-solid fa-user-plus",to:{name:"requests",exact:!0},resource:"projectRequests",userType:"Project User"},{title:"Pipeline",caption:"Pipeline",icon:"fa-solid fa-bars-progress",to:{name:"pipeline",exact:!0},resource:"projectPipeline",userType:"Project User"},{title:"Employees",caption:"Employees",icon:"fa-solid fa-people-group",to:{name:"employees",exact:!0},resource:"projectEmployees",userType:"Project User"},{title:"Compliance",caption:"Compliance",icon:"fa-solid fa-shield-halved",to:{name:"compliance",exact:!0},resource:"compliance",userType:"Project User"},{title:"Manage Projects",caption:"Manage Projects",icon:"fa-solid fa-building-columns",to:{name:"manage-projects",exact:!0},resource:"manageProjects",userType:"Project User"},{title:"Insights",caption:"Insights",icon:"fa-solid fa-chart-line",to:{name:"insights",exact:!0},resource:"insights",userType:"Project User"}],tr=[{title:"Self Check-Ins",caption:"self-check-ins",icon:"list_alt",to:{name:"self-check-ins",exact:!0},resource:"selfCheckIns",userType:"QuickBase User"},{title:"Hiring",caption:"Hiring",icon:"group_add",to:{name:"profiles",exact:!0},resource:"hiring",userType:"QuickBase User"},{title:"Recruiting",caption:"Recruiting",icon:"connect_without_contact",to:{name:"jobPost",exact:!0},resource:"recruiting",userType:"QuickBase User"},{title:"Projects",caption:"Projects",icon:"corporate_fare",to:{name:"projects",exact:!0},resource:"projects",userType:"QuickBase User"},{title:"Releases",caption:"Releases",icon:"receipt",to:{name:"releases",exact:!0},resource:"releases",userType:"QuickBase User"},{title:"Chat",caption:"Chat",icon:"chat",to:{name:"chat",exact:!0},resource:"chat",userType:"QuickBase User"}],sr=[{title:"Summary",caption:"Summary",icon:"preview",resource:"open",to:{name:"ee-summary",exact:!0}},{title:"Training",caption:"Training",icon:"grading",resource:"open",to:{name:"ee-training",exact:!0}}];function ir(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ke(){return(ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e}).apply(this,arguments)}function ht(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var ks=function(){function e(i,r){this.operator=i,this.value=r,Object.defineProperty(this,"t",{writable:!0})}var t,s;return e.prototype.addNote=function(i){this.t=this.t||[],this.t.push(i)},t=e,(s=[{key:"notes",get:function(){return this.t}}])&&ir(t.prototype,s),e}(),pt=function(e){function t(){return e.apply(this,arguments)||this}return ht(t,e),t}(ks),Ne=function(e){function t(s,i){if(!Array.isArray(i))throw new Error('"'+s+'" operator expects to receive an array of conditions');return e.call(this,s,i)||this}return ht(t,e),t}(pt),Se="__itself__",qe=function(e){function t(s,i,r){var a;return(a=e.call(this,s,r)||this).field=i,a}return ht(t,e),t}(ks),Is=new pt("__null__",null),tt=Object.prototype.hasOwnProperty.call.bind(Object.prototype.hasOwnProperty);function rr(e,t){return t instanceof Ne&&t.operator===e}function Ss(e,t){return t.length===1?t[0]:new Ne(e,function s(i,r,a){for(var n=a||[],o=0,c=r.length;o<c;o++){var l=r[o];rr(i,l)?s(i,l.value,n):n.push(l)}return n}(e,t))}var ar=function(e){return e},Os=function(){return Object.create(null)},Cs=Object.defineProperty(Os(),"__@type@__",{value:"ignore value"});function nr(e,t,s){if(s===void 0&&(s=!1),!e||e&&e.constructor!==Object)return!1;for(var i in e)if(tt(e,i)&&tt(t,i)&&(!s||e[i]!==Cs))return!0;return!1}function or(e){var t=[];for(var s in e)tt(e,s)&&e[s]!==Cs&&t.push(s);return t}function Qe(e,t){t!==Is&&e.push(t)}var Ts=function(e){return Ss("and",e)},$s={compound:function(e,t,s){var i=(Array.isArray(t)?t:[t]).map(function(r){return s.parse(r)});return new Ne(e.name,i)},field:function(e,t,s){return new qe(e.name,s.field,t)},document:function(e,t){return new pt(e.name,t)}},js=function(){function e(s,i){var r=this;i===void 0&&(i=Os()),this.i=void 0,this.o=void 0,this.u=void 0,this.s=void 0,this.h=void 0,this.parse=this.parse.bind(this),this.s={operatorToConditionName:i.operatorToConditionName||ar,defaultOperatorName:i.defaultOperatorName||"eq",mergeFinalConditions:i.mergeFinalConditions||Ts},this.i=Object.keys(s).reduce(function(a,n){return a[n]=ke({name:r.s.operatorToConditionName(n)},s[n]),a},{}),this.o=ke({},i.fieldContext,{field:"",query:{},parse:this.parse,hasOperators:function(a){return nr(a,r.i,i.useIgnoreValue)}}),this.u=ke({},i.documentContext,{parse:this.parse,query:{}}),this.h=i.useIgnoreValue?or:Object.keys}var t=e.prototype;return t.setParse=function(s){this.parse=s,this.o.parse=s,this.u.parse=s},t.parseField=function(s,i,r,a){var n=this.i[i];if(!n)throw new Error('Unsupported operator "'+i+'"');if(n.type!=="field")throw new Error("Unexpected "+n.type+' operator "'+i+'" at field level');return this.o.field=s,this.o.query=a,this.parseInstruction(n,r,this.o)},t.parseInstruction=function(s,i,r){return typeof s.validate=="function"&&s.validate(s,i),(s.parse||$s[s.type])(s,i,r)},t.parseFieldOperators=function(s,i){for(var r=[],a=this.h(i),n=0,o=a.length;n<o;n++){var c=a[n];if(!this.i[c])throw new Error('Field query for "'+s+'" may contain only operators or a plain object as a value');Qe(r,this.parseField(s,c,i[c],i))}return r},t.parse=function(s){var i=[],r=this.h(s);this.u.query=s;for(var a=0,n=r.length;a<n;a++){var o=r[a],c=s[o],l=this.i[o];if(l){if(l.type!=="document"&&l.type!=="compound")throw new Error('Cannot use parsing instruction for operator "'+o+'" in "document" context as it is supposed to be used in  "'+l.type+'" context');Qe(i,this.parseInstruction(l,c,this.u))}else this.o.hasOperators(c)?i.push.apply(i,this.parseFieldOperators(o,c)):Qe(i,this.parseField(o,this.s.defaultOperatorName,c,s))}return this.s.mergeFinalConditions(i)},e}();function Je(e,t){var s=e[t];if(typeof s!="function")throw new Error('Unable to interpret "'+t+'" condition. Did you forget to register interpreter for it?');return s}function cr(e){return e.operator}function lr(e,t){var s,i=t,r=i&&i.getInterpreterName||cr;switch(i?i.numberOfArguments:0){case 1:s=function(n){var o=r(n,i);return Je(e,o)(n,a)};break;case 3:s=function(n,o,c){var l=r(n,i);return Je(e,l)(n,o,c,a)};break;default:s=function(n,o){var c=r(n,i);return Je(e,c)(n,o,a)}}var a=ke({},i,{interpret:s});return a.interpret}function ur(e,t){return function(s){for(var i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];var n=e.apply(void 0,[s].concat(r)),o=t.bind(null,n);return o.ast=n,o}}js.prototype.parseInstruction;function Rs(e,t){if(!Array.isArray(t))throw new Error('"'+e.name+'" expects value to be an array')}function Ds(e,t){if(Rs(e,t),!t.length)throw new Error('"'+e.name+'" expects to have at least one element in array')}var mt=function(e){return function(t,s){if(typeof s!==e)throw new Error('"'+t.name+'" expects value to be a "'+e+'"')}},Ps={type:"compound",validate:Ds,parse:function(e,t,s){var i=s.parse,r=t.map(function(a){return i(a)});return Ss(e.name,r)}},fr=Ps,dr={type:"compound",validate:Ds},hr={type:"field",validate:function(e,t){if(!(t&&(t instanceof RegExp||t.constructor===Object)))throw new Error('"'+e.name+'" expects to receive either regular expression or object of field operators')},parse:function(e,t,s){var i=t instanceof RegExp?new qe("regex",s.field,t):s.parse(t,s);return new Ne(e.name,[i])}},Es={type:"field",validate:function(e,t){if(!t||t.constructor!==Object)throw new Error('"'+e.name+'" expects to receive an object with nested query or field level operators')},parse:function(e,t,s){var i=s.parse,r=s.field,a=(0,s.hasOperators)(t)?i(t,{field:Se}):i(t);return new qe(e.name,r,a)}},Fs={type:"field",validate:mt("number")},_e={type:"field",validate:Rs},Ns=_e,qs=_e,pr={type:"field",validate:function(e,t){if(!Array.isArray(t)||t.length!==2)throw new Error('"'+e.name+'" expects an array with 2 numeric elements')}},_s={type:"field",validate:mt("boolean")},gt={type:"field",validate:function(e,t){if(!(typeof t=="string"||typeof t=="number"||t instanceof Date))throw new Error('"'+e.name+'" expects value to be comparable (i.e., string, number or date)')}},Me=gt,Ms=Me,Ls=Me,vt={type:"field"},Us=vt,Bs={type:"field",validate:function(e,t){if(!(t instanceof RegExp)&&typeof t!="string")throw new Error('"'+e.name+'" expects value to be a regular expression or a string that represents regular expression')},parse:function(e,t,s){var i=typeof t=="string"?new RegExp(t,s.query.$options||""):t;return new qe(e.name,s.field,i)}},Ys={type:"field",parse:function(){return Is}},mr={type:"document",validate:mt("function")},gr=Object.freeze({__proto__:null,$and:Ps,$or:fr,$nor:dr,$not:hr,$elemMatch:Es,$size:Fs,$in:_e,$nin:Ns,$all:qs,$mod:pr,$exists:_s,$gte:gt,$gt:Me,$lt:Ms,$lte:Ls,$eq:vt,$ne:Us,$regex:Bs,$options:Ys,$where:mr}),vr=function(e){var t,s;function i(r){return e.call(this,r,{defaultOperatorName:"$eq",operatorToConditionName:function(a){return a.slice(1)}})||this}return s=e,(t=i).prototype=Object.create(s.prototype),t.prototype.constructor=t,t.__proto__=s,i.prototype.parse=function(r,a){return a&&a.field?Ts(this.parseFieldOperators(a.field,r)):e.prototype.parse.call(this,r)},i}(js),st=gr;function yt(e,t,s){for(var i=0,r=e.length;i<r;i++)if(s(e[i],t)===0)return!0;return!1}function bt(e,t){return Array.isArray(e)&&Number.isNaN(Number(t))}function _t(e,t,s){if(!bt(e,t))return s(e,t);for(var i=[],r=0;r<e.length;r++){var a=s(e[r],t);a!==void 0&&(i=i.concat(a))}return i}function re(e){return function(t,s,i){var r=i.get(s,t.field);return Array.isArray(r)?r.some(function(a){return e(t,a,i)}):e(t,r,i)}}function xt(){return(xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e}).apply(this,arguments)}var yr=function(e,t){return e[t]};function Ks(e,t,s){var i=t.lastIndexOf(".");return i===-1?[e,t]:[s(e,t.slice(0,i)),t.slice(i+1)]}function br(e,t,s){if(s===void 0&&(s=yr),t===Se)return e;if(!e)throw new Error('Unable to get field "'+t+'" out of '+String(e)+".");return function(i,r,a){if(r.indexOf(".")===-1)return _t(i,r,a);for(var n=r.split("."),o=i,c=0,l=n.length;c<l;c++)if(!(o=_t(o,n[c],a))||typeof o!="object")return o;return o}(e,t,s)}function Xs(e,t){return e===t?0:e>t?1:-1}function Hs(e,t){return t===void 0&&(t={}),lr(e,xt({get:br,compare:Xs},t))}var zs=function(e,t,s){var i=s.interpret;return e.value.some(function(r){return i(r,t)})},xr=function(e,t,s){return!zs(e,t,s)},Qs=function(e,t,s){var i=s.interpret;return e.value.every(function(r){return i(r,t)})},wr=function(e,t,s){return!(0,s.interpret)(e.value[0],t)},wt=function(e,t,s){var i=s.compare,r=(0,s.get)(t,e.field);return Array.isArray(r)&&!Array.isArray(e.value)?yt(r,e.value,i):i(r,e.value)===0},Js=function(e,t,s){return!wt(e,t,s)},Vs=re(function(e,t,s){var i=s.compare(t,e.value);return i===0||i===-1}),Gs=re(function(e,t,s){return s.compare(t,e.value)===-1}),Ws=re(function(e,t,s){return s.compare(t,e.value)===1}),Zs=re(function(e,t,s){var i=s.compare(t,e.value);return i===0||i===1}),ei=function(e,t,s){var i=s.get;if(e.field===Se)return t!==void 0;var r=Ks(t,e.field,i),a=r[0],n=r[1],o=function(c){return!!c&&c.hasOwnProperty(n)===e.value};return bt(a,n)?a.some(o):o(a)},Ar=re(function(e,t){return typeof t=="number"&&t%e.value[0]===e.value[1]}),ti=function(e,t,s){var i=s.get,r=Ks(t,e.field,i),a=r[0],n=r[1],o=function(c){var l=i(c,n);return Array.isArray(l)&&l.length===e.value};return e.field!==Se&&bt(a,n)?a.some(o):o(a)},si=re(function(e,t){return typeof t=="string"&&e.value.test(t)}),Pe=re(function(e,t,s){var i=s.compare;return yt(e.value,t,i)}),ii=function(e,t,s){return!Pe(e,t,s)},ri=function(e,t,s){var i=s.compare,r=(0,s.get)(t,e.field);return Array.isArray(r)&&e.value.every(function(a){return yt(r,a,i)})},ai=function(e,t,s){var i=s.interpret,r=(0,s.get)(t,e.field);return Array.isArray(r)&&r.some(function(a){return i(e.value,a)})},kr=function(e,t){return e.value.call(t)},At=xt({},Object.freeze({__proto__:null,or:zs,nor:xr,and:Qs,not:wr,eq:wt,ne:Js,lte:Vs,lt:Gs,gt:Ws,gte:Zs,exists:ei,mod:Ar,size:ti,regex:si,within:Pe,nin:ii,all:ri,elemMatch:ai,where:kr}),{in:Pe});Hs(At);function Ie(){return(Ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e}).apply(this,arguments)}function Mt(e){return e instanceof Date?e.getTime():e&&typeof e.toJSON=="function"?e.toJSON():e}var Ir=function(e,t){return Xs(Mt(e),Mt(t))};function kt(e,t,s){var i=new vr(e),r=Hs(t,Ie({compare:Ir},s));if(s&&s.forPrimitives){var a={field:Se},n=i.parse;i.setParse(function(o){return n(o,a)})}return ur(i.parse,r)}kt(st,At);kt(["$and","$or"].reduce(function(e,t){return e[t]=Ie({},e[t],{type:"field"}),e},Ie({},st,{$nor:Ie({},st.$nor,{type:"field",parse:$s.compound})})),At,{forPrimitives:!0});function Lt(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ni(e,t,s){return t&&Lt(e.prototype,t),s&&Lt(e,s),e}function it(){return it=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},it.apply(this,arguments)}function It(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,rt(e,t)}function rt(e,t){return rt=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},rt(e,t)}function Sr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function at(e){return Array.isArray(e)?e:[e]}var oi=Object.hasOwn||Object.prototype.hasOwnProperty.call.bind(Object.prototype.hasOwnProperty),le="__caslSubjectType__";function Ed(e,t){if(t){if(!oi(t,le))Object.defineProperty(t,le,{value:e});else if(e!==t[le])throw new Error("Trying to cast object to subject type "+e+" but previously it was casted to "+t[le])}return t}var nt=function(t){var s=typeof t;return s==="string"||s==="function"},ci=function(t){return t.modelName||t.name},Or=function(t){return typeof t=="string"?t:ci(t)};function Cr(e){return oi(e,le)?e[le]:ci(e.constructor)}function Ut(e,t,s){for(var i=s;i<t.length;i++)e.push(t[i])}function Bt(e,t){if(!e||!e.length)return t||[];if(!t||!t.length)return e||[];for(var s=0,i=0,r=[];s<e.length&&i<t.length;)e[s].priority<t[i].priority?(r.push(e[s]),s++):(r.push(t[i]),i++);return Ut(r,e,s),Ut(r,t,i),r}function Ce(e,t,s){var i=e.get(t);return i||(i=s(),e.set(t,i)),i}var Tr=function(t){return t};function $r(e,t){if(Array.isArray(e.fields)&&!e.fields.length)throw new Error("`rawRule.fields` cannot be an empty array. https://bit.ly/390miLa");if(e.fields&&!t.fieldMatcher)throw new Error('You need to pass "fieldMatcher" option in order to restrict access by fields');if(e.conditions&&!t.conditionsMatcher)throw new Error('You need to pass "conditionsMatcher" option in order to restrict access by conditions')}var jr=function(){function e(s,i,r){r===void 0&&(r=0),$r(s,i),this.action=i.resolveAction(s.action),this.subject=s.subject,this.inverted=!!s.inverted,this.conditions=s.conditions,this.reason=s.reason,this.fields=s.fields?at(s.fields):void 0,this.priority=r,this.t=i}var t=e.prototype;return t.i=function(){return this.conditions&&!this.u&&(this.u=this.t.conditionsMatcher(this.conditions)),this.u},t.matchesConditions=function(i){if(!this.conditions)return!0;if(!i||nt(i))return!this.inverted;var r=this.i();return r(i)},t.matchesField=function(i){return this.fields?i?(this.fields&&!this.o&&(this.o=this.t.fieldMatcher(this.fields)),this.o(i)):!this.inverted:!0},ni(e,[{key:"ast",get:function(){var i=this.i();return i?i.ast:void 0}}]),e}();function Rr(e,t){var s={value:e,prev:t,next:null};return t&&(t.next=s),s}function Dr(e){e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next),e.next=e.prev=null}var Pr=function(t){return{value:t.value,prev:t.prev,next:t.next}},Yt=function(){return{rules:[],merged:!1}},Kt=function(){return new Map},Er=function(t,s){!t.h&&s.fields&&(t.h=!0)},Fr=function(){function e(s,i){s===void 0&&(s=[]),i===void 0&&(i={}),this.h=!1,this.v=new Map,this.l={conditionsMatcher:i.conditionsMatcher,fieldMatcher:i.fieldMatcher,resolveAction:i.resolveAction||Tr},this.p=i.anyAction||"manage",this.g=i.anySubjectType||"all",this.A=i.detectSubjectType||Cr,this.j=s,this.$=this.M(s)}var t=e.prototype;return t.detectSubjectType=function(i){return nt(i)?i:i?this.A(i):this.g},t.update=function(i){var r={rules:i,ability:this,target:this};return this.m("update",r),this.j=i,this.$=this.M(i),this.m("updated",r),this},t.M=function(i){for(var r=new Map,a=i.length-1;a>=0;a--){var n=i.length-a-1,o=new jr(i[a],this.l,n),c=at(o.action),l=at(o.subject||this.g);Er(this,o);for(var h=0;h<l.length;h++)for(var b=Ce(r,l[h],Kt),w=0;w<c.length;w++)Ce(b,c[w],Yt).rules.push(o)}return r},t.possibleRulesFor=function(i,r){if(r===void 0&&(r=this.g),!nt(r))throw new Error('"possibleRulesFor" accepts only subject types (i.e., string or class) as the 2nd parameter');var a=Ce(this.$,r,Kt),n=Ce(a,i,Yt);if(n.merged)return n.rules;var o=i!==this.p&&a.has(this.p)?a.get(this.p).rules:void 0,c=Bt(n.rules,o);return r!==this.g&&(c=Bt(c,this.possibleRulesFor(i,this.g))),n.rules=c,n.merged=!0,c},t.rulesFor=function(i,r,a){var n=this.possibleRulesFor(i,r);if(a&&typeof a!="string")throw new Error("The 3rd, `field` parameter is expected to be a string. See https://stalniy.github.io/casl/en/api/casl-ability#can-of-pure-ability for details");return this.h?n.filter(function(o){return o.matchesField(a)}):n},t.on=function(i,r){var a=this,n=this.v.get(i)||null,o=Rr(r,n);return this.v.set(i,o),function(){var c=a.v.get(i);!o.next&&!o.prev&&c===o?a.v.delete(i):o===c&&a.v.set(i,o.prev),Dr(o)}},t.m=function(i,r){for(var a=this.v.get(i)||null;a!==null;){var n=a.prev?Pr(a.prev):null;a.value(r),a=n}},ni(e,[{key:"rules",get:function(){return this.j}}]),e}(),Nr=function(e){It(t,e);function t(){return e.apply(this,arguments)||this}var s=t.prototype;return s.can=function(r,a,n){var o=this.relevantRuleFor(r,a,n);return!!o&&!o.inverted},s.relevantRuleFor=function(r,a,n){for(var o=this.detectSubjectType(a),c=this.rulesFor(r,o,n),l=0,h=c.length;l<h;l++)if(c[l].matchesConditions(a))return c[l];return null},s.cannot=function(r,a,n){return!this.can(r,a,n)},t}(Fr),qr={$eq:vt,$ne:Us,$lt:Ms,$lte:Ls,$gt:Me,$gte:gt,$in:_e,$nin:Ns,$all:qs,$size:Fs,$regex:Bs,$options:Ys,$elemMatch:Es,$exists:_s},_r={eq:wt,ne:Js,lt:Gs,lte:Vs,gt:Ws,gte:Zs,in:Pe,nin:ii,all:ri,size:ti,regex:si,elemMatch:ai,exists:ei,and:Qs},Mr=kt(qr,_r),Lr=/[-/\\^$+?.()|[\]{}]/g,Ur=/\.?\*+\.?/g,Br=/\*+/,Yr=/\./g;function Kr(e,t,s){var i=s[0]==="*"||e[0]==="."&&e[e.length-1]==="."?"+":"*",r=e.indexOf("**")===-1?"[^.]":".",a=e.replace(Yr,"\\$&").replace(Br,r+i);return t+e.length===s.length?"(?:"+a+")?":a}function Xr(e,t,s){return e==="."&&(s[t-1]==="*"||s[t+1]==="*")?e:"\\"+e}function Hr(e){var t=e.map(function(i){return i.replace(Lr,Xr).replace(Ur,Kr)}),s=t.length>1?"(?:"+t.join("|")+")":t[0];return new RegExp("^"+s+"$")}var zr=function(t){var s;return function(i){return typeof s=="undefined"&&(s=t.every(function(r){return r.indexOf("*")===-1})?null:Hr(t)),s===null?t.indexOf(i)!==-1:s.test(i)}},Qr=function(e){It(t,e);function t(s,i){return s===void 0&&(s=[]),i===void 0&&(i={}),e.call(this,s,it({conditionsMatcher:Mr,fieldMatcher:zr},i))||this}return t}(Nr),Jr=function(t){return'Cannot execute "'+t.action+'" on "'+t.subjectType+'"'},li=function(t){this.message=t};li.prototype=Object.create(Error.prototype);var Vr=function(e){It(t,e),t.setDefaultMessage=function(r){this._=typeof r=="string"?function(){return r}:r},t.from=function(r){return new this(r)};function t(i){var r;return r=e.call(this,"")||this,r.ability=i,typeof Error.captureStackTrace=="function"&&(r.name="ForbiddenError",Error.captureStackTrace(Sr(r),r.constructor)),r}var s=t.prototype;return s.setMessage=function(r){return this.message=r,this},s.throwUnlessCan=function(r,a,n){var o=this.unlessCan(r,a,n);if(o)throw o},s.unlessCan=function(r,a,n){var o=this.ability.relevantRuleFor(r,a,n);if(!(o&&!o.inverted)){this.action=r,this.subject=a,this.subjectType=Or(this.ability.detectSubjectType(a)),this.field=n;var c=o?o.reason:"";return this.message=this.message||c||this.constructor._(this),this}},t}(li);Vr._=Jr;Object.freeze({__proto__:null});var ot=[{action:"read",subject:"auth"},{action:"read",subject:"open"}];const Gr=new Qr(ot);var ue=Gr;const M=J("app",{state:()=>({title:I.toolbarTitle,lang:null,checkIn:I.pageType==="Candidate"||I.pageType==="Candidate Kiosk",checkInData:{},pageType:I.pageType,userType:I.userType,menu:I.userType==="Candidate"?Zi:I.userType==="Project User"?er:I.userType==="QuickBase User"?tr:[],startPage:I.startPage,version:I.version,homeButton:I.homeButton,event:null,kioskActive:!1,country:I.country}),getters:{appVersion:e=>e.version,toolbarTitle:e=>e.title,currentPageType:e=>e.pageType,currentUserType:e=>e.userType,inHiringCenter:e=>e.checkInData[15]?e.checkInData[15]==="Waiting":!1,checkedIn:e=>e.checkInData[15]?e.checkInData[15]==="Waiting":!1,checkedInStatus:e=>e.checkInData[15]||null,onKiosk(){return this.currentPageType==="Candidate Kiosk"},currentLang:e=>e.lang,startPageEnabled:e=>e.startPage,homeButtonEnabled:e=>e.homeButton,activeMenu(){const{hiringCenterAvailable:e}=z();return this.menu.filter(s=>{let i=!0,r=!0;if(ue.can(s.action||"read",s.resource)){let a=ue.possibleRulesFor(s.action||"read",s.resource)[0].conditions;return a&&(a.userType&&(i=a.userType===this.currentUserType,i||(r=!1)),a.accept&&(i=a.accept.find(n=>n==="checkedIn"&&this.checkedIn||n==="kiosk"&&this.onKiosk?!0:!!(n==="office"&&e)),i||(r=!1)),a.deny&&(i=a.deny.filter(n=>n==="checkedIn"&&this.checkedIn||n==="kiosk"&&this.onKiosk?!0:!!(n==="office"&&e)).length===0,i||(r=!1))),r}else return!1})},viewEmployeeMenu(){return sr.filter(t=>{let s=!0,i=!0;if(ue.can(t.action||"read",t.resource)){let r=ue.possibleRulesFor(t.action||"read",t.resource)[0].conditions;return r&&r.userType&&(s=r.userType===this.currentUserType,s||(i=!1)),i}else return!1})},currentEvent:e=>e.event,getCountry:e=>e.country},actions:{setCheckInData(e){const{setHiringCenter:t}=z();this.checkInData=e,y.setItem(I.storageCheckInKeyName,e),this.currentPageType==="Candidate"&&e[15]==="Waiting"&&t(e.office,!0)},openWindow(e,t){(t.fullScreen===null||t.fullScreen===void 0)&&(t.fullScreen=!0),t.name==="Full Profile"&&!t.height&&(t.height=775),t.width=t.width?t.width:screen.availWidth&&t.fullScreen?screen.availWidth:1450,t.height=t.height?t.height:screen.availHeight&&t.fullScreen?screen.availHeight:700;const s=window.top.outerHeight/2+window.top.screenY-t.height/2,i=window.top.outerWidth/2+window.top.screenX-t.width/2;`${t.width}`,`${t.height}`,t.fullScreen,Wi(t.url,null,{width:t.width,height:t.height,top:s,left:i,popup:!0,fullscreen:t.fullScreen||!0,menubar:!1,toolbar:!1})},async addTaskToCheckin({task:e,reason:t,active:s}){const i={3:{value:this.checkInData[3]},10:{value:t},27:{value:e}};s&&Object.assign(i,{36:{value:!0}});const{data:r}=await x.upsertRecordsXML({to:"br26nivmr",data:[i],fieldsToReturn:[31],formatObject:31});if(r[0])return this.checkInData=r[0][31],this.checkInData;throw"Something went wrong"},setLang(e){this.lang=e},setEvent(e,t){this.event=e,t&&y.setItem(I.storageEvent,e),e||y.removeItem(I.storageEvent)},setKioskActive(e){this.kioskActive=e},setStartPage(e,t){this.startPage=e,t&&y.setItem(I.storageStartPage,e),e||y.removeItem(I.storageStartPage)},setHomeButton(e,t){this.homeButton=e,t&&y.setItem(I.storageHomeButton,e),e||y.removeItem(I.storageHomeButton)},setCountry(e){this.country=e}}}),ce=J("dataStore",{state:()=>({queryBy:"office",selectedOffice:null,selectedProject:null,selfCheckIns:{isLoading:!1},profiles:{isLoading:!1},scheduledInterviews:{isLoading:!1},inProcessInterviews:{isLoading:!1},inProcess:{isLoading:!1},pending:{isLoading:!1},deployments:{isLoading:!1},openRequest:{isLoading:!1},pendingRequest:{isLoading:!1},closedRequest:{isLoading:!1},openClassifications:{isLoading:!1},pendingClassifications:{isLoading:!1},closedClassifications:{isLoading:!1},nameRequest:{isLoading:!1},projects:{isLoading:!1},pendingProjects:{isLoading:!1},releases:{isLoading:!1},jobPost:{isLoading:!1},onlineApplications:{isLoading:!1},requestedTimeStamps:{}}),getters:{getSelfCheckIns:e=>t=>{if(t)return e.selfCheckIns[t]?e.selfCheckIns[t]:[];{let s=[];return Object.keys(e.selfCheckIns).forEach(i=>{i!=="isLoading"&&(s=s.concat(e.selfCheckIns[i]))}),s}},getProfiles:e=>t=>{if(t)return e.profiles[t]?e.profiles[t]:[];{let s=[];return Object.keys(e.profiles).forEach(i=>{i!=="isLoading"&&(s=s.concat(e.profiles[i]))}),s}},getScheduledInterviews:e=>t=>{if(t)return e.scheduledInterviews[t]?e.scheduledInterviews[t]:[];{let s=[];return Object.keys(e.scheduledInterviews).forEach(i=>{i!=="isLoading"&&(s=s.concat(e.scheduledInterviews[i]))}),s}},getInProcessInterviews:e=>t=>{if(t)return e.inProcessInterviews[t]?e.inProcessInterviews[t]:[];{let s=[];return Object.keys(e.inProcessInterviews).forEach(i=>{i!=="isLoading"&&(s=s.concat(e.inProcessInterviews[i]))}),s}},getInProcess:e=>t=>{if(t)return e.inProcess[t]?e.inProcess[t]:[];{let s=[];return Object.keys(e.inProcess).forEach(i=>{i!=="isLoading"&&(s=s.concat(e.inProcess[i]))}),s}},getPending:e=>t=>{if(t)return e.pending[t]?e.pending[t]:[];{let s=[];return Object.keys(e.pending).forEach(i=>{i!=="isLoading"&&(s=s.concat(e.pending[i]))}),s}},getDeployments:e=>t=>{if(t)return e.deployments[t]?e.deployments[t]:[];{let s=[];return Object.keys(e.deployments).forEach(i=>{i!=="isLoading"&&(s=s.concat(e.deployments[i]))}),s}},getProjects:e=>({selectedId:t,can:s,userType:i})=>{if(!t&&!s){let r=[];return Object.keys(e.projects).forEach(a=>{a!=="isLoading"&&(r=r.concat(e.projects[a]))}),r}else if(!t&&s&&i==="QuickBase User"){const{userOffices:r}=T();let a=[];return r(s).forEach(n=>{a=a.concat(e.projects[n[8]])}),a}else if(t&&s&&i==="QuickBase User"){const{getOffice:r}=T(),a=r(t);return s==="read"&&a&&a[39]!==!0?[]:(s==="create"||s==="update")&&a&&a[40]!==!0?[]:s==="manage"&&a&&a[41]!==!0?[]:e.projects[t]?e.projects[t]:[]}else if(!t&&s&&i==="Project User"){let r=[];return Object.keys(e.projects).forEach(a=>{a!=="isLoading"&&(r=r.concat(e.projects[a]))}),r}else return e.projects[t]?e.projects[t]:[]},getPendingProjects:e=>t=>{if(t)return e.pendingProjects[t]?e.pendingProjects[t]:[];{let s=[];return Object.keys(e.pendingProjects).forEach(i=>{i!=="isLoading"&&(s=s.concat(e.pendingProjects[i]))}),s}},getRequestedTimeStamps(e){return e.requestedTimeStamps},getSelectedOffice(e){return e.selectedOffice},getSelectedProject(e){return e.selectedProject},getReleases:e=>t=>{if(t)return e.releases[t]?e.releases[t]:[];{let s=[];return Object.keys(e.releases).forEach(i=>{i!=="isLoading"&&(s=s.concat(e.releases[i]))}),s}},getJobPost:e=>t=>{if(t)return e.jobPost[t]?e.jobPost[t]:[];{let s=[];return Object.keys(e.jobPost).forEach(i=>{i!=="isLoading"&&(s=s.concat(e.jobPost[i]))}),s}},getOnlineApplications:e=>t=>{if(t)return e.onlineApplications[t]?e.onlineApplications[t]:[];{let s=[];return Object.keys(e.onlineApplications).forEach(i=>{i!=="isLoading"&&(s=s.concat(e.onlineApplications[i]))}),s}},getLoadingState:e=>t=>e[`${t}`].isLoading||!1},actions:{setQueryBy(e){this.queryBy=e},setSelectedOffice(e,t){this.selectedOffice=e},setSelectedProject(e,t){this.selectedProject=e},setTimeStamp({name:e,timeStamp:t,selectedId:s},i){if(this.requestedTimeStamps[s]?this.requestedTimeStamps[s][e]=t:this.requestedTimeStamps[s]={[e]:t},i){const r=JSON.parse(JSON.stringify(this.requestedTimeStamps));K.setItem("requestedTimeStamps",r)}},setTimeStampState(e){this.requestedTimeStamps=e},async fetchSelfCheckIns(e){this.selfCheckIns.isLoading=!0;const t=this.getRequestedTimeStamps[e.selectedId]||{};let s=!0;const i=[{9:{value:e.selectedId},7:{value:"Self Check-Ins"}}];if(t.selfCheckIns&&(t.selfCheckIns.isBefore(d().subtract(1,"minute"))?s=!0:s=e.refresh?e.refresh:!1),s){this.setTimeStamp({selectedId:e.selectedId,name:"selfCheckIns",timeStamp:d()},!0);const{data:r}=await x.fetchFromRecruitingApp({fields:i});return this.setSelfCheckIns({selectedId:e.selectedId,data:r},!0),this.selfCheckIns.isLoading=!1,{data:r}}else return this.selfCheckIns.isLoading=!1,{data:[]}},async fetchAllSelfCheckIns(e){const{userOffices:t}=T(),s=[];return t(e?e.can:null).forEach(r=>{let a=this.fetchSelfCheckIns(U(j({},e),{selectedId:r[8]}));s.push(a)}),await Promise.allSettled(s)},setSelfCheckIns({selectedId:e,data:t},s){this.selfCheckIns[e]=t,s&&K.setItem(`selfCheckIns_${e}`,t)},async fetchProfiles(e){this.profiles.isLoading=!0;const t=this.getRequestedTimeStamps[e.selectedId]||{};let s=!0;const i=[{9:{value:e.selectedId},7:{value:"Employees"}}];if(t.profiles&&(t.profiles.isBefore(d().subtract(1,"minute"))?s=!0:s=e.refresh?e.refresh:!1),s){this.setTimeStamp({selectedId:e.selectedId,name:"profiles",timeStamp:d()},!0);const{data:r}=await x.fetchFromHiringApp({fields:i});return this.setProfiles({selectedId:e.selectedId,data:r},!0),this.profiles.isLoading=!1,{data:r}}else return this.profiles.isLoading=!1,{data:[]}},async fetchAllProfiles(e){const{userOffices:t}=T(),s=[];return t(e?e.can:null).forEach(r=>{let a=this.fetchProfiles(U(j({},e),{selectedId:r[8]}));s.push(a)}),await Promise.allSettled(s)},setProfiles({selectedId:e,data:t},s){this.profiles[e]=t,s&&K.setItem(`profiles_${e}`,t)},async fetchScheduledInterviews(e){this.scheduledInterviews.isLoading=!0;const t=this.getRequestedTimeStamps[e.selectedId]||{};let s=!0;const i=[{9:{value:e.selectedId},7:{value:"Scheduled Interviews"}}];if(t.scheduledInterviews&&(t.scheduledInterviews.isBefore(d().subtract(1,"minute"))?s=!0:s=e.refresh?e.refresh:!1),s){this.setTimeStamp({selectedId:e.selectedId,name:"scheduledInterviews",timeStamp:d()},!0);const{data:r}=await x.fetchFromHiringApp({fields:i});return this.setScheduledInterviews({selectedId:e.selectedId,data:r},!0),this.scheduledInterviews.isLoading=!1,{data:r}}else return this.scheduledInterviews.isLoading=!1,{data:[]}},async fetchAllScheduledInterviews(e){const{userOffices:t}=T(),s=[];return t(e?e.can:null).forEach(r=>{let a=this.fetchScheduledInterviews(U(j({},e),{selectedId:r[8]}));s.push(a)}),await Promise.allSettled(s)},setScheduledInterviews({selectedId:e,data:t},s){this.scheduledInterviews[e]=t,s&&K.setItem(`interviews_${e}`,t)},async fetchInProcessInterviews(e){this.inProcessInterviews.isLoading=!0;const t=this.getRequestedTimeStamps[e.selectedId]||{};let s=!0;const i=[{9:{value:e.selectedId},7:{value:"In Process Interviews"}}];if(t.inProcessInterviews&&(t.inProcessInterviews.isBefore(d().subtract(1,"minute"))?s=!0:s=e.refresh?e.refresh:!1),s){this.setTimeStamp({selectedId:e.selectedId,name:"inProcessInterviews",timeStamp:d()},!0);const{data:r}=await x.fetchFromHiringApp({fields:i});return this.setInProcessInterviews({selectedId:e.selectedId,data:r},!0),this.inProcessInterviews.isLoading=!1,{data:r}}else return this.inProcessInterviews.isLoading=!1,{data:[]}},async fetchAllInProcessInterviews(e){const{userOffices:t}=T(),s=[];return t(e?e.can:null).forEach(r=>{let a=this.fetchInProcessInterviews(U(j({},e),{selectedId:r[8]}));s.push(a)}),await Promise.allSettled(s)},setInProcessInterviews({selectedId:e,data:t},s){this.inProcessInterviews[e]=t,s&&K.setItem(`interviews_${e}`,t)},async fetchInProcess(e){this.inProcess.isLoading=!0;const t=this.getRequestedTimeStamps[e.selectedId]||{};let s=!0;const i=[{9:{value:e.selectedId},7:{value:"In Processes"}}];if(t.inProcess&&(t.inProcess.isBefore(d().subtract(1,"minute"))?s=!0:s=e.refresh?e.refresh:!1),s){this.setTimeStamp({selectedId:e.selectedId,name:"inProcess",timeStamp:d()},!0);const{data:r}=await x.fetchFromHiringApp({fields:i});return this.setInProcess({selectedId:e.selectedId,data:r},!0),this.inProcess.isLoading=!1,{data:r}}else return this.inProcess.isLoading=!1,{data:[]}},async fetchAllInProcess(e){const{userOffices:t}=T(),s=[];return t(e?e.can:null).forEach(r=>{let a=this.fetchInProcess(U(j({},e),{selectedId:r[8]}));s.push(a)}),await Promise.allSettled(s)},setInProcess({selectedId:e,data:t},s){this.inProcess[e]=t,s&&K.setItem(`inProcess_${e}`,t)},async fetchPending(e){this.pending.isLoading=!0;const t=this.getRequestedTimeStamps[e.selectedId]||{};let s=!0;const i=[{9:{value:e.selectedId},7:{value:"Dispatches"}}];if(t.pending&&(t.pending.isBefore(d().subtract(1,"minute"))?s=!0:s=e.refresh?e.refresh:!1),s){this.setTimeStamp({selectedId:e.selectedId,name:"pending",timeStamp:d()},!0);const{data:r}=await x.fetchFromHiringApp({fields:i});return this.setPending({selectedId:e.selectedId,data:r},!0),this.pending.isLoading=!1,{data:r}}else return this.pending.isLoading=!1,{data:[]}},async fetchAllPending(e){const{userOffices:t}=T(),s=[];return t(e?e.can:null).forEach(r=>{let a=this.fetchPending(U(j({},e),{selectedId:r[8]}));s.push(a)}),await Promise.allSettled(s)},setPending({selectedId:e,data:t},s){this.pending[e]=t,s&&K.setItem(`pending_${e}`,t)},async fetchOpenRequest(e){this.openRequest.isLoading=!0;const t=this.getRequestedTimeStamps[e.selectedId]||{};let s=!0;const i=[{9:{value:e.selectedId},7:{value:"Open Request"}}];if(t.openRequest&&(t.openRequest.isBefore(d().subtract(1,"minute"))?s=!0:s=e.refresh?e.refresh:!1),s){this.setTimeStamp({selectedId:e.selectedId,name:"openRequest",timeStamp:d()},!0);const{data:r}=await x.fetchFromProjectsApp({fields:i});return this.setOpenRequest({selectedId:e.selectedId,data:r},!0),this.openRequest.isLoading=!1,{data:r}}else return this.openRequest.isLoading=!1,{data:[]}},async fetchAllOpenRequest(e){const{userOffices:t}=T(),s=[];return t(e?e.can:null).forEach(r=>{let a=this.fetchOpenRequest(U(j({},e),{selectedId:r[8]}));s.push(a)}),await Promise.allSettled(s)},setOpenRequest({selectedId:e,data:t},s){this.openRequest[e]=t,s&&K.setItem(`openRequest_${e}`,t)},async fetchPendingRequest(e){this.pendingRequest.isLoading=!0;const t=this.getRequestedTimeStamps[e.selectedId]||{};let s=!0;const i=[{9:{value:e.selectedId},7:{value:"Pending Request"}}];if(t.pendingRequest&&(t.pendingRequest.isBefore(d().subtract(1,"minute"))?s=!0:s=e.refresh?e.refresh:!1),s){this.setTimeStamp({selectedId:e.selectedId,name:"pendingRequest",timeStamp:d()},!0);const{data:r}=await x.fetchFromProjectsApp({fields:i});return this.setPendingRequest({selectedId:e.selectedId,data:r},!0),this.pendingRequest.isLoading=!1,{data:r}}else return this.pendingRequest.isLoading=!1,{data:[]}},async fetchAllPendingRequest(e){const{userOffices:t}=T(),s=[];return t(e?e.can:null).forEach(r=>{let a=this.fetchPendingRequest(U(j({},e),{selectedId:r[8]}));s.push(a)}),await Promise.allSettled(s)},setPendingRequest({selectedId:e,data:t},s){this.pendingRequest[e]=t,s&&K.setItem(`pendingRequest_${e}`,t)},async fetchProjects(e){const{getOffice:t,getUserType:s}=T();this.projects.isLoading=!0;const i=this.getRequestedTimeStamps[e.selectedId]||{};let r=!0,a=1;if(e&&e.can&&s==="QuickBase User"){const o=t(e.selectedId);if(e.can==="read"&&o&&o[39]!==!0)return{data:[]};if((e.can==="create"||e.can==="update")&&o&&o[40]!==!0)return{data:[]};if(e.can==="manage"&&o&&o[41]!==!0)return{data:[]}}e.extendTime&&(a=e.extendTime);const n=[];if(s==="QuickBase User")n.push({9:{value:e.selectedId},7:{value:"Projects"}});else if(s==="Project User"){let o="";e.projects&&(o+=e.projects.map((c,l)=>`{'3'.EX.'${c}'}OR`).join("")),e.facilities&&(o+=e.facilities.map((c,l)=>`{'8'.EX.'${c}'}OR`).join("")),n.push({9:{value:e.selectedId},7:{value:"Projects"},8:{value:`${o?"("+o+")":""}AND{'77'.EX.'17'}AND{'21'.EX.'Complete'}`}})}if(i.projects&&(i.projects.isBefore(d().subtract(a,"minute"))?r=!0:r=e.refresh?e.refresh:!1),r){this.setTimeStamp({selectedId:e.selectedId,name:"projects",timeStamp:d()},!0);const{data:o}=await x.fetchFromProjectsApp({fields:n});return this.setProjects({selectedId:e.selectedId,data:o},!0),this.projects.isLoading=!1,{data:o}}else return this.projects.isLoading=!1,{data:[]}},async fetchAllProjects(e){const{userOffices:t,userProjects:s,getUser:i,getUserType:r,userFacilities:a}=T();if(r==="Project User"){const n=[],o=[],c=[];return s(e?e.can:null).forEach(h=>{n.push(h[9])}),a(e?e.can:null).forEach(h=>{o.push(h[31])}),(n.length>0||o.length>0)&&c.push(this.fetchProjects(U(j({},e),{selectedId:i[3],projects:n,facilities:o}))),await Promise.allSettled(c)}else if(r==="QuickBase User"){const n=[];return t(e?e.can:null).forEach(c=>{let l=this.fetchProjects(U(j({},e),{selectedId:c[8]}));n.push(l)}),await Promise.allSettled(n)}},setProjects({selectedId:e,data:t},s){e&&t&&(this.projects[e]=t),s&&e&&K.setItem(`projects_${e}`,t)},async fetchPendingProjects(e){this.pendingProjects.isLoading=!0;const t=this.getRequestedTimeStamps[e.selectedId]||{};let s=!0;const i=[{9:{value:e.selectedId},7:{value:"Pending Projects"}}];if(t.pendingProjects&&(t.pendingProjects.isBefore(d().subtract(1,"minute"))?s=!0:s=e.refresh?e.refresh:!1),s){this.setTimeStamp({selectedId:e.selectedId,name:"pendingProjects",timeStamp:d()},!0);const{data:r}=await x.fetchFromProjectsApp({fields:i});return this.setPendingProjects({selectedId:e.selectedId,data:r},!0),this.pendingProjects.isLoading=!1,{data:r}}else return this.pendingProjects.isLoading=!1,{data:[]}},async fetchAllPendingProjects(e){const{userOffices:t}=T(),s=[];return t(e?e.can:null).forEach(r=>{let a=this.fetchPendingProjects(U(j({},e),{selectedId:r[8]}));s.push(a)}),await Promise.allSettled(s)},setPendingProjects({selectedId:e,data:t},s){this.pendingProjects[e]=t,s&&K.setItem(`pendingProjects_${e}`,t)},async fetchDeployments(e){this.deployments.isLoading=!0;const t=this.getRequestedTimeStamps[e.selectedId]||{};let s=!0;const i=[{9:{value:e.selectedId},7:{value:"Deployments"}}];if(t.deployments&&(t.deployments.isBefore(d().subtract(1,"minute"))?s=!0:s=e.refresh?e.refresh:!1),s){this.setTimeStamp({selectedId:e.selectedId,name:"deployments",timeStamp:d()},!0);const{data:r}=await x.fetchFromHiringApp({fields:i});return this.setDeployments({selectedId:e.selectedId,data:r},!0),this.deployments.isLoading=!1,{data:r}}else return this.deployments.isLoading=!1,{data:[]}},async fetchAllDeployments(e){const{userOffices:t}=T(),s=[];return t(e?e.can:null).forEach(r=>{let a=this.fetchDeployments(U(j({},e),{selectedId:r[8]}));s.push(a)}),await Promise.allSettled(s)},setDeployments({selectedId:e,data:t},s){this.deployments[e]=t,s&&K.setItem(`deployments_${e}`,t)},async fetchReleases(e){this.releases.isLoading=!0;const t=this.getRequestedTimeStamps[e.selectedId]||{};let s=!0;const i=[{9:{value:e.selectedId},7:{value:"Releases"}}];if(t.releases&&(t.releases.isBefore(d().subtract(1,"minute"))?s=!0:s=e.refresh?e.refresh:!1),s){this.setTimeStamp({selectedId:e.selectedId,name:"releases",timeStamp:d()},!0);const{data:r}=await x.fetchFromHiringApp({fields:i});return this.setReleases({selectedId:e.selectedId,data:r},!0),this.releases.isLoading=!1,{data:r}}else return this.releases.isLoading=!1,{data:[]}},async fetchAllReleases(e){const{userOffices:t}=T(),s=[];return t(e?e.can:null).forEach(r=>{let a=this.fetchReleases(U(j({},e),{selectedId:r[8]}));s.push(a)}),await Promise.allSettled(s)},setReleases({selectedId:e,data:t},s){this.releases[e]=t,s&&K.setItem(`releases_${e}`,t)},async fetchJobPost(e){this.jobPost.isLoading=!0;const t=this.getRequestedTimeStamps[e.selectedId]||{};let s=!0;const i=[{9:{value:e.selectedId},7:{value:"Job Post"}}];if(t.jobPost&&(t.jobPost.isBefore(d().subtract(1,"minute"))?s=!0:s=e.refresh?e.refresh:!1),s){this.setTimeStamp({selectedId:e.selectedId,name:"jobPost",timeStamp:d()},!0);const{data:r}=await x.fetchFromRecruitingApp({fields:i});return this.setJobPost({selectedId:e.selectedId,data:r},!0),this.jobPost.isLoading=!1,{data:r}}else return this.jobPost.isLoading=!1,{data:[]}},async fetchAllJobPost(e){const{userOffices:t}=T(),s=[];return t(e?e.can:null).forEach(r=>{let a=this.fetchReleases(U(j({},e),{selectedId:r[8]}));s.push(a)}),await Promise.allSettled(s)},setJobPost({selectedId:e,data:t},s){this.jobPost[e]=t,s&&K.setItem(`jobPost_${e}`,t)},async fetchOnlineApplications(e){this.onlineApplications.isLoading=!0;const t=this.getRequestedTimeStamps[e.selectedId]||{};let s=!0;const i=[{9:{value:e.selectedId},7:{value:"Online Applications 30 Days"}}];if(t.onlineApplications&&(t.onlineApplications.isBefore(d().subtract(1,"minute"))?s=!0:s=e.refresh?e.refresh:!1),s){this.setTimeStamp({selectedId:e.selectedId,name:"onlineApplications",timeStamp:d()},!0);const{data:r}=await x.fetchFromRecruitingApp({fields:i});return this.setOnlineApplications({selectedId:e.selectedId,data:r},!0),this.onlineApplications.isLoading=!1,{data:r}}else return this.onlineApplications.isLoading=!1,{data:[]}},async fetchAllOnlineApplications(e){const{userOffices:t}=T(),s=[];return t(e?e.can:null).forEach(r=>{let a=this.fetchOnlineApplications(U(j({},e),{selectedId:r[8]}));s.push(a)}),await Promise.allSettled(s)},setOnlineApplications({selectedId:e,data:t},s){this.onlineApplications[e]=t,s&&K.setItem(`onlineApplications_${e}`,t)}}}),T=J("user",{state:()=>({user:{},access:[],permissions:[],notifications:[],feathersNotification:null}),getters:{getUser:e=>e.user,getUserType:e=>e.user[32],userData:e=>e.user,fullName:e=>`${e.user[35]}${e.user[36]!==""?` ${e.user[36]} `:" "}${e.user[37]}`,userLoggedIn:e=>!!e.user[3],userAccess:e=>e.access,employeeLinkRequired:e=>e.user[84]===!0&&(e.user[85]===!0||e.user[82]===!1||e.user[82]===!0&&(e.user[80]===""||!e.user[80])),verifyRequired:e=>(e.user[32]==="Candidate"||e.user[32]==="Employee"||e.user[32]==="Project User")&&!e.user.verified,phoneNumberRequired:e=>e.user[111]||e.user[8]==="",emailRequired:e=>e.user[112]||e.user[6]==="",passwordRequired:e=>e.user[17]||e.user[7]==="",employeeLinked:e=>e.user[82],employeeProfileRID:e=>e.user[80],createEmployeeProfile:e=>e.user[85],userPermissions:e=>e.permissions,primaryOffice:e=>e.access.find(t=>t[15]===!0&&t[7]==="Office")||null,userOffices:e=>t=>e.access.filter(s=>t?t==="read"?s[7]==="Office"&&(s[39]===!0||s[41]===!0):t==="create"||t==="update"?s[7]==="Office"&&(s[40]===!0||s[41]===!0):t==="manage"?s[7]==="Office"&&s[41]===!0:!1:s[7]==="Office"),userOfficesRead:e=>e.access.filter(t=>t[7]==="Office"&&t[39]===!0),userOfficesCreate:e=>e.access.filter(t=>t[7]==="Office"&&t[40]===!0),userOfficesManage:e=>e.access.filter(t=>t[7]==="Office"&&t[41]===!0),primaryProject:e=>e.access.find(t=>t[15]===!0&&t[7]==="Project")||null,userProjects:e=>t=>e.access.filter(s=>t?t==="read"?s[7]==="Project"&&(s[39]===!0||s[41]===!0):t==="create"||t==="update"?s[7]==="Project"&&(s[40]===!0||s[41]===!0):t==="manage"?s[7]==="Project"&&s[41]===!0:!1:s[7]==="Project"),userFacilities:e=>t=>e.access.filter(s=>t?t==="read"?s[7]==="Facility"&&(s[39]===!0||s[41]===!0):t==="create"||t==="update"?s[7]==="Facility"&&(s[40]===!0||s[41]===!0):t==="manage"?s[7]==="Facility"&&s[41]===!0:!1:s[7]==="Project"),getOffice:e=>t=>t?e.access.find(s=>s[7]==="Office"&&s[8]===t):null},actions:{async fetchUser(e){const t=`{'10'.EX.'Active'}${e.rid?`AND{'3'.EX.'${e.rid}'}`:""}${e.email?`AND{'6'.EX.'${e.email}'}`:""}${e.phoneNumber?`AND{'8'.EX.'${e.phoneNumber}'}`:""}${e.userType?`AND{'32'.EX.'${e.userType}'}`:""}`,s=[{7:{value:"User"},8:{value:t},9:{value:e.rid?e.rid:1},14:{value:76}}],i=await x.fetchFromStructureApp({fields:s}),{user:r,access:a,permissions:n}=i.data;return this.setUser(r,!0),this.setAccess(a,!0),this.setPermissions(n,!0),i},async updateUserData({fields:e}){if(!e)throw"No Fields Provided";e[3]===void 0&&Object.assign(e,{3:{value:this.userData[3]}});const{data:t,metadata:s}=await x.upsertRecordsXML({to:"br4pxrbs6",fieldsToReturn:[3,76],data:[e],formatObject:76});if(s.lineErrors)throw{lineErrors:s.lineErrors[1],error:s.lineErrors};const i=t[0][76],r=Object.assign({},i);return delete r.access,delete r.permissions,this.setUser(r,!0),i},setUser(e,t){const{setQueryBy:s}=ce();this.user=e,e[32]==="QuickBase User"?s("office"):e[32]==="Project User"&&s("project"),t&&y.setItem(I.storageUserKeyName,e)},setPhoneNumberVerified(e){this.user[50]=e},setVerified(e){this.user.verified=e},setPhoneNumber(e){this.user[8]=e,this.user[111]=!0},setEmail(e){this.user[6]=e,this.user[112]=!0},setIdentityVerified(e){typeof e=="number"?this.user[80]=e:this.user[85]=e},setAccess(e,t){this.access=e,t&&y.setItem(I.storageAccessKeyName,e)},setPermissions(e,t){for(let i=0;i<e.length;i++)if(e[i].conditions){if(e[i].conditions.deny&&!Array.isArray(e[i].conditions.deny)){let r=e[i].conditions.deny.split(",");r.forEach(a=>{a=a.trim()}),e[i].conditions.deny=r;continue}if(e[i].conditions.accept&&!Array.isArray(e[i].conditions.accept)){let r=e[i].conditions.accept.split(",");r.forEach(a=>{a=a.trim()}),e[i].conditions.accept=r;continue}}const s=e.concat(ot);ue.update(s),this.permissions=s,t&&y.setItem(I.storagePermissionsKeyName,e)},setFeathersNotification(e){this.feathersNotification=e},async logout(){return await x.logout(),ue.update(ot)}}}),Te=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function Wr(e){return ea(e)===0}function Zr(e,t){return t<=6?31:t<=11||Wr(e)?30:29}function ea(e){const t=Te.length;let s=Te[0],i,r,a,n,o;if(e<s||e>=Te[t-1])throw new Error("Invalid Jalaali year "+e);for(o=1;o<t&&(i=Te[o],r=i-s,!(e<i));o+=1)s=i;return n=e-s,r-n<6&&(n=n-r+ta(r+4,33)*33),a=Xt(Xt(n+1,33)-1,4),a===-1&&(a=4),a}function ta(e,t){return~~(e/t)}function Xt(e,t){return e-~~(e/t)*t}const ui=864e5,sa=36e5,ct=6e4,fi="YYYY-MM-DDTHH:mm:ss.SSSZ",ia=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,ra=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,Ve={};function aa(e,t){const s="("+t.days.join("|")+")",i=e+s;if(Ve[i]!==void 0)return Ve[i];const r="("+t.daysShort.join("|")+")",a="("+t.months.join("|")+")",n="("+t.monthsShort.join("|")+")",o={};let c=0;const l=e.replace(ra,b=>{switch(c++,b){case"YY":return o.YY=c,"(-?\\d{1,2})";case"YYYY":return o.YYYY=c,"(-?\\d{1,4})";case"M":return o.M=c,"(\\d{1,2})";case"MM":return o.M=c,"(\\d{2})";case"MMM":return o.MMM=c,n;case"MMMM":return o.MMMM=c,a;case"D":return o.D=c,"(\\d{1,2})";case"Do":return o.D=c++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return o.D=c,"(\\d{2})";case"H":return o.H=c,"(\\d{1,2})";case"HH":return o.H=c,"(\\d{2})";case"h":return o.h=c,"(\\d{1,2})";case"hh":return o.h=c,"(\\d{2})";case"m":return o.m=c,"(\\d{1,2})";case"mm":return o.m=c,"(\\d{2})";case"s":return o.s=c,"(\\d{1,2})";case"ss":return o.s=c,"(\\d{2})";case"S":return o.S=c,"(\\d{1})";case"SS":return o.S=c,"(\\d{2})";case"SSS":return o.S=c,"(\\d{3})";case"A":return o.A=c,"(AM|PM)";case"a":return o.a=c,"(am|pm)";case"aa":return o.aa=c,"(a\\.m\\.|p\\.m\\.)";case"ddd":return r;case"dddd":return s;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return o.Z=c,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return o.ZZ=c,"(Z|[+-]\\d{2}\\d{2})";case"X":return o.X=c,"(-?\\d+)";case"x":return o.x=c,"(-?\\d{4,})";default:return c--,b[0]==="["&&(b=b.substring(1,b.length-1)),b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),h={map:o,regex:new RegExp("^"+l)};return Ve[i]=h,h}function di(e,t){return e!==void 0?e:t!==void 0?t.date:Xi.date}function Ht(e,t=""){const s=e>0?"-":"+",i=Math.abs(e),r=Math.floor(i/60),a=i%60;return s+q(r)+t+q(a)}function na(e,t,s){let i=e.getFullYear(),r=e.getMonth();const a=e.getDate();return t.year!==void 0&&(i+=s*t.year,delete t.year),t.month!==void 0&&(r+=s*t.month,delete t.month),e.setDate(1),e.setMonth(2),e.setFullYear(i),e.setMonth(r),e.setDate(Math.min(a,Ot(e))),t.date!==void 0&&(e.setDate(e.getDate()+s*t.date),delete t.date),e}function oa(e,t,s){const i=t.year!==void 0?t.year:e[`get${s}FullYear`](),r=t.month!==void 0?t.month-1:e[`get${s}Month`](),a=new Date(i,r+1,0).getDate(),n=Math.min(a,t.date!==void 0?t.date:e[`get${s}Date`]());return e[`set${s}Date`](1),e[`set${s}Month`](2),e[`set${s}FullYear`](i),e[`set${s}Month`](r),e[`set${s}Date`](n),delete t.year,delete t.month,delete t.date,e}function St(e,t,s){const i=hi(t),r=new Date(e),a=i.year!==void 0||i.month!==void 0||i.date!==void 0?na(r,i,s):r;for(const n in i){const o=Ki(n);a[`set${o}`](a[`get${o}`]()+s*i[n])}return a}function hi(e){const t=j({},e);return e.years!==void 0&&(t.year=e.years,delete t.years),e.months!==void 0&&(t.month=e.months,delete t.months),e.days!==void 0&&(t.date=e.days,delete t.days),e.day!==void 0&&(t.date=e.day,delete t.day),e.hour!==void 0&&(t.hours=e.hour,delete t.hour),e.minute!==void 0&&(t.minutes=e.minute,delete t.minute),e.second!==void 0&&(t.seconds=e.second,delete t.second),e.millisecond!==void 0&&(t.milliseconds=e.millisecond,delete t.millisecond),t}function pi(e,t,s){const i=hi(t),r=s===!0?"UTC":"",a=new Date(e),n=i.year!==void 0||i.month!==void 0||i.date!==void 0?oa(a,i,r):a;for(const o in i){const c=o.charAt(0).toUpperCase()+o.slice(1);n[`set${r}${c}`](i[o])}return n}function ca(e,t,s){const i=la(e,t,s),r=new Date(i.year,i.month===null?null:i.month-1,i.day===null?1:i.day,i.hour,i.minute,i.second,i.millisecond),a=r.getTimezoneOffset();return i.timezoneOffset===null||i.timezoneOffset===a?r:St(r,{minutes:i.timezoneOffset-a},1)}function la(e,t,s,i,r){const a={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(r!==void 0&&Object.assign(a,r),e==null||e===""||typeof e!="string")return a;t===void 0&&(t=fi);const n=di(s,vs.props),o=n.months,c=n.monthsShort,{regex:l,map:h}=aa(t,n),b=e.match(l);if(b===null)return a;let w="";if(h.X!==void 0||h.x!==void 0){const A=parseInt(b[h.X!==void 0?h.X:h.x],10);if(isNaN(A)===!0||A<0)return a;const O=new Date(A*(h.X!==void 0?1e3:1));a.year=O.getFullYear(),a.month=O.getMonth()+1,a.day=O.getDate(),a.hour=O.getHours(),a.minute=O.getMinutes(),a.second=O.getSeconds(),a.millisecond=O.getMilliseconds()}else{if(h.YYYY!==void 0)a.year=parseInt(b[h.YYYY],10);else if(h.YY!==void 0){const A=parseInt(b[h.YY],10);a.year=A<0?A:2e3+A}if(h.M!==void 0){if(a.month=parseInt(b[h.M],10),a.month<1||a.month>12)return a}else h.MMM!==void 0?a.month=c.indexOf(b[h.MMM])+1:h.MMMM!==void 0&&(a.month=o.indexOf(b[h.MMMM])+1);if(h.D!==void 0){if(a.day=parseInt(b[h.D],10),a.year===null||a.month===null||a.day<1)return a;const A=i!=="persian"?new Date(a.year,a.month,0).getDate():Zr(a.year,a.month);if(a.day>A)return a}h.H!==void 0?a.hour=parseInt(b[h.H],10)%24:h.h!==void 0&&(a.hour=parseInt(b[h.h],10)%12,(h.A&&b[h.A]==="PM"||h.a&&b[h.a]==="pm"||h.aa&&b[h.aa]==="p.m.")&&(a.hour+=12),a.hour=a.hour%24),h.m!==void 0&&(a.minute=parseInt(b[h.m],10)%60),h.s!==void 0&&(a.second=parseInt(b[h.s],10)%60),h.S!==void 0&&(a.millisecond=parseInt(b[h.S],10)*10**(3-b[h.S].length)),(h.Z!==void 0||h.ZZ!==void 0)&&(w=h.Z!==void 0?b[h.Z].replace(":",""):b[h.ZZ],a.timezoneOffset=(w[0]==="+"?-1:1)*(60*w.slice(1,3)+1*w.slice(3,5)))}return a.dateHash=q(a.year,6)+"/"+q(a.month)+"/"+q(a.day),a.timeHash=q(a.hour)+":"+q(a.minute)+":"+q(a.second)+w,a}function ua(e){return typeof e=="number"?!0:isNaN(Date.parse(e))===!1}function fa(e,t){return pi(new Date,e,t)}function da(e){const t=new Date(e).getDay();return t===0?7:t}function lt(e){const t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);const s=new Date(t.getFullYear(),0,4);s.setDate(s.getDate()-(s.getDay()+6)%7+3);const i=t.getTimezoneOffset()-s.getTimezoneOffset();t.setHours(t.getHours()-i);const r=(t-s)/(ui*7);return 1+Math.floor(r)}function ha(e){return e.getFullYear()*1e4+e.getMonth()*100+e.getDate()}function Ge(e,t){const s=new Date(e);return t===!0?ha(s):s.getTime()}function pa(e,t,s,i={}){const r=Ge(t,i.onlyDate),a=Ge(s,i.onlyDate),n=Ge(e,i.onlyDate);return(n>r||i.inclusiveFrom===!0&&n===r)&&(n<a||i.inclusiveTo===!0&&n===a)}function ma(e,t){return St(e,t,1)}function ga(e,t){return St(e,t,-1)}function Z(e,t,s){const i=new Date(e),r=`set${s===!0?"UTC":""}`;switch(t){case"year":case"years":i[`${r}Month`](0);case"month":case"months":i[`${r}Date`](1);case"day":case"days":case"date":i[`${r}Hours`](0);case"hour":case"hours":i[`${r}Minutes`](0);case"minute":case"minutes":i[`${r}Seconds`](0);case"second":case"seconds":i[`${r}Milliseconds`](0)}return i}function va(e,t,s){const i=new Date(e),r=`set${s===!0?"UTC":""}`;switch(t){case"year":case"years":i[`${r}Month`](11);case"month":case"months":i[`${r}Date`](Ot(i));case"day":case"days":case"date":i[`${r}Hours`](23);case"hour":case"hours":i[`${r}Minutes`](59);case"minute":case"minutes":i[`${r}Seconds`](59);case"second":case"seconds":i[`${r}Milliseconds`](999)}return i}function ya(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(s=>{t=Math.max(t,new Date(s))}),t}function ba(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(s=>{t=Math.min(t,new Date(s))}),t}function $e(e,t,s){return(e.getTime()-e.getTimezoneOffset()*ct-(t.getTime()-t.getTimezoneOffset()*ct))/s}function mi(e,t,s="days"){const i=new Date(e),r=new Date(t);switch(s){case"years":case"year":return i.getFullYear()-r.getFullYear();case"months":case"month":return(i.getFullYear()-r.getFullYear())*12+i.getMonth()-r.getMonth();case"days":case"day":case"date":return $e(Z(i,"day"),Z(r,"day"),ui);case"hours":case"hour":return $e(Z(i,"hour"),Z(r,"hour"),sa);case"minutes":case"minute":return $e(Z(i,"minute"),Z(r,"minute"),ct);case"seconds":case"second":return $e(Z(i,"second"),Z(r,"second"),1e3)}}function ut(e){return mi(e,Z(e,"year"),"days")+1}function xa(e){return ys(e)===!0?"date":typeof e=="number"?"number":"string"}function wa(e,t,s){const i=new Date(e);if(t){const r=new Date(t);if(i<r)return r}if(s){const r=new Date(s);if(i>r)return r}return i}function Aa(e,t,s){const i=new Date(e),r=new Date(t);if(s===void 0)return i.getTime()===r.getTime();switch(s){case"second":case"seconds":if(i.getSeconds()!==r.getSeconds())return!1;case"minute":case"minutes":if(i.getMinutes()!==r.getMinutes())return!1;case"hour":case"hours":if(i.getHours()!==r.getHours())return!1;case"day":case"days":case"date":if(i.getDate()!==r.getDate())return!1;case"month":case"months":if(i.getMonth()!==r.getMonth())return!1;case"year":case"years":if(i.getFullYear()!==r.getFullYear())return!1;break;default:throw new Error(`date isSameDate unknown unit ${s}`)}return!0}function Ot(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function zt(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const Qt={YY(e,t,s){const i=this.YYYY(e,t,s)%100;return i>=0?q(i):"-"+q(Math.abs(i))},YYYY(e,t,s){return s!=null?s:e.getFullYear()},M(e){return e.getMonth()+1},MM(e){return q(e.getMonth()+1)},MMM(e,t){return t.monthsShort[e.getMonth()]},MMMM(e,t){return t.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return zt(this.Q(e))},D(e){return e.getDate()},Do(e){return zt(e.getDate())},DD(e){return q(e.getDate())},DDD(e){return ut(e)},DDDD(e){return q(ut(e),3)},d(e){return e.getDay()},dd(e,t){return this.dddd(e,t).slice(0,2)},ddd(e,t){return t.daysShort[e.getDay()]},dddd(e,t){return t.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return lt(e)},ww(e){return q(lt(e))},H(e){return e.getHours()},HH(e){return q(e.getHours())},h(e){const t=e.getHours();return t===0?12:t>12?t%12:t},hh(e){return q(this.h(e))},m(e){return e.getMinutes()},mm(e){return q(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return q(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return q(Math.floor(e.getMilliseconds()/10))},SSS(e){return q(e.getMilliseconds(),3)},A(e){return this.H(e)<12?"AM":"PM"},a(e){return this.H(e)<12?"am":"pm"},aa(e){return this.H(e)<12?"a.m.":"p.m."},Z(e,t,s,i){const r=i==null?e.getTimezoneOffset():i;return Ht(r,":")},ZZ(e,t,s,i){const r=i==null?e.getTimezoneOffset():i;return Ht(r)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function ka(e,t,s,i,r){if(e!==0&&!e||e===1/0||e===-1/0)return;const a=new Date(e);if(isNaN(a))return;t===void 0&&(t=fi);const n=di(s,vs.props);return t.replace(ia,(o,c)=>o in Qt?Qt[o](a,n,i,r):c===void 0?o:c.split("\\]").join("]"))}function Ia(e){return ys(e)===!0?new Date(e.getTime()):e}var H={isValid:ua,extractDate:ca,buildDate:fa,getDayOfWeek:da,getWeekOfYear:lt,isBetweenDates:pa,addToDate:ma,subtractFromDate:ga,adjustDate:pi,startOfDate:Z,endOfDate:va,getMaxDate:ya,getMinDate:ba,getDateDiff:mi,getDayOfYear:ut,inferDateFormat:xa,getDateBetween:wa,isSameDate:Aa,daysInMonth:Ot,formatDate:ka,clone:Ia};const gi=J("boardAppStore",{state:()=>({boardApp:{},requestJobs:null,requestedTimestamp:null}),getters:{getBoardApp:e=>e.boardApp,profileData(){const{profileData:e}=ie();return e},jobsForBoard(){if(this.requestJobs){const{employeeData:e}=_(),t=this.requestJobs;return e[3]||(t.forEach(s=>{Object.assign(s,{recommended:s[68]===e[53]&&s[69]===e[51]});const i=e[537].find(r=>r[10]===s[3]);i!==void 0&&Object.assign(s,{applied:!0,appliedOn:i[1].$d!==void 0?H.formatDate(i[1].$d,"MM-DD-YYYY"):i[1].date})}),t.sort((s,i)=>s.recommended===i.recommended?i[1].isAfter(s[1]):s.recommended?-1:1)),t}else return[]},timeRequested(){return this.requestedTimestamp}},actions:{async getRequestJobs(){const e=[{14:{value:224},9:{value:1},8:{value:"{'17'.EX.'Open'}AND{'182'.EX.'false'}AND{'175'.EX.'true'}"},7:{value:"Table Query"},6:{value:"bpzpyqcu4"}}],{data:t}=await x.fetchFromProjectsApp({fields:e});if(t.length>0)return this.setRequestJobs(t,!0),this.requestedTimestamp=d(),t;throw"No jobs"},async applyOnBoard({job:e}){const{employeeData:t}=_(),{data:s}=await x.upsertRecordsXML({to:"bsfq6uktu",data:[{6:{value:t[3]},8:{value:e[56]},10:{value:e[3]},12:{value:e[61]}}],fieldsToReturn:[19],formatObject:19});if(console.log(s),s[0])return s[0][19];throw"Cannot apply"},storeBoardApp(e){this.boardApp=e},setRequestJobs(e,t){const s=e.sort((i,r)=>r[1].isAfter(i[1]));this.requestJobs=s,t&&y.setItem(I.storageJobBoardKeyName,s)}}}),We=[{link:"https://beis-newhire.sabacloud.com/Saba/Web_wdk/NA3P1PRD0029/index/prelogin.rdf",linkName:"BSLN",img:"https://static-na3p1.sabacloud.com/assets/s/s13cvy4thve9/common/img/favicon.ico"},{link:"https://hrx.talx.com/ec/#/login/13917?divisionid=42",linkName:"HireExpress",img:"https://hrx.talx.com/ec/favicon.ico"}],Y=J("kiosk",{state:()=>({kiosk:null,access:null,permissions:null,bookmarks:We,bookMarksOnly:!1}),getters:{getBookMarksOnly:e=>e.bookMarksOnly,getBookmarks:e=>e.bookmarks,kioskAccount:e=>e.kiosk,kioskAvailable:e=>e.kiosk!==null,kioskHiringCenter:e=>e.kiosk?e.kiosk[37]:null,hasAffirmative:e=>e.kiosk?e.kiosk.voluntaryForms.affirmative:!1,hasVets:e=>e.kiosk?e.kiosk.voluntaryForms.vets:!1,hasDisability:e=>e.kiosk?!!e.kiosk.voluntaryForms.disability:!1,goToVoluntary:e=>e.hasAffirmative||e.hasVets||e.hasDisability,availableTests:e=>e.kiosk&&e.kiosk.tests?e.kiosk.tests:[],hasTests:e=>e.kiosk&&e.kiosk.tests?e.kiosk.tests.length>0:!1,testForCraft:e=>{const{currentLang:t}=M(),{craftId:s}=ie();let i=1;return t==="en-US"?i=1:t==="es"&&(i=2),e.kiosk&&e.kiosk.tests&&e.kiosk.tests.find(r=>r[15]===s&&r[16]===i)||!1}},actions:{async fetchKioskAccount(e,t){const s=`{'11'.EX.'${e.email}'}AND{'6'.EX.'Active'}`,i=[{7:{value:"Kiosks"},8:{value:s},9:{value:1},14:{value:30}}];if(!this.kiosk||t){const{data:r}=await x.fetchFromStructureApp({fields:i});if(r.length>0){const a=Object.assign({},r[0][37]);delete a.kiosk,r[0][37]=a,this.setKioskAccount(r[0],!0),e.ticket&&x.setKioskTicket(e.ticket),r[0][45]===!0&&this.setBookmarksOnly(!0,!0),r[0].bookmarks&&this.setBookmarks(r[0].bookmarks,!0)}return r}else return[this.kiosk]},async loginKiosk(e){const t=`{'10'.EX.'Active'}AND{'6'.EX.'${e.email}'}AND{'32'.EX.'Kiosk Profile'}`,s=[{7:{value:"User Request"},8:{value:t},9:{value:1},14:{value:77}}],{data:i}=await x.fetchFromStructureApp({fields:s}),r=[{6:{value:"login"}}];let a=await x.getIpInfo();if(a&&a.query)r[0][8]={value:a.ip?a.ip:"N/A"},r[0][10]={value:a.userAgent?a.userAgent:"N/A"},r[0][27]={value:a.continent?a.continent:"N/A"},r[0][28]={value:a.continentCode?a.continentCode:"N/A"},r[0][29]={value:a.country?a.country:"N/A"},r[0][30]={value:a.countryCode},r[0][31]={value:a.region?a.region:"N/A"},r[0][32]={value:a.regionName?a.regionName:"N/A"},r[0][33]={value:a.city?a.city:"N/A"},r[0][34]={value:a.district?a.district:"N/A"},r[0][38]={value:a.zip?a.zip:"N/A"},r[0][36]={value:a.lat?a.lat:"N/A"},r[0][37]={value:a.lon?a.lon:"N/A"},r[0][38]={value:a.timezone?a.timezone:"N/A"},r[0][39]={value:a.offset?a.offset:"N/A"},r[0][40]={value:a.isp?a.isp:"N/A"},r[0][41]={value:a.org?a.org:"N/A"},r[0][42]={value:a.as?a.as:"N/A"},r[0][43]={value:a.asname?a.asname:"N/A"},r[0][44]={value:a.mobile?a.mobile:!1},r[0][45]={value:a.proxy?a.proxy:!1},r[0][46]={value:a.hosting?a.hosting:!1},r[0][46]={value:a.hosting?a.hosting:"N/A"},r[0][47]={value:a.query?a.query:"N/A"};else{try{a=await x.fetchIpInfo()}catch{a=null}a&&a.query&&(r[0][8]={value:a.ip?a.ip:"N/A"},r[0][10]={value:a.userAgent?a.userAgent:"N/A"},r[0][27]={value:a.continent?a.continent:"N/A"},r[0][28]={value:a.continentCode?a.continentCode:"N/A"},r[0][29]={value:a.country?a.country:"N/A"},r[0][30]={value:a.countryCode},r[0][31]={value:a.region?a.region:"N/A"},r[0][32]={value:a.regionName?a.regionName:"N/A"},r[0][33]={value:a.city?a.city:"N/A"},r[0][34]={value:a.district?a.district:"N/A"},r[0][38]={value:a.zip?a.zip:"N/A"},r[0][36]={value:a.lat?a.lat:"N/A"},r[0][37]={value:a.lon?a.lon:"N/A"},r[0][38]={value:a.timezone?a.timezone:"N/A"},r[0][39]={value:a.offset?a.offset:"N/A"},r[0][40]={value:a.isp?a.isp:"N/A"},r[0][41]={value:a.org?a.org:"N/A"},r[0][42]={value:a.as?a.as:"N/A"},r[0][43]={value:a.asname?a.asname:"N/A"},r[0][44]={value:a.mobile?a.mobile:!1},r[0][45]={value:a.proxy?a.proxy:!1},r[0][46]={value:a.hosting?a.hosting:!1},r[0][47]={value:a.query?a.query:"N/A"})}if(i.length===1){const n=i[0];if(r[0][12]={value:n[3]},n[32]==="Kiosk Profile"){if(await Ae.compare(e.password,n[7]))return r[0][7]={value:"Successful"},await x.addLoginAttempt(r),this.fetchKioskAccountV2(n);throw r[0][7]={value:"Invalid Password"},{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}}else throw r[0][7]={value:"Invalid Login"},x.addLoginAttempt(r),{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}}else throw r[0][7]={value:"Invalid Login"},x.addLoginAttempt(r),{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}},async fetchKioskAccountV2(e,t){const s=`{'10'.EX.'Active'}AND{'6'.EX.'${e[6]}'}AND{'32'.EX.'Kiosk Profile'}`,i=[{7:{value:"User"},8:{value:s},9:{value:e[3]},14:{value:76}}],r=await x.fetchFromStructureApp({fields:i}),{user:a,access:n,permissions:o}=r.data;if(n.length>0){const c=[];n.forEach(l=>{l[7]==="Bookmark"&&c.push(l)}),this.setBookmarks(c,!0)}return a[113]===!0&&this.setBookmarksOnly(!0,!0),a[102]&&x.setKioskTicket(a[102]),console.log("fetchKioskV2:",a,n,o),a},setKioskAccount(e,t){const{setKioskActive:s}=M(),{setHiringCenter:i}=z();if(this.kiosk=e,s(!!e),t&&e)y.setItem(I.storageKioskAccount,e),s(!0),this.setLastKioskFetch();else if(!e){y.removeItem(I.storageKioskAccount),s(!1),this.removeLastKioskFetch(),i(null,t);return}if(e&&e[37]){const r=Object.assign({},e[37]);i(r,t)}},setBookmarks(e,t){let s=e||[];return s=We.concat(s),this.bookmarks=s,t&&e&&y.setItem(I.storageBookmarks,JSON.parse(JSON.stringify(s))),!0},setLastKioskFetch(){y.setItem(I.storageLastKioskFetch,d())},removeLastKioskFetch(){y.removeItem(I.storageLastKioskFetch)},setBookmarksFromStorage(e,t){return this.bookmarks=e,!0},setBookmarksOnly(e,t){this.bookMarksOnly=e,t&&y.setItem(I.storageBookmarksOnly,e),e||y.removeItem(I.storageBookmarksOnly)},removeBookmarks(){this.setBookmarksOnly(!1),this.kioskAvailable&&this.getBookMarksOnly&&this.setKioskAccount(null,!1),this.bookmarks=We,this.bookMarksOnly=!1,y.removeItem(I.storageBookmarks),y.removeItem(I.storageBookmarksOnly)}}}),ie=J("profile",{state:()=>({profile:{6:{field:"Related Employee"},15:{field:"Related Hiring Center"},19:{field:"Related Job"},23:{field:"First"},24:{field:"Middle"},25:{field:"Last"},26:{field:"Suffix"},27:{field:"Phone"},28:{field:"Email"},32:{field:"Street1"},33:{field:"Street2"},34:{field:"City"},35:{field:"State"},36:{field:"Zip"},37:{field:"Country"},38:{field:"Preferred Name"},40:{field:"Related Craft"},42:{field:"Related Experience Option"},44:{field:"Related Employment Status"},46:{field:"Related Contact Method"},49:{field:"Related Kiosk Session"},67:{field:"Related Available Language"}},voluntaryForms:{affirmative:{6:{field:"Related Kiosk Profile"},12:{field:"Related Hiring Center"},16:{field:"Related Affirmative Option (Gender)"},18:{field:"Related Job"},20:{field:"Related Affirmative Option (Ethnicity)"},22:{field:"Related Affirmative Option (Race)"},25:{field:"Related Kiosk Session"},24:{field:"Completion Timestamp"}},veterans:{6:{field:"Related Kiosk Profile"},8:{field:"Related Veteran Status Form"},10:{field:"Related Hiring Center"},16:{field:"Initials"},18:{field:"Related Kiosk Session"},17:{field:"Completion Timestamp"}},disability:{6:{field:"Completion Timestamp"},7:{field:"Name Entered"},8:{field:"Date Entered"},9:{field:"Related Kiosk Profile"},10:{field:"Related Disability Form"},15:{field:"Related Disability Form Option"},17:{field:"Related Hiring Center"},19:{field:"Related Job"},21:{field:"Related Kiosk Session"}},children:{vets:{field:"Veteran Form Selections",value:[]}}},step:0,loading:!0,completed:!1,jobBoardApplication:{},vetsSelections:null,vetsForm:null,craft:null,levelStartTest:null}),getters:{personalInfoNeeded(){const{employeeData:e}=_();return!(e[3]&&e[20]!==""&&e[22]!==""&&e[41]!==""&&e[43]!==""&&e[44]!==""&&e[45]!==""&&e[46]!=="")},onJobBoard(){const{getBoardApp:e}=gi();return!(!e[3]||e[3]===void 0)},profileData:e=>e.profile,profileComplete:e=>e.completed,loadingState:e=>e.loading,proceedToTest(){const{onKiosk:e}=M(),{testForCraft:t}=Y(),{employeeData:s}=_();return s.needsTest&&s.needsTest?e&&!!t:!1},selectedPreferencesOnProfile(){return{craft:this.profile[40],language:this.profile[67]}},experienceLevelOnProfile(){return this.profile[42].value?this.profile[42].value:null},submitProfileData(){const{employeeData:e}=_(),{hiringCenter:t}=z(),s={},i=[3];for(const[r,a]of Object.entries(this.profile))a.value!==void 0&&a.value!==null&&(Object.assign(s,{[r]:{value:a.value}}),i.push(parseInt(r)));return s[6]===void 0?(Object.assign(s,{6:{value:e[3]}}),i.push(6)):s[6].value=e[3],s[15]===void 0?(Object.assign(s,{15:{value:t?t[3]:""}}),i.push(15)):s[15].value=t?t[3]:"",s[77]&&delete s[77],i.push(77),{to:"bp3gci48x",data:[s],fieldsToReturn:i}},submitDisabilityData(){const{employeeData:e}=_(),{hiringCenter:t}=z(),s={},i=[];for(const[r,a]of Object.entries(this.voluntaryForms.disability))a.value!==void 0&&a.value!==null&&(Object.assign(s,{[r]:{value:a.value}}),i.push(parseInt(r)));return s[17]===void 0?(Object.assign(s,{17:{value:t?t[3]:""}}),i.push(17)):s[17].value=t?t[3]:"",this.onJobBoard?s[24]===void 0?(Object.assign(s,{24:{value:this.jobBoardApplication[3]?this.jobBoardApplication[3]:""}}),i.push(24)):s[24].value=this.jobBoardApplication[3]?this.jobBoardApplication[3]:"":s[9]===void 0?(Object.assign(s,{9:{value:this.profile[3]?this.profile[3].value:""}}),i.push(9)):s[9].value=this.profile[3]?this.profile[3].value:"",s[22]===void 0?(Object.assign(s,{22:{value:e[3]?e[3]:""}}),i.push(22)):s[22].value=e[3]?e[3]:"",{to:"bqaiuve9q",data:[s],fieldsToReturn:i}},submitAffirmativeData(){const{employeeData:e}=_(),{hiringCenter:t}=z(),s={},i=[];for(const[r,a]of Object.entries(this.voluntaryForms.affirmative))a.value!==void 0&&a.value!==null&&(Object.assign(s,{[r]:{value:a.value}}),i.push(parseInt(r)));return s[12]===void 0?(Object.assign(s,{12:{value:t?t[3]:""}}),i.push(12)):s[12].value=t?t[3]:"",this.onJobBoard?s[38]===void 0?(Object.assign(s,{38:{value:this.jobBoardApplication[3]?this.jobBoardApplication[3]:""}}),i.push(38)):s[38].value=this.jobBoardApplication[3]?this.jobBoardApplication[3]:"":s[6]===void 0?(Object.assign(s,{6:{value:this.profile[3]?this.profile[3].value:""}}),i.push(6)):s[6].value=this.profile[3]?this.profile[3].value:"",s[35]===void 0?(Object.assign(s,{35:{value:e[3]?e[3]:""}}),i.push(35)):s[35].value=e[3]?e[3]:"",i.push(33),i.push(17),{to:"bp3gcmump",data:[s],fieldsToReturn:i}},async submitVeteransData(){const{employeeData:e}=_(),{hiringCenter:t}=z(),s={},i=[];if(this.vetsForm){for(const[r,a]of Object.entries(this.voluntaryForms.veterans))a.value!==void 0&&a.value!==null?(Object.assign(s,{[r]:{value:a.value}}),i.push(parseInt(r))):this.vetsForm[r]&&this.vetsForm[r].value&&(Object.assign(s,{[r]:{value:this.vetsForm[r].value}}),i.push(parseInt(r)));return s[10]===void 0?(Object.assign(s,{10:{value:t?t[3]:""}}),i.push(10)):s[10].value=t?t[3]:"",this.onJobBoard?s[20]===void 0?(Object.assign(s,{20:{value:this.jobBoardApplication[3]?this.jobBoardApplication[3]:""}}),i.push(20)):s[20].value=this.jobBoardApplication[3]?this.jobBoardApplication[3]:"":s[6]===void 0?(Object.assign(s,{6:{value:this.profile[3]?this.profile[3].value:""}}),i.push(6)):s[6].value=this.profile[3]?this.profile[3].value:"",s[19]===void 0?(Object.assign(s,{19:{value:e[3]?e[3]:""}}),i.push(19)):s[19].value=e[3]?e[3]:"",i.includes(3)||i.push(3),{to:"bqamq3kr4",data:[s],fieldsToReturn:i}}else return{}},vetsFormSelections(){const e=this.vetsSelections?this.vetsSelections:[],t=[];return e.length>0&&e.forEach(s=>{const i={};for(const[r,a]of Object.entries(s))a.value!==void 0&&a.value!==null&&Object.assign(i,{[r]:{value:a.value}});i[6]===void 0?Object.assign(i,{6:{value:this.voluntaryForms.veterans[3]?this.voluntaryForms.veterans[3].value:""}}):i[6].value=this.voluntaryForms.veterans[3]?this.voluntaryForms.veterans[3].value:"",this.onJobBoard||(i[10]===void 0?Object.assign(i,{10:{value:this.profile[19]?this.profile[19].value:""}}):i[10].value=this.profile[19]?this.profile[19].value:""),t.push(i)}),{to:"bqamrfpj9",data:t,fieldsToReturn:[1,2,3,8,9]}},startLevelForTest:e=>e.levelStartTest,craftId:e=>e.craft},actions:{async submitProfileToQB(){const{updateEmployeeData:e}=_(),{onKiosk:t}=M(),{testForCraft:s}=Y(),{hiringCenter:i}=z();if(this.onJobBoard)return(await e({fields:{16:{value:i[3]},20:{value:this.profile[23].value===void 0?"":this.profile[23].value},21:{value:this.profile[24].value===void 0?"":this.profile[24].value},22:{value:this.profile[25].value===void 0?"":this.profile[25].value},23:{value:this.profile[26].value===void 0?"":this.profile[26].value},41:{value:this.profile[32].value===void 0?"":this.profile[32].value},42:{value:this.profile[33].value===void 0?"":this.profile[33].value},43:{value:this.profile[34].value===void 0?"":this.profile[34].value},44:{value:this.profile[35].value===void 0?"":this.profile[35].value},45:{value:this.profile[36].value===void 0?"":this.profile[36].value},46:{value:this.profile[37].value===void 0?"":this.profile[37].value},51:{value:this.profile[40].value===void 0?"":this.profile[40].value},53:{value:this.profile[42].value===void 0?"":this.profile[42].value},55:{value:this.profile[44].value===void 0?"":this.profile[44].value},57:{value:this.profile[46].value===void 0?"":this.profile[46].value}}})).needsTest&&s?(e({fields:{122:{value:7}}}),this.storeLocalForage(),this.submitProfileData):(this.storeLocalForage(),this.submitProfileData);{const{data:r}=await x.upsertRecordsXML(this.submitProfileData);if(r[0]){const a=r[0];!this.profile[3]||this.profile[3].value===void 0?Object.assign(this.profile,{3:{value:r[0][3]}}):this.profile[3].value=r[0][3],!this.profile[77]||this.profile[77].value===void 0?Object.assign(this.profile,{77:{value:r[0][77]}}):this.profile[77].value=r[0][77];const n={16:{value:i[3]},20:{value:a[23]===void 0?"":a[23]},21:{value:a[24]===void 0?"":a[24]},22:{value:a[25]===void 0?"":a[25]},23:{value:a[26]===void 0?"":a[26]},41:{value:a[32]===void 0?"":a[32]},42:{value:a[33]===void 0?"":a[33]},43:{value:a[34]===void 0?"":a[34]},44:{value:a[35]===void 0?"":a[35]},45:{value:a[36]===void 0?"":a[36]},46:{value:a[37]===void 0?"":a[37]},51:{value:a[40]===void 0?"":a[40]},53:{value:a[42]===void 0?"":a[42]},55:{value:a[44]===void 0?"":a[44]},57:{value:a[46]===void 0?"":a[46]}},o=await e({fields:n});return o[119]!==void 0&&(this.profile[77].value=o[119]==="Yes"?"No":"Yes"),this.storeLocalForage(),o.needsTest&&s&&!t&&await e({fields:{122:{value:7}}}),a}else throw"Something went wrong"}},async submitDisabilityToQB(){const{updateEmployeeFromApp:e}=_(),{data:t}=await x.upsertRecordsXML(this.submitDisabilityData);if(t[0])Object.assign(this.voluntaryForms.disability,{3:{value:t[0][3]}}),e({action:"push",values:this.voluntaryForms.disability,key:"disability"});else throw"Something went wrong";return this.submitDisabilityData},async submitAffirmativeToQB(){const{updateEmployeeData:e}=_(),{data:t}=await x.upsertRecordsXML(this.submitAffirmativeData);if(t[0]){Object.assign(this.voluntaryForms.affirmative,{3:{value:t[0][3]}});const s={406:{value:t[0][33]},380:{value:t[0][17]}};e({fields:s})}else throw"Something went wrong";return this.submitAffirmativeData},async submitVeteransToQB(){const{updateEmployeeFromApp:e}=_(),t=await this.submitVeteransData,{data:s}=await x.upsertRecordsXML(t);if(s[0]){if(this.voluntaryForms.veterans[3]===void 0?Object.assign(this.voluntaryForms.veterans,{3:{value:s[0][3]}}):this.voluntaryForms.veterans[3].value=s[0][3],(await x.upsertRecordsXML(this.vetsFormSelections)).data.length>0)return Object.assign(this.voluntaryForms.veterans,{selections:s}),e({action:"push",values:this.voluntaryForms.veterans,key:"vets"}),!0;throw"Cannot save vets form selections"}else throw"Cannot save veterans"},async updateProfile(e){if(this.completed=e.completed===void 0?!1:e.completed,this.step=e.next?e.next:0,e.values&&Object.entries(e.values).length>0)for(const[t,s]of Object.entries(e.values))s&&(this.profile[t]!==void 0?(this.profile[t].value=s.value?s.value:s||"",this.profile[t].label=s.label?s.label:""):Object.assign(this.profile,{[t]:{value:!s.value||s.value===void 0?!s||s===void 0?"":s:s.value,label:!s.label||s.label===void 0?"":s.label}}));return this.storeLocalForage(),this.submitProfileData},async updateVoluntaryForm(e){this.step=e.next?e.next:0;const t=this.voluntaryForms[e.type];if(e.values&&Object.entries(e.values).length>0){for(const[s,i]of Object.entries(e.values))t[s]!==void 0?Array.isArray(t[s].value)?i.value&&Array.isArray(i.value)?i.value.forEach(r=>{t[s].value.push(r)}):i&&Array.isArray(i)?i.forEach(r=>{t[s].value.push(r)}):t[s].value.push(i.value?i.value:i||""):(t[s].value=i.value?i.value:i||"",t[s].label=i.label?i.label:""):Object.assign(t,{[s]:{value:i.value?i.value:i||"",label:i.label?i.label:""}});return!0}else throw"Missing data"},async updateVetsForm({next:e,values:t,selections:s}){return this.step=e||0,this.vetsForm=t,this.vetsSelections=s,!0},async updateVetsSelections(e){this.vetsSelections=e},updateStep(e){this.step=e},dataLoaded(e){this.loading=e===void 0?!1:e},toggleLoader(e){this.loading=e},setLevelStartTest(e){this.levelStartTest=e},setCraft(e){this.craft=e},resetProfile(){this.profile={6:{field:"Related Employee"},15:{field:"Related Hiring Center"},19:{field:"Related Job"},23:{field:"First"},24:{field:"Middle"},25:{field:"Last"},26:{field:"Suffix"},27:{field:"Phone"},28:{field:"Email"},32:{field:"Street1"},33:{field:"Street2"},34:{field:"City"},35:{field:"State"},36:{field:"Zip"},37:{field:"Country"},38:{field:"Preferred Name"},40:{field:"Related Craft"},42:{field:"Related Experience Option"},44:{field:"Related Employment Status"},46:{field:"Related Contact Method"},49:{field:"Related Kiosk Session"},67:{field:"Related Available Language"}},this.step=0,this.voluntaryForms={affirmative:{6:{field:"Related Kiosk Profile"},12:{field:"Related Hiring Center"},16:{field:"Related Affirmative Option (Gender)"},18:{field:"Related Job"},20:{field:"Related Affirmative Option (Ethnicity)"},22:{field:"Related Affirmative Option (Race)"},25:{field:"Related Kiosk Session"},24:{field:"Completion Timestamp"}},veterans:{6:{field:"Related Kiosk Profile"},8:{field:"Related Veteran Status Form"},10:{field:"Related Hiring Center"},16:{field:"Initials"},18:{field:"Related Kiosk Session"},17:{field:"Completion Timestamp"}},disability:{6:{field:"Completion Timestamp"},7:{field:"Name Entered"},8:{field:"Date Entered"},9:{field:"Related Kiosk Profile"},10:{field:"Related Disability Form"},15:{field:"Related Disability Form Option"},17:{field:"Related Hiring Center"},19:{field:"Related Job"},21:{field:"Related Kiosk Session"}},children:{vets:{field:"Veteran Form Selections",value:[]}}}},setProfile(e,t){this.profile=e,t&&y.setItem(I.storageProfile,e)},setProfileStep(e,t){this.step=e,t&&y.setItem(I.storageProfileStep,e)},setVoluntaryForms(e,t){this.voluntaryForms=e,t&&y.setItem(I.storageProfileVoluntaryForms,e)},storeLocalForage(){const e=JSON.parse(JSON.stringify(this.profile)),t=JSON.parse(JSON.stringify(this.voluntaryForms));y.setItem(I.storageProfile,e),y.setItem(I.storageProfileStep,this.step),y.setItem(I.storageProfileVoluntaryForms,t)}}}),_=J("employee",{state:()=>({devEmployee:{3:46},employee:{},emergencyContacts:[],history:[],training:[{3:2,6:"Security Passport",7:1,8:"Identification Credentials",11:"",20:"IDs",21:1},{3:1,6:"TWIC Card",7:1,8:"Identification Credentials",11:"",20:"IDs",21:1}],jobBoardApplications:[]}),getters:{noTasks(){return!this.checkInActive&&this.employeeData.complete&&this.voluntaryFormsComplete&&!this.showInProcess&&!this.employeeData.needsTest},employeeActive(){return this.employeeData[408]==="Active"},checkInActive(){const{checkedIn:e,checkInData:t}=M();return this.showInProcess||this.employeeData[79]===6||t[36]?!1:!!(this.employeeData[408]==="Active"&&e)},voluntaryFormsSubmitted(){return this.employee[3]?{disability:this.employee.disability.length>0?this.employee.disability.sort((e,t)=>e[3]>t[3]?-1:1)[0]:null,affirmative:this.employee.affirmative.length>0?this.employee.affirmative.sort((e,t)=>e[3]>t[3]?-1:1)[0]:null,vets:this.employee.vets.length>0?this.employee.vets.filter(e=>e.selections.length>0).sort((e,t)=>e[3]>t[3]?-1:1)[0]:null}:null},voluntaryFormsComplete(){return!(!this.voluntaryFormsSubmitted||!this.voluntaryFormsSubmitted.disability||!this.voluntaryFormsSubmitted.affirmative||!this.voluntaryFormsSubmitted.vets)},applicationsSubmitted:e=>e.jobBoardApplications,showInProcess(){return this.employee[519]?this.employee[519]===1:!1},showEmployment(){return this.employee[408]?this.employee[408]==="Active":!1},employeeData:e=>e.employee,employeeAvailable(){return!!this.employee[3]},offerData(){return this.employee[1516]&&!Array.isArray(this.employee[1516].offer)?this.employee[1516].offer:null},processingData(){return this.employee[1516]&&!Array.isArray(this.employee[1516].processing)?this.employee[1516].processing:null},savedEmergencyContacts(){return this.emergencyContacts},savedHistory(){const e=[];return this.employee[513]&&this.employee[513].forEach(t=>{const s=t[12].includes("-")?t[12].split("-"):null,i=t[13].includes("-")?t[13].split("-"):null,r=s?H.buildDate({year:s[2],date:s[1],month:s[0]}):t[12],a=i?H.buildDate({year:i[2],date:i[1],month:i[0]}):t[13];t[12]=H.formatDate(r,"MM/DD/YYYY"),t[13]=H.formatDate(a,"MM/DD/YYYY"),Object.assign(t,{company:{value:t[6],label:t[7]}}),Object.assign(t,{craft:{value:t[15],label:t[16]}}),e.push(t)}),e},savedTraining(){return this.training},getEmployee:e=>e.employee,socialRequired:e=>{const{getCountry:t}=M();return t==="CA"?!e.employee[3]||e.employee[564]===""||!e.employee[564]:!e.employee[3]||e.employee[109]===""||!e.employee[109]}},actions:{addMatrixToEmployee({data:e}){Object.assign(this.employee,{[e.key]:e.value})},async updateEmployeeData({fields:e}){if(!e)throw"No Fields Provided";e[3]===void 0&&Object.assign(e,{3:{value:this.employeeData[3]}});const{data:t}=await x.upsertRecordsXML({to:"bp3gb7ng2",fieldsToReturn:[500],data:[e],formatObject:500}),s=t[0][500];return this.setEmployee(s,!0),s},setEmployee(e,t){const{setCraft:s,setLevelStartTest:i}=ie();e[507]&&(this.emergencyContacts=e[507]),e.craft&&s(e.craft),e[53]&&i(e[53]),this.employee=e,t&&y.setItem(I.storageEmployeeKeyName,e)},async removeContact(e){await x.upsertRecordsXML({to:"bruxz7dsh",data:[{3:{value:e},17:{value:!0},18:{value:new Date}}],fieldsToReturn:[3,14],formatObject:14}),this.employee[507]=this.employee[507].filter(t=>t[3]!==e)},async addContact(e){const{data:t}=await x.upsertRecordsXML({to:"bruxz7dsh",data:[{6:{value:e[6]},7:{value:e[7]},8:{value:e[16]},10:{value:this.employee[3]},11:{value:e[11]}}],fieldsToReturn:[3,14],formatObject:14});if(!t.length>0)throw"Cannot save contact";e=t[0][14],this.employee[507].push(e)},async updateContact(e){const{data:t}=await x.upsertRecordsXML({to:"bruxz7dsh",data:[{3:{value:e[3]},6:{value:e[6]},7:{value:e[7]},8:{value:e[16]},11:{value:e[11]}}],fieldsToReturn:[3,14],formatObject:14});this.employee[507].forEach((s,i)=>{s[3]===e[3]&&(this.employee[507][i]=t[0][14])})},async addHistory(e){const t={6:{value:e.company.value},10:{value:e[10]},11:{value:e[11]},12:{value:e[12]},13:{value:e[13]},15:{value:e.craft.value},34:{value:this.employeeData[3]}};this.employeeData[234]>0&&Object.assign(t,{8:{value:this.employeeData[234]}});const{data:s}=await x.upsertRecordsXML({to:"bpzpy6pj7",data:[t],fieldsToReturn:[3]});if(!s.length>0)throw"Cannot save experience";e[3]=s[0][3],e[12]=H.formatDate(H.addToDate(e[12],{days:1}),"MM/DD/YYYY"),e[13]=H.formatDate(H.addToDate(e[13],{days:1}),"MM/DD/YYYY"),this.employee[513]&&Array.isArray(this.employee[513])?this.employee[513].push(e):this.employee[513]=[e]},async updateHistory(e){const{data:t}=await x.upsertRecordsXML({to:"bpzpy6pj7",data:[{3:{value:e[3]},6:{value:e.company.value},10:{value:e[10]},11:{value:e[11]},12:{value:e[12]},13:{value:e[13]},15:{value:e.craft.value},34:{value:this.employeeData[3]}}],fieldsToReturn:[3]});if(!t.length>0)throw"Cannot save history";e[12]=H.formatDate(H.addToDate(e[12],{days:1}),"MM/DD/YYYY"),e[13]=H.formatDate(H.addToDate(e[13],{days:1}),"MM/DD/YYYY"),this.employee[513].forEach((s,i)=>{s[3]===e[3]&&(this.employee[513][i]=e)})},async removeHistory(e){const{data:t}=await x.upsertRecordsXML({to:"bpzpy6pj7",data:[{3:{value:e},32:{value:!0},33:{value:new Date}}],fieldsToReturn:[3]});if(!t.length>0)throw"Cannot save history";this.employee[513]=this.employee[513].filter(s=>s[3]!==t[0][3])},addTraining(e){this.training.push(e)},updateTraining(e){this.training.forEach((t,s)=>{t[3]===e[3]&&(this.training[s]=e)})},removeTraining(e){this.training=this.training.filter(t=>t[3]!==e)},async applyOnBoard(e){const{data:t}=await x.upsertRecordsXML({to:"bsfq6uktu",data:[{6:{value:this.employeeData[3]},8:{value:e[56]},10:{value:e[3]},12:{value:e[61]}}],fieldsToReturn:[19],formatObject:19});if(t[0])return this.employee[537].push(t[0][19]),t;throw"Cannot apply"},async acceptDeployment(e){const{data:t}=await x.upsertRecordsXML({to:"bsf2qqd63",data:[{8:{value:this.employeeData[3]},9:{value:e},6:{value:new Date},7:{value:"accept"}}],fieldsToReturn:[11],formatObject:11});if(t[0])return this.employee[1516].processing=t[0][11],t;throw"Cannot accept"},updateEmployeeFromApp({action:e,values:t,key:s}){e==="push"?this.employee[s]===void 0?Object.assign(this.employee,{[s]:t}):this.employee[s].push(t):e==="replace"&&(this.employee[s]===void 0?Object.assign(this.employee,{[s]:t}):this.employee[s]=t)}}});class Sa{formatName(t){if(typeof t!="string")return"";const s=t.trim().split(" ");if(s.length===1){if(t=t.toLowerCase(),t==="de"||t==="dela"||t==="del"||t==="las"||t==="y"||t==="la")return t;try{t=t.charAt(0).toUpperCase()+t.slice(1)}catch{t=t.charAt(0)+t.slice(1)}if(t.startsWith("Mc"))try{t=t.slice(0,2)+t.charAt(2).toUpperCase()+t.slice(3)}catch{t=t.slice(0,2)+t.charAt(2)+t.slice(3)}if(t.includes("'")){const i=t.indexOf("'");try{t=t.slice(0,i+1)+t.charAt(i+1).toUpperCase()+t.slice(i+2)}catch{t=t.slice(0,i+1)+t.charAt(i+1)+(t.slice(i+2)?t.slice(i+2):"")}}if(t.includes("-")){const i=t.indexOf("-");try{t=t.slice(0,i+1)+t.charAt(i+1).toUpperCase()+t.slice(i+2)}catch{t=t.slice(0,i+1)+t.charAt(i+1)+(t.slice(i+2)?t.slice(i+2):"")}}return t}else{for(let i=s.length-1;i>=0;i--)if(s[i]===""){s.splice(i);continue}else{try{s[i]=s[i].toLowerCase()}catch{return s[i]}if(s[i]==="de"||s[i]==="dela"||s[i]==="del"||s[i]==="la"||s[i]==="las"||s[i]==="y")if(i===0&&s[i]==="la"){try{s[i]=s[i].charAt(0).toUpperCase()+s[i].slice(1)}catch{s[i]=s[i].charAt(0)+s[i].slice(1)}continue}else continue;else{try{s[i]=s[i].charAt(0).toUpperCase()+s[i].slice(1)}catch{s[i]=s[i].charAt(0)+s[i].slice(1)}if(s[i].startsWith("Mc"))try{s[i]=s[i].slice(0,2)+s[i][2].toUpperCase()+s[i].slice(3)}catch{s[i]=s[i].slice(0,2)+s[i][2]+s[i].slice(3)}if(s[i].includes("'")){const r=s[i].indexOf("'");try{s[i]=s[i].slice(0,r+1)+s[i][r+1].toUpperCase()+(s[i].slice(r+2)?s[i].slice(r+2):"")}catch{s[i]=s[i].slice(0,r+1)+(s[i][r+1]?s[i][r+1]:"")+(s[i].slice(r+2)?s[i].slice(r+2):"")}}if(s[i].includes("-")){const r=s[i].indexOf("-");try{s[i]=s[i].slice(0,r+1)+s[i][r+1].toUpperCase()+s[i].slice(r+2)}catch{s[i]=s[i].slice(0,r+1)+(s[i][r+1]?s[i][r+1]:"")+(s[i].slice(r+2)?s[i].slice(r+2):"")}}}}return s.join(" ")}}calculateDuration(t){return H.getDateDiff(t.end,t.start,t.unit)}formatPhone(t){const i=(""+t).replace(/\D/g,"").match(/^(\d{3})(\d{3})(\d{4})$/);return i?`(${i[1]}) ${i[2]}-${i[3]}`:null}async converter(t){let s;return t&&Array.isArray(t)?(s=[],t.forEach(i=>{const r=JSON.parse(i);s.push(r)})):s=JSON.parse(t),s}async decode(t){if(t){const s=document.createElement("div");return s.innerHTML=t,s.childNodes[0].nodeValue}else return""}fileToBase64(t){return new Promise(s=>{const i=new FileReader;i.onload=function(r){s(r.target.result.split(",")[1])},i.readAsDataURL(t)})}}function Oa(){return{helpers:new Sa}}const{helpers:Jt}=Oa(),Ca=25,Fd=J("assessment",{state:()=>({step:0,loading:!0,tools:[],testData:{allQuestions:[],selectedQuestions:[],completedQuestions:[],nextQuestions:null,testStatus:"In Progress",currentScope:0,loadIteration:0,qb:{testRecord:{3:{field:"Record ID#",value:24712},6:{field:"Related Kiosk Profile"},13:{field:"Related Hiring Center"},15:{field:"Related Employee"},17:{field:"Related Craft"},23:{field:"Related Available Language"},34:{field:"Test Completion Timestamp"},37:{field:"Test Status"},testQuestions:[{6:{field:"Related Test"},7:{field:"Related All Test Question"},11:{field:"Status"},questionResponse:[{6:{field:"Related Test Question"},8:{field:"Related Question Alternative"}}]}]}}},testId:null,qb:null,questions:[],answers:[],toolListId:null,toolChecklists:[]}),getters:{questionsLoaded(){return this.testData.allQuestions.length>0},nextQuestions(){return this.testData.nextQuestions?this.testData.nextQuestions:null},completedOnIteration(){return this.testData.completedQuestions.filter(e=>e.iteration===this.testData.loadIteration)},algo(){const e=this.testData.completedQuestions.filter(t=>t.selection[14]===1&&t.iteration===this.testData.loadIteration);return e!==void 0?e:[]},ratio(){return isNaN(this.algo.length/this.completedOnIteration.length)?0:(this.algo.length/this.completedOnIteration.length).toFixed(2)},nextScope(){return this.completedOnIteration.length>0?this.ratio>.6?this.testData.currentScope<6?this.testData.currentScope+1:this.testData.currentScope:this.ratio===.6?this.testData.currentScope:this.testData.currentScope>2?this.testData.currentScope-1:this.testData.currentScope:this.testData.currentScope},nextIteration(){return this.testData.loadIteration+1},timeToStop(){const e=this.testData.completedQuestions.filter(s=>s[23]>this.testData.currentScope).length,t=this.testData.completedQuestions.filter(s=>s[23]<this.testData.currentScope).length;return e>0&&t>0&&this.testData.completedQuestions.length>=Ca},toolChecklistData(){const{testForCraft:e}=Y(),{hiringCenter:t}=z(),{employeeData:s}=_(),i={6:{value:this.testId?this.testId:0},11:{value:t?t[3]:0},15:{value:s[3]?s[3]:0},20:{value:e[15]?e[15]:0},22:{value:e[16]?e[16]:0}};return{to:"bp3gcpk2w",data:[i],fieldsToReturn:[3]}},toolsData(){const e=[];return this.tools.length>0&&this.tools.forEach(t=>{const s={6:{value:this.toolListId?this.toolListId:0},7:{value:t.value}};e.push(s)}),{to:"bp928wac2",data:e,fieldsToReturn:[3]}},availableToolChecklists:e=>e.toolChecklists,toolsForCraft(){const{testForCraft:e}=Y();if(e){const t=this.availableToolChecklists.find(s=>s[6]===e[3]);return t!==void 0?t[11]:[]}else return[]},toolListInstructions(){const{testForCraft:e}=Y();if(e){const t=this.availableToolChecklists.find(s=>s[6]===e[3]);return t!==void 0?t[13]:null}else return null},toolListName(){const{testForCraft:e}=Y();if(e){const t=this.availableToolChecklists.find(s=>s[6]===e[3]);return t!==void 0?t[8]:null}else return null}},actions:{async startAssessment(){const{profile:e}=ie(),{testForCraft:t}=Y(),{hiringCenter:s}=z(),{employeeData:i,updateEmployeeData:r}=_(),a={13:{value:s[3]},15:{value:i[3]},17:{value:t[15]},23:{value:t[16]},51:{value:t[3]}};e[3]!==void 0&&Object.assign(a,{6:{value:e[3].value}});const{data:n}=await x.upsertRecordsXML({to:"bp3gckirf",data:[a],fieldsToReturn:[3]});if(n[0])return this.testId=n[0][3],r({fields:{122:{value:8}}}),n[0];throw"Something went wrong"},async finishAssessment(){const{metadata:e}=await x.upsertRecordsXML({to:"bp3gckirf",data:[{3:{value:this.testId},34:{value:new Date},37:{value:"Complete"}}],mergeFieldId:3,fieldsToReturn:[3]});if(e.updatedRecordIds[0]){const{data:t}=await x.upsertRecordsXML({to:"bp9np6ckn",data:this.questions,fieldsToReturn:[3,7]});if(!t.length>0)throw"Cannot save questions";{const s=[];t.forEach(r=>{const a=this.answers.findIndex(n=>n.link===r[7]);if(a>-1){const n={6:{value:r[3]},8:{value:this.answers[a][8]}};s.push(n)}});const{metadata:i}=await x.upsertRecordsXML({to:"bp9np9vk7",data:s,fieldsToReturn:[3]});if(!i.createdRecordIds.length===this.answers.length)throw"Something went wrong";return{success:!0}}}else throw"Cannot finish assessment"},async startToolChecklist(){const{data:e}=await x.upsertRecordsXML(this.toolChecklistData);if(e[0])return this.toolListId=e[0][3],e[0];throw"Cannot start checklist"},async finishToolChecklist(){const{metadata:e}=await x.upsertRecordsXML({to:"bp3gcpk2w",data:[{3:{value:this.toolListId},18:{value:new Date},17:{value:"Complete"}}],mergeFieldId:3,fieldsToReturn:[3]});if(e.updatedRecordIds[0]){const{data:t}=await x.upsertRecordsXML(this.toolsData);if(t.length>0)return!0;throw"Cannot save tools"}else throw"Cannot finish tool checklist"},async submitToQB(){const{profile:e}=ie(),{testForCraft:t}=Y(),{hiringCenter:s}=z(),{devEmployee:i}=_();this.testData.qb.testRecord[6].value=e[3].value,this.testData.qb.testRecord[13].value=s[3],this.testData.qb.testRecord[15].value=i[3],this.testData.qb.testRecord[17].value=t[15],this.testData.qb.testRecord[23].value=t[16],this.testData.qb.testRecord[34].value=Date.now(),this.testData.qb.testRecord[37].value="Complete";const r=[];return this.testData.completedQuestions.forEach(a=>{const n={6:{value:this.testData.qb.testRecord[3].value},7:{value:a[8]},11:{value:"Complete"},questionResponse:[{6:{value:0},8:{value:a.selection[3]}}]};r.push(n)}),this.testData.qb.testRecord.testQuestions=r,this.testData.qb.testRecord},async updateAssessment(e){return this.step=e.next,e.type==="tools"&&(this.tools=e.values),!0},updateStep(e){this.step=e},dataLoaded(){this.loading=!1},async getAllQuestions(){const{testForCraft:e}=Y();if(this.questionsLoaded)return!0;if(e)try{const{data:t}=await x.fetchFromStructureApp({fields:[{6:{value:"bqamed7sr"},7:{value:"Table Query"},8:{value:`{'6'.EX.'${e[9]}'}`},9:{value:1},14:{value:17}}]});if(t)return t.forEach(async s=>{s[20]&&(s.hasImage=!0,s.imageData={src:s[22],alt:s[21]}),s[19].forEach(i=>{i.value=i[3],i.label=i[6]})}),this.testData.allQuestions=t,!0;throw"Something went wrong"}catch(t){console.log(t);const{data:s}=await x.doQuery({from:"bqamed7sr",where:`{'6'.EX.'${e[9]}'}`,select:[3,6,8,9,10,11,12,13,14,18,19,20,21,22,23,24],sortBy:[{fieldId:11,order:"ASC"}]});if(s)return s.forEach(async i=>{i[20]==="Yes"&&(i.hasImage=!0,i.imageData={src:i[22],alt:i[21]}),i[19]=await Jt.converter(i[19]),i[24]=await Jt.converter(i[24]),i[19].forEach(r=>{r.value=r[3],r.label=r[6]})}),this.testData.allQuestions=s,!0;throw"Something went wrong"}else throw"No test for craft"},async loadQuestionGroup(e,t){if(e!==void 0){const s=this.testData.allQuestions.filter(i=>i[23]===e);if(s.length>0)return s.length>5&&(s.length=5),s.forEach(i=>{i.response=null;const r=this.testData.allQuestions.findIndex(a=>a[3]===i[3]);r>-1&&this.testData.allQuestions.splice(r,1)}),this.testData.nextQuestions=s,this.testData.currentScope=e,this.testData.loadIteration=t,s;throw"There are no questions"}},async completeQuestion(e){const t=e.response,s=e[19].find(a=>a.value===t);if(s!==void 0)e.selection=s;else throw"No selection";e.iteration=this.testData.loadIteration,e.storedData={};const i={6:{value:this.testId},7:{value:e[8]},11:{value:"Complete"}};this.questions.push(i);const r={6:null,8:e.selection[3],link:e[8]};return this.answers.push(r),this.testData.completedQuestions.push(e),this.testData.nextQuestions=this.testData.nextQuestions.filter(a=>a[3]!==e[3]),{data:{nextQuestions:this.timeToStop?[]:this.testData.nextQuestions,scope:this.nextScope,iteration:this.nextIteration}}},async fetchCraftToolsFromStorage(){const e=await y.getItem(I.storageToolCheckList);if(e){for(let t=0;t<e.length;t++){const s=Object.keys(e[t]);for(let i=0;i<s.length;i++){typeof e[t][s[i]]=="object"&&e[t][s[i]]!==null&&Object.prototype.hasOwnProperty.call(e[t][s[i]],"$d")&&(e[t][s[i]]=d(e[t][s[i]].$d));try{e[t][s[i]].endsWith(".000Z")&&(e[t][s[i]]=d(e[t][s[i]]))}catch{}}}this.setCraftTools(e,!1)}else return!1},async fetchCraftTools(e){await this.fetchCraftToolsFromStorage();const t=[{6:{value:"bqamh3rpi"},7:{value:"Table Query"},8:{value:"{'10'.EX.'Active'}"},9:{value:1},14:{value:12}}];if(this.toolChecklists.length===0||e){const{data:s}=await x.fetchFromStructureApp({fields:t});return this.setCraftTools(s,!0),s}else return this.toolChecklists},setCraftTools(e,t){this.toolChecklists=e,t&&y.setItem(I.storageToolCheckList,e)}}}),V=J("application",{state:()=>({formOptions:{crafts:[],experience:[],companies:[],credentials:[],relationships:[],employment:[],contactMethods:[]},voluntaryFormOptions:{affirmative:[],veterans:[],disability:{pages:[],options:[],form:{}}},formOptionsLoading:!1,voluntaryFormsLoading:!1,evergreenJobs:[]}),getters:{craftOptions:e=>e.formOptions.crafts,experienceOptions:e=>e.formOptions.experience,companyOptions:e=>e.formOptions.companies,credentialOptions:e=>e.formOptions.credentials,relationshipOptions:e=>e.formOptions.relationships,employmentOptions:e=>e.formOptions.employment,contactMethodOptions:e=>e.formOptions.contactMethods,affirmativeOptions:e=>e.voluntaryFormOptions.affirmative,veteranOptions:e=>e.voluntaryFormOptions.veterans,disabilityOptions:e=>e.voluntaryFormOptions.disability.options,disabilityPages:e=>e.voluntaryFormOptions.disability.pages,disabilityForm:e=>e.voluntaryFormOptions.disability.form,evergreenJobOptions:e=>e.evergreenJobs,formOptionsLoadingState:e=>e.formOptionsLoading,voluntaryLoadingState:e=>e.voluntaryFormsLoading,credentialGroups(){const e=[];return this.formOptions.credentials.forEach(t=>{const s={value:t[7],label:t[8],acronym:t[20],number:t[21]};e.find(r=>r.value===s.value)||e.push(s)}),e.sort((t,s)=>t.number>s.number?1:t.number<s.number?-1:0)},compiledCredentials(){const e=[];return this.credentialGroups.forEach(t=>{const s=t.value;t.list=[],this.formOptions.credentials.forEach(i=>{i[7]===s&&t.list.push(i)}),e.push(t)}),e}},actions:{async fetchFormOptions(){this.formOptionsLoading=!0;const e=[this.fetchExperienceOptions(),this.fetchContactMethodOptions(),this.fetchEmploymentOptions(),this.fetchCompanyOptions(),this.fetchCraftOptions(),this.fetchRelationshipOptions(),this.fetchEverGreenJobs()],t=await Promise.allSettled(e);return this.formOptionsLoading=!1,t},async fetchVoluntaryForms(){this.voluntaryFormsLoading=!0;const e=[this.fetchAffirmativeOptions(),this.fetchVeteranStatusOptions(),this.fetchDisabilityPages()],t=await Promise.allSettled(e);return this.voluntaryFormsLoading=!1,t},async fetchExperienceOptions(e){const t=[{7:{value:"Experience Options"},9:{value:1},14:{value:44}}];if(this.formOptions.experience.length===0||e){const{data:s}=await x.fetchFromRecruitingApp({fields:t});return this.setExperienceOptions(s,!0),s}else return this.formOptions.experience},setExperienceOptions(e,t){this.formOptions.experience=e,t&&y.setItem(I.storageExperienceOptions,e)},async fetchContactMethodOptions(e){const t=[{7:{value:"Contact Methods"},9:{value:1},14:{value:15}}];if(this.formOptions.contactMethods.length===0||e){const{data:s}=await x.fetchFromRecruitingApp({fields:t});return this.setContactMethods(s,!0),s}else return this.formOptions.contactMethods},setContactMethods(e,t){this.formOptions.contactMethods=e,t&&y.setItem(I.storageContactMethods,e)},async fetchEmploymentOptions(e){const t=[{7:{value:"Employment Options"},9:{value:1},14:{value:15}}];if(this.formOptions.employment.length===0||e){const{data:s}=await x.fetchFromRecruitingApp({fields:t});return this.setEmploymentOptions(s,!0),s}else return this.formOptions.employment},setEmploymentOptions(e,t){this.formOptions.employment=e,t&&y.setItem(I.storageEmploymentOptions,e)},async fetchCompanyOptions(e){const t=[{7:{value:"Company Options"},9:{value:1},14:{value:15}}];if(this.formOptions.companies.length===0||e){const{data:s}=await x.fetchFromStructureApp({fields:t});return this.setCompanyOptions(s,!0),s}else return this.formOptions.companies},setCompanyOptions(e,t){this.formOptions.companies=e,t&&y.setItem(I.storageCompanyOptions,e)},async fetchCraftOptions(e){const t=[{6:{value:"bp2pcb379"},7:{value:"Table Query"},8:{value:"{'12'.EX.'Yes'}"},9:{value:1},14:{value:59}}];if(this.formOptions.crafts.length===0||e){const{data:s}=await x.fetchFromStructureApp({fields:t});return this.setCraftOptions(s,!0),s}else return this.formOptions.crafts},setCraftOptions(e,t){this.formOptions.crafts=e,t&&y.setItem(I.storageCraftOptions,e)},async fetchRelationshipOptions(e){const t=[{6:{value:"brux2ptjd"},7:{value:"Table Query"},8:{value:"{'3'.GT.0}"},9:{value:1},14:{value:15}}];if(this.formOptions.relationships.length===0||e){const{data:s}=await x.fetchFromHiringApp({fields:t});return this.setRelationshipOptions(s,!0),s}else return this.formOptions.relationships},setRelationshipOptions(e,t){this.formOptions.relationships=e,t&&y.setItem(I.storageRelationshipOptions,e)},async fetchCredentialOptions(e){const t=[{6:{value:"bp2cdv2rd"},7:{value:"Table Query"},8:{value:"{'3'.GT.0}"},9:{value:1},14:{value:22}}];if(this.formOptions.credentials.length===0||e){const{data:s}=await x.fetchFromCredentialsAndTrainingApp({fields:t});return this.setCredentialOptions(s,!0),s}else return this.formOptions.credentials},setCredentialOptions(e,t){this.formOptions.credentials=e,t&&y.setItem(I.storageCredentialOptions,e)},async fetchAffirmativeOptions(e){const t=[{6:{value:"bqamkyebu"},7:{value:"Table Query"},8:{value:"{'7'.EX.'Active'}"},9:{value:1},14:{value:18}}];if(this.voluntaryFormOptions.affirmative.length===0||e){const{data:s}=await x.fetchFromCredentialsAndTrainingApp({fields:t});return this.setAffirmativeOptions(s,!0),s}else return this.voluntaryFormOptions.affirmative},setAffirmativeOptions(e,t){this.voluntaryFormOptions.affirmative=e,t&&y.setItem(I.storageAffirmativeOptions,e)},async fetchVeteranStatusOptions(e){const t=[{6:{value:"bqampwqag"},7:{value:"Table Query"},8:{value:"{'8'.EX.'Active'}"},9:{value:1},14:{value:14}}];if(this.voluntaryFormOptions.veterans.length===0||e){const{data:s}=await x.fetchFromCredentialsAndTrainingApp({fields:t});return this.setVeteranStatusOptions(s,!0),s}else return this.voluntaryFormOptions.veterans},setVeteranStatusOptions(e,t){this.voluntaryFormOptions.veterans=e,t&&y.setItem(I.storageVeteranStatusOptions,e)},async fetchDisabilityPages(e){const{hasDisability:t,kioskAccount:s}=Y();if(t){const i=[{6:{value:"bp96dpdmp"},7:{value:"Table Query"},8:{value:`{26.EX.${s.voluntaryForms.disability[9]}}AND{'46'.EX.'Active'}`},9:{value:1},14:{value:59}}],r=Object.assign({},s.voluntaryForms.disability);if(r.controlNumber=r[11],r.expiration=r[13],r.formId=r[12],r.rid=r[9],r.title=r[10],r.pages=this.voluntaryFormOptions.disability.pages,this.voluntaryFormOptions.disability.pages.length===0||e){const{data:a}=await x.fetchFromCredentialsAndTrainingApp({fields:i});return this.setDisabilityPages(a,!0),r.pages=a,this.setDisabilityForm(r,!0),a}else return this.voluntaryFormOptions.disability.pages}else return!1},setDisabilityPages(e,t){this.voluntaryFormOptions.disability.pages=e,t&&y.setItem(I.storageDisabilityPages,e)},setDisabilityForm(e,t){this.voluntaryFormOptions.disability.form=e,t&&y.setItem(I.storageDisabilityForm,e)},async fetchEverGreenJobs(e){const t=[{6:{value:"bpzpqe2q5"},7:{value:"Jobs"},8:{value:"{'60'.EX.'Yes'}AND{'71'.XEX.'Pending'}"},9:{value:1},14:{value:94}}];if(this.evergreenJobs.length===0||e){const{data:s}=await x.fetchFromStructureApp({fields:t});return this.setEverGreenJobs(s,!0),s}else return this.evergreenJobs},setEverGreenJobs(e,t){this.evergreenJobs=e,t&&y.setItem(I.storageEverGreenJobs,e)}}});var Re={get dev(){return!1},get baseURL(){return this.dev?this.productionURL:this.productionURL},get token(){return this.dev?this.prodToken:this.prodToken},productionURL:"https://api.disa.com/api",devURL:"https://apisandbox.disa.com/api",tokenType:"Basic",prodToken:"YnJhbmRzYWZ3YXlhcGk6WFhUSkxXNFMy",devToken:"QnJhbmRzYWZ3YXlhcGk6V0RYQ1YxTEM2"};class Ta{constructor(t,s){R(this,"axiosIns",null);R(this,"config",j({},Re));R(this,"isAlreadyFetchingAccessToken",!1);R(this,"subscribers",[]);this.axiosIns=t,this.config=j(j({},this.config),s)}onAccessTokenFetched(t){this.subscribers=this.subscribers.filter(s=>s(t))}addSubscriber(t){this.subscribers.push(t)}async status(t,s,i){const r=[],a=[],n=[];let o={};s[10].forEach(A=>{const O=A.trim().replace("  "," ");n.push({name:O,label:`${O} Status`,status:"N/A",dateLabel:`Last ${O} Test`,date:"N/A",type:"DrugScreen"})}),(s[36]||s[10].includes("Background Only"))&&n.push({name:"Background",label:"Background Status",status:"Inactive",dateLabel:"Background Expiration Date",date:"N/A",type:"Background"});const c=[this.justChecking({ownerId:t.ownerId,socialSecurityNumbers:[t.ssn]},i),this.employeeStatus({employeeIdentifiers:{ssn:t.ssn}},i)],l=await Promise.allSettled(c),h=l[0].value.results;let b=[];if(l[1].status==="rejected")if(!t.firstName||!t.lastName||!t.phoneNumber)b=[];else{const A={employeeIdentifiers:{ssn:t.ssn,externalEmployeeId:Vt(t.externalEmployeeId)?t.externalEmployeeId:""},firstName:t.firstName,lastName:t.lastName,phoneNumber:t.phoneNumber.replace(/[^0-9]/g,""),emailAddress:Vt(t.email)?t.email:""};await this.createEmployee(A,i);try{b=await this.employeeStatus({employeeIdentifiers:{ssn:t.ssn}},i)}catch{b=[]}}else b=l[1].value;return h.length>0&&(o=h[0],o.dateChecked=d(),o.ownerStatus="Inactive",a.push({name:"Last Urine Test",date:d(o.lastUrineTest).isValid()?d(o.lastUrineTest).format("MM/DD/YYYY"):"N/A"}),a.push({name:"Last Hair Test",date:d(o.lastHairTest).isValid()?d(o.lastHairTest).format("MM/DD/YYYY"):"N/A"})),n.forEach(A=>{const O=b.find(E=>{const F=E.policyId.split("-")[1].trim().split("Consortium Policy")[0].trim();return F===A.name?E:(A.name==="DCCHT w/ Randoms"||A.name==="DCCHT w/  Randoms")&&(F==="DCCHT w/Randoms"||F==="DCCHT w/ Randoms")?A:""});A.name==="Background"&&(o.backgrounds==="Active"&&(A.status="Active"),A.date=d(o.backgroundsExpDate).isValid()?d(o.backgroundsExpDate).format("MM/DD/YYYY"):"N/A"),A.name==="NASAP"&&(o.nasapStatus==="Active"&&(A.status="Active"),A.date=d(o.lastNASAPTest).isValid()?d(o.lastNASAPTest).format("MM/DD/YYYY"):"N/A"),A.name.startsWith("DCCHA")&&(A.dateLabel="Last Urine Test",A.date=d(o.lastUrineTest).isValid()?d(o.lastUrineTest).format("MM/DD/YYYY"):"N/A"),A.name.startsWith("DCCHT")&&(A.dateLabel="Last Hair Test",A.date=d(o.lastHairTest).isValid()?d(o.lastHairTest).format("MM/DD/YYYY"):"N/A"),A.name==="DCCOF"&&(a.push({name:"Last Oral Fluid Test",date:d(o.lastOralFluidTest).isValid()?d(o.lastOralFluidTest).format("MM/DD/YYYY"):"N/A"}),A.date=d(o.lastOralFluidTest).isValid()?d(o.lastOralFluidTest).format("MM/DD/YYYY"):"N/A"),O&&(A=j(j({},A),O),A.status=O.policyStatus),r.push(A)}),r.find(A=>A.status==="Inactive"||A.status==="Inactive Retest"||A.status==="INACTIVE"||A.status==="Inactive Pending"||A.status==="")||o.dccStatus!=="ACTIVE"?o.ownerStatus="Inactive":o.ownerStatus="Active",{disaStatus:o,policies:r,testDates:a}}async justChecking(t){return this.axiosIns({method:"post",url:"/justChecking",data:t,withCredentials:!0}).then(s=>s.data).catch(s=>{throw s})}employeeStatus(t,s){return this.axiosIns.post("/employee/status",t,{headers:{Authorization:`Basic ${s}`}}).then(i=>i.data).catch(i=>{throw i})}policies(t){return this.axiosIns.get("/drugTest/policy",{headers:{Authorization:`Basic ${t}`}}).then(s=>s.data).catch(s=>{throw s})}testPurposes(t){return this.axiosIns.get("/drugTest/testPurpose",{headers:{Authorization:`Basic ${t}`}}).then(s=>s.data).catch(s=>{throw s})}clientLocations(t){return this.axiosIns.get("/client/locations",{headers:{Authorization:`Basic ${t}`}}).then(s=>s.data).catch(s=>{throw s})}collectionSites(t,s){let i="/drugTest/collectionSite";return t.collectionSiteId?i=`/drugTest/collectionSite/${t.collectionSiteId}`:t.zipCode&&t.radius?i=`/drugTest/collectionSite/zipCode/${t.zipCode}/radius/${t.radius}`:t.zipCode?i=`/drugTest/collectionSite/zipCode/${t.zipCode}`:t.countryCode&&t.stateProvinceCode&&t.cityName?i=`/drugTest/collectionSite/country/${t.countryCode}/stateProvince/${t.stateProvinceCode}/city/${t.cityName}`:t.countryCode&&t.stateProvinceCode&&(i=`/drugTest/collectionSite/country/${t.countryCode}/stateProvince/${t.stateProvinceCode}`),this.axiosIns.get(i,{headers:{Authorization:`Basic ${s}`}}).then(r=>r.data).catch(r=>{throw r})}orderECCF(t,s){return this.axiosIns.post("/drugTest/eccf/order",t,{headers:{Authorization:`Basic ${s}`}}).then(i=>i.data).catch(i=>{throw i})}validateECCF(t,s){return this.axiosIns.post("/drugTest/eccf/validate",t,{headers:{Authorization:`Basic ${s}`}}).then(i=>i.data).catch(i=>{throw i})}getECCFOrder(t,s){if(!t.authorizationNumber)throw"Authorization Number Required!";let i=`/drugTest/eccf/order/${t.authorizationNumber}`;return t.policyId&&t.authorizationNumber&&(i=`/drugTest/eccf/order/${t.authorizationNumber}/policy/${t.policyId}`),this.axiosIns.get(i,{headers:{Authorization:`Basic ${s}`}}).then(r=>r.data).catch(r=>{throw r})}getECCFOrderStatus(t,s){if(!t.authorizationNumber)throw"Authorization Number Required!";let i=`/drugTest/eccf/order/${t.authorizationNumber}/status`;return t.policyId&&t.authorizationNumber&&(i=`/drugTest/eccf/order/${t.authorizationNumber}/policy/${t.policyId}/status`),this.axiosIns.get(i,{headers:{Authorization:`Basic ${s}`}}).then(r=>r.data).catch(r=>{throw r})}}const Vt=e=>!(typeof e=="undefined"||e===null||e==="");function $a(e,t){return{disa:new Ta(e,t)}}const ja=bs(xs.create({baseURL:Re.baseURL,timeout:5e4,headers:{"Content-Type":"application/json",Authorization:`${Re.tokenType} ${Re.token}`}}),{maxRequests:6,perMilliseconds:1e3}),{disa:Ra}=$a(ja,{}),De=J("hiring",{state:()=>({deployments:[],dispatches:[],inprocesses:[],assignments:[],flaggedAssignments:[],newEmployee:{}}),getters:{userAccess(){const{userAccess:e}=X();return e||[]},deploymentsForProject(){const{active:e}=X();return this.modifiedDeployment.length>0?this.modifiedDeployment.filter(t=>t.map.pid===e[3]):[]},alreadyArrived(){const{active:e}=X();return this.modifiedDeployment.filter(t=>t[20]==="Complete"&&t.map.pid===e[3])},deploymentQuery(){let e="";return this.userAccess.forEach((t,s)=>{e+=`{'134'.EX.'${t[3]}'}${s<this.userAccess.length-1?"OR":""}`}),`(${e})AND({'33'.OAF.'today'}OR{'33'.IR.'last 10 d'})AND({'20'.EX.'In Process'}OR{'20'.EX.'Complete'})AND{'128'.EX.'Yes'}AND({'27'.EX.'6'}OR{'27'.EX.'7'})`},dispatchQuery(){let e="";return this.userAccess.forEach((t,s)=>{e+=`{'94'.EX.'${t[3]}'}${s<this.userAccess.length-1?"OR":""}`}),`(${e})AND{'17'.EX.'In Process'}`},inProcessQuery(){let e="";return this.userAccess.forEach((t,s)=>{e+=`{'108'.EX.'${t[3]}'}${s<this.userAccess.length-1?"OR":""}`}),`(${e})AND{'37'.EX.'In Process'}`},assignmentQuery(){let e="";return this.userAccess.forEach((t,s)=>{e+=`{'74'.EX.'${t[3]}'}${s<this.userAccess.length-1?"OR":""}`}),`(${e})AND{'21'.EX.'In Process'}AND{'102'.EX.'Active'}`},pipelineForProject(){const{active:e}=X();return this.modifiedInProcess.concat(this.modifiedDispatch).concat(this.modifiedDeployment).filter(s=>s.map.pid===e[3])},assignmentsForProject(){const{active:e}=X();return this.modifiedAssignments.filter(t=>t.map.pid===e[3])},modifiedInProcess(){const e=[];return this.inprocesses.forEach(t=>{const s={pid:t[108],name:t[39],phone:t[14],status:"In Process",offerDate:t[197].$d,fullJob:t[106],craft:t[175],job:t[120],start:null,jobNumber:t[44],workdayId:t[216]};Object.assign(t,{map:s}),e.push(t)}),e},modifiedDeployment(){const e=[];return this.deployments.forEach(t=>{const s={pid:t[134],name:t[31],phone:t[42],status:"Deployed",offerDate:t[144]===void 0?"":t[144].$d,fullJob:t[45],craft:t[132],job:t[60],start:t[33],jobNumber:t[85],workdayId:t[152],contact:t[186]};Object.assign(t,{map:s}),e.push(t)}),e},modifiedDispatch(){const e=[];return this.dispatches.forEach(t=>{const s={pid:t[157],name:t[25],phone:t[14],status:"In Process",offerDate:t[165].$d,fullJob:t[45],craft:t[141],job:t[76],start:null,jobNumber:t[63],workdayId:t[178]};Object.assign(t,{map:s}),e.push(t)}),e},modifiedAssignments(){const e=[];return this.assignments.forEach(t=>{const s={pid:t[74],name:t[75],phone:t[76],status:"Arrived",offerDate:t[79].$d,fullJob:t[20],craft:t[68],job:t[33],start:t[1].$d,jobNumber:t[105],workdayId:t[104]};Object.assign(t,{map:s}),e.push(t)}),e},getFlaggedAssignments(){return this.assignmentsForProject.filter(e=>e[112])},getNewEmployee:e=>e.newEmployee},actions:{refreshAssignment({assignment:e}){const t=this.assignments.findIndex(s=>s[3]===e[3]);t>-1&&(this.assignments[t]=e)},async checkDisa({project:e,roster:t}){const s=[];t.forEach(r=>{r.employee[188].length===9&&s.push(r.employee[188])});const i={ownerId:e[322],socialSecurityNumbers:s};try{const a=(await Ra.justChecking(i)).results;console.log(a);const n=[];a.forEach(c=>{c.dateChecked=d(),e[321][36]&&c.dccStatus==="ACTIVE"||c.dccStatus==="ACTIVE"?c.ownerStatus="Active":c.ownerStatus="Inactive";const l=c.socialSecurityNumber.slice(c.socialSecurityNumber.length-4),h=c.name.toLowerCase().trim(),b=t.filter(w=>w.employee[188].slice(w.employee[188].length-4)===l?w:null);if(b.length===1){const w={6:{value:b[0].employee[3]},7:{value:b[0].offer[3]},10:{value:JSON.stringify(c)}};n.push(w)}else if(b.length>1){const w=b.find(A=>{const O=A.employee[20].toLowerCase().trim().split(),E=A.employee[22].toLowerCase().trim().split();return h.includes(O)||h.includes(E)?A:null});if(w){const A={6:{value:w.employee[3]},7:{value:w.offer[3]},10:{value:JSON.stringify(c)}};n.push(A)}}else console.log(c)});const{data:o}=await x.upsertRecordsXML({to:"bsfjg3kz9",data:n,fieldsToReturn:[15],formatObject:15});if(!o.length>0)throw"Something went wrong";o.forEach(c=>{const l=this.assignments.findIndex(h=>h.employee[3]===c[15][6]);l>-1?this.assignments[l].employee[556]=c[15]:console.log("no employee found")})}catch(r){throw console.log(r),"Something went wrong"}},async checkHiringData(){const{getUser:e}=T();if(e[11]===11)return await this.getDeployments();if(e[11]===5)return await this.getHiringData()},async getHiringData(){const e=await this.getDeployments();return this.getDispatches(),this.getInProcesses(),this.getAssignments(),e},async getInProcesses(){if(this.inprocesses.length===0){const{data:e}=await x.fetchFromHiringApp({fields:[{6:{value:"bp3gawbee"},7:{value:"Table Query"},8:{value:this.inProcessQuery},9:{value:1},14:{value:239}}]});return this.inprocesses=e,e}else return this.inprocesses},async getDispatches(){if(this.dispatches.length===0){const{data:e}=await x.fetchFromHiringApp({fields:[{6:{value:"bp3gaxedv"},7:{value:"Table Query"},8:{value:this.dispatchQuery},9:{value:1},14:{value:193}}]});return this.dispatches=e,e}else return this.dispatches},async getDeployments(){if(this.deployments.length===0){const{data:e}=await x.fetchFromHiringApp({fields:[{6:{value:"bp3gaymc3"},7:{value:"Table Query"},8:{value:this.deploymentQuery},9:{value:1},14:{value:201}}]});return this.deployments=e,e}else return this.dispatches},async getAssignments(){if(this.assignments.length===0){const{data:e}=await x.fetchFromHiringApp({fields:[{6:{value:"bp3gazpqj"},7:{value:"Table Query"},8:{value:this.assignmentQuery},9:{value:1},14:{value:132}}]});return console.log(e),this.assignments=e,e}else return this.assignments},async updateArrival({row:e,added:t}){const s=e,i=this.deployments.find(r=>r[3]===s[3]?r:!1);i&&(t?(await this.addAssignment(i),await this.editEmployee({id:i.employee[3],status:7}),this.editDeployment(i[3],"Complete")):(await this.cancelAssignment(i),await this.editEmployee({id:i.employee[3],status:6}),this.editDeployment(i[3],"In Process")))},async editEmployee({id:e,status:t}){const{data:s}=await x.upsertRecordsXML({to:"bp3gb7ng2",data:[{3:{value:e},79:{value:t}}],fieldsToReturn:[3]});if(s[0]===void 0)throw"Something went wrong";return s[0]},async editDeployment(e,t){const{data:s}=await x.upsertRecordsXML({to:"bp3gaymc3",data:[{3:{value:e},20:{value:t},22:{value:new Date}}],fieldsToReturn:[201],formatObject:201});if(s[0]!==void 0){const i=this.deployments.findIndex(r=>r[3]===s[0][201][3]);i>-1&&(this.deployments[i]=s[0][201])}},async addAssignment(e){const{data:t}=await x.upsertRecordsXML({to:"bp3gazpqj",data:[{6:{value:e[3]},13:{value:e[15]},18:{value:e.employee[3]},60:{value:""}}],fieldsToReturn:[108],formatObject:108});if(t[0]===void 0)throw"There was an error";return this.assignments.push(t[0][108]),t[0]},async cancelAssignment(e){const{data:t}=await x.upsertRecordsXML({to:"bp3gazpqj",data:[{3:{value:e.assignment[0][3]},22:{value:new Date},21:{value:"Canceled"},19:{value:""},60:{value:""}}],fieldsToReturn:[108],formatObject:108});if(t[0]===void 0)throw"There was an error";{const s=this.assignments.findIndex(i=>i[3]===t[0][108][3]);s>-1&&this.assignments.splice(s,1)}return t[0]},async flagAssignment({record:e,status:t}){const{data:s}=await x.upsertRecordsXML({to:"bp3gazpqj",data:[{3:{value:e[3]},112:{value:t}}],fieldsToReturn:[108],formatObject:108});if(s[0]===void 0)throw"There was an error";{const i=this.assignments.findIndex(r=>r[3]===s[0][108][3]);i>-1&&(this.assignments[i]=s[0][108])}return s[0]},updateNewEmployee({info:e}){for(const[t,s]of Object.entries(e))this.newEmployee[t]===void 0?Object.assign(this.newEmployee,{[t]:{value:s}}):this.newEmployee[t]=s}}}),Gt=J("request",{state:()=>({requests:[],newRequest:{},addedClassifications:[],addedNames:[]}),getters:{getClassifications(){return this.addedClassifications},getNames(){const e=[];return this.addedClassifications.forEach(t=>{t.names.forEach(s=>{e.push(s)})}),e},activeProject(){const{active:e}=X();return e},requestOptions(){return{contacts:[...new Map(this.activeProject.contacts.map(e=>[e[18],e])).values()],crafts:this.activeProject.crafts,jobNumbers:this.activeProject.jobNumbers,locations:this.activeProject.locations,perdiem:this.activeProject.perdiem}},siteContacts(){return[...new Map(this.activeProject.contacts.map(e=>[e[18],e])).values()]},requestQuery(){const{userAccess:e}=T();let t="";return e.forEach((s,i)=>{t+=`{'6'.EX.'${s[9]}'}${i<e.length-1?"OR":""}`}),`(${t})AND{'14'.XEX.'Canceled'}AND{'147'.XEX.'6'}`},modifiedOpenRequests(){const{active:e}=X(),{modifiedInProcess:t,modifiedDispatch:s,modifiedDeployment:i,modifiedAssignments:r}=De(),a=[];return e.openRequests.forEach(n=>{n.classes.forEach(c=>{Object.assign(c,{duration:c[17]==="Closed"?d.duration(d(c[50].$d).diff(d(c[29].$d))).humanize():d(c[50].$d).fromNow(),aboveAvg:c[23]>c.avgRate,aboveAmount:c[23]>c.avgRate?`$ ${(c[23]-c.avgRate).toFixed(2)} above average`:"",balance:c[18]-c.offers.filter(l=>l[21]==="Accepted").length,offers:c.offers,offersCount:c.offers.length,accepted:c.offers.filter(l=>l[21]==="Accepted"),rejected:c.offers.filter(l=>l[21]==="Rejected"),rescinded:c.offers.filter(l=>l[21]==="Rescinded"),need:c[18],title:`${c[43]} ${c[12]}`})});const o={openDate:n[82],closedDate:n[86],id:n[3],pid:n[6],office:n[103],jobNumber:n[27],offers:n.offers,offersCount:n.offers.length,accepted:n.offers.filter(c=>c[21]==="Accepted"),rejected:n.offers.filter(c=>c[21]==="Rejected"),rescinded:n.offers.filter(c=>c[21]==="Rescinded"),deployNumber:n[243],balance:n.classes.reduce((c,l)=>c+l[18],0)-n.offers.filter(c=>c[21]==="Accepted").length,need:n.classes.reduce((c,l)=>c+l[18],0),inprocesses:t.filter(c=>c[138]===n[3]),dispatches:s.filter(c=>c[95]===n[3]),deployments:i.filter(c=>c[80]===n[3]),assignments:r.filter(c=>c[109]===n[3]),status:n[14],hot:n[121],duration:d(n[82].$d).fromNow()};Object.assign(n,{map:o}),a.push(n)}),a},modifiedClosedRequests(){const{active:e}=X(),{modifiedInProcess:t,modifiedDispatch:s,modifiedDeployment:i,modifiedAssignments:r}=De(),a=[];return e.closedRequests.forEach(n=>{n.classes.forEach(c=>{Object.assign(c,{duration:d.duration(d(c[50].$d).diff(d(c[29].$d))).humanize(),balance:c[18]-c.offers.filter(l=>l[21]==="Accepted").length,offers:c.offers,offersCount:c.offers.length,accepted:c.offers.filter(l=>l[21]==="Accepted"),rejected:c.offers.filter(l=>l[21]==="Rejected"),rescinded:c.offers.filter(l=>l[21]==="Rescinded"),need:c[18],title:`${c[43]} ${c[12]}`})});const o={created:d(n[82].$d).fromNow(),openDate:n[82],closedDate:n[86],id:n[3],pid:n[6],office:n[103],jobNumber:n[27],need:n.classes.reduce((c,l)=>c+l[18],0),offers:n.offers,offersCount:n.offers.length,accepted:n.offers.filter(c=>c[21]==="Accepted"),rejected:n.offers.filter(c=>c[21]==="Rejected"),rescinded:n.offers.filter(c=>c[21]==="Rescinded"),deployNumber:n[243],balance:n.classes.reduce((c,l)=>c+l[18],0)-n.offers.filter(c=>c[21]==="Accepted").length,inprocesses:t.filter(c=>c[138]===n[3]),dispatches:s.filter(c=>c[95]===n[3]),deployments:i.filter(c=>c[80]===n[3]),assignments:r.filter(c=>c[109]===n[3]),status:n[14],hot:n[121],duration:d.duration(d(n[82].$d).diff(d(n[86].$d))).humanize(),durationRaw:d.duration(d(n[82].$d).diff(d(n[86].$d))).as("milliseconds")};Object.assign(n,{map:o}),a.push(n)}),a},modifiedPendingRequests(){const{active:e}=X(),{modifiedInProcess:t,modifiedDispatch:s,modifiedDeployment:i,modifiedAssignments:r}=De(),a=[];return e.pendingRequests.forEach(n=>{n.classes.forEach(c=>{Object.assign(c,{duration:d.duration(d(c[50].$d).diff(d(c[29].$d))).humanize(),balance:c[18]-c.offers.filter(l=>l[21]==="Accepted").length,offers:c.offers,offersCount:c.offers.length,accepted:c.offers.filter(l=>l[21]==="Accepted"),rejected:c.offers.filter(l=>l[21]==="Rejected"),rescinded:c.offers.filter(l=>l[21]==="Rescinded"),need:c[18],title:`${c[43]} ${c[12]}`})});const o={created:d(n[82].$d).fromNow(),openDate:n[82],closedDate:n[86],id:n[3],pid:n[6],office:n[103],jobNumber:n[27],need:n.classes.reduce((c,l)=>c+l[18],0),offers:n.offers,offersCount:n.offers.length,accepted:n.offers.filter(c=>c[21]==="Accepted"),rejected:n.offers.filter(c=>c[21]==="Rejected"),rescinded:n.offers.filter(c=>c[21]==="Rescinded"),deployNumber:n[243],balance:n.classes.reduce((c,l)=>c+l[18],0)-n.offers.filter(c=>c[21]==="Accepted").length,inprocesses:t.filter(c=>c[138]===n[3]),dispatches:s.filter(c=>c[95]===n[3]),deployments:i.filter(c=>c[80]===n[3]),assignments:r.filter(c=>c[109]===n[3]),status:n[14],hot:n[121],duration:d.duration(d(n[82].$d).diff(d(n[86].$d))).humanize(),durationRaw:d.duration(d(n[82].$d).diff(d(n[86].$d))).as("milliseconds")};Object.assign(n,{map:o}),a.push(n)}),a.sort((n,o)=>n[1].$d>o[1].$d?-1:1)},openRequestsForProject(){return this.modifiedOpenRequests.length>0?this.modifiedOpenRequests:[]},closedRequestsForProject(){return this.modifiedClosedRequests.length>0?this.modifiedClosedRequests:[]},pendingRequestsForProject(){return this.modifiedPendingRequests.length>0?this.modifiedPendingRequests:[]},openRequestsForProjectSummary(){const e=[];this.openRequestsForProject.forEach(i=>{i.classes.forEach(r=>{e.push(r)})});const{length:t}=e,s=e.reduce((i,r)=>i+r[23]/t,0);return{requestCount:this.openRequestsForProject.length,classCount:this.openRequestsForProject.reduce((i,r)=>i+r.classes.length,0),need:this.openRequestsForProject.reduce((i,r)=>i+r.map.need,0),offers:this.openRequestsForProject.reduce((i,r)=>i+r.map.offersCount,0),balance:this.openRequestsForProject.reduce((i,r)=>i+r.map.balance,0),avgRate:s.toFixed(2)}},closedRequestsForProjectSummary(){const e=[];this.closedRequestsForProject.forEach(i=>{i.classes.forEach(r=>{e.push(r)})});const{length:t}=e,s=e.reduce((i,r)=>i+r[23]/t,0);return{requestCount:this.closedRequestsForProject.length,classCount:this.closedRequestsForProject.reduce((i,r)=>i+r.classes.length,0),need:this.closedRequestsForProject.reduce((i,r)=>i+r.map.need,0),offers:this.closedRequestsForProject.reduce((i,r)=>i+r.map.offersCount,0),balance:this.closedRequestsForProject.reduce((i,r)=>i+r.map.balance,0),avgRate:s.toFixed(2),avgDuration:d.duration(this.closedRequestsForProject.reduce((i,r)=>i+r.map.durationRaw/this.closedRequestsForProject.length,0)).humanize()}},pendingRequestsForProjectSummary(){const e=[];this.pendingRequestsForProject.forEach(i=>{i.classes.forEach(r=>{e.push(r)})});const{length:t}=e,s=e.reduce((i,r)=>i+r[23]/t,0);return{requestCount:this.pendingRequestsForProject.length,classCount:this.pendingRequestsForProject.reduce((i,r)=>i+r.classes.length,0),need:this.pendingRequestsForProject.reduce((i,r)=>i+r.map.need,0),offers:this.pendingRequestsForProject.reduce((i,r)=>i+r.map.offersCount,0),balance:this.pendingRequestsForProject.reduce((i,r)=>i+r.map.balance,0),avgRate:s.toFixed(2)}},nameRequestsForProject(){const e=[],t=this.openRequestsForProject.concat(this.pendingRequestsForProject),s=[];return t.forEach(i=>{i.classes.forEach(r=>{s.push(r)})}),s.forEach(i=>{i.names.forEach(r=>{Object.assign(r,{expand:!1}),e.push(r)})}),e}},actions:{pushClassification(e){this.addedClassifications.push(e)},spliceClassification({item:e}){const t=this.addedClassifications.findIndex(s=>s.id===e.id);t>-1&&this.addedClassifications.splice(t,1)},pushName(e){const t=this.addedClassifications.findIndex(s=>s.id===e.classification.id);this.addedClassifications[t].names===void 0?Object.assign(this.addedClassifications[t],{names:[e]}):this.addedClassifications[t].names.push(e),console.log(this.addedClassifications),console.log(this.getNames)},spliceName({item:e}){const t=this.addedNames.findIndex(s=>s.id===e.id);t>-1&&this.addedNames.splice(t,1)},async storeRequest({request:e}){const{checkForMatch:t}=X(),s=await t({request:e}),{addPendingRequest:i}=X(),{getUser:r}=T();this.newRequest=e;const a={6:{value:this.activeProject[3]},14:{value:"Pending"},92:{value:this.activeProject[12]},9:{value:e.jobNumber[3]},31:{value:e.location[3]},60:{value:e.contact[3]},64:{value:H.formatDate(e.dateNeeded,"MM-DD-YYYY")},68:{value:e.perdiem!==void 0?"Yes":"No"},82:{value:new Date},272:{value:r[3]},147:{value:2},281:{value:!0},280:{value:s?s[3]:""},282:{value:e.restriction.value},284:{value:e.reason.value}};e.perdiem&&e.perdiem[3]!==void 0&&Object.assign(a,{65:{value:e.perdiem[3]}});const{data:n}=await x.upsertRecordsXML({to:"bpzpyjbuy",data:[a],fieldsToReturn:[266],formatObject:266});if(n.length>0){this.newRequest=n[0][266];const o=[],c=[];return this.addedClassifications.forEach(h=>{const b={6:{value:this.newRequest[3]},9:{value:h.job[3]},17:{value:"Pending"},18:{value:h.qty},23:{value:h.rate},238:{value:h.id}};o.push(b),h.names.length>0&&h.names.forEach(w=>{c.push(w)})}),(await this.upsertClassifications({fields:o,names:c})).forEach(h=>{this.newRequest.classes.push(h[220])}),i(this.newRequest),!0}else return!1},async addToRequest({request:e}){const{mergePendingRequest:t}=X();this.newRequest=e;const s=[],i=[];return this.addedClassifications.forEach(a=>{const n=e.classes.find(c=>c[9]===a.job[3]&&c[23]===parseFloat(a.rate)),o=n===void 0?{6:{value:this.newRequest[3]},9:{value:a.job[3]},17:{value:"Pending"},18:{value:parseInt(a.qty)<a.names.length?a.names.length:a.qty},23:{value:a.rate},238:{value:a.id}}:{3:{value:n[3]},18:{value:parseInt(a.qty)<a.names.length?a.names.length+n[18]:parseInt(a.qty)+n[18]},238:{value:a.id}};s.push(o),a.names.length>0&&a.names.forEach(c=>{i.push(c)})}),(await this.upsertClassifications({fields:s,names:i})).forEach(a=>{const n=!this.newRequest.classes||this.newRequest.classes.length===0?-1:this.newRequest.classes.findIndex(o=>o[3]===a[220][3]);n<0?this.newRequest.classes.push(a[220]):this.newRequest.classes[n]=a[220]}),t(this.newRequest),e},async upsertClassifications({fields:e,names:t}){const{getUser:s}=T(),{data:i}=await x.upsertRecordsXML({to:"bpzpyqcu4",data:e,fieldsToReturn:[220],formatObject:220});if(i.length>0)if(t.length>0){const r=[];t.forEach(n=>{const o={6:{value:n.firstName},7:{value:n.lastName},8:{value:n.phone},19:{value:d().tz("America/Chicago")},16:{value:n.ssn},10:{value:"Has Not Arrived"},14:{value:`${s[35]} ${s[37]}`}},c=i.find(l=>l[220][238]===n.classification.id);c!==void 0&&Object.assign(o,{17:{value:c[220][3]}}),r.push(o)});const a=await x.upsertRecordsXML({to:"bsg4yb4wa",data:r,fieldsToReturn:[15],formatObject:15});if(a.data.length>0)return a.data.forEach(n=>{const o=i.findIndex(c=>c[220][3]===n[15][17]);i[o][220].names===void 0?Object.assign(i[o][220],{names:[n[15]]}):i[o][220].names.push(n[15])}),i;throw"Something went wrong"}else return i;else throw"Something went wrong"},resetRequest(){this.newRequest={},this.addedClassifications=[],this.addedNames=[]},async submitCancelRequest({request:e}){const{removeRequest:t}=X(),{getUser:s}=T(),i=[];if(e.classes.forEach(a=>{const n={3:{value:a[3]},17:{value:"Cancelled"},51:{value:new Date},128:{value:6}};i.push(n)}),i.length>0)try{await x.upsertRecordsXML({to:"bpzpyqcu4",data:i,fieldsToReturn:[220],formatObject:220})}catch{throw"There was a problem. Try again later."}const{data:r}=await x.upsertRecordsXML({to:"bpzpyjbuy",data:[{3:{value:e[3]},14:{value:"Cancelled"},84:{value:new Date},147:{value:6},276:{value:s[3]},277:{value:`${s[35]} ${s[37]}`}}],fieldsToReturn:[266],formatObject:266});if(r.length>0)return t({request:r[0][266]}),!0;throw"There was a problem. Try again later."},async submitCancelClassification({item:e}){const{removeClassification:t}=X(),s=[{3:{value:e[3]},17:{value:"Cancelled"},51:{value:new Date},128:{value:6}}],{data:i}=await x.upsertRecordsXML({to:"bpzpyqcu4",data:s,fieldsToReturn:[220],formatObject:220});if(i.length>0){if(i[0][220][243]>0)return t({classification:i[0][220]}),"Classification removed!";{const r={3:i[0][220][6],classes:[]};return await this.submitCancelRequest({request:r}),"Classification removed and request canceled!"}}else throw"There was a problem. Try again later."},async upsertName({name:e,action:t}){const{getUser:s}=T(),{refreshClassification:i}=X(),r=t==="create"?{6:{value:e.firstName},7:{value:e.lastName},8:{value:e.phone},17:{value:e.classification[3]},19:{value:d().tz("America/Chicago")},16:{value:e.ssn},10:{value:"Has Not Arrived"},14:{value:`${s[35]} ${s[37]}`}}:{3:{value:e[3]},11:{value:!0},12:{value:d().tz("America/Chicago")},13:{value:`${s[35]} ${s[37]}`}},{data:a}=await x.upsertRecordsXML({to:"bsg4yb4wa",data:[r],fieldsToReturn:[20],formatObject:20});if(a[0]!==void 0)return i({classification:a[0][20]}),a[0][20]}}}),{capitalize:Wt}=Hi,X=J("projects",{state:()=>({projects:[],requests:[],activeProject:{},matrixColumns:[]}),getters:{active(){return this.activeProject[3]!==void 0?this.activeProject:this.projects.length>0?this.projects[0]:{openRequests:[],closedRequests:[]}},userAccess(){return this.projects.length>0?this.projects:null},projectCrafts(){return this.active.crafts!==void 0?this.active.crafts.sort((e,t)=>e.order>t.order?1:-1):null},usersForProject(){return this.active.users!==void 0?this.active.users:[]},availableMatrixColumns(){const e=this.active?this.active.matrix:[],t=[];return this.matrixColumns.forEach(s=>{e.findIndex(r=>r[18]===s[12])<0&&t.push(s)}),t.forEach(s=>{const i=s[6].split(" ");let r="";i.forEach((a,n)=>{r+=n>0?` ${Wt(a)}`:Wt(a)}),s[6]=r}),t.length>0?[...new Map(t.map(s=>[s[6],s])).values()]:[]}},actions:{addNewMatrixColumn({project:e,data:t}){const s=this.projects.findIndex(i=>i[3]===e[3]);s>-1&&this.projects[s].matrix.push(t)},async getMatrixColumns(){if(this.matrixColumns.length===0){const{data:e}=await x.fetchFromProjectsApp({fields:[{14:{value:9},9:{value:1},8:{value:"{'13'.EX.false}"},7:{value:"Table Query"},6:{value:"bsjdig6gn"}}]});return this.matrixColumns=e,this.availableMatrixColumns}else return this.availableMatrixColumns},refreshClassification({classification:e}){const t=this.projects.findIndex(s=>s[3]===e[7]);if(e[131]==="Pending"){const s=this.projects[t].pendingRequests.findIndex(r=>r[3]===e[6]),i=this.projects[t].pendingRequests[s].classes.findIndex(r=>r[3]===e[3]);this.projects[t].pendingRequests[s].classes[i]=e}else if(e[131]==="Open"){const s=this.projects[t].openRequests.findIndex(r=>r[3]===e[6]),i=this.projects[t].openRequests[s].classes.findIndex(r=>r[3]===e[3]);this.projects[t].openRequests[s].classes[i]=e}},addUser({user:e}){this.projects.find(s=>s[3]===this.active[3]).users.push(e)},updateActive({project:e}){this.activeProject=e},async getProjectsData(){const{userAccess:e}=T();return e.forEach(t=>{if(t[7]==="Project"){const s=t.project?t.project:{};(s[3]===void 0?0:this.projects.findIndex(r=>r[3]===s[3]))<0&&this.projects.push(s)}else t[7]==="Facility"&&t.facility.projects.forEach(i=>{this.projects.findIndex(a=>a[3]===i[3])<0&&this.projects.push(i)})}),this.projects},addPendingRequest(e){const t=this.projects.findIndex(s=>s[3]===e[6]);if(t>-1){this.projects[t].pendingRequests.unshift(e);const{resetRequest:s}=Gt();s()}},mergePendingRequest(e){console.log(e),Object.assign(e,{updated:!0});const t=this.projects.findIndex(s=>s[3]===e[6]);if(t>-1){const s=this.projects[t].pendingRequests.findIndex(r=>r[3]===e[3]);s>-1&&(this.projects[t].pendingRequests[s]=e,setTimeout(()=>{this.projects[t].pendingRequests[s].updated=!1},1e4));const{resetRequest:i}=Gt();i()}},removeRequest({request:e}){const t=this.projects.findIndex(s=>s[3]===e[6]);if(t>-1){const s=this.projects[t].pendingRequests.findIndex(i=>i[3]===e[3]);s>-1&&this.projects[t].pendingRequests.splice(s,1)}},removeClassification({classification:e}){const t=this.projects.findIndex(s=>s[3]===e[7]);if(t>-1){const s=this.projects[t].pendingRequests.findIndex(i=>i[3]===e[6]);if(s>-1){const i=this.projects[t].pendingRequests[s].classes.findIndex(r=>r[3]===e[3]);i>-1&&this.projects[t].pendingRequests[s].classes.splice(i,1)}}},udpateProjectCrafts({craft:e}){const t=this.projects.findIndex(s=>s[3]===e[7]);if(t>-1){const s=this.projects[t].crafts.findIndex(i=>i[3]===e[3]);s>-1&&(this.projects[t].crafts[s]=e)}},async checkForMatch({request:e}){let t;return e.perdiem===void 0?t=this.active.openRequests.filter(s=>s[9]===e.jobNumber[3]&&s[31]===e.location[3]&&s[60]===e.contact[3]):t=this.active.openRequests.filter(s=>s[9]===e.jobNumber[3]&&s[31]===e.location[3]&&s[60]===e.contact[3]&&s[65]===e.perdiem[3]),t.length>0?(t.sort((s,i)=>s[1].$d<i[1].$d?1:-1),t[0]):null}}});function Da(){this.__data__=[],this.size=0}var Pa=Da;function Ea(e,t){return e===t||e!==e&&t!==t}var Le=Ea,Fa=Le;function Na(e,t){for(var s=e.length;s--;)if(Fa(e[s][0],t))return s;return-1}var Ue=Na,qa=Ue,_a=Array.prototype,Ma=_a.splice;function La(e){var t=this.__data__,s=qa(t,e);if(s<0)return!1;var i=t.length-1;return s==i?t.pop():Ma.call(t,s,1),--this.size,!0}var Ua=La,Ba=Ue;function Ya(e){var t=this.__data__,s=Ba(t,e);return s<0?void 0:t[s][1]}var Ka=Ya,Xa=Ue;function Ha(e){return Xa(this.__data__,e)>-1}var za=Ha,Qa=Ue;function Ja(e,t){var s=this.__data__,i=Qa(s,e);return i<0?(++this.size,s.push([e,t])):s[i][1]=t,this}var Va=Ja,Ga=Pa,Wa=Ua,Za=Ka,en=za,tn=Va;function fe(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var i=e[t];this.set(i[0],i[1])}}fe.prototype.clear=Ga;fe.prototype.delete=Wa;fe.prototype.get=Za;fe.prototype.has=en;fe.prototype.set=tn;var Be=fe,sn=Be;function rn(){this.__data__=new sn,this.size=0}var an=rn;function nn(e){var t=this.__data__,s=t.delete(e);return this.size=t.size,s}var on=nn;function cn(e){return this.__data__.get(e)}var ln=cn;function un(e){return this.__data__.has(e)}var fn=un,dn=typeof we=="object"&&we&&we.Object===Object&&we,vi=dn,hn=vi,pn=typeof self=="object"&&self&&self.Object===Object&&self,mn=hn||pn||Function("return this")(),de=mn,gn=de,vn=gn.Symbol,yi=vn,Zt=yi,bi=Object.prototype,yn=bi.hasOwnProperty,bn=bi.toString,xe=Zt?Zt.toStringTag:void 0;function xn(e){var t=yn.call(e,xe),s=e[xe];try{e[xe]=void 0;var i=!0}catch{}var r=bn.call(e);return i&&(t?e[xe]=s:delete e[xe]),r}var wn=xn,An=Object.prototype,kn=An.toString;function In(e){return kn.call(e)}var Sn=In,es=yi,On=wn,Cn=Sn,Tn="[object Null]",$n="[object Undefined]",ts=es?es.toStringTag:void 0;function jn(e){return e==null?e===void 0?$n:Tn:ts&&ts in Object(e)?On(e):Cn(e)}var Ye=jn;function Rn(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ae=Rn,Dn=Ye,Pn=ae,En="[object AsyncFunction]",Fn="[object Function]",Nn="[object GeneratorFunction]",qn="[object Proxy]";function _n(e){if(!Pn(e))return!1;var t=Dn(e);return t==Fn||t==Nn||t==En||t==qn}var Ct=_n,Mn=de,Ln=Mn["__core-js_shared__"],Un=Ln,Ze=Un,ss=function(){var e=/[^.]+$/.exec(Ze&&Ze.keys&&Ze.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Bn(e){return!!ss&&ss in e}var Yn=Bn,Kn=Function.prototype,Xn=Kn.toString;function Hn(e){if(e!=null){try{return Xn.call(e)}catch{}try{return e+""}catch{}}return""}var zn=Hn,Qn=Ct,Jn=Yn,Vn=ae,Gn=zn,Wn=/[\\^$.*+?()[\]{}|]/g,Zn=/^\[object .+?Constructor\]$/,eo=Function.prototype,to=Object.prototype,so=eo.toString,io=to.hasOwnProperty,ro=RegExp("^"+so.call(io).replace(Wn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ao(e){if(!Vn(e)||Jn(e))return!1;var t=Qn(e)?ro:Zn;return t.test(Gn(e))}var no=ao;function oo(e,t){return e==null?void 0:e[t]}var co=oo,lo=no,uo=co;function fo(e,t){var s=uo(e,t);return lo(s)?s:void 0}var Tt=fo,ho=Tt,po=de,mo=ho(po,"Map"),xi=mo,go=Tt,vo=go(Object,"create"),Ke=vo,is=Ke;function yo(){this.__data__=is?is(null):{},this.size=0}var bo=yo;function xo(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var wo=xo,Ao=Ke,ko="__lodash_hash_undefined__",Io=Object.prototype,So=Io.hasOwnProperty;function Oo(e){var t=this.__data__;if(Ao){var s=t[e];return s===ko?void 0:s}return So.call(t,e)?t[e]:void 0}var Co=Oo,To=Ke,$o=Object.prototype,jo=$o.hasOwnProperty;function Ro(e){var t=this.__data__;return To?t[e]!==void 0:jo.call(t,e)}var Do=Ro,Po=Ke,Eo="__lodash_hash_undefined__";function Fo(e,t){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=Po&&t===void 0?Eo:t,this}var No=Fo,qo=bo,_o=wo,Mo=Co,Lo=Do,Uo=No;function he(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var i=e[t];this.set(i[0],i[1])}}he.prototype.clear=qo;he.prototype.delete=_o;he.prototype.get=Mo;he.prototype.has=Lo;he.prototype.set=Uo;var Bo=he,rs=Bo,Yo=Be,Ko=xi;function Xo(){this.size=0,this.__data__={hash:new rs,map:new(Ko||Yo),string:new rs}}var Ho=Xo;function zo(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Qo=zo,Jo=Qo;function Vo(e,t){var s=e.__data__;return Jo(t)?s[typeof t=="string"?"string":"hash"]:s.map}var Xe=Vo,Go=Xe;function Wo(e){var t=Go(this,e).delete(e);return this.size-=t?1:0,t}var Zo=Wo,ec=Xe;function tc(e){return ec(this,e).get(e)}var sc=tc,ic=Xe;function rc(e){return ic(this,e).has(e)}var ac=rc,nc=Xe;function oc(e,t){var s=nc(this,e),i=s.size;return s.set(e,t),this.size+=s.size==i?0:1,this}var cc=oc,lc=Ho,uc=Zo,fc=sc,dc=ac,hc=cc;function pe(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var i=e[t];this.set(i[0],i[1])}}pe.prototype.clear=lc;pe.prototype.delete=uc;pe.prototype.get=fc;pe.prototype.has=dc;pe.prototype.set=hc;var pc=pe,mc=Be,gc=xi,vc=pc,yc=200;function bc(e,t){var s=this.__data__;if(s instanceof mc){var i=s.__data__;if(!gc||i.length<yc-1)return i.push([e,t]),this.size=++s.size,this;s=this.__data__=new vc(i)}return s.set(e,t),this.size=s.size,this}var xc=bc,wc=Be,Ac=an,kc=on,Ic=ln,Sc=fn,Oc=xc;function me(e){var t=this.__data__=new wc(e);this.size=t.size}me.prototype.clear=Ac;me.prototype.delete=kc;me.prototype.get=Ic;me.prototype.has=Sc;me.prototype.set=Oc;var Cc=me,Tc=Tt,$c=function(){try{var e=Tc(Object,"defineProperty");return e({},"",{}),e}catch{}}(),wi=$c,as=wi;function jc(e,t,s){t=="__proto__"&&as?as(e,t,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[t]=s}var $t=jc,Rc=$t,Dc=Le;function Pc(e,t,s){(s!==void 0&&!Dc(e[t],s)||s===void 0&&!(t in e))&&Rc(e,t,s)}var Ai=Pc;function Ec(e){return function(t,s,i){for(var r=-1,a=Object(t),n=i(t),o=n.length;o--;){var c=n[e?o:++r];if(s(a[c],c,a)===!1)break}return t}}var Fc=Ec,Nc=Fc,qc=Nc(),_c=qc,ft={exports:{}};(function(e,t){var s=de,i=t&&!t.nodeType&&t,r=i&&!0&&e&&!e.nodeType&&e,a=r&&r.exports===i,n=a?s.Buffer:void 0,o=n?n.allocUnsafe:void 0;function c(l,h){if(h)return l.slice();var b=l.length,w=o?o(b):new l.constructor(b);return l.copy(w),w}e.exports=c})(ft,ft.exports);var Mc=de,Lc=Mc.Uint8Array,Uc=Lc,ns=Uc;function Bc(e){var t=new e.constructor(e.byteLength);return new ns(t).set(new ns(e)),t}var Yc=Bc,Kc=Yc;function Xc(e,t){var s=t?Kc(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.length)}var Hc=Xc;function zc(e,t){var s=-1,i=e.length;for(t||(t=Array(i));++s<i;)t[s]=e[s];return t}var Qc=zc,Jc=ae,os=Object.create,Vc=function(){function e(){}return function(t){if(!Jc(t))return{};if(os)return os(t);e.prototype=t;var s=new e;return e.prototype=void 0,s}}(),Gc=Vc;function Wc(e,t){return function(s){return e(t(s))}}var Zc=Wc,el=Zc,tl=el(Object.getPrototypeOf,Object),ki=tl,sl=Object.prototype;function il(e){var t=e&&e.constructor,s=typeof t=="function"&&t.prototype||sl;return e===s}var Ii=il,rl=Gc,al=ki,nl=Ii;function ol(e){return typeof e.constructor=="function"&&!nl(e)?rl(al(e)):{}}var cl=ol;function ll(e){return e!=null&&typeof e=="object"}var Oe=ll,ul=Ye,fl=Oe,dl="[object Arguments]";function hl(e){return fl(e)&&ul(e)==dl}var pl=hl,cs=pl,ml=Oe,Si=Object.prototype,gl=Si.hasOwnProperty,vl=Si.propertyIsEnumerable,yl=cs(function(){return arguments}())?cs:function(e){return ml(e)&&gl.call(e,"callee")&&!vl.call(e,"callee")},Oi=yl,bl=Array.isArray,Ci=bl,xl=9007199254740991;function wl(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=xl}var Ti=wl,Al=Ct,kl=Ti;function Il(e){return e!=null&&kl(e.length)&&!Al(e)}var jt=Il,Sl=jt,Ol=Oe;function Cl(e){return Ol(e)&&Sl(e)}var Tl=Cl,Ee={exports:{}};function $l(){return!1}var jl=$l;(function(e,t){var s=de,i=jl,r=t&&!t.nodeType&&t,a=r&&!0&&e&&!e.nodeType&&e,n=a&&a.exports===r,o=n?s.Buffer:void 0,c=o?o.isBuffer:void 0,l=c||i;e.exports=l})(Ee,Ee.exports);var Rl=Ye,Dl=ki,Pl=Oe,El="[object Object]",Fl=Function.prototype,Nl=Object.prototype,$i=Fl.toString,ql=Nl.hasOwnProperty,_l=$i.call(Object);function Ml(e){if(!Pl(e)||Rl(e)!=El)return!1;var t=Dl(e);if(t===null)return!0;var s=ql.call(t,"constructor")&&t.constructor;return typeof s=="function"&&s instanceof s&&$i.call(s)==_l}var Ll=Ml,Ul=Ye,Bl=Ti,Yl=Oe,Kl="[object Arguments]",Xl="[object Array]",Hl="[object Boolean]",zl="[object Date]",Ql="[object Error]",Jl="[object Function]",Vl="[object Map]",Gl="[object Number]",Wl="[object Object]",Zl="[object RegExp]",eu="[object Set]",tu="[object String]",su="[object WeakMap]",iu="[object ArrayBuffer]",ru="[object DataView]",au="[object Float32Array]",nu="[object Float64Array]",ou="[object Int8Array]",cu="[object Int16Array]",lu="[object Int32Array]",uu="[object Uint8Array]",fu="[object Uint8ClampedArray]",du="[object Uint16Array]",hu="[object Uint32Array]",P={};P[au]=P[nu]=P[ou]=P[cu]=P[lu]=P[uu]=P[fu]=P[du]=P[hu]=!0;P[Kl]=P[Xl]=P[iu]=P[Hl]=P[ru]=P[zl]=P[Ql]=P[Jl]=P[Vl]=P[Gl]=P[Wl]=P[Zl]=P[eu]=P[tu]=P[su]=!1;function pu(e){return Yl(e)&&Bl(e.length)&&!!P[Ul(e)]}var mu=pu;function gu(e){return function(t){return e(t)}}var vu=gu,dt={exports:{}};(function(e,t){var s=vi,i=t&&!t.nodeType&&t,r=i&&!0&&e&&!e.nodeType&&e,a=r&&r.exports===i,n=a&&s.process,o=function(){try{var c=r&&r.require&&r.require("util").types;return c||n&&n.binding&&n.binding("util")}catch{}}();e.exports=o})(dt,dt.exports);var yu=mu,bu=vu,ls=dt.exports,us=ls&&ls.isTypedArray,xu=us?bu(us):yu,ji=xu;function wu(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Ri=wu,Au=$t,ku=Le,Iu=Object.prototype,Su=Iu.hasOwnProperty;function Ou(e,t,s){var i=e[t];(!(Su.call(e,t)&&ku(i,s))||s===void 0&&!(t in e))&&Au(e,t,s)}var Cu=Ou,Tu=Cu,$u=$t;function ju(e,t,s,i){var r=!s;s||(s={});for(var a=-1,n=t.length;++a<n;){var o=t[a],c=i?i(s[o],e[o],o,s,e):void 0;c===void 0&&(c=e[o]),r?$u(s,o,c):Tu(s,o,c)}return s}var Ru=ju;function Du(e,t){for(var s=-1,i=Array(e);++s<e;)i[s]=t(s);return i}var Pu=Du,Eu=9007199254740991,Fu=/^(?:0|[1-9]\d*)$/;function Nu(e,t){var s=typeof e;return t=t==null?Eu:t,!!t&&(s=="number"||s!="symbol"&&Fu.test(e))&&e>-1&&e%1==0&&e<t}var Di=Nu,qu=Pu,_u=Oi,Mu=Ci,Lu=Ee.exports,Uu=Di,Bu=ji,Yu=Object.prototype,Ku=Yu.hasOwnProperty;function Xu(e,t){var s=Mu(e),i=!s&&_u(e),r=!s&&!i&&Lu(e),a=!s&&!i&&!r&&Bu(e),n=s||i||r||a,o=n?qu(e.length,String):[],c=o.length;for(var l in e)(t||Ku.call(e,l))&&!(n&&(l=="length"||r&&(l=="offset"||l=="parent")||a&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||Uu(l,c)))&&o.push(l);return o}var Hu=Xu;function zu(e){var t=[];if(e!=null)for(var s in Object(e))t.push(s);return t}var Qu=zu,Ju=ae,Vu=Ii,Gu=Qu,Wu=Object.prototype,Zu=Wu.hasOwnProperty;function ef(e){if(!Ju(e))return Gu(e);var t=Vu(e),s=[];for(var i in e)i=="constructor"&&(t||!Zu.call(e,i))||s.push(i);return s}var tf=ef,sf=Hu,rf=tf,af=jt;function nf(e){return af(e)?sf(e,!0):rf(e)}var Pi=nf,of=Ru,cf=Pi;function lf(e){return of(e,cf(e))}var uf=lf,fs=Ai,ff=ft.exports,df=Hc,hf=Qc,pf=cl,ds=Oi,hs=Ci,mf=Tl,gf=Ee.exports,vf=Ct,yf=ae,bf=Ll,xf=ji,ps=Ri,wf=uf;function Af(e,t,s,i,r,a,n){var o=ps(e,s),c=ps(t,s),l=n.get(c);if(l){fs(e,s,l);return}var h=a?a(o,c,s+"",e,t,n):void 0,b=h===void 0;if(b){var w=hs(c),A=!w&&gf(c),O=!w&&!A&&xf(c);h=c,w||A||O?hs(o)?h=o:mf(o)?h=hf(o):A?(b=!1,h=ff(c,!0)):O?(b=!1,h=df(c,!0)):h=[]:bf(c)||ds(c)?(h=o,ds(o)?h=wf(o):(!yf(o)||vf(o))&&(h=pf(c))):b=!1}b&&(n.set(c,h),r(h,c,i,a,n),n.delete(c)),fs(e,s,h)}var kf=Af,If=Cc,Sf=Ai,Of=_c,Cf=kf,Tf=ae,$f=Pi,jf=Ri;function Ei(e,t,s,i,r){e!==t&&Of(t,function(a,n){if(r||(r=new If),Tf(a))Cf(e,t,n,s,Ei,i,r);else{var o=i?i(jf(e,n),a,n+"",e,t,r):void 0;o===void 0&&(o=a),Sf(e,n,o)}},$f)}var Rf=Ei;function Df(e){return e}var Fi=Df;function Pf(e,t,s){switch(s.length){case 0:return e.call(t);case 1:return e.call(t,s[0]);case 2:return e.call(t,s[0],s[1]);case 3:return e.call(t,s[0],s[1],s[2])}return e.apply(t,s)}var Ef=Pf,Ff=Ef,ms=Math.max;function Nf(e,t,s){return t=ms(t===void 0?e.length-1:t,0),function(){for(var i=arguments,r=-1,a=ms(i.length-t,0),n=Array(a);++r<a;)n[r]=i[t+r];r=-1;for(var o=Array(t+1);++r<t;)o[r]=i[r];return o[t]=s(n),Ff(e,this,o)}}var qf=Nf;function _f(e){return function(){return e}}var Mf=_f,Lf=Mf,gs=wi,Uf=Fi,Bf=gs?function(e,t){return gs(e,"toString",{configurable:!0,enumerable:!1,value:Lf(t),writable:!0})}:Uf,Yf=Bf,Kf=800,Xf=16,Hf=Date.now;function zf(e){var t=0,s=0;return function(){var i=Hf(),r=Xf-(i-s);if(s=i,r>0){if(++t>=Kf)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Qf=zf,Jf=Yf,Vf=Qf,Gf=Vf(Jf),Wf=Gf,Zf=Fi,ed=qf,td=Wf;function sd(e,t){return td(ed(e,t,Zf),e+"")}var id=sd,rd=Le,ad=jt,nd=Di,od=ae;function cd(e,t,s){if(!od(s))return!1;var i=typeof t;return(i=="number"?ad(s)&&nd(t,s.length):i=="string"&&t in s)?rd(s[t],e):!1}var ld=cd,ud=id,fd=ld;function dd(e){return ud(function(t,s){var i=-1,r=s.length,a=r>1?s[r-1]:void 0,n=r>2?s[2]:void 0;for(a=e.length>3&&typeof a=="function"?(r--,a):void 0,n&&fd(s[0],s[1],n)&&(a=r<3?void 0:a,r=1),t=Object(t);++i<r;){var o=s[i];o&&e(t,o,i,a)}return t})}var hd=dd,pd=Rf,md=hd,gd=md(function(e,t,s){pd(e,t,s)}),vd=gd;class yd{constructor(t,s){R(this,"axiosIns",null);R(this,"config",j({},As));R(this,"appConfig",I);R(this,"isAlreadyFetchingAccessToken",{});R(this,"subscribers",[]);R(this,"rateLimit",null);R(this,"rateLimitRemaining",null);R(this,"rateLimitReset",null);R(this,"router",null);R(this,"loginAttempts",{invalidLogins:0,login:null,exp:null,currentTime:null});R(this,"appStore",null);R(this,"userStore",null);R(this,"employeeStore",null);R(this,"jobBoardStore",null);R(this,"profileStore",null);R(this,"assessmentStore",null);R(this,"applicationStore",null);R(this,"kioskStore",null);R(this,"hiringCenterStore",null);R(this,"projectsStore",null);R(this,"hiringStore",null);R(this,"dataStore",null);R(this,"serverAPI",Vi);if(this.axiosIns=t,this.config=j(j({},this.config),s),this.axiosIns.interceptors.request.use(async i=>new Promise(r=>{const{url:a,data:n}=i;let o=null;if(a.includes("act=API_Authenticate")||a.includes("a=API_GetUserInfo")||a.includes("a=API_DoQuery")||a.includes("a=API_AddRecord")||a.includes("?a=API_EditRecord")){if(a.includes("a=API_DoQuery")){o=a.split("/db/")[1].split("?")[0];const c={6:{value:`${this.appConfig.pageType}-${this.appConfig.pageId}`},7:{value:"DoQuery"},8:{value:o}};this.addLogRecord({data:[c]})}r(i)}else if(a.includes("auth/temporary"))this.config.realm&&(i.headers["QB-Realm-Hostname"]=`${this.config.realm}.quickbase.com`),this.config.appToken&&(i.headers["QB-App-Token"]=this.config.appToken),i.headers["Request-Count"]?i.headers["Request-Count"]+=1:i.headers["Request-Count"]=1,r(i);else{if(this.config.realm&&(i.headers["QB-Realm-Hostname"]=`${this.config.realm}.quickbase.com`),this.config.appToken&&(i.headers["QB-App-Token"]=this.config.appToken),i.headers["Request-Count"]?i.headers["Request-Count"]+=1:i.headers["Request-Count"]=1,a==="https://api.quickbase.com/v1/records/query"){o=n.from;const l={6:{value:`${this.appConfig.pageType}-${this.appConfig.pageId}`},7:{value:"Rest Query"},8:{value:o}};this.addLogRecord({data:[l]})}else if(a==="https://api.quickbase.com/v1/records")o=n.to;else if(a.startsWith("https://api.quickbase.com/v1/reports")){const l=new URL(a);o=new URLSearchParams(l.search).get("tableId"),o=n.from;const b={6:{value:`${this.appConfig.pageType}-${this.appConfig.pageId}`},7:{value:"Rest Report"},8:{value:o}};this.addLogRecord({data:[b]})}const c=this;if(!o){const l=JSON.parse(n);o=l.from?l.from:l.to}this.getToken(o).then(l=>{const h=l;if(h)i.headers.Authorization=h,r(i);else if(!c.isAlreadyFetchingAccessToken[`${o}`])c.isAlreadyFetchingAccessToken[`${o}`]=!0,c.refreshToken(o).then(b=>{const{data:w}=b;c.isAlreadyFetchingAccessToken[`${o}`]=!1,c.setToken(w.temporaryAuthorization,o).then(()=>{c.onAccessTokenFetched(w.temporaryAuthorization),i.headers.Authorization=`QB-TEMP-TOKEN ${w.temporaryAuthorization}`,r(i)})});else{const b=h;async function w(){c.getToken(o).then(A=>{const O=A;if(O===b){setTimeout(w,50);return}i.headers.Authorization=O,r(i)})}w()}})}}),i=>Promise.reject(i)),this.axiosIns.interceptors.response.use(i=>{if(i&&i.headers){const{headers:r}=i;this.rateLimit=r["x-ratelimit-limit"],this.rateLimitRemaining=r["x-ratelimit-remaining"],this.rateLimitReset=r["x-ratelimit-reset"]}return i},i=>new Promise((r,a)=>{const{config:n,response:o}=i;console.log(i);const{headers:c}=o;this.rateLimit=c["x-ratelimit-limit"],this.rateLimitRemaining=c["x-ratelimit-remaining"],this.rateLimitReset=c["x-ratelimit-reset"];const l=n,{url:h,data:b}=l;let w=this.config.appDBID;const A=b?JSON.parse(b):null;if(h==="https://api.quickbase.com/v1/records/query"?w=A.from:h==="https://api.quickbase.com/v1/records"&&(w=A.to),o&&o.status===401){const O=new Promise(E=>{this.addSubscriber(F=>{l.headers.Authorization=F,E(this.axiosIns(l))})});this.isAlreadyFetchingAccessToken[`${w}`]||(this.isAlreadyFetchingAccessToken[`${w}`]=!0,this.refreshToken(w).then(E=>{this.isAlreadyFetchingAccessToken[`${w}`]=!1,this.setToken(E.data.temporaryAuthorization,w),this.onAccessTokenFetched(E.data.temporaryAuthorization)})),r(O)}else if(o&&o.status===429){const O=this,E=new Promise(F=>{setTimeout(()=>{F(this.axiosIns(l))},O.rateLimitReset)});l.headers["Request-Count"]&&l.headers["Request-Count"]>4?a(i):r(E)}else if(o&&o.status===400){const{data:O}=o;if(O.description==="You are not currently signed into the realm.")window.close(),a(i);else if(O.description==="Required header 'Authorization' not specified"){this.isAlreadyFetchingAccessToken[`${w}`]||(this.isAlreadyFetchingAccessToken[`${w}`]=!0,this.refreshToken(w).then(F=>{this.isAlreadyFetchingAccessToken[`${w}`]=!1,this.setToken(F.data.temporaryAuthorization,w),this.onAccessTokenFetched(F.data.temporaryAuthorization)}));const E=new Promise(F=>{this.addSubscriber(ge=>{l.headers.Authorization=ge,F(this.axiosIns(l))})});r(E)}else if(O.description==="Invalid Authorization"){this.isAlreadyFetchingAccessToken[`${w}`]||(this.isAlreadyFetchingAccessToken[`${w}`]=!0,this.refreshToken(w).then(F=>{this.isAlreadyFetchingAccessToken[`${w}`]=!1,this.setToken(F.data.temporaryAuthorization,w),this.onAccessTokenFetched(F.data.temporaryAuthorization)}));const E=new Promise(F=>{this.addSubscriber(ge=>{l.headers.Authorization=ge,F(this.axiosIns(l))})});r(E)}}a(i)})),this.serverAPI.feathersClient){const i=this;this.serverAPI.feathersClient.service("notifications").on("created",function(r){i.processServerNotifications(r)})}}processServerNotifications(t){t.type==="user-notification"?t.task==="reload-user"?this.reloadUserInfo({reAuthenticate:!0}):t.task==="reload-page"?window.location.reload(!0):t.task==="logout"&&this.logout():t.type==="office-notification"&&(t.task==="reload-page"?window.location.reload(!0):this.userStore.setFeathersNotification(t))}onAccessTokenFetched(t){this.subscribers=this.subscribers.filter(s=>s(t))}addSubscriber(t){this.subscribers.push(t)}async getToken(t){return this.config.dev&&this.config.userToken?`QB-USER-TOKEN ${this.config.userToken}`:B.has(`${t}`)?`QB-TEMP-TOKEN ${B.get(`${t}`)}`:null}refreshToken(t){return this.axiosIns.get(`${this.config.refreshEndpoint}/${t}`,{withCredentials:!0})}async setToken(t,s){const i=s||this.config.appDBID;B.set(`${i}`,t,{expires:this.config.tokenExpiration,secure:!0,sameSite:"Strict"})}async setIpInfo(t){y.setItem(this.appConfig.storageIPInfoKeyName,t),t.countryCode!==this.appConfig.country&&this.appConfig.pageId!==26&&this.setCountry(t.countryCode)}async setCountry(t){this.appStore=this.appStore||M(),this.appStore.setCountry(t)}async getIpInfo(){return await y.getItem(this.appConfig.storageIPInfoKeyName)}setUserTicket(t,s){B.set(this.appConfig.storageUserTicketKeyName,t,{expires:s||this.config.cookieExpiration,secure:!0,sameSite:"Strict"})}getUserTicket(){return B.get(this.appConfig.storageUserTicketKeyName)}setKioskTicket(t,s){B.set(this.appConfig.storageKioskAccountTicket,t,{expires:s||this.config.kioskExpiration,secure:!0,sameSite:"Strict"})}getKioskTicket(){return B.get(this.appConfig.storageKioskAccountTicket)}removeKioskTicket(){B.remove(this.appConfig.storageKioskAccountTicket,{secure:!0,sameSite:"Strict"})}setOfficeLocation(t){this.hiringCenterStore=this.hiringCenterStore||z(),this.appConfig.pageType!=="Candidate Kiosk"&&this.hiringCenterStore.fetchHiringCenter(t.rid,!0),B.set(this.appConfig.storageOfficeLocationKeyName,t,{expires:this.config.officeExpiration,secure:!0,sameSite:"Strict"})}setCheckIn(t){console.log(t),B.set(this.appConfig.storageCheckInKeyName,t,{expires:this.config.checkInExpiration,secure:!0,sameSite:"Strict"})}removeCheckIn(){B.remove(this.appConfig.storageCheckInKeyName,{secure:!0,sameSite:"Strict"})}getCheckIn(){return B.get(this.appConfig.storageCheckInKeyName)}getOfficeLocation(){return B.get(this.appConfig.storageOfficeLocationKeyName)}removeOfficeLocation(){B.remove(this.appConfig.storageOfficeLocationKeyName,{secure:!0,sameSite:"Strict"})}async setUserInfo(t,s){this.userStore.setUser(t,s)}async setUserAccess(t,s){this.userStore.setAccess(t,s)}async setUserPermissions(t,s){this.userStore.setPermissions(t,s)}async getUserInfo(){return await y.getItem(this.appConfig.storageUserKeyName)}async getUserAccess(){return await y.getItem(this.appConfig.storageAccessKeyName)}async getUserPermissions(){return await y.getItem(this.appConfig.storagePermissionsKeyName)}async setEmployee(t,s){this.employeeStore.setEmployee(t,s)}async setJobBoard(t,s){this.jobBoardStore.setRequestJobs(t,s)}async getUserTypeFromStore(){return this.appStore.currentUserType}async getEmployeeFromStore(){return this.employeeStore.getEmployee}async getSocialRequired(t){return(this.appConfig.pageType==="Candidate Kiosk"||this.appConfig.pageType==="Candidate")&&t?(this.employeeStore=this.employeeStore||_(),this.employeeStore.socialRequired):!1}async getUserFromStore(t){return t?(this.userStore=this.userStore||T(),this.userStore.getUser):!1}async getLoggedInFromStore(){return this.userStore.isLoggedIn}async verifyRequired(t){return t?(this.userStore=this.userStore||T(),this.userStore.verifyRequired):!1}async phoneNumberRequired(t){return t?(this.userStore=this.userStore||T(),this.userStore.phoneNumberRequired):!1}async setEvent(t,s){this.appStore=this.appStore||M(),this.appStore.setEvent(t,s)}async getEvent(t){return this.appStore=this.appStore||M(),t?this.appStore.currentEvent:null}async emailRequired(t){return t?(this.userStore=this.userStore||T(),this.userStore.emailRequired):!1}async setPhoneNumberVerified(t){this.userStore.setPhoneNumberVerified(t)}async setVerified(t){this.userStore.setVerified(t)}async employeeLinkRequired(t){return t?(this.userStore=this.userStore||T(),this.userStore.employeeLinkRequired):!1}async bookmarksValid(){return this.kioskStore=this.kioskStore||Y(),!!(this.kioskStore.getBookmarks&&this.kioskStore.getBookmarks.length>0)}async getKioskAccount(){return this.kioskStore?this.kioskStore.kioskAccount:null}async logoutKiosk(t){if(this.kioskStore=this.kioskStore||Y(),t)this.removeKioskTicket(),this.kioskStore.setKioskAccount(null,!1),this.clearBookmarks();else if(!this.kioskStore.kioskAvailable)this.clearBookmarks();else if(this.kioskStore.getBookMarksOnly&&this.kioskStore.kioskAccount[45]===!0)this.removeKioskTicket(),this.kioskStore.setKioskAccount(null,!1),this.clearBookmarks();else return!0}async clearBookmarks(){this.kioskStore=this.kioskStore||Y(),this.kioskStore.removeBookmarks()}async bookMarksOnly(){return this.kioskStore=this.kioskStore||Y(),this.kioskStore.getBookMarksOnly}async startPageEnabled(){return this.appStore=this.appStore||M(),this.appStore.startPageEnabled}async setIdentityVerified(t){this.userStore.setIdentityVerified(t)}async setPhoneNumber(t){this.userStore.setPhoneNumber(t)}async setEmail(t){this.userStore.setEmail(t)}async isUserLoggedIn(){const t=this.getUserInfo(),s=this.getUserAccess(),i=this.getUserPermissions(),r=this.getUserTicket(),a=await t,n=await s,o=await i;return!!(a&&n&&o&&r||r)}async reloadUserInfo(t){const s=await this.getUserInfo();if(this.userStore=this.userStore||T(),t.reAuthenticate&&s)return await this.fetchAndSetUserData({phoneNumber:s[8],userType:s[32],rid:s[3],reAuthenticate:t.reAuthenticate}),this.updateStore();if(!s&&this.appConfig.pageType==="QuickBase User"){const{data:i}=await this.getNativeQuickbaseUser({qbUser:!0});if(i.login==="Anonymous")return this.userStore.logout();const r=`{'10'.EX.'Active'}AND{'6'.EX.'${i.email}'}AND{'32'.EX.'QuickBase User'}`,a=[{7:{value:"User Request"},8:{value:r},9:{value:1},14:{value:77}}],{data:n}=await this.fetchFromStructureApp({fields:a});return n[0]&&n[0][10]==="Active"?(await this.fetchAndSetUserData({email:n[0][6],rid:n[0][3],userType:n[0][32],reAuthenticate:t.reAuthenticate}),this.updateStore()):n[0]&&n[0][10]!=="Active"?this.userStore.logout():this.createQBUser({qbUser:i,login:!0})}else return this.updateStore()}async createQBUser(t){const s=t.qbUser||null;if(!s&&t.login)return this.userStore.logout();if(!s)return t;const i=[{7:{value:"Hiring Center User"},9:{value:1},16:{value:s.email}}],{data:r}=await this.fetchFromStructureApp({fields:i});if(typeof r=="object"&&!Array.isArray(r)&&r!==null&&r.user&&typeof r.user=="object")try{const a=new Date,n=await Ae.genSalt(10),o=Ae.hashSync("welcome",n),c=r.user,l=r.accessiblePayGroups,h=r.accessibleHiringCenters,b=s.email.match(/^([^@]*)@/)[1],w=[{6:{value:s.email},7:{value:o},10:{value:"Active"},11:{value:4},17:{value:!1},32:{value:"QuickBase User"},35:{value:s.firstName},37:{value:s.lastName},23:{value:0},24:{value:0},25:{value:a},26:{value:a},33:{value:b},49:{value:!!s.isVerified},65:{value:c[13]},70:{value:c[251]},100:{value:"en-US"},110:{value:s.id}}],A=[],{data:O}=await this.upsertRecordsXML({to:"br4pxrbs6",fieldsToReturn:[76],data:w,formatObject:76});return O.length===0?this.userStore.logout():(l.forEach(E=>{const F={6:{value:O[0][76][3]},7:{value:"Pay Group"},13:{value:E[10]},20:{value:!0},21:{value:!0},22:{value:!0}};A.push(F)}),h.forEach(E=>{const F={6:{value:O[0][76][3]},7:{value:"Office"},8:{value:E[10]},20:{value:!0},21:{value:!0},22:{value:!0}};A.push(F)}),await this.upsertRecordsXML({to:"br598isx6",fieldsToReturn:[3],data:A,formatObject:24}),await this.fetchAndSetUserData({email:O[0][76][6],rid:O[0][76][3],userType:O[0][76][32],reAuthenticate:t.reAuthenticate}))}catch{return this.userStore.logout()}else return this.userStore.logout()}async updateUserData(t){const s=await this.getUserInfo();if(this.appStore=this.appStore||M(),s)return this.userStore=this.userStore||T(),await this.userStore.updateUserData(t)}async updateEmployeeData(t){const s=await this.getUserInfo();if(this.appStore=this.appStore||M(),(this.appStore.pageType==="Candidate"||this.appStore.pageType==="Candidate Kiosk")&&s)return this.employeeStore=this.employeeStore||_(),await this.employeeStore.updateEmployeeData(t)}async updateStore(t){const s=await y.keys();for(let i=0;i<s.length;i++){if(s[i]===this.appConfig.storageUserKeyName){const r=await y.getItem(s[i]);Object.keys(r).forEach(a=>{if(typeof r[a]=="object"&&r[a]!==null&&Object.prototype.hasOwnProperty.call(r[a],"$d")){r[a]=d(r[a].$d);return}try{r[a].endsWith(".000Z")&&(r[a]=d(r[a]))}catch{}}),await this.setUserInfo(r,!1)}if(s[i]===this.appConfig.storageAccessKeyName){const r=await y.getItem(s[i]);for(let a=0;a<r.length;a++){const n=Object.keys(r[a]);for(let o=0;o<n.length;o++){typeof r[a][n[o]]=="object"&&r[a][n[o]]!==null&&Object.prototype.hasOwnProperty.call(r[a][n[o]],"$d")&&(r[a][n[o]]=d(r[a][n[o]].$d));try{r[a][n[o]].endsWith(".000Z")&&(r[a][n[o]]=d(r[a][n[o]]))}catch{}}}await this.setUserAccess(r,!1)}if(s[i]===this.appConfig.storagePermissionsKeyName){const r=await y.getItem(s[i]);for(let a=0;a<r.length;a++){const n=Object.keys(r[a]);for(let o=0;o<n.length;o++){typeof r[a][n[o]]=="object"&&r[a][n[o]]!==null&&Object.prototype.hasOwnProperty.call(r[a][n[o]],"$d")&&(r[a][n[o]]=d(r[a][n[o]].$d));try{r[a][n[o]].endsWith(".000Z")&&(r[a][n[o]]=d(r[a][n[o]]))}catch{}}}await this.setUserPermissions(r,!1)}if(s[i]===this.appConfig.storageEmployeeKeyName){const r=await y.getItem(s[i]);for(let a=0;a<r.length;a++){const n=Object.keys(r[a]);for(let o=0;o<n.length;o++){typeof r[a][n[o]]=="object"&&r[a][n[o]]!==null&&Object.prototype.hasOwnProperty.call(r[a][n[o]],"$d")&&(r[a][n[o]]=d(r[a][n[o]].$d));try{r[a][n[o]].endsWith(".000Z")&&(r[a][n[o]]=d(r[a][n[o]]))}catch{}}}await this.setEmployee(r,!1)}if(s[i]===this.appConfig.storageJobBoardKeyName){const r=await y.getItem(s[i]);for(let a=0;a<r.length;a++){const n=Object.keys(r[a]);for(let o=0;o<n.length;o++){typeof r[a][n[o]]=="object"&&r[a][n[o]]!==null&&Object.prototype.hasOwnProperty.call(r[a][n[o]],"$d")&&(r[a][n[o]]=d(r[a][n[o]].$d));try{r[a][n[o]].endsWith(".000Z")&&(r[a][n[o]]=d(r[a][n[o]]))}catch{}}}this.jobBoardStore=this.jobBoardStore||gi(),await this.setJobBoard(r,!1)}if(s[i]===this.appConfig.storageExperienceOptions){const r=await y.getItem(s[i]);for(let a=0;a<r.length;a++){const n=Object.keys(r[a]);for(let o=0;o<n.length;o++){typeof r[a][n[o]]=="object"&&r[a][n[o]]!==null&&Object.prototype.hasOwnProperty.call(r[a][n[o]],"$d")&&(r[a][n[o]]=d(r[a][n[o]].$d));try{r[a][n[o]].endsWith(".000Z")&&(r[a][n[o]]=d(r[a][n[o]]))}catch{}}}this.applicationStore=this.applicationStore||V(),await this.applicationStore.setExperienceOptions(r,!1)}if(s[i]===this.appConfig.storageContactMethods){const r=await y.getItem(s[i]);for(let a=0;a<r.length;a++){const n=Object.keys(r[a]);for(let o=0;o<n.length;o++){typeof r[a][n[o]]=="object"&&r[a][n[o]]!==null&&Object.prototype.hasOwnProperty.call(r[a][n[o]],"$d")&&(r[a][n[o]]=d(r[a][n[o]].$d));try{r[a][n[o]].endsWith(".000Z")&&(r[a][n[o]]=d(r[a][n[o]]))}catch{}}}this.applicationStore=this.applicationStore||V(),await this.applicationStore.setContactMethods(r,!1)}if(s[i]===this.appConfig.storageEmploymentOptions){const r=await y.getItem(s[i]);for(let a=0;a<r.length;a++){const n=Object.keys(r[a]);for(let o=0;o<n.length;o++){typeof r[a][n[o]]=="object"&&r[a][n[o]]!==null&&Object.prototype.hasOwnProperty.call(r[a][n[o]],"$d")&&(r[a][n[o]]=d(r[a][n[o]].$d));try{r[a][n[o]].endsWith(".000Z")&&(r[a][n[o]]=d(r[a][n[o]]))}catch{}}}this.applicationStore=this.applicationStore||V(),await this.applicationStore.setEmploymentOptions(r,!1)}if(s[i]===this.appConfig.storageCompanyOptions){const r=await y.getItem(s[i]);for(let a=0;a<r.length;a++){const n=Object.keys(r[a]);for(let o=0;o<n.length;o++){typeof r[a][n[o]]=="object"&&r[a][n[o]]!==null&&Object.prototype.hasOwnProperty.call(r[a][n[o]],"$d")&&(r[a][n[o]]=d(r[a][n[o]].$d));try{r[a][n[o]].endsWith(".000Z")&&(r[a][n[o]]=d(r[a][n[o]]))}catch{}}}this.applicationStore=this.applicationStore||V(),await this.applicationStore.setCompanyOptions(r,!1)}if(s[i]===this.appConfig.storageCraftOptions){const r=await y.getItem(s[i]);for(let a=0;a<r.length;a++){const n=Object.keys(r[a]);for(let o=0;o<n.length;o++){typeof r[a][n[o]]=="object"&&r[a][n[o]]!==null&&Object.prototype.hasOwnProperty.call(r[a][n[o]],"$d")&&(r[a][n[o]]=d(r[a][n[o]].$d));try{r[a][n[o]].endsWith(".000Z")&&(r[a][n[o]]=d(r[a][n[o]]))}catch{}}}this.applicationStore=this.applicationStore||V(),await this.applicationStore.setCraftOptions(r,!1)}if(s[i]===this.appConfig.storageRelationshipOptions){const r=await y.getItem(s[i]);for(let a=0;a<r.length;a++){const n=Object.keys(r[a]);for(let o=0;o<n.length;o++){typeof r[a][n[o]]=="object"&&r[a][n[o]]!==null&&Object.prototype.hasOwnProperty.call(r[a][n[o]],"$d")&&(r[a][n[o]]=d(r[a][n[o]].$d));try{r[a][n[o]].endsWith(".000Z")&&(r[a][n[o]]=d(r[a][n[o]]))}catch{}}}this.applicationStore=this.applicationStore||V(),await this.applicationStore.setRelationshipOptions(r,!1)}if(s[i]===this.appConfig.storageCredentialOptions){const r=await y.getItem(s[i]);for(let a=0;a<r.length;a++){const n=Object.keys(r[a]);for(let o=0;o<n.length;o++){typeof r[a][n[o]]=="object"&&r[a][n[o]]!==null&&Object.prototype.hasOwnProperty.call(r[a][n[o]],"$d")&&(r[a][n[o]]=d(r[a][n[o]].$d));try{r[a][n[o]].endsWith(".000Z")&&(r[a][n[o]]=d(r[a][n[o]]))}catch{}}}this.applicationStore=this.applicationStore||V(),await this.applicationStore.setCredentialOptions(r,!1)}if(s[i]===this.appConfig.storageAffirmativeOptions){const r=await y.getItem(s[i]);for(let a=0;a<r.length;a++){const n=Object.keys(r[a]);for(let o=0;o<n.length;o++){typeof r[a][n[o]]=="object"&&r[a][n[o]]!==null&&Object.prototype.hasOwnProperty.call(r[a][n[o]],"$d")&&(r[a][n[o]]=d(r[a][n[o]].$d));try{r[a][n[o]].endsWith(".000Z")&&(r[a][n[o]]=d(r[a][n[o]]))}catch{}}}this.applicationStore=this.applicationStore||V(),await this.applicationStore.setAffirmativeOptions(r,!1)}if(s[i]===this.appConfig.storageVeteranStatusOptions){const r=await y.getItem(s[i]);for(let a=0;a<r.length;a++){const n=Object.keys(r[a]);for(let o=0;o<n.length;o++){typeof r[a][n[o]]=="object"&&r[a][n[o]]!==null&&Object.prototype.hasOwnProperty.call(r[a][n[o]],"$d")&&(r[a][n[o]]=d(r[a][n[o]].$d));try{r[a][n[o]].endsWith(".000Z")&&(r[a][n[o]]=d(r[a][n[o]]))}catch{}}}this.applicationStore=this.applicationStore||V(),await this.applicationStore.setVeteranStatusOptions(r,!1)}if(s[i]===this.appConfig.storageDisabilityPages){const r=await y.getItem(s[i]);for(let a=0;a<r.length;a++){const n=Object.keys(r[a]);for(let o=0;o<n.length;o++){typeof r[a][n[o]]=="object"&&r[a][n[o]]!==null&&Object.prototype.hasOwnProperty.call(r[a][n[o]],"$d")&&(r[a][n[o]]=d(r[a][n[o]].$d));try{r[a][n[o]].endsWith(".000Z")&&(r[a][n[o]]=d(r[a][n[o]]))}catch{}}}this.applicationStore=this.applicationStore||V(),await this.applicationStore.setDisabilityPages(r,!1)}if(s[i]===this.appConfig.storageDisabilityForm){const r=await y.getItem(s[i]);for(let a=0;a<r.length;a++){const n=Object.keys(r[a]);for(let o=0;o<n.length;o++){typeof r[a][n[o]]=="object"&&r[a][n[o]]!==null&&Object.prototype.hasOwnProperty.call(r[a][n[o]],"$d")&&(r[a][n[o]]=d(r[a][n[o]].$d));try{r[a][n[o]].endsWith(".000Z")&&(r[a][n[o]]=d(r[a][n[o]]))}catch{}}}this.applicationStore=this.applicationStore||V(),await this.applicationStore.setDisabilityForm(r,!1)}if(s[i]===this.appConfig.storageEverGreenJobs){const r=await y.getItem(s[i]);for(let a=0;a<r.length;a++){const n=Object.keys(r[a]);for(let o=0;o<n.length;o++){typeof r[a][n[o]]=="object"&&r[a][n[o]]!==null&&Object.prototype.hasOwnProperty.call(r[a][n[o]],"$d")&&(r[a][n[o]]=d(r[a][n[o]].$d));try{r[a][n[o]].endsWith(".000Z")&&(r[a][n[o]]=d(r[a][n[o]]))}catch{}}}this.applicationStore=this.applicationStore||V(),await this.applicationStore.setEverGreenJobs(r,!1)}if(s[i]===this.appConfig.storageProfile){const r=await y.getItem(s[i]);for(let a=0;a<r.length;a++){const n=Object.keys(r[a]);for(let o=0;o<n.length;o++){typeof r[a][n[o]]=="object"&&r[a][n[o]]!==null&&Object.prototype.hasOwnProperty.call(r[a][n[o]],"$d")&&(r[a][n[o]]=d(r[a][n[o]].$d));try{r[a][n[o]].endsWith(".000Z")&&(r[a][n[o]]=d(r[a][n[o]]))}catch{}}}this.profileStore=this.profileStore||ie(),await this.profileStore.setProfile(r,!1)}if(s[i]===this.appConfig.storageProfileStep){const r=await y.getItem(s[i]);for(let a=0;a<r.length;a++){const n=Object.keys(r[a]);for(let o=0;o<n.length;o++){typeof r[a][n[o]]=="object"&&r[a][n[o]]!==null&&Object.prototype.hasOwnProperty.call(r[a][n[o]],"$d")&&(r[a][n[o]]=d(r[a][n[o]].$d));try{r[a][n[o]].endsWith(".000Z")&&(r[a][n[o]]=d(r[a][n[o]]))}catch{}}}this.profileStore=this.profileStore||ie(),await this.profileStore.setProfileStep(r,!1)}if(s[i]===this.appConfig.storageProfileVoluntaryForms){const r=await y.getItem(s[i]);for(let a=0;a<r.length;a++){const n=Object.keys(r[a]);for(let o=0;o<n.length;o++){typeof r[a][n[o]]=="object"&&r[a][n[o]]!==null&&Object.prototype.hasOwnProperty.call(r[a][n[o]],"$d")&&(r[a][n[o]]=d(r[a][n[o]].$d));try{r[a][n[o]].endsWith(".000Z")&&(r[a][n[o]]=d(r[a][n[o]]))}catch{}}}this.profileStore=this.profileStore||ie(),await this.profileStore.setVoluntaryForms(r,!1)}if(s[i]===this.appConfig.storageKioskAccount){const r=await y.getItem(s[i]);for(let a=0;a<r.length;a++){const n=Object.keys(r[a]);for(let o=0;o<n.length;o++){typeof r[a][n[o]]=="object"&&r[a][n[o]]!==null&&Object.prototype.hasOwnProperty.call(r[a][n[o]],"$d")&&(r[a][n[o]]=d(r[a][n[o]].$d));try{r[a][n[o]].endsWith(".000Z")&&(r[a][n[o]]=d(r[a][n[o]]))}catch{}}}this.kioskStore=this.kioskStore||Y(),await this.kioskStore.setKioskAccount(r,!1)}if(s[i]===this.appConfig.storageBookmarks){const r=await y.getItem(s[i]);for(let a=0;a<r.length;a++){const n=Object.keys(r[a]);for(let o=0;o<n.length;o++){typeof r[a][n[o]]=="object"&&r[a][n[o]]!==null&&Object.prototype.hasOwnProperty.call(r[a][n[o]],"$d")&&(r[a][n[o]]=d(r[a][n[o]].$d));try{r[a][n[o]].endsWith(".000Z")&&(r[a][n[o]]=d(r[a][n[o]]))}catch{}}}this.kioskStore=this.kioskStore||Y(),await this.kioskStore.setBookmarksFromStorage(r)}if(s[i]===this.appConfig.storageBookmarksOnly){const r=await y.getItem(s[i]);this.kioskStore=this.kioskStore||Y(),await this.kioskStore.setBookmarksOnly(r,!1)}if(s[i]===this.appConfig.storageHiringCenter&&this.appConfig.pageType==="Candidate"){const r=await y.getItem(s[i]);if(r){for(let a=0;a<r.length;a++){const n=Object.keys(r[a]);for(let o=0;o<n.length;o++){typeof r[a][n[o]]=="object"&&r[a][n[o]]!==null&&Object.prototype.hasOwnProperty.call(r[a][n[o]],"$d")&&(r[a][n[o]]=d(r[a][n[o]].$d));try{r[a][n[o]].endsWith(".000Z")&&(r[a][n[o]]=d(r[a][n[o]]))}catch{}}}this.hiringCenterStore=this.hiringCenterStore||z(),await this.hiringCenterStore.setHiringCenter(r,!1)}}if(this.appConfig.pageType==="QuickBase User"){if(s[i].startsWith(this.appConfig.storageSelfCheckIns)){const r=s[i].split("_")[4],a=await y.getItem(s[i]);if(a){for(let n=0;n<a.length;n++){const o=Object.keys(a[n]);for(let c=0;c<o.length;c++){typeof a[n][o[c]]=="object"&&a[n][o[c]]!==null&&Object.prototype.hasOwnProperty.call(a[n][o[c]],"$d")&&(a[n][o[c]]=d(a[n][o[c]].$d));try{a[n][o[c]].endsWith(".000Z")&&(a[n][o[c]]=d(a[n][o[c]]))}catch{}}}this.dataStore=this.dataStore||ce(),await this.dataStore.setSelfCheckIns({officeId:r,data:a},!1)}}if(s[i].startsWith(this.appConfig.storageProcessTimeStamps)){const r=await y.getItem(s[i]);if(r){const a=Object.keys(r);for(let n=0;n<a.length;n++){const o=Object.keys(r[a[n]]);for(let c=0;c<o.length;c++){typeof r[a[n]][o[c]]=="object"&&r[a[n]][o[c]]!==null&&Object.prototype.hasOwnProperty.call(r[a[n]][o[c]],"$d")&&(r[a[n]][o[c]]=d(r[a[n]][o[c]].$d));try{r[a[n]][o[c]]&&(r[a[n]][o[c]]=d(r[a[n]][o[c]]))}catch{}}}this.dataStore=this.dataStore||ce(),await this.dataStore.setTimeStampState(r)}}if(s[i].startsWith(this.appConfig.storageProjects)){const r=s[i].split("_")[3],a=await y.getItem(s[i]);if(a){for(let n=0;n<a.length;n++){const o=Object.keys(a[n]);for(let c=0;c<o.length;c++){typeof a[n][o[c]]=="object"&&a[n][o[c]]!==null&&Object.prototype.hasOwnProperty.call(a[n][o[c]],"$d")&&(a[n][o[c]]=d(a[n][o[c]].$d));try{a[n][o[c]].endsWith(".000Z")&&(a[n][o[c]]=d(a[n][o[c]]))}catch{}}}this.dataStore=this.dataStore||ce(),await this.dataStore.setProjects({officeId:r,data:a},!1)}}if(s[i].startsWith(this.appConfig.storagePendingProjects)){const r=s[i].split("_")[4],a=await y.getItem(s[i]);if(a){for(let n=0;n<a.length;n++){const o=Object.keys(a[n]);for(let c=0;c<o.length;c++){typeof a[n][o[c]]=="object"&&a[n][o[c]]!==null&&Object.prototype.hasOwnProperty.call(a[n][o[c]],"$d")&&(a[n][o[c]]=d(a[n][o[c]].$d));try{a[n][o[c]].endsWith(".000Z")&&(a[n][o[c]]=d(a[n][o[c]]))}catch{}}}this.dataStore=this.dataStore||ce(),await this.dataStore.setPendingProjects({officeId:r,data:a},!1)}}}if(s[i]===this.appConfig.storageEvent){const r=await y.getItem(s[i]);for(let a=0;a<r.length;a++){const n=Object.keys(r[a]);for(let o=0;o<n.length;o++){typeof r[a][n[o]]=="object"&&r[a][n[o]]!==null&&Object.prototype.hasOwnProperty.call(r[a][n[o]],"$d")&&(r[a][n[o]]=d(r[a][n[o]].$d));try{r[a][n[o]].endsWith(".000Z")&&(r[a][n[o]]=d(r[a][n[o]]))}catch{}}}this.appStore=this.appStore||M(),await this.appStore.setEvent(r,!1)}if(s[i]===this.appConfig.storageStartPage){const r=await y.getItem(s[i]);for(let a=0;a<r.length;a++){const n=Object.keys(r[a]);for(let o=0;o<n.length;o++){typeof r[a][n[o]]=="object"&&r[a][n[o]]!==null&&Object.prototype.hasOwnProperty.call(r[a][n[o]],"$d")&&(r[a][n[o]]=d(r[a][n[o]].$d));try{r[a][n[o]].endsWith(".000Z")&&(r[a][n[o]]=d(r[a][n[o]]))}catch{}}}this.appStore=this.appStore||M(),await this.appStore.setStartPage(r,!1)}if(s[i]===this.appConfig.storageHomeButton){const r=await y.getItem(s[i]);for(let a=0;a<r.length;a++){const n=Object.keys(r[a]);for(let o=0;o<n.length;o++){typeof r[a][n[o]]=="object"&&r[a][n[o]]!==null&&Object.prototype.hasOwnProperty.call(r[a][n[o]],"$d")&&(r[a][n[o]]=d(r[a][n[o]].$d));try{r[a][n[o]].endsWith(".000Z")&&(r[a][n[o]]=d(r[a][n[o]]))}catch{}}}this.appStore=this.appStore||M(),await this.appStore.setHomeButton(r,!1)}}return!0}async login(t){let s=null;t.redirectPath&&(s=t.redirectPath,delete t.redirectPath);const i=`{'10'.EX.'Active'}${t.email?`AND{'6'.EX.'${t.email}'}`:""}${t.phoneNumber?`AND{'8'.EX.'${t.phoneNumber}'}`:""}${t.userType?`AND{'32'.EX.'${t.userType}'}`:""}`,r=[{7:{value:"User Request"},8:{value:i},9:{value:1},14:{value:77}}],a=t.email?t.email:t.phoneNumber,n=d();if(this.loginAttempts.invalidLogins>=this.config.maxLoginAttempts&&a===this.loginAttempts.login)if(n.isBefore(this.loginAttempts.exp)){const h=n.to(this.loginAttempts.exp,!0);throw{response:{data:{errtext:"Too many failed Login Attempts",errdetail:`Please wait ${h} before attempting to try again.`}}}}else this.loginAttempts={invalidLogins:0,login:null,exp:null,currentTime:null};else this.loginAttempts.exp&&n.isAfter(this.loginAttempts.exp)&&(this.loginAttempts={invalidLogins:0,login:null,exp:null,currentTime:null});const{data:o}=await this.fetchFromStructureApp({fields:r}),c=[{6:{value:"login"}}];let l=await this.getIpInfo();if(l&&l.query)c[0][8]={value:l.ip?l.ip:"N/A"},c[0][10]={value:l.userAgent?l.userAgent:"N/A"},c[0][27]={value:l.continent?l.continent:"N/A"},c[0][28]={value:l.continentCode?l.continentCode:"N/A"},c[0][29]={value:l.country?l.country:"N/A"},c[0][30]={value:l.countryCode},c[0][31]={value:l.region?l.region:"N/A"},c[0][32]={value:l.regionName?l.regionName:"N/A"},c[0][33]={value:l.city?l.city:"N/A"},c[0][34]={value:l.district?l.district:"N/A"},c[0][38]={value:l.zip?l.zip:"N/A"},c[0][36]={value:l.lat?l.lat:"N/A"},c[0][37]={value:l.lon?l.lon:"N/A"},c[0][38]={value:l.timezone?l.timezone:"N/A"},c[0][39]={value:l.offset?l.offset:"N/A"},c[0][40]={value:l.isp?l.isp:"N/A"},c[0][41]={value:l.org?l.org:"N/A"},c[0][42]={value:l.as?l.as:"N/A"},c[0][43]={value:l.asname?l.asname:"N/A"},c[0][44]={value:l.mobile?l.mobile:!1},c[0][45]={value:l.proxy?l.proxy:!1},c[0][46]={value:l.hosting?l.hosting:!1},c[0][46]={value:l.hosting?l.hosting:"N/A"},c[0][47]={value:l.query?l.query:"N/A"};else{try{l=await this.fetchIpInfo()}catch{l=null}l&&l.query&&(c[0][8]={value:l.ip?l.ip:"N/A"},c[0][10]={value:l.userAgent?l.userAgent:"N/A"},c[0][27]={value:l.continent?l.continent:"N/A"},c[0][28]={value:l.continentCode?l.continentCode:"N/A"},c[0][29]={value:l.country?l.country:"N/A"},c[0][30]={value:l.countryCode},c[0][31]={value:l.region?l.region:"N/A"},c[0][32]={value:l.regionName?l.regionName:"N/A"},c[0][33]={value:l.city?l.city:"N/A"},c[0][34]={value:l.district?l.district:"N/A"},c[0][38]={value:l.zip?l.zip:"N/A"},c[0][36]={value:l.lat?l.lat:"N/A"},c[0][37]={value:l.lon?l.lon:"N/A"},c[0][38]={value:l.timezone?l.timezone:"N/A"},c[0][39]={value:l.offset?l.offset:"N/A"},c[0][40]={value:l.isp?l.isp:"N/A"},c[0][41]={value:l.org?l.org:"N/A"},c[0][42]={value:l.as?l.as:"N/A"},c[0][43]={value:l.asname?l.asname:"N/A"},c[0][44]={value:l.mobile?l.mobile:!1},c[0][45]={value:l.proxy?l.proxy:!1},c[0][46]={value:l.hosting?l.hosting:!1},c[0][47]={value:l.query?l.query:"N/A"})}if(o.length===1){const h=o[0];if(c[0][12]={value:h[3]},h[63]===!0&&n.isBefore(h[60])){this.loginAttempts={invalidLogins:h[59],login:a,exp:h[60],currentTime:null};const b=n.to(this.loginAttempts.exp,!0);throw{response:{data:{errtext:"Too many failed Login Attempts",errdetail:`Please wait ${b} before attempting to try again.`}}}}if(h[32]==="QuickBase User"){const b={qdbapi:{username:t.email,password:t.password,hours:t.hours||72}};if(!t.email)throw c[0][7]={value:"Invalid Login"},this.addLoginAttempt(c),{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}};return this.axiosIns({method:"post",url:this.config.loginEndpoint,headers:{"QUICKBASE-ACTION":"API_Authenticate","Content-Type":"application/xml"},data:W(b),withCredentials:!0}).then(w=>{const A=ee(new window.DOMParser().parseFromString(w.data,"text/xml"));if(A.email=t.email,A.errcode!==0)throw w.data=A,c[0][7]={value:"Invalid Login"},this.addLoginAttempt(c),{response:w};if(A.userid==="1.ckbs"||A.userid.startsWith("1."))throw w.data=A,c[0][7]={value:"Invalid Login"},this.addLoginAttempt(c),{response:w};return delete A.action,delete A.errcode,delete A.errtext,w.data=A,c[0][7]={value:"Successful"},this.addLoginAttempt(c),this.setUserTicket(w.data.ticket),this.fetchAndSetUserData(U(j({},w.data),{redirect:!0,redirectPath:s,rid:h[3],userType:t.userType}))}).catch(w=>{throw c[0][7]={value:"Invalid Password"},this.addLoginAttempt(c),w})}else if(h[32]==="Candidate"){if(await Ae.compare(t.password,h[7]))return c[0][7]={value:"Successful"},await this.addLoginAttempt(c,!0),this.fetchAndSetUserData({redirect:!0,redirectPath:s,rid:h[3],userType:t.userType});throw c[0][7]={value:"Invalid Password"},{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}}else if(h[32]==="Project User"){if(await Ae.compare(t.password,h[7]))return c[0][7]={value:"Successful"},await this.addLoginAttempt(c,!0),this.fetchAndSetUserData({redirect:!0,redirectPath:s,rid:h[3],userType:t.userType});throw c[0][7]={value:"Invalid Password"},this.addLoginAttempt(c),{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}}else throw c[0][7]={value:"Invalid Login"},this.addLoginAttempt(c),{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}}else throw c[0][7]={value:"Invalid Login"},this.addLoginAttempt(c),{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}}async checkIfUserExist(t){const s=`{'10'.EX.'Active'}${t.email?`AND{'6'.EX.'${t.email}'}`:""}${t.phoneNumber?`AND{'8'.EX.'${t.phoneNumber}'}`:""}${t.userType?`AND{'32'.EX.'${t.userType}'}`:""}`,i=[{7:{value:"User Request"},8:{value:s},9:{value:1},14:{value:77}}],{data:r}=await this.fetchFromStructureApp({fields:i});return r.length>0}async fetchAndSetUserData(t){this.userStore=this.userStore||T();const{data:s}=await this.userStore.fetchUser(t);if(!s.user)throw{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}};const i=s.user,r=this.getOfficeLocation(),a=this.getCheckIn();if(this.userType=i[32],i[32]==="QuickBase User"?(t.reAuthenticate&&this.nativeQuickbaseReAuthenticate({}),this.dataStore=this.dataStore||ce(),this.dataStore.getSelectedOffice||this.dataStore.setSelectedOffice(s.access.find(n=>n[15]===!0&&n[7]==="Office")),this.loginFeathers({email:i[34],id:i[3]}).catch(async n=>{console.log(n)})):i[32]==="Candidate"?(this.employeeStore=this.employeeStore||_(),se(i[102])&&await this.setUserTicket(i[102],i[104].toDate())):i[32]==="Project User"&&(se(i[102])&&await this.setUserTicket(i[102],i[104].toDate()),s.access.length>0&&(this.projectsStore=this.projectsStore||X(),this.hiringStore=this.hiringStore||De(),await this.projectsStore.getProjectsData())),i[82]===!0&&i.empRID&&i[32]==="Candidate"){const n=[{9:{value:i[80]},7:{value:"Employee"}}],{data:o}=await this.fetchFromHiringApp({fields:n});if(this.employeeStore=this.employeeStore||_(),this.employeeStore.setEmployee(o.employee,!0),!o.employee.lang||o.employee.lang===0){let c=1;be.global.locale.value==="en-US"?c=1:be.global.locale.value==="es"&&(c=2);const l={339:{value:c}};this.updateEmployeeData({fields:l})}}if(i[100]===""){this.userStore.$patch(o=>o.user[100]=be.global.locale.value);const n=[{3:{value:i[3]},26:{value:"now"},100:{value:be.global.locale.value}}];this.upsertRecordsXML({to:"br4pxrbs6",fieldsToReturn:[76],data:n,formatObject:76})}else this.appStore=this.appStore||M(),be.global.locale.value=i[100],this.appStore.setLang(i[100]);if(se(i[86])&&i[32]==="Candidate"){const n=[{9:{value:i[86]},7:{value:"Self Check-In"}}],{data:o}=await this.fetchFromRecruitingApp({fields:n});o&&(o[13].isToday()&&o[15]==="Called"&&r&&a?this.checkInUser():o[13].isToday()?(this.appStore=this.appStore||M(),this.appStore.setCheckInData(o)):r&&a?this.checkInUser():(this.appStore=this.appStore||M(),this.appStore.setCheckInData({})))}else r&&a&&i[32]==="Candidate"&&this.checkInUser();return i}loginFeathers(t){return this.serverAPI.login({strategy:"local-quickbase",email:t.email,quickbaseId:t.id,token:this.getUserTicket()}).catch(s=>{throw s})}feathersReAuthenticate(){return this.serverAPI.reAuthenticate()}feathersAuthenticated(){return this.serverAPI.authenticated()}async nativeQuickbaseLogin(t){const s={qdbapi:{username:t.email,password:t.password,hours:t.hours||720}};return this.axiosIns({method:"post",url:this.config.loginEndpoint,headers:{"QUICKBASE-ACTION":"API_Authenticate","Content-Type":"application/xml"},data:W(s),withCredentials:!0}).then(i=>{const r=ee(new window.DOMParser().parseFromString(i.data,"text/xml"));if(r.email=t.email,r.errcode!==0)throw i.data=r,{response:i};if(r.userid==="1.ckbs"||r.userid.startsWith("1."))throw i.data=r,{response:i};return i.data=r,i.data}).catch(i=>{throw i})}async nativeQuickbaseReAuthenticate(t){let s=this.getUserTicket();if(t.kiosk&&(s=this.getKioskTicket()),!s)return null;const i={qdbapi:{ticket:s,hours:t.hours||336}};return this.axiosIns({method:"post",url:this.config.loginEndpoint,headers:{"QUICKBASE-ACTION":"API_Authenticate","Content-Type":"application/xml"},data:W(i),withCredentials:!0}).then(r=>{const a=ee(new window.DOMParser().parseFromString(r.data,"text/xml"));if(a.errcode!==0)throw r.data=a,{response:r};if(a.userid==="1.ckbs"||a.userid.startsWith("1."))throw r.data=a,{response:r};return r.data=a,t.kiosk?this.setKioskTicket(r.data.ticket):this.setUserTicket(r.data.ticket),r.data}).catch(r=>{throw r})}async checkInUser(t){t=t||{};const s=await this.getUserInfo(),i=this.getOfficeLocation(),r=await this.getIpInfo();if(this.userStore=this.userStore||T(),this.appStore=this.appStore||M(),this.employeeStore=this.employeeStore||_(),!s||!i)return;if(this.appStore.checkedIn){console.log("already checked in",this.appStore.checkedIn),this.removeCheckIn();return}const a=[{6:{value:s[9]?s[9].phoneNumber:s[8].replace(/[^0-9]/g,"")},7:{value:s[35]},8:{value:s[37]},9:{value:i.rid},10:{value:t.reason?t.reason:"Applying"},11:{value:t.position?t.position:""},13:{value:"now"},16:{value:s[80]},21:{value:!0},24:{value:r?JSON.stringify(r):""}}];try{const{data:n}=await this.upsertRecordsXML({to:"br26nivmr",fieldsToReturn:[3,31],data:a,formatObject:31});this.removeCheckIn(),this.appStore.setCheckInData(n[0][31]);const o=[{3:{value:s[3]},26:{value:"now"},86:{value:n[0][3]}}],{data:c}=await this.upsertRecordsXML({to:"br4pxrbs6",fieldsToReturn:[76],data:o,formatObject:76}),l=c[0][76];if(this.userStore.userLoggedIn){const h=Object.assign({},l);delete h.access,delete h.permissions,this.setUserPermissions(l.permissions,!0),this.setUserAccess(l.access,!0),await this.setUserInfo(h,!0)}return l}catch(n){console.log(n)}}async deActivateAccount(t){const s=`{'10'.EX.'Active'}${t.email?`AND{'6'.EX.'${t.email}'}`:""}${t.phoneNumber?`AND{'8'.EX.'${t.phoneNumber}'}`:""}${t.userType?`AND{'32'.EX.'${t.userType}'}`:""}`,i=[{7:{value:"User Request"},8:{value:s},9:{value:1},14:{value:77}}],{data:r}=await this.fetchFromStructureApp({fields:i});if(r.length>0){const n=[{3:{value:r[0][3]},10:{value:"Inactive"},50:{value:!1},17:{value:!1}}];return await this.upsertRecordsFormat({to:"br4pxrbs6",fieldsToReturn:[76],data:n}),!0}return r}async resetPassword(t){const s=t.firstName.split(" "),i=t.lastName.split(" ");let r=`AND{'35'.CT.'${t.firstName}'}`,a=`AND{'37'.CT.'${t.lastName}'}`;s.length>1&&(s.forEach((b,w)=>{w===0?r=`({'35'.CT.'${b}'}`:r+=`OR{'35'.CT.'${b}'}`}),r+=")"),i.length>1&&(i.forEach((b,w)=>{w===0?a=`AND({'37'.CT.'${b}'}`:a+=`OR{'37'.CT.'${b}'}`}),a+=")");const n=`{'10'.EX.'Active'}${t.email?`AND{'6'.EX.'${t.email}'}`:""}${t.phoneNumber?`AND{'8'.EX.'${t.phoneNumber}'}`:""}${t.userType?`AND{'32'.EX.'${t.userType}'}`:""}${r}${a}`,o=[{7:{value:"User Request"},8:{value:n},9:{value:1},14:{value:77}}],c=await this.fetchFromStructureApp({fields:o}),l=c.data,h=new Date;if(l.length>0){const w=[{3:{value:l[0][3]},26:{value:h},17:{value:!0}}];return await this.upsertRecordsXML({to:"br4pxrbs6",fieldsToReturn:[76],formatObject:76,data:w})}return c}async findAndUpdateUser(t){const s=t.firstName?t.firstName.split(" "):[],i=t.lastName?t.lastName.split(" "):[];let r=t.firstName?`AND{'35'.CT.'${t.firstName}'}`:"",a=t.firstName?`AND{'37'.CT.'${t.lastName}'}`:"";s.length>1&&(s.forEach((h,b)=>{b===0?r=`({'35'.CT.'${h}'}`:r+=`OR{'35'.CT.'${h}'}`}),r+=")"),i.length>1&&(i.forEach((h,b)=>{b===0?a=`AND({'37'.CT.'${h}'}`:a+=`OR{'37'.CT.'${h}'}`}),a+=")");const n=`{'10'.EX.'Active'}${t.email?`AND{'6'.EX.'${t.email}'}`:""}${t.phoneNumber?`AND{'8'.EX.'${t.phoneNumber}'}`:""}${t.userType?`AND{'32'.EX.'${t.userType}'}`:""}${r}${a}`,o=[{7:{value:"User Request"},8:{value:n},9:{value:1},14:{value:77}}],c=await this.fetchFromStructureApp({fields:o}),l=c.data;if(l.length>0){const h=l[0];let b=JSON.parse(JSON.stringify(t.fields[0]));return b=await vd({3:{value:h[3]}},b),await this.upsertRecordsXML({to:"br4pxrbs6",fieldsToReturn:[76],formatObject:76,data:[b]})}return c}async clearLocalForage(){let t=[y.removeItem(this.appConfig.storageUserKeyName),y.removeItem(this.appConfig.storageUserTicketKeyName),y.removeItem(this.appConfig.storagePermissionsKeyName),y.removeItem(this.appConfig.storageAccessKeyName),y.removeItem(this.appConfig.storageOfficeLocationKeyName),y.removeItem(this.appConfig.storageEmployeeKeyName),y.removeItem(this.appConfig.storageCheckInKeyName),y.removeItem(this.appConfig.storageJobBoardKeyName),y.removeItem(this.appConfig.storageProfile),y.removeItem(this.appConfig.storageProfileStep),y.removeItem(this.appConfig.storageProfileVoluntaryForms),y.removeItem(this.appConfig.storageHiringCenter),K.clear()];return this.appConfig.pageType!=="Candidate Kiosk"&&(t=t.concat([y.removeItem(this.appConfig.storageExperienceOptions),y.removeItem(this.appConfig.storageContactMethods),y.removeItem(this.appConfig.storageEmploymentOptions),y.removeItem(this.appConfig.storageCompanyOptions),y.removeItem(this.appConfig.storageCraftOptions),y.removeItem(this.appConfig.storageRelationshipOptions),y.removeItem(this.appConfig.storageCredentialOptions),y.removeItem(this.appConfig.storageAffirmativeOptions),y.removeItem(this.appConfig.storageVeteranStatusOptions),y.removeItem(this.appConfig.storageDisabilityPages),y.removeItem(this.appConfig.storageDisabilityForm),y.removeItem(this.appConfig.storageEverGreenJobs),y.removeItem(this.appConfig.storageToolCheckList)])),await Promise.allSettled(t)}async storeLogout(){return this.userStore=this.userStore||T(),this.userStore.logout()}async logout(t){const s=zi(),i=[this.clearLocalForage(),this.removeOfficeLocation()],r=s._s[Symbol.iterator]();for(const a of r)if(this.appConfig.pageType==="Candidate"||this.appConfig.pageType==="Candidate Kiosk"){if(a[0]==="employee"){i.push(a[1].$reset());continue}if(a[0]==="boardAppStore"){i.push(a[1].$reset());continue}if(a[0]==="profile"){i.push(a[1].$reset());continue}if(a[0]==="assessment"){i.push(a[1].$reset());continue}if(a[0]==="hiringCenter"){i.push(a[1].$reset());continue}}else{i.push(a[1].$reset());continue}return B.remove(this.appConfig.storageUserTicketKeyName,{secure:!0,sameSite:"Strict"}),await Promise.allSettled(i),!0}async upsertRecordsFormat(...t){const s=t[0].formatObject||null;t[0].formatObject&&delete t[0].formatObject;const i=await this.axiosIns.post(this.config.insertRecords,...t).then(async r=>{let{data:a}=r.data;const n=a.map(async c=>{Object.keys(c).map(async h=>{c[h]=await c[h].value})});return a=await Promise.all(n),r.data});return s&&i.data.length>0&&i.data.forEach(r=>{Array.isArray(s)?s.forEach(a=>{Q(a)&&r[a]&&(r[a]=je(r[a]))}):Q(s)&&(r[s]=je(r[s])),r[1]&&(r[1]=d(r[1]).tz("America/Chicago")),r[2]&&(r[2]=d(r[2]).tz("America/Chicago"))}),i}async addRecordNoUser(t){const s={qdbapi:{msInUTC:1}};return this.config.appToken&&(s.qdbapi.apptoken=this.config.appToken),t.fields&&(s.qdbapi.fields=t.fields),s.qdbapi.usertoken=this.config.userToken,this.axiosIns({method:"post",url:`https://elitehcms.quickbase.com/db/${t.to}?a=API_AddRecord`,headers:{"QUICKBASE-ACTION":"API_AddRecord","Content-Type":"application/xml"},data:W(s)}).then(r=>{const a=ee(new window.DOMParser().parseFromString(r.data,"text/xml"));return r.data=a,r.data})}async upsertRecordsXML(t){if(t.data.length>1){const s=[];for(let a=0;a<t.data.length;a++){const n=Object.assign({},t);n.data=[t.data[a]],s.push(this.upsertRecordXML(n))}const i=await Promise.all(s),r={data:[],metadata:{createdRecordIds:[],totalNumberOfRecordsProcessed:0,unchangedRecordIds:[],updatedRecordIds:[]}};return i.forEach((a,n)=>{a.data[0]&&r.data.push(a.data[0]),r.metadata.createdRecordIds=r.metadata.createdRecordIds.concat(a.metadata.createdRecordIds),r.metadata.unchangedRecordIds=r.metadata.unchangedRecordIds.concat(a.metadata.unchangedRecordIds),r.metadata.updatedRecordIds=r.metadata.updatedRecordIds.concat(a.metadata.updatedRecordIds),r.metadata.totalNumberOfRecordsProcessed+=a.metadata.totalNumberOfRecordsProcessed,a.metadata.lineErrors&&(r.metadata.lineErrors||(r.metadata.lineErrors={}),r.metadata.lineErrors[n+1]=a.metadata.lineErrors[1])}),r}else return this.upsertRecordXML(t)}async upsertRecordXML(t){const s={qdbapi:{msInUTC:1}},i=t.formatObject||null,r=t.booleanFields?t.booleanFields.concat(this.config.booleanFields[`${t.to}`]||[]):this.config.booleanFields[`${t.to}`]||[];let a="";t.data[0][3]?(a="API_EditRecord",s.qdbapi.rid=t.data[0][3].value,delete t.data[0][3]):a="API_AddRecord",this.config.appToken&&(s.qdbapi.apptoken=this.config.appToken),t.data&&(s.qdbapi.fields=t.data),t.fieldsToReturn&&(s.qdbapi.clist=t.fieldsToReturn.join("."));const n=await this.getUserTicket();if(n)s.qdbapi.ticket=n;else if(this.config.userToken&&this.config.dev)s.qdbapi.usertoken=this.config.userToken;else if(t.to==="br54phpqz"&&this.appConfig.pageType==="Candidate Kiosk"){const c=this.getKioskTicket();c&&(s.qdbapi.ticket=c)}return this.axiosIns({method:"post",url:`https://elitehcms.quickbase.com/db/${t.to}?a=${a}`,headers:{"QUICKBASE-ACTION":`${a}`,"Content-Type":"application/xml"},data:Fe(s)}).then(c=>{let l=ee(new window.DOMParser().parseFromString(c.data,"text/xml"));return l.metadata=U(j({createdRecordIds:[]},l.errcode!==0&&{lineErrors:{}}),{totalNumberOfRecordsProcessed:0,unchangedRecordIds:[],updatedRecordIds:[]}),l.errcode!==0?(l.data=[],l.metadata.lineErrors[1]=[l.errdetail]):(l.data=[wd(new window.DOMParser().parseFromString(c.data,"text/xml"))],i&&(Array.isArray(i)?i.forEach(h=>{Q(h)&&l.data[0][h]&&(l.data[0][h]=je(l.data[0][h]))}):Q(i)&&l.data[0][i]&&l.data[0][i]&&(l.data[0][i]=je(l.data[0][i]))),r.length>0&&r.forEach(h=>{l.data[0][h]&&(l.data[0][h]=l.data[0][h]===1)}),l.data[0][1]&&(l.data[0][1]=d(l.data[0][1]).tz("America/Chicago")),l.data[0][2]&&(l.data[0][2]=d(l.data[0][2]).tz("America/Chicago"))),l.data[0]&&l.rid&&(l.metadata.totalNumberOfRecordsProcessed=1,l.num_fields_changed===0&&(l.metadata.unchangedRecordIds=[l.rid]),a==="API_EditRecord"&&l.num_fields_changed>0?l.metadata.updatedRecordIds=[l.rid]:a==="API_AddRecord"&&(l.metadata.createdRecordIds=[l.rid])),delete l.action,delete l.errcode,delete l.errdetail,delete l.errtext,delete l.num_fields_changed,delete l.rid,delete l.update_id,delete l.record,c.data=l,c.data})}async addRecordXML(t){const s={qdbapi:{msInUTC:1}};this.config.appToken&&(s.qdbapi.apptoken=this.config.appToken),t.fields&&(s.qdbapi.fields=t.fields),t.list&&(s.qdbapi.clist=t.list.join("."));const i=await this.getUserTicket();return i?s.qdbapi.ticket=i:this.config.userToken&&this.config.dev&&(s.qdbapi.usertoken=this.config.userToken),this.axiosIns({method:"post",url:`https://elitehcms.quickbase.com/db/${t.to}?a=API_AddRecord`,headers:{"QUICKBASE-ACTION":"API_AddRecord","Content-Type":"application/xml"},data:W(s)}).then(a=>{const n=ee(new window.DOMParser().parseFromString(a.data,"text/xml"));return a.data=n,a.data})}async editRecordXML(t){const s={qdbapi:{msInUTC:1}};if(t.rid)s.qdbapi.rid=t.rid;else throw"You must supply rid!";this.config.appToken&&(s.qdbapi.apptoken=this.config.appToken),t.fields&&(s.qdbapi.fields=t.fields),t.list&&(s.qdbapi.clist=t.list.join("."));const i=await this.getUserTicket();return i?s.qdbapi.ticket=i:this.config.userToken&&this.config.dev&&(s.qdbapi.usertoken=this.config.userToken),this.axiosIns({method:"post",url:`https://elitehcms.quickbase.com/db/${t.to}?a=API_EditRecord`,headers:{"QUICKBASE-ACTION":"API_EditRecord","Content-Type":"application/xml"},data:W(s)}).then(a=>{const n=ee(new window.DOMParser().parseFromString(a.data,"text/xml"));return a.data=n,a.data})}async addLogRecord(t){const s={qdbapi:{}};return s.qdbapi.apptoken="dx47ve3djh2kcybbetrvscuqa2gk",t.data&&(s.qdbapi.fields=t.data),t.list&&(s.qdbapi.clist=t.list.join(".")),s.qdbapi.usertoken="b596fu_ng3q_0_dxyp9j657g8xdbgiftajcj56p7s",fetch("https://elitehcms.quickbase.com/db/bsh2qrysj?a=API_AddRecord",{method:"POST",credentials:"omit",headers:{"Content-Type":"application/xml"},body:Fe(s)}).then(a=>a.text()).then(a=>a).catch(a=>{throw a})}async fetchFromProjectsApp(t){const s=await this.upsertRecordsXML({to:"bsazqhchc",fieldsToReturn:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],formatObject:12,data:t.fields});return s.data=s.data[0][12],s}async fetchFromStructureApp(t){const s=await this.upsertRecordsXML({to:"br9srnufv",fieldsToReturn:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],formatObject:12,data:t.fields});return s.data=s.data[0][12],s}async fetchFromHiringApp(t){const s=await this.upsertRecordsXML({to:"br9vuzuj7",fieldsToReturn:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],formatObject:12,data:t.fields});return s.data=s.data[0][12],s}async fetchFromRecruitingApp(t){const s=await this.upsertRecordsXML({to:"br9j45fg5",fieldsToReturn:[1,2,3,4,5,6,7,8,9,10,11,12,13,14],formatObject:12,data:t.fields});return s.data=s.data[0][12],s}async fetchFromCredentialsAndTrainingApp(t){const s=await this.upsertRecordsXML({to:"bsgydhtiq",fieldsToReturn:[1,2,3,4,5,6,7,8,9,10,11,12,13,14],formatObject:12,data:t.fields});return s.data=s.data[0][12],s}async softDeleteEmployee(t){const s=new Date,i=[{3:{value:t},109:{value:""},25:{value:""},28:{value:""},16:{value:""},26:{value:""},34:{value:""},509:{value:!0},510:{value:s}}],{data:r}=await this.upsertRecordsFormat({to:"bp3gb7ng2",fieldsToReturn:[3,500],data:i,formatObject:500});return r[3]}fetchIpInfo(){return fetch("https://api.elitehcms.com/ipInfo").then(t=>t.json()).then(t=>(this.setIpInfo(t),t))}async addLoginAttempt(t,s){try{let c=null;B.has("clm-qb-id")?c=B.get("clm-qb-id"):(c=new DeviceUUID().get(),B.set("clm-qb-id",c,{expires:"365d",secure:!0,sameSite:"Strict"})),t[0][24]={value:c}}catch(c){console.log(c)}const i=t[0][6]?t[0][6].value:"",r=t[0][7]?t[0][7].value:"",a=d(),n=a.add(this.config.lastAttemptExpMinutes,"minute");r[7]==="Invalid Login"||r[7]==="Invalid Password"?i[6]===this.loginAttempts.login?(this.loginAttempts.invalidLogins+=1,this.loginAttempts.exp=n,this.loginAttempts.currentTime=a,t[0][15]={value:this.loginAttempts.invalidLogins},t[0][16]={value:n.valueOf()}):(this.loginAttempts.invalidLogins=1,this.loginAttempts.exp=n,this.loginAttempts.currentTime=a,this.loginAttempts.login=i[6],t[0][15]={value:this.loginAttempts.invalidLogins},t[0][16]={value:n.valueOf()}):r[7]==="Successful"&&(this.loginAttempts={invalidLogins:0,login:null,exp:null,currentTime:null}),t[0][25]={value:this.appConfig.pageId},t[0][26]={value:this.appConfig.appId};const{data:o}=await this.upsertRecordsXML({to:"br54phpqz",data:t,formatObject:22,fieldsToReturn:[3,22]});if(s&&o.length===1&!!o[0][22])return this.setUserTicket(o[0][22][20],o[0][22][23].toDate())}async doQuery(t){const s={qdbapi:j({},this.config.commonParameters)};t.queryTotalRecords=se(t.queryTotalRecords)?t.queryTotalRecords:!1,t.select&&(s.qdbapi.clist=t.select.join(".")),t.where&&(s.qdbapi.query=t.where);let i=null;if(t.sortBy)for(let c=0;c<t.sortBy.length;c++)c===0?(s.qdbapi.slist=`${t.sortBy[c].fieldId?`${t.sortBy[c].fieldId}.`:""}`,i=`${t.sortBy[c].order==="ASC"?"sortorder-A.":"sortorder-D."}`):(s.qdbapi.slist+=`${t.sortBy[c].fieldId?`${t.sortBy[c].fieldId}.`:""}`,i+=`${t.sortBy[c].order==="ASC"?"sortorder-A.":"sortorder-D."}`);t.options&&(s.qdbapi.options=`${t.options.top?`num-${t.options.top}.`:""}${i||""}${t.options.skip&&t.options.skip>0?`skp-${t.options.skip}`:""}`),this.config.appToken&&(s.qdbapi.apptoken=this.config.appToken);const r=await this.getUserTicket();r&&!t.refresh?s.qdbapi.ticket=r:this.config.userToken&&this.config.dev&&(s.qdbapi.usertoken=this.config.userToken);const a=this.axiosIns({method:"post",url:`https://elitehcms.quickbase.com/db/${t.from}?a=API_DoQuery`,headers:{"QUICKBASE-ACTION":"API_DoQuery","Content-Type":"application/xml"},data:W(s)}).then(c=>{const l={};l.data=xd(new window.DOMParser().parseFromString(c.data,"text/xml")),l.fields=Ad(new window.DOMParser().parseFromString(c.data,"text/xml"));const h=[];return l.fields.forEach(b=>{b.type==="checkbox"&&h.push(b.id)}),l.data.forEach(b=>{for(const[w,A]of Object.entries(b))h.includes(w)&&(b[`${w}`]=A===1)}),l.metadata=j({totalRecords:l.data.length,numRecords:l.data.length,numFields:t.select?t.select.length:0,skip:t.options&&t.options.skip?t.options.skip:0},t.options&&t.options.top?{top:t.options.top}:{}),c.data=l,c.data});let n=null;t.queryTotalRecords&&(n=this.axiosIns({method:"post",url:`https://elitehcms.quickbase.com/db/${t.from}?a=API_DoQueryCount`,headers:{"QUICKBASE-ACTION":"API_DoQueryCount","Content-Type":"application/xml"},data:W(s)}).then(c=>{const l=ee(new window.DOMParser().parseFromString(c.data,"text/xml"));return c.data=l,c.data}));const o=await a;if(t.queryTotalRecords){const c=await n;o.metadata.totalRecords=c.numMatches}return o}async checkKioskStatus(t){this.kioskStore=this.kioskStore||Y(),this.hiringCenterStore=this.hiringCenterStore||z();let s=await y.getItem(this.appConfig.storageLastKioskFetch);const i=this.getKioskTicket();let r=!1;if(s&&s.$d&&!t&&(s=d(s.$d),t=s.isBefore(d().subtract(2,"day")),r=t),!i)return!1;if(s)if(t||!this.kioskStore.kioskAvailable||!this.hiringCenterStore.hiringCenterAvailable){const{data:a}=await this.getNativeQuickbaseUser({kiosk:!0});if(a.login==="Anonymous")return!1;{const n=await this.kioskStore.fetchKioskAccount(a,!0);return i&&r&&this.nativeQuickbaseReAuthenticate({kiosk:!0}),n.length!==0}}else{if(this.kioskStore.kioskAvailable&&this.hiringCenterStore.hiringCenterAvailable&&"45"in this.kioskStore.kioskAccount&&"bookmarks"in this.kioskStore.kioskAccount&&(!t||this.config.dev))return!0;if(this.kioskStore.kioskAvailable&&this.hiringCenterStore.hiringCenterAvailable&&(!t||this.config.dev)){const{data:a}=await this.getNativeQuickbaseUser({kiosk:!0});if(a.login==="Anonymous")return!1;{const n=await this.kioskStore.fetchKioskAccount(a,!0);return i&&this.nativeQuickbaseReAuthenticate({kiosk:!0}),n.length!==0}}else return!1}else{const{data:a}=await this.getNativeQuickbaseUser({kiosk:!0});if(a.login==="Anonymous")return!1;{const n=await this.kioskStore.fetchKioskAccount(a,!1);return i&&r&&this.nativeQuickbaseReAuthenticate({kiosk:!0}),n.length!==0}}}async getNativeQuickbaseUser(t){const s={qdbapi:{}};if(t.qbUser){const a=await this.getUserTicket();s.qdbapi.ticket=a}if(this.config.dev&&t.kiosk){const a=this.getKioskTicket();s.qdbapi.ticket=a}return await this.axiosIns({method:"post",url:"https://elitehcms.quickbase.com/db/main?a=API_GetUserInfo",headers:{"QUICKBASE-ACTION":"API_GetUserInfo","Content-Type":"application/xml"},data:W(s)}).then(a=>{const n={};return n.data=bd(new window.DOMParser().parseFromString(a.data,"text/xml")),n.data.errcode&&(n.data.email="",n.data.externalAuth=0,n.data.firstName="",n.data.id="1.ckbs",n.data.isVerified=0,n.data.lastName="",n.data.login="Anonymous",n.data.screenName="Anonymous"),a.data=n,a.data})}}const se=e=>!(typeof e=="undefined"||e===null||e===""),Q=e=>!isNaN(parseFloat(e))&&isFinite(e),W=e=>{let t="";for(const s in e){if(t+=e[s]instanceof Array?"":`<${s}>`,e[s]instanceof Array)if(s==="fields")for(let i=0;i<e[s].length;i++)if(Object.keys(e[s][i]).length===2&&e[s][i].filename){let r=null;for(const a in e[s][i])Q(a)&&(r=a);t+=`<field fid="${r}" filename="${e[s][i].filename}">${e[s][i][`${r}`]}</field>`}else for(const r in e[s][i])t+=`<field fid="${r}">${e[s][i][r].replaceAll("&","&#38;").replaceAll("<","&#60;").replaceAll(">","&#62;")}</field>`;else for(const i in e[s])t+=`<${s}>`,t+=W(e[s][i]),t+=`</${s}>`;else typeof e[s]=="object"?t+=W(e[s]):t+=e[s];t+=e[s]instanceof Array?"":`</${s}>`}return t=t.replace(/<\/?[0-9]{1,}>/g,""),t},Fe=e=>{let t="";for(const s in e){if(t+=e[s]instanceof Array?"":`<${s}>`,e[s]instanceof Array)if(s==="fields")for(let i=0;i<e[s].length;i++)if(Object.keys(e[s][i]).length===2&&e[s][i].filename){let r=null;for(const a in e[s][i])Q(a)&&(r=a);t+=`<field fid="${r}" filename="${e[s][i].filename}">${e[s][i][`${r}`].value}</field>`}else for(const r in e[s][i])try{t+=`<field fid="${r}">${e[s][i][r].value.replaceAll("&","&#38;").replaceAll("<","&#60;").replaceAll(">","&#62;")}</field>`}catch{t+=`<field fid="${r}">${e[s][i][r].value}</field>`}else for(const i in e[s])t+=`<${s}>`,t+=Fe(e[s][i]),t+=`</${s}>`;else typeof e[s]=="object"?t+=Fe(e[s]):t+=e[s];t+=e[s]instanceof Array?"":`</${s}>`}return t=t.replace(/<\/?[0-9]{1,}>/g,""),t},ee=e=>{const t=e.querySelector("qdbapi").children,s={};for(let i=0;i<t.length;i++)t[i].tagName!=="table"&&(s[`${t[i].tagName}`]=Q(t[i].innerHTML)?parseInt(t[i].innerHTML):t[i].innerHTML);return s},bd=e=>{const t=e.querySelector("qdbapi user");if(!t)return ee(e);const s={id:Q(t.id)?parseInt(t.id):t.id};for(let i=0;i<t.children.length;i++)s[`${t.children[i].tagName}`]=Q(t.children[i].innerHTML)?parseInt(t.children[i].innerHTML):t.children[i].innerHTML;return s},xd=e=>{const t=e.querySelector("qdbapi table records"),s=[];for(let i=0;i<t.children.length;i++){const r={};for(let a=0;a<t.children[i].children.length;a++)t.children[i].children[a].id&&(r[`${t.children[i].children[a].id}`]=Q(t.children[i].children[a].innerHTML)?parseInt(t.children[i].children[a].innerHTML):t.children[i].children[a].innerHTML);s.push(r)}return s},wd=e=>{const t=e.querySelector("qdbapi record"),s={};for(let i=0;i<t.children.length;i++)t.children[i].id&&(s[`${t.children[i].id}`]=Q(t.children[i].innerHTML)?parseInt(t.children[i].innerHTML):t.children[i].innerHTML);return s},Ad=e=>{const t=e.querySelector("qdbapi table fields"),s=[];for(let i=0;i<t.children.length;i++){let r=t.children[i].attributes.field_type.value,a=t.children[i].firstElementChild.nodeName==="label"?t.children[i].firstElementChild.innerHTML:null;if(!a){for(let o=0;o<t.children[i].children.length;o++)if(t.children[i].children[o].nodeName==="label"){a=t.children[i].children[o].innerHTML;break}}r==="float"&&(r="numeric");const n={id:t.children[i].id,label:a,type:r};s.push(n)}return s},te=(e,t)=>(Array.isArray(e)?e.forEach(s=>{Object.keys(s).forEach(i=>{s[i]&&(s[i]=te(s[i],i))})}):!Q(t)&&typeof e=="object"&&!Array.isArray(e)&&e!==null?Object.keys(e).forEach(s=>{e[s]&&(e[s]=te(e[s],s))}):se(e.date)&&se(e.time)&&e.time!=="::"?(e=`${e.date} ${e.time}`,e=d(e,"MM-DD-YYYY H:m:s").tz("America/Chicago")):se(e.date)?(e=`${e.date}`,e=d(e,"MM-DD-YYYY").tz("America/Chicago")):se(e.time)&&e.time!=="::"?(e=`${e.time}`,e=d(e,"H:m:s").tz("America/Chicago")):typeof e=="object"&&!Array.isArray(e)&&e!==null&&Object.keys(e).forEach(s=>{e[s]&&(e[s]=te(e[s],s))}),e),je=e=>{try{let t=JSON.parse(e);return Array.isArray(t)?t.forEach(s=>{Object.keys(s).forEach(i=>{s[i]&&(s[i]=te(s[i],i))})}):typeof t=="object"&&!Array.isArray(t)&&t!==null&&Object.keys(t).forEach(s=>{Array.isArray(t[s])?t[s].forEach(i=>{Object.keys(i).forEach(r=>{Q(r)&&i[r]?i[r]=te(i[r],r):i[r]&&typeof i[r]=="object"&&!Array.isArray(i[r])&&i[r]!==null&&Object.keys(i[r]).forEach(a=>{i[r][a]&&(i[r][a]=te(i[r][a],a))})})}):typeof t[s]=="object"&&!Array.isArray(t[s])&&t[s]!==null&&(Q(s)?t[s]=te(t[s],s):Object.keys(t[s]).forEach(i=>{t[s][i]&&(t[s][i]=te(t[s][i],i))}))}),t}catch(t){return console.log(t),console.log("error parsing:",e),[]}};function kd(e,t){return{quickbase:new yd(e,t)}}const Id=bs(xs.create({baseURL:As.baseURL,timeout:25e3,headers:{"Content-Type":"application/json"}}),{maxRequests:6,perMilliseconds:1e3}),{quickbase:x}=kd(Id,{});var Sd=Qi(({app:e})=>{e.config.globalProperties.$quickbase=x}),Nd=Object.freeze(Object.defineProperty({__proto__:null,default:Sd,quickbase:x},Symbol.toStringTag,{value:"Module"}));export{ji as A,ae as B,Fi as C,$t as D,Jt as E,_ as F,z as G,H,Ae as I,ie as J,V as K,Fd as L,X as M,De as N,Ra as O,gi as P,ce as Q,Nd as R,Ed as S,Ye as _,ue as a,M as b,Y as c,Ci as d,pc as e,yi as f,Oi as g,Di as h,Oe as i,Ti as j,Zc as k,Ii as l,Hu as m,jt as n,_c as o,Uc as p,x as q,Le as r,Nr as s,Tt as t,T as u,de as v,xi as w,zn as x,Cc as y,Ee as z};
