import{bE as be,bF as ye,bG as ve,r as w,c as v,bH as he,w as ge,h as U,c5 as x,cy as pe,cA as ue,g as ke,k as de,c3 as $e,_ as ce,y as o,z as h,d as a,bg as l,c1 as L,D as u,B as t,bW as G,a9 as d,al as f,am as i,b_ as E,c2 as Z,C as we,bi as ne,co as me,cC as je,as as j,aX as qe,bX as I,bV as P,F as W,aW as H}from"./index.cc0af05e.js";import{Q as K}from"./QList.043cc9c0.js";import{Q as X,a as Y}from"./QMenu.d4970a73.js";import{Q as Ce}from"./QPage.38bfd177.js";import{e as Fe,j as Se,p as fe,i as Be,h as _e}from"./quickbase.bf985889.js";import{dayjs as Ve}from"./dayjs.c5c3e7d1.js";import{Q as ie}from"./QBadge.2182fc27.js";import{C as re}from"./ClosePopup.1c5b5cc7.js";import{u as Me}from"./use-quasar.3f89d778.js";import"./position-engine.b70ea25a.js";import"./selection.92d48516.js";import"./_commonjsHelpers.dfee5925.js";import"./localForage.e38a13cc.js";import"./index.7dbe61ef.js";import"./i18n.186ee680.js";import"./api.a1590afb.js";var Pe=be({name:"QPagination",props:{...ye,modelValue:{type:Number,required:!0},min:{type:Number,default:1},max:{type:Number,required:!0},color:{type:String,default:"primary"},textColor:String,activeColor:String,activeTextColor:String,inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},maxPages:{type:Number,default:0,validator:e=>e>=0},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,dense:Boolean,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:r}){const{proxy:B}=ke(),{$q:g}=B,q=ve(e,g),p=w(null),b=v({get:()=>e.modelValue,set:m=>{if(m=parseInt(m,10),e.disable||isNaN(m))return;const k=he(m,e.min,e.max);e.modelValue!==k&&r("update:modelValue",k)}});ge(()=>e.min+e.max,()=>{b.value=e.modelValue});function s(m,k){return[!0,!1].includes(m)?m:k}const _=v(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),$=v(()=>b.value+" / "+e.max),J=v(()=>s(e.boundaryLinks,e.input)),V=v(()=>s(e.boundaryNumbers,!e.input)),N=v(()=>s(e.directionLinks,e.input)),O=v(()=>s(e.ellipses,!e.input)),Q=v(()=>{const m=[e.iconFirst||g.iconSet.pagination.first,e.iconPrev||g.iconSet.pagination.prev,e.iconNext||g.iconSet.pagination.next,e.iconLast||g.iconSet.pagination.last];return g.lang.rtl===!0?m.reverse():m}),n=v(()=>e.disable===!0?{"aria-disabled":"true"}:{}),c=v(()=>({round:e.round,rounded:e.rounded,outline:e.outline,unelevated:e.unelevated,push:e.push,glossy:e.glossy,dense:e.dense,padding:e.padding,color:e.color,flat:!0,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),F=v(()=>({flat:e.flat,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor}));function T(m){b.value=m}function y(m){b.value=b.value+m}function ee(){b.value=p.value,p.value=null}function M(m,k){const A={...c.value,...m};return k!==void 0&&(e.toFn!==void 0?A.to=e.toFn(k):A.onClick=()=>T(k)),U(x,A)}return Object.assign(B,{set:T,setByOffset:y}),()=>{const m=[],k=[],A=[];if(J.value&&(m.push(M({key:"bls",disable:e.disable||e.modelValue<=e.min,icon:Q.value[0]},e.min)),k.unshift(M({key:"ble",disable:e.disable||e.modelValue>=e.max,icon:Q.value[3]},e.max))),N.value&&(m.push(M({key:"bdp",disable:e.disable||e.modelValue<=e.min,icon:Q.value[1]},e.modelValue-1)),k.unshift(M({key:"bdn",disable:e.disable||e.modelValue>=e.max,icon:Q.value[2]},e.modelValue+1))),e.input===!0)A.push(U(ue,{class:"inline",style:{width:`${$.value.length/1.5}em`},type:"number",dense:!0,value:p.value,disable:e.disable,dark:q.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:$.value,min:e.min,max:e.max,"onUpdate:modelValue"(S){p.value=S},onKeyup(S){pe(S,13)===!0&&ee()},onBlur:ee}));else{let S=Math.max(e.maxPages,1+(O.value?2:0)+(V.value?2:0)),D=e.min,z=e.max,te=!1,le=!1,ae=!1,oe=!1;e.maxPages&&S<e.max-e.min+1&&(S=1+Math.floor(S/2)*2,D=Math.max(e.min,Math.min(e.max-S+1,e.modelValue-Math.floor(S/2))),z=Math.min(e.max,D+S-1),V.value&&(ae=!0,D+=1),O.value&&D>e.min+(V.value?1:0)&&(te=!0,D+=1),V.value&&(oe=!0,z-=1),O.value&&z<e.max-(V.value?1:0)&&(le=!0,z-=1));const R={minWidth:`${Math.max(2,String(e.max).length)}em`};if(ae){const C=e.min===e.modelValue;m.push(M({key:"bns",style:R,disable:e.disable,flat:!C,label:e.min,...C?F.value:{}},e.min))}if(oe){const C=e.max===e.modelValue;k.unshift(M({key:"bne",style:R,disable:e.disable,flat:!C,label:e.max,...C?F.value:{}},e.max))}te&&m.push(M({key:"bes",style:R,disable:e.disable,label:"\u2026",ripple:!1},D-1)),le&&k.unshift(M({key:"bee",style:R,disable:e.disable,label:"\u2026",ripple:!1},z+1));for(let C=D;C<=z;C++){const se={key:`bpg${C}`,style:R,disable:e.disable,label:C};C===e.modelValue&&Object.assign(se,F.value),A.push(M(se,C))}}return U("div",{class:_.value,...n.value},[m,U("div",{class:"row justify-center"},[A]),k])}}});const Qe=de({props:{job:Object},setup(e){const r=$e(),B=w(0),g=w(20),q=Me(),p=w(!1),b=w(!1),s=w(!1),{voluntaryFormsComplete:_,employeeData:$,updateEmployeeFromApp:J}=Fe(),{fetchFormOptions:V}=Se(),{applyOnBoard:N,storeBoardApp:O}=fe(),{updateProfile:Q}=Be(),n=v(()=>{const y=e.job;return y[201]?!(q.screen.lt.md&&y.recommended):!1});async function c(){b.value=!0}async function F(){try{s.value=!0;const y=await N({job:e.job});J({action:"push",values:y,key:537}),b.value=!1,p.value=!1,s.value=!1,q.notify({type:"positive",message:"Application successfully submitted!",position:"top-right"})}catch(y){console.log(y),s.value=!1,q.notify({type:"negative",message:"Something went wrong",position:"top-right"})}}async function T(){try{s.value=!0;const y=await N({job:e.job});await V(),J({action:"push",values:y,key:537}),O(y),Q({next:1,values:{19:{value:y[20],label:y[21]},40:{value:y[22],label:y[23]}}}),b.value=!1,p.value=!1,s.value=!1,r.push({name:"apply"})}catch(y){console.log(y),s.value=!1,q.notify({type:"negative",message:"Something went wrong",position:"top-right"})}}return{helpers:_e,showDisa:n,showMore:p,apply:c,openApply:b,applyOnBoard:N,submitting:s,submitApp:F,voluntaryFormsComplete:_,tab:B,splitterModel:g,employeeData:$,goToProfile:T}}}),Ne={class:"row items-center"},Oe=["hidden"],Ae={class:"col-12 col-md-7"},De=j("Recommended"),Le=j("DISA"),xe={class:"text-primary text-caption"},Je={key:0,class:"text-dark text-body2 q-mb-md"},ze={key:1,class:"text-dark text-body2"},Ie={class:"row items-center q-mt-md"},Ee={class:"col text-right"},Te={class:"row items-center"},Re={class:"col-11"},Ue={class:"col-1 text-right"},We={key:0,style:{"min-height":"300px"}},He={class:"absolute-center"},Ke={key:1},Xe={class:"row justify-between"},Ge={class:"col-5 col-md-3"},Ye={class:"col-5 col-md-3"},Ze={class:"row q-mt-md"},et={class:"col"},tt={key:1,class:"text-primary text-caption text-italic"},lt={key:2,class:"text-primary text-caption text-italic"};function at(e,r,B,g,q,p){return o(),h("div",null,[a(Z,{class:"q-mb-md"},{default:l(()=>[a(L,{class:u(["q-py-lg job-card",e.$q.screen.gt.sm?"q-pl-none":""]),onClick:r[0]||(r[0]=b=>e.showMore=!e.showMore)},{default:l(()=>[t("div",Ne,[t("div",{hidden:e.$q.screen.lt.md,class:"col-1 text-center"},[a(G,{size:"md",name:e.job.icon!==""?e.job.icon:"fa-solid fa-helmet-safety",color:"primary"},null,8,["name"])],8,Oe),t("div",Ae,[t("div",null,[t("div",null,[t("span",{class:u(["text-dark",e.$q.screen.gt.sm?"text-h6":"text-body2"])},d(e.job[43])+" "+d(e.job[12]),3),e.job.recommended&&!e.job.applied?(o(),f(ie,{key:0,class:u(["q-ml-md",e.$q.screen.gt.sm?"q-pa-sm":"q-pa-xs"]),color:"positive"},{default:l(()=>[De]),_:1},8,["class"])):i("",!0),e.showDisa&&!e.job.applied?(o(),f(ie,{key:1,class:u(["q-ml-md",e.$q.screen.gt.sm?"q-pa-sm":"q-pa-xs"]),color:"info"},{default:l(()=>[Le]),_:1},8,["class"])):i("",!0),e.job.applied?(o(),h("span",{key:2,class:u(["text-primary q-pl-sm text-italic",(e.$q.screen.gt.sm,"text-caption")])}," Applied "+d(e.job.appliedOn),3)):i("",!0)]),t("div",{class:u(["text-secondary q-mt-sm",e.$q.screen.gt.sm?"text-body2":"text-caption"])},d(e.helpers.formatName(e.job[226]))+", "+d(e.helpers.formatName(e.job[227])),3)])]),t("div",{class:u(["col-12 col-md-4",e.$q.screen.gt.sm?"text-right":"q-pt-sm"])},[t("div",xe,d(e.job[1].fromNow()),1)],2)])]),_:1},8,["class"]),e.showMore?(o(),f(E,{key:0})):i("",!0),e.showMore?(o(),f(L,{key:1},{default:l(()=>[e.job.purpose!==""&&e.job.purpose!==void 0&&(e.job.summary===""||e.job.summary===void 0)?(o(),h("div",Je,d(e.job.purpose),1)):i("",!0),e.job.summary!==""&&e.job.summary!==void 0?(o(),h("div",ze,d(e.job.summary),1)):i("",!0)]),_:1})):i("",!0),e.showMore?(o(),f(E,{key:2})):i("",!0),e.showMore?(o(),f(L,{key:3},{default:l(()=>[t("div",Ie,[t("div",Ee,[e.job.applied?i("",!0):(o(),f(x,{key:0,color:"info",label:"Apply for this Job",onClick:e.apply},null,8,["onClick"])),e.job.applied?(o(),h("div",{key:1,class:u(["text-primary",e.$q.screen.gt.sm?"text-body2":"text-caption"])}," Application Submitted on "+d(e.job),3)):i("",!0)])])]),_:1})):i("",!0)]),_:1}),a(je,{modelValue:e.openApply,"onUpdate:modelValue":r[1]||(r[1]=b=>e.openApply=b),persistent:"","full-width":e.$q.screen.lt.md},{default:l(()=>[a(Z,{class:u(["scroll",e.$q.screen.gt.sm?"":"full-width"]),style:we(e.$q.screen.gt.sm?"min-width: 800px;":"")},{default:l(()=>[a(L,{class:"bg-primary text-white"},{default:l(()=>[t("div",Te,[t("div",Re,[t("div",{class:u([e.$q.screen.gt.sm?"text-h6":"text-body1"])},"Apply For This Job",2)]),t("div",Ue,[ne(a(x,{icon:"close",flat:"",round:"",dense:""},null,512),[[re]])])])]),_:1}),a(E),a(L,null,{default:l(()=>[e.submitting?(o(),h("div",We,[t("div",He,[a(me,{color:"primary",size:"5em"})])])):i("",!0),e.submitting?i("",!0):(o(),h("div",Ke,[t("div",Xe,[t("div",Ge,[t("div",{class:u(["text-primary",e.$q.screen.gt.sm?"text-body2":"text-caption"])},"Job Title",2),t("div",{class:u(["q-pl-sm",e.$q.screen.gt.sm?"text-body2":"text-caption"])},d(e.job[43])+" "+d(e.job[12]),3)]),t("div",Ye,[t("div",{class:u(["text-primary",e.$q.screen.gt.sm?"text-body2":"text-caption"])},"Date Posted",2),t("div",{class:u(["q-pl-sm",e.$q.screen.gt.sm?"text-body2":"text-caption"])},d(e.job[1].format("L")),3)]),t("div",{class:u(["col-5 col-md-3",e.$q.screen.lt.md?"q-pt-sm":""])},[t("div",{class:u(["text-primary",e.$q.screen.gt.sm?"text-body2":"text-caption"])},"Location",2),t("div",{class:u(["q-pl-sm",e.$q.screen.gt.sm?"text-body2":"text-caption"])},d(e.helpers.formatName(e.job[226]))+", "+d(e.helpers.formatName(e.job[227])),3)],2),t("div",{class:u(["col-5 col-md-3",e.$q.screen.lt.md?"q-pt-sm":""])},[t("div",{class:u(["text-primary",e.$q.screen.gt.sm?"text-body2":"text-caption"])},"Hiring Center",2),t("div",{class:u(["q-pl-sm",e.$q.screen.gt.sm?"text-body2":"text-caption"])},d(e.job[104]),3)],2)]),t("div",Ze,[t("div",et,[e.job.purpose!==""&&e.job.purpose!==void 0?(o(),h("div",{key:0,class:u(["text-dark q-mb-sm",e.$q.screen.gt.sm?"text-body2":"text-caption"])},d(e.job.purpose),3)):i("",!0),e.employeeData.complete?(o(),h("div",tt,"Your application is ready! Click Submit to apply for this job.")):(o(),h("div",lt,"We need a little more information! Click continue to apply for this job."))])])]))]),_:1}),e.submitting?i("",!0):(o(),f(E,{key:0})),e.submitting?i("",!0):(o(),f(L,{key:1,class:u(e.$q.screen.gt.sm?"text-right":"text-center")},{default:l(()=>[ne(a(x,{class:"q-mr-sm",color:"secondary",label:"Cancel"},null,512),[[re]]),e.employeeData.complete&&e.voluntaryFormsComplete?(o(),f(x,{key:0,color:"info",label:"Submit",onClick:e.submitApp},null,8,["onClick"])):i("",!0),!e.employeeData.complete||!e.voluntaryFormsComplete?(o(),f(x,{key:1,color:"info",label:"Continue",onClick:e.goToProfile},null,8,["onClick"])):i("",!0)]),_:1},8,["class"]))]),_:1},8,["class","style"])]),_:1},8,["modelValue","full-width"])])}var ot=ce(Qe,[["render",at]]);const st=de({components:{Job:ot},setup(){const e=fe(),r=w(!1),B=w(""),g=w(null),q=w(null),p=w(null),b=w(10),s=w(1);async function _(){r.value=!0,await e.getRequestJobs(),r.value=!1}(e.jobsForBoard&&e.jobsForBoard.length===0||!e.timeRequested||e.timeRequested.isBefore(Ve().subtract(15,"minute")))&&_();const $=v(()=>{let n=[];return e.jobsForBoard.forEach(c=>{`${c[12]} ${c[43]} ${c[226]} ${c[227]} ${c[54]}`.toLowerCase().includes(B.value.toLowerCase())&&n.push(c)}),n=g.value?n.filter(c=>c[69]===g.value.value):n,n=q.value?n.filter(c=>c[227]===q.value.value):n,n=p.value?n.filter(c=>c[56]===p.value.value):n,n.sort((c,F)=>c.recommended===F.recommended?c[1].$d>F[1].$d?-1:1:c.recommended?-1:1),n}),J=v(()=>[...new Map($.value.map(n=>[n[69],{label:n[43],value:n[69]}])).values()]),V=v(()=>[...new Map($.value.map(n=>[n[227],{label:n[227],value:n[227]}])).values()]),N=v(()=>[...new Map($.value.map(n=>[n[56],{label:n[104],value:n[56]}])).values()]),O=v(()=>{const n=$.value.length>b.value,c=(s.value-1)*b.value,F=s.value*b.value-1;return n?$.value.filter((T,y)=>y>=c&&y<=F):$.value}),Q=v(()=>Math.round($.value.length/b.value));return{filteredJobs:$,loading:r,search:B,craftFilter:g,stateFilter:q,hiringCenterFilter:p,craftOptions:J,stateOptions:V,hiringCenterOptions:N,paginatedJobs:O,page:s,pages:Q}}}),nt={key:0,class:"q-px-md q-py-lg"},it=t("div",{class:"text-h4 text-primary"},"Job Board",-1),rt={class:"row items-center justify-between"},ut={class:"col-12 col-md-6"},dt=j("Craft"),ct=j("State"),mt=j("Hiring Center"),ft={class:"q-pa-md"},bt={class:"q-mt-md"},yt={class:"row justify-between q-mb-md"},vt={class:"col-5"},ht={class:"text-body2 text-dark"},gt=j("Found "),pt={class:"text-primary"},kt=j(" jobs!"),$t={key:0,class:"q-pa-lg flex flex-center"},wt={key:1,class:"absolute-center"};function jt(e,r,B,g,q,p){const b=qe("job");return o(),f(Ce,{class:"window-height full-width"},{default:l(()=>[e.loading?i("",!0):(o(),h("div",nt,[it,a(Z,{class:"q-my-md"},{default:l(()=>[a(L,null,{default:l(()=>[t("div",rt,[t("div",ut,[a(ue,{modelValue:e.search,"onUpdate:modelValue":r[0]||(r[0]=s=>e.search=s),label:"Search"},null,8,["modelValue"])]),t("div",{class:u(["col-12 col-md-5",e.$q.screen.gt.sm?"":"q-pt-md"])},[a(x,{color:"dark",label:"Filter","icon-right":"filter_list"},{default:l(()=>[a(X,null,{default:l(()=>[a(K,{style:{"min-width":"200px"}},{default:l(()=>[e.craftOptions.length>1?(o(),f(I,{key:0,clickable:""},{default:l(()=>[a(P,null,{default:l(()=>[dt]),_:1}),a(P,{side:""},{default:l(()=>[a(G,{name:"keyboard_arrow_right"})]),_:1}),a(X,{anchor:"top right",self:"top right","auto-close":""},{default:l(()=>[a(K,{style:{"min-width":"100px"}},{default:l(()=>[(o(!0),h(W,null,H(e.craftOptions,s=>(o(),f(I,{key:s,clickable:"",onClick:_=>e.craftFilter?e.craftFilter=null:e.craftFilter=s},{default:l(()=>[a(P,null,{default:l(()=>[j(d(s.label),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})):i("",!0),e.stateOptions.length>1?(o(),f(I,{key:1,clickable:""},{default:l(()=>[a(P,null,{default:l(()=>[ct]),_:1}),a(P,{side:""},{default:l(()=>[a(G,{name:"keyboard_arrow_right"})]),_:1}),a(X,{anchor:"top right",self:"top right","auto-close":""},{default:l(()=>[a(K,{style:{"min-width":"100px"}},{default:l(()=>[(o(!0),h(W,null,H(e.stateOptions,s=>(o(),f(I,{key:s,clickable:"",onClick:_=>e.stateFilter?e.stateFilter=null:e.stateFilter=s},{default:l(()=>[a(P,null,{default:l(()=>[j(d(s.label),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})):i("",!0),e.hiringCenterOptions.length>1?(o(),f(I,{key:2,clickable:""},{default:l(()=>[a(P,null,{default:l(()=>[mt]),_:1}),a(P,{side:""},{default:l(()=>[a(G,{name:"keyboard_arrow_right"})]),_:1}),a(X,{anchor:"top right",self:"top right","auto-close":""},{default:l(()=>[a(K,{style:{"min-width":"100px"}},{default:l(()=>[(o(!0),h(W,null,H(e.hiringCenterOptions,s=>(o(),f(I,{key:s,clickable:"",onClick:_=>e.hiringCenterFilter?e.hiringCenterFilter=null:e.hiringCenterFilter=s},{default:l(()=>[a(P,null,{default:l(()=>[j(d(s.label),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})):i("",!0)]),_:1})]),_:1})]),_:1}),t("div",ft,[e.craftFilter?(o(),f(Y,{key:0,clickable:"",onClick:r[1]||(r[1]=s=>e.craftFilter=null),color:"info","text-color":"white","icon-right":"close"},{default:l(()=>[j(d(e.craftFilter.label),1)]),_:1})):i("",!0),e.stateFilter?(o(),f(Y,{key:1,clickable:"",onClick:r[2]||(r[2]=s=>e.stateFilter=null),color:"info","text-color":"white","icon-right":"close"},{default:l(()=>[j(d(e.stateFilter.label),1)]),_:1})):i("",!0),e.hiringCenterFilter?(o(),f(Y,{key:2,clickable:"",onClick:r[3]||(r[3]=s=>e.hiringCenterFilter=null),color:"info","text-color":"white","icon-right":"close"},{default:l(()=>[j(d(e.hiringCenterFilter.label),1)]),_:1})):i("",!0)])],2)])]),_:1})]),_:1}),a(E),t("div",bt,[t("div",yt,[t("div",vt,[t("div",ht,[gt,t("span",pt,d(e.filteredJobs.length),1),kt])])]),(o(!0),h(W,null,H(e.paginatedJobs,s=>(o(),f(b,{key:s[3],job:s},null,8,["job"]))),128)),a(E),e.pages>1?(o(),h("div",$t,[a(Pe,{modelValue:e.page,"onUpdate:modelValue":r[4]||(r[4]=s=>e.page=s),max:e.pages,"max-pages":6,"direction-links":"","icon-prev":"fast_rewind","icon-next":"fast_forward"},null,8,["modelValue","max"])])):i("",!0)])])),e.loading?(o(),h("div",wt,[a(me,{color:"primary",size:"5em"})])):i("",!0)]),_:1})}var Jt=ce(st,[["render",jt]]);export{Jt as default};
