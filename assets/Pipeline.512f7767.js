import{Q as j}from"./QPage.c126ca69.js";import{k as C,c0 as y,c as b,_ as P,y as w,z as M,B as t,d as r,bg as n,a9 as i,c5 as N,bW as Q,D as T,c1 as $,b_ as k,c2 as B,aT as A,aR as I,aX as F,al as J}from"./index.c5857654.js";import{Q as O}from"./QTable.7dfd4626.js";import{u as z}from"./use-quasar.26549af0.js";import{m as q,b as D,f as g}from"./quickbase.f26af725.js";import{e as R}from"./export-file.deb9806e.js";import{dayjs as V}from"./dayjs.7ce58f73.js";import"./QList.81568d83.js";import"./QMarkupTable.568f4b60.js";import"./QSelect.e42ec547.js";import"./QMenu.e68b30ff.js";import"./position-engine.d0963084.js";import"./selection.42bd9854.js";import"./rtl.65b79c69.js";import"./use-fullscreen.db6ce076.js";import"./_commonjsHelpers.dfee5925.js";import"./localForage.5b390e6f.js";import"./index.7dbe61ef.js";import"./i18n.01fd58a1.js";import"./api.12f77c9a.js";const _=[{name:1,label:"Name",align:"left",field:e=>e.map.name,format:e=>`${e}`,sortable:!0},{name:7,label:"Status",align:"left",field:e=>e.map.status,format:e=>`${e}`,sortable:!0,sortOrder:"ad"},{name:2,label:"Offer Date",align:"left",field:e=>e.map.offerDate,format:e=>`${g.formatDate(e,"MM/DD/YYYY")}`,sortable:!0},{name:4,label:"Classification",align:"left",field:e=>e.map.fullJob,format:e=>`${!e||e===""?"Not Assigned":e}`,sortable:!0},{name:5,label:"Job #",align:"left",field:e=>e.map.jobNumber,format:e=>`${e===""||!e?"Not Assigned":e}`,sortable:!0},{name:6,label:"Arrival Date",align:"left",field:e=>e.map.start,format:e=>`${e?g.formatDate(e,"MM/DD/YYYY"):"TBD"}`,sortable:!0}],E=[{name:1,label:"Name",align:"left",field:e=>e.map.name,format:e=>`${e}`,sortable:!0},{name:7,label:"Status",align:"left",field:e=>e.map.status,format:e=>`${e}`,sortable:!0,sortOrder:"ad"},{name:2,label:"Offer Date",align:"left",field:e=>e.map.offerDate,format:e=>`${g.formatDate(e,"MM/DD/YYYY")}`,sortable:!0},{name:4,label:"Classification",align:"left",field:e=>e.map.fullJob,format:e=>`${!e||e===""?"Not Assigned":e}`,sortable:!0},{name:5,label:"Job #",align:"left",field:e=>e.map.jobNumber,format:e=>`${e===""||!e?"Not Assigned":e}`,sortable:!0},{name:6,label:"Arrival Date",align:"left",field:e=>e.map.start,format:e=>`${e?g.formatDate(e,"MM/DD/YYYY"):"TBD"}`,sortable:!0}],H=C({name:"Pipeline Table",components:{},setup(){const e=z(),m=q(),p=D(),{pipelineForProject:f}=y(m),o=f,{active:u}=y(D()),d=b(()=>o.value.filter(s=>s.map.status==="In Process")),x=b(()=>o.value.filter(s=>s.map.status==="Deployed")),Y=b(()=>o.value.filter(s=>s.status==="Arrived")),S=b(()=>e.screen.lt.md?100:o.value.length>=25?Math.round(o.value.length/5):10);function v(s,h,l){let a=h!==void 0?h(s,l):s;return a=a==null?"":String(a),a=a.split('"').join('""'),`"${a}"`}return{columns:_,mobileColumns:E,rows:o,initialPagination:{rowsPerPage:S},separator:"vertical",projectStore:p,pipelineForProject:f,inProcess:d,deployed:x,arrived:Y,active:u,exportPipeline(){const s=[_.map(l=>v(l.label))].concat(o.value.map(l=>_.map(a=>v(typeof a.field=="function"?a.field(l):l[a.field===void 0?a.name:a.field],a.format,l)).join(","))).join(`\r
`);R(`${V().format("MM.DD.YYYY")} ${u.value[20]} Project-Pipeline-Export.csv`,s,"text/csv")!==!0&&e.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}}}}),c=e=>(A("data-v-6cffc5e6"),e=e(),I(),e),L={class:"q-px-sm"},W={class:"row"},X={class:"col-12 col-md-10 q-px-xs"},G={class:"text-dark text-caption text-italic"},K={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"},U=c(()=>t("div",{class:"text-body1 text-primary"},"Summary",-1)),Z={class:"text-body2"},ee=c(()=>t("span",{class:"q-mr-md"},"In Process:",-1)),te={class:"text-body2"},ae=c(()=>t("span",{class:"q-mr-md"},"Deployed:",-1)),se={class:"text-body2"},oe=c(()=>t("span",{class:"q-mr-md"},"Arrived:",-1)),re={class:"text-body2"},le=c(()=>t("span",{class:"q-mr-md"},"Total:",-1));function ie(e,m,p,f,o,u){return w(),M("div",L,[t("div",W,[t("div",X,[r(O,{"title-class":e.$q.screen.gt.sm?"text-primary text-h6":"text-primary text-body1",title:e.$q.screen.lt.sm?"Pipeline":`Staffing Pipeline for ${e.active[20]}`,columns:e.$q.screen.lt.md?e.mobileColumns:e.columns,rows:e.rows,"row-key":"3",class:"q-pa-sm",pagination:e.initialPagination,separator:"vertical","table-header-class":"bg-dark text-white","no-data-label":`There is no one in the pipeline for ${e.active[20]}`,grid:e.$q.screen.lt.sm},{"top-right":n(()=>[t("div",G,"(Total: "+i(e.pipelineForProject.length)+" in pipeline)",1),r(N,{dense:e.$q.screen.lt.md,class:"q-ml-sm",color:"primary",label:"Download",onClick:e.exportPipeline,disable:e.pipelineForProject.length<1},null,8,["dense","onClick","disable"])]),"no-data":n(({message:d})=>[t("div",K,[r(Q,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),t("span",null,i(d),1)])]),_:1},8,["title-class","title","columns","rows","pagination","no-data-label","grid"])]),t("div",{class:T(e.$q.screen.lt.md?"col-12 q-px-xs q-mt-sm order-first":"col-2 q-px-xs")},[r(B,null,{default:n(()=>[r($,{class:"q-pb-xs"},{default:n(()=>[U]),_:1}),r($,{class:"text-right q-pt-xs"},{default:n(()=>[t("div",Z,[ee,t("span",null,i(e.inProcess.length),1)]),t("div",te,[ae,t("span",null,i(e.deployed.length),1)]),t("div",se,[oe,t("span",null,i(e.arrived.length),1)]),r(k,{color:"primary",class:"q-my-sm"}),t("div",re,[le,t("span",null,i(e.pipelineForProject.length),1)])]),_:1})]),_:1})],2)])])}var ne=P(H,[["render",ie],["__scopeId","data-v-6cffc5e6"]]);const me={name:"Pipeline",components:{pipelineTable:ne},setup(){const{getInProcesses:e,getDispatches:m,getDeployments:p}=q();return e(),m(),p(),{}}};function pe(e,m,p,f,o,u){const d=F("pipeline-table");return w(),J(j,{style:{"max-width":"100vw"}},{default:n(()=>[r(d)]),_:1})}var Me=P(me,[["render",pe]]);export{Me as default};
