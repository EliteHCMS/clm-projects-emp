import{k as ne,c1 as P,c as _,_ as re,z as d,am as V,bh as n,A as U,C as t,d as l,aa as a,D as Me,c6 as C,bE as ye,an as m,r as N,w as Ne,cx as D,b$ as ae,bX as De,aY as me,c2 as le,at as se,E as w,c3 as fe,aX as Ie,F as Oe,c4 as Qe,cl as Fe}from"./index.52c71ca6.js";import{Q as Ye}from"./QPage.6ad619dd.js";import{Q as qe,a as ke,b as je}from"./QStep.ecf73418.js";import{c as He,L as be,I as Be,M as Ve,H as Ce,G as ge,d as Le,J as Te}from"./quickbase.0d6b62e6.js";import{a as J}from"./QSelect.02464590.js";import{u as Se}from"./i18n.3d69f992.js";import{a as F,b as Ee,u as $,c as g}from"./array.8d580dc2.js";import{s as Je}from"./states.03e3d448.js";import{u as Ae}from"./use-quasar.8076b8cd.js";import{Q as Ue}from"./QTooltip.bdb0042e.js";import"./use-panel.7eae50bb.js";import"./touch.52aa58ff.js";import"./selection.445971ab.js";import"./QSlideTransition.c8ac1aff.js";import"./_commonjsHelpers.dfee5925.js";import"./dayjs.7e2f14dc.js";import"./localForage.83b50c47.js";import"./index.7dbe61ef.js";import"./api.14a19609.js";import"./QChip.bee081d7.js";import"./QMenu.b5435217.js";import"./position-engine.901fa583.js";import"./rtl.a367ced8.js";const We=ne({props:{title:String,step:Number,name:Number},setup(){const{checkedIn:e,onKiosk:s}=P(He()),q=be(),{hiringCenterAvailable:c}=P(Be()),{updateProfile:k}=q,{profile:y}=P(q),o=Ve(),{evergreenJobOptions:p}=P(o),{t:r}=Se(),R=_(()=>e.value?F({selection:F().required(`${r("pleaseSelectAJob")}`).nullable()}):!1),{meta:B,errors:W,handleSubmit:X,isSubmitting:Z}=Ee({validationSchema:R,initialValues:{selection:y.value[19].value?{value:y.value[19].value,label:y.value[19].label}:null}}),{value:L}=$("selection"),Q=X(E=>{const x={19:{value:E.selection.value,label:E.selection.label},40:{value:E.selection[13],label:E.selection[12]}};k({next:1,values:x})});return{checkedIn:e,onKiosk:s,selection:L,formMeta:B,formErrors:W,isSubmitting:Z,submitUpdate:Q,evergreenJobOptions:p,hiringCenterAvailable:c}}}),Xe={key:0},Ze={class:"text-caption"};function Ge(e,s,q,c,k,y){return d(),V(ke,{name:e.name,title:e.title,done:e.step>0},{default:n(()=>[e.checkedIn||e.onKiosk||!e.onKiosk&&e.hiringCenterAvailable?(d(),U("div",Xe,[t("form",{onSubmit:s[1]||(s[1]=ye((...o)=>e.submitUpdate&&e.submitUpdate(...o),["prevent"]))},[l(J,{autofocus:"",label:e.$t("selectAJob"),modelValue:e.selection,"onUpdate:modelValue":s[0]||(s[0]=o=>e.selection=o),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:e.evergreenJobOptions,style:Me(e.$q.screen.gt.md?"width: 50%":"width: 100%"),error:!!e.formErrors.selection,"bottom-slots":"",dense:""},{error:n(()=>[t("div",Ze,a(e.formErrors.selection),1)]),_:1},8,["label","modelValue","options","style","error"]),l(qe,{class:"text-right"},{default:n(()=>[l(C,{type:"submit",color:"info",label:e.$t("continue")},null,8,["label"])]),_:1})],32)])):m("",!0)]),_:1},8,["name","title","done"])}var Ke=re(We,[["render",Ge]]);const _e=["Alberta","British Columbia","Manitoba","New Brunswick","Newfoundland and Labrador","Northwest Territories","Nova Scotia","Nunavut","Ontario","Prince Edward Island","Quebec","Saskatchewan","Yukon Territory"],xe=ne({props:{title:String,step:Number,name:Number},components:{},setup(){const{employee:e}=P(Ce()),s=[{label:"Call",value:1},{label:"Text",value:2},{label:"Email",value:3},{label:"Call, Text, or Email",value:4},{label:"Do Not Contact Me",value:5}],q=[{label:"United States",value:"United States"},{label:"Canada",value:"Canada"}],c=N(!1),k=N(!1),y=N(null),o=N([]),p=N(""),r=N(null),R=be(),{onJobBoard:B}=P(R),W=F({first:g().required("First name is required!").matches(/^[aA-zZ\s]+$/,{excludeEmptyString:!0,message:"Only letters are allowed for this field!"}),middle:g().matches(/^[aA-zZ\s]+$/,{excludeEmptyString:!0,message:"Only letters are allowed for this field!"}).nullable().notRequired(),last:g().required("Last name is required!").matches(/^[aA-zZ\s]+$/,{excludeEmptyString:!0,message:"Only letters are allowed for this field!"}),suffix:g().nullable().notRequired(),street1:g().required(),street2:g().nullable().notRequired(),city:g().required(),state:g().required(),postal:g().required(),addressCountry:F().required("Country is required!").typeError("Country is a required field"),contact:F().nullable().notRequired()}),{meta:X,errors:Z,handleSubmit:L,isSubmitting:Q}=Ee({validationSchema:W,initialValues:{first:e.value[20]?e.value[20]:"",middle:e.value[21]?e.value[21]:"",last:e.value[22]?e.value[22]:"",suffix:e.value[23]?e.value[23]:"",contact:e.value[57]?{value:e.value[57],label:e.value[58]}:null,street1:e.value[41]?e.value[41]:"",street2:e.value[42]?e.value[42]:"",city:e.value[43]?e.value[43]:"",state:e.value[44]?e.value[44]:"",postal:e.value[45]?e.value[45]:"",addressCountry:e.value[46]?{value:e.value[46],label:e.value[46]}:null}}),{value:E,meta:x}=$("first"),{value:G,meta:ie}=$("middle"),{value:ee,meta:de}=$("last"),{value:I}=$("suffix"),{value:ue}=$("contact"),{value:O}=$("street1"),{value:z}=$("street2"),{value:A}=$("city"),{value:u}=$("state"),{value:h}=$("postal"),{value:v}=$("addressCountry"),K=_(()=>{const i=`${E.value} ${ee.value} ${I.value}`;return ge.formatName(i)}),te=_(()=>`${O.value}${z.value===""?"":` ${z.value}`}, ${A.value}, ${u.value}, ${h.value}, ${v.value.value}`);function T(){const i={next:2};R.updateProfile(i)}function pe(){c.value=!0}const oe=L(async i=>{const j={23:i.first,24:i.middle,25:i.last,26:i.suffix,27:e.value[27],28:e.value[26],46:i.contact,32:i.street1,33:i.street2,34:i.city,35:i.state,36:i.postal,37:i.addressCountry.value},H={next:2,values:j};c.value=!1;const ce=await R.updateProfile(H);console.log(ce)});function $e(){const i={next:0};R.updateProfile(i)}const Y=i=>{y.value=i};Ne(p,i=>{i&&i!==""&&i.length>3?he(i):o.value=[]});const he=async i=>{await fetch(`https://a.tiles.mapbox.com/geocoding/v5/mapbox.places/${i}.json?access_token=pk.eyJ1IjoicXVpY2tiYXNlb3BzIiwiYSI6ImNqNnpueGpzaDAzMmEyeG15bjQ4NXBldWYifQ.WyIwRcqCXdj-zo62Ro_UnQ`,{credentials:"omit",headers:{Accept:"*/*","Accept-Language":"en-US,en;q=0.5","Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"cors","Sec-Fetch-Site":"cross-site"},referrer:"https://elitehcms.quickbase.com/",method:"GET",mode:"cors"}).then(j=>j.json()).then(j=>{o.value=j.features})};return{submitUpdate:oe,isSubmitting:Q,save:T,back:$e,updateCountry:Y,first:E,middle:G,last:ee,suffix:I,contact:ue,street1:O,street2:z,city:A,state:u,postal:h,addressCountry:v,hasPersonalInfo:k,showEdit:c,firstMeta:x,middleMeta:ie,lastMeta:de,formMeta:X,formErrors:Z,options:s,countries:q,fullName:K,fullAddress:te,employee:e,showEditFunction:pe,onJobBoard:B,states:Je,provinces:_e,fetchPlaces:he,addressOptions:o,addressSearch:p,filterFn:(i,j,H)=>{j(()=>{p.value=i.toLowerCase()},ce=>{i!==""&&ce.options.length>0&&(ce.setOptionIndex(-1),ce.moveOptionSelection(1,!0))})},setAddress:i=>{if(i){O.value=`${i.address} ${i.text}`,z.value="",A.value=i.context.find(H=>H.id.startsWith("place.")).text,h.value=i.context.find(H=>H.id.startsWith("postcode.")).text,u.value=i.context.find(H=>H.id.startsWith("region.")).text;const j=i.context.find(H=>H.id.startsWith("country.")).text;v.value={label:j,value:j},p.value=null,r.value.focus()}},streetRef:r}}}),et={class:"row justify-between"},tt={class:"col-12 col-md-5"},ot={class:"text-caption"},lt={class:"text-caption"},st={class:"text-caption"},at={class:"text-caption"},nt={class:"text-caption"},rt={class:"col-12 col-md-6"},it={class:"row"},dt={class:"text-caption"},ut={class:"text-caption"};function ct(e,s,q,c,k,y){return d(),U("form",{onSubmit:s[13]||(s[13]=ye((...o)=>e.submitUpdate&&e.submitUpdate(...o),["prevent"]))},[t("div",et,[t("div",tt,[l(D,{dense:"",modelValue:e.first,"onUpdate:modelValue":s[0]||(s[0]=o=>e.first=o),label:`${e.$t("firstName")} *`,error:!!e.formErrors.first,"bottom-slots":""},{error:n(()=>[t("div",ot,a(e.formErrors.first),1)]),_:1},8,["modelValue","label","error"]),l(D,{dense:"",modelValue:e.middle,"onUpdate:modelValue":s[1]||(s[1]=o=>e.middle=o),label:e.$t("middleName"),error:!!e.formErrors.middle,"bottom-slots":""},{error:n(()=>[t("div",lt,a(e.formErrors.middle),1)]),_:1},8,["modelValue","label","error"]),l(D,{dense:"",modelValue:e.last,"onUpdate:modelValue":s[2]||(s[2]=o=>e.last=o),label:`${e.$t("lastName")} *`,error:!!e.formErrors.last,"bottom-slots":""},{error:n(()=>[t("div",st,a(e.formErrors.last),1)]),_:1},8,["modelValue","label","error"]),l(D,{dense:"",modelValue:e.suffix,"onUpdate:modelValue":s[3]||(s[3]=o=>e.suffix=o),label:e.$t("suffix"),error:!!e.formErrors.suffix,"bottom-slots":""},{error:n(()=>[t("div",at,a(e.formErrors.suffix),1)]),_:1},8,["modelValue","label","error"]),l(J,{dense:"",modelValue:e.contact,"onUpdate:modelValue":s[4]||(s[4]=o=>e.contact=o),label:e.$t("preferredContactMethod"),options:e.options,error:!!e.formErrors.contact,"bottom-slots":""},{error:n(()=>[t("div",nt,a(e.formErrors.contact),1)]),_:1},8,["modelValue","label","options","error"])]),e.$q.screen.gt.sm?(d(),V(ae,{key:0,vertical:""})):m("",!0),t("div",rt,[l(J,{dense:"",modelValue:e.addressSearch,"onUpdate:modelValue":[s[5]||(s[5]=o=>e.addressSearch=o),e.setAddress],"use-input":"","hide-selected":"","fill-input":"","input-debounce":"300",label:`${e.$t("searchAddress")}`,options:e.addressOptions,onFilter:e.filterFn,"option-label":"place_name","option-value":"id","bottom-slots":"","hide-dropdown-icon":""},{append:n(()=>[l(De,{name:"search"})]),_:1},8,["modelValue","label","options","onFilter","onUpdate:modelValue"]),l(D,{ref:"streetRef",dense:"",modelValue:e.street1,"onUpdate:modelValue":s[6]||(s[6]=o=>e.street1=o),label:`${e.$t("streetAddress1")} *`,error:!!e.formErrors.street1,"bottom-slots":""},null,8,["modelValue","label","error"]),l(D,{dense:"",modelValue:e.street2,"onUpdate:modelValue":s[7]||(s[7]=o=>e.street2=o),label:e.$t("streetAddress2"),error:!!e.formErrors.street2,"bottom-slots":""},null,8,["modelValue","label","error"]),l(D,{dense:"",modelValue:e.city,"onUpdate:modelValue":s[8]||(s[8]=o=>e.city=o),label:`${e.$t("city")} *`,error:!!e.formErrors.city,"bottom-slots":""},null,8,["modelValue","label","error"]),t("div",it,[l(J,{class:"col-12 col-md-8",dense:"",modelValue:e.state,"onUpdate:modelValue":s[9]||(s[9]=o=>e.state=o),label:`${e.$t("stateRegion")} *`,options:e.addressCountry?e.addressCountry.value==="United States"?e.states:e.provinces:e.states,error:!!e.formErrors.state,"bottom-slots":""},{error:n(()=>[t("div",dt,a(e.formErrors.state),1)]),_:1},8,["modelValue","label","options","error"]),l(D,{class:"col-12 col-md-4",dense:"",modelValue:e.postal,"onUpdate:modelValue":s[10]||(s[10]=o=>e.postal=o),label:`${e.$t("zipCode")} *`,error:!!e.formErrors.postal,"bottom-slots":""},null,8,["modelValue","label","error"])]),l(J,{dense:"",modelValue:e.addressCountry,"onUpdate:modelValue":s[11]||(s[11]=o=>e.addressCountry=o),label:`${e.$t("country")} *`,options:e.countries,error:!!e.formErrors.addressCountry,"bottom-slots":""},{error:n(()=>[t("div",ut,a(e.formErrors.addressCountry),1)]),_:1},8,["modelValue","label","options","error"])])]),l(qe,{class:"text-right"},{default:n(()=>[e.onJobBoard?m("",!0):(d(),V(C,{key:0,onClick:s[12]||(s[12]=o=>e.$emit("back")),color:"secondary",label:e.$t("back"),class:"q-mr-sm"},null,8,["label"])),l(C,{type:"submit",color:"info",label:e.$t("continue")},null,8,["label"])]),_:1})],32)}var mt=re(xe,[["render",ct]]);const pt=/^[0-9]{10}/g,vt=ne({props:{title:String,step:Number,name:Number},components:{editPersonalInfo:mt},setup(){const{employee:e}=P(Ce()),s=[{label:"Call",value:0},{label:"Text",value:1},{label:"Email",value:2}],q=[{label:"United States",value:"United States"},{label:"Canada",value:"Canada"}],c=N(!0),k=N(!1),y=N(null),o=be(),{onJobBoard:p,personalInfoNeeded:r}=P(o),R=F({first:g().required("First name is required!").matches(/^[aA-zZ\s]+$/,{excludeEmptyString:!0,message:"Only letters are allowed for this field!"}),middle:g().matches(/^[aA-zZ\s]+$/,{excludeEmptyString:!0,message:"Only letters are allowed for this field!"}).nullable().notRequired(),last:g().required("Last name is required!").matches(/^[aA-zZ\s]+$/,{excludeEmptyString:!0,message:"Only letters are allowed for this field!"}),suffix:g().nullable().notRequired(),email:g().required("Email is required!").email("You must provide a valid email!"),phone:g().matches(pt,{message:"Valid Phone Number Required!"}).required("Phone number is required!"),street1:g().required(),street2:g().nullable().notRequired(),city:g().required(),state:g().required(),postal:g().required(),addressCountry:F().required(),contact:F().nullable().notRequired()}),{meta:B,errors:W,handleSubmit:X,isSubmitting:Z}=Ee({validationSchema:R,initialValues:{first:e.value[20]?e.value[20]:"",middle:e.value[21]?e.value[21]:"",last:e.value[22]?e.value[22]:"",suffix:e.value[23]?e.value[23]:"",phone:e.value[27]?e.value[27]:"",email:e.value[26]?e.value[26]:"",contact:e.value[57]?{value:e.value[57],label:e.value[58]}:null,street1:e.value[41]?e.value[41]:"",street2:e.value[42]?e.value[42]:"",city:e.value[43]?e.value[43]:"",state:e.value[44]?e.value[44]:"",postal:e.value[45]?e.value[45]:"",addressCountry:e.value[46]?{value:e.value[46],label:e.value[46]}:null}}),{value:L,meta:Q}=$("first"),{value:E,meta:x}=$("middle"),{value:G,meta:ie}=$("last"),{value:ee}=$("suffix"),{value:de}=$("email"),{value:I}=$("phone"),{value:ue}=$("contact"),{value:O}=$("street1"),{value:z}=$("street2"),{value:A}=$("city"),{value:u}=$("state"),{value:h}=$("postal"),{value:v}=$("addressCountry"),K=_(()=>{const f=`${L.value} ${G.value} ${ee.value}`;return ge.formatName(f)}),te=_(()=>`${O.value}${z.value===""?"":` ${z.value}`}, ${A.value}, ${u.value}, ${h.value}, ${v.value.value}`),T=_(()=>{let f="";return I.value.length===11?f=I.value.substring(1):f=I.value,ge.formatPhone(f)});async function pe(){const f={23:e.value[20],24:e.value[21],25:e.value[22],26:e.value[23],27:e.value[27],28:e.value[26],46:e.value[57],32:e.value[41],33:e.value[42],34:e.value[43],35:e.value[44],36:e.value[45],37:e.value[46]},ve={next:2,values:f};o.updateProfile(ve)}function oe(){c.value=!0}const $e=X(f=>{const ve={23:f.first,24:f.middle,25:f.last,26:f.suffix,27:f.phone,28:f.email,46:f.contact,32:f.street1,33:f.street2,34:f.city,35:f.state,36:f.postal,37:f.addressCountry.name},i={next:2,values:ve};c.value=!1,o.updateProfile(i)});function Y(){c.value=!1;const f={next:0};o.updateProfile(f)}return{submitUpdate:$e,isSubmitting:Z,save:pe,back:Y,updateCountry:f=>{y.value=f},first:L,middle:E,last:G,suffix:ee,email:de,phone:I,contact:ue,street1:O,street2:z,city:A,state:u,postal:h,addressCountry:v,hasPersonalInfo:k,showEdit:c,firstMeta:Q,middleMeta:x,lastMeta:ie,formMeta:B,formErrors:W,options:s,countries:q,fullName:K,fullAddress:te,formatPhone:T,employee:e,showEditFunction:oe,onJobBoard:p,personalInfoNeeded:r}}}),ft={key:1},bt={class:"col-12 col-md-3 q-py-sm"},$t={class:"text-primary"},ht={class:"text-dark q-pl-sm"},yt={class:"col-12 col-md-6 q-py-sm"},qt={class:"text-primary"},gt={class:"text-dark q-pl-sm"},kt={class:"col-12 col-md-3 q-py-sm"},Vt={class:"text-primary"},Ct={class:"text-dark q-pl-sm"};function Et(e,s,q,c,k,y){const o=me("edit-personal-info");return d(),V(ke,{name:e.name,title:e.title,done:e.step>1},{default:n(()=>[e.showEdit||e.personalInfoNeeded?(d(),V(o,{key:0,onBack:e.back},null,8,["onBack"])):m("",!0),!e.showEdit&&!e.personalInfoNeeded?(d(),U("div",ft,[l(fe,null,{default:n(()=>[l(le,null,{default:n(()=>[t("div",{class:w(["text-dark",e.$q.screen.gt.sm?"text-h6":"text-body2"])},[se(a(e.$q.screen.gt.sm?`${e.$t("personalInfo")}`:`${e.$t("personal")}`)+" ",1),l(C,{class:"q-ml-sm",round:"",size:e.$q.screen.gt.sm?"sm":"xs",color:"accent",icon:"edit",onClick:e.showEditFunction},null,8,["size","onClick"])],2),t("div",{class:w(["row q-mt-sm",e.$q.screen.gt.sm?"text-body1":"text-caption"])},[t("div",bt,[t("div",$t,a(e.$t("name")),1),t("div",ht,a(e.employee[24]),1)]),t("div",yt,[t("div",qt,a(e.$t("address")),1),t("div",gt,a(e.employee[40]),1)]),t("div",kt,[t("div",Vt,a(e.$t("preferredContactMethod")),1),t("div",Ct,a(e.employee[58]),1)])],2)]),_:1})]),_:1}),l(qe,{class:"text-right"},{default:n(()=>[e.onJobBoard?m("",!0):(d(),V(C,{key:0,onClick:e.back,color:"secondary",label:e.$t("back"),class:"q-mr-sm"},null,8,["onClick","label"])),l(C,{onClick:e.save,color:"info",label:e.$t("continue")},null,8,["onClick","label"])]),_:1})])):m("",!0)]),_:1},8,["name","title","done"])}var wt=re(vt,[["render",Et]]);const St=/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/,Ut=ne({props:{title:String,step:Number,name:Number},setup(){const e=Ae(),s=be(),q=Ve(),c=Ce(),{t:k}=Se(),{relationshipOptions:y}=P(q),{savedEmergencyContacts:o}=P(c),{removeContact:p,addContact:r,updateContact:R,employeeData:B}=c,W=N({name:"first",value:null}),X=N({name:"last",value:null}),Z=N({name:"phone",value:null}),L=N({name:"relationship",value:null}),Q=N([]),E=_(()=>{const u=o.value.concat(Q.value);return u.sort(function(h,v){return h.editing&&!v.editing?-1:!h.editing&&v.editing?1:0}),u}),x=_(()=>E.value.filter(h=>h.editing).length>0);function G(){const u={next:3};s.updateProfile(u)}function ie(){const u={next:1};s.updateProfile(u)}function ee(){const u={3:E.value.length+1,6:"",7:"",8:"",11:"",12:"",16:"",editing:!0,new:!0,contact:null};Q.value.push(u),console.log(E.value)}function de(u){o.value[u].editing=!0}function I(u){const h=E.value[u];console.log(h),e.dialog({title:"Alert",message:`Are you sure you want to remove ${h[6]} ${h[7]}?`,cancel:!0,persistent:!0}).onOk(()=>{p(h[3])})}const ue=F({relationship:F().required("Relationship is required.").nullable(),phone:g().matches(St,{message:`${k("validPhoneIsRequired")}`}).length(10,{message:`${k("validPhoneIsRequired")}`}).required("Phone is required.").label(`${k("phoneNumber")}`),last:g().required().label(`${k("lastName")}`),first:g().required().label(`${k("firstName")}`)}).required();function O(u){const h=[W.value,X.value,Z.value,L.value];u?h.forEach(v=>{v.name===u.name?v.value=u.message:v.value=null}):h.forEach(v=>{v.value=null})}async function z(u,h){console.log(u);const v=E.value[h];try{await ue.validate({relationship:u.contact,phone:u[16],last:u[7],first:u[6]}),v[11]=u.contact.value,v[12]=u.contact.label,v.editing=!1,O(),v.new?(v.new=!1,r(v),Q.value.forEach((K,te)=>{K[3]===v[3]&&Q.value.splice(te,1)})):R(v)}catch({name:K,path:te,errors:T,inner:pe}){let oe="";T[0]instanceof Object?oe=T[0].message:oe=T[0],O({name:te,message:oe})}}function A(u){const h=E.value[u];console.log(h),h.new?Q.value.forEach((v,K)=>{v[3]===h[3]&&Q.value.splice(K,1)}):E.value[u].editing=!1}return{save:G,back:ie,savedEmergencyContacts:o,allContacts:E,editing:x,relationshipOptions:y,editItem:de,removeItem:I,saveItem:z,cancelEdit:A,addNewContactRow:ee,addContact:r,updateContact:R,firstError:W,lastError:X,phoneError:Z,relationshipError:L,helpers:ge,employeeData:B}}}),Nt={class:"col-12 col-md-4"},It={class:"text-primary"},Ot={class:"text-dark q-pl-sm"},At={class:"col-12 col-md-4"},Pt={class:"text-primary"},Rt={class:"text-dark q-pl-sm"},zt={key:0,class:"text-body2 text-dark"},Mt={class:"row q-py-sm"},Dt={class:"col-12 col-md-6 text-left"},Qt={key:0,class:"text-body2 text-primary text-italic q-pb-sm q-pl-md"},Ft=["id"],Yt={class:"col-12 col-md-4"},jt={class:"text-primary"},Ht={class:"text-dark q-pl-sm"},Bt={class:"text-primary"},Lt={class:"text-dark q-pl-sm"},Tt={class:"text-primary"},Jt={class:"text-dark q-pl-sm"},Wt={key:1,class:"items-center"},Xt=["onSubmit"],Zt={class:"row"},Gt={class:"col-12 col-md-3 q-pr-md"},Kt={class:"col-12 col-md-3 q-pr-md"},_t={class:"col-12 col-md-3 q-pr-md"},xt={class:"col-12 col-md-3"},eo={class:"row q-mt-md"},to={class:"col text-right"};function oo(e,s,q,c,k,y){return d(),V(ke,{name:e.name,title:e.title},{default:n(()=>[t("div",null,[l(fe,{class:"q-px-xs"},{default:n(()=>[l(le,null,{default:n(()=>[t("div",{class:w(["text-dark",e.$q.screen.gt.sm?"text-h6":"text-body2"])},[se(a(e.$q.screen.gt.sm?`${e.$t("personalContactInfo")}`:`${e.$t("personal")}`)+" ",1),l(C,{class:"q-ml-sm",round:"",size:e.$q.screen.gt.sm?"sm":"xs",color:"accent",icon:"edit"},null,8,["size"])],2),t("div",{class:w(["row q-mt-sm",e.$q.screen.gt.sm?"text-body1":"text-caption"])},[t("div",Nt,[t("div",It,a(e.$t("phoneNumber")),1),t("div",Ot,a(e.employeeData[25]),1)]),t("div",At,[t("div",Pt,a(e.$t("email")),1),t("div",Rt,a(e.employeeData[26]),1)])],2)]),_:1}),e.$q.screen.gt.sm?m("",!0):(d(),V(ae,{key:0})),e.editing?m("",!0):(d(),V(le,{key:1,class:w(e.$q.screen.lt.md?"q-px-xs":"")},{default:n(()=>[e.$q.screen.gt.sm?m("",!0):(d(),U("div",zt,a(e.$t("emergencyContacts")),1)),t("div",Mt,[t("div",Dt,[l(C,{size:e.$q.screen.gt.sm?"md":"sm",color:"accent",label:(e.allContacts.length>0,e.$t("addEmergencyContact")),onClick:e.addNewContactRow,icon:"add"},null,8,["size","label","onClick"])])])]),_:1},8,["class"])),e.editing?(d(),V(ae,{key:2})):m("",!0),l(le,{class:w([e.editing?"q-pt-sm":"q-pt-none",e.$q.screen.gt.sm?"":"q-px-xs"])},{default:n(()=>[e.allContacts.length===0?(d(),U("div",Qt,a(e.$t("addEmergencyContactRequired")),1)):m("",!0),(d(!0),U(Oe,null,Ie(e.allContacts,(o,p)=>(d(),U("div",{id:o[3],key:o[3]},[l(fe,{class:"q-pa-sm",flat:""},{default:n(()=>[o.editing?m("",!0):(d(),U("div",{key:0,class:w(["row items-center",e.$q.screen.gt.sm?"text-body2":"text-caption"])},[t("div",Yt,[t("div",null,[t("div",jt,a(e.$t("name")),1),t("div",Ht,a(e.helpers.formatName(o[6]))+" "+a(e.helpers.formatName(o[7])),1)])]),t("div",{class:w(e.$q.screen.gt.sm?"col-3":"col-12 q-pt-sm")},[t("div",null,[t("div",Bt,a(e.$t("phoneNumber")),1),t("div",Lt,a(e.helpers.formatPhone(o[8])),1)])],2),t("div",{class:w(e.$q.screen.gt.sm?"col-3":"col-12 q-pt-sm")},[t("div",null,[t("div",Tt,a(e.$t("relationship")),1),t("div",Jt,a(o[12]),1)])],2),t("div",{class:w(e.$q.screen.gt.sm?"col-2 text-right":"col-12 q-pt-md text-right")},[t("div",null,[l(C,{size:"sm",round:"",onClick:r=>e.editItem(p),color:"secondary",icon:"edit",class:"q-mr-sm"},null,8,["onClick"]),l(C,{size:"sm",round:"",onClick:r=>e.removeItem(p),color:"primary",icon:"delete"},null,8,["onClick"])])],2)],2)),o.editing?(d(),U("div",Wt,[t("form",{onSubmit:ye(r=>e.saveItem(o,p),["prevent"])},[t("div",Zt,[t("div",Gt,[l(D,{modelValue:o[6],"onUpdate:modelValue":r=>o[6]=r,dense:"",label:e.$t("firstName"),error:!!e.firstError.value,"bottom-slots":""},{error:n(()=>[se(a(e.firstError.value),1)]),_:2},1032,["modelValue","onUpdate:modelValue","label","error"])]),t("div",Kt,[l(D,{modelValue:o[7],"onUpdate:modelValue":r=>o[7]=r,dense:"",label:e.$t("lastName"),error:!!e.lastError.value,"bottom-slots":""},{error:n(()=>[se(a(e.lastError.value),1)]),_:2},1032,["modelValue","onUpdate:modelValue","label","error"])]),t("div",_t,[l(D,{modelValue:o[16],"onUpdate:modelValue":r=>o[16]=r,dense:"",label:e.$t("phoneNumber"),error:!!e.phoneError.value,"bottom-slots":""},{error:n(()=>[se(a(e.phoneError.value),1)]),_:2},1032,["modelValue","onUpdate:modelValue","label","error"])]),t("div",xt,[l(J,{behavior:"menu",position:"top middle",modelValue:o.contact,"onUpdate:modelValue":r=>o.contact=r,dense:"",label:e.$t("relationship"),options:e.relationshipOptions,error:!!e.relationshipError.value,"bottom-slots":""},{error:n(()=>[se(a(e.relationshipError.value),1)]),_:2},1032,["modelValue","onUpdate:modelValue","label","options","error"])])]),t("div",eo,[t("div",to,[l(C,{onClick:r=>e.cancelEdit(p),color:"secondary",label:e.$t("cancel"),class:"q-mr-sm"},null,8,["onClick","label"]),l(C,{type:"submit",color:"info",label:e.$t("save")},null,8,["label"])])])],40,Xt)])):m("",!0)]),_:2},1024),p<e.allContacts.length-1?(d(),V(ae,{key:0})):m("",!0)],8,Ft))),128))]),_:1},8,["class"])]),_:1}),e.editing?m("",!0):(d(),V(qe,{key:0,class:"text-right"},{default:n(()=>[l(C,{onClick:e.back,color:"secondary",label:e.$t("back"),class:"q-mr-sm"},null,8,["onClick","label"]),l(C,{onClick:e.save,color:"info",label:e.$t("continue"),disabled:e.savedEmergencyContacts.length===0},null,8,["onClick","label","disabled"])]),_:1}))])]),_:1},8,["name","title"])}var lo=re(Ut,[["render",oo]]);const so=ne({props:{title:String,step:Number,name:Number},setup(){const{t:e}=Se(),s=Qe(),q=N(3),c=N(!1),k=Ae(),y=be(),o=Ve(),p=Le(),r=Ce(),{fetchVoluntaryForms:R}=o,{experienceOptions:B,companyOptions:W,craftOptions:X,employmentOptions:Z}=P(o),{hasAffirmative:L,hasVets:Q,hasDisability:E,goToVoluntary:x}=P(p),{savedHistory:G}=P(r),{addHistory:ie,updateHistory:ee,removeHistory:de,employeeData:I,updateEmployeeData:ue}=r,O=N([]),{toggleLoader:z,profile:A}=y,{proceedToTest:u}=P(y),h=F({craft:F().required(`${e("selectACraft")}`).nullable(),experience:F().required(`${e("selectExperience")}`).nullable(),employment:F().required(`${e("selectEmploymentStatus")}`).nullable()}),{meta:v,errors:K,handleSubmit:te}=Ee({validationSchema:h,initialValues:{craft:A[40]?{value:A[40].value,label:A[40].label}:null,experience:I[53]?{value:I[53],label:I[54]}:null,employment:I[55]?{value:I[55],label:I[56]}:null}}),{value:T}=$("craft"),{value:pe}=$("experience"),{value:oe}=$("employment");Ne(A,()=>{A[40].value!==T.value.value&&(T.value={value:A[40].value,label:A[40].label})});const $e=te(async b=>{const M={40:{value:b.craft.value,label:b.craft.label},42:{value:b.experience.value,label:b.experience.label},44:{value:b.employment.value,label:b.employment.label},39:{value:new Date}};if(x.value){const S={next:E.value?6:L.value?7:Q.value?8:0,values:M,completed:!0};z(!0),await R(),await y.updateProfile(S),await y.submitProfileToQB(),z(!1),s.push({name:"voluntary"})}else{const S={next:0,values:M,completed:!0};z(!0),await y.updateProfile(S),await y.submitProfileToQB(),u.value?(ue({fields:{122:{value:8}}}),s.replace({name:"assessment"})):(s.replace({name:"thanks"}),z(!1))}}),Y=_(()=>{const b=G.value.concat(O.value);return b.sort(function(M,S){return M.editing&&!S.editing?-1:!M.editing&&S.editing?1:0}),b}),he=_(()=>Y.value.filter(M=>M.editing).length>0);function f(){const b={3:Y.value.length+1,6:"",7:"",10:"",11:"",12:"",13:"",15:"",16:"",editing:!0,new:!0,company:null,craft:null};O.value.push(b)}function ve(){const b={next:4};y.updateProfile(b)}function i(){const b={next:2};y.updateProfile(b)}function j(b){G.value[b].editing=!0}function H(b){const M=Y.value[b];console.log(M),k.dialog({title:`${e("alert")}`,message:`${e("areYouSureYouWantToRemove")}`,cancel:!0,persistent:!0}).onOk(()=>{de(M[3])})}function ce(b,M){const S=Y.value[M];S[6]=b.company.value,S[7]=b.company.label,S[15]=b.craft.value,S[16]=b.craft.label,S.editing=!1,S.new?(S.new=!1,O.value.forEach((we,ze)=>{we[3]===S[3]&&O.value.splice(ze,1)}),ie(S)):ee(S)}function Pe(b){const M=Y.value[b];M.new?O.value.forEach((S,we)=>{S[3]===M[3]&&O.value.splice(we,1)}):Y.value[b].editing=!1}function Re(){c.value?(q.value=3,c.value=!1):(c.value=!0,q.value=Y.value.length)}return{save:ve,back:i,allHistory:Y,addNewRow:f,editItem:j,removeItem:H,saveItem:ce,cancelEdit:Pe,editing:he,date:Te,show:q,expanded:c,adjustRows:Re,formMeta:v,formErrors:K,submitUpdate:$e,craft:T,experience:pe,employment:oe,experienceOptions:B,companyOptions:W,craftOptions:X,employmentOptions:Z}}}),ao={class:"text-body2 text-dark"},no={class:"row"},ro={class:"col-12 col-md-4 q-px-xs"},io={class:"text-caption"},uo={class:"col-12 col-md-4 q-px-xs"},co={class:"text-caption"},mo={class:"col-12 col-md-4 q-px-xs"},po={class:"text-caption"},vo={class:"text-body2 text-dark"},fo={class:"row q-py-sm"},bo={class:"col-12 col-md-6"},$o={key:0,class:"text-body2 text-primary text-italic q-pb-sm q-pl-md"},ho=["id"],yo={class:"col-12 col-md-3"},qo={class:"text-primary"},go={class:"text-dark q-pl-sm"},ko={class:"text-primary"},Vo={class:"text-dark q-pl-sm"},Co={class:"text-primary"},Eo={class:"text-dark q-pl-sm"},wo={class:"text-primary"},So={class:"text-dark q-pl-sm"},Uo={class:"text-primary"},No={class:"text-dark q-pl-sm"},Io={key:1,class:"items-center"},Oo=["onSubmit"],Ao={class:"row"},Po={class:"col-12 col-md-2 q-pr-md"},Ro={class:"col-12 col-md-2 q-pr-md"},zo={class:"col-12 col-md-2 q-pr-md"},Mo={class:"col-12 col-md-2 q-pr-md"},Do={class:"col-12 col-md-2 q-pr-md"},Qo={class:"col-12 col-md-2 q-pr-md"},Fo={class:"row q-mt-md"},Yo={class:"col text-right"},jo={class:"row q-pt-md"},Ho={key:0,class:"col-12 text-right"};function Bo(e,s,q,c,k,y){return d(),V(ke,{name:e.name,title:e.title,done:e.step>3},{default:n(()=>[t("div",null,[t("form",{onSubmit:s[3]||(s[3]=ye((...o)=>e.submitUpdate&&e.submitUpdate(...o),["prevent"]))},[l(fe,{class:"q-px-xs"},{default:n(()=>[l(le,{class:"q-pb-none q-mb-sm"},{default:n(()=>[t("div",ao,a(e.$t("applyingFor"))+":",1),t("div",no,[t("div",ro,[l(J,{behavior:"menu",position:"top middle",disable:!0,dense:"",modelValue:e.craft,"onUpdate:modelValue":s[0]||(s[0]=o=>e.craft=o),label:e.$t("primaryCraft"),options:e.craftOptions,error:!!e.formErrors.craft,"bottom-slots":""},{error:n(()=>[t("div",io,a(e.formErrors.craft),1)]),_:1},8,["modelValue","label","options","error"])]),t("div",uo,[l(J,{behavior:"menu",position:"top middle",dense:"",modelValue:e.experience,"onUpdate:modelValue":s[1]||(s[1]=o=>e.experience=o),label:e.$t("yearsOfExperience"),options:e.experienceOptions,error:!!e.formErrors.experience,"bottom-slots":""},{error:n(()=>[t("div",co,a(e.formErrors.experience),1)]),_:1},8,["modelValue","label","options","error"])]),t("div",mo,[l(J,{behavior:"menu",position:"top middle",dense:"",modelValue:e.employment,"onUpdate:modelValue":s[2]||(s[2]=o=>e.employment=o),label:e.$t("currentEmploymentStatus"),options:e.employmentOptions,error:!!e.formErrors.employment,"bottom-slots":""},{error:n(()=>[t("div",po,a(e.formErrors.employment),1)]),_:1},8,["modelValue","label","options","error"])])])]),_:1}),l(ae),e.editing?m("",!0):(d(),V(le,{key:0,class:w(e.$q.screen.lt.md?"q-px-xs":"")},{default:n(()=>[t("div",vo,a(e.$t("workHistory"))+":",1),t("div",fo,[t("div",bo,[l(C,{size:e.$q.screen.gt.sm?"md":"sm",color:"accent",label:e.allHistory.length>0?`${e.$t("addMoreHistory")}`:`${e.$t("addEmploymentHistory")}`,onClick:e.addNewRow,icon:"add"},null,8,["size","label","onClick"])])])]),_:1},8,["class"])),e.editing?(d(),V(ae,{key:1})):m("",!0),l(le,{class:w([e.editing?"q-pt-sm":"q-pt-none",e.$q.screen.gt.sm?"":"q-px-xs"])},{default:n(()=>[e.allHistory.length===0?(d(),U("div",$o,a(e.$t("addYourEmploymentHistoryLater")),1)):m("",!0),(d(!0),U(Oe,null,Ie(e.allHistory,(o,p)=>(d(),U("div",{id:o[3],key:p},[e.expanded||p+1<=e.show?(d(),V(fe,{key:0,class:"q-px-sm q-pt-xs q-pb-sm",flat:""},{default:n(()=>[o.editing?m("",!0):(d(),U("div",{key:0,class:w(["row items-center",e.$q.screen.gt.sm?"text-body2":"text-caption"])},[t("div",yo,[t("div",null,[t("div",qo,a(e.$t("company")),1),t("div",go,a(o[7]),1)])]),t("div",{class:w(e.$q.screen.gt.sm?"col-2":"hidden")},[t("div",null,[t("div",ko,a(e.$t("location")),1),t("div",Vo,a(o[10]!==""?o[10]:"N/A"),1)])],2),t("div",{class:w(e.$q.screen.gt.sm?"col-2":"col-12 q-pt-md")},[t("div",null,[t("div",Co,a(e.$t("jobTitle")),1),t("div",Eo,a(o[16])+" "+a(o[11]),1)])],2),t("div",{class:w(e.$q.screen.gt.sm?"col-2":"col-6 q-pt-md")},[t("div",null,[t("div",wo,a(e.$t("startDate")),1),t("div",So,a(e.date.formatDate(o[12],"MM-DD-YYYY")),1)])],2),t("div",{class:w(e.$q.screen.gt.sm?"col-2":"col-6 q-pt-md")},[t("div",null,[t("div",Uo,a(e.$t("endDate")),1),t("div",No,a(e.date.formatDate(o[13],"MM-DD-YYYY")),1)])],2),t("div",{class:w(e.$q.screen.gt.sm?"col-1 text-right":"col-12 q-pt-md text-right")},[t("div",null,[l(C,{size:"sm",round:"",onClick:r=>e.editItem(p),color:"secondary",icon:"edit",class:"q-mr-sm"},null,8,["onClick"]),l(C,{size:"sm",round:"",onClick:r=>e.removeItem(p),color:"primary",icon:"delete"},null,8,["onClick"])])],2)],2)),o.editing?(d(),U("div",Io,[t("form",{onSubmit:ye(r=>e.saveItem(o,p),["prevent"])},[t("div",Ao,[t("div",Po,[l(J,{modelValue:o.company,"onUpdate:modelValue":r=>o.company=r,dense:"",label:e.$t("company"),options:e.companyOptions},null,8,["modelValue","onUpdate:modelValue","label","options"])]),t("div",Ro,[l(J,{modelValue:o.craft,"onUpdate:modelValue":r=>o.craft=r,dense:"",label:e.$t("craft"),options:e.craftOptions},null,8,["modelValue","onUpdate:modelValue","label","options"])]),t("div",zo,[l(D,{modelValue:o[11],"onUpdate:modelValue":r=>o[11]=r,dense:"",label:e.$t("jobTitle")},null,8,["modelValue","onUpdate:modelValue","label"])]),t("div",Mo,[l(D,{modelValue:o[10],"onUpdate:modelValue":r=>o[10]=r,dense:"",label:e.$t("location")},null,8,["modelValue","onUpdate:modelValue","label"])]),t("div",Do,[l(D,{type:"date",modelValue:o[12],"onUpdate:modelValue":r=>o[12]=r,dense:"",filled:"",hint:e.$t("startDate")},null,8,["modelValue","onUpdate:modelValue","hint"])]),t("div",Qo,[l(D,{type:"date",modelValue:o[13],"onUpdate:modelValue":r=>o[13]=r,dense:"",filled:"",hint:e.$t("endDate")},null,8,["modelValue","onUpdate:modelValue","hint"])])]),t("div",Fo,[t("div",Yo,[l(C,{onClick:r=>e.cancelEdit(p),color:"secondary",label:e.$t("cancel"),class:"q-mr-sm"},null,8,["onClick","label"]),l(C,{type:"submit",color:"info",label:e.$t("save")},null,8,["label"])])])],40,Oo)])):m("",!0)]),_:2},1024)):m("",!0),p<e.allHistory.length-1?(d(),V(ae,{key:1})):m("",!0)],8,ho))),128)),e.allHistory.length>e.show||e.expanded?(d(),V(ae,{key:1})):m("",!0),t("div",jo,[e.allHistory.length>e.show||e.expanded?(d(),U("div",Ho,[l(C,{round:"",color:"secondary",onClick:e.adjustRows,icon:e.expanded?"expand_less":"expand_more"},{default:n(()=>[e.expanded?(d(),V(Ue,{key:0,anchor:"top middle"},{default:n(()=>[se(a(e.$t("showLess")),1)]),_:1})):m("",!0),e.expanded?m("",!0):(d(),V(Ue,{key:1,anchor:"top middle"},{default:n(()=>[se(a(e.$t("showMore")),1)]),_:1}))]),_:1},8,["onClick","icon"])])):m("",!0)])]),_:1},8,["class"])]),_:1}),e.editing?m("",!0):(d(),V(qe,{key:0,class:"text-right"},{default:n(()=>[l(C,{onClick:e.back,color:"secondary",label:e.$t("back"),class:"q-mr-sm"},null,8,["onClick","label"]),l(C,{type:"submit",color:"info",label:e.$t("continue")},null,8,["label"])]),_:1}))],32)])]),_:1},8,["name","title","done"])}var Lo=re(so,[["render",Bo]]);const To=ne({components:{selectJob:Ke,personalInfo:wt,emergencyContact:lo,workHistory:Lo},setup(){const e=be(),{resetProfile:s}=e,{step:q}=P(e);s();const c=N(null);return{step:q,jobSelection:c,jobOptions:[{label:"Default Job",value:0}]}}});function Jo(e,s,q,c,k,y){const o=me("select-job"),p=me("personal-info"),r=me("emergency-contact"),R=me("work-history");return d(),U("div",null,[l(je,{modelValue:e.step,"onUpdate:modelValue":s[0]||(s[0]=B=>e.step=B),vertical:"",animated:"","done-color":"info","active-color":"dark","inactive-color":"secondary",class:w(e.$q.screen.lt.md?"q-px-none q-mx-none":"")},{default:n(()=>[l(o,{title:e.$t("selectAJob"),step:e.step,name:0,done:e.step>0},null,8,["title","step","done"]),l(p,{title:e.$t("personalInformation"),step:e.step,name:1,done:e.step>1},null,8,["title","step","done"]),l(r,{title:e.$t("contactInformation"),step:e.step,name:2,done:e.step>2},null,8,["title","step","done"]),l(R,{title:e.$t("employmentInformation"),step:e.step,name:3,done:e.step>3},null,8,["title","step","done"])]),_:1},8,["modelValue","class"])])}var Wo=re(To,[["render",Jo]]);const Xo=ne({components:{profileStepper:Wo},setup(){}});function Zo(e,s,q,c,k,y){const o=me("profile-stepper");return d(),U("div",null,[l(o)])}var Go=re(Xo,[["render",Zo]]);const Ko=ne({components:{Profile:Go},setup(){const e=N(0),s=Ve(),{fetchFormOptions:q}=s,{formOptionsLoadingState:c}=P(s);return q(),{step:e,formOptionsLoadingState:c}}}),_o={key:0,class:"absolute-center"},xo={key:1,class:"row"},el={class:"col-12 q-pt-sm"},tl={class:"q-pl-sm"},ol={class:"text-h6 text-dark"},ll={class:"text-body1 text-secondary text-italic"};function sl(e,s,q,c,k,y){const o=me("profile");return d(),V(Ye,{style:{"max-width":"100vw"}},{default:n(()=>[e.formOptionsLoadingState?(d(),U("div",_o,[l(Fe,{color:"primary",size:"5em"})])):m("",!0),e.formOptionsLoadingState?m("",!0):(d(),U("div",xo,[t("div",el,[l(fe,{flat:""},{default:n(()=>[l(le,{class:w(e.$q.screen.lt.md?"q-px-xs":"")},{default:n(()=>[t("div",tl,[t("div",ol,a(e.$t("completeApplication")),1),t("div",ll,a(e.$t("pleaseCompleteYourApplication")),1)])]),_:1},8,["class"]),l(le,null,{default:n(()=>[l(o)]),_:1})]),_:1})])]))]),_:1})}var Ul=re(Ko,[["render",sl]]);export{Ul as default};
