import{l as V,r as E,c as y,_ as L,B as d,as as h,bt as n,d as a,cW as v,E as e,ae as o,bU as R,bY as j,az as z,at as x,C as g,F as K,b6 as G,cV as I,w as te,bv as de,bT as ce,bR as H,bS as re,df as me,bV as ue,cY as pe,bQ as Ce,bW as Re,b7 as Q,z as Se}from"./index.cf7d0d08.js";import{Q as Ae}from"./QPage.205fb9c2.js";import{u as oe}from"./use-quasar.b8d84810.js";import{u as J}from"./useQuerySaver.d29ff9ee.js";import{u as U,q as B}from"./app.3beb99b9.js";import{dayjs as C}from"./dayjs.c84cb7a6.js";import{s as Ne,f as Ye,r as Te,t as O,a as Ee}from"./submitRelease.3ec4e601.js";import{a as le,b as Ie,u as Me}from"./checkTermStatus.17a70e0b.js";import{u as F}from"./dataStore.7ebfc18b.js";import{Q as _e}from"./QTooltip.f86f61e7.js";import{Q as ve}from"./QInnerLoading.2af21ee6.js";import{o as ye,d as he}from"./helpers.964353ae.js";import{a as ne}from"./syncEmployeeWithWorkday.89dbba74.js";import{d as X}from"./decode.3998c82c.js";import{Q as W}from"./QRating.cdec97fd.js";import{Q as Pe}from"./QFile.73dfb734.js";import{Q as fe}from"./QList.0865afef.js";import{Q as Le}from"./QImg.c197afa4.js";import{a as Qe}from"./QSelect.82477e9e.js";import{Q as je}from"./QForm.8349aee9.js";import{a as Ve,u as Be}from"./vee-validate.esm.10226477.js";import{a as ie}from"./array.164cfe36.js";import"./_commonjsHelpers.a26ce4be.js";import"./localForage.b61520e5.js";import"./index.04bc0a32.js";import"./i18n.36b2cf04.js";import"./dataStore.6e06cc70.js";import"./position-engine.e46721cf.js";import"./selection.91083131.js";import"./QChip.9b6ccfb5.js";import"./QMenu.fa307e11.js";import"./rtl.b51694b1.js";const ze=V({props:{employee:Object,assignment:Object,release:Object},setup(s){const{getUserType:c}=U(),{updateViewedReleases:_,getReleases:t}=F(),f=E(!0),b=E(!0),i=y(()=>t(s.release[3])),r=y(()=>i.value&&i.value.employee?i.value.employee:null),D=y(()=>i.value&&i.value.assignment?i.value.assignment:null),S=y(()=>{if(!r.value||!r.value.workday)return[];{const{personalData:u}=r.value.workday;if(u){const{customIds:Y}=u.identificationData?u.identificationData:{customIds:[]};return Y}else return[]}}),m=async()=>{if(r.value){const{sync:u}=await ne({clm:r.value});_({id:s.release[3],dataset:"employee",nested:!0,subset:"workday",data:u}),f.value=!1}else{const{data:u}=await B.fetchFromHiringApp({fields:[J({type:"employee",id:s.release[25]})]});if(u[207]===!1){const{sync:Y}=await ne({clm:u});await _({id:s.release[3],dataset:"employee",data:u}),_({id:s.release[3],dataset:"employee",nested:!0,subset:"workday",data:Y})}else await _({id:s.release[3],dataset:"employee",data:u});f.value=!1}if(D.value)b.value=!1;else{const{data:u}=await B.fetchFromHiringApp({fields:[J({type:"rawAssignments",id:s.release[28]})]});_({id:s.release[3],dataset:"assignment",data:u}),b.value=!1}},N=u=>{if(!!u)return u[145].$d?C(u[145].$d).format("MM/DD/YYYY"):null},$=({id:u,idType:Y})=>Y.includes("J&amp;E")?`${u.slice(1,4)} / ${u.slice(-5)}`:u;return m(),{dayjs:C,openWindow:ye,getUserType:c,employeeData:r,assignmentData:D,eeLoading:f,assignLoading:b,getArrivalDate:N,employeeCustomIds:S,decodeHTML:X,processCustomID:$}}}),Ue=e("div",{class:"text-primary text-h6 text-bold"},"Employee Information",-1),Fe={class:"row q-py-sm"},Oe={class:"col-12 col-sm-3"},We=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Name")],-1),He={class:"text-body2 q-pl-md"},Je={class:"col-12 col-sm-3"},Ke=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Last 4 Digits of SS#")],-1),Ge={class:"text-body2 q-pl-md"},Xe={class:"col-12 col-sm-3"},Ze=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Phone")],-1),es={class:"text-body2 q-pl-md"},ss={class:"row q-py-sm"},ts={class:"col-12 col-sm-3"},os={class:"text-body2"},as=e("span",{class:"text-bold q-mr-md"},"Workday Employee ID",-1),ls={class:"text-body2 q-pl-md"},ns={class:"text-body2"},is={class:"text-bold q-mr-md"},ds={class:"text-body2 q-pl-md"},cs={class:"row q-py-sm"},rs={class:"col-12 col-sm-3"},ms=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Arrival Date")],-1),us={class:"text-body2 q-pl-md"},ps={class:"col-12 col-sm-3"},_s=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Last Hire Date")],-1),vs={class:"text-body2 q-pl-md"},ys={class:"col-12 col-sm-3"},hs=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Last Day Worked")],-1),fs={class:"text-body2 q-pl-md"},bs={class:"col-12 col-sm-3"},$s=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Effective Date")],-1),qs={class:"text-body2 q-pl-md"},gs={class:"row q-py-sm"},ws={class:"col-12 col-sm-4"},Ds=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Job Site/ Location")],-1),ks={class:"text-body2 q-pl-md"},xs={class:"col-12 col-sm-4"},Cs=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Job Title")],-1),Rs={class:"text-body2 q-pl-md"},Ss={class:"col-12 col-sm-4"},As=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Pay Rate")],-1),Ns={class:"text-body2 q-pl-md"},Ys={key:0},Ts={key:1};function Es(s,c,_,t,f,b){return d(),h(I,null,{default:n(()=>[a(v,{class:"text-center q-py-sm"},{default:n(()=>[Ue]),_:1}),!s.eeLoading&&!s.assignLoading?(d(),h(v,{key:0,class:"q-py-none"},{default:n(()=>[e("div",Fe,[e("div",Oe,[We,e("div",He,[e("span",null,o(s.employeeData[22])+", "+o(s.employeeData[20]),1)])]),e("div",Je,[Ke,e("div",Ge,[e("span",null,o(s.employeeData[188].substring(s.employeeData[188].length-4)),1)])]),e("div",Xe,[Ze,e("div",es,[e("span",null,o(s.employeeData[25]),1)])])]),a(R),e("div",ss,[e("div",ts,[e("div",os,[as,s.getUserType==="QuickBase User"&&s.employeeData[378]?(d(),h(j,{key:0,dense:"",size:"sm",flat:"",icon:"open_in_new",color:"info",onClick:c[0]||(c[0]=i=>s.openWindow({url:s.employeeData[451]}))},{default:n(()=>[a(_e,null,{default:n(()=>[z("Open in Workday")]),_:1})]),_:1})):x("",!0)]),e("div",ls,[e("span",null,o(s.employeeData[378]),1)])]),(d(!0),g(K,null,G(s.employeeCustomIds,(i,r)=>(d(),g("div",{key:r,class:"col-12 col-sm-3"},[e("div",ns,[e("span",is,o(s.decodeHTML(i.idType)),1)]),e("div",ds,[e("span",null,o(s.processCustomID(i)),1)])]))),128))]),a(R),e("div",cs,[e("div",rs,[ms,e("div",us,[e("span",null,o(s.getArrivalDate(s.assignmentData)||"N/A"),1)])]),e("div",ps,[_s,e("div",vs,[e("span",null,o(s.dayjs(s.employeeData[397].$d).format("MM/DD/YYYY")),1)])]),e("div",ys,[hs,e("div",fs,[e("span",null,o(s.dayjs(s.release[123].$d).format("MM/DD/YYYY")),1)])]),e("div",bs,[$s,e("div",qs,[e("span",null,o(s.dayjs(s.release[36].$d).format("MM/DD/YYYY")),1)])])]),a(R),e("div",gs,[e("div",ws,[Ds,e("div",ks,[e("span",null,o(s.release[57]),1)])]),e("div",xs,[Cs,e("div",Rs,[e("span",null,o(s.assignmentData[20]),1)])]),e("div",Ss,[As,e("div",Ns,[s.$can("read","rates")?(d(),g("span",Ys,o(s.assignmentData[116]?`$ ${s.assignmentData[116].toFixed(2)}`:"N/A"),1)):(d(),g("span",Ts,"N/A"))])])])]),_:1})):(d(),h(v,{key:1,class:"q-my-lg"},{default:n(()=>[a(ve,{color:"primary",showing:""})]),_:1}))]),_:1})}var Is=L(ze,[["render",Es]]);const Ms=V({props:{data:Object},setup(s){return{evaluation:y(()=>s.data),convertScore:t=>({1:"Strongly Disagreed",2:"Disagreed",3:"Neutral",4:"Agreed",5:"Strongly Agreed",0:"Did Not Know"})[t]}}}),Ps=e("div",{class:"text-primary text-h6 text-bold"},"Employee Performance Evaluation",-1),Ls={class:"row q-py-sm"},Qs={class:"col-12 col-sm-6 col-md-3"},js=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Has good attendance")],-1),Vs={class:"text-body2 q-pl-md"},Bs={class:"q-mr-md"},zs={class:"col-12 col-sm-6 col-md-3"},Us=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Has a good attitude")],-1),Fs={class:"text-body2 q-pl-md"},Os={class:"q-mr-md"},Ws={class:"col-12 col-sm-6 col-md-3"},Hs=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Can do their job")],-1),Js={class:"text-body2 q-pl-md"},Ks={class:"q-mr-md"},Gs={class:"col-12 col-sm-6 col-md-3"},Xs=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Can be promoted in the future")],-1),Zs={class:"text-body2 q-pl-md"},et={class:"q-mr-md"};function st(s,c,_,t,f,b){return d(),h(I,null,{default:n(()=>[a(v,{class:"text-center q-py-sm"},{default:n(()=>[Ps]),_:1}),a(v,{class:"q-py-none"},{default:n(()=>[e("div",Ls,[e("div",Qs,[js,e("div",Vs,[e("span",Bs,o(s.convertScore(s.evaluation.attendance)),1),a(W,{modelValue:s.evaluation.attendance,"onUpdate:modelValue":c[0]||(c[0]=i=>s.evaluation.attendance=i),max:"5",size:"sm",color:"accent",icon:"star_border","icon-selected":"star","icon-half":"star_half","no-dimming":"",readonly:""},null,8,["modelValue"])])]),e("div",zs,[Us,e("div",Fs,[e("span",Os,o(s.convertScore(s.evaluation.attitude)),1),a(W,{modelValue:s.evaluation.attitude,"onUpdate:modelValue":c[1]||(c[1]=i=>s.evaluation.attitude=i),max:"5",size:"sm",color:"accent",icon:"star_border","icon-selected":"star","icon-half":"star_half","no-dimming":"",readonly:""},null,8,["modelValue"])])]),e("div",Ws,[Hs,e("div",Js,[e("span",Ks,o(s.convertScore(s.evaluation.capable)),1),a(W,{modelValue:s.evaluation.capable,"onUpdate:modelValue":c[2]||(c[2]=i=>s.evaluation.capable=i),max:"5",size:"sm",color:"accent",icon:"star_border","icon-selected":"star","icon-half":"star_half","no-dimming":"",readonly:""},null,8,["modelValue"])])]),e("div",Gs,[Xs,e("div",Zs,[e("span",et,o(s.convertScore(s.evaluation.promotion)),1),a(W,{modelValue:s.evaluation.promotion,"onUpdate:modelValue":c[3]||(c[3]=i=>s.evaluation.promotion=i),max:"5",size:"sm",color:"accent",icon:"star_border","icon-selected":"star","icon-half":"star_half","no-dimming":"",readonly:""},null,8,["modelValue"])])])])]),_:1})]),_:1})}var tt=L(Ms,[["render",st]]);const ot=V({props:{release:Object,employee:Object},setup(s){const c=oe(),{userData:_,getUserType:t}=U(),{getReleases:f,updateReleaseAttachments:b}=F(),i=E(s.release[70]),r=E(null),D=E(null),S=E([]),m=E(!1),N=y(()=>f(s.release[3])&&f(s.release[3]).employee?f(s.release[3]).employee:null),$=y(()=>N.value&&!s.release[72]&&C.duration(C(s.release[36].$d).diff(C(s.employee[397].$d))).asDays()<30?"Yes":"No"),u=()=>{D.value.$el.click()};te(r,w=>{w&&Y()});const Y=async()=>{const w=_;if(w.access&&delete w.access,w.permissions&&delete w.permissions,r.value)for await(const k of r.value){const M={6:{value:await A(k),filename:k.name},7:{value:k.name}};S.value.push(M),r.value=null}if(S.value.length>0)try{m.value=!0;const{docs:k}=await Ne({release:s.release,attachments:S.value,user:w}),M=k.map(P=>P[12]);await b({id:s.release[3],data:M}),i.value=[...i.value,...M],r.value=null,S.value=[],c.notify({type:"positive",message:`Successfully added ${k.length} attachment(s)!`}),m.value=!1}catch(k){console.log(k),m.value=!1,r.value=null,S.value=[],c.notify({type:"negative",message:"Error adding attachment!"})}},A=w=>new Promise((k,M)=>{const P=new FileReader;P.readAsDataURL(w),P.onload=()=>k(P.result.replace(/^data:.+;base64,/,"")),P.onerror=Z=>M(Z)});return{deductNeeded:$,downloadFile:he,decodeHTML:X,fileAttachment:r,fileInput:D,openFileInput:u,currentAttachments:i,savingAttachments:m}}}),at=e("div",{class:"text-primary text-h6 text-bold"},"Release Information",-1),lt={class:"row"},nt={class:"col-12 col-sm-9"},it={class:"row q-py-sm"},dt={class:"col-12 col-sm-6 col-md-6"},ct={class:"text-body2"},rt=e("span",{class:"text-bold q-mr-md"},"Return Company Equipment and/or PPE",-1),mt={class:"col-12 col-sm-6 col-md-6"},ut={class:"text-body2"},pt=e("span",{class:"text-bold q-mr-md"},"Payroll Deduction Needed",-1),_t={class:"row q-py-sm"},vt={class:"col-12"},yt={class:"text-body2"},ht=e("span",{class:"text-bold q-mr-md"},"Reason",-1),ft={class:"row q-py-sm"},bt={class:"col-12"},$t={class:"text-body2"},qt=e("span",{class:"text-bold q-mr-md"},"Recommendation for Rehire / Reassignment",-1),gt={class:"row q-py-sm"},wt={class:"col-12"},Dt=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Comments")],-1),kt={class:"text-body2 text-italic q-pl-md"},xt={class:"col-12 col-sm-3 q-pl-sm"},Ct={class:"text-body2 text-bold text-center q-mb-sm"},Rt={key:1,class:"text-body2 text-italic text-center"},St=e("span",null,"No Supporting Documents",-1),At=[St];function Nt(s,c,_,t,f,b){return d(),h(I,null,{default:n(()=>[a(v,{class:"text-center q-py-sm"},{default:n(()=>[at]),_:1}),a(v,{class:"q-py-none"},{default:n(()=>[e("div",lt,[e("div",nt,[e("div",it,[e("div",dt,[e("div",ct,[rt,e("span",null,o(s.release[72]?"Yes":"No"),1)])]),e("div",mt,[e("div",ut,[pt,e("span",null,o(s.deductNeeded),1)])])]),a(R),e("div",_t,[e("div",vt,[e("div",yt,[ht,e("span",null,o(s.release[31])+" - "+o(s.release[32]),1)])])]),a(R),e("div",ft,[e("div",bt,[e("div",$t,[qt,e("span",null,o(s.release[12]),1)])])]),a(R),e("div",gt,[e("div",wt,[Dt,e("div",kt,[e("span",null,o(s.release[60]===""?"No Comments":s.decodeHTML(s.release[60])),1)])])])]),e("div",xt,[e("div",Ct,[z("Supporting Documents "),s.$can("manage","releases")?(d(),h(j,{key:0,color:"accent",round:"",flat:"",class:"cursor-pointer",icon:"add",size:"md",onClick:s.openFileInput,disable:s.savingAttachments},null,8,["onClick","disable"])):x("",!0)]),a(ve,{showing:s.savingAttachments,color:"primary",label:"Saving...","label-class":"text-primary"},null,8,["showing"]),a(Pe,{ref:"fileInput",style:{display:"none"},dense:"","bottom-slots":"",modelValue:s.fileAttachment,"onUpdate:modelValue":c[0]||(c[0]=i=>s.fileAttachment=i),multiple:"",append:"",label:""},null,8,["modelValue"]),s.currentAttachments.length>0?(d(),h(fe,{key:0},{default:n(()=>[(d(!0),g(K,null,G(s.currentAttachments,(i,r)=>de((d(),h(ce,{key:r,clickable:"",class:"text-body2",onClick:D=>s.downloadFile({tableId:"bsstsai5d",recordId:i[3],fieldId:6,versionNumber:1,name:i[7]})},{default:n(()=>[a(H,null,{default:n(()=>[z(o(r+1)+". "+o(i[7]),1)]),_:2},1024),a(H,{avatar:""},{default:n(()=>[a(re,{color:"info",name:"file_download"})]),_:1})]),_:2},1032,["onClick"])),[[me]])),128))]),_:1})):(d(),g("div",Rt,At))])])]),_:1})]),_:1})}var Yt=L(ot,[["render",Nt]]);const Tt=V({props:{employee:Object,assignment:Object,release:Object},setup(s){const{getUserType:c}=U(),{updateViewedReleases:_,getReleases:t}=F(),f=E(!0),b=E(!0),i=y(()=>t(s.release[3])),r=y(()=>i.value&&i.value.employee?i.value.employee:null),D=y(()=>i.value&&i.value.assignment?i.value.assignment:null),S=y(()=>{if(!r.value||!r.value.workday)return[];{const{personalData:$}=r.value.workday;if($){const{customIds:u}=$.identificationData?$.identificationData:{customIds:[]};return u}else return[]}});return{dayjs:C,openWindow:ye,getUserType:c,employeeData:r,assignmentData:D,eeLoading:f,assignLoading:b,getArrivalDate:$=>$[145].$d?C($[145].$d).format("MM/DD/YYYY"):null,employeeCustomIds:S,processCustomID:({id:$,idType:u})=>u.includes("J&amp;E")?`${$.slice(1,4)} / ${$.slice(-5)}`:$,decodeHTML:X}}}),Et=e("div",{class:"text-body1 text-bold"},"Employee Information",-1),It={class:"row q-py-sm"},Mt={class:"col-3"},Pt=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Name")],-1),Lt={class:"text-caption q-pl-md"},Qt={class:"col-3"},jt=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Last 4 Digits of SS#")],-1),Vt={class:"text-caption q-pl-md"},Bt={class:"col-3"},zt=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Phone")],-1),Ut={class:"text-caption q-pl-md"},Ft={class:"row q-py-sm"},Ot={class:"col-3"},Wt={class:"text-caption"},Ht=e("span",{class:"text-bold q-mr-md"},"Workday Employee ID",-1),Jt={class:"text-caption q-pl-md"},Kt={class:"text-caption"},Gt={class:"text-bold q-mr-md"},Xt={class:"text-caption q-pl-md"},Zt={class:"row q-py-sm"},eo={class:"col-3"},so=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Arrival Date")],-1),to={class:"text-caption q-pl-md"},oo={class:"col-3"},ao=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Last Hire Date")],-1),lo={class:"text-caption q-pl-md"},no={class:"col-3"},io=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Last Day Worked")],-1),co={class:"text-caption q-pl-md"},ro={class:"col-3"},mo=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Effective Date")],-1),uo={class:"text-caption q-pl-md"},po={class:"row q-py-sm"},_o={class:"col-4"},vo=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Job Site/ Location")],-1),yo={class:"text-caption q-pl-md"},ho={class:"col-4"},fo=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Job Title")],-1),bo={class:"text-caption q-pl-md"},$o={class:"col-2"},qo=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Pay Rate")],-1),go={class:"text-caption q-pl-md"};function wo(s,c,_,t,f,b){return d(),h(I,{flat:""},{default:n(()=>[a(v,{class:"q-pa-none"},{default:n(()=>[a(Le,{src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo.svg",alt:"BrandSafway Logo",fit:"scale-down"})]),_:1}),a(v,{class:"q-py-sm"},{default:n(()=>[Et]),_:1}),a(v,{class:"q-py-none"},{default:n(()=>[e("div",It,[e("div",Mt,[Pt,e("div",Lt,[e("span",null,o(s.employeeData[22])+", "+o(s.employeeData[20]),1)])]),e("div",Qt,[jt,e("div",Vt,[e("span",null,o(s.employeeData[188].substring(s.employeeData[188].length-4)),1)])]),e("div",Bt,[zt,e("div",Ut,[e("span",null,o(s.employeeData[25]),1)])])]),a(R),e("div",Ft,[e("div",Ot,[e("div",Wt,[Ht,s.getUserType==="QuickBase User"?(d(),h(j,{key:0,dense:"",size:"sm",flat:"",icon:"open_in_new",color:"info",onClick:c[0]||(c[0]=i=>s.openWindow({url:s.employeeData[451]}))},{default:n(()=>[a(_e,null,{default:n(()=>[z("Open in Workday")]),_:1})]),_:1})):x("",!0)]),e("div",Jt,[e("span",null,o(s.employeeData[378]),1)])]),(d(!0),g(K,null,G(s.employeeCustomIds,(i,r)=>(d(),g("div",{key:r,class:"col-3"},[e("div",Kt,[e("span",Gt,o(s.decodeHTML(i.idType)),1)]),e("div",Xt,[e("span",null,o(s.processCustomID(i)),1)])]))),128))]),a(R),e("div",Zt,[e("div",eo,[so,e("div",to,[e("span",null,o(s.getArrivalDate(s.assignmentData)||"N/A"),1)])]),e("div",oo,[ao,e("div",lo,[e("span",null,o(s.dayjs(s.employeeData[397].$d).format("MM/DD/YYYY")),1)])]),e("div",no,[io,e("div",co,[e("span",null,o(s.dayjs(s.release[123].$d).format("MM/DD/YYYY")),1)])]),e("div",ro,[mo,e("div",uo,[e("span",null,o(s.dayjs(s.release[36].$d).format("MM/DD/YYYY")),1)])])]),a(R),e("div",po,[e("div",_o,[vo,e("div",yo,[e("span",null,o(s.release[57]),1)])]),e("div",ho,[fo,e("div",bo,[e("span",null,o(s.assignmentData[20]),1)])]),e("div",$o,[qo,e("div",go,[e("span",null,o(s.assignmentData[116]?`$ ${s.assignmentData[116].toFixed(2)}`:"N/A"),1)])])])]),_:1})]),_:1})}var Do=L(Tt,[["render",wo]]);const ko=V({props:{data:Object},setup(s){return{evaluation:y(()=>s.data),convertScore:t=>({1:"Strongly Disagreed",2:"Disagreed",3:"Neutral",4:"Agreed",5:"Strongly Agreed",0:"Did Not Know"})[t]}}}),xo=e("div",{class:"text-body1 text-bold"},"Employee Performance Evaluation",-1),Co={class:"row q-py-sm"},Ro={class:"col-3"},So=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Has good attendance")],-1),Ao={class:"text-caption q-pl-md"},No={class:"q-mr-md"},Yo={class:"col-3"},To=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Has a good attitude")],-1),Eo={class:"text-caption q-pl-md"},Io={class:"q-mr-md"},Mo={class:"col-3"},Po=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Can do their job")],-1),Lo={class:"text-caption q-pl-md"},Qo={class:"q-mr-md"},jo={class:"col-3"},Vo=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Can be promoted in the future")],-1),Bo={class:"text-caption q-pl-md"},zo={class:"q-mr-md"};function Uo(s,c,_,t,f,b){return d(),h(I,{flat:"",class:"q-my-none q-py-none"},{default:n(()=>[a(v,{class:"q-py-sm"},{default:n(()=>[xo]),_:1}),a(v,{class:"q-py-none"},{default:n(()=>[e("div",Co,[e("div",Ro,[So,e("div",Ao,[e("span",No,o(s.evaluation.attendance)+" / 5 - "+o(s.convertScore(s.evaluation.attendance)),1)])]),e("div",Yo,[To,e("div",Eo,[e("span",Io,o(s.evaluation.attitude)+" / 5 - "+o(s.convertScore(s.evaluation.attitude)),1)])]),e("div",Mo,[Po,e("div",Lo,[e("span",Qo,o(s.evaluation.capable)+" / 5 - "+o(s.convertScore(s.evaluation.capable)),1)])]),e("div",jo,[Vo,e("div",Bo,[e("span",zo,o(s.evaluation.promotion)+" / 5 - "+o(s.convertScore(s.evaluation.promotion)),1)])])])]),_:1})]),_:1})}var Fo=L(ko,[["render",Uo]]);const Oo=V({props:{release:Object,employee:Object},setup(s){const{getReleases:c}=F(),_=y(()=>c(s.release[3])&&c(s.release[3]).employee?c(s.release[3]).employee:null);return{deductNeeded:y(()=>_.value&&!s.release[72]&&C.duration(C(s.release[36].$d).diff(C(s.employee[397].$d))).asDays()<30?"Yes":"No"),downloadFile:he,decodeHTML:X}}}),Wo=e("div",{class:"text-body1 text-bold"},"Release Information",-1),Ho={class:"row"},Jo={class:"col-9"},Ko={class:"row q-py-sm"},Go={class:"col-6"},Xo={class:"text-caption"},Zo=e("span",{class:"text-bold q-mr-md"},"Return Company Equipment and/or PPE",-1),ea={class:"col-6"},sa={class:"text-caption"},ta=e("span",{class:"text-bold q-mr-md"},"Payroll Deduction Needed",-1),oa={class:"row q-py-sm"},aa={class:"col-12"},la={class:"text-caption"},na=e("span",{class:"text-bold q-mr-md"},"Reason",-1),ia={class:"row q-py-sm"},da={class:"col-12"},ca={class:"text-caption"},ra=e("span",{class:"text-bold q-mr-md"},"Recommendation for Rehire / Reassignment",-1),ma={class:"row q-py-sm"},ua={class:"col-12"},pa=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Comments")],-1),_a={class:"text-caption text-italic q-pl-md"},va={class:"col-3 q-pl-sm"},ya=e("div",{class:"text-caption text-bold text-center q-mb-sm"},"Supporting Documents",-1),ha={key:1,class:"text-caption text-italic text-center"},fa=e("span",null,"No Supporting Documents",-1),ba=[fa];function $a(s,c,_,t,f,b){return d(),h(I,{flat:""},{default:n(()=>[a(v,{class:"q-py-sm"},{default:n(()=>[Wo]),_:1}),a(v,{class:"q-py-none"},{default:n(()=>[e("div",Ho,[e("div",Jo,[e("div",Ko,[e("div",Go,[e("div",Xo,[Zo,e("span",null,o(s.release[72]?"Yes":"No"),1)])]),e("div",ea,[e("div",sa,[ta,e("span",null,o(s.deductNeeded),1)])])]),a(R),e("div",oa,[e("div",aa,[e("div",la,[na,e("span",null,o(s.release[32]),1)])])]),a(R),e("div",ia,[e("div",da,[e("div",ca,[ra,e("span",null,o(s.release[12]),1)])])]),a(R),e("div",ma,[e("div",ua,[pa,e("div",_a,[e("span",null,o(s.release[60]===""?"No Comments":s.decodeHTML(s.release[60])),1)])])])]),e("div",va,[ya,s.release[70].length>0?(d(),h(fe,{key:0},{default:n(()=>[(d(!0),g(K,null,G(s.release[70],(i,r)=>de((d(),h(ce,{key:r,clickable:"",class:"text-caption",onClick:D=>s.downloadFile({tableId:"bsstsai5d",recordId:i[3],fieldId:6,versionNumber:1,name:i[7]})},{default:n(()=>[a(H,null,{default:n(()=>[z(o(r+1)+". "+o(i[7]),1)]),_:2},1024),a(H,{avatar:""},{default:n(()=>[a(re,{color:"info",name:"file_download"})]),_:1})]),_:2},1032,["onClick"])),[[me]])),128))]),_:1})):(d(),g("div",ha,ba))])])]),_:1})]),_:1})}var qa=L(Oo,[["render",$a]]);const ga=V({emits:["releaseReviewed"],props:{release:Object},setup(s,{emit:c}){const _=oe(),t=ue(),{getUserType:f}=U(),b=E(!1),i=y(()=>(f==="Project User","How would you like to proceed with this employee?")),r=y(()=>f==="Project User"?[{label:"Rescind Release (Add Back to Roster)",value:"Rescind"}]:[{label:"Reassign this Employee",value:"Reassign"},{label:"Terminate this Employee",value:"Terminate"},{label:"Rescind Release (Add Back to Roster)",value:"Rescind"}]),D=ie({selection:ie().required("Required field if taking action on this release.").label("Disposition").nullable()}),{meta:S,errors:m,handleSubmit:N,handleReset:$}=Ve({validationSchema:D}),{value:u}=Be("selection");te(u,A=>{A?b.value=!0:b.value=!1});const Y=N(async A=>{_.dialog({title:"Confirm",message:`Are you sure you want to ${A.selection.value} this ${A.selection.value==="Rescind"?"release":"employee"}?`,cancel:!0,persistent:!0}).onOk(async()=>{try{if(_.loading.show(),A.selection.value==="Reassign"||A.selection.value==="Terminate"){const{release:w,employee:k}=await Ye({release:s.release,disp:A.selection});c("releaseReviewed",{release:w,employee:k}),window.postMessage("reloadDepartures"),$()}else if(A.selection.value==="Rescind"){const{release:w,employee:k}=await Te({release:s.release,disp:A.selection});c("releaseReviewed",{release:w,employee:k}),t.replace({name:"employees",query:{refresh:!0}}),$()}}catch(w){console.log(w),_.loading.hide(),_.notify({type:"negative",message:"Cannot update release."})}})});return{formErrors:m,formMeta:S,submit:Y,selection:u,options:r,question:i,visibleButton:b}}}),wa={class:"text-body2 text-weight-bold"},Da={class:"text-caption"};function ka(s,c,_,t,f,b){return d(),g("div",null,[a(je,{onSubmit:Ce(s.submit,["prevent"])},{default:n(()=>[a(I,null,{default:n(()=>[a(v,{class:"q-pb-xs"},{default:n(()=>[e("div",wa,o(s.question),1),a(Qe,{class:"q-mb-sm",dense:"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:s.selection,"onUpdate:modelValue":c[0]||(c[0]=i=>s.selection=i),options:s.options,"bottom-slots":"",clearable:"",error:!!s.formErrors.selection},{error:n(()=>[e("div",Da,o(s.formErrors.selection),1)]),_:1},8,["modelValue","options","error"])]),_:1}),s.visibleButton?(d(),h(pe,{key:0,class:"q-pt-xs",align:"right"},{default:n(()=>[a(j,{color:"primary",label:"Submit",type:"submit"})]),_:1})):x("",!0)]),_:1})]),_:1},8,["onSubmit"])])}var xa=L(ga,[["render",ka]]);const Ca={name:"View Release",directives:{},components:{EmployeeInformation:Is,Evaluation:tt,DepartureInformation:Yt,PrintDepartureInformation:qa,PrintEmployeeInformation:Do,PrintEvaluation:Fo,ReviewForm:xa},setup(){const s=E(!1),c=E(!1),_=oe(),t=Re();ue();const{capitalize:f}=Se,{getUserType:b,userData:i}=U(),{getReleases:r,setReleases:D,updateViewedReleases:S}=F(),m=y(()=>r(t.params.release)),N=y(()=>m.value&&m.value.employee?m.value.employee:null),$=y(()=>m.value&&m.value.assignment?m.value.assignment:null),u=y(()=>m.value[59]&&m.value[59][0]?m.value[59][0]:null),Y=y(()=>{const{data:l}=u.value?u.value:{data:null};return l}),A=y(()=>m.value?m.value[38]?m.value[38]:{37:"N/A",35:"N/A",6:"N/A"}:null),w=y(()=>u.value&&u.value[44]?u.value[44]:null),k=y(()=>m.value?m.value[75]:null),M=y(()=>m.value?m.value[76]:null),P=l=>l&&l[1]&&l[1].$d?C(l[1].$d).format("MM/DD/YYYY"):null,Z=async()=>{const l=await le({release:m.value});let p={referenceId:"N/A",logDescription:"N/A",logEffectiveMoment:"N/A",logEntryMoment:"N/A",eventType:"N/A",organizationReferenceID:"N/A",positionID:"N/A",employeeID:l[50],logType:"N/A"},q=m.value[36].$d;if(l.lastTerm&&(p=l.lastTerm),l.termEntryDate&&(q=l.termEntryDate.$d),(C(N.value[397]||null).isValid()?N.value[397].isSameOrAfter(m.value[36]):!0)&&(!l.terminated||!l.lastTerm)){const{data:se}=await O({release:l,entryMoment:q,workdayData:p});T({data:se,notify:!0})}else if(!l.terminated||!l.lastTerm)De({release:l,entryMoment:q,workdayData:p});else{const{data:se}=await O({release:l,entryMoment:q,workdayData:p});T({data:se,notify:!0})}},be=({release:l,employee:p})=>{if(l[43]==="Reassign"){const q=`https://elitehcms.quickbase.com/db/bs7qsu6wh?a=dbpage&pageID=6&ee=${p[3]}`;window.location.href=q}else T({data:l,notify:!0,employee:p})},$e=()=>{window.close()},qe=async()=>{if(!r(t.params.release)){_.loading.show();const{data:l}=await B.fetchFromHiringApp({fields:[J({type:"releases",query:"",id:t.params.release})]});D({id:l[3],data:l}),_.loading.hide(),b==="QuickBase User"&&ge({data:l})}},ge=async({data:l})=>{if(l[87]==="Active"&&l[95]&&l[42]!=="Complete"){const{reassigned:p,timestamp:q}=await Ie({release:l});p&&ke({release:l,timestamp:q})}else if(l[73]==="Processed"){if(l.workdayTerm)return;const{release:p}=await ee({release:l});T({data:p})}else if(l[79]!=="Complete"&&l[36].$d&&!C().isBefore(C(l[36].$d))){const{completed:p}=await we({release:l}),{release:q}=await ee({release:p});q.terminated?ae({release:q}):T({data:q})}else{const{release:p}=await ee({release:l});p.terminated?ae({release:p}):T({data:p})}},ee=async({release:l})=>{if(l[87]!=="Terminated")return l.terminated=!1,{release:l};{const p=await le({release:l});if(p.terminated&&p.lastTerm)if(p[73]==="Processed"){const{data:q}=await B.upsertRecordsXML({to:"bp3ga39ut",data:[{3:{value:p[3]},106:{value:JSON.stringify(p.lastTerm)}}],fieldsToReturn:[80],formatObject:80});return{release:q[0][80]}}else return{release:p};else return{release:p}}},we=async({release:l})=>{await Ee({id:l[28]});const{data:p}=await B.fetchFromHiringApp({fields:[J({type:"releases",query:"",id:l[3]})]});return{completed:p}},De=async l=>{const p=l.release;_.dialog({title:"Confirm",message:"Cannot find this termination workday. Would you still like to update this employee in CEM?",persistent:!0,ok:{label:"Yes",flat:!0},cancel:{flat:!0,label:"No"}}).onOk(async()=>{const{data:q}=await O(l);T({data:q,notify:!0})}).onCancel(()=>{T({data:p})})},ae=async({release:l})=>{_.dialog({title:"Confirm",message:"It looks like this termination has already been processed in Workday. Would you like to update this employee in CEM now?",persistent:!0,cancel:!0}).onOk(async()=>{const{data:p}=await O({release:l,entryMoment:l.termEntryDate.$d,workdayData:l.lastTerm});T({data:p,notify:!0})}).onCancel(()=>{T({data:l})})},ke=async({release:l,timestamp:p})=>{_.dialog({title:"Confirm",message:"It looks like this employee has been reassigned. Would you like to update this release in CEM now?",persistent:!0,cancel:!0}).onOk(async()=>{const q=await Me({release:l,disposition:"Reassign",ts:p,updatedBy:i});T({data:q,notify:!0})}).onCancel(()=>{T({data:l})})},T=({data:l,notify:p,employee:q})=>{_.loading.isActive&&_.loading.hide(),m.value.employee?l.employee=m.value.employee:q&&(l.employee=q),m.value.assignment&&(l.assignment=m.value.assignment),D({id:l[3],data:l}),p&&_.notify({type:"positive",message:"Employee updated in CEM"})},xe=()=>{s.value=!0};return te(s,(l,p)=>{s.value&&setTimeout(()=>{print(),setTimeout(()=>{s.value=!1},500)},200)}),qe(),{release:m,employee:N,assignment:$,evaluation:Y,evaluator:w,reviewer:k,processor:M,getSubmittedDate:P,getUserType:b,fab:c,dayjs:C,submitter:A,capitalize:f,showPrint:s,printPage:xe,releaseReviewed:be,completeTermination:Z,closeWindow:$e}}},Ra={class:"q-px-sm q-pb-xl"},Sa={class:"row q-py-sm"},Aa={class:"col-3"},Na=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Submitted By")],-1),Ya={class:"text-body2 q-pl-md"},Ta={class:"col-3"},Ea=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Submitted Date")],-1),Ia={class:"text-body2 q-pl-md"},Ma={class:"col-3"},Pa=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Evaluated By")],-1),La={class:"text-body2 q-pl-md"},Qa={key:0},ja={key:1},Va={key:0,class:"col-3"},Ba=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Reviewed By")],-1),za={class:"text-body2 q-pl-md"},Ua={key:1,class:"col-3"},Fa=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Processed By")],-1),Oa={class:"text-body2 q-pl-md"},Wa=e("div",{class:"text-primary text-h6 text-bold"},"Termination Workday Data",-1),Ha={key:0,class:"row q-py-sm"},Ja={class:"col-12 col-sm-3"},Ka=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Entry Date")],-1),Ga={class:"text-body2 q-pl-md"},Xa={class:"col-12 col-sm-3"},Za=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Effective Date")],-1),el={class:"text-body2 q-pl-md"},sl={key:1,class:"row q-py-sm"},tl=e("span",{class:"text-center"},"N/A",-1),ol=[tl],al={class:"row"},ll={class:"col-12 col-md-6"},nl={class:"row q-py-sm"},il={class:"col-3"},dl=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Submitted By")],-1),cl={class:"text-body2 q-pl-md"},rl={class:"col-3"},ml=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Submitted Date")],-1),ul={class:"text-body2 q-pl-md"},pl={class:"col-3"},_l=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Evaluated By")],-1),vl={class:"text-body2 q-pl-md"},yl={key:0},hl={key:1},fl={key:0,class:"col-3"},bl=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Reviewed By")],-1),$l={class:"text-body2 q-pl-md"},ql={key:1,class:"col-3"},gl=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Processed By")],-1),wl={class:"text-body2 q-pl-md"};function Dl(s,c,_,t,f,b){const i=Q("employee-information"),r=Q("evaluation"),D=Q("departure-information"),S=Q("review-form"),m=Q("print-employee-information"),N=Q("print-evaluation"),$=Q("print-departure-information");return d(),h(Ae,{style:{"max-width":"100vw"}},{default:n(()=>[e("div",Ra,[t.release&&!t.showPrint?(d(),h(I,{key:0,flat:"",class:"text-dark"},{default:n(()=>[s.$route.name==="view-release"?(d(),h(pe,{key:0,class:"q-pb-xs print-hide",align:"right"},{default:n(()=>[t.release[42]==="Reviewed"&&t.release[43]==="Terminate"&&t.getUserType==="QuickBase User"?(d(),h(j,{key:0,icon:"done",label:"Termination Processed",color:"positive",onClick:t.completeTermination},null,8,["onClick"])):x("",!0),a(j,{icon:"print",label:"Print",color:"info",onClick:t.printPage},null,8,["onClick"]),a(j,{icon:"close",label:"Close",color:"dark",onClick:c[0]||(c[0]=u=>t.getUserType==="QuickBase User"?t.closeWindow():s.$router.replace({name:"employees",query:{refresh:!0}}))})]),_:1})):x("",!0),a(v,{class:"q-py-xs"},{default:n(()=>[a(i,{assignment:t.assignment,employee:t.employee,release:t.release},null,8,["assignment","employee","release"])]),_:1}),t.evaluation?(d(),h(v,{key:1,class:"q-py-xs"},{default:n(()=>[a(r,{data:t.evaluation},null,8,["data"])]),_:1})):x("",!0),a(v,{class:"q-py-xs"},{default:n(()=>[a(D,{employee:t.employee,release:t.release},null,8,["employee","release"])]),_:1}),a(v,{class:"q-py-xs"},{default:n(()=>[a(I,null,{default:n(()=>[a(v,{class:"q-py-none"},{default:n(()=>[e("div",Sa,[e("div",Aa,[Na,e("div",Ya,[e("span",null,o(t.submitter[37])+", "+o(t.submitter[35]),1)])]),e("div",Ta,[Ea,e("div",Ia,[e("span",null,o(t.getSubmittedDate(t.release)||""),1)])]),e("div",Ma,[Pa,e("div",La,[t.evaluator?(d(),g("span",Qa,o(t.capitalize(t.evaluator[22].toLowerCase()))+", "+o(t.capitalize(t.evaluator[20].toLowerCase())),1)):(d(),g("span",ja,"Not Specified"))])]),t.reviewer?(d(),g("div",Va,[Ba,e("div",za,[e("span",null,o(t.capitalize(t.reviewer[37].toLowerCase()))+", "+o(t.capitalize(t.reviewer[35].toLowerCase())),1)])])):x("",!0),t.processor?(d(),g("div",Ua,[Fa,e("div",Oa,[e("span",null,o(t.capitalize(t.processor[37].toLowerCase()))+", "+o(t.capitalize(t.processor[35].toLowerCase())),1)])])):x("",!0)])]),_:1})]),_:1})]),_:1}),t.release.workdayTerm?(d(),h(v,{key:2,class:"q-py-xs"},{default:n(()=>[a(I,null,{default:n(()=>[a(v,{class:"text-center q-py-sm"},{default:n(()=>[Wa]),_:1}),a(v,{class:"q-py-none"},{default:n(()=>[t.release.workdayTerm.referenceId!=="N/A"?(d(),g("div",Ha,[e("div",Ja,[Ka,e("div",Ga,[e("span",null,o(s.$dayjs(t.release.workdayTerm.logEntryMoment).format("MM/DD/YYYY hh:mm:ss a z")),1)])]),e("div",Xa,[Za,e("div",el,[e("span",null,o(s.$dayjs(t.release.workdayTerm.logEffectiveMoment).format("MM/DD/YYYY hh:mm:ss a z")),1)])])])):(d(),g("div",sl,ol))]),_:1})]),_:1})]),_:1})):x("",!0),t.release[42]==="Pending"&&s.$can("manage","releases")?(d(),h(v,{key:3,class:"q-py-sm"},{default:n(()=>[e("div",al,[e("div",ll,[a(S,{release:t.release,onReleaseReviewed:t.releaseReviewed},null,8,["release","onReleaseReviewed"])])])]),_:1})):x("",!0)]),_:1})):x("",!0),t.release&&t.showPrint?(d(),h(I,{key:1,id:"printArea",flat:"",class:"text-body2"},{default:n(()=>[a(v,{class:"q-py-xs"},{default:n(()=>[a(m,{assignment:t.assignment,employee:t.employee,release:t.release},null,8,["assignment","employee","release"])]),_:1}),a(R),t.evaluation?(d(),h(v,{key:0,class:"q-py-xs"},{default:n(()=>[a(N,{data:t.evaluation},null,8,["data"])]),_:1})):x("",!0),a(R),a(v,{class:"q-py-xs"},{default:n(()=>[a($,{employee:t.employee,release:t.release},null,8,["employee","release"])]),_:1}),a(R),a(v,{class:"q-pb-sm"},{default:n(()=>[a(I,{flat:""},{default:n(()=>[a(v,{class:"q-py-none"},{default:n(()=>[e("div",nl,[e("div",il,[dl,e("div",cl,[e("span",null,o(t.submitter[37])+", "+o(t.submitter[35]),1)])]),e("div",rl,[ml,e("div",ul,[e("span",null,o(t.getSubmittedDate(t.release)||""),1)])]),e("div",pl,[_l,e("div",vl,[t.evaluator?(d(),g("span",yl,o(t.capitalize(t.evaluator[22].toLowerCase()))+", "+o(t.capitalize(t.evaluator[20].toLowerCase())),1)):(d(),g("span",hl,"Not Specified"))])]),t.reviewer?(d(),g("div",fl,[bl,e("div",$l,[e("span",null,o(t.capitalize(t.reviewer[37].toLowerCase()))+", "+o(t.capitalize(t.reviewer[35].toLowerCase())),1)])])):x("",!0),t.processor?(d(),g("div",ql,[gl,e("div",wl,[e("span",null,o(t.capitalize(t.processor[37].toLowerCase()))+", "+o(t.capitalize(t.processor[35].toLowerCase())),1)])])):x("",!0)])]),_:1})]),_:1})]),_:1})]),_:1})):x("",!0)])]),_:1})}var an=L(Ca,[["render",Dl]]);export{an as default};
