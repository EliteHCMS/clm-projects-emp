var De=Object.defineProperty,Ne=Object.defineProperties;var ke=Object.getOwnPropertyDescriptors;var se=Object.getOwnPropertySymbols;var $e=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable;var ie=(e,t,n)=>t in e?De(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,T=(e,t)=>{for(var n in t||(t={}))$e.call(t,n)&&ie(e,n,t[n]);if(se)for(var n of se(t))Oe.call(t,n)&&ie(e,n,t[n]);return e},G=(e,t)=>Ne(e,ke(t));import{r as L,c as F,g as ye,cI as je,cb as ge,cF as Qe,h as P,bP as ze,cJ as Ee,cN as Ie,cK as Te,cM as Pe,cO as Be,dp as Le,cP as ue,dq as Me,d4 as Xe,cL as Ke,cB as Je,k as Ve,bL as he,w as Se,_ as Fe,A as B,B as W,d as l,bi as b,D as r,ab as M,bJ as ae,bH as Z,au as le,cx as re,ao as oe,bO as x,F as de,aY as We,bK as He,cz as we,cw as qe,dr as v,cy as Ye,bF as Ge,bM as Ze,aZ as xe,an as me}from"./index.544726d2.js";import{Q as _e}from"./QPage.2113fa42.js";import{u as Ae}from"./use-quasar.de9b4251.js";import{u as Ce,a as Re}from"./dataStore.44b34602.js";import{u as et,q as z}from"./quickbase.dc759386.js";import{Q as ce}from"./QSelect.152777d1.js";import{Q as tt}from"./QChip.2eb47deb.js";import{Q as at}from"./QItemLabel.9df651b6.js";import{Q as lt}from"./QList.8b6cd145.js";import{Q as ot}from"./QForm.fc414047.js";import{a as pe,f as nt,c as fe,e as _,b as st,u as Q}from"./array.6f0779c0.js";import{dayjs as ne}from"./dayjs.18653603.js";import"./localForage.cf0f4dd4.js";import"./_commonjsHelpers.a26ce4be.js";import"./index.7dbe61ef.js";import"./i18n.95b8f7c4.js";import"./api.c454b805.js";import"./QMenu.afaf079f.js";import"./position-engine.9b566ae2.js";import"./selection.019ae5ac.js";import"./rtl.cf9bbe47.js";function X(e,t,n,f){const s=[];return e.forEach(d=>{f(d)===!0?s.push(d):t.push({failedPropValidation:n,file:d})}),s}function ee(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),ge(e)}const it={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},ut=["rejected"];function rt({editable:e,dnd:t,getFileInput:n,addFilesToQueue:f}){const{props:s,emit:d,proxy:a}=ye(),w=L(null),V=F(()=>s.accept!==void 0?s.accept.split(",").map(o=>(o=o.trim(),o==="*"?"*/":(o.endsWith("/*")&&(o=o.slice(0,o.length-1)),o.toUpperCase()))):null),N=F(()=>parseInt(s.maxFiles,10)),C=F(()=>parseInt(s.maxTotalSize,10));function y(o){if(e.value)if(o!==Object(o)&&(o={target:null}),o.target!==null&&o.target.matches('input[type="file"]')===!0)o.clientX===0&&o.clientY===0&&je(o);else{const D=n();D&&D!==o.target&&D.click(o)}}function A(o){e.value&&o&&f(null,o)}function k(o,D,E,I){let m=Array.from(D||o.target.files);const R=[],O=()=>{R.length>0&&d("rejected",R)};if(s.accept!==void 0&&V.value.indexOf("*/")===-1&&(m=X(m,R,"accept",p=>V.value.some(S=>p.type.toUpperCase().startsWith(S)||p.name.toUpperCase().endsWith(S))),m.length===0))return O();if(s.maxFileSize!==void 0){const p=parseInt(s.maxFileSize,10);if(m=X(m,R,"max-file-size",S=>S.size<=p),m.length===0)return O()}if(s.multiple!==!0&&m.length>0&&(m=[m[0]]),m.forEach(p=>{p.__key=p.webkitRelativePath+p.lastModified+p.name+p.size}),I===!0){const p=E.map(S=>S.__key);m=X(m,R,"duplicate",S=>p.includes(S.__key)===!1)}if(m.length===0)return O();if(s.maxTotalSize!==void 0){let p=I===!0?E.reduce((S,K)=>S+K.size,0):0;if(m=X(m,R,"max-total-size",S=>(p+=S.size,p<=C.value)),m.length===0)return O()}if(typeof s.filter=="function"){const p=s.filter(m);m=X(m,R,"filter",S=>p.includes(S))}if(s.maxFiles!==void 0){let p=I===!0?E.length:0;if(m=X(m,R,"max-files",()=>(p++,p<=N.value)),m.length===0)return O()}if(O(),m.length>0)return m}function $(o){ee(o),t.value!==!0&&(t.value=!0)}function i(o){ge(o),(o.relatedTarget!==null||Qe.is.safari!==!0?o.relatedTarget!==w.value:document.elementsFromPoint(o.clientX,o.clientY).includes(w.value)===!1)===!0&&(t.value=!1)}function g(o){ee(o);const D=o.dataTransfer.files;D.length>0&&f(null,D),t.value=!1}function j(o){if(t.value===!0)return P("div",{ref:w,class:`q-${o}__dnd absolute-full`,onDragenter:ee,onDragover:ee,onDragleave:i,onDrop:g})}return Object.assign(a,{pickFiles:y,addFiles:A}),{pickFiles:y,addFiles:A,onDragover:$,onDragleave:i,processFiles:k,getDndNode:j,maxFilesNumber:N,maxTotalSizeNumber:C}}var dt=ze({name:"QFile",inheritAttrs:!1,props:G(T(T(T({},Ee),Ie),it),{modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]}),emits:[...Te,...ut],setup(e,{slots:t,emit:n,attrs:f}){const{proxy:s}=ye(),d=Pe(),a=L(null),w=L(!1),V=Be(e),{pickFiles:N,onDragover:C,onDragleave:y,processFiles:A,getDndNode:k}=rt({editable:d.editable,dnd:w,getFileInput:H,addFilesToQueue:Y}),$=Le(e),i=F(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),g=F(()=>ue(i.value)),j=F(()=>i.value.map(u=>u.name).join(", ")),o=F(()=>Me(i.value.reduce((u,h)=>u+h.size,0))),D=F(()=>({totalSize:o.value,filesNumber:i.value.length,maxFiles:e.maxFiles})),E=F(()=>G(T({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:V.value},f),{id:d.targetUid.value,disabled:d.editable.value!==!0})),I=F(()=>"q-file q-field--auto-height"+(w.value===!0?" q-file--dnd":"")),m=F(()=>e.multiple===!0&&e.append===!0);function R(u){const h=i.value.slice();h.splice(u,1),p(h)}function O(u){const h=i.value.findIndex(u);h>-1&&R(h)}function p(u){n("update:modelValue",e.multiple===!0?u:u[0])}function S(u){u.keyCode===13&&Je(u)}function K(u){(u.keyCode===13||u.keyCode===32)&&N(u)}function H(){return a.value}function Y(u,h){const U=A(u,h,i.value,m.value),te=H();te!=null&&(te.value=""),U!==void 0&&((e.multiple===!0?e.modelValue&&U.every(Ue=>i.value.includes(Ue)):e.modelValue===U[0])||p(m.value===!0?i.value.concat(U):U))}function J(){return[P("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function c(){if(t.file!==void 0)return i.value.length===0?J():i.value.map((h,U)=>t.file({index:U,file:h,ref:this}));if(t.selected!==void 0)return i.value.length===0?J():t.selected({files:i.value,ref:this});if(e.useChips===!0)return i.value.length===0?J():i.value.map((h,U)=>P(tt,{key:"file-"+U,removable:d.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{R(U)}},()=>P("span",{class:"ellipsis",textContent:h.name})));const u=e.displayValue!==void 0?e.displayValue:j.value;return u.length>0?[P("div",{class:e.inputClass,style:e.inputStyle,textContent:u})]:J()}function q(){const u=G(T(T({ref:a},E.value),$.value),{class:"q-field__input fit absolute-full cursor-pointer",onChange:Y});return e.multiple===!0&&(u.multiple=!0),P("input",u)}return Object.assign(d,{fieldClass:I,emitValue:p,hasValue:g,inputRef:a,innerValue:i,floatingLabel:F(()=>g.value===!0||ue(e.displayValue)),computedCounter:F(()=>{if(e.counterLabel!==void 0)return e.counterLabel(D.value);const u=e.maxFiles;return`${i.value.length}${u!==void 0?" / "+u:""} (${o.value})`}),getControlChild:()=>k("file"),getControl:()=>{const u={ref:d.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return d.editable.value===!0&&Object.assign(u,{onDragover:C,onDragleave:y,onKeydown:S,onKeyup:K}),P("div",u,[q()].concat(c()))}}),Object.assign(s,{removeAtIndex:R,removeFile:O,getNativeElement:()=>a.value}),Xe(s,"nativeEl",()=>a.value),Ke(d)}});const mt=async({employee:e,assignment:t,effectiveNow:n,values:f,attachments:s,ratings:d})=>{const{userData:a,getUserType:w}=et(),V=a;V.access&&delete V.access,V.permissions&&delete V.permissions;const N=[{25:{value:e[3]},28:{value:t[3]},30:{value:f.selection[10]},35:{value:t[142]},36:{value:f.effective},38:{value:JSON.stringify(V)},39:{value:w!=="QuickBase User"},60:{value:d.comments?d.comments:""}}];if(n){const{ee:C,assign:y}=await ct({assignment:t}),{data:A}=await z.upsertRecordsXML({to:"bp3ga39ut",data:N,fieldsToReturn:[37],formatObject:37}),{release:k}=await ve({release:A[0][37][3],employee:A[0][37][25],ratings:d,user:V});if(s){const{docs:$}=await be({release:k,attachments:s,user:V});return{release:k,employee:C,assignment:y,attachments:$}}else return{release:k,employee:C,assignment:y,attachments:null}}else{const{data:C}=await z.upsertRecordsXML({to:"bp3ga39ut",data:N,fieldsToReturn:[37],formatObject:37}),{release:y}=await ve({release:C[0][37][3],employee:C[0][37][25],ratings:d,user:V});if(s){const{docs:A}=await be({release:y,attachments:s,user:V});return{release:y,employee:e,assignment:t,attachments:A}}else return{release:y,employee:e,assignment:t,attachments:null}}},ve=async({release:e,employee:t,ratings:n,user:f})=>{const{data:s}=await z.upsertRecordsXML({to:"bqzkbcxup",data:[{6:{value:n.attendance},8:{value:n.attitude},10:{value:n.capability},12:{value:n.promotable},14:{value:n.comments?n.comments:""},16:{value:t},34:{value:e},36:{value:JSON.stringify(f)}}],fieldsToReturn:[35],formatObject:35});return{release:s[0][35]}},be=async({release:e,attachments:t,user:n})=>{const f=[];console.log(t),t.forEach(d=>{Object.assign(d,{8:{value:JSON.stringify(n)},9:{value:e[3]},10:{value:e[25]}}),f.push(d)}),console.log(f);const{data:s}=await z.upsertRecordsXML({to:"bsstsai5d",data:f,fieldsToReturn:[12],formatObject:12});return{docs:s}},ct=async({assignment:e})=>{const t=[{3:{value:e[3]},21:{value:"Complete"},22:{value:ne().tz("America/Chicago")}}],{data:n}=await z.upsertRecordsXML({to:"bp3gazpqj",data:t,fieldsToReturn:[110],formatObject:110});return{ee:await pt(e[18]),assign:n[0][110]}},pt=async e=>{const t=[{3:{value:e},79:{value:19}}],{data:n}=await z.upsertRecordsXML({to:"bp3gb7ng2",data:t,fieldsToReturn:[549],formatObject:549});return n[0][549]},ft=Ve({emits:["releaseSubmitted"],props:{record:Object,employee:Object},setup(e,{emit:t}){const n=L(!1),f=L(null),s=L([]),d=Ae(),a=he(),{getTermReasons:w,setTermReasons:V}=Ce(),N=F(()=>pe({selection:pe().required().nullable().label("Reason"),effective:nt().required().label("Last Day On Site"),category:fe().nullable(),attendance:_().required().label("Attendance"),capability:_().required().label("Capability"),attitude:_().required().label("Attitude"),promotable:_().required().label("Promotability"),comments:fe().nullable().label("Comments")})),{errors:C,handleSubmit:y,handleReset:A}=st({validationSchema:N,initialValues:{}}),{value:k}=Q("selection"),{value:$}=Q("effective"),{value:i}=Q("category"),{value:g}=Q("attachments"),{value:j}=Q("capability"),{value:o}=Q("attendance"),{value:D}=Q("attitude"),{value:E}=Q("promotable"),{value:I}=Q("comments"),m=F(()=>{const c=w();return i.value?c.filter(q=>q[6]===i.value).sort((q,u)=>q[12]>u[12]?1:-1):c.sort((q,u)=>q[12]>u[12]?1:-1)}),R=y(async c=>{if(console.log(c),console.log(s.value),n.value&&s.value.length===0)d.dialog({title:"Alert",message:"Supporting documents are required for this reason!"});else{const q={capability:c.capability,attendance:c.attendance,attitude:c.attitude,promotable:c.promotable,comments:c.comments};d.dialog({title:"Confirm",message:"Are you sure you want to release this employee?",cancel:!0,persistent:!0}).onOk(async()=>{try{const{release:u,employee:h,assignment:U}=await mt({employee:e.employee,assignment:e.record,values:c,effectiveNow:!S.value,attachments:s.value,ratings:q});t("releaseSubmitted",{release:u,employee:h,assignment:U,effectiveNow:!S.value}),A()}catch{d.notify({type:"negative",message:"Cannot submit release."})}})}}),O=()=>{d.dialog({title:"Confirm",message:"Are you sure you want to cancel?",cancel:!0,persistent:!0}).onOk(()=>{A(),a.go(-1)})};Se(k,(c,q)=>{c&&c[19]?(n.value=!0,g.value=!0,console.log(g.value)):(g.value=!1,n.value=!1)});const p=F(()=>{const c=w();return[...new Map(c.map(q=>[q[6],q[6]])).values()]}),S=F(()=>$.value&&$.value!==""?ne().isBefore(ne($.value)):!1),K=c=>new Promise((q,u)=>{const h=new FileReader;h.readAsDataURL(c),h.onload=()=>q(h.result.replace(/^data:.+;base64,/,"")),h.onerror=U=>u(U)}),H=()=>{f.value&&f.value.forEach(async c=>{const q={6:{value:await K(c),filename:c.name}};s.value.push(q),f.value=null}),console.log(s.value)},Y=c=>{console.log(s.value[c]),s.value.splice(c,1)};return(async()=>{if(w().length===0){const{data:c}=await z.fetchFromHiringApp({fields:[Re({type:"termReasons",query:"{'11'.EX.'true'}"})]});V({reasons:c})}})(),{props:e,options:m,primaryReasons:p,category:i,selection:k,effective:$,attachments:g,capability:j,attendance:o,attitude:D,promotable:E,comments:I,attachmentsRequired:n,fileAttachment:f,attachedFiles:s,submit:R,formErrors:C,handleReset:A,cancelRelease:O,showFiles:H,deleteFile:Y}}}),vt={class:"row"},bt={class:"col-4 q-px-xs"},yt=r("div",{class:"text-caption"},"Is this release voluntary or involuntary?",-1),gt={class:"text-caption"},Vt={class:"col-5 q-px-xs"},ht={class:"text-caption"},St={class:"text-caption"},Ft={class:"col-3 q-px-xs"},wt=r("div",{class:"text-caption"},"When is the employee's last day on site?",-1),qt={class:"text-caption"},At={class:"row items-top justify-between q-mt-sm"},Ct={class:"col-4 q-px-xs"},Rt={key:0,class:"text-body2 text-negative q-mb-md"},Ut={key:0,class:"col-6 q-px-xs"},Dt=r("div",{class:"text-body1 text-info q-mb-sm"},"Attached Documents",-1),Nt={class:"row q-mb-md"},kt={class:"col-12"},$t=r("div",{class:"q-pa-sm"},[r("div",{class:"text-h6 text-primary text-bold"},"CAAP Rating"),r("div",{class:"text-subtitle1 text-accent text-italic"},"Capability, Attendance, Attitude, and Promotability"),r("div",{class:"text-body1 text-dark q-mt-sm"},"Select how much you agree with each of the following statements.")],-1),Ot={class:"q-pb-sm"},jt=r("div",{class:"text-body2 text-info text-bold q-mb-sm"},"This employee is capable of performing their assigned job.",-1),Qt={class:"q-pb-sm"},zt=r("div",{class:"text-body2 text-info text-bold q-mb-sm"},"This employee regularly shows up to work on time.",-1),Et={class:"q-pb-sm"},It=r("div",{class:"text-body2 text-info text-bold q-mb-sm"},"This employee has a good attitude.",-1),Tt={class:"q-pb-sm"},Pt=r("div",{class:"text-body2 text-info text-bold q-mb-sm"},"I am confident that this employee can be promoted in the future.",-1),Bt={class:"row q-py-sm"},Lt={class:"col-12"};function Mt(e,t,n,f,s,d){return B(),W("div",null,[l(ot,{onSubmit:Ge(e.submit,["prevent"])},{default:b(()=>[r("div",vt,[r("div",bt,[yt,l(ce,{dense:"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.category,"onUpdate:modelValue":t[0]||(t[0]=a=>e.category=a),options:e.primaryReasons},{error:b(()=>[r("div",gt,M(e.formErrors.selection),1)]),"no-option":b(()=>[l(ae,null,{default:b(()=>[l(Z,{class:"text-grey"},{default:b(()=>[le(" No Options Available ")]),_:1})]),_:1})]),_:1},8,["modelValue","options"])]),r("div",Vt,[r("div",ht,"What is the reason for this "+M(e.category)+" release?",1),l(ce,{dense:"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.selection,"onUpdate:modelValue":t[1]||(t[1]=a=>e.selection=a),options:e.options,"option-label":"12","display-value":`${e.selection?e.selection[12]:""}`,"bottom-slots":"",error:!!e.formErrors.selection,disable:!e.category},{error:b(()=>[r("div",St,M(e.formErrors.selection),1)]),"no-option":b(()=>[l(ae,null,{default:b(()=>[l(Z,{class:"text-grey"},{default:b(()=>[le(" No Options Available ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","display-value","error","disable"])]),r("div",Ft,[wt,l(re,{dense:"",type:"date",modelValue:e.effective,"onUpdate:modelValue":t[2]||(t[2]=a=>e.effective=a),error:!!e.formErrors.effective,"bottom-slots":""},{error:b(()=>[r("div",qt,M(e.formErrors.effective),1)]),_:1},8,["modelValue","error"])])]),r("div",At,[r("div",Ct,[e.attachmentsRequired?(B(),W("div",Rt,"Supporting documents are required for this reason.")):oe("",!0),l(dt,{dense:"","bottom-slots":"",modelValue:e.fileAttachment,"onUpdate:modelValue":t[3]||(t[3]=a=>e.fileAttachment=a),multiple:"",append:"",label:"Attach Supporting Documents"},{after:b(()=>[l(x,{dense:"",color:"info",round:"",flat:"",icon:"cloud_upload",onClick:e.showFiles},null,8,["onClick"])]),_:1},8,["modelValue"])]),e.attachedFiles.length>0?(B(),W("div",Ut,[Dt,l(lt,{dense:""},{default:b(()=>[(B(!0),W(de,null,We(e.attachedFiles,(a,w)=>(B(),W(de,{key:a},[l(ae,null,{default:b(()=>[l(Z,null,{default:b(()=>[l(at,null,{default:b(()=>[le(M(w+1)+". "+M(a[6].filename),1)]),_:2},1024)]),_:2},1024),l(Z,{side:""},{default:b(()=>[l(x,{color:"accent",round:"",flat:"",class:"cursor-pointer",icon:"delete",size:"md",onClick:V=>e.deleteFile(w)},null,8,["onClick"])]),_:2},1024)]),_:2},1024),l(He)],64))),128))]),_:1})])):oe("",!0)]),r("div",Nt,[r("div",kt,[$t,l(we,null,{default:b(()=>[l(qe,null,{default:b(()=>[r("div",null,[r("div",Ot,[jt,l(v,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[4]||(t[4]=a=>e.capability=a),val:"1",label:"Strongly Disagree"},null,8,["modelValue"]),l(v,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[5]||(t[5]=a=>e.capability=a),val:"2",label:"Disagree"},null,8,["modelValue"]),l(v,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[6]||(t[6]=a=>e.capability=a),val:"3",label:"Neutral"},null,8,["modelValue"]),l(v,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[7]||(t[7]=a=>e.capability=a),val:"4",label:"Agree"},null,8,["modelValue"]),l(v,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[8]||(t[8]=a=>e.capability=a),val:"5",label:"Strongly Agree"},null,8,["modelValue"]),l(v,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[9]||(t[9]=a=>e.capability=a),val:"0",label:"I Do Not Know"},null,8,["modelValue"])]),r("div",Qt,[zt,l(v,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[10]||(t[10]=a=>e.attendance=a),val:"1",label:"Strongly Disagree"},null,8,["modelValue"]),l(v,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[11]||(t[11]=a=>e.attendance=a),val:"2",label:"Disagree"},null,8,["modelValue"]),l(v,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[12]||(t[12]=a=>e.attendance=a),val:"3",label:"Neutral"},null,8,["modelValue"]),l(v,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[13]||(t[13]=a=>e.attendance=a),val:"4",label:"Agree"},null,8,["modelValue"]),l(v,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[14]||(t[14]=a=>e.attendance=a),val:"5",label:"Strongly Agree"},null,8,["modelValue"]),l(v,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[15]||(t[15]=a=>e.attendance=a),val:"0",label:"I Do Not Know"},null,8,["modelValue"])]),r("div",Et,[It,l(v,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[16]||(t[16]=a=>e.attitude=a),val:"1",label:"Strongly Disagree"},null,8,["modelValue"]),l(v,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[17]||(t[17]=a=>e.attitude=a),val:"2",label:"Disagree"},null,8,["modelValue"]),l(v,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[18]||(t[18]=a=>e.attitude=a),val:"3",label:"Neutral"},null,8,["modelValue"]),l(v,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[19]||(t[19]=a=>e.attitude=a),val:"4",label:"Agree"},null,8,["modelValue"]),l(v,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[20]||(t[20]=a=>e.attitude=a),val:"5",label:"Strongly Agree"},null,8,["modelValue"]),l(v,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[21]||(t[21]=a=>e.attitude=a),val:"0",label:"I Do Not Know"},null,8,["modelValue"])]),r("div",Tt,[Pt,l(v,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[22]||(t[22]=a=>e.promotable=a),val:"1",label:"Strongly Disagree"},null,8,["modelValue"]),l(v,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[23]||(t[23]=a=>e.promotable=a),val:"2",label:"Disagree"},null,8,["modelValue"]),l(v,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[24]||(t[24]=a=>e.promotable=a),val:"3",label:"Neutral"},null,8,["modelValue"]),l(v,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[25]||(t[25]=a=>e.promotable=a),val:"4",label:"Agree"},null,8,["modelValue"]),l(v,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[26]||(t[26]=a=>e.promotable=a),val:"5",label:"Strongly Agree"},null,8,["modelValue"]),l(v,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[27]||(t[27]=a=>e.promotable=a),val:"0",label:"I Do Not Know"},null,8,["modelValue"])])])]),_:1})]),_:1})])]),r("div",Bt,[r("div",Lt,[l(re,{filled:"",type:"textarea",modelValue:e.comments,"onUpdate:modelValue":t[28]||(t[28]=a=>e.comments=a),label:"Comments"},null,8,["modelValue"])])]),l(Ye,{align:"right"},{default:b(()=>[l(x,{color:"info",label:"Submit",type:"submit"}),l(x,{color:"secondary",label:"Cancel",onClick:e.cancelRelease},null,8,["onClick"])]),_:1})]),_:1},8,["onSubmit"])])}var Xt=Fe(ft,[["render",Mt]]);const Kt=Ve({components:{ReleaseForm:Xt},setup(){const e=L(0),t=Ze(),n=he(),f=Ae(),{getEmployee:s,getAssignmentsByEmployee:d,setAssignmentsByEmployee:a,setEmployees:w,setReleases:V,setReleasesByAssignment:N,setReleasesByEmployee:C}=Ce(),y=F(()=>s(t.params.id)),A=F(()=>y.value?d(y.value[3]):null),k=async()=>{if(!A.value&&y.value[577]){const{data:i}=await z.fetchFromHiringApp({fields:[Re({type:"assignments",query:"",id:y.value[577]})]});console.log(i),a({id:y.value[3],data:i})}};return Se(y,(i,g)=>{i&&k()}),{employee:y,assignment:A,releaseSubmitted:({employee:i,release:g,assignment:j,effectiveNow:o})=>{f.notify({type:"positive",message:"Release successfully submitted."}),o?(i[581]=g[3],V({id:g[3],data:g}),w({id:i[3],data:i}),a({id:i[3],assignment:j}),N({id:j[3],data:g}),C({id:i[3],data:g})):(i[581]=g[3],w({id:i[3],data:i}),V({id:g[3],data:g}),N({id:j[3],data:g}),C({id:i[3],data:g})),n.replace({name:"ee-summary",params:{id:i[3]}})},step:e}}}),Jt={class:"q-px-sm q-py-md"},Wt={class:"row"},Ht={class:"col-12"},Yt=r("div",{class:"text-h6 q-mb-md"},"Please fill out the following information.",-1);function Gt(e,t,n,f,s,d){const a=xe("release-form");return B(),me(_e,{style:{"max-width":"100vw"}},{default:b(()=>[r("div",Jt,[r("div",Wt,[r("div",Ht,[l(we,null,{default:b(()=>[e.assignment?(B(),me(qe,{key:0},{default:b(()=>[Yt,l(a,{record:e.assignment,employee:e.employee,onReleaseSubmitted:e.releaseSubmitted},null,8,["record","employee","onReleaseSubmitted"])]),_:1})):oe("",!0)]),_:1})])])])]),_:1})}var Va=Fe(Kt,[["render",Gt]]);export{Va as default};
