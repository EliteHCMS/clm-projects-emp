var le=Object.defineProperty,ie=Object.defineProperties;var ce=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable;var R=(e,a,o)=>a in e?le(e,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[a]=o,u=(e,a)=>{for(var o in a||(a={}))re.call(a,o)&&R(e,o,a[o]);if(D)for(var o of D(a))fe.call(a,o)&&R(e,o,a[o]);return e},k=(e,a)=>ie(e,ce(a));import{bP as de,bU as ve,bV as ge,bW as he,bX as me,r as H,c as r,bY as be,bZ as Pe,b_ as ye,b$ as Te,c0 as ke,c1 as Ce,w as K,c2 as Se,c3 as Q,c4 as xe,c5 as Oe,c6 as qe,c7 as Be,c8 as Ee,c9 as Fe,h as W,bQ as we,bn as Me,aL as Ae,g as De,ca as Re,cb as He}from"./index.0dddbf49.js";import{u as Ke,v as _,a as Qe,b as We,c as _e,p as L,d as Le,r as U,s as Ue}from"./position-engine.67a5d571.js";var Ve=de({name:"QMenu",inheritAttrs:!1,props:k(u(u(u(u({},Ke),ve),ge),he),{persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:_},self:{type:String,validator:_},offset:{type:Array,validator:Qe},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}}),emits:[...me,"click","escapeKey"],setup(e,{slots:a,emit:o,attrs:g}){let l=null,v,f,h;const C=De(),{proxy:m}=C,{$q:n}=m,s=H(null),i=H(!1),$=r(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),j=be(e,n),{registerTick:I,removeTick:V}=Pe(),{registerTimeout:S}=ye(),{transitionProps:X,transitionStyle:Y}=Te(e),{localScrollTarget:x,changeScrollEvent:Z,unconfigureScrollTarget:z}=We(e,M),{anchorEl:c,canShow:G}=_e({showing:i}),{hide:O}=ke({showing:i,canShow:G,handleShow:te,handleHide:oe,hideOnRouteChange:$,processOnMount:!0}),{showPortal:q,hidePortal:B,renderPortal:J}=Ce(C,s,ne),b={anchorEl:c,innerRef:s,onClickOutside(t){if(e.persistent!==!0&&i.value===!0)return O(t),(t.type==="touchstart"||t.target.classList.contains("q-dialog__backdrop"))&&He(t),!0}},E=r(()=>L(e.anchor||(e.cover===!0?"center middle":"bottom start"),n.lang.rtl)),N=r(()=>e.cover===!0?E.value:L(e.self||"top start",n.lang.rtl)),p=r(()=>(e.square===!0?" q-menu--square":"")+(j.value===!0?" q-menu--dark q-dark":"")),ee=r(()=>e.autoClose===!0?{onClick:ae}:{}),F=r(()=>i.value===!0&&e.persistent!==!0);K(F,t=>{t===!0?(Se(y),Le(b)):(Q(y),U(b))});function P(){Re(()=>{let t=s.value;t&&t.contains(document.activeElement)!==!0&&(t=t.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||t.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||t.querySelector("[autofocus], [data-autofocus]")||t,t.focus({preventScroll:!0}))})}function te(t){if(l=e.noRefocus===!1?document.activeElement:null,xe(A),q(),M(),v=void 0,t!==void 0&&(e.touchPosition||e.contextMenu)){const T=Oe(t);if(T.left!==void 0){const{top:se,left:ue}=c.value.getBoundingClientRect();v={left:T.left-ue,top:T.top-se}}}f===void 0&&(f=K(()=>n.screen.width+"|"+n.screen.height+"|"+e.self+"|"+e.anchor+"|"+n.lang.rtl,d)),e.noFocus!==!0&&document.activeElement.blur(),I(()=>{d(),e.noFocus!==!0&&P()}),S(()=>{n.platform.is.ios===!0&&(h=e.autoClose,s.value.click()),d(),q(!0),o("show",t)},e.transitionDuration)}function oe(t){V(),B(),w(!0),l!==null&&(t===void 0||t.qClickOutside!==!0)&&(((t&&t.type.indexOf("key")===0?l.closest('[tabindex]:not([tabindex^="-"])'):void 0)||l).focus(),l=null),S(()=>{B(!0),o("hide",t)},e.transitionDuration)}function w(t){v=void 0,f!==void 0&&(f(),f=void 0),(t===!0||i.value===!0)&&(qe(A),z(),U(b),Q(y)),t!==!0&&(l=null)}function M(){(c.value!==null||e.scrollTarget!==void 0)&&(x.value=Be(c.value,e.scrollTarget),Z(x.value,d))}function ae(t){h!==!0?(Ee(m,t),o("click",t)):h=!1}function A(t){F.value===!0&&e.noFocus!==!0&&Fe(s.value,t.target)!==!0&&P()}function y(t){o("escapeKey"),O(t)}function d(){const t=s.value;t===null||c.value===null||Ue({el:t,offset:e.offset,anchorEl:c.value,anchorOrigin:E.value,selfOrigin:N.value,absoluteOffset:v,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function ne(){return W(Me,X.value,()=>i.value===!0?W("div",u(k(u({role:"menu"},g),{ref:s,tabindex:-1,class:["q-menu q-position-engine scroll"+p.value,g.class],style:[g.style,Y.value]}),ee.value),we(a.default)):null)}return Ae(w),Object.assign(m,{focus:P,updatePosition:d}),J}});export{Ve as Q};
