import{Q as J}from"./QSpace.c30d4b79.js";import{bN as M,r,w as R,aL as E,c as w,A as h,B as x,d as t,bi as l,cw as G,D as c,G as V,a7 as i,ab as u,cz as W,cx as F,bI as H,bO as p,au as y}from"./index.1b5374c8.js";import{Q as k}from"./QTooltip.de78d189.js";import{Q as j}from"./QTd.b04748be.js";import{u as K}from"./use-quasar.a24d697c.js";import{e as X}from"./export-file.eb604dd4.js";import{I as Z,b as ee,u as te}from"./quickbase.2ee72534.js";import{dayjs as oe}from"./dayjs.5d57e85b.js";import{_ as ae}from"./recruitingTabs.6f1e3c09.js";import{_ as le,a as se}from"./aTable.c7b88845.js";import"./position-engine.c9766907.js";import"./selection.971e5b60.js";import"./_commonjsHelpers.a26ce4be.js";import"./index.7dbe61ef.js";import"./localForage.f1f06786.js";import"./i18n.6386200b.js";import"./api.d146f206.js";import"./QBadge.7ad63891.js";import"./QRouteTab.150ab00b.js";import"./QTabs.33d8c11b.js";import"./QResizeObserver.3970a03c.js";import"./rtl.cf9bbe47.js";import"./QSelect.7256ef6b.js";import"./QChip.de32f227.js";import"./QItemLabel.ee2c7196.js";import"./QMenu.d63f2496.js";import"./QTable.4b856605.js";import"./QList.4ca8141b.js";import"./QMarkupTable.9bc1e671.js";import"./use-fullscreen.61060e22.js";const ie={class:"q-pa-md"},ne={class:"row items-center"},re={class:"col-12 col-md-5 q-px-sm"},ce={class:"col-12 col-md-3 q-px-sm"},de={class:"col-12 col-md-5 q-px-sm"},fe={key:0},me={key:1},Me={__name:"index",setup(ue){const f=K(),C=Z(),{openWindow:S}=ee(),q=te(),{primaryOffice:$}=q,{fetchJobPost:N,fetchAllJobPost:T}=C,{getJobPost:L,getSelectedOffice:n,getLoadingState:D}=M(C),m=r(n.value?n.value[8]:null),b=r("Job Post"),P=r("jobPost"),v=r(""),Q=r({sortBy:"1",descending:!1,rowsPerPage:150}),_=o=>{m.value?N({selectedId:m.value,refresh:o}):T({can:"read",refresh:o})};_(!0),R(n,()=>{m.value=n.value?n.value[8]:null,_()});const z=r(new Date),A=setInterval(()=>{z.value=new Date},1e3);E(()=>{clearInterval(A)});const O=w(()=>["index","craft","job","locationCity","#applications","action",...n.value?[]:["office"]]),g=w(()=>[{name:"index",align:"left",label:"#",sortable:!1},{name:"craft",align:"left",label:"Craft",field:"17",sortable:!1},{name:"job",align:"left",label:"Job",field:"19",sortable:!1},{name:"locationCity",align:"center",label:"Location City",field:"42",sortable:!1},{name:"#applications",align:"center",label:"# of Applications",field:"30",sortable:!1},{name:"office",align:"center",label:"Office",field:"93",sortable:!1},{name:"action",align:"center",label:"",sortable:!1}]),d=w(()=>L.value(m.value).filter(o=>!0).sort((o,s)=>Q.value.descending?o[1].isBefore(s[1]):o[1].isAfter(s[1]))),B=(o,s,e)=>{let a=s!==void 0?s(o,e):o;return a=a==null?"":String(a),a=a.split('"').join('""'),`"${a}"`},Y=o=>{S(null,{url:`https://elitehcms.quickbase.com/db/bpz457c9d?a=dbpage&pageID=37&post_id=${o[3]}&page_id=15&office_id=${$[8]}`,name:"Job Post"})},U=o=>{S(null,{url:`https://elitehcms.quickbase.com/db/bpz457c9d?a=dbpage&pageID=33&office_id=${$[8]}&page_id=13`,name:"Post New Job"})},I=()=>{const o=[g.value.map(e=>B(e.label))].concat(d.value.map(e=>g.value.map(a=>B(typeof a.field=="function"?a.field(e):e[a.field===void 0?a.name:a.field],a.format,e)).join(","))).join(`\r
`);X(`${b.value} ${oe().format("MM.DD.YYYY")}.csv`,o,"text/csv")!==!0&&f.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})};return(o,s)=>(h(),x("div",ie,[t(ae),t(W,{flat:"",class:"q-pt-none"},{default:l(()=>[t(G,null,{default:l(()=>[c("div",ne,[c("div",re,[c("div",{class:V(["text-dark",i(f).screen.lt.md?"text-body1":"text-h5"])},u(b.value),3)]),t(J),c("div",ce,[t(le,{styleSelection:!0})])])]),_:1})]),_:1}),t(se,{rows:i(d),columns:i(g),pagination:Q.value,filter:v.value,title:b.value,separator:"vertical","row-key":"3",loading:i(D)(P.value),"visible-columns":i(O),downloadButton:!0,onDownload:I},{top:l(()=>[c("div",de,[t(F,{dense:i(f).screen.lt.md,modelValue:v.value,"onUpdate:modelValue":s[0]||(s[0]=e=>v.value=e),label:"Search...",clearable:""},{prepend:l(()=>[t(H,{name:"search"})]),_:1},8,["dense","modelValue"])]),t(J),c("div",{class:V(["text-dark text-caption text-italic",i(f).screen.lt.md?"offset-xs-5":""])},"(Total: "+u(i(d).length)+")",3),t(p,{flat:"",round:"",color:"primary",icon:"download",disable:i(d).length<1,onClick:I},{default:l(()=>[t(k,{class:"bg-accent text-black shadow-4",offset:[10,10]},{default:l(()=>[y(" Download ")]),_:1})]),_:1},8,["disable"]),t(p,{flat:"",round:"",color:"primary",icon:"add_circle",disable:i(d).length<1,onClick:U},{default:l(()=>[t(k,{class:"bg-accent text-black shadow-4",offset:[10,10]},{default:l(()=>[y(" Post New Job ")]),_:1})]),_:1},8,["disable"]),t(p,{flat:"",round:"",color:"primary",icon:"refresh",onClick:s[1]||(s[1]=e=>_(!0)),loading:i(D)(P.value)},{default:l(()=>[t(k,{class:"bg-accent text-black shadow-4",offset:[10,10]},{default:l(()=>[y(" Refresh ")]),_:1})]),_:1},8,["loading"])]),"body-cell-submissionTime":l(e=>[t(j,{props:e},{default:l(()=>[o.$dayjs(e.value).isValid()?(h(),x("div",fe,u(e.value.format("L LT")),1)):(h(),x("div",me,u(e.row[1].format("L LT")),1))]),_:2},1032,["props"])]),"body-cell-action":l(e=>[t(j,{props:e},{default:l(()=>[t(p,{color:"primary",label:"View",onClick:a=>Y(e.row),size:".75rem"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination","filter","title","loading","visible-columns"])]))}};export{Me as default};
