import{Q as U,a as I}from"./QHeader.8ee02931.js";import{_ as L,k as P,r as n,bL as R,bM as H,bN as N,w as S,aZ as g,A as _,an as j,bi as r,d as t,B as h,ao as z,ab as c,D as m,bO as Q,bI as C,bk as A}from"./index.54a03736.js";import{Q as E}from"./QMenu.f976b501.js";import{Q as K}from"./QToolbar.26dcb64a.js";import{a as V,Q as F}from"./QLayout.89995623.js";import{C as Z}from"./ClosePopup.f01526c1.js";import{u as x}from"./use-quasar.e40d42b5.js";import{u as G}from"./i18n.3c07d652.js";import{u as J,b as W,q as $}from"./quickbase.d7761f7e.js";import{_ as X}from"./languageSelector.a12c1549.js";import{_ as Y}from"./version.4ac6239e.js";import"./QResizeObserver.6b4569d1.js";import"./position-engine.24fdbc8c.js";import"./selection.252c335e.js";import"./_commonjsHelpers.a26ce4be.js";import"./dayjs.282c293e.js";import"./index.7dbe61ef.js";import"./localForage.0e31c343.js";import"./api.ce91f01c.js";import"./QSelect.84c5cb09.js";import"./QChip.010f302e.js";import"./QItemLabel.e3efee5b.js";import"./rtl.cf9bbe47.js";import"./QList.a8487dfa.js";const ee=P({name:"MainLayout",components:{languageSelector:X,version:Y},setup(){const o=x(),{locale:y}=G(),p=n(!1),s=n(!1),f=n(!1),u=n(!1),d=n(!1),i=R(),a=H(),k=J(),b=W(),{toolbarTitle:B}=b,{onKiosk:l,activeMenu:D,pageType:M,startPageEnabled:q,kioskActive:O}=N(b),v=async e=>{await $.checkKioskStatus(e)||(d.value=!0)};if(l.value&&v(!0),a.query&&a.query.office_id){const e=Object.assign({},a.query);delete e.office_id,delete e.qr,i.replace({query:e})}S(O,e=>{!e&&l.value&&v()}),S(()=>a.query,async()=>{if(l.value&&v(!1),a.query.office_id){const e=Object.assign({},a.query);delete e.office_id,e.qr&&($.checkInUser(),delete e.qr),i.replace({query:e})}});const w=async()=>{l.value&&(y.value="en-US"),k.logout().then(()=>{q.value&&l.value?i.replace({name:"start"}):i.replace({name:"login"})})},T=()=>{w()};return{tab:n("mails"),userStore:k,leftDrawerOpen:p,rightDrawerOpen:f,miniState:s,miniHover:u,kioskPrompt:d,onIdle:T,onKiosk:l,activeMenu:D,miniMouseOver(){s.value===!0&&(u.value=!1)},miniMouseOut(){s.value===!0&&(u.value=!0)},toggleLeftDrawer(){o.screen.gt.sm?(s.value=!s.value,s.value===!0&&(u.value=!0)):p.value=!p.value},toggleRightDrawer(){f.value=!f.value},drawerClick(e){s.value&&(s.value=!1,e.stopPropagation())},logout:w,toolbarTitle:B,pageType:M,startPageEnabled:q}}}),te={key:0,class:"q-mr-sm q-ml-sm",src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo-white.png",alt:"BrandSafway Logo",height:"25"},oe={key:0},se={key:1},ae={class:"q-gutter-sm row items-center no-wrap"},re={class:"row no-wrap q-pa-md"},ie={class:"column items-center"},le={class:"text-subtitle1 q-mt-md q-mb-xs"};function ne(o,y,p,s,f,u){const d=g("languageSelector"),i=g("router-view"),a=g("version");return _(),j(F,{view:"hHh lpR fFf"},{default:r(()=>[t(I,{elevated:""},{default:r(()=>[t(K,{style:{height:"62px"}},{default:r(()=>[o.$q.screen.gt.sm?(_(),h("img",te)):z("",!0),t(U,null,{default:r(()=>[o.$q.screen.lt.sm?(_(),h("span",oe)):(_(),h("span",se,c(o.toolbarTitle),1))]),_:1}),m("div",ae,[t(d,{dense:"",borderless:"",class:"lang-white"}),t(Q,{flat:"",dense:"",color:"white"},{default:r(()=>[m("div",null,c(o.userStore.getUser[35])+" "+c(o.userStore.getUser[37]),1),t(C,{right:"",size:"2.2em",name:"account_circle"}),t(E,null,{default:r(()=>[m("div",re,[m("div",ie,[t(C,{right:"",size:"72px",name:"account_circle",class:"q-mr-md"}),m("div",le,c(o.userStore.getUser[35])+" "+c(o.userStore.getUser[37]),1),A(t(Q,{color:"primary",label:o.$t("logout"),push:"",size:"sm",onClick:o.logout},null,8,["label","onClick"]),[[Z]])])])]),_:1})]),_:1})])]),_:1})]),_:1}),t(V,null,{default:r(()=>[t(i)]),_:1}),t(a)]),_:1})}var Ie=L(ee,[["render",ne]]);export{Ie as default};
