import{c as h,bX as je,i as Xe,n as He,dx as Le,h as J,bW as D,bQ as oe,cA as Oe,g as Ee,c0 as Ye,c3 as We,r as A,d8 as Ge,c8 as Ke,b0 as Ze,bY as xe,l as z,_ as U,b5 as L,A as u,B as N,d as o,br as n,D as m,ac as _,ar as C,cU as H,bO as qe,aq as y,cy as ge,G as Se,cT as O,F as ae,b4 as le,cS as X,bT as me,ax as ye,y as Te,bV as Ue,bS as ea,cV as ee,w as aa,H as ta,bU as sa}from"./index.a8594182.js";import{Q as be,a as oa,b as pe}from"./QTabPanels.59e63232.js";import{Q as la}from"./QTabs.c071546f.js";import{Q as Qe}from"./QPage.ea1eb714.js";import{u as Y}from"./use-quasar.150e9d23.js";import{q as T,u as re,b as na}from"./app.0d6b5a44.js";import{dayjs as G}from"./dayjs.3e9de836.js";import{a as B,c as x,e as Pe}from"./array.59f93f43.js";import{a as ve,b as ra}from"./useQuerySaver.d29ff9ee.js";import{u as te}from"./dataStore.7f5d81df.js";import{a as ne}from"./QSelect.61afed81.js";import{Q as we}from"./QForm.fc4076cc.js";import{a as $e,u as M}from"./vee-validate.esm.04690319.js";import{A as ia,a as da}from"./addNewCustomer.9224e813.js";import{a as he,Q as _e}from"./QTable.edbb3ede.js";import{Q as ue}from"./QTr.e2ab3daf.js";import{Q as ce}from"./QTd.c45f7868.js";import{N as ua}from"./nameRequestData.e25c7cc7.js";import{P as ca}from"./projectPipeline.828fa731.js";import{u as Fe,P as ma,c as fa}from"./pay-rate-v2.da9eb064.js";import"./use-panel.1858c2e0.js";import"./touch.3df10340.js";import"./selection.f3574640.js";import"./QResizeObserver.accf2e8f.js";import"./rtl.b51694b1.js";import"./_commonjsHelpers.a26ce4be.js";import"./localForage.cae5c4e5.js";import"./api.e0860994.js";import"./index.04bc0a32.js";import"./i18n.039f44c6.js";import"./QChip.1005a1e4.js";import"./QMenu.7aeeb4c0.js";import"./position-engine.50d2ebdf.js";import"./states.03e3d448.js";import"./QList.40f773a0.js";import"./QMarkupTable.adff077a.js";import"./use-fullscreen.10dcff66.js";import"./QSpinnerGears.8b309893.js";import"./QTooltip.6dd84b87.js";import"./workday.691c8ddf.js";import"./syncEmployeeWithWorkday.d453495a.js";import"./workdayAPI.67516c4a.js";import"./QInnerLoading.df76b9b1.js";import"./export-file.dc78ba05.js";const ba=["top","right","bottom","left"],Ie={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>ba.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function Me(e,t){return{formClass:h(()=>`q-fab--form-${e.square===!0?"square":"rounded"}`),stacked:h(()=>e.externalLabel===!1&&["top","bottom"].includes(e.labelPosition)),labelProps:h(()=>{if(e.externalLabel===!0){const c=e.hideLabel===null?t.value===!1:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${e.labelPosition}`+(c===!0?" q-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${e.labelPosition}`+(e.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:e.labelStyle}}})}}const Be={start:"self-end",center:"self-center",end:"self-start"},pa=Object.keys(Be);var se=je({name:"QFabAction",props:{...Ie,icon:{type:String,default:""},anchor:{type:String,validator:e=>pa.includes(e)},to:[String,Object],replace:Boolean},emits:["click"],setup(e,{slots:t,emit:c}){const s=Xe(Le,()=>({showing:{value:!0},onChildClick:He})),{formClass:f,labelProps:p}=Me(e,s.showing),a=h(()=>{const v=Be[e.anchor];return f.value+(v!==void 0?` ${v}`:"")}),r=h(()=>e.disable===!0||s.showing.value!==!0);function l(v){s.onChildClick(v),c("click",v)}function V(){const v=[];return t.icon!==void 0?v.push(t.icon()):e.icon!==""&&v.push(J(oe,{name:e.icon})),(e.label!==""||t.label!==void 0)&&v[p.value.action](J("div",p.value.data,t.label!==void 0?t.label():[e.label])),Oe(t.default,v)}const k=Ee();return Object.assign(k.proxy,{click:l}),()=>J(D,{class:a.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:r.value,onClick:l},V)}});const va=["up","right","down","left"],ga=["left","center","right"];var De=je({name:"QFab",props:{...Ie,...Ye,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{default:null},direction:{type:String,default:"right",validator:e=>va.includes(e)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>ga.includes(e)}},emits:We,setup(e,{slots:t}){const c=A(null),s=A(e.modelValue===!0),f=Ge(),{proxy:{$q:p}}=Ee(),{formClass:a,labelProps:r}=Me(e,s),l=h(()=>e.persistent!==!0),{hide:V,toggle:k}=Ke({showing:s,hideOnRouteChange:l}),v=h(()=>({opened:s.value})),R=h(()=>`q-fab z-fab row inline justify-center q-fab--align-${e.verticalActionsAlign} ${a.value}`+(s.value===!0?" q-fab--opened":" q-fab--closed")),S=h(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${e.direction} q-fab__actions--${s.value===!0?"opened":"closed"}`),b=h(()=>{const w={id:f,role:"menu"};return s.value!==!0&&(w["aria-hidden"]="true"),w}),i=h(()=>`q-fab__icon-holder  q-fab__icon-holder--${s.value===!0?"opened":"closed"}`);function q(w,j){const P=t[w],F=`q-fab__${w} absolute-full`;return P===void 0?J(oe,{class:F,name:e[j]||p.iconSet.fab[j]}):J("div",{class:F},P(v.value))}function Q(){const w=[];return e.hideIcon!==!0&&w.push(J("div",{class:i.value},[q("icon","icon"),q("active-icon","activeIcon")])),(e.label!==""||t.label!==void 0)&&w[r.value.action](J("div",r.value.data,t.label!==void 0?t.label(v.value):[e.label])),Oe(t.tooltip,w)}return Ze(Le,{showing:s,onChildClick(w){V(w),c.value!==null&&c.value.$el.focus()}}),()=>J("div",{class:R.value},[J(D,{ref:c,class:a.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":s.value===!0?"true":"false","aria-haspopup":"true","aria-controls":f,onClick:k},Q),J("div",{class:S.value,...b.value},xe(t.default))])}});const ya=z({emits:["cancelEdit"],components:{AddProjectLocationForm:ia,AddCustomerForm:da},props:{config:Object},setup(e,{emit:t}){const c=A(null),s=A(null),f=A(!1),p=async()=>{const{type:b,initialValue:i}=e.config;if(b==="options"){const{getter:q}=e.config;s.value=await q(),c.value=s.value,k.value=i(c.value)}else k.value=i},a=h(()=>B({entry:e.config.formRules})),{meta:r,errors:l,handleSubmit:V}=$e({validationSchema:a}),{value:k}=M("entry"),v=(b,i)=>{const{filter:q}=e.config;b===""&&i(()=>{c.value=s.value}),i(()=>{const Q=b.toLowerCase();c.value=q(s.value,Q)})},R=b=>{f.value=!1,s.value.push(b),c.value.push(b),k.value=b},S=V(async b=>{const{setter:i}=e.config;await i(b.entry),t("cancelEdit")});return p(),{rawOptions:s,options:c,entry:k,formErrors:l,formMeta:r,submit:S,filterOptions:v,addNew:f,newOptionAdded:R}}}),ha={key:0,class:"q-pr-xl"},qa={class:"text-caption"},wa={key:0,class:"text-center bg-info"},$a={key:0,class:"text-center bg-info"},Ca={key:1,class:"q-pr-xl"},Ra={class:"text-caption"};function ka(e,t,c,s,f,p){const a=L("add-project-location-form"),r=L("add-customer-form");return u(),N("div",null,[o(we,{onSubmit:qe(e.submit,["prevent"])},{default:n(()=>[e.config.type==="options"?(u(),N("div",ha,[o(ne,{class:"q-mb-sm",dense:"",label:`Select a ${e.config.fieldLabel}`,"transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.entry,"onUpdate:modelValue":t[3]||(t[3]=l=>e.entry=l),options:e.options,"option-label":e.config.optionLabel,"display-value":`${e.entry?e.entry[e.config.displayValue]:""}`,"bottom-slots":"",error:!!e.formErrors.entry,"stack-label":"","use-input":"","input-debounce":"0",onFilter:e.filterOptions,clearable:"",loading:!e.rawOptions,disable:!e.rawOptions},{error:n(()=>[m("div",qa,_(e.formErrors.entry),1)]),after:n(()=>[o(D,{type:"submit",color:"info",icon:"done",dense:"",onClick:e.submit},null,8,["onClick"]),o(D,{color:"dark",icon:"close",dense:"",onClick:t[0]||(t[0]=l=>e.$emit("cancelEdit"))})]),"after-options":n(()=>[e.config.allowNew&&e.options&&e.options.length>0?(u(),N("div",wa,[o(D,{flat:"",color:"white",label:`Add a New ${e.config.fieldLabel}`,onClick:t[1]||(t[1]=l=>e.addNew=!0)},null,8,["label"])])):C("",!0)]),"no-option":n(()=>[e.config.allowNew?(u(),N("div",$a,[o(D,{flat:"",color:"white",label:`Add a New ${e.config.fieldLabel}`,onClick:t[2]||(t[2]=l=>e.addNew=!0)},null,8,["label"])])):C("",!0)]),_:1},8,["label","modelValue","options","option-label","display-value","error","onFilter","loading","disable"])])):C("",!0),e.config.type==="input"?(u(),N("div",Ca,[o(H,{class:"q-mb-sm",dense:"",label:e.config.fieldLabel,modelValue:e.entry,"onUpdate:modelValue":t[5]||(t[5]=l=>e.entry=l),"bottom-slots":"",error:!!e.formErrors.entry,"stack-label":""},{error:n(()=>[m("div",Ra,_(e.formErrors.entry),1)]),after:n(()=>[o(D,{type:"submit",color:"info",icon:"done",dense:"",onClick:e.submit},null,8,["onClick"]),o(D,{color:"dark",icon:"close",dense:"",onClick:t[4]||(t[4]=l=>e.$emit("cancelEdit"))})]),_:1},8,["label","modelValue","error"])])):C("",!0)]),_:1},8,["onSubmit"]),o(ge,{modelValue:e.addNew,"onUpdate:modelValue":t[8]||(t[8]=l=>e.addNew=l)},{default:n(()=>[e.config.newType==="location"?(u(),y(a,{key:0,onCancelAdd:t[6]||(t[6]=l=>e.addNew=!1),onAddComplete:e.newOptionAdded},null,8,["onAddComplete"])):C("",!0),e.config.newType==="customer"?(u(),y(r,{key:1,onCancelAdd:t[7]||(t[7]=l=>e.addNew=!1),onAddComplete:e.newOptionAdded},null,8,["onAddComplete"])):C("",!0)]),_:1},8,["modelValue"])])}var Na=U(ya,[["render",ka]]);const _a=z({emits:[],props:{item:Object},components:{EditDetailsForm:Na},setup(e,{emit:t}){const c=A(!1),s=h(()=>{const{permission:f}=e.item.editable&&e.item.config?e.item.config:{action:null,subject:null};return f});return{edit:c,permission:s}}}),Va={key:0,class:"row"},Aa={class:"col-12 col-md-4"},Sa={class:"col-12 col-md-8"};function Pa(e,t,c,s,f,p){const a=L("edit-details-form");return u(),y(O,{class:"q-py-sm"},{default:n(()=>[e.edit?(u(),y(a,{key:1,type:e.item.label,config:e.item.config,onCancelEdit:t[1]||(t[1]=r=>e.edit=!1)},null,8,["type","config"])):(u(),N("div",Va,[m("div",Aa,[m("div",null,[m("span",{class:Se(e.$q.screen.gt.lg?"text-body2":"text-caption")},_(e.item.label),3)])]),m("div",Sa,[m("div",null,[m("span",{class:Se(["text-weight-light",e.$q.screen.gt.lg?"text-body2":"text-caption"])},_(e.item.value),3),e.item.editable&&e.$can(e.permission.action,e.permission.subject)?(u(),y(D,{key:0,color:"accent",flat:"",dense:"",round:"",icon:"edit",size:"sm",onClick:t[0]||(t[0]=r=>e.edit=!0)})):C("",!0)])])]))]),_:1})}var Da=U(_a,[["render",Pa]]);const ja=z({props:{title:String,details:Array},components:{DetailsSection:Da}}),La={class:"text-body1 text-white"};function Oa(e,t,c,s,f,p){const a=L("details-section");return u(),N("div",null,[o(X,{class:"text-dark q-pb-sm"},{default:n(()=>[e.title&&e.title!==""?(u(),y(O,{key:0,class:"bg-info q-py-sm"},{default:n(()=>[m("div",La,_(e.title.toUpperCase()),1)]),_:1})):C("",!0),(u(!0),N(ae,null,le(e.details,r=>(u(),N(ae,{key:r},[r.hide?C("",!0):(u(),y(a,{key:0,item:r},null,8,["item"]))],64))),128))]),_:1})])}var Ea=U(ja,[["render",Oa]]);const Ta=z({props:{rows:Array},setup(e,t){const c=Y();me();const s=h(()=>c.screen.gt.sm?[{name:1,label:"Created",align:"left",field:a=>a[1].$d,format:a=>`${G(a).format("L LT")}`,sortable:!0},{name:2,label:"ID",align:"left",field:a=>a[3],format:a=>`${a}`,sortable:!0,required:!0},{name:3,label:"Classification",align:"left",field:a=>a[21],format:a=>`${a===""?"Open":a}`,sortable:!0,required:!0},{name:4,label:"Status",align:"left",field:a=>a[17],format:a=>`${a}`,sortable:!0},{name:5,label:"Rate",align:"left",field:a=>a[23],format:a=>`$ ${a.toFixed(2)}`,sortable:!0,required:!0},{name:6,label:"# Requested",align:"right",field:a=>a[18],format:a=>`${a}`},{name:7,label:"Offers",align:"right",field:a=>f(a),format:a=>`${a}`,sortable:!0,required:!0},{name:8,label:"# Names",align:"right",field:a=>a.names,format:a=>a?a.length:0,sortable:!0,required:!0},{name:9,label:"Balance",align:"right",field:a=>p(a),format:a=>`${a}`,sortable:!0,required:!0}]:[]);function f(a){return a.offers.filter(r=>r[21]==="Accepted").length}function p(a){const r=f(a);return a[18]-r}return{columns:s,props:e}}}),Ua={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function Qa(e,t,c,s,f,p){return u(),N("div",null,[o(_e,{columns:e.columns,rows:e.props.rows,"row-key":a=>a[3],class:"q-pa-sm",pagination:{rowsPerPage:10},"table-header-class":"bg-dark text-white","no-data-label":"There are no classifications",dense:""},{header:n(a=>[o(ue,{class:"bg-dark text-white",props:a},{default:n(()=>[(u(!0),N(ae,null,le(a.cols,r=>(u(),y(he,{key:r.name,props:a},{default:n(()=>[ye(_(r.label),1)]),_:2},1032,["props"]))),128)),o(he,{"auto-width":""})]),_:2},1032,["props"])]),body:n(a=>[o(ue,{props:a},{default:n(()=>[(u(!0),N(ae,null,le(a.cols,r=>(u(),y(ce,{key:r.name,props:a},{default:n(()=>[ye(_(r.value),1)]),_:2},1032,["props"]))),128)),o(ce,{"auto-width":""},{default:n(()=>[a.row[17]==="Pending"&&e.$can("manage","projectRequests")&&!e.$can("read","hireRequests")?(u(),y(oe,{key:0,class:"cursor-pointer",size:e.$q.screen.gt.sm?"sm":"xs",color:"primary",round:"",dense:"",onClick:r=>e.$emit("removeRow",a.row),name:"delete_forever"},null,8,["size","onClick"])):C("",!0)]),_:2},1024)]),_:2},1032,["props"])]),"no-data":n(({message:a})=>[m("div",Ua,[o(oe,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),m("span",null,_(a),1)])]),"top-right":n(()=>[o(D,{color:"secondary",flat:"","icon-right":"refresh",label:"Refresh",onClick:t[0]||(t[0]=a=>e.$emit("refresh"))})]),_:1},8,["columns","rows","row-key"])])}var Fa=U(Ta,[["render",Qa]]);const Ia=z({props:{data:Object},components:{ClassificationsTable:Fa},setup(e,t){const c=Y(),{getClassifications:s,fetchClassifications:f,removeData:p,updateViewedRequests:a,getHireRequest:r}=te(),l=h(()=>r(e.data[3])&&r(e.data[3]).classes?r(e.data[3]).classes:s(e.data[3]).sort((v,R)=>v[1].$d<R[1].$d?1:-1));async function V(v){c.loading.show();const{data:R}=await f({id:e.data[3]});a({id:e.data[3],dataset:"classes",data:R}),c.loading.hide()}async function k(v){c.dialog({title:"Confirm",message:`Are you sure you want to remove ${v[12]} from request# ${v[6]}?`,cancel:!0,persistent:!0}).onOk(async()=>{try{const{data:R}=await T.upsertRecordsXML({to:"bpzpyqcu4",data:[{3:{value:v[3]},17:{value:"Cancelled"},51:{value:new Date},128:{value:6}}],fieldsToReturn:[220],formatObject:220});p({type:"classifications",key:R[0][220][6],item:R[0][220],storageKey:"storageRequestClassifications"});const S=l.value.filter(b=>b[3]!==R[0][220][3]);a({id:e.data[3],dataset:"classes",data:S})}catch(R){c.notify({type:"negative",message:"Cannot remove classification"}),console.log(R)}})}return V(),{rows:l,removeRow:k,loadData:V}}});function Ma(e,t,c,s,f,p){const a=L("classifications-table");return u(),N("div",null,[o(a,{rows:e.rows,onRemoveRow:e.removeRow,onRefresh:t[0]||(t[0]=r=>e.loadData(!0))},null,8,["rows","onRemoveRow"])])}var Ba=U(Ia,[["render",Ma]]);const za=z({props:{data:Object},components:{NameRequestDataTable:ua},setup(e,t){const c=Y(),s=me(),{capitalize:f}=Te,p=A(""),{getNameRequest:a,fetchNameRequest:r,removeData:l}=te(),{userData:V}=re(),k=h(()=>a(e.data[3]).sort((i,q)=>i[1].$d<q[1].$d?1:-1));async function v(){c.loading.show(),await r({id:e.data[3]}),c.loading.hide()}function R(i){return`${f(i[6].toLowerCase())} ${f(i[7].toLowerCase())}`}async function S(i){c.dialog({title:"Confirm",message:`Are you sure you want to remove ${R(i)} from request# ${i[18]}?`,cancel:!0,persistent:!0}).onOk(async()=>{try{const{data:q}=await T.upsertRecordsXML({to:"bsg4yb4wa",data:[{3:{value:i[3]},11:{value:!0},12:{value:G().tz("America/Chicago")},13:{value:`${V[35]} ${V[37]}`}}],fieldsToReturn:[15],formatObject:15});l({type:"nameRequest",key:q[0][15][18],item:q[0][15],storageKey:"storageNameRequest"})}catch(q){c.notify({type:"negative",message:"Cannot remove name request"}),console.log(q)}})}const b=i=>{s.push({name:"ee-summary",params:{id:i[3]}})};return v(),{nameRequests:k,search:p,removeName:S,viewEmployee:b}}}),Ja={class:"row items-center"},Xa={class:"col-12 col-md-4"};function Ha(e,t,c,s,f,p){const a=L("name-request-data-table");return u(),N("div",null,[o(X,{flat:""},{default:n(()=>[o(O,null,{default:n(()=>[m("div",Ja,[m("div",Xa,[o(H,{dense:"",modelValue:e.search,"onUpdate:modelValue":t[0]||(t[0]=r=>e.search=r),label:"Search"},null,8,["modelValue"])])])]),_:1})]),_:1}),o(a,{requests:e.nameRequests,status:"Named",onRemoveName:e.removeName,onViewEmployee:e.viewEmployee},null,8,["requests","onRemoveName","onViewEmployee"])])}var Ya=U(za,[["render",Ha]]);const Wa=z({props:{rows:Array},setup(e,t){const c=Y();me();const{openWindow:s}=na(),f=re(),{getUserType:p}=Ue(f),a=h(()=>c.screen.gt.sm?[{name:"Action",label:"",align:"left"},{name:1,label:"Created",align:"left",field:l=>l[1].$d,format:l=>`${G(l).format("L LT")}`,sortable:!0},{name:2,label:"Offered To",align:"left",field:l=>l.employee[24],format:l=>`${l}`,sortable:!0,required:!0},{name:3,label:"Classification",align:"left",field:l=>l[57],format:l=>`${l===""?"Open":l}`,sortable:!0,required:!0},{name:4,label:"Status",align:"left",field:l=>l[21],format:l=>`${l}`,sortable:!0},{name:5,label:"Rate Offered",align:"left",field:l=>l[22],format:l=>`$ ${l.toFixed(2)}`,sortable:!0,required:!0}]:[{name:"Action",label:"",align:"left"},{name:1,label:"Created",align:"left",field:l=>l[1].$d,format:l=>`${G(l).fromNow()}`,sortable:!0},{name:2,label:"Offered To",align:"left",field:l=>l.employee[24],format:l=>`${l}`,sortable:!0,required:!0},{name:3,label:"Classification",align:"left",field:l=>l[57],format:l=>`${l===""?"Open":l}`,sortable:!0,required:!0},{name:4,label:"Status",align:"left",field:l=>l[21],format:l=>`${l}`,sortable:!0},{name:5,label:"Rate Offered",align:"left",field:l=>l[22],format:l=>`$ ${l.toFixed(2)}`,sortable:!0,required:!0}]);return{getUserType:p,viewProfile:l=>{s(null,{url:`https://elitehcms.quickbase.com/db/bs7qsu6wh?a=dbpage&pageID=6&ee=${l[25]}`,name:"View Profile"})},columns:a,props:e}}}),Ga={key:0},Ka={key:1},Za={key:2},xa={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function et(e,t,c,s,f,p){return u(),N("div",null,[o(_e,{columns:e.columns,rows:e.props.rows,"row-key":a=>a[3],class:"q-pa-sm",pagination:{rowsPerPage:10},"table-header-class":"bg-dark text-white","no-data-label":"There are no offers",dense:""},{body:n(a=>[o(ue,{props:a},{default:n(()=>[(u(!0),N(ae,null,le(a.cols,r=>(u(),y(ce,{key:r.name,props:a,"auto-width":""},{default:n(()=>[r.name==="Action"?(u(),N("span",Ga,[e.getUserType==="QuickBase User"?(u(),y(oe,{key:0,class:"cursor-pointer",size:e.$q.screen.gt.sm?"sm":"xs",color:"info",round:"",dense:"",onClick:l=>e.viewProfile(a.row),name:a.expand?"visibility_off":"visibility"},null,8,["size","onClick","name"])):C("",!0)])):C("",!0),r.name===4?(u(),N("span",Ka,_(a.row[29]==="Review"?"Pending":r.value),1)):(u(),N("span",Za,_(r.value),1))]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"no-data":n(({message:a})=>[m("div",xa,[o(oe,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),m("span",null,_(a),1)])]),_:1},8,["columns","rows","row-key"])])}var at=U(Wa,[["render",et]]);const tt=z({props:{data:Array},components:{OffersDataTable:at},setup(e){const t=A("");return{offers:h(()=>{const s=[];return e.data.forEach(f=>{`${f.employee[24].toLowerCase}`.includes(t.value.toLowerCase())&&s.push(f)}),s}),search:t}}}),st={class:"row items-center"},ot={class:"col-12 col-md-4"};function lt(e,t,c,s,f,p){const a=L("offers-data-table");return u(),N("div",null,[o(X,{flat:""},{default:n(()=>[o(O,null,{default:n(()=>[m("div",st,[m("div",ot,[o(H,{dense:"",modelValue:e.search,"onUpdate:modelValue":t[0]||(t[0]=r=>e.search=r),label:"Search"},null,8,["modelValue"])])])]),_:1})]),_:1}),o(a,{rows:e.offers},null,8,["rows"])])}var nt=U(tt,[["render",lt]]);const rt={name:"Pipeline",components:{ProjectPipelineTable:ca},props:{request:Object},setup(e){const t=Y(),c=A(""),{fetchDeployments:s,fetchInProcess:f,fetchPending:p,getDeployments:a,getInProcess:r,getPending:l}=te(),V=h(()=>a(e.request[3]).filter(i=>i[20]==="Complete")),k=h(()=>{const i=[];return a(e.request[3]).forEach(q=>{q[31].toLowerCase().includes(c.value.toLowerCase())&&i.push(q)}),i}),v=h(()=>{const i=[];return l(e.request[3]).forEach(q=>{q[25].toLowerCase().includes(c.value.toLowerCase())&&i.push(q)}),i}),R=h(()=>{const i=[];return r(e.request[3]).forEach(q=>{q[39].toLowerCase().includes(c.value.toLowerCase())&&i.push(q)}),i}),S=h(()=>R.value.concat(v.value.concat(k.value)));async function b(){t.loading.show(),await s({requestId:e.request[3]}),await f({requestId:e.request[3]}),await p({requestId:e.request[3]}),t.loading.hide()}return b(),{arrived:V,allPipeline:S,search:c}}},it={class:"q-pt-sm"},dt={class:"text-h5 text-dark"},ut={class:"text-body2 text-italic q-ml-sm"},ct=m("div",{class:"text-subtitle2 text-accent"},"The following people are currently in process or deployed for this request.",-1),mt={class:"row items-center"},ft={class:"col-12 col-md-3 q-px-sm"};function bt(e,t,c,s,f,p){const a=L("project-pipeline-table");return u(),y(Qe,{style:{"max-width":"100vw"}},{default:n(()=>[m("div",it,[o(X,{flat:""},{default:n(()=>[o(O,{class:"q-pb-none"},{default:n(()=>[m("div",dt,[ye(" Staffing Pipeline "),m("span",ut,"("+_(s.allPipeline.length)+" total)",1)]),ct]),_:1}),o(O,null,{default:n(()=>[m("div",mt,[m("div",ft,[o(H,{dense:"",modelValue:s.search,"onUpdate:modelValue":t[0]||(t[0]=r=>s.search=r),label:"Search"},null,8,["modelValue"])])])]),_:1})]),_:1}),o(a,{rows:s.allPipeline},null,8,["rows"])])]),_:1})}var pt=U(rt,[["render",bt]]);const vt=z({emits:["namesAdded","closeNames"],components:{},props:{request:Object},setup(e,{emit:t}){const c=Y(),{getClassifications:s,addNameRequest:f}=te(),{userData:p}=re(),{capitalize:a}=Te;A(!1);const r=A(10);A(null);const l=A([]),V=h(()=>s(e.request[3])||[]),k=[{name:0,label:"#",align:"left",field:d=>d.id,format:d=>`${d}`},{name:1,label:"First Name",align:"left",field:d=>d.firstName,format:d=>`${a(d.toLowerCase())}`,sortable:!0},{name:2,label:"Last Name",align:"left",field:d=>d.lastName,format:d=>`${a(d.toLowerCase())}`,sortable:!0},{name:3,label:"Phone",align:"left",field:d=>d.phone,format:d=>`${d}`,sortable:!1,required:!0},{name:4,label:"Last 4",align:"left",field:d=>d.ssn,format:d=>`${d}`}],v=h(()=>{const d=new RegExp("^[0-9]{"+r.value+"}","g");return B({job:B().required("Classification is required"),firstName:x().required().label("First Name"),lastName:x().required().label("Last Name"),phoneNumber:x().matches(d,{excludeEmptyString:!0,message:"Number Only!"}).required().label("Phone Number"),ssn:x().matches(/^\d+$/,{excludeEmptyString:!0,message:"Numbers Only!"}).label("Last 4 of SSN")})}),{errors:R,handleSubmit:S,resetForm:b,isSubmitting:i}=$e({validationSchema:v,initialValues:{job:V.value.length===1?V.value[0]:null}}),{value:q}=M("job"),{value:Q}=M("firstName"),{value:w}=M("lastName"),{value:j}=M("phoneNumber"),{value:P}=M("ssn"),F=S(d=>{const $={id:l.value.length+1,classification:d.job,firstName:d.firstName,lastName:d.lastName,phone:d.phoneNumber,ssn:d.ssn};l.value.push($),b()}),K=d=>{const $=l.value.filter(I=>I.id!==d.id);l.value=$},fe=async d=>{const $=p;$.access&&delete $.access,$.permissions&&delete $.permissions;const{data:I}=await T.upsertRecordsXML({to:"bsg4yb4wa",data:[{6:{value:d.firstName},7:{value:d.lastName},8:{value:d.phone},10:{value:"Has Not Arrived"},19:{value:G()},16:{value:d.ssn},14:{value:`${$[35]} ${$[37]}`},17:{value:d.classification[3]}}],fieldsToReturn:[15],formatObject:15}),E=I[0][15];return E[45]>E[43]&&Fe({id:E[17],qty:E[45]}),E};return{formErrors:R,submit:F,job:q,firstName:Q,lastName:w,phoneNumber:j,ssn:P,resetForm:b,classifications:V,names:l,columns:k,removeRow:K,submitNames:async()=>{c.loading.show();const d=[];l.value.forEach(E=>{const Ce=fe(E);d.push(Ce)});const I=(await Promise.allSettled(d)).map(E=>E.value);console.log(I),f({id:e.request[3],data:I}),c.notify({type:"positive",message:"Names successfully added!"}),t("namesAdded"),c.loading.hide()}}}}),gt={class:"q-mb-sm"},yt={class:"text-caption"},ht={class:"q-mb-sm"},qt={class:"text-caption"},wt={class:"q-mb-sm"},$t={class:"text-caption"},Ct={class:"q-mb-sm"},Rt={class:"text-caption"},kt={class:"text-caption"},Nt={class:"text-caption"};function _t(e,t,c,s,f,p){return u(),y(we,{onSubmit:qe(e.submit,["prevent"])},{default:n(()=>[o(X,null,{default:n(()=>[o(O,{class:"q-pb-sm"},{default:n(()=>[m("div",gt,[o(H,{dense:"",label:"First Name",modelValue:e.firstName,"onUpdate:modelValue":t[0]||(t[0]=a=>e.firstName=a),error:!!e.formErrors.firstName,"bottom-slots":""},{error:n(()=>[m("div",yt,_(e.formErrors.firstName),1)]),_:1},8,["modelValue","error"])]),m("div",ht,[o(H,{dense:"",label:"Last Name",modelValue:e.lastName,"onUpdate:modelValue":t[1]||(t[1]=a=>e.lastName=a),error:!!e.formErrors.lastName,"bottom-slots":""},{error:n(()=>[m("div",qt,_(e.formErrors.lastName),1)]),_:1},8,["modelValue","error"])]),m("div",wt,[o(H,{dense:"",label:"Phone Number",modelValue:e.phoneNumber,"onUpdate:modelValue":t[2]||(t[2]=a=>e.phoneNumber=a),error:!!e.formErrors.phoneNumber,"bottom-slots":""},{error:n(()=>[m("div",$t,_(e.formErrors.phoneNumber),1)]),_:1},8,["modelValue","error"])]),m("div",Ct,[o(H,{maxlength:"4",dense:"",label:"SSN Last 4 (Optional)",modelValue:e.ssn,"onUpdate:modelValue":t[3]||(t[3]=a=>e.ssn=a),error:!!e.formErrors.ssn,"bottom-slots":""},{error:n(()=>[m("div",Rt,_(e.formErrors.ssn),1)]),_:1},8,["modelValue","error"])]),m("div",null,[o(ne,{dense:"",label:"Classification","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.job,"onUpdate:modelValue":t[4]||(t[4]=a=>e.job=a),options:e.classifications,"option-label":a=>a?`${a[21]}`:"","display-value":e.job?`${e.job[21]}`:"","bottom-slots":"",error:!!e.formErrors.job},{error:n(()=>[m("div",kt,_(e.formErrors.job),1)]),_:1},8,["modelValue","options","option-label","display-value","error"])])]),_:1}),o(ea),o(ee,{class:"q-pt-sm",align:"right"},{default:n(()=>[e.names.length===0?(u(),y(D,{key:0,dense:"",label:"Cancel",color:"secondary",onClick:t[5]||(t[5]=a=>e.$emit("closeNames"))})):C("",!0),o(D,{dense:"",color:"info",label:"Save Name",type:"submit",onClick:e.submit},null,8,["onClick"])]),_:1}),e.names.length>0?(u(),y(O,{key:0,class:"q-px-none"},{default:n(()=>[o(_e,{flat:"",columns:e.columns,rows:e.names,"row-key":a=>a.name,class:"q-pa-sm",pagination:{rowsPerPage:100},"table-header-class":"bg-dark text-white",dense:"","hide-pagination":""},{header:n(a=>[o(ue,{class:"bg-dark text-white",props:a},{default:n(()=>[(u(!0),N(ae,null,le(a.cols,r=>(u(),y(he,{class:"text-left",key:r.name},{default:n(()=>[ye(_(r.label),1)]),_:2},1024))),128)),o(he,{"auto-width":""})]),_:2},1032,["props"])]),body:n(a=>[o(ue,{"no-hover":"",props:a},{default:n(()=>[(u(!0),N(ae,null,le(a.cols,r=>(u(),y(ce,{key:r.name,props:a},{default:n(()=>[m("span",Nt,_(r.value),1)]),_:2},1032,["props"]))),128)),o(ce,{"auto-width":""},{default:n(()=>[o(D,{round:"",flat:"",icon:"delete",color:"accent",onClick:r=>e.removeRow(a.row)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["columns","rows","row-key"])]),_:1})):C("",!0),e.names.length>0?(u(),y(ee,{key:1,align:"right"},{default:n(()=>[o(D,{dense:"",label:"Cancel",color:"secondary",onClick:t[6]||(t[6]=a=>e.$emit("closeNames"))}),o(D,{dense:"",color:"primary",label:"Submit These Names",onClick:e.submitNames},null,8,["onClick"])]),_:1})):C("",!0)]),_:1})]),_:1},8,["onSubmit"])}var Vt=U(vt,[["render",_t]]);const At=z({emits:["jobsAdded","closeJobs","jobUpdated"],components:{PayRateField:ma},props:{request:Object},setup(e,{emit:t}){Y();const{getClassifications:c}=te();re();const s=A([]),f=h(()=>c(e.request[3])||[]),p=B({craft:B().required().nullable().label("Craft"),classification:B().required().nullable().label("Classification"),rate:Pe().required().nullable().label("Rate"),qty:Pe().required().nullable().label("Quantity")}),{errors:a,handleSubmit:r,resetForm:l,isSubmitting:V,setFieldError:k}=$e({validationSchema:p}),{value:v}=M("craft"),{value:R}=M("classification"),{value:S}=M("rate"),{value:b}=M("qty"),i=r(async w=>{const j=f.value.find(P=>P[9]===w.classification[3]&&P[23]===w.rate);if(j){const P=j[18]+w.qty,F=await Fe({id:j[3],qty:P});t("jobUpdated",F)}else{const P=await fa({requestData:e.request,job:w});t("jobsAdded",P)}}),q=async()=>{const{data:w}=await T.fetchFromProjectsApp({fields:[ve({type:"projectCrafts",query:`{'7'.EX.'${e.request[6]}'}AND{'6'.EX.'Active'}`})]}),j=w.sort((P,F)=>P[20]>F[20]?1:-1);s.value=j,console.log(f.value)},Q=h(()=>{const w=v.value&&v.value.classifications?v.value.classifications:[];return w.length>0?w.sort((j,P)=>j[32]>P[32]?-1:1):[]});return aa(R,(w,j)=>{w&&w.hasFixedRate?S.value=w.fixedRate:S.value&&(S.value=null)}),q(),{errors:a,submit:i,classificationOptions:Q,craft:v,classification:R,rate:S,qty:b,crafts:s}}}),St={key:0,class:"text-body2 text-italic text-weight-bold text-dark"},Pt={key:1,class:"text-body2 text-italic text-weight-bold text-dark"},Dt={class:"row q-mb-md"},jt={class:"col-6 q-pr-sm"},Lt={class:"text-caption"},Ot={class:"col-6 q-pl-sm"},Et={class:"text-caption"},Tt={class:"row"},Ut={class:"col-6 q-pr-sm"},Qt={class:"text-caption"},Ft={class:"col-6 q-pl-sm"};function It(e,t,c,s,f,p){const a=L("pay-rate-field");return u(),y(we,ta(e.$attrs,{onSubmit:qe(e.submit,["prevent"])}),{default:n(()=>[o(X,null,{default:n(()=>[o(O,null,{default:n(()=>[e.$attrs.hideInstructions?(u(),N("div",Pt," Enter the following information about the classification and click Submit. ")):(u(),N("div",St," Enter the following information about the classification and click Save. Repeat until all classifications you are requesting have been saved. Then click Continue. ")),m("div",Dt,[m("div",jt,[o(ne,{class:"q-mt-md",dense:"",clearable:"","transition-show":"flip-up","transition-hide":"flip-down",label:"Select Craft",modelValue:e.craft,"onUpdate:modelValue":t[0]||(t[0]=r=>e.craft=r),options:e.crafts,"option-label":r=>r[10],"display-value":e.craft?`${e.craft[10]}`:"",error:!!e.errors.craft,"bottom-slots":""},{error:n(()=>[m("div",Lt,_(e.errors.craft),1)]),_:1},8,["modelValue","options","option-label","display-value","error"])]),m("div",Ot,[o(ne,{class:"q-mt-md",dense:"",clearable:"","transition-show":"flip-up","transition-hide":"flip-down",label:"Classification",modelValue:e.classification,"onUpdate:modelValue":t[1]||(t[1]=r=>e.classification=r),options:e.classificationOptions,"option-label":r=>r[18],"display-value":e.classification?`${e.classification[18]}`:"",error:!!e.errors.classification,"bottom-slots":"",disable:!e.craft},{error:n(()=>[m("div",Et,_(e.errors.classification),1)]),_:1},8,["modelValue","options","option-label","display-value","error","disable"])])]),m("div",Tt,[m("div",Ut,[o(H,{dense:"",type:"number",label:"Quantity",modelValue:e.qty,"onUpdate:modelValue":t[2]||(t[2]=r=>e.qty=r),modelModifiers:{number:!0},error:!!e.errors.qty,disable:!e.classification,"bottom-slots":""},{error:n(()=>[m("div",Qt,_(e.errors.qty),1)]),_:1},8,["modelValue","error","disable"])]),m("div",Ft,[o(a,{class:"q-mb-md",type:"number",step:"any",dense:"",label:"Hourly Rate",modelValue:e.rate,"onUpdate:modelValue":t[3]||(t[3]=r=>e.rate=r),modelModifiers:{number:!0},prefix:"$",disable:!e.classification||e.classification.hasFixedRate&&!e.$can("manage","rates"),error:!!e.errors.rate,"error-message":e.errors.rate,"bottom-slots":""},null,8,["modelValue","disable","error","error-message"])])])]),_:1}),o(ee,{align:"right"},{default:n(()=>[o(D,{dense:"",color:"secondary",label:"Cancel",onClick:t[4]||(t[4]=r=>e.$emit("closeJobs"))}),o(D,{dense:"",color:"primary",label:"Submit",type:"submit",onClick:e.submit},null,8,["onClick"])]),_:1})]),_:1})]),_:1},16,["onSubmit"])}var Mt=U(At,[["render",It]]);const Bt=z({props:{request:Object},setup(e){const t=A(null),c=["Continue Processing","Remove from In Process"],s=["Client Headcount Met","Client Changed Work Scope"],f=re(),{userData:p}=Ue(f),a=me(),r=Y(),{getDeployments:l,getInProcess:V,getPending:k,fetchDeployments:v,fetchInProcess:R,fetchPending:S}=te(),b=p.value&&p.value[35]?p.value[35]:"",i=p.value&&p.value[37]?p.value[37]:"",q=h(()=>l(e.request[3])),Q=h(()=>V(e.request[3])),w=h(()=>k(e.request[3])),j=h(()=>q.value.concat(Q.value)),P=h(()=>w.value.concat(Q.value));async function F(){await v({requestId:e.request[3],refresh:!0}),await R({requestId:e.request[3],refresh:!0}),await S({requestId:e.request[3],refresh:!0})}F();const K=h(()=>{let Z={};return P.value.length>0?Z=B({action:x().required().label("Applicant(s) In Process, Action Needed?"),reason:x().required().label("Reason for Closing")}):Z=B({reason:x().required().label("Reason for Closing")}),Z}),{meta:fe,errors:g,handleSubmit:d,handleReset:$}=$e({validationSchema:K}),{value:I}=M("action"),{value:E}=M("reason"),Ce=d(async Z=>{try{let ie=j.value.length===0?"Cancelled":"Closed",Re=j.value.length===0?6:5;e.request[305]>0&&(ie="Closed",Re=5);const ze={3:{value:e.request[3]},14:{value:ie},84:{value:new Date},86:{value:new Date},147:{value:Re},276:{value:p.value[3]},277:{value:`${b} ${i}`},303:{value:Z.reason},306:{value:Z.action||"N/A"}},Ae=[];e.request.classes&&Array.isArray(e.request.classes)&&e.request.classes.forEach(W=>{const Ne=A(W[18]);Z.action==="Continue Processing"?W.offers&&Array.isArray(W.offers)&&(Ne.value=W.offers.filter(de=>de[21]==="Accepted").length):Ne.value=q.value.filter(de=>de[89]===W[3]&&(de[20]==="Complete"||de[20]==="In Process")).length;const Je={3:{value:W[3]},17:{value:ie},29:{value:new Date},51:{value:new Date},128:{value:Re},255:{value:Ne.value}};Ae.push(Je)});const{data:ke}=await T.upsertRecordsXML({to:"bpzpyjbuy",data:[ze],fieldsToReturn:[3]});if(ke&&ke[0]&&ke[0][3]){const{data:W}=await T.upsertRecordsXML({to:"bpzpyqcu4",data:Ae,fieldsToReturn:[3]});if(W)Ve(),a.go(-1),r.notify({position:"top-right",type:"positive",message:"Request successfully closed"});else throw"Error in canceling request"}else throw"Error in canceling request"}catch(ie){console.log(ie),r.notify({position:"top-right",type:"negative",message:"There was a problem closing request!"})}}),Ve=()=>{$(),t.value.hide()};return{cancelRequestDialog:t,hireRequestPipeline:P,actions:c,reasons:s,action:I,reason:E,formErrors:g,submitCancel:Ce,closeCancelDialog:Ve}}}),zt=m("div",{class:"text-h6 text-info"},"Close Request",-1),Jt={key:0,class:"row"},Xt={class:"col-12 q-pr-sm"},Ht={class:"text-caption"},Yt={class:"row q-mb-md"},Wt={class:"col-12 q-pr-sm"},Gt={class:"text-caption"};function Kt(e,t,c,s,f,p){return u(),y(ge,{ref:"cancelRequestDialog"},{default:n(()=>[o(X,{flat:"",style:{width:"400px"}},{default:n(()=>[o(we,{onSubmit:qe(e.submitCancel,["prevent"])},{default:n(()=>[o(O,{class:"q-pb-none"},{default:n(()=>[zt]),_:1}),o(O,null,{default:n(()=>[e.hireRequestPipeline.length>0?(u(),N("div",Jt,[m("div",Xt,[o(ne,{class:"q-mt-md",dense:"","transition-show":"flip-up","transition-hide":"flip-down",label:`${e.hireRequestPipeline.length} Applicant(s) In Process, Action Needed?`,modelValue:e.action,"onUpdate:modelValue":t[0]||(t[0]=a=>e.action=a),options:e.actions,error:!!e.formErrors.action,"bottom-slots":""},{error:n(()=>[m("div",Ht,_(e.formErrors.action),1)]),_:1},8,["label","modelValue","options","error"])])])):C("",!0),m("div",Yt,[m("div",Wt,[o(ne,{class:"q-mt-md",dense:"","transition-show":"flip-up","transition-hide":"flip-down",label:"Reason for Closing",modelValue:e.reason,"onUpdate:modelValue":t[1]||(t[1]=a=>e.reason=a),options:e.reasons,error:!!e.formErrors.reason,"bottom-slots":""},{error:n(()=>[m("div",Gt,_(e.formErrors.reason),1)]),_:1},8,["modelValue","options","error"])])])]),_:1}),o(ee,{align:"right"},{default:n(()=>[o(D,{dense:"",color:"secondary",label:"Cancel",onClick:e.closeCancelDialog},null,8,["onClick"]),o(D,{dense:"",color:"primary",label:"Submit",type:"submit",onClick:e.submitCancel},null,8,["onClick"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},512)}var Zt=U(Bt,[["render",Kt]]);const xt={name:"View Request",components:{ClassificationsTab:Ba,NamesTab:Ya,PipelineTab:pt,OffersTab:nt,NamesForm:Vt,DetailsCard:Ea,ClassificationForm:Mt,cancelHireRequest:Zt},setup(){const e=A(!0),t=A(!1),c=A(!1),s=A(!1),f=Y(),p=sa(),a=me(),r=A(0),{getHireRequest:l,fetchHireRequest:V,updateViewedRequests:k,setHireRequests:v}=te(),{getUserType:R,userData:S}=re(),b=A(!1),i=h(()=>l(p.params.id)),q=async g=>{if(!i.value[3]||g){f.loading.show();const{data:d}=await T.fetchFromProjectsApp({fields:[ve({type:"requests",id:p.params.id})]});v({requestId:p.params.id,data:d}),f.loading.hide()}},Q=()=>{a.go(-1)},w=()=>{a.push({name:"project-general",params:{id:i.value[6]}})};q();const j=()=>{r.value=1,c.value=!1,q(!0)},P=g=>{s.value=!1,q(!0),k({id:i.value[3],dataset:"classes",data:g,push:!0})},F=g=>{s.value=!1,q(!0);const d=l(i.value[3]).classes,$=d.findIndex(I=>I[3]===g[3]);$>-1?(d[$]=g,k({id:i.value[3],dataset:"classes",data:d})):k({id:i.value[3],dataset:"classes",data:g,push:!0})},K=g=>{const d=[];for(const[$,I]of Object.entries(g)){const E={fid:$,value:I};d.push(E)}k({id:i.value[3],props:d})},fe=h(()=>i.value[3]?[{label:"Request ID",value:i.value[3],editable:!1},{label:"Date Created",value:G(i.value[1].$d).format("MM/DD/YYYY hh:mm:ss a"),editable:!1},{label:"Status",value:`${i.value[14]} (${i.value[59]})`,editable:!1},{label:"Request Type",value:`${i.value[282]}`,editable:!1},{label:"Opened On",value:i.value[82].$d?G(i.value[82].$d).format("MM/DD/YYYY hh:mm:ss a"):null,editable:!1,hide:i.value[14]!=="Open"&&i.value[14]!=="Closed"},{label:"Closed On",value:i.value[86].$d?G(i.value[86].$d).format("MM/DD/YYYY hh:mm:ss a"):null,editable:!1,hide:i.value[14]!=="Closed"},{label:"Project Name",value:i.value[91],editable:!1},{label:"Job Number",value:i.value[27],editable:i.value[14]!=="Closed",config:{permission:{action:"manage",subject:"projectRequests"},type:"options",allowNew:!1,newType:"customer",initialValue:g=>g.find(d=>d[3]===i.value[9]),formRules:B().required().label("Job Number").nullable(),fieldLabel:"Job Number",optionLabel:"11",displayValue:11,getter:async()=>{const{data:g}=await T.fetchFromProjectsApp({fields:[ve({type:"jobNumbers",query:`{'6'.EX.'${i.value[6]}'}AND{'29'.EX.'Active'}`})]});return g.sort((d,$)=>d[1].$d>$[1].$d?-1:1)},setter:async g=>{try{const{data:d}=await T.upsertRecordsXML({to:"bpzpyjbuy",data:[{3:{value:i.value[3]},9:{value:g[3]}}],fieldsToReturn:[9,27]});K(d[0]),f.notify({type:"positive",message:"Job Number successfully updated"})}catch{f.notify({type:"negative",message:"Error updating Job Number"})}},filter:(g,d)=>g.filter($=>$[11].toLowerCase().indexOf(d)>-1)}},{label:"Site Contact",value:i.value[76],editable:i.value[14]!=="Closed",config:{permission:{action:"manage",subject:"projectRequests"},type:"options",allowNew:!1,newType:"location",initialValue:g=>g.find(d=>d[3]===i.value[60]),formRules:B().required().label("Site Contact").nullable(),fieldLabel:"Site Contact",optionLabel:"17",displayValue:17,getter:async()=>{const{data:g}=await T.fetchFromProjectsApp({fields:[ve({type:"siteContacts",query:`{'7'.EX.'${i.value[6]}'}AND{'6'.EX.'Active'}`})]});return g.sort((d,$)=>d[17]>$[17]?1:-1)},setter:async g=>{try{const{data:d}=await T.upsertRecordsXML({to:"bpzpyjbuy",data:[{3:{value:i.value[3]},60:{value:g[3]}}],fieldsToReturn:[60,76]});K(d[0]),f.notify({type:"positive",message:"Site Contact successfully updated"})}catch{f.notify({type:"negative",message:"Error updating Site Contact"})}},filter:(g,d)=>g.filter($=>$[17].toLowerCase().indexOf(d)>-1)}},{label:"Meeting Location",value:i.value[32],editable:i.value[14]!=="Closed",config:{permission:{action:"manage",subject:"projectRequests"},type:"options",allowNew:!1,newType:"location",initialValue:g=>g.find(d=>d[3]===i.value[31]),formRules:B().required().label("Meeting Location").nullable(),fieldLabel:"Meeting Location",optionLabel:"6",displayValue:6,getter:async()=>{const{data:g}=await T.fetchFromStructureApp({fields:[ra({type:"meetingLocations",query:`{'15'.EX.'${i.value[8]}'}AND{'14'.EX.'Active'}`})]});return g.sort((d,$)=>d[6]>$[6]?1:-1)},setter:async g=>{try{const{data:d}=await T.upsertRecordsXML({to:"bpzpyjbuy",data:[{3:{value:i.value[3]},31:{value:g[3]}}],fieldsToReturn:[31,32,33]});K(d[0]),f.notify({type:"positive",message:"Meeting Location successfully updated"})}catch{f.notify({type:"negative",message:"Error updating Meeting Location"})}},filter:(g,d)=>g.filter($=>$[6].toLowerCase().indexOf(d)>-1)}},{label:"Address",value:i.value[33],editable:!1},{label:"Notes",value:i.value[299],editable:!1}]:[]);return{hireRequestData:i,tab:r,back:Q,showAddNames:c,showAddJobs:s,namesAdded:j,details:fe,viewProject:w,actions:e,navs:t,jobsAdded:P,jobUpdated:F,getUserType:R,cancelRequest:b}}},es={key:0,class:"q-pa-sm"},as={class:"row"},ts={class:"col-12 col-md-6"},ss={class:"col-12 col-md-6"},os={class:"row"},ls={class:"col-12 col-md-4 q-pr-sm"},ns={class:"col-12 col-md-8 q-pl-sm"};function rs(e,t,c,s,f,p){const a=L("details-card"),r=L("classifications-tab"),l=L("names-tab"),V=L("offers-tab"),k=L("pipeline-tab"),v=L("names-form"),R=L("classification-form"),S=L("cancelHireRequest");return u(),y(Qe,{style:{"max-width":"100vw"}},{default:n(()=>[s.hireRequestData[3]?(u(),N("div",es,[o(X,{flat:""},{default:n(()=>[o(O,{class:"q-pa-none"},{default:n(()=>[m("div",as,[m("div",ts,[o(ee,{class:"q-pt-none",align:"left"},{default:n(()=>[o(D,{label:"Go Back",color:"secondary",icon:"keyboard_return",onClick:s.back},null,8,["onClick"])]),_:1})]),m("div",ss,[s.getUserType==="Project User"?(u(),y(ee,{key:0,class:"q-pt-none",align:"right"},{default:n(()=>[e.$can("manage","projectRequests")&&(s.hireRequestData[14]==="Pending"||s.hireRequestData[14]==="Open")||e.$can("manage","nameRequests")&&s.hireRequestData[14]!=="Closed"&&s.hireRequestData[282]!=="Open"||e.$can("manage","projectRequests")&&!e.$can("read","hireRequests")&&s.hireRequestData[14]==="Pending"?(u(),y(De,{key:0,modelValue:s.actions,"onUpdate:modelValue":t[3]||(t[3]=b=>s.actions=b),square:"",color:"accent",icon:"keyboard_arrow_left",direction:"left",label:"Actions",padding:"sm"},{default:n(()=>[e.$can("manage","projectRequests")&&s.hireRequestData[14]==="Pending"?(u(),y(se,{key:0,label:"Add Classifications",color:"primary",icon:"add",onClick:t[0]||(t[0]=b=>s.showAddJobs=!0)})):C("",!0),e.$can("manage","nameRequests")&&(s.hireRequestData[14]==="Pending"||s.hireRequestData[14]==="Open")&&s.hireRequestData[282]!=="Open"?(u(),y(se,{key:1,label:"Add Names to Request",color:"accent",icon:"person_add",onClick:t[1]||(t[1]=b=>s.showAddNames=!0)})):C("",!0),e.$can("manage","projectRequests")&&(s.hireRequestData[14]==="Pending"||s.hireRequestData[14]==="Open")?(u(),y(se,{key:2,label:"Close Hire Request",color:"dark",icon:"cancel",onClick:t[2]||(t[2]=b=>s.cancelRequest=!0)})):C("",!0)]),_:1},8,["modelValue"])):C("",!0)]),_:1})):s.getUserType==="QuickBase User"?(u(),y(ee,{key:1,class:"q-pt-none",align:"right"},{default:n(()=>[o(De,{modelValue:s.actions,"onUpdate:modelValue":t[7]||(t[7]=b=>s.actions=b),square:"",color:"accent",icon:"keyboard_arrow_left",direction:"left",label:"Actions",padding:"sm"},{default:n(()=>[e.$can("manage","projectRequests")&&(s.hireRequestData[14]==="Open"||s.hireRequestData[14]==="Pending")?(u(),y(se,{key:0,label:"Add Classifications",color:"primary",icon:"add",onClick:t[4]||(t[4]=b=>s.showAddJobs=!0)})):C("",!0),e.$can("manage","nameRequests")&&(s.hireRequestData[14]==="Open"||s.hireRequestData[14]==="Pending")?(u(),y(se,{key:1,label:"Add Names to Request",color:"accent",icon:"person_add",onClick:t[5]||(t[5]=b=>s.showAddNames=!0)})):C("",!0),e.$can("manage","projectRequests")&&(s.hireRequestData[14]==="Open"||s.hireRequestData[14]==="Pending")?(u(),y(se,{key:2,label:"Close Hire Request",color:"dark",icon:"cancel",onClick:t[6]||(t[6]=b=>s.cancelRequest=!0)})):C("",!0)]),_:1},8,["modelValue"])]),_:1})):C("",!0)])])]),_:1})]),_:1}),m("div",os,[m("div",ls,[o(a,{details:s.details,title:"Details"},null,8,["details"])]),m("div",ns,[o(la,{class:"q-py-xs bg-info text-white shadow-2 rounded-borders",align:"left",modelValue:s.tab,"onUpdate:modelValue":t[8]||(t[8]=b=>s.tab=b),dense:"","indicator-color":"accent","outside-arrows":"","mobile-arrows":"","inline-label":""},{default:n(()=>[o(be,{name:0,label:"Classifications"}),o(be,{name:1,label:"Names"}),s.hireRequestData[14]!=="Pending"?(u(),y(be,{key:0,name:2,label:"Offers"})):C("",!0),s.hireRequestData[14]!=="Pending"?(u(),y(be,{key:1,name:3,label:"Pipeline"})):C("",!0)]),_:1},8,["modelValue"]),o(oa,{modelValue:s.tab,"onUpdate:modelValue":t[9]||(t[9]=b=>s.tab=b),animated:"",class:"q-px-none"},{default:n(()=>[o(pe,{class:"q-px-xs",name:0},{default:n(()=>[s.hireRequestData[3]?(u(),y(r,{key:0,data:s.hireRequestData},null,8,["data"])):C("",!0)]),_:1}),o(pe,{class:"q-px-xs",name:1},{default:n(()=>[o(l,{data:s.hireRequestData},null,8,["data"])]),_:1}),o(pe,{class:"q-px-xs",name:2},{default:n(()=>[o(V,{data:s.hireRequestData.offers},null,8,["data"])]),_:1}),o(pe,{class:"q-px-xs",name:3},{default:n(()=>[o(k,{request:s.hireRequestData},null,8,["request"])]),_:1})]),_:1},8,["modelValue"])])]),o(ge,{persistent:"",modelValue:s.showAddNames,"onUpdate:modelValue":t[11]||(t[11]=b=>s.showAddNames=b)},{default:n(()=>[o(X,{flat:"",style:{width:"500px"}},{default:n(()=>[o(O,{class:"q-pa-none"},{default:n(()=>[o(v,{onCloseNames:t[10]||(t[10]=b=>s.showAddNames=!1),onNamesAdded:s.namesAdded,request:s.hireRequestData},null,8,["onNamesAdded","request"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(ge,{persistent:"",modelValue:s.showAddJobs,"onUpdate:modelValue":t[13]||(t[13]=b=>s.showAddJobs=b)},{default:n(()=>[o(X,{flat:"",style:{width:"500px"}},{default:n(()=>[o(O,{class:"q-pa-none"},{default:n(()=>[o(R,{hideInstructions:!0,request:s.hireRequestData,onCloseJobs:t[12]||(t[12]=b=>s.showAddJobs=!1),onJobsAdded:s.jobsAdded,onJobUpdated:s.jobUpdated},null,8,["request","onJobsAdded","onJobUpdated"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):C("",!0),s.hireRequestData[3]?(u(),y(S,{key:1,request:s.hireRequestData,modelValue:s.cancelRequest,"onUpdate:modelValue":t[14]||(t[14]=b=>s.cancelRequest=b)},null,8,["request","modelValue"])):C("",!0)]),_:1})}var Zs=U(xt,[["render",rs]]);export{Zs as default};
