var Y=Object.defineProperty;var D=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var N=(e,a,s)=>a in e?Y(e,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[a]=s,k=(e,a)=>{for(var s in a||(a={}))Z.call(a,s)&&N(e,s,a[s]);if(D)for(var s of D(a))W.call(a,s)&&N(e,s,a[s]);return e};import{k as Q,_ as C,A as o,an as l,bi as n,bH as w,d as t,bI as O,ao as v,au as X,ab as _,G as T,bJ as x,aZ as p,bK as ee,B as b,aY as j,H as $,F as A,r as y,bL as te,bM as ae,bN as ne,w as V,bO as q,D as h,bk as oe}from"./index.c09bc2a4.js";import{Q as P,a as se}from"./QHeader.e6a725de.js";import{Q as re}from"./QMenu.f586b24f.js";import{Q as U}from"./QToolbar.1b1a4d4d.js";import{Q as ie}from"./QImg.a01c56cb.js";import{Q as K}from"./QList.be97f1ab.js";import{Q as le,a as ue}from"./QDrawer.8abf68c5.js";import{Q as me,a as pe}from"./QLayout.36d44aac.js";import{C as de}from"./ClosePopup.2ed49c71.js";import{Q as ce}from"./QItemLabel.3dafae5d.js";import{Q as fe}from"./QBadge.9eaacee4.js";import{M as ve,Q as ge}from"./MenuSubLink.8a9ac86e.js";import{u as ye}from"./use-quasar.e0cdf7ef.js";import{u as _e}from"./i18n.6b16a0d1.js";import{u as be,b as ke,q as H}from"./quickbase.3c094681.js";import{_ as he}from"./KioskLogin.14e6b9c5.js";import{_ as Me}from"./languageSelector.3b18b82c.js";import{_ as Se}from"./version.3c5b2f5a.js";import"./QResizeObserver.44f1d5bc.js";import"./position-engine.a348f403.js";import"./selection.6b3a67ea.js";import"./TouchPan.f84bf388.js";import"./touch.60582172.js";import"./QSlideTransition.d235f023.js";import"./_commonjsHelpers.a26ce4be.js";import"./dayjs.b00e5e8b.js";import"./index.7dbe61ef.js";import"./localForage.ff6a6a7e.js";import"./api.8270b409.js";import"./array.b3d67d73.js";import"./QSelect.c52b58d3.js";import"./QChip.9fb9a4d7.js";import"./rtl.cf9bbe47.js";const qe=Q({name:"MenuLink",props:{title:{type:String,required:!0},caption:{type:String,default:""},to:{type:Object,default:()=>({path:"",exact:!0})},icon:{type:String,default:""},mini:{type:Boolean,default:!1},subMenu:{type:Array,default:null},count:{type:Number,default:null}}});function we(e,a,s,u,g,d){return o(),l(x,{to:e.to,class:T(["rounded-borders bg-white",{"q-ma-sm":!e.mini,"q-ma-xs":e.mini}]),"active-class":e.mini?"brand-active-menu text-white":"brand-active-menu text-white q-py-md",exact:""},{default:n(()=>[e.icon?(o(),l(w,{key:0,avatar:""},{default:n(()=>[t(O,{name:e.icon},null,8,["name"])]),_:1})):v("",!0),t(w,null,{default:n(()=>[t(ce,null,{default:n(()=>[X(_(e.title),1)]),_:1})]),_:1}),e.count?(o(),l(w,{key:1,side:"",top:""},{default:n(()=>[t(fe,{color:"primary",label:e.count},null,8,["label"])]),_:1})):v("",!0)]),_:1},8,["to","class","active-class"])}var $e=C(qe,[["render",we]]);const Qe=Q({name:"MenuExpanded",components:{MenuSubLink:ve},props:{title:{type:String,required:!0},caption:{type:String,default:""},to:{type:Object,default:()=>({path:"",exact:!0})},icon:{type:String,default:""},mini:{type:Boolean,default:!1},subMenu:{type:Array,default:null}}});function Ce(e,a,s,u,g,d){const c=p("MenuSubLink");return o(),l(ge,{icon:e.icon,label:e.title,class:T(["rounded-borders bg-white",{"q-ma-sm":!e.mini,"q-ma-xs":e.mini}]),"active-class":"brand-active-menu text-white",exact:""},{default:n(()=>[t(ee),t(w,null,{default:n(()=>[t(K,null,{default:n(()=>[(o(!0),b(A,null,j(e.subMenu,m=>(o(),l(c,$({key:m},m,{mini:e.mini}),null,16,["mini"]))),128))]),_:1})]),_:1})]),_:1},8,["icon","label","class"])}var Le=C(Qe,[["render",Ce]]);const Ie=Q({name:"MenuNav",components:{MenuLink:$e,MenuExpanded:Le},props:{title:{type:String,required:!0},caption:{type:String,default:""},to:{type:Object,default:()=>({path:"",exact:!0})},icon:{type:String,default:""},mini:{type:Boolean,default:!1},subMenu:{type:Array,default:null}}});function Oe(e,a,s,u,g,d){const c=p("MenuLink"),m=p("MenuExpanded");return o(),b("div",null,[!e.subMenu&&e.to?(o(),l(c,$({key:0},k(k({},e.$props),e.$attrs),{mini:e.mini}),null,16,["mini"])):e.subMenu&&e.subMenu.length>0?(o(),l(m,$({key:1},k(k({},e.$props),e.$attrs),{mini:e.mini}),null,16,["mini"])):v("",!0)])}var Be=C(Ie,[["render",Oe]]);const Ee=Q({name:"MainLayout",components:{MenuNav:Be,kioskLogin:he,languageSelector:Me,version:Se},setup(){const e=ye(),{locale:a}=_e(),s=y(!1),u=y(!1),g=y(!1),d=y(!1),c=y(!1),m=te(),f=ae(),M=be(),S=ke(),{toolbarTitle:L}=S,{onKiosk:i,activeMenu:z,pageType:R,startPageEnabled:B,kioskActive:F,homeButtonEnabled:G}=ne(S),I=async r=>{await H.checkKioskStatus(r)||(c.value=!0)};if(i.value&&I(!0),f.query&&f.query.office_id){const r=Object.assign({},f.query);delete r.office_id,delete r.qr,m.replace({query:r})}V(F,r=>{!r&&i.value&&I()}),V(()=>f.query,async()=>{if(i.value&&I(!1),f.query.office_id){const r=Object.assign({},f.query);delete r.office_id,r.qr&&(H.checkInUser(),delete r.qr),m.replace({query:r})}});const E=async()=>{i.value&&(a.value="en-US"),M.logout().then(()=>{B.value&&i.value?m.replace({name:"start"}):m.replace({name:"login"})})},J=()=>{E()};return{tab:y("mails"),userStore:M,leftDrawerOpen:s,rightDrawerOpen:g,miniState:u,miniHover:d,kioskPrompt:c,onIdle:J,onKiosk:i,activeMenu:z,homeButtonEnabled:G,miniMouseOver(){u.value===!0&&(d.value=!1)},miniMouseOut(){u.value===!0&&(d.value=!0)},toggleLeftDrawer(){e.screen.gt.sm?(u.value=!u.value,u.value===!0&&(d.value=!0)):s.value=!s.value},toggleRightDrawer(){g.value=!g.value},drawerClick(r){u.value&&(u.value=!1,r.stopPropagation())},logout:E,toolbarTitle:L,pageType:R,startPageEnabled:B}}}),De={key:0,class:"q-mr-sm q-ml-sm",src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo-white.png",alt:"BrandSafway Logo",height:"25"},Ne={key:0},Ve={key:1},Pe={class:"q-gutter-sm row items-center no-wrap"},Ue={class:"row no-wrap q-pa-md"},He={class:"column items-center"},Te={class:"text-subtitle1 q-mt-md q-mb-xs"};function je(e,a,s,u,g,d){const c=p("languageSelector"),m=p("MenuNav"),f=p("router-view"),M=p("kioskLogin"),S=p("v-idle"),L=p("version");return o(),l(me,{view:"hHh lpR fFf"},{default:n(()=>[t(se,{elevated:""},{default:n(()=>[t(U,{style:{height:"62px"}},{default:n(()=>[t(q,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),e.$q.screen.gt.sm?(o(),b("img",De)):v("",!0),t(P,null,{default:n(()=>[e.$q.screen.lt.sm?(o(),b("span",Ne)):(o(),b("span",Ve,_(e.toolbarTitle),1))]),_:1}),h("div",Pe,[t(c,{dense:"",borderless:"",class:"lang-white"}),t(q,{flat:"",dense:"",color:"white"},{default:n(()=>[h("div",null,_(e.userStore.getUser[35])+" "+_(e.userStore.getUser[37]),1),t(O,{right:"",size:"2.2em",name:"account_circle"}),t(re,null,{default:n(()=>[h("div",Ue,[h("div",He,[t(O,{right:"",size:"72px",name:"account_circle",class:"q-mr-md"}),h("div",Te,_(e.userStore.getUser[35])+" "+_(e.userStore.getUser[37]),1),oe(t(q,{color:"primary",label:e.$t("logout"),push:"",size:"sm",onClick:e.logout},null,8,["label","onClick"]),[[de]])])])]),_:1})]),_:1})])]),_:1})]),_:1}),t(ue,{modelValue:e.leftDrawerOpen,"onUpdate:modelValue":a[0]||(a[0]=i=>e.leftDrawerOpen=i),side:"left","show-if-above":"",bordered:"",mini:e.miniState&&e.miniHover,onMouseover:e.miniMouseOver,onMouseout:e.miniMouseOut,onClickCapture:e.drawerClick,class:"text-primary bg-white"},{default:n(()=>[t(le,{class:"fit"},{default:n(()=>[e.$q.screen.lt.sm?(o(),l(U,{key:0,style:{height:"64px"}},{default:n(()=>[t(P,{class:"items-center"},{default:n(()=>[t(ie,{src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo.svg",style:{"max-width":"245px"},fit:"center",class:"q-ml-md"})]),_:1})]),_:1})):v("",!0),t(K,{class:"q-mt-sm"},{default:n(()=>[(o(!0),b(A,null,j(e.activeMenu,i=>(o(),l(m,$({key:i.title},i,{mini:e.miniState}),null,16,["mini"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue","mini","onMouseover","onMouseout","onClickCapture"]),t(pe,null,{default:n(()=>[t(f)]),_:1}),e.onKiosk?(o(),l(M,{key:0,modelValue:e.kioskPrompt,"onUpdate:modelValue":a[1]||(a[1]=i=>e.kioskPrompt=i)},null,8,["modelValue"])):v("",!0),e.onKiosk?(o(),l(S,{key:1,onIdle:e.onIdle,duration:300,style:{display:"none"}},null,8,["onIdle"])):v("",!0),e.onKiosk&&e.startPageEnabled&&e.homeButtonEnabled?(o(),l(q,{key:2,icon:"o_home",onClick:e.onIdle,class:"z-max home-button-main",size:"xl",ripple:!0},null,8,["onClick"])):v("",!0),t(L)]),_:1})}var St=C(Ee,[["render",je]]);export{St as default};
