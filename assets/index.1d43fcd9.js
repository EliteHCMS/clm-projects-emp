import{Q as S,a as R}from"./QHeader.e865b808.js";import{l as D,bL as E,_ as T,A as s,an as f,bi as t,d as o,cw as W,D as g,ab as d,B as _,ao as v,cy as B,bO as k,cz as O,r as c,bM as z,c as F,w as I,aZ as w,bI as q,bk as P,aY as j,H as G,F as X}from"./index.b48bafa3.js";import{Q as Y}from"./QMenu.c9ecf4aa.js";import{Q as M}from"./QToolbar.85ee1da8.js";import{Q as Z}from"./QImg.e25fa054.js";import{Q as J}from"./QList.fb685d10.js";import{Q as K,a as x}from"./QDrawer.abed54d4.js";import{a as ee,Q as oe}from"./QLayout.6583bbdf.js";import{C as te}from"./ClosePopup.74ef7f93.js";import{u as ae}from"./use-quasar.ed3977b0.js";import{u as se}from"./useQuerySaver.b8f46e72.js";import{u as re,b as ie,q as ne}from"./quickbase.76c41fac.js";import{u as H}from"./dataStore.beef04c5.js";import{_ as le}from"./version.c257fd93.js";import{M as me}from"./MenuNav.5192793d.js";import{_ as ue}from"./languageSelector.4b427af7.js";import"./workday.102c955e.js";import{a as pe}from"./syncEmployeeWithWorkday.1c71591d.js";import"./QResizeObserver.1d221316.js";import"./position-engine.859102af.js";import"./selection.880c234f.js";import"./TouchPan.ee842bb8.js";import"./touch.60582172.js";import"./_commonjsHelpers.a26ce4be.js";import"./dayjs.1b825f16.js";import"./index.7dbe61ef.js";import"./localForage.81a16957.js";import"./i18n.469ad19f.js";import"./api.004b0e8a.js";import"./QItemLabel.6755a8b9.js";import"./QBadge.14f24152.js";import"./MenuSubLink.20ea1a58.js";import"./QSlideTransition.009ab952.js";import"./QSelect.b8f07e1a.js";import"./QChip.a60f92f6.js";import"./rtl.cf9bbe47.js";import"./workdayAPI.2451b62c.js";const ce=D({props:{employee:Object,mini:Boolean},setup(e){const r=E(),{setEmployees:l,setWorkdayData:m,updateViewedEmployees:a}=H(),u=async()=>{const{clm:y,sync:n}=await pe({clm:e.employee});l({id:e.employee[3],data:y}),m({id:e.employee[3],data:n}),a({id:e.employee[3],dataset:"workday",data:n})},i=()=>{r.push({name:"ee-termination"})};return u(),{props:e,goToTermination:i}}}),de={class:"text-h5 text-white q-mb-sm"},fe={key:0,class:"text-body1 text-white"};function ye(e,r,l,m,a,u){return s(),f(O,{class:"bg-accent q-my-lg q-pt-none",flat:"",square:""},{default:t(()=>[o(W,{class:"text-center"},{default:t(()=>[g("div",de,d(e.employee[24]),1),e.employee[378]!==""?(s(),_("div",fe,"ID: "+d(e.employee[378]),1)):v("",!0)]),_:1}),e.$can("manage","employees")?(s(),f(B,{key:0,align:"center"},{default:t(()=>[e.$route.name!=="ee-termination"&&e.$route.name!=="view-ee-release"&&!e.employee[581]?(s(),f(k,{key:0,label:"Release",color:"primary",dense:"",onClick:e.goToTermination},null,8,["onClick"])):v("",!0)]),_:1})):v("",!0)]),_:1})}var ge=T(ce,[["render",ye]]);const ve=D({name:"View Employee",components:{MenuNav:me,version:le,languageSelector:ue,BasicEmployeeCard:ge},setup(){const e=c(null),r=c(!1),l=ae(),m=c(!1),a=c(!1),u=c(!1),i=c(!1),y=E(),n=z(),h=re(),{getUserType:$}=h,{toolbarTitle:p,viewEmployeeMenu:U}=ie(),{setEmployees:V,getEmployee:L}=H(),C=F(()=>L(n.params.id)),N=async()=>{const{state:b}=y.options.history;if(e.value=b.back,!C.value){l.loading.show();const{data:Q}=await ne.fetchFromHiringApp({fields:[se({type:"employee",query:`{'3'.EX.'${n.params.id}'}`,id:n.params.id})]},{action:"read",type:"employee"});V({id:Q[3],data:Q}),l.loading.hide()}},A=async()=>{h.logout().then(()=>{y.replace({name:"login"})})};return N(),I(C,(b,Q)=>{}),{tab:c("mails"),fab:r,userStore:h,leftDrawerOpen:m,rightDrawerOpen:u,miniState:a,miniHover:i,miniMouseOver(){a.value===!0&&(i.value=!1)},miniMouseOut(){a.value===!0&&(i.value=!0)},toggleLeftDrawer(){l.screen.gt.sm?(a.value=!a.value,a.value===!0&&(i.value=!0)):m.value=!m.value},toggleRightDrawer(){u.value=!u.value},drawerClick(b){a.value&&(a.value=!1,b.stopPropagation())},logout:A,toolbarTitle:p,viewEmployeeMenu:U,employee:C,getUserType:$,opener:e,closeWindow(){window.close()}}}}),he={key:0,class:"q-mr-sm q-ml-sm",src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo-white.png",alt:"BrandSafway Logo",height:"25"},we={key:0},_e={key:1},be={class:"q-gutter-sm row items-center no-wrap"},ke={class:"row no-wrap q-pa-md"},$e={class:"column items-center"},Ce={class:"text-subtitle1 q-mt-md q-mb-xs"};function Qe(e,r,l,m,a,u){const i=w("languageSelector"),y=w("basic-employee-card"),n=w("MenuNav"),h=w("router-view"),$=w("version");return s(),f(oe,{view:"hHh lpR fFf"},{default:t(()=>[o(R,{elevated:""},{default:t(()=>[o(M,{style:{height:"62px"}},{default:t(()=>[e.$q.screen.gt.sm?(s(),_("img",he)):v("",!0),o(S,null,{default:t(()=>[e.$q.screen.lt.sm?(s(),_("span",we)):(s(),_("span",_e,d(e.toolbarTitle),1))]),_:1}),g("div",be,[o(i,{dense:"",borderless:"",class:"lang-white"}),o(k,{flat:"",dense:"",color:"white"},{default:t(()=>[g("div",null,d(e.userStore.getUser[35])+" "+d(e.userStore.getUser[37]),1),o(q,{right:"",size:"2.2em",name:"account_circle"}),o(Y,null,{default:t(()=>[g("div",ke,[g("div",$e,[o(q,{right:"",size:"72px",name:"account_circle",class:"q-mr-md"}),g("div",Ce,d(e.userStore.getUser[35])+" "+d(e.userStore.getUser[37]),1),P(o(k,{color:"primary",label:e.$t("logout"),push:"",size:"sm",onClick:e.logout},null,8,["label","onClick"]),[[te]])])])]),_:1})]),_:1})])]),_:1})]),_:1}),o(x,{modelValue:e.leftDrawerOpen,"onUpdate:modelValue":r[0]||(r[0]=p=>e.leftDrawerOpen=p),side:"left","show-if-above":"",bordered:"",mini:e.miniState&&e.miniHover,onMouseover:e.miniMouseOver,onMouseout:e.miniMouseOut,onClickCapture:e.drawerClick,class:"text-primary bg-accent print-hide"},{default:t(()=>[o(K,{class:"fit"},{default:t(()=>[e.$q.screen.lt.sm?(s(),f(M,{key:0,class:"bg-white",style:{height:"64px"}},{default:t(()=>[o(S,{class:"items-center"},{default:t(()=>[o(Z,{src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo.svg",style:{"max-width":"245px"},fit:"center",class:"q-ml-md"})]),_:1})]),_:1})):v("",!0),e.employee?(s(),f(y,{key:1,employee:e.employee,mini:e.miniState},null,8,["employee","mini"])):v("",!0),o(J,{class:"q-mt-sm"},{default:t(()=>[(s(!0),_(X,null,j(e.viewEmployeeMenu,p=>(s(),f(n,G({key:p.title},p,{mini:e.miniState}),null,16,["mini"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue","mini","onMouseover","onMouseout","onClickCapture"]),o(ee,null,{default:t(()=>[o(O,{class:"print-hide",flat:""},{default:t(()=>[o(B,{class:"q-pb-xs",align:"right"},{default:t(()=>[o(k,{icon:"close",label:"Close",color:"dark",onClick:r[1]||(r[1]=p=>e.getUserType==="QuickBase User"?e.closeWindow():e.$router.replace({path:e.opener?e.opener:"/"}))})]),_:1})]),_:1}),o(h)]),_:1}),o($)]),_:1})}var mo=T(ve,[["render",Qe]]);export{mo as default};
