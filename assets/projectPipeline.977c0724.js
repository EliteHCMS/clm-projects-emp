import{l as x,c as g,_ as C,A as I,an as N,bi as d,d as l,cw as Y,D as a,au as M,ab as b,bK as S,cz as k,r as B,y as Q,aZ as T,B as j,bI as O,bO as q,G as z}from"./index.0dddbf49.js";import{Q as L}from"./QInnerLoading.220f2c4b.js";import{a as V}from"./QTable.8a4ac7c4.js";import{u as w}from"./use-quasar.f362f467.js";import{e as J}from"./export-file.eb604dd4.js";import{dayjs as y}from"./dayjs.b650d6a4.js";const E=x({name:"Pipeline Summary",components:{},props:{pipeline:Array},setup(t,f){const i=g(()=>t.pipeline.filter(r=>r.type==="In Process"||r.type==="Dispatch")),n=g(()=>t.pipeline.filter(r=>r.type==="Deployed"&&r[20]==="In Process")),m=g(()=>i.value.length+n.value.length);return{props:t,inProcess:i,deployed:n,total:m}}}),G=a("div",{class:"text-body1 text-primary"},"Summary",-1),K={class:"text-body2"},R=a("span",{class:"q-mr-md"},"In Process:",-1),Z=a("span",null,null,-1),F={class:"text-body2"},H=a("span",{class:"q-mr-md"},"Deployed:",-1),U={class:"text-body2"},W=a("span",{class:"q-mr-md"},"Total:",-1);function X(t,f,i,n,m,p){return I(),N(k,null,{default:d(()=>[l(Y,{class:"q-pb-xs"},{default:d(()=>[G]),_:1}),l(Y,{class:"text-right q-pt-xs"},{default:d(()=>[a("div",K,[R,M(b(t.inProcess.length),1),Z]),a("div",F,[H,a("span",null,b(t.deployed.length),1)]),l(S,{color:"primary",class:"q-my-sm"}),a("div",U,[W,a("span",null,b(t.total),1)])]),_:1})]),_:1})}var ee=C(E,[["render",X]]);const te=x({name:"Pipeline Table",components:{PipelineSummary:ee},props:{rows:Array,selected:Array},setup(t,f){const i=w(),{capitalize:n}=Q,m=B(!1),p=g(()=>i.screen.gt.sm?[{name:1,label:"Name",align:"left",field:e=>r(e.employee),format:e=>`${e}`,sortable:!0},{name:7,label:"Status",align:"left",field:e=>c(e),format:e=>`${e}`,sortable:!0,sortOrder:"ad"},{name:2,label:"Offer Date",align:"left",field:e=>$(e),format:e=>`${y(e).format("MM/DD/YYYY")}`,sortable:!0},{name:4,label:"Classification",align:"left",field:e=>h(e),format:e=>`${!e||e===""?"Not Assigned":e}`,sortable:!0},{name:5,label:"Job #",align:"left",field:e=>D(e),format:e=>`${e===""||!e?"Not Assigned":e}`,sortable:!0},{name:6,label:"Arrival Date",align:"left",field:e=>_(e),format:e=>`${e?y(e).format("MM/DD/YYYY"):"TBD"}`,sortable:!0}]:[{name:1,label:"Name",align:"left",field:e=>r(e.employee),format:e=>`${e}`,sortable:!0},{name:7,label:"Status",align:"left",field:e=>c(e),format:e=>`${e}`,sortable:!0,sortOrder:"ad"},{name:2,label:"Offer Date",align:"left",field:e=>$(e),format:e=>`${y(e).format("MM/DD/YYYY")}`,sortable:!0},{name:4,label:"Classification",align:"left",field:e=>h(e),format:e=>`${!e||e===""?"Not Assigned":e}`,sortable:!0},{name:5,label:"Job #",align:"left",field:e=>D(e),format:e=>`${e===""||!e?"Not Assigned":e}`,sortable:!0},{name:6,label:"Arrival Date",align:"left",field:e=>_(e),format:e=>`${e?y(e).format("MM/DD/YYYY"):"TBD"}`,sortable:!0}]),r=e=>{const u=e[20]!==""?n(e[20].toLowerCase().trim()):"",o=e[22]!==""?n(e[22].toLowerCase().trim()):"",s=e[21]!==""?` ${n(e[21].toLowerCase().trim())}`:"",A=e[23]!==""?` ${n(e[23])}`:"";return`${o}${A}, ${u}${s}`};function c(e){if(e.type==="In Process")return"In Process";if(e.type==="Dispatch")return"In Process";if(e.type==="Deployed")return"Deployed"}function $(e){if(e.type==="In Process")return e[197].$d;if(e.type==="Dispatch")return e[165].$d;if(e.type==="Deployed")return e[144].$d}function h(e){if(e.type==="In Process")return e[106];if(e.type==="Dispatch")return e[45];if(e.type==="Deployed")return e[45]}function D(e){if(e.type==="In Process")return e[44];if(e.type==="Dispatch")return e[63];if(e.type==="Deployed")return e[85]}function _(e){if(e.type==="In Process")return null;if(e.type==="Dispatch")return null;if(e.type==="Deployed")return e[33].$d}function v(){const e=[p.value.map(o=>P(o.label))].concat(t.rows.value.map(o=>p.value.map(s=>P(typeof s.field=="function"?s.field(o):o[s.field===void 0?s.name:s.field],s.format,o)).join(","))).join(`\r
`);J(`${y().format("MM.DD.YYYY")} Project-Pipeline-Export.csv`,e,"text/csv")!==!0&&i.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}function P(e,u,o){let s=u!==void 0?u(e,o):e;return s=s==null?"":String(s),s=s.split('"').join('""'),`"${s}"`}return{columns:p,props:t,loading:m,exportPipeline:v}}}),se={class:"q-px-sm"},ae={class:"row"},re={class:"col-12 col-md-10 q-px-xs"},ne={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function oe(t,f,i,n,m,p){const r=T("pipeline-summary");return I(),j("div",se,[a("div",ae,[a("div",re,[l(V,{dense:"",columns:t.columns,rows:t.props.rows,"row-key":c=>c[3],class:"q-pa-sm",pagination:{rowsPerPage:t.$q.screen.gt.sm?25:100},separator:"vertical","table-header-class":"bg-dark text-white","no-data-label":"There is no one in the pipeline",loading:t.loading,grid:t.$q.screen.lt.md},{"no-data":d(({message:c})=>[a("div",ne,[l(O,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),a("span",null,b(c),1)])]),"top-right":d(()=>[l(q,{color:"secondary",flat:"","icon-right":"refresh",label:"Refresh",onClick:f[0]||(f[0]=c=>t.$emit("refresh"))}),l(q,{dense:t.$q.screen.lt.md,color:"primary",label:"Download",onClick:t.exportPipeline,disable:t.props.rows.length<1},null,8,["dense","onClick","disable"])]),loading:d(()=>[l(L,{showing:"",color:"primary"})]),_:1},8,["columns","rows","row-key","pagination","loading","grid"])]),a("div",{class:z(t.$q.screen.lt.md?"col-12 q-px-xs q-mt-sm order-first":"col-2 q-px-xs")},[l(r,{pipeline:t.props.rows},null,8,["pipeline"])],2)])])}var me=C(te,[["render",oe]]);export{me as P};
