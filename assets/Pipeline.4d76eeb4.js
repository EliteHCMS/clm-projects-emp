import{Q as C}from"./QPage.80490d1d.js";import{k as j,c1 as v,c as b,_ as P,z as q,A as M,C as t,d as r,bh as n,aa as i,c6 as N,bX as Q,E as k,c2 as y,b$ as A,c3 as T,aU as B,aS as I,aY as J,am as O}from"./index.6c674a19.js";import{Q as F}from"./QTable.5a1eb1d4.js";import{u as z}from"./use-quasar.4e60ec94.js";import{O as x,b as D,J as g}from"./quickbase.c9a9fc75.js";import{e as E}from"./export-file.6b95af49.js";import{dayjs as V}from"./dayjs.69e964e9.js";import"./QList.76fc6ce7.js";import"./QMarkupTable.9a5d9dcd.js";import"./QSelect.fdd46d88.js";import"./QChip.6c6d3173.js";import"./QMenu.b7fb2919.js";import"./position-engine.703db134.js";import"./selection.7761caf6.js";import"./rtl.a367ced8.js";import"./use-fullscreen.f7d9f446.js";import"./_commonjsHelpers.dfee5925.js";import"./localForage.7e70884e.js";import"./index.7dbe61ef.js";import"./i18n.8e2a8376.js";import"./api.51f82bf2.js";const h=[{name:1,label:"Name",align:"left",field:e=>e.map.name,format:e=>`${e}`,sortable:!0},{name:7,label:"Status",align:"left",field:e=>e.map.status,format:e=>`${e}`,sortable:!0,sortOrder:"ad"},{name:2,label:"Offer Date",align:"left",field:e=>e.map.offerDate,format:e=>`${g.formatDate(e,"MM/DD/YYYY")}`,sortable:!0},{name:4,label:"Classification",align:"left",field:e=>e.map.fullJob,format:e=>`${!e||e===""?"Not Assigned":e}`,sortable:!0},{name:5,label:"Job #",align:"left",field:e=>e.map.jobNumber,format:e=>`${e===""||!e?"Not Assigned":e}`,sortable:!0},{name:6,label:"Arrival Date",align:"left",field:e=>e.map.start,format:e=>`${e?g.formatDate(e,"MM/DD/YYYY"):"TBD"}`,sortable:!0}],R=[{name:1,label:"Name",align:"left",field:e=>e.map.name,format:e=>`${e}`,sortable:!0},{name:7,label:"Status",align:"left",field:e=>e.map.status,format:e=>`${e}`,sortable:!0,sortOrder:"ad"},{name:2,label:"Offer Date",align:"left",field:e=>e.map.offerDate,format:e=>`${g.formatDate(e,"MM/DD/YYYY")}`,sortable:!0},{name:4,label:"Classification",align:"left",field:e=>e.map.fullJob,format:e=>`${!e||e===""?"Not Assigned":e}`,sortable:!0},{name:5,label:"Job #",align:"left",field:e=>e.map.jobNumber,format:e=>`${e===""||!e?"Not Assigned":e}`,sortable:!0},{name:6,label:"Arrival Date",align:"left",field:e=>e.map.start,format:e=>`${e?g.formatDate(e,"MM/DD/YYYY"):"TBD"}`,sortable:!0}],H=j({name:"Pipeline Table",components:{},setup(){const e=z(),m=x(),p=D(),{pipelineForProject:f}=v(m),o=f,{active:u}=v(D()),d=b(()=>o.value.filter(s=>s.map.status==="In Process")),Y=b(()=>o.value.filter(s=>s.map.status==="Deployed")),w=b(()=>o.value.filter(s=>s.status==="Arrived")),S=b(()=>e.screen.lt.md?100:o.value.length>=25?Math.round(o.value.length/5):10);function $(s,_,l){let a=_!==void 0?_(s,l):s;return a=a==null?"":String(a),a=a.split('"').join('""'),`"${a}"`}return{columns:h,mobileColumns:R,rows:o,initialPagination:{rowsPerPage:S},separator:"vertical",projectStore:p,pipelineForProject:f,inProcess:d,deployed:Y,arrived:w,active:u,exportPipeline(){const s=[h.map(l=>$(l.label))].concat(o.value.map(l=>h.map(a=>$(typeof a.field=="function"?a.field(l):l[a.field===void 0?a.name:a.field],a.format,l)).join(","))).join(`\r
`);E(`${V().format("MM.DD.YYYY")} ${u.value[20]} Project-Pipeline-Export.csv`,s,"text/csv")!==!0&&e.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}}}}),c=e=>(B("data-v-3dd584d5"),e=e(),I(),e),U={class:"q-px-sm"},X={class:"row"},G={class:"col-12 col-md-10 q-px-xs"},K={class:"text-dark text-caption text-italic"},L={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"},W=c(()=>t("div",{class:"text-body1 text-primary"},"Summary",-1)),Z={class:"text-body2"},ee=c(()=>t("span",{class:"q-mr-md"},"In Process:",-1)),te={class:"text-body2"},ae=c(()=>t("span",{class:"q-mr-md"},"Deployed:",-1)),se={class:"text-body2"},oe=c(()=>t("span",{class:"q-mr-md"},"Arrived:",-1)),re={class:"text-body2"},le=c(()=>t("span",{class:"q-mr-md"},"Total:",-1));function ie(e,m,p,f,o,u){return q(),M("div",U,[t("div",X,[t("div",G,[r(F,{"title-class":e.$q.screen.gt.sm?"text-primary text-h6":"text-primary text-body1",title:e.$q.screen.lt.sm?"Pipeline":`Staffing Pipeline for ${e.active[20]}`,columns:e.$q.screen.lt.md?e.mobileColumns:e.columns,rows:e.rows,"row-key":"3",class:"q-pa-sm",pagination:e.initialPagination,separator:"vertical","table-header-class":"bg-dark text-white","no-data-label":`There is no one in the pipeline for ${e.active[20]}`,grid:e.$q.screen.lt.sm},{"top-right":n(()=>[t("div",K,"(Total: "+i(e.pipelineForProject.length)+" in pipeline)",1),r(N,{dense:e.$q.screen.lt.md,class:"q-ml-sm",color:"primary",label:"Download",onClick:e.exportPipeline,disable:e.pipelineForProject.length<1},null,8,["dense","onClick","disable"])]),"no-data":n(({message:d})=>[t("div",L,[r(Q,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),t("span",null,i(d),1)])]),_:1},8,["title-class","title","columns","rows","pagination","no-data-label","grid"])]),t("div",{class:k(e.$q.screen.lt.md?"col-12 q-px-xs q-mt-sm order-first":"col-2 q-px-xs")},[r(T,null,{default:n(()=>[r(y,{class:"q-pb-xs"},{default:n(()=>[W]),_:1}),r(y,{class:"text-right q-pt-xs"},{default:n(()=>[t("div",Z,[ee,t("span",null,i(e.inProcess.length),1)]),t("div",te,[ae,t("span",null,i(e.deployed.length),1)]),t("div",se,[oe,t("span",null,i(e.arrived.length),1)]),r(A,{color:"primary",class:"q-my-sm"}),t("div",re,[le,t("span",null,i(e.pipelineForProject.length),1)])]),_:1})]),_:1})],2)])])}var ne=P(H,[["render",ie],["__scopeId","data-v-3dd584d5"]]);const me={name:"Pipeline",components:{pipelineTable:ne},setup(){const{getInProcesses:e,getDispatches:m,getDeployments:p}=x();return e(),m(),p(),{}}};function pe(e,m,p,f,o,u){const d=J("pipeline-table");return q(),O(C,{style:{"max-width":"100vw"}},{default:n(()=>[r(d)]),_:1})}var Ne=P(me,[["render",pe]]);export{Ne as default};
