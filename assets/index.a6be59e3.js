import{Q as y}from"./QTd.dedd95b0.js";import{Q as N}from"./QTable.140ac019.js";import{c1 as p,aK as k,z as I,am as T,G as Q,a6 as c,r as u,w as x,c as b,A,d,bh as _,C as g,aa as S}from"./index.be20b90c.js";import{u as D,r as w}from"./quickbase.e729000e.js";import{a as P}from"./QSelect.6acc062e.js";import{dayjs as U}from"./dayjs.89050af1.js";import"./QList.c26099f5.js";import"./QMarkupTable.bfc7499f.js";import"./use-fullscreen.48c4f684.js";import"./_commonjsHelpers.dfee5925.js";import"./localForage.ee205151.js";import"./index.7dbe61ef.js";import"./i18n.01339855.js";import"./api.8ea9d2ce.js";import"./QChip.d4319da2.js";import"./QMenu.86467064.js";import"./position-engine.55292db2.js";import"./selection.71f4163a.js";import"./rtl.65b79c69.js";const V={__name:"officeSelector",setup(C){const s=D(),o=w(),{userOffices:r,primaryOffice:n}=p(s),{setSelectedOffice:e}=o,{getSelectedOffice:a}=p(o);k(()=>{e(n.value)}),a.value||e(n.value);const i=t=>{e(t)};return(t,v)=>(I(),T(P,Q({"model-value":c(a),options:c(r)},t.$attrs,{"onUpdate:modelValue":i,label:"Office","option-label":"11","option-value":"8",clearable:""}),null,16,["model-value","options"]))}},$={class:"q-pa-md"},le={__name:"index",setup(C){const s=w(),{fetchSelfCheckIns:o,fetchAllSelfCheckIns:r}=s,{getSelfCheckIns:n,getSelectedOffice:e}=p(s),a=u(e.value?e.value[8]:null),i=u({sortBy:"13",descending:!1,rowsPerPage:100});a.value?(o({officeId:a.value}),fetch({action:"Self Check-Ins"})):r(),x(e,()=>{a.value=e.value?e.value[8]:null,a.value?o({officeId:a.value}):r()});const t=u(new Date),v=setInterval(()=>{t.value=new Date},1e3);k(()=>{clearInterval(v)});const B=[{name:"timeCheckIn",align:"left",label:"Time Check-In",field:"13",sortable:!1},{name:"name",align:"left",label:"Name",field:"17",sortable:!1},{name:"phoneNumber",align:"center",label:"Phone Number",field:"6",sortable:!1},{name:"reason",align:"center",label:"Reason",field:"10",sortable:!1},{name:"status",align:"center",label:"Status",field:"15",sortable:!1},{name:"task",align:"center",label:"Task",field:"27",sortable:!1}],h=b(()=>n.value(a.value).sort((l,f)=>i.value.descending?l[13].isBefore(f[13]):l[13].isAfter(f[13]))),O=b(()=>h.value.map(l=>U(t.value).to(l[13])));return(l,f)=>(I(),A("div",$,[d(V),d(N,{dense:l.$q.screen.lt.md,title:"Self Check Ins",rows:c(h),columns:B,pagination:i.value,"row-key":"3"},{"body-cell-timeCheckIn":_(m=>[d(y,{props:m},{default:_(()=>[g("div",null,S(m.value.format("h:mm:ss A")),1),g("div",null,S(c(O)[m.rowIndex]),1)]),_:2},1032,["props"])]),_:1},8,["dense","rows","pagination"])]))}};export{le as default};
