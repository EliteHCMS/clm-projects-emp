import{Q as C}from"./QTd.a5677bd1.js";import{h as p,bX as z,d6 as Q,d7 as A,l as D,r as E,w as M,_ as L,A as m,B as f,d as l,br as s,ax as b,bW as v,ar as g,c as R,y as B,b5 as V,D as _,bQ as G,ac as I}from"./index.4017ca31.js";import{a as P}from"./QTable.cf3c1214.js";import{u as T}from"./use-quasar.5edd4060.js";import{dayjs as N}from"./dayjs.01a1f0cd.js";import{Q as w}from"./QTooltip.1e7f358f.js";import{q as k}from"./quickbase.4804bb81.js";import{u as S}from"./useQuerySaver.d29ff9ee.js";import{workday as X}from"./workday.bdde527e.js";import{a as Y,s as F}from"./syncEmployeeWithWorkday.31215d0e.js";import{u as H}from"./dataStore.0038134c.js";const W=[p("g",{transform:"translate(-20,-20)"},[p("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[p("animateTransform",{attributeName:"transform",type:"rotate",from:"90 50 50",to:"0 50 50",dur:"1s",repeatCount:"indefinite"})])]),p("g",{transform:"translate(20,20) rotate(15 50 50)"},[p("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[p("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"90 50 50",dur:"1s",repeatCount:"indefinite"})])])];var j=z({name:"QSpinnerGears",props:Q,setup(t){const{cSize:o,classes:c}=A(t);return()=>p("svg",{class:c.value,width:o.value,height:o.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},W)}});const J=D({emits:["viewEmployee"],props:{data:Object,type:String,query:String},setup(t){const o=T(),{getEmployee:c,setEmployees:u}=H(),a=E(null),d=E(!0);async function i(){if(t.data[39]&&t.data[39]!==""){if(c(t.data[39]))a.value=c([t.data[39]]);else{const{data:n}=await k.fetchFromHiringApp({fields:[S({type:t.type,query:`{'3'.EX.'${t.data[39]}'}`})]});a.value=n[0],u({id:a.value[3],data:a.value})}d.value=!1}else{const{data:n}=await k.fetchFromHiringApp({fields:[S({type:t.type,query:t.query})]});d.value=!1,n.length>0&&(n.length===1?a.value=n[0]:a.value=n.find(e=>e[24].toLowerCase().includes(t.data.firstName)||e[24].toLowerCase().includes(t.data.lastName)?e:null)),a.value&&(k.upsertRecordsXML({to:"bsg4yb4wa",data:[{3:{value:t.data[3]},39:{value:a.value[3]}}],fieldsToReturn:[3]}),u({id:a.value[3],data:a.value}))}}M(a,async n=>{if(n[408]==="Active"&&n[378]&&n[378]!==""&&!n[207]){const e={workerId:n[378]},{data:q}=await X.getWorker(e);let y,$=null;if(q.length>0?y=q[0]:y=null,y){const h=await Y({workday:y,clm:a.value});h.employmentData?$=h.employmentData.workerStatus.active:$=h.sync.employmentData.workerStatus.active}y&&!$&&(a.value=await F({workday:y,clm:a.value}))}});const r=()=>{o.notify({type:"negative",message:"This feature is not ready yet."})};return i(),{record:a,loading:d,viewEmployee:r}}}),O={key:0},K={key:1},U={key:0},Z={key:1},x={key:2},ee={key:3};function te(t,o,c,u,a,d){return m(),f("div",null,[t.loading?(m(),f("div",O,[l(j,{size:"2em",color:"info"})])):(m(),f("div",K,[t.record&&(t.record[408]===""||t.record[408]==="Terminated")&&t.record[421]?(m(),f("div",U,[l(v,{class:"table-button",size:"xs",color:"positive",label:"Available",onClick:o[0]||(o[0]=i=>t.$emit("viewEmployee",t.record))},{default:s(()=>[l(w,{anchor:"center left",self:"center end",class:"bg-positive"},{default:s(()=>[b("Click to view this employee.")]),_:1})]),_:1})])):g("",!0),t.record&&t.record[408]==="Terminated"&&!t.record[421]?(m(),f("div",Z,[l(v,{class:"table-button",size:"xs",color:"negative",label:"Not Eligible",onClick:o[1]||(o[1]=i=>t.$emit("viewEmployee",t.record))},{default:s(()=>[l(w,{anchor:"center left",self:"center end",class:"bg-negative"},{default:s(()=>[b("Click to view this employee.")]),_:1})]),_:1})])):g("",!0),t.record&&t.record[408]==="Active"?(m(),f("div",x,[l(v,{class:"table-button",size:"xs",color:"accent",label:"Active Employee",onClick:o[2]||(o[2]=i=>t.$emit("viewEmployee",t.record))},{default:s(()=>[l(w,{anchor:"center left",self:"center end",class:"bg-accent"},{default:s(()=>[b("Click to view this employee.")]),_:1})]),_:1})])):g("",!0),t.record?g("",!0):(m(),f("div",ee,[l(v,{class:"table-button",disable:"",size:"xs",color:"info",label:"Nothing Found"},{default:s(()=>[l(w,{anchor:"center left",self:"center end",class:"bg-info"},{default:s(()=>[b("No employee to view.")]),_:1})]),_:1})]))]))])}var ae=L(J,[["render",te],["__scopeId","data-v-06ce7486"]]);const le=D({emits:["refreshData","viewEmployee"],props:{requests:Array,status:String,loading:Boolean},components:{GetEmployee:ae},setup(t,{emit:o}){const c=T(),{capitalize:u}=B,a=R(()=>c.screen.gt.sm?[{name:0,label:"",align:"left",field:""},{name:1,label:"Request ID",align:"left",field:e=>e[18],format:e=>`${e}`,sortable:!1,required:!0},{name:2,label:"Created",align:"left",field:e=>e[1],format:e=>`${r(e)}`,sortable:!0},{name:3,label:"Name",align:"left",field:e=>d(e),format:e=>`${e}`,sortable:!0},{name:4,label:"Phone",align:"left",field:e=>e[8],format:e=>`${e}`,sortable:!1,required:!0},{name:7,label:"Job",align:"left",field:e=>e[24],format:e=>`${e}`},{name:5,label:"Status",align:"left",field:e=>i(e),format:e=>`${e}`},{name:6,label:"",align:"center",field:""}]:[{name:0,label:"",align:"left",field:""},{name:1,label:"Request ID",align:"left",field:e=>e[18],format:e=>`${e}`,sortable:!1,required:!0},{name:2,label:"Created",align:"left",field:e=>e[1],format:e=>`${r(e)}`,sortable:!0},{name:3,label:"Name",align:"left",field:e=>d(e),format:e=>`${e}`,sortable:!0},{name:4,label:"Phone",align:"left",field:e=>e[8],format:e=>`${e}`,sortable:!1,required:!0},{name:7,label:"Job",align:"left",field:e=>e[24],format:e=>`${e}`},{name:5,label:"Status",align:"left",field:e=>i(e),format:e=>`${e}`},{name:6,label:"",align:"center",field:""}]);function d(e){return`${u(e[6].toLowerCase())} ${u(e[7].toLowerCase())}`}function i(e){return e.employee[0]===void 0?e[10]:e.employee[0][408]==="Terminated"&&!e.employee[0][421]?"Not Eligible":e.employee[0][552]===""?e[10]:e.employee[0][552]}function r(e){if(e.$d)return N(e.$d).fromNow();if(e.date)return N(e.date,"MM-DD-YYYY").fromNow()}return{columns:a,props:t,viewEmployee:e=>{o("viewEmployee",e)}}}}),oe={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function re(t,o,c,u,a,d){const i=V("get-employee");return m(),f("div",null,[l(P,{columns:t.columns,rows:t.requests,"row-key":r=>r[3],class:"q-pa-sm",pagination:{rowsPerPage:10},"table-header-class":"bg-dark text-white","no-data-label":"There are no named requests",dense:"",loading:t.loading},{"header-cell-0":s(()=>[l(C,{"auto-width":""})]),"body-cell-0":s(r=>[l(C,{class:"text-center","auto-width":""},{default:s(()=>[l(i,{data:r.row,onViewEmployee:t.viewEmployee,type:"employee",query:`{'27'.EX.'${r.row[29]}'}AND{'551'.EX.'${r.row[16]}'}`},null,8,["data","onViewEmployee","query"])]),_:2},1024)]),"body-cell-6":s(r=>[l(C,{class:"text-center","auto-width":""},{default:s(()=>[l(v,{class:"q-pa-none q-ma-none",flat:"",color:"primary",round:"",dense:"",onClick:n=>t.$emit("removeName",r.row),icon:"delete_forever"},null,8,["onClick"])]),_:2},1024)]),"no-data":s(({message:r})=>[_("div",oe,[l(G,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),_("span",null,I(r),1)])]),"top-right":s(()=>[l(v,{color:"secondary",flat:"","icon-right":"refresh",label:"Refresh",onClick:o[0]||(o[0]=r=>t.$emit("refreshData"))})]),_:1},8,["columns","rows","row-key","loading"])])}var be=L(le,[["render",re]]);export{be as N};
