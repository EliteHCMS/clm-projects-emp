var z=Object.defineProperty,E=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var _=(e,o,l)=>o in e?z(e,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[o]=l,S=(e,o)=>{for(var l in o||(o={}))P.call(o,l)&&_(e,l,o[l]);if(B)for(var l of B(o))Q.call(o,l)&&_(e,l,o[l]);return e},C=(e,o)=>E(e,N(o));import{bP as j,cW as D,cN as K,cX as O,dm as W,r as X,c as v,aM as G,h as $,ch as J,bI as Y,g as Z,dn as T,cd as p,cb as x}from"./index.61fe6e1c.js";import"./index.7dbe61ef.js";import{q as ee}from"./quickbase.7f66a5fd.js";var re=j({name:"QRating",props:C(S(S({},D),K),{modelValue:{type:Number,required:!0},max:{type:[String,Number],default:5},icon:[String,Array],iconHalf:[String,Array],iconSelected:[String,Array],iconAriaLabel:[String,Array],color:[String,Array],colorHalf:[String,Array],colorSelected:[String,Array],noReset:Boolean,noDimming:Boolean,readonly:Boolean,disable:Boolean}),emits:["update:modelValue"],setup(e,{slots:o,emit:l}){const{proxy:{$q:r}}=Z(),b=O(e),y=W(e),h=T(y),c=X(0);let u={};const d=v(()=>e.readonly!==!0&&e.disable!==!0),I=v(()=>`q-rating row inline items-center q-rating--${d.value===!0?"":"non-"}editable`+(e.noDimming===!0?" q-rating--no-dimming":"")+(e.disable===!0?" disabled":"")+(e.color!==void 0&&Array.isArray(e.color)===!1?` text-${e.color}`:"")),g=v(()=>{const a=Array.isArray(e.icon)===!0?e.icon.length:0,n=Array.isArray(e.iconSelected)===!0?e.iconSelected.length:0,i=Array.isArray(e.iconHalf)===!0?e.iconHalf.length:0,f=Array.isArray(e.color)===!0?e.color.length:0,m=Array.isArray(e.colorSelected)===!0?e.colorSelected.length:0,t=Array.isArray(e.colorHalf)===!0?e.colorHalf.length:0;return{iconLen:a,icon:a>0?e.icon[a-1]:e.icon,selIconLen:n,selIcon:n>0?e.iconSelected[n-1]:e.iconSelected,halfIconLen:i,halfIcon:i>0?e.iconHalf[n-1]:e.iconHalf,colorLen:f,color:f>0?e.color[f-1]:e.color,selColorLen:m,selColor:m>0?e.colorSelected[m-1]:e.colorSelected,halfColorLen:t,halfColor:t>0?e.colorHalf[t-1]:e.colorHalf}}),L=v(()=>{if(typeof e.iconAriaLabel=="string"){const a=e.iconAriaLabel.length>0?`${e.iconAriaLabel} `:"";return n=>`${a}${n}`}if(Array.isArray(e.iconAriaLabel)===!0){const a=e.iconAriaLabel.length;if(a>0)return n=>e.iconAriaLabel[Math.min(n,a)-1]}return(a,n)=>`${n} ${a}`}),k=v(()=>{const a=[],n=g.value,i=Math.ceil(e.modelValue),f=d.value===!0?0:null,m=e.iconHalf===void 0||i===e.modelValue?-1:i;for(let t=1;t<=e.max;t++){const s=c.value===0&&e.modelValue>=t||c.value>0&&c.value>=t,A=m===t&&c.value<t,w=c.value>0&&(A===!0?i:e.modelValue)>=t&&c.value<t,V=A===!0?t<=n.halfColorLen?e.colorHalf[t-1]:n.halfColor:n.selColor!==void 0&&s===!0?t<=n.selColorLen?e.colorSelected[t-1]:n.selColor:t<=n.colorLen?e.color[t-1]:n.color,U=(A===!0?t<=n.halfIconLen?e.iconHalf[t-1]:n.halfIcon:n.selIcon!==void 0&&(s===!0||w===!0)?t<=n.selIconLen?e.iconSelected[t-1]:n.selIcon:t<=n.iconLen?e.icon[t-1]:n.icon)||r.iconSet.rating.icon;a.push({name:(A===!0?t<=n.halfIconLen?e.iconHalf[t-1]:n.halfIcon:n.selIcon!==void 0&&(s===!0||w===!0)?t<=n.selIconLen?e.iconSelected[t-1]:n.selIcon:t<=n.iconLen?e.icon[t-1]:n.icon)||r.iconSet.rating.icon,attrs:{tabindex:f,role:"radio","aria-checked":e.modelValue===t?"true":"false","aria-label":L.value(t,U)},iconClass:"q-rating__icon"+(s===!0||A===!0?" q-rating__icon--active":"")+(w===!0?" q-rating__icon--exselected":"")+(c.value===t?" q-rating__icon--hovered":"")+(V!==void 0?` text-${V}`:"")})}return a}),R=v(()=>{const a={role:"radiogroup"};return e.disable===!0&&(a["aria-disabled"]="true"),e.readonly===!0&&(a["aria-readonly"]="true"),a});function H(a){if(d.value===!0){const n=p(parseInt(a,10),1,parseInt(e.max,10)),i=e.noReset!==!0&&e.modelValue===n?0:n;i!==e.modelValue&&l("update:modelValue",i),c.value=0}}function M(a){d.value===!0&&(c.value=a)}function F(a,n){switch(a.keyCode){case 13:case 32:return H(n),x(a);case 37:case 40:return u[`rt${n-1}`]&&u[`rt${n-1}`].$el.focus(),x(a);case 39:case 38:return u[`rt${n+1}`]&&u[`rt${n+1}`].$el.focus(),x(a)}}function q(){c.value=0}return G(()=>{u={}}),()=>{const a=[];return k.value.forEach(({iconClass:n,name:i,attrs:f},m)=>{const t=m+1;a.push($("div",C(S({key:t,ref:s=>{u[`rt${t}`]=s},class:"q-rating__icon-container flex flex-center"},f),{onClick(){H(t)},onMouseover(){M(t)},onMouseout:q,onFocus(){M(t)},onBlur:q,onKeyup(s){F(s,t)}}),J(o[`tip-${t}`],[$(Y,{class:n,name:i})])))}),e.name!==void 0&&e.disable!==!0&&h(a,"push"),$("div",S({class:I.value,style:b.value},R.value),a)}}});const ne=(e,o)=>{o=o||"";const l=1024,r=window.atob(e),b=r.length,y=Math.ceil(b/l),h=new Array(y);for(let c=0;c<y;++c){const u=c*l,d=Math.min(u+l,b),I=new Array(d-u);for(let g=u,L=0;g<d;++L,++g)I[L]=r[g].charCodeAt(0);h[c]=new Uint8Array(I)}return new Blob(h,{type:o})},te=(e,o="file.pdf")=>{const l=URL.createObjectURL(e),r=document.createElement("a");r.href=l,r.download=o,document.body.appendChild(r),r.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),document.body.removeChild(r)},ie=async e=>{const{tableId:o,recordId:l,fieldId:r,versionNumber:b,name:y}=e,h=await ee.downloadBase64({tableId:o,recordId:l,fieldId:r,versionNumber:b}),c=await ne(h);te(c,y)};export{re as Q,ie as d};
