import{f as li}from"./index.5d9ecb6c.js";import{dayjs as ae}from"./dayjs.4e8a1aff.js";import{a as hi,g as Kt}from"./_commonjsHelpers.dfee5925.js";function Ye(){return Ye=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])}return r},Ye.apply(this,arguments)}var Qt={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function lr(r){return typeof r=="number"}function xr(r){return!r||typeof r!="object"||typeof r.constructor!="function"?!1:r.isBigNumber===!0&&typeof r.constructor.prototype=="object"&&r.constructor.prototype.isBigNumber===!0||typeof r.constructor.isDecimal=="function"&&r.constructor.isDecimal(r)===!0}function tt(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isComplex===!0||!1}function nt(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isFraction===!0||!1}function it(r){return r&&r.constructor.prototype.isUnit===!0||!1}function Hr(r){return typeof r=="string"}var ur=Array.isArray;function mr(r){return r&&r.constructor.prototype.isMatrix===!0||!1}function at(r){return Array.isArray(r)||mr(r)}function vi(r){return r&&r.isDenseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function pi(r){return r&&r.isSparseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function jt(r){return r&&r.constructor.prototype.isRange===!0||!1}function Fe(r){return r&&r.constructor.prototype.isIndex===!0||!1}function di(r){return typeof r=="boolean"}function kt(r){return r&&r.constructor.prototype.isResultSet===!0||!1}function rn(r){return r&&r.constructor.prototype.isHelp===!0||!1}function mi(r){return typeof r=="function"}function gi(r){return r instanceof Date}function wi(r){return r instanceof RegExp}function yi(r){return!!(r&&typeof r=="object"&&r.constructor===Object&&!tt(r)&&!nt(r))}function Mi(r){return r===null}function Ni(r){return r===void 0}function bi(r){return r&&r.isAccessorNode===!0&&r.constructor.prototype.isNode===!0||!1}function _i(r){return r&&r.isArrayNode===!0&&r.constructor.prototype.isNode===!0||!1}function xi(r){return r&&r.isAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ei(r){return r&&r.isBlockNode===!0&&r.constructor.prototype.isNode===!0||!1}function Si(r){return r&&r.isConditionalNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ai(r){return r&&r.isConstantNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ci(r){return r&&r.isFunctionAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function Di(r){return r&&r.isFunctionNode===!0&&r.constructor.prototype.isNode===!0||!1}function Oi(r){return r&&r.isIndexNode===!0&&r.constructor.prototype.isNode===!0||!1}function en(r){return r&&r.isNode===!0&&r.constructor.prototype.isNode===!0||!1}function Fi(r){return r&&r.isObjectNode===!0&&r.constructor.prototype.isNode===!0||!1}function zi(r){return r&&r.isOperatorNode===!0&&r.constructor.prototype.isNode===!0||!1}function Bi(r){return r&&r.isParenthesisNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ii(r){return r&&r.isRangeNode===!0&&r.constructor.prototype.isNode===!0||!1}function Pi(r){return r&&r.isSymbolNode===!0&&r.constructor.prototype.isNode===!0||!1}function tn(r){return r&&r.constructor.prototype.isChain===!0||!1}function Ur(r){var e=typeof r;return e==="object"?r===null?"null":Array.isArray(r)?"Array":r instanceof Date?"Date":r instanceof RegExp?"RegExp":xr(r)?"BigNumber":tt(r)?"Complex":nt(r)?"Fraction":mr(r)?"Matrix":it(r)?"Unit":Fe(r)?"Index":jt(r)?"Range":kt(r)?"ResultSet":en(r)?r.type:tn(r)?"Chain":rn(r)?"Help":"Object":e==="function"?"Function":e}function pr(r){var e=typeof r;if(e==="number"||e==="string"||e==="boolean"||r===null||r===void 0)return r;if(typeof r.clone=="function")return r.clone();if(Array.isArray(r))return r.map(function(i){return pr(i)});if(r instanceof Date)return new Date(r.valueOf());if(xr(r))return r;if(r instanceof RegExp)throw new TypeError("Cannot clone "+r);return Ti(r,pr)}function Ti(r,e){var i={};for(var n in r)me(r,n)&&(i[n]=e(r[n]));return i}function ot(r,e){for(var i in e)me(e,i)&&(r[i]=e[i]);return r}function _e(r,e){var i,n,t;if(Array.isArray(r)){if(!Array.isArray(e)||r.length!==e.length)return!1;for(n=0,t=r.length;n<t;n++)if(!_e(r[n],e[n]))return!1;return!0}else{if(typeof r=="function")return r===e;if(r instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(i in r)if(!(i in e)||!_e(r[i],e[i]))return!1;for(i in e)if(!(i in r))return!1;return!0}else return r===e}}function me(r,e){return r&&Object.hasOwnProperty.call(r,e)}function $i(r,e){for(var i={},n=0;n<e.length;n++){var t=e[n],s=r[t];s!==void 0&&(i[t]=s)}return i}var qi=["Matrix","Array"],Ri=["number","BigNumber","Fraction"],Zr=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(Qt)};Ye(Zr,Qt,{MATRIX_OPTIONS:qi,NUMBER_OPTIONS:Ri});var nn={exports:{}};(function(r,e){(function(i,n){r.exports=n()})(hi,function(){function i(){return!0}function n(){return!1}function t(){}function s(){var l=[{name:"number",test:function(x){return typeof x=="number"}},{name:"string",test:function(x){return typeof x=="string"}},{name:"boolean",test:function(x){return typeof x=="boolean"}},{name:"Function",test:function(x){return typeof x=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(x){return x instanceof Date}},{name:"RegExp",test:function(x){return x instanceof RegExp}},{name:"Object",test:function(x){return typeof x=="object"&&x!==null&&x.constructor===Object}},{name:"null",test:function(x){return x===null}},{name:"undefined",test:function(x){return x===void 0}}],v={name:"any",test:i},h=[],d=[],o={types:l,conversions:d,ignore:h};function a(x){var C=Dr(o.types,function(A){return A.name===x});if(C)return C;if(x==="any")return v;var F=Dr(o.types,function(A){return A.name.toLowerCase()===x.toLowerCase()});throw new TypeError('Unknown type "'+x+'"'+(F?'. Did you mean "'+F.name+'"?':""))}function u(x){return x===v?999:o.types.indexOf(x)}function c(x){var C=Dr(o.types,function(F){return F.test(x)});if(C)return C.name;throw new TypeError("Value has unknown type. Value: "+x)}function p(x,C){if(!x.signatures)throw new TypeError("Function is no typed-function");var F;if(typeof C=="string"){F=C.split(",");for(var A=0;A<F.length;A++)F[A]=F[A].trim()}else if(Array.isArray(C))F=C;else throw new TypeError("String array or a comma separated string expected");var q=F.join(","),H=x.signatures[q];if(H)return H;throw new TypeError("Signature not found (signature: "+(x.name||"unnamed")+"("+F.join(", ")+"))")}function f(x,C){var F=c(x);if(C===F)return x;for(var A=0;A<o.conversions.length;A++){var q=o.conversions[A];if(q.from===F&&q.to===C)return q.convert(x)}throw new Error("Cannot convert from "+F+" to "+C)}function m(x){return x.map(function(C){var F=C.types.map(E);return(C.restParam?"...":"")+F.join("|")}).join(",")}function g(x,C){var F=x.indexOf("...")===0,A=F?x.length>3?x.slice(3):"any":x,q=A.split("|").map(gr).filter(sr).filter(vr),H=W(C,q),G=q.map(function(U){var Q=a(U);return{name:U,typeIndex:u(Q),test:Q.test,conversion:null,conversionIndex:-1}}),Z=H.map(function(U){var Q=a(U.from);return{name:U.from,typeIndex:u(Q),test:Q.test,conversion:U,conversionIndex:C.indexOf(U)}});return{types:G.concat(Z),restParam:F}}function M(x,C,F){var A=[];return x.trim()!==""&&(A=x.split(",").map(gr).map(function(q,H,G){var Z=g(q,F);if(Z.restParam&&H!==G.length-1)throw new SyntaxError('Unexpected rest parameter "'+q+'": only allowed for the last parameter');return Z})),A.some(cr)?null:{params:A,fn:C}}function w(x){var C=Cr(x);return C?C.restParam:!1}function _(x){return x.types.some(function(C){return C.conversion!=null})}function b(x){if(!x||x.types.length===0)return i;if(x.types.length===1)return a(x.types[0].name).test;if(x.types.length===2){var C=a(x.types[0].name).test,F=a(x.types[1].name).test;return function(H){return C(H)||F(H)}}else{var A=x.types.map(function(q){return a(q.name).test});return function(H){for(var G=0;G<A.length;G++)if(A[G](H))return!0;return!1}}}function N(x){var C,F,A;if(w(x)){C=ar(x).map(b);var q=C.length,H=b(Cr(x)),G=function(Z){for(var U=q;U<Z.length;U++)if(!H(Z[U]))return!1;return!0};return function(U){for(var Q=0;Q<C.length;Q++)if(!C[Q](U[Q]))return!1;return G(U)&&U.length>=q+1}}else return x.length===0?function(U){return U.length===0}:x.length===1?(F=b(x[0]),function(U){return F(U[0])&&U.length===1}):x.length===2?(F=b(x[0]),A=b(x[1]),function(U){return F(U[0])&&A(U[1])&&U.length===2}):(C=x.map(b),function(U){for(var Q=0;Q<C.length;Q++)if(!C[Q](U[Q]))return!1;return U.length===C.length})}function S(x,C){return C<x.params.length?x.params[C]:w(x.params)?Cr(x.params):null}function y(x,C,F){var A=S(x,C),q=A?F?A.types.filter(D):A.types:[];return q.map(E)}function E(x){return x.name}function D(x){return x.conversion===null||x.conversion===void 0}function z(x,C){var F=Gr($r(x,function(A){return y(A,C,!1)}));return F.indexOf("any")!==-1?["any"]:F}function P(x,C,F){var A,q,H=x||"unnamed",G=F,Z;for(Z=0;Z<C.length;Z++){var U=G.filter(function(qr){var Re=b(S(qr,Z));return(Z<qr.params.length||w(qr.params))&&Re(C[Z])});if(U.length===0){if(q=z(G,Z),q.length>0){var Q=c(C[Z]);return A=new TypeError("Unexpected type of argument in function "+H+" (expected: "+q.join(" or ")+", actual: "+Q+", index: "+Z+")"),A.data={category:"wrongType",fn:H,index:Z,actual:Q,expected:q},A}}else G=U}var zr=G.map(function(qr){return w(qr.params)?1/0:qr.params.length});if(C.length<Math.min.apply(null,zr))return q=z(G,Z),A=new TypeError("Too few arguments in function "+H+" (expected: "+q.join(" or ")+", index: "+C.length+")"),A.data={category:"tooFewArgs",fn:H,index:C.length,expected:q},A;var Ir=Math.max.apply(null,zr);return C.length>Ir?(A=new TypeError("Too many arguments in function "+H+" (expected: "+Ir+", actual: "+C.length+")"),A.data={category:"tooManyArgs",fn:H,index:C.length,expectedLength:Ir},A):(A=new TypeError('Arguments of type "'+C.join(", ")+'" do not match any of the defined signatures of function '+H+"."),A.data={category:"mismatch",actual:C.map(c)},A)}function $(x){for(var C=999,F=0;F<x.types.length;F++)D(x.types[F])&&(C=Math.min(C,x.types[F].typeIndex));return C}function I(x){for(var C=999,F=0;F<x.types.length;F++)D(x.types[F])||(C=Math.min(C,x.types[F].conversionIndex));return C}function T(x,C){var F;return F=x.restParam-C.restParam,F!==0||(F=_(x)-_(C),F!==0)||(F=$(x)-$(C),F!==0)?F:I(x)-I(C)}function O(x,C){var F=Math.min(x.params.length,C.params.length),A,q;if(q=x.params.some(_)-C.params.some(_),q!==0)return q;for(A=0;A<F;A++)if(q=_(x.params[A])-_(C.params[A]),q!==0)return q;for(A=0;A<F;A++)if(q=T(x.params[A],C.params[A]),q!==0)return q;return x.params.length-C.params.length}function W(x,C){var F={};return x.forEach(function(A){C.indexOf(A.from)===-1&&C.indexOf(A.to)!==-1&&!F[A.from]&&(F[A.from]=A)}),Object.keys(F).map(function(A){return F[A]})}function R(x,C){var F=C;if(x.some(_)){var A=w(x),q=x.map(L);F=function(){for(var U=[],Q=A?arguments.length-1:arguments.length,zr=0;zr<Q;zr++)U[zr]=q[zr](arguments[zr]);return A&&(U[Q]=arguments[Q].map(q[Q])),C.apply(this,U)}}var H=F;if(w(x)){var G=x.length-1;H=function(){return F.apply(this,Mr(arguments,0,G).concat([Mr(arguments,G)]))}}return H}function L(x){var C,F,A,q,H=[],G=[];switch(x.types.forEach(function(Z){Z.conversion&&(H.push(a(Z.conversion.from).test),G.push(Z.conversion.convert))}),G.length){case 0:return function(U){return U};case 1:return C=H[0],A=G[0],function(U){return C(U)?A(U):U};case 2:return C=H[0],F=H[1],A=G[0],q=G[1],function(U){return C(U)?A(U):F(U)?q(U):U};default:return function(U){for(var Q=0;Q<G.length;Q++)if(H[Q](U))return G[Q](U);return U}}}function Y(x){var C={};return x.forEach(function(F){F.params.some(_)||k(F.params,!0).forEach(function(A){C[m(A)]=F.fn})}),C}function k(x,C){function F(A,q,H){if(q<A.length){var G=A[q],Z=C?G.types.filter(D):G.types,U;if(G.restParam){var Q=Z.filter(D);U=Q.length<Z.length?[Q,Z]:[Z]}else U=Z.map(function(Ir){return[Ir]});return $r(U,function(Ir){return F(A,q+1,H.concat([Ir]))})}else{var zr=H.map(function(Ir,qr){return{types:Ir,restParam:qr===A.length-1&&w(A)}});return[zr]}}return F(x,0,[])}function rr(x,C){for(var F=Math.max(x.params.length,C.params.length),A=0;A<F;A++){var q=y(x,A,!0),H=y(C,A,!0);if(!Nr(q,H))return!1}var G=x.params.length,Z=C.params.length,U=w(x.params),Q=w(C.params);return U?Q?G===Z:Z>=G:Q?G>=Z:G===Z}function j(x,C){if(Object.keys(C).length===0)throw new SyntaxError("No signatures provided");var F=[];Object.keys(C).map(function(or){return M(or,C[or],o.conversions)}).filter(Sr).forEach(function(or){var _r=Dr(F,function(Rr){return rr(Rr,or)});if(_r)throw new TypeError('Conflicting signatures "'+m(_r.params)+'" and "'+m(or.params)+'".');F.push(or)});var A=$r(F,function(or){var _r=or?k(or.params,!1):[];return _r.map(function(Rr){return{params:Rr,fn:or.fn}})}).filter(Sr);A.sort(O);var q=A[0]&&A[0].params.length<=2&&!w(A[0].params),H=A[1]&&A[1].params.length<=2&&!w(A[1].params),G=A[2]&&A[2].params.length<=2&&!w(A[2].params),Z=A[3]&&A[3].params.length<=2&&!w(A[3].params),U=A[4]&&A[4].params.length<=2&&!w(A[4].params),Q=A[5]&&A[5].params.length<=2&&!w(A[5].params),zr=q&&H&&G&&Z&&U&&Q,Ir=A.map(function(or){return N(or.params)}),qr=q?b(A[0].params[0]):n,Re=H?b(A[1].params[0]):n,Un=G?b(A[2].params[0]):n,Ln=Z?b(A[3].params[0]):n,Wn=U?b(A[4].params[0]):n,Zn=Q?b(A[5].params[0]):n,Vn=q?b(A[0].params[1]):n,Hn=H?b(A[1].params[1]):n,Jn=G?b(A[2].params[1]):n,Yn=Z?b(A[3].params[1]):n,Gn=U?b(A[4].params[1]):n,Xn=Q?b(A[5].params[1]):n,ee=A.map(function(or){return R(or.params,or.fn)}),Kn=q?ee[0]:t,Qn=H?ee[1]:t,jn=G?ee[2]:t,kn=Z?ee[3]:t,ri=U?ee[4]:t,ei=Q?ee[5]:t,ti=q?A[0].params.length:-1,ni=H?A[1].params.length:-1,ii=G?A[2].params.length:-1,ai=Z?A[3].params.length:-1,oi=U?A[4].params.length:-1,si=Q?A[5].params.length:-1,ui=zr?6:0,fi=A.length,ci=function(){for(var _r=ui;_r<fi;_r++)if(Ir[_r](arguments))return ee[_r].apply(this,arguments);return o.onMismatch(x,arguments,A)},Ue=function or(_r,Rr){return arguments.length===ti&&qr(_r)&&Vn(Rr)?Kn.apply(or,arguments):arguments.length===ni&&Re(_r)&&Hn(Rr)?Qn.apply(or,arguments):arguments.length===ii&&Un(_r)&&Jn(Rr)?jn.apply(or,arguments):arguments.length===ai&&Ln(_r)&&Yn(Rr)?kn.apply(or,arguments):arguments.length===oi&&Wn(_r)&&Gn(Rr)?ri.apply(or,arguments):arguments.length===si&&Zn(_r)&&Xn(Rr)?ei.apply(or,arguments):ci.apply(or,arguments)};try{Object.defineProperty(Ue,"name",{value:x})}catch{}return Ue.signatures=Y(A),Ue}function hr(x,C,F){throw P(x,C,F)}function vr(x){return o.ignore.indexOf(x)===-1}function gr(x){return x.trim()}function sr(x){return!!x}function Sr(x){return x!==null}function cr(x){return x.types.length===0}function ar(x){return x.slice(0,x.length-1)}function Cr(x){return x[x.length-1]}function Mr(x,C,F){return Array.prototype.slice.call(x,C,F)}function nr(x,C){return x.indexOf(C)!==-1}function Nr(x,C){for(var F=0;F<x.length;F++)if(nr(C,x[F]))return!0;return!1}function Dr(x,C){for(var F=0;F<x.length;F++)if(C(x[F]))return x[F]}function Gr(x){for(var C={},F=0;F<x.length;F++)C[x[F]]=!0;return Object.keys(C)}function $r(x,C){return Array.prototype.concat.apply([],x.map(C))}function ie(x){for(var C="",F=0;F<x.length;F++){var A=x[F];if((typeof A.signatures=="object"||typeof A.signature=="string")&&A.name!==""){if(C==="")C=A.name;else if(C!==A.name){var q=new Error("Function names do not match (expected: "+C+", actual: "+A.name+")");throw q.data={actual:A.name,expected:C},q}}}return C}function re(x){var C,F={};function A(Z,U){if(F.hasOwnProperty(Z)&&U!==F[Z])throw C=new Error('Signature "'+Z+'" is defined twice'),C.data={signature:Z},C}for(var q=0;q<x.length;q++){var H=x[q];if(typeof H.signatures=="object")for(var G in H.signatures)H.signatures.hasOwnProperty(G)&&(A(G,H.signatures[G]),F[G]=H.signatures[G]);else if(typeof H.signature=="string")A(H.signature,H),F[H.signature]=H;else throw C=new TypeError("Function is no typed-function (index: "+q+")"),C.data={index:q},C}return F}return o=j("typed",{"string, Object":j,Object:function(x){var C=[];for(var F in x)x.hasOwnProperty(F)&&C.push(x[F]);var A=ie(C);return j(A,x)},"...Function":function(x){return j(ie(x),re(x))},"string, ...Function":function(x,C){return j(x,re(C))}}),o.create=s,o.types=l,o.conversions=d,o.ignore=h,o.onMismatch=hr,o.throwMismatchError=hr,o.createError=P,o.convert=f,o.find=p,o.addType=function(x,C){if(!x||typeof x.name!="string"||typeof x.test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");if(C!==!1){for(var F=0;F<o.types.length;F++)if(o.types[F].name==="Object"){o.types.splice(F,0,x);return}}o.types.push(x)},o.addConversion=function(x){if(!x||typeof x.from!="string"||typeof x.to!="string"||typeof x.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");o.conversions.push(x)},o}return s()})})(nn);var Nt=nn.exports;function dr(r){return typeof r=="boolean"?!0:isFinite(r)?r===Math.round(r):!1}function Le(r,e,i){var n={2:"0b",8:"0o",16:"0x"},t=n[e],s="";if(i){if(i<1)throw new Error("size must be in greater than 0");if(!dr(i))throw new Error("size must be an integer");if(r>2**(i-1)-1||r<-(2**(i-1)))throw new Error("Value must be in range [-2^".concat(i-1,", 2^").concat(i-1,"-1]"));if(!dr(r))throw new Error("Value must be an integer");r<0&&(r=r+2**i),s="i".concat(i)}var l="";return r<0&&(r=-r,l="-"),"".concat(l).concat(t).concat(r.toString(e)).concat(s)}function Ge(r,e){if(typeof e=="function")return e(r);if(r===1/0)return"Infinity";if(r===-1/0)return"-Infinity";if(isNaN(r))return"NaN";var i="auto",n,t;if(e&&(e.notation&&(i=e.notation),lr(e)?n=e:lr(e.precision)&&(n=e.precision),e.wordSize&&(t=e.wordSize,typeof t!="number")))throw new Error('Option "wordSize" must be a number');switch(i){case"fixed":return an(r,n);case"exponential":return on(r,n);case"engineering":return Ui(r,n);case"bin":return Le(r,2,t);case"oct":return Le(r,8,t);case"hex":return Le(r,16,t);case"auto":return Li(r,n,e&&e).replace(/((\.\d*?)(0+))($|e)/,function(){var s=arguments[2],l=arguments[4];return s!=="."?s+l:l});default:throw new Error('Unknown notation "'+i+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function ze(r){var e=String(r).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+r);var i=e[1],n=e[2],t=parseFloat(e[4]||"0"),s=n.indexOf(".");t+=s!==-1?s-1:n.length-1;var l=n.replace(".","").replace(/^0*/,function(v){return t-=v.length,""}).replace(/0*$/,"").split("").map(function(v){return parseInt(v)});return l.length===0&&(l.push(0),t++),{sign:i,coefficients:l,exponent:t}}function Ui(r,e){if(isNaN(r)||!isFinite(r))return String(r);var i=ze(r),n=Be(i,e),t=n.exponent,s=n.coefficients,l=t%3===0?t:t<0?t-3-t%3:t-t%3;if(lr(e))for(;e>s.length||t-l+1>s.length;)s.push(0);else for(var v=Math.abs(t-l)-(s.length-1),h=0;h<v;h++)s.push(0);for(var d=Math.abs(t-l),o=1;d>0;)o++,d--;var a=s.slice(o).join(""),u=lr(e)&&a.length||a.match(/[1-9]/)?"."+a:"",c=s.slice(0,o).join("")+u+"e"+(t>=0?"+":"")+l.toString();return n.sign+c}function an(r,e){if(isNaN(r)||!isFinite(r))return String(r);var i=ze(r),n=typeof e=="number"?Be(i,i.exponent+1+e):i,t=n.coefficients,s=n.exponent+1,l=s+(e||0);return t.length<l&&(t=t.concat(fe(l-t.length))),s<0&&(t=fe(-s+1).concat(t),s=1),s<t.length&&t.splice(s,0,s===0?"0.":"."),n.sign+t.join("")}function on(r,e){if(isNaN(r)||!isFinite(r))return String(r);var i=ze(r),n=e?Be(i,e):i,t=n.coefficients,s=n.exponent;t.length<e&&(t=t.concat(fe(e-t.length)));var l=t.shift();return n.sign+l+(t.length>0?"."+t.join(""):"")+"e"+(s>=0?"+":"")+s}function Li(r,e,i){if(isNaN(r)||!isFinite(r))return String(r);var n=i&&i.lowerExp!==void 0?i.lowerExp:-3,t=i&&i.upperExp!==void 0?i.upperExp:5,s=ze(r),l=e?Be(s,e):s;if(l.exponent<n||l.exponent>=t)return on(r,e);var v=l.coefficients,h=l.exponent;v.length<e&&(v=v.concat(fe(e-v.length))),v=v.concat(fe(h-v.length+1+(v.length<e?e-v.length:0))),v=fe(-h).concat(v);var d=h>0?h:0;return d<v.length-1&&v.splice(d+1,0,"."),l.sign+v.join("")}function Be(r,e){for(var i={sign:r.sign,coefficients:r.coefficients,exponent:r.exponent},n=i.coefficients;e<=0;)n.unshift(0),i.exponent++,e++;if(n.length>e){var t=n.splice(e,n.length-e);if(t[0]>=5){var s=e-1;for(n[s]++;n[s]===10;)n.pop(),s===0&&(n.unshift(0),i.exponent++,s++),s--,n[s]++}}return i}function fe(r){for(var e=[],i=0;i<r;i++)e.push(0);return e}function Wi(r){return r.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var Zi=Number.EPSILON||2220446049250313e-31;function ce(r,e,i){if(i==null)return r===e;if(r===e)return!0;if(isNaN(r)||isNaN(e))return!1;if(isFinite(r)&&isFinite(e)){var n=Math.abs(r-e);return n<Zi?!0:n<=Math.max(Math.abs(r),Math.abs(e))*i}return!1}function We(r,e,i){var n=r.constructor,t=new n(2),s="";if(i){if(i<1)throw new Error("size must be in greater than 0");if(!dr(i))throw new Error("size must be an integer");if(r.greaterThan(t.pow(i-1).sub(1))||r.lessThan(t.pow(i-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(i-1,", 2^").concat(i-1,"-1]"));if(!r.isInteger())throw new Error("Value must be an integer");r.lessThan(0)&&(r=r.add(t.pow(i))),s="i".concat(i)}switch(e){case 2:return"".concat(r.toBinary()).concat(s);case 8:return"".concat(r.toOctal()).concat(s);case 16:return"".concat(r.toHexadecimal()).concat(s);default:throw new Error("Base ".concat(e," not supported "))}}function Vi(r,e){if(typeof e=="function")return e(r);if(!r.isFinite())return r.isNaN()?"NaN":r.gt(0)?"Infinity":"-Infinity";var i="auto",n,t;if(e!==void 0&&(e.notation&&(i=e.notation),typeof e=="number"?n=e:e.precision&&(n=e.precision),e.wordSize&&(t=e.wordSize,typeof t!="number")))throw new Error('Option "wordSize" must be a number');switch(i){case"fixed":return Ji(r,n);case"exponential":return bt(r,n);case"engineering":return Hi(r,n);case"bin":return We(r,2,t);case"oct":return We(r,8,t);case"hex":return We(r,16,t);case"auto":{var s=e&&e.lowerExp!==void 0?e.lowerExp:-3,l=e&&e.upperExp!==void 0?e.upperExp:5;if(r.isZero())return"0";var v,h=r.toSignificantDigits(n),d=h.e;return d>=s&&d<l?v=h.toFixed():v=bt(r,n),v.replace(/((\.\d*?)(0+))($|e)/,function(){var o=arguments[2],a=arguments[4];return o!=="."?o+a:a})}default:throw new Error('Unknown notation "'+i+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Hi(r,e){var i=r.e,n=i%3===0?i:i<0?i-3-i%3:i-i%3,t=r.mul(Math.pow(10,-n)),s=t.toPrecision(e);return s.indexOf("e")!==-1&&(s=t.toString()),s+"e"+(i>=0?"+":"")+n.toString()}function bt(r,e){return e!==void 0?r.toExponential(e-1):r.toExponential()}function Ji(r,e){return r.toFixed(e)}function wr(r,e){var i=Yi(r,e);return e&&typeof e=="object"&&"truncate"in e&&i.length>e.truncate?i.substring(0,e.truncate-3)+"...":i}function Yi(r,e){if(typeof r=="number")return Ge(r,e);if(xr(r))return Vi(r,e);if(Gi(r))return!e||e.fraction!=="decimal"?r.s*r.n+"/"+r.d:r.toString();if(Array.isArray(r))return sn(r,e);if(Hr(r))return'"'+r+'"';if(typeof r=="function")return r.syntax?String(r.syntax):"function";if(r&&typeof r=="object"){if(typeof r.format=="function")return r.format(e);if(r&&r.toString(e)!=={}.toString())return r.toString(e);var i=Object.keys(r).map(n=>'"'+n+'": '+wr(r[n],e));return"{"+i.join(", ")+"}"}return String(r)}function sn(r,e){if(Array.isArray(r)){for(var i="[",n=r.length,t=0;t<n;t++)t!==0&&(i+=", "),i+=sn(r[t],e);return i+="]",i}else return wr(r,e)}function Gi(r){return r&&typeof r=="object"&&typeof r.s=="number"&&typeof r.n=="number"&&typeof r.d=="number"||!1}function er(r,e,i){if(!(this instanceof er))throw new SyntaxError("Constructor must be called with the new operator");this.actual=r,this.expected=e,this.relation=i,this.message="Dimension mismatch ("+(Array.isArray(r)?"["+r.join(", ")+"]":r)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}er.prototype=new RangeError;er.prototype.constructor=RangeError;er.prototype.name="DimensionError";er.prototype.isDimensionError=!0;function te(r,e,i){if(!(this instanceof te))throw new SyntaxError("Constructor must be called with the new operator");this.index=r,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=i),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}te.prototype=new RangeError;te.prototype.constructor=RangeError;te.prototype.name="IndexError";te.prototype.isIndexError=!0;function Lr(r){for(var e=[];Array.isArray(r);)e.push(r.length),r=r[0];return e}function un(r,e,i){var n,t=r.length;if(t!==e[i])throw new er(t,e[i]);if(i<e.length-1){var s=i+1;for(n=0;n<t;n++){var l=r[n];if(!Array.isArray(l))throw new er(e.length-1,e.length,"<");un(r[n],e,s)}}else for(n=0;n<t;n++)if(Array.isArray(r[n]))throw new er(e.length+1,e.length,">")}function _t(r,e){var i=e.length===0;if(i){if(Array.isArray(r))throw new er(r.length,0)}else un(r,e,0)}function fr(r,e){if(!lr(r)||!dr(r))throw new TypeError("Index must be an integer (value: "+r+")");if(r<0||typeof e=="number"&&r>=e)throw new te(r,e)}function xe(r,e,i){if(!Array.isArray(r)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(t){if(!lr(t)||!dr(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+wr(e)+")")});var n=i!==void 0?i:0;return Xe(r,e,0,n),r}function Xe(r,e,i,n){var t,s,l=r.length,v=e[i],h=Math.min(l,v);if(r.length=v,i<e.length-1){var d=i+1;for(t=0;t<h;t++)s=r[t],Array.isArray(s)||(s=[s],r[t]=s),Xe(s,e,d,n);for(t=h;t<v;t++)s=[],r[t]=s,Xe(s,e,d,n)}else{for(t=0;t<h;t++)for(;Array.isArray(r[t]);)r[t]=r[t][0];for(t=h;t<v;t++)r[t]=n}}function Xi(r,e){var i=Qi(r),n=i.length;if(!Array.isArray(r)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new er(0,n,"!=");e=st(e,n);var t=fn(e);if(n!==t)throw new er(t,n,"!=");try{return Ki(i,e)}catch(s){throw s instanceof er?new er(t,n,"!="):s}}function st(r,e){var i=fn(r),n=r.slice(),t=-1,s=r.indexOf(t),l=r.indexOf(t,s+1)>=0;if(l)throw new Error("More than one wildcard in sizes");var v=s>=0,h=e%i===0;if(v)if(h)n[s]=-e/i;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-i);return n}function fn(r){return r.reduce((e,i)=>e*i,1)}function Ki(r,e){for(var i=r,n,t=e.length-1;t>0;t--){var s=e[t];n=[];for(var l=i.length/s,v=0;v<l;v++)n.push(i.slice(v*s,(v+1)*s));i=n}return i}function cn(r,e,i,n){var t=n||Lr(r);if(i)for(var s=0;s<i;s++)r=[r],t.unshift(1);for(r=ln(r,e,0);t.length<e;)t.push(1);return r}function ln(r,e,i){var n,t;if(Array.isArray(r)){var s=i+1;for(n=0,t=r.length;n<t;n++)r[n]=ln(r[n],e,s)}else for(var l=i;l<e;l++)r=[r];return r}function Qi(r){if(!Array.isArray(r))return r;var e=[];return r.forEach(function i(n){Array.isArray(n)?n.forEach(i):e.push(n)}),e}function Ee(r,e){for(var i,n=0,t=0;t<r.length;t++){var s=r[t],l=Array.isArray(s);if(t===0&&l&&(n=s.length),l&&s.length!==n)return;var v=l?Ee(s,e):e(s);if(i===void 0)i=v;else if(i!==v)return"mixed"}return i}function X(r,e,i,n){function t(s){var l=$i(s,e.map(ra));return ji(r,e,s),i(l)}return t.isFactory=!0,t.fn=r,t.dependencies=e.slice().sort(),n&&(t.meta=n),t}function ji(r,e,i){var n=e.filter(s=>!ki(s)).every(s=>i[s]!==void 0);if(!n){var t=e.filter(s=>i[s]===void 0);throw new Error('Cannot create function "'.concat(r,'", ')+"some dependencies are missing: ".concat(t.map(s=>'"'.concat(s,'"')).join(", "),"."))}}function ki(r){return r&&r[0]==="?"}function ra(r){return r&&r[0]==="?"?r.slice(1):r}function ea(r,e){if(vn(r)&&hn(r,e))return r[e];throw typeof r[e]=="function"&&ia(r,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function ta(r,e,i){if(vn(r)&&hn(r,e))return r[e]=i,i;throw new Error('No access to property "'+e+'"')}function na(r,e){return e in r}function hn(r,e){return!r||typeof r!="object"?!1:me(aa,e)?!0:!(e in Object.prototype||e in Function.prototype)}function ia(r,e){return r==null||typeof r[e]!="function"||me(r,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(r)?!1:me(oa,e)?!0:!(e in Object.prototype||e in Function.prototype)}function vn(r){return typeof r=="object"&&r&&r.constructor===Object}var aa={length:!0,name:!0},oa={toString:!0,valueOf:!0,toLocaleString:!0};class sa{constructor(e){this.wrappedObject=e}keys(){return Object.keys(this.wrappedObject)}get(e){return ea(this.wrappedObject,e)}set(e,i){return ta(this.wrappedObject,e,i),this}has(e){return na(this.wrappedObject,e)}}function ua(r){return r?r instanceof Map||r instanceof sa||typeof r.set=="function"&&typeof r.get=="function"&&typeof r.keys=="function"&&typeof r.has=="function":!1}var pn=function(){return pn=Nt.create,Nt},fa=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],ca=X("typed",fa,function(e){var{BigNumber:i,Complex:n,DenseMatrix:t,Fraction:s}=e,l=pn();return l.types=[{name:"number",test:lr},{name:"Complex",test:tt},{name:"BigNumber",test:xr},{name:"Fraction",test:nt},{name:"Unit",test:it},{name:"string",test:Hr},{name:"Chain",test:tn},{name:"Array",test:ur},{name:"Matrix",test:mr},{name:"DenseMatrix",test:vi},{name:"SparseMatrix",test:pi},{name:"Range",test:jt},{name:"Index",test:Fe},{name:"boolean",test:di},{name:"ResultSet",test:kt},{name:"Help",test:rn},{name:"function",test:mi},{name:"Date",test:gi},{name:"RegExp",test:wi},{name:"null",test:Mi},{name:"undefined",test:Ni},{name:"AccessorNode",test:bi},{name:"ArrayNode",test:_i},{name:"AssignmentNode",test:xi},{name:"BlockNode",test:Ei},{name:"ConditionalNode",test:Si},{name:"ConstantNode",test:Ai},{name:"FunctionNode",test:Di},{name:"FunctionAssignmentNode",test:Ci},{name:"IndexNode",test:Oi},{name:"Node",test:en},{name:"ObjectNode",test:Fi},{name:"OperatorNode",test:zi},{name:"ParenthesisNode",test:Bi},{name:"RangeNode",test:Ii},{name:"SymbolNode",test:Pi},{name:"Map",test:ua},{name:"Object",test:yi}],l.conversions=[{from:"number",to:"BigNumber",convert:function(h){if(i||Ze(h),Wi(h)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+h+"). Use function bignumber(x) to convert to BigNumber.");return new i(h)}},{from:"number",to:"Complex",convert:function(h){return n||Me(h),new n(h,0)}},{from:"number",to:"string",convert:function(h){return h+""}},{from:"BigNumber",to:"Complex",convert:function(h){return n||Me(h),new n(h.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(h){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(h){return n||Me(h),new n(h.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(h){s||Ve(h);var d=new s(h);if(d.valueOf()!==h)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+h+"). Use function fraction(x) to convert to Fraction.");return d}},{from:"string",to:"number",convert:function(h){var d=Number(h);if(isNaN(d))throw new Error('Cannot convert "'+h+'" to a number');return d}},{from:"string",to:"BigNumber",convert:function(h){i||Ze(h);try{return new i(h)}catch{throw new Error('Cannot convert "'+h+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(h){s||Ve(h);try{return new s(h)}catch{throw new Error('Cannot convert "'+h+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(h){n||Me(h);try{return new n(h)}catch{throw new Error('Cannot convert "'+h+'" to Complex')}}},{from:"boolean",to:"number",convert:function(h){return+h}},{from:"boolean",to:"BigNumber",convert:function(h){return i||Ze(h),new i(+h)}},{from:"boolean",to:"Fraction",convert:function(h){return s||Ve(h),new s(+h)}},{from:"boolean",to:"string",convert:function(h){return String(h)}},{from:"Array",to:"Matrix",convert:function(h){return t||la(),new t(h)}},{from:"Matrix",to:"Array",convert:function(h){return h.valueOf()}}],l});function Ze(r){throw new Error("Cannot convert value ".concat(r," into a BigNumber: no class 'BigNumber' provided"))}function Me(r){throw new Error("Cannot convert value ".concat(r," into a Complex number: no class 'Complex' provided"))}function la(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function Ve(r){throw new Error("Cannot convert value ".concat(r," into a Fraction, no class 'Fraction' provided."))}var ue=9e15,jr=1e9,Ke="0123456789abcdef",Se="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Ae="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Qe={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-ue,maxE:ue,crypto:!1},dn,Jr,K=!0,Ie="[DecimalError] ",Qr=Ie+"Invalid argument: ",mn=Ie+"Precision limit exceeded",gn=Ie+"crypto unavailable",wn="[object Decimal]",Er=Math.floor,yr=Math.pow,ha=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,va=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,pa=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,yn=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Tr=1e7,J=7,da=9007199254740991,ma=Se.length-1,je=Ae.length-1,B={toStringTag:wn};B.absoluteValue=B.abs=function(){var r=new this.constructor(this);return r.s<0&&(r.s=1),V(r)};B.ceil=function(){return V(new this.constructor(this),this.e+1,2)};B.clampedTo=B.clamp=function(r,e){var i,n=this,t=n.constructor;if(r=new t(r),e=new t(e),!r.s||!e.s)return new t(NaN);if(r.gt(e))throw Error(Qr+e);return i=n.cmp(r),i<0?r:n.cmp(e)>0?e:new t(n)};B.comparedTo=B.cmp=function(r){var e,i,n,t,s=this,l=s.d,v=(r=new s.constructor(r)).d,h=s.s,d=r.s;if(!l||!v)return!h||!d?NaN:h!==d?h:l===v?0:!l^h<0?1:-1;if(!l[0]||!v[0])return l[0]?h:v[0]?-d:0;if(h!==d)return h;if(s.e!==r.e)return s.e>r.e^h<0?1:-1;for(n=l.length,t=v.length,e=0,i=n<t?n:t;e<i;++e)if(l[e]!==v[e])return l[e]>v[e]^h<0?1:-1;return n===t?0:n>t^h<0?1:-1};B.cosine=B.cos=function(){var r,e,i=this,n=i.constructor;return i.d?i.d[0]?(r=n.precision,e=n.rounding,n.precision=r+Math.max(i.e,i.sd())+J,n.rounding=1,i=ga(n,xn(n,i)),n.precision=r,n.rounding=e,V(Jr==2||Jr==3?i.neg():i,r,e,!0)):new n(1):new n(NaN)};B.cubeRoot=B.cbrt=function(){var r,e,i,n,t,s,l,v,h,d,o=this,a=o.constructor;if(!o.isFinite()||o.isZero())return new a(o);for(K=!1,s=o.s*yr(o.s*o,1/3),!s||Math.abs(s)==1/0?(i=br(o.d),r=o.e,(s=(r-i.length+1)%3)&&(i+=s==1||s==-2?"0":"00"),s=yr(i,1/3),r=Er((r+1)/3)-(r%3==(r<0?-1:2)),s==1/0?i="5e"+r:(i=s.toExponential(),i=i.slice(0,i.indexOf("e")+1)+r),n=new a(i),n.s=o.s):n=new a(s.toString()),l=(r=a.precision)+3;;)if(v=n,h=v.times(v).times(v),d=h.plus(o),n=ir(d.plus(o).times(v),d.plus(h),l+2,1),br(v.d).slice(0,l)===(i=br(n.d)).slice(0,l))if(i=i.slice(l-3,l+1),i=="9999"||!t&&i=="4999"){if(!t&&(V(v,r+1,0),v.times(v).times(v).eq(o))){n=v;break}l+=4,t=1}else{(!+i||!+i.slice(1)&&i.charAt(0)=="5")&&(V(n,r+1,1),e=!n.times(n).times(n).eq(o));break}return K=!0,V(n,r,a.rounding,e)};B.decimalPlaces=B.dp=function(){var r,e=this.d,i=NaN;if(e){if(r=e.length-1,i=(r-Er(this.e/J))*J,r=e[r],r)for(;r%10==0;r/=10)i--;i<0&&(i=0)}return i};B.dividedBy=B.div=function(r){return ir(this,new this.constructor(r))};B.dividedToIntegerBy=B.divToInt=function(r){var e=this,i=e.constructor;return V(ir(e,new i(r),0,1,1),i.precision,i.rounding)};B.equals=B.eq=function(r){return this.cmp(r)===0};B.floor=function(){return V(new this.constructor(this),this.e+1,3)};B.greaterThan=B.gt=function(r){return this.cmp(r)>0};B.greaterThanOrEqualTo=B.gte=function(r){var e=this.cmp(r);return e==1||e===0};B.hyperbolicCosine=B.cosh=function(){var r,e,i,n,t,s=this,l=s.constructor,v=new l(1);if(!s.isFinite())return new l(s.s?1/0:NaN);if(s.isZero())return v;i=l.precision,n=l.rounding,l.precision=i+Math.max(s.e,s.sd())+4,l.rounding=1,t=s.d.length,t<32?(r=Math.ceil(t/3),e=(1/Te(4,r)).toString()):(r=16,e="2.3283064365386962890625e-10"),s=le(l,1,s.times(e),new l(1),!0);for(var h,d=r,o=new l(8);d--;)h=s.times(s),s=v.minus(h.times(o.minus(h.times(o))));return V(s,l.precision=i,l.rounding=n,!0)};B.hyperbolicSine=B.sinh=function(){var r,e,i,n,t=this,s=t.constructor;if(!t.isFinite()||t.isZero())return new s(t);if(e=s.precision,i=s.rounding,s.precision=e+Math.max(t.e,t.sd())+4,s.rounding=1,n=t.d.length,n<3)t=le(s,2,t,t,!0);else{r=1.4*Math.sqrt(n),r=r>16?16:r|0,t=t.times(1/Te(5,r)),t=le(s,2,t,t,!0);for(var l,v=new s(5),h=new s(16),d=new s(20);r--;)l=t.times(t),t=t.times(v.plus(l.times(h.times(l).plus(d))))}return s.precision=e,s.rounding=i,V(t,e,i,!0)};B.hyperbolicTangent=B.tanh=function(){var r,e,i=this,n=i.constructor;return i.isFinite()?i.isZero()?new n(i):(r=n.precision,e=n.rounding,n.precision=r+7,n.rounding=1,ir(i.sinh(),i.cosh(),n.precision=r,n.rounding=e)):new n(i.s)};B.inverseCosine=B.acos=function(){var r,e=this,i=e.constructor,n=e.abs().cmp(1),t=i.precision,s=i.rounding;return n!==-1?n===0?e.isNeg()?Pr(i,t,s):new i(0):new i(NaN):e.isZero()?Pr(i,t+4,s).times(.5):(i.precision=t+6,i.rounding=1,e=e.asin(),r=Pr(i,t+4,s).times(.5),i.precision=t,i.rounding=s,r.minus(e))};B.inverseHyperbolicCosine=B.acosh=function(){var r,e,i=this,n=i.constructor;return i.lte(1)?new n(i.eq(1)?0:NaN):i.isFinite()?(r=n.precision,e=n.rounding,n.precision=r+Math.max(Math.abs(i.e),i.sd())+4,n.rounding=1,K=!1,i=i.times(i).minus(1).sqrt().plus(i),K=!0,n.precision=r,n.rounding=e,i.ln()):new n(i)};B.inverseHyperbolicSine=B.asinh=function(){var r,e,i=this,n=i.constructor;return!i.isFinite()||i.isZero()?new n(i):(r=n.precision,e=n.rounding,n.precision=r+2*Math.max(Math.abs(i.e),i.sd())+6,n.rounding=1,K=!1,i=i.times(i).plus(1).sqrt().plus(i),K=!0,n.precision=r,n.rounding=e,i.ln())};B.inverseHyperbolicTangent=B.atanh=function(){var r,e,i,n,t=this,s=t.constructor;return t.isFinite()?t.e>=0?new s(t.abs().eq(1)?t.s/0:t.isZero()?t:NaN):(r=s.precision,e=s.rounding,n=t.sd(),Math.max(n,r)<2*-t.e-1?V(new s(t),r,e,!0):(s.precision=i=n-t.e,t=ir(t.plus(1),new s(1).minus(t),i+r,1),s.precision=r+4,s.rounding=1,t=t.ln(),s.precision=r,s.rounding=e,t.times(.5))):new s(NaN)};B.inverseSine=B.asin=function(){var r,e,i,n,t=this,s=t.constructor;return t.isZero()?new s(t):(e=t.abs().cmp(1),i=s.precision,n=s.rounding,e!==-1?e===0?(r=Pr(s,i+4,n).times(.5),r.s=t.s,r):new s(NaN):(s.precision=i+6,s.rounding=1,t=t.div(new s(1).minus(t.times(t)).sqrt().plus(1)).atan(),s.precision=i,s.rounding=n,t.times(2)))};B.inverseTangent=B.atan=function(){var r,e,i,n,t,s,l,v,h,d=this,o=d.constructor,a=o.precision,u=o.rounding;if(d.isFinite()){if(d.isZero())return new o(d);if(d.abs().eq(1)&&a+4<=je)return l=Pr(o,a+4,u).times(.25),l.s=d.s,l}else{if(!d.s)return new o(NaN);if(a+4<=je)return l=Pr(o,a+4,u).times(.5),l.s=d.s,l}for(o.precision=v=a+10,o.rounding=1,i=Math.min(28,v/J+2|0),r=i;r;--r)d=d.div(d.times(d).plus(1).sqrt().plus(1));for(K=!1,e=Math.ceil(v/J),n=1,h=d.times(d),l=new o(d),t=d;r!==-1;)if(t=t.times(h),s=l.minus(t.div(n+=2)),t=t.times(h),l=s.plus(t.div(n+=2)),l.d[e]!==void 0)for(r=e;l.d[r]===s.d[r]&&r--;);return i&&(l=l.times(2<<i-1)),K=!0,V(l,o.precision=a,o.rounding=u,!0)};B.isFinite=function(){return!!this.d};B.isInteger=B.isInt=function(){return!!this.d&&Er(this.e/J)>this.d.length-2};B.isNaN=function(){return!this.s};B.isNegative=B.isNeg=function(){return this.s<0};B.isPositive=B.isPos=function(){return this.s>0};B.isZero=function(){return!!this.d&&this.d[0]===0};B.lessThan=B.lt=function(r){return this.cmp(r)<0};B.lessThanOrEqualTo=B.lte=function(r){return this.cmp(r)<1};B.logarithm=B.log=function(r){var e,i,n,t,s,l,v,h,d=this,o=d.constructor,a=o.precision,u=o.rounding,c=5;if(r==null)r=new o(10),e=!0;else{if(r=new o(r),i=r.d,r.s<0||!i||!i[0]||r.eq(1))return new o(NaN);e=r.eq(10)}if(i=d.d,d.s<0||!i||!i[0]||d.eq(1))return new o(i&&!i[0]?-1/0:d.s!=1?NaN:i?0:1/0);if(e)if(i.length>1)s=!0;else{for(t=i[0];t%10===0;)t/=10;s=t!==1}if(K=!1,v=a+c,l=Kr(d,v),n=e?Ce(o,v+10):Kr(r,v),h=ir(l,n,v,1),ge(h.d,t=a,u))do if(v+=10,l=Kr(d,v),n=e?Ce(o,v+10):Kr(r,v),h=ir(l,n,v,1),!s){+br(h.d).slice(t+1,t+15)+1==1e14&&(h=V(h,a+1,0));break}while(ge(h.d,t+=10,u));return K=!0,V(h,a,u)};B.minus=B.sub=function(r){var e,i,n,t,s,l,v,h,d,o,a,u,c=this,p=c.constructor;if(r=new p(r),!c.d||!r.d)return!c.s||!r.s?r=new p(NaN):c.d?r.s=-r.s:r=new p(r.d||c.s!==r.s?c:NaN),r;if(c.s!=r.s)return r.s=-r.s,c.plus(r);if(d=c.d,u=r.d,v=p.precision,h=p.rounding,!d[0]||!u[0]){if(u[0])r.s=-r.s;else if(d[0])r=new p(c);else return new p(h===3?-0:0);return K?V(r,v,h):r}if(i=Er(r.e/J),o=Er(c.e/J),d=d.slice(),s=o-i,s){for(a=s<0,a?(e=d,s=-s,l=u.length):(e=u,i=o,l=d.length),n=Math.max(Math.ceil(v/J),l)+2,s>n&&(s=n,e.length=1),e.reverse(),n=s;n--;)e.push(0);e.reverse()}else{for(n=d.length,l=u.length,a=n<l,a&&(l=n),n=0;n<l;n++)if(d[n]!=u[n]){a=d[n]<u[n];break}s=0}for(a&&(e=d,d=u,u=e,r.s=-r.s),l=d.length,n=u.length-l;n>0;--n)d[l++]=0;for(n=u.length;n>s;){if(d[--n]<u[n]){for(t=n;t&&d[--t]===0;)d[t]=Tr-1;--d[t],d[n]+=Tr}d[n]-=u[n]}for(;d[--l]===0;)d.pop();for(;d[0]===0;d.shift())--i;return d[0]?(r.d=d,r.e=Pe(d,i),K?V(r,v,h):r):new p(h===3?-0:0)};B.modulo=B.mod=function(r){var e,i=this,n=i.constructor;return r=new n(r),!i.d||!r.s||r.d&&!r.d[0]?new n(NaN):!r.d||i.d&&!i.d[0]?V(new n(i),n.precision,n.rounding):(K=!1,n.modulo==9?(e=ir(i,r.abs(),0,3,1),e.s*=r.s):e=ir(i,r,0,n.modulo,1),e=e.times(r),K=!0,i.minus(e))};B.naturalExponential=B.exp=function(){return ke(this)};B.naturalLogarithm=B.ln=function(){return Kr(this)};B.negated=B.neg=function(){var r=new this.constructor(this);return r.s=-r.s,V(r)};B.plus=B.add=function(r){var e,i,n,t,s,l,v,h,d,o,a=this,u=a.constructor;if(r=new u(r),!a.d||!r.d)return!a.s||!r.s?r=new u(NaN):a.d||(r=new u(r.d||a.s===r.s?a:NaN)),r;if(a.s!=r.s)return r.s=-r.s,a.minus(r);if(d=a.d,o=r.d,v=u.precision,h=u.rounding,!d[0]||!o[0])return o[0]||(r=new u(a)),K?V(r,v,h):r;if(s=Er(a.e/J),n=Er(r.e/J),d=d.slice(),t=s-n,t){for(t<0?(i=d,t=-t,l=o.length):(i=o,n=s,l=d.length),s=Math.ceil(v/J),l=s>l?s+1:l+1,t>l&&(t=l,i.length=1),i.reverse();t--;)i.push(0);i.reverse()}for(l=d.length,t=o.length,l-t<0&&(t=l,i=o,o=d,d=i),e=0;t;)e=(d[--t]=d[t]+o[t]+e)/Tr|0,d[t]%=Tr;for(e&&(d.unshift(e),++n),l=d.length;d[--l]==0;)d.pop();return r.d=d,r.e=Pe(d,n),K?V(r,v,h):r};B.precision=B.sd=function(r){var e,i=this;if(r!==void 0&&r!==!!r&&r!==1&&r!==0)throw Error(Qr+r);return i.d?(e=Mn(i.d),r&&i.e+1>e&&(e=i.e+1)):e=NaN,e};B.round=function(){var r=this,e=r.constructor;return V(new e(r),r.e+1,e.rounding)};B.sine=B.sin=function(){var r,e,i=this,n=i.constructor;return i.isFinite()?i.isZero()?new n(i):(r=n.precision,e=n.rounding,n.precision=r+Math.max(i.e,i.sd())+J,n.rounding=1,i=ya(n,xn(n,i)),n.precision=r,n.rounding=e,V(Jr>2?i.neg():i,r,e,!0)):new n(NaN)};B.squareRoot=B.sqrt=function(){var r,e,i,n,t,s,l=this,v=l.d,h=l.e,d=l.s,o=l.constructor;if(d!==1||!v||!v[0])return new o(!d||d<0&&(!v||v[0])?NaN:v?l:1/0);for(K=!1,d=Math.sqrt(+l),d==0||d==1/0?(e=br(v),(e.length+h)%2==0&&(e+="0"),d=Math.sqrt(e),h=Er((h+1)/2)-(h<0||h%2),d==1/0?e="5e"+h:(e=d.toExponential(),e=e.slice(0,e.indexOf("e")+1)+h),n=new o(e)):n=new o(d.toString()),i=(h=o.precision)+3;;)if(s=n,n=s.plus(ir(l,s,i+2,1)).times(.5),br(s.d).slice(0,i)===(e=br(n.d)).slice(0,i))if(e=e.slice(i-3,i+1),e=="9999"||!t&&e=="4999"){if(!t&&(V(s,h+1,0),s.times(s).eq(l))){n=s;break}i+=4,t=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(V(n,h+1,1),r=!n.times(n).eq(l));break}return K=!0,V(n,h,o.rounding,r)};B.tangent=B.tan=function(){var r,e,i=this,n=i.constructor;return i.isFinite()?i.isZero()?new n(i):(r=n.precision,e=n.rounding,n.precision=r+10,n.rounding=1,i=i.sin(),i.s=1,i=ir(i,new n(1).minus(i.times(i)).sqrt(),r+10,0),n.precision=r,n.rounding=e,V(Jr==2||Jr==4?i.neg():i,r,e,!0)):new n(NaN)};B.times=B.mul=function(r){var e,i,n,t,s,l,v,h,d,o=this,a=o.constructor,u=o.d,c=(r=new a(r)).d;if(r.s*=o.s,!u||!u[0]||!c||!c[0])return new a(!r.s||u&&!u[0]&&!c||c&&!c[0]&&!u?NaN:!u||!c?r.s/0:r.s*0);for(i=Er(o.e/J)+Er(r.e/J),h=u.length,d=c.length,h<d&&(s=u,u=c,c=s,l=h,h=d,d=l),s=[],l=h+d,n=l;n--;)s.push(0);for(n=d;--n>=0;){for(e=0,t=h+n;t>n;)v=s[t]+c[n]*u[t-n-1]+e,s[t--]=v%Tr|0,e=v/Tr|0;s[t]=(s[t]+e)%Tr|0}for(;!s[--l];)s.pop();return e?++i:s.shift(),r.d=s,r.e=Pe(s,i),K?V(r,a.precision,a.rounding):r};B.toBinary=function(r,e){return ut(this,2,r,e)};B.toDecimalPlaces=B.toDP=function(r,e){var i=this,n=i.constructor;return i=new n(i),r===void 0?i:(Fr(r,0,jr),e===void 0?e=n.rounding:Fr(e,0,8),V(i,r+i.e+1,e))};B.toExponential=function(r,e){var i,n=this,t=n.constructor;return r===void 0?i=Wr(n,!0):(Fr(r,0,jr),e===void 0?e=t.rounding:Fr(e,0,8),n=V(new t(n),r+1,e),i=Wr(n,!0,r+1)),n.isNeg()&&!n.isZero()?"-"+i:i};B.toFixed=function(r,e){var i,n,t=this,s=t.constructor;return r===void 0?i=Wr(t):(Fr(r,0,jr),e===void 0?e=s.rounding:Fr(e,0,8),n=V(new s(t),r+t.e+1,e),i=Wr(n,!1,r+n.e+1)),t.isNeg()&&!t.isZero()?"-"+i:i};B.toFraction=function(r){var e,i,n,t,s,l,v,h,d,o,a,u,c=this,p=c.d,f=c.constructor;if(!p)return new f(c);if(d=i=new f(1),n=h=new f(0),e=new f(n),s=e.e=Mn(p)-c.e-1,l=s%J,e.d[0]=yr(10,l<0?J+l:l),r==null)r=s>0?e:d;else{if(v=new f(r),!v.isInt()||v.lt(d))throw Error(Qr+v);r=v.gt(e)?s>0?e:d:v}for(K=!1,v=new f(br(p)),o=f.precision,f.precision=s=p.length*J*2;a=ir(v,e,0,1,1),t=i.plus(a.times(n)),t.cmp(r)!=1;)i=n,n=t,t=d,d=h.plus(a.times(t)),h=t,t=e,e=v.minus(a.times(t)),v=t;return t=ir(r.minus(i),n,0,1,1),h=h.plus(t.times(d)),i=i.plus(t.times(n)),h.s=d.s=c.s,u=ir(d,n,s,1).minus(c).abs().cmp(ir(h,i,s,1).minus(c).abs())<1?[d,n]:[h,i],f.precision=o,K=!0,u};B.toHexadecimal=B.toHex=function(r,e){return ut(this,16,r,e)};B.toNearest=function(r,e){var i=this,n=i.constructor;if(i=new n(i),r==null){if(!i.d)return i;r=new n(1),e=n.rounding}else{if(r=new n(r),e===void 0?e=n.rounding:Fr(e,0,8),!i.d)return r.s?i:r;if(!r.d)return r.s&&(r.s=i.s),r}return r.d[0]?(K=!1,i=ir(i,r,0,e,1).times(r),K=!0,V(i)):(r.s=i.s,i=r),i};B.toNumber=function(){return+this};B.toOctal=function(r,e){return ut(this,8,r,e)};B.toPower=B.pow=function(r){var e,i,n,t,s,l,v=this,h=v.constructor,d=+(r=new h(r));if(!v.d||!r.d||!v.d[0]||!r.d[0])return new h(yr(+v,d));if(v=new h(v),v.eq(1))return v;if(n=h.precision,s=h.rounding,r.eq(1))return V(v,n,s);if(e=Er(r.e/J),e>=r.d.length-1&&(i=d<0?-d:d)<=da)return t=Nn(h,v,i,n),r.s<0?new h(1).div(t):V(t,n,s);if(l=v.s,l<0){if(e<r.d.length-1)return new h(NaN);if((r.d[e]&1)==0&&(l=1),v.e==0&&v.d[0]==1&&v.d.length==1)return v.s=l,v}return i=yr(+v,d),e=i==0||!isFinite(i)?Er(d*(Math.log("0."+br(v.d))/Math.LN10+v.e+1)):new h(i+"").e,e>h.maxE+1||e<h.minE-1?new h(e>0?l/0:0):(K=!1,h.rounding=v.s=1,i=Math.min(12,(e+"").length),t=ke(r.times(Kr(v,n+i)),n),t.d&&(t=V(t,n+5,1),ge(t.d,n,s)&&(e=n+10,t=V(ke(r.times(Kr(v,e+i)),e),e+5,1),+br(t.d).slice(n+1,n+15)+1==1e14&&(t=V(t,n+1,0)))),t.s=l,K=!0,h.rounding=s,V(t,n,s))};B.toPrecision=function(r,e){var i,n=this,t=n.constructor;return r===void 0?i=Wr(n,n.e<=t.toExpNeg||n.e>=t.toExpPos):(Fr(r,1,jr),e===void 0?e=t.rounding:Fr(e,0,8),n=V(new t(n),r,e),i=Wr(n,r<=n.e||n.e<=t.toExpNeg,r)),n.isNeg()&&!n.isZero()?"-"+i:i};B.toSignificantDigits=B.toSD=function(r,e){var i=this,n=i.constructor;return r===void 0?(r=n.precision,e=n.rounding):(Fr(r,1,jr),e===void 0?e=n.rounding:Fr(e,0,8)),V(new n(i),r,e)};B.toString=function(){var r=this,e=r.constructor,i=Wr(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()&&!r.isZero()?"-"+i:i};B.truncated=B.trunc=function(){return V(new this.constructor(this),this.e+1,1)};B.valueOf=B.toJSON=function(){var r=this,e=r.constructor,i=Wr(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()?"-"+i:i};function br(r){var e,i,n,t=r.length-1,s="",l=r[0];if(t>0){for(s+=l,e=1;e<t;e++)n=r[e]+"",i=J-n.length,i&&(s+=Xr(i)),s+=n;l=r[e],n=l+"",i=J-n.length,i&&(s+=Xr(i))}else if(l===0)return"0";for(;l%10===0;)l/=10;return s+l}function Fr(r,e,i){if(r!==~~r||r<e||r>i)throw Error(Qr+r)}function ge(r,e,i,n){var t,s,l,v;for(s=r[0];s>=10;s/=10)--e;return--e<0?(e+=J,t=0):(t=Math.ceil((e+1)/J),e%=J),s=yr(10,J-e),v=r[t]%s|0,n==null?e<3?(e==0?v=v/100|0:e==1&&(v=v/10|0),l=i<4&&v==99999||i>3&&v==49999||v==5e4||v==0):l=(i<4&&v+1==s||i>3&&v+1==s/2)&&(r[t+1]/s/100|0)==yr(10,e-2)-1||(v==s/2||v==0)&&(r[t+1]/s/100|0)==0:e<4?(e==0?v=v/1e3|0:e==1?v=v/100|0:e==2&&(v=v/10|0),l=(n||i<4)&&v==9999||!n&&i>3&&v==4999):l=((n||i<4)&&v+1==s||!n&&i>3&&v+1==s/2)&&(r[t+1]/s/1e3|0)==yr(10,e-3)-1,l}function be(r,e,i){for(var n,t=[0],s,l=0,v=r.length;l<v;){for(s=t.length;s--;)t[s]*=e;for(t[0]+=Ke.indexOf(r.charAt(l++)),n=0;n<t.length;n++)t[n]>i-1&&(t[n+1]===void 0&&(t[n+1]=0),t[n+1]+=t[n]/i|0,t[n]%=i)}return t.reverse()}function ga(r,e){var i,n,t;if(e.isZero())return e;n=e.d.length,n<32?(i=Math.ceil(n/3),t=(1/Te(4,i)).toString()):(i=16,t="2.3283064365386962890625e-10"),r.precision+=i,e=le(r,1,e.times(t),new r(1));for(var s=i;s--;){var l=e.times(e);e=l.times(l).minus(l).times(8).plus(1)}return r.precision-=i,e}var ir=function(){function r(n,t,s){var l,v=0,h=n.length;for(n=n.slice();h--;)l=n[h]*t+v,n[h]=l%s|0,v=l/s|0;return v&&n.unshift(v),n}function e(n,t,s,l){var v,h;if(s!=l)h=s>l?1:-1;else for(v=h=0;v<s;v++)if(n[v]!=t[v]){h=n[v]>t[v]?1:-1;break}return h}function i(n,t,s,l){for(var v=0;s--;)n[s]-=v,v=n[s]<t[s]?1:0,n[s]=v*l+n[s]-t[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,t,s,l,v,h){var d,o,a,u,c,p,f,m,g,M,w,_,b,N,S,y,E,D,z,P,$=n.constructor,I=n.s==t.s?1:-1,T=n.d,O=t.d;if(!T||!T[0]||!O||!O[0])return new $(!n.s||!t.s||(T?O&&T[0]==O[0]:!O)?NaN:T&&T[0]==0||!O?I*0:I/0);for(h?(c=1,o=n.e-t.e):(h=Tr,c=J,o=Er(n.e/c)-Er(t.e/c)),z=O.length,E=T.length,g=new $(I),M=g.d=[],a=0;O[a]==(T[a]||0);a++);if(O[a]>(T[a]||0)&&o--,s==null?(N=s=$.precision,l=$.rounding):v?N=s+(n.e-t.e)+1:N=s,N<0)M.push(1),p=!0;else{if(N=N/c+2|0,a=0,z==1){for(u=0,O=O[0],N++;(a<E||u)&&N--;a++)S=u*h+(T[a]||0),M[a]=S/O|0,u=S%O|0;p=u||a<E}else{for(u=h/(O[0]+1)|0,u>1&&(O=r(O,u,h),T=r(T,u,h),z=O.length,E=T.length),y=z,w=T.slice(0,z),_=w.length;_<z;)w[_++]=0;P=O.slice(),P.unshift(0),D=O[0],O[1]>=h/2&&++D;do u=0,d=e(O,w,z,_),d<0?(b=w[0],z!=_&&(b=b*h+(w[1]||0)),u=b/D|0,u>1?(u>=h&&(u=h-1),f=r(O,u,h),m=f.length,_=w.length,d=e(f,w,m,_),d==1&&(u--,i(f,z<m?P:O,m,h))):(u==0&&(d=u=1),f=O.slice()),m=f.length,m<_&&f.unshift(0),i(w,f,_,h),d==-1&&(_=w.length,d=e(O,w,z,_),d<1&&(u++,i(w,z<_?P:O,_,h))),_=w.length):d===0&&(u++,w=[0]),M[a++]=u,d&&w[0]?w[_++]=T[y]||0:(w=[T[y]],_=1);while((y++<E||w[0]!==void 0)&&N--);p=w[0]!==void 0}M[0]||M.shift()}if(c==1)g.e=o,dn=p;else{for(a=1,u=M[0];u>=10;u/=10)a++;g.e=a+o*c-1,V(g,v?s+g.e+1:s,l,p)}return g}}();function V(r,e,i,n){var t,s,l,v,h,d,o,a,u,c=r.constructor;r:if(e!=null){if(a=r.d,!a)return r;for(t=1,v=a[0];v>=10;v/=10)t++;if(s=e-t,s<0)s+=J,l=e,o=a[u=0],h=o/yr(10,t-l-1)%10|0;else if(u=Math.ceil((s+1)/J),v=a.length,u>=v)if(n){for(;v++<=u;)a.push(0);o=h=0,t=1,s%=J,l=s-J+1}else break r;else{for(o=v=a[u],t=1;v>=10;v/=10)t++;s%=J,l=s-J+t,h=l<0?0:o/yr(10,t-l-1)%10|0}if(n=n||e<0||a[u+1]!==void 0||(l<0?o:o%yr(10,t-l-1)),d=i<4?(h||n)&&(i==0||i==(r.s<0?3:2)):h>5||h==5&&(i==4||n||i==6&&(s>0?l>0?o/yr(10,t-l):0:a[u-1])%10&1||i==(r.s<0?8:7)),e<1||!a[0])return a.length=0,d?(e-=r.e+1,a[0]=yr(10,(J-e%J)%J),r.e=-e||0):a[0]=r.e=0,r;if(s==0?(a.length=u,v=1,u--):(a.length=u+1,v=yr(10,J-s),a[u]=l>0?(o/yr(10,t-l)%yr(10,l)|0)*v:0),d)for(;;)if(u==0){for(s=1,l=a[0];l>=10;l/=10)s++;for(l=a[0]+=v,v=1;l>=10;l/=10)v++;s!=v&&(r.e++,a[0]==Tr&&(a[0]=1));break}else{if(a[u]+=v,a[u]!=Tr)break;a[u--]=0,v=1}for(s=a.length;a[--s]===0;)a.pop()}return K&&(r.e>c.maxE?(r.d=null,r.e=NaN):r.e<c.minE&&(r.e=0,r.d=[0])),r}function Wr(r,e,i){if(!r.isFinite())return _n(r);var n,t=r.e,s=br(r.d),l=s.length;return e?(i&&(n=i-l)>0?s=s.charAt(0)+"."+s.slice(1)+Xr(n):l>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(r.e<0?"e":"e+")+r.e):t<0?(s="0."+Xr(-t-1)+s,i&&(n=i-l)>0&&(s+=Xr(n))):t>=l?(s+=Xr(t+1-l),i&&(n=i-t-1)>0&&(s=s+"."+Xr(n))):((n=t+1)<l&&(s=s.slice(0,n)+"."+s.slice(n)),i&&(n=i-l)>0&&(t+1===l&&(s+="."),s+=Xr(n))),s}function Pe(r,e){var i=r[0];for(e*=J;i>=10;i/=10)e++;return e}function Ce(r,e,i){if(e>ma)throw K=!0,i&&(r.precision=i),Error(mn);return V(new r(Se),e,1,!0)}function Pr(r,e,i){if(e>je)throw Error(mn);return V(new r(Ae),e,i,!0)}function Mn(r){var e=r.length-1,i=e*J+1;if(e=r[e],e){for(;e%10==0;e/=10)i--;for(e=r[0];e>=10;e/=10)i++}return i}function Xr(r){for(var e="";r--;)e+="0";return e}function Nn(r,e,i,n){var t,s=new r(1),l=Math.ceil(n/J+4);for(K=!1;;){if(i%2&&(s=s.times(e),Et(s.d,l)&&(t=!0)),i=Er(i/2),i===0){i=s.d.length-1,t&&s.d[i]===0&&++s.d[i];break}e=e.times(e),Et(e.d,l)}return K=!0,s}function xt(r){return r.d[r.d.length-1]&1}function bn(r,e,i){for(var n,t=new r(e[0]),s=0;++s<e.length;)if(n=new r(e[s]),n.s)t[i](n)&&(t=n);else{t=n;break}return t}function ke(r,e){var i,n,t,s,l,v,h,d=0,o=0,a=0,u=r.constructor,c=u.rounding,p=u.precision;if(!r.d||!r.d[0]||r.e>17)return new u(r.d?r.d[0]?r.s<0?0:1/0:1:r.s?r.s<0?0:r:0/0);for(e==null?(K=!1,h=p):h=e,v=new u(.03125);r.e>-2;)r=r.times(v),a+=5;for(n=Math.log(yr(2,a))/Math.LN10*2+5|0,h+=n,i=s=l=new u(1),u.precision=h;;){if(s=V(s.times(r),h,1),i=i.times(++o),v=l.plus(ir(s,i,h,1)),br(v.d).slice(0,h)===br(l.d).slice(0,h)){for(t=a;t--;)l=V(l.times(l),h,1);if(e==null)if(d<3&&ge(l.d,h-n,c,d))u.precision=h+=10,i=s=v=new u(1),o=0,d++;else return V(l,u.precision=p,c,K=!0);else return u.precision=p,l}l=v}}function Kr(r,e){var i,n,t,s,l,v,h,d,o,a,u,c=1,p=10,f=r,m=f.d,g=f.constructor,M=g.rounding,w=g.precision;if(f.s<0||!m||!m[0]||!f.e&&m[0]==1&&m.length==1)return new g(m&&!m[0]?-1/0:f.s!=1?NaN:m?0:f);if(e==null?(K=!1,o=w):o=e,g.precision=o+=p,i=br(m),n=i.charAt(0),Math.abs(s=f.e)<15e14){for(;n<7&&n!=1||n==1&&i.charAt(1)>3;)f=f.times(r),i=br(f.d),n=i.charAt(0),c++;s=f.e,n>1?(f=new g("0."+i),s++):f=new g(n+"."+i.slice(1))}else return d=Ce(g,o+2,w).times(s+""),f=Kr(new g(n+"."+i.slice(1)),o-p).plus(d),g.precision=w,e==null?V(f,w,M,K=!0):f;for(a=f,h=l=f=ir(f.minus(1),f.plus(1),o,1),u=V(f.times(f),o,1),t=3;;){if(l=V(l.times(u),o,1),d=h.plus(ir(l,new g(t),o,1)),br(d.d).slice(0,o)===br(h.d).slice(0,o))if(h=h.times(2),s!==0&&(h=h.plus(Ce(g,o+2,w).times(s+""))),h=ir(h,new g(c),o,1),e==null)if(ge(h.d,o-p,M,v))g.precision=o+=p,d=l=f=ir(a.minus(1),a.plus(1),o,1),u=V(f.times(f),o,1),t=v=1;else return V(h,g.precision=w,M,K=!0);else return g.precision=w,h;h=d,t+=2}}function _n(r){return String(r.s*r.s/0)}function rt(r,e){var i,n,t;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(i<0&&(i=n),i+=+e.slice(n+1),e=e.substring(0,n)):i<0&&(i=e.length),n=0;e.charCodeAt(n)===48;n++);for(t=e.length;e.charCodeAt(t-1)===48;--t);if(e=e.slice(n,t),e){if(t-=n,r.e=i=i-n-1,r.d=[],n=(i+1)%J,i<0&&(n+=J),n<t){for(n&&r.d.push(+e.slice(0,n)),t-=J;n<t;)r.d.push(+e.slice(n,n+=J));e=e.slice(n),n=J-e.length}else n-=t;for(;n--;)e+="0";r.d.push(+e),K&&(r.e>r.constructor.maxE?(r.d=null,r.e=NaN):r.e<r.constructor.minE&&(r.e=0,r.d=[0]))}else r.e=0,r.d=[0];return r}function wa(r,e){var i,n,t,s,l,v,h,d,o;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),yn.test(e))return rt(r,e)}else if(e==="Infinity"||e==="NaN")return+e||(r.s=NaN),r.e=NaN,r.d=null,r;if(va.test(e))i=16,e=e.toLowerCase();else if(ha.test(e))i=2;else if(pa.test(e))i=8;else throw Error(Qr+e);for(s=e.search(/p/i),s>0?(h=+e.slice(s+1),e=e.substring(2,s)):e=e.slice(2),s=e.indexOf("."),l=s>=0,n=r.constructor,l&&(e=e.replace(".",""),v=e.length,s=v-s,t=Nn(n,new n(i),s,s*2)),d=be(e,i,Tr),o=d.length-1,s=o;d[s]===0;--s)d.pop();return s<0?new n(r.s*0):(r.e=Pe(d,o),r.d=d,K=!1,l&&(r=ir(r,t,v*4)),h&&(r=r.times(Math.abs(h)<54?yr(2,h):he.pow(2,h))),K=!0,r)}function ya(r,e){var i,n=e.d.length;if(n<3)return e.isZero()?e:le(r,2,e,e);i=1.4*Math.sqrt(n),i=i>16?16:i|0,e=e.times(1/Te(5,i)),e=le(r,2,e,e);for(var t,s=new r(5),l=new r(16),v=new r(20);i--;)t=e.times(e),e=e.times(s.plus(t.times(l.times(t).minus(v))));return e}function le(r,e,i,n,t){var s,l,v,h,d=r.precision,o=Math.ceil(d/J);for(K=!1,h=i.times(i),v=new r(n);;){if(l=ir(v.times(h),new r(e++*e++),d,1),v=t?n.plus(l):n.minus(l),n=ir(l.times(h),new r(e++*e++),d,1),l=v.plus(n),l.d[o]!==void 0){for(s=o;l.d[s]===v.d[s]&&s--;);if(s==-1)break}s=v,v=n,n=l,l=s}return K=!0,l.d.length=o+1,l}function Te(r,e){for(var i=r;--e;)i*=r;return i}function xn(r,e){var i,n=e.s<0,t=Pr(r,r.precision,1),s=t.times(.5);if(e=e.abs(),e.lte(s))return Jr=n?4:1,e;if(i=e.divToInt(t),i.isZero())Jr=n?3:2;else{if(e=e.minus(i.times(t)),e.lte(s))return Jr=xt(i)?n?2:3:n?4:1,e;Jr=xt(i)?n?1:4:n?3:2}return e.minus(t).abs()}function ut(r,e,i,n){var t,s,l,v,h,d,o,a,u,c=r.constructor,p=i!==void 0;if(p?(Fr(i,1,jr),n===void 0?n=c.rounding:Fr(n,0,8)):(i=c.precision,n=c.rounding),!r.isFinite())o=_n(r);else{for(o=Wr(r),l=o.indexOf("."),p?(t=2,e==16?i=i*4-3:e==8&&(i=i*3-2)):t=e,l>=0&&(o=o.replace(".",""),u=new c(1),u.e=o.length-l,u.d=be(Wr(u),10,t),u.e=u.d.length),a=be(o,10,t),s=h=a.length;a[--h]==0;)a.pop();if(!a[0])o=p?"0p+0":"0";else{if(l<0?s--:(r=new c(r),r.d=a,r.e=s,r=ir(r,u,i,n,0,t),a=r.d,s=r.e,d=dn),l=a[i],v=t/2,d=d||a[i+1]!==void 0,d=n<4?(l!==void 0||d)&&(n===0||n===(r.s<0?3:2)):l>v||l===v&&(n===4||d||n===6&&a[i-1]&1||n===(r.s<0?8:7)),a.length=i,d)for(;++a[--i]>t-1;)a[i]=0,i||(++s,a.unshift(1));for(h=a.length;!a[h-1];--h);for(l=0,o="";l<h;l++)o+=Ke.charAt(a[l]);if(p){if(h>1)if(e==16||e==8){for(l=e==16?4:3,--h;h%l;h++)o+="0";for(a=be(o,t,e),h=a.length;!a[h-1];--h);for(l=1,o="1.";l<h;l++)o+=Ke.charAt(a[l])}else o=o.charAt(0)+"."+o.slice(1);o=o+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)o="0"+o;o="0."+o}else if(++s>h)for(s-=h;s--;)o+="0";else s<h&&(o=o.slice(0,s)+"."+o.slice(s))}o=(e==16?"0x":e==2?"0b":e==8?"0o":"")+o}return r.s<0?"-"+o:o}function Et(r,e){if(r.length>e)return r.length=e,!0}function Ma(r){return new this(r).abs()}function Na(r){return new this(r).acos()}function ba(r){return new this(r).acosh()}function _a(r,e){return new this(r).plus(e)}function xa(r){return new this(r).asin()}function Ea(r){return new this(r).asinh()}function Sa(r){return new this(r).atan()}function Aa(r){return new this(r).atanh()}function Ca(r,e){r=new this(r),e=new this(e);var i,n=this.precision,t=this.rounding,s=n+4;return!r.s||!e.s?i=new this(NaN):!r.d&&!e.d?(i=Pr(this,s,1).times(e.s>0?.25:.75),i.s=r.s):!e.d||r.isZero()?(i=e.s<0?Pr(this,n,t):new this(0),i.s=r.s):!r.d||e.isZero()?(i=Pr(this,s,1).times(.5),i.s=r.s):e.s<0?(this.precision=s,this.rounding=1,i=this.atan(ir(r,e,s,1)),e=Pr(this,s,1),this.precision=n,this.rounding=t,i=r.s<0?i.minus(e):i.plus(e)):i=this.atan(ir(r,e,s,1)),i}function Da(r){return new this(r).cbrt()}function Oa(r){return V(r=new this(r),r.e+1,2)}function Fa(r,e,i){return new this(r).clamp(e,i)}function za(r){if(!r||typeof r!="object")throw Error(Ie+"Object expected");var e,i,n,t=r.defaults===!0,s=["precision",1,jr,"rounding",0,8,"toExpNeg",-ue,0,"toExpPos",0,ue,"maxE",0,ue,"minE",-ue,0,"modulo",0,9];for(e=0;e<s.length;e+=3)if(i=s[e],t&&(this[i]=Qe[i]),(n=r[i])!==void 0)if(Er(n)===n&&n>=s[e+1]&&n<=s[e+2])this[i]=n;else throw Error(Qr+i+": "+n);if(i="crypto",t&&(this[i]=Qe[i]),(n=r[i])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[i]=!0;else throw Error(gn);else this[i]=!1;else throw Error(Qr+i+": "+n);return this}function Ba(r){return new this(r).cos()}function Ia(r){return new this(r).cosh()}function En(r){var e,i,n;function t(s){var l,v,h,d=this;if(!(d instanceof t))return new t(s);if(d.constructor=t,St(s)){d.s=s.s,K?!s.d||s.e>t.maxE?(d.e=NaN,d.d=null):s.e<t.minE?(d.e=0,d.d=[0]):(d.e=s.e,d.d=s.d.slice()):(d.e=s.e,d.d=s.d?s.d.slice():s.d);return}if(h=typeof s,h==="number"){if(s===0){d.s=1/s<0?-1:1,d.e=0,d.d=[0];return}if(s<0?(s=-s,d.s=-1):d.s=1,s===~~s&&s<1e7){for(l=0,v=s;v>=10;v/=10)l++;K?l>t.maxE?(d.e=NaN,d.d=null):l<t.minE?(d.e=0,d.d=[0]):(d.e=l,d.d=[s]):(d.e=l,d.d=[s]);return}else if(s*0!==0){s||(d.s=NaN),d.e=NaN,d.d=null;return}return rt(d,s.toString())}else if(h!=="string")throw Error(Qr+s);return(v=s.charCodeAt(0))===45?(s=s.slice(1),d.s=-1):(v===43&&(s=s.slice(1)),d.s=1),yn.test(s)?rt(d,s):wa(d,s)}if(t.prototype=B,t.ROUND_UP=0,t.ROUND_DOWN=1,t.ROUND_CEIL=2,t.ROUND_FLOOR=3,t.ROUND_HALF_UP=4,t.ROUND_HALF_DOWN=5,t.ROUND_HALF_EVEN=6,t.ROUND_HALF_CEIL=7,t.ROUND_HALF_FLOOR=8,t.EUCLID=9,t.config=t.set=za,t.clone=En,t.isDecimal=St,t.abs=Ma,t.acos=Na,t.acosh=ba,t.add=_a,t.asin=xa,t.asinh=Ea,t.atan=Sa,t.atanh=Aa,t.atan2=Ca,t.cbrt=Da,t.ceil=Oa,t.clamp=Fa,t.cos=Ba,t.cosh=Ia,t.div=Pa,t.exp=Ta,t.floor=$a,t.hypot=qa,t.ln=Ra,t.log=Ua,t.log10=Wa,t.log2=La,t.max=Za,t.min=Va,t.mod=Ha,t.mul=Ja,t.pow=Ya,t.random=Ga,t.round=Xa,t.sign=Ka,t.sin=Qa,t.sinh=ja,t.sqrt=ka,t.sub=ro,t.sum=eo,t.tan=to,t.tanh=no,t.trunc=io,r===void 0&&(r={}),r&&r.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)r.hasOwnProperty(i=n[e++])||(r[i]=this[i]);return t.config(r),t}function Pa(r,e){return new this(r).div(e)}function Ta(r){return new this(r).exp()}function $a(r){return V(r=new this(r),r.e+1,3)}function qa(){var r,e,i=new this(0);for(K=!1,r=0;r<arguments.length;)if(e=new this(arguments[r++]),e.d)i.d&&(i=i.plus(e.times(e)));else{if(e.s)return K=!0,new this(1/0);i=e}return K=!0,i.sqrt()}function St(r){return r instanceof he||r&&r.toStringTag===wn||!1}function Ra(r){return new this(r).ln()}function Ua(r,e){return new this(r).log(e)}function La(r){return new this(r).log(2)}function Wa(r){return new this(r).log(10)}function Za(){return bn(this,arguments,"lt")}function Va(){return bn(this,arguments,"gt")}function Ha(r,e){return new this(r).mod(e)}function Ja(r,e){return new this(r).mul(e)}function Ya(r,e){return new this(r).pow(e)}function Ga(r){var e,i,n,t,s=0,l=new this(1),v=[];if(r===void 0?r=this.precision:Fr(r,1,jr),n=Math.ceil(r/J),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));s<n;)t=e[s],t>=429e7?e[s]=crypto.getRandomValues(new Uint32Array(1))[0]:v[s++]=t%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);s<n;)t=e[s]+(e[s+1]<<8)+(e[s+2]<<16)+((e[s+3]&127)<<24),t>=214e7?crypto.randomBytes(4).copy(e,s):(v.push(t%1e7),s+=4);s=n/4}else throw Error(gn);else for(;s<n;)v[s++]=Math.random()*1e7|0;for(n=v[--s],r%=J,n&&r&&(t=yr(10,J-r),v[s]=(n/t|0)*t);v[s]===0;s--)v.pop();if(s<0)i=0,v=[0];else{for(i=-1;v[0]===0;i-=J)v.shift();for(n=1,t=v[0];t>=10;t/=10)n++;n<J&&(i-=J-n)}return l.e=i,l.d=v,l}function Xa(r){return V(r=new this(r),r.e+1,this.rounding)}function Ka(r){return r=new this(r),r.d?r.d[0]?r.s:0*r.s:r.s||NaN}function Qa(r){return new this(r).sin()}function ja(r){return new this(r).sinh()}function ka(r){return new this(r).sqrt()}function ro(r,e){return new this(r).sub(e)}function eo(){var r=0,e=arguments,i=new this(e[r]);for(K=!1;i.s&&++r<e.length;)i=i.plus(e[r]);return K=!0,V(i,this.precision,this.rounding)}function to(r){return new this(r).tan()}function no(r){return new this(r).tanh()}function io(r){return V(r=new this(r),r.e+1,1)}B[Symbol.for("nodejs.util.inspect.custom")]=B.toString;B[Symbol.toStringTag]="Decimal";var he=B.constructor=En(Qe);Se=new he(Se);Ae=new he(Ae);var ao="BigNumber",oo=["?on","config"],so=X(ao,oo,r=>{var{on:e,config:i}=r,n=he.clone({precision:i.precision,modulo:he.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(t){return new n(t.value)},e&&e("config",function(t,s){t.precision!==s.precision&&n.config({precision:t.precision})}),n},{isClass:!0}),Sn={exports:{}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(r,e){(function(i){var n=Math.cosh||function(a){return Math.abs(a)<1e-9?1-a:(Math.exp(a)+Math.exp(-a))*.5},t=Math.sinh||function(a){return Math.abs(a)<1e-9?a:(Math.exp(a)-Math.exp(-a))*.5},s=function(a){var u=Math.PI/4;if(-u>a||a>u)return Math.cos(a)-1;var c=a*a;return c*(c*(c*(c*(c*(c*(c*(c/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},l=function(a,u){var c=Math.abs(a),p=Math.abs(u);return c<3e3&&p<3e3?Math.sqrt(c*c+p*p):(c<p?(c=p,p=a/u):p=u/a,c*Math.sqrt(1+p*p))},v=function(){throw SyntaxError("Invalid Param")};function h(a,u){var c=Math.abs(a),p=Math.abs(u);return a===0?Math.log(p):u===0?Math.log(c):c<3e3&&p<3e3?Math.log(a*a+u*u)*.5:(a=a/2,u=u/2,.5*Math.log(a*a+u*u)+Math.LN2)}var d=function(a,u){var c={re:0,im:0};if(a==null)c.re=c.im=0;else if(u!==void 0)c.re=a,c.im=u;else switch(typeof a){case"object":if("im"in a&&"re"in a)c.re=a.re,c.im=a.im;else if("abs"in a&&"arg"in a){if(!Number.isFinite(a.abs)&&Number.isFinite(a.arg))return o.INFINITY;c.re=a.abs*Math.cos(a.arg),c.im=a.abs*Math.sin(a.arg)}else if("r"in a&&"phi"in a){if(!Number.isFinite(a.r)&&Number.isFinite(a.phi))return o.INFINITY;c.re=a.r*Math.cos(a.phi),c.im=a.r*Math.sin(a.phi)}else a.length===2?(c.re=a[0],c.im=a[1]):v();break;case"string":c.im=c.re=0;var p=a.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),f=1,m=0;p===null&&v();for(var g=0;g<p.length;g++){var M=p[g];M===" "||M==="	"||M===`
`||(M==="+"?f++:M==="-"?m++:M==="i"||M==="I"?(f+m===0&&v(),p[g+1]!==" "&&!isNaN(p[g+1])?(c.im+=parseFloat((m%2?"-":"")+p[g+1]),g++):c.im+=parseFloat((m%2?"-":"")+"1"),f=m=0):((f+m===0||isNaN(M))&&v(),p[g+1]==="i"||p[g+1]==="I"?(c.im+=parseFloat((m%2?"-":"")+M),g++):c.re+=parseFloat((m%2?"-":"")+M),f=m=0))}f+m>0&&v();break;case"number":c.im=0,c.re=a;break;default:v()}return isNaN(c.re)||isNaN(c.im),c};function o(a,u){if(!(this instanceof o))return new o(a,u);var c=d(a,u);this.re=c.re,this.im=c.im}o.prototype={re:0,im:0,sign:function(){var a=this.abs();return new o(this.re/a,this.im/a)},add:function(a,u){var c=new o(a,u);return this.isInfinite()&&c.isInfinite()?o.NAN:this.isInfinite()||c.isInfinite()?o.INFINITY:new o(this.re+c.re,this.im+c.im)},sub:function(a,u){var c=new o(a,u);return this.isInfinite()&&c.isInfinite()?o.NAN:this.isInfinite()||c.isInfinite()?o.INFINITY:new o(this.re-c.re,this.im-c.im)},mul:function(a,u){var c=new o(a,u);return this.isInfinite()&&c.isZero()||this.isZero()&&c.isInfinite()?o.NAN:this.isInfinite()||c.isInfinite()?o.INFINITY:c.im===0&&this.im===0?new o(this.re*c.re,0):new o(this.re*c.re-this.im*c.im,this.re*c.im+this.im*c.re)},div:function(a,u){var c=new o(a,u);if(this.isZero()&&c.isZero()||this.isInfinite()&&c.isInfinite())return o.NAN;if(this.isInfinite()||c.isZero())return o.INFINITY;if(this.isZero()||c.isInfinite())return o.ZERO;a=this.re,u=this.im;var p=c.re,f=c.im,m,g;return f===0?new o(a/p,u/p):Math.abs(p)<Math.abs(f)?(g=p/f,m=p*g+f,new o((a*g+u)/m,(u*g-a)/m)):(g=f/p,m=f*g+p,new o((a+u*g)/m,(u-a*g)/m))},pow:function(a,u){var c=new o(a,u);if(a=this.re,u=this.im,c.isZero())return o.ONE;if(c.im===0){if(u===0&&a>0)return new o(Math.pow(a,c.re),0);if(a===0)switch((c.re%4+4)%4){case 0:return new o(Math.pow(u,c.re),0);case 1:return new o(0,Math.pow(u,c.re));case 2:return new o(-Math.pow(u,c.re),0);case 3:return new o(0,-Math.pow(u,c.re))}}if(a===0&&u===0&&c.re>0&&c.im>=0)return o.ZERO;var p=Math.atan2(u,a),f=h(a,u);return a=Math.exp(c.re*f-c.im*p),u=c.im*f+c.re*p,new o(a*Math.cos(u),a*Math.sin(u))},sqrt:function(){var a=this.re,u=this.im,c=this.abs(),p,f;if(a>=0){if(u===0)return new o(Math.sqrt(a),0);p=.5*Math.sqrt(2*(c+a))}else p=Math.abs(u)/Math.sqrt(2*(c-a));return a<=0?f=.5*Math.sqrt(2*(c-a)):f=Math.abs(u)/Math.sqrt(2*(c+a)),new o(p,u<0?-f:f)},exp:function(){var a=Math.exp(this.re);return this.im,new o(a*Math.cos(this.im),a*Math.sin(this.im))},expm1:function(){var a=this.re,u=this.im;return new o(Math.expm1(a)*Math.cos(u)+s(u),Math.exp(a)*Math.sin(u))},log:function(){var a=this.re,u=this.im;return new o(h(a,u),Math.atan2(u,a))},abs:function(){return l(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var a=this.re,u=this.im;return new o(Math.sin(a)*n(u),Math.cos(a)*t(u))},cos:function(){var a=this.re,u=this.im;return new o(Math.cos(a)*n(u),-Math.sin(a)*t(u))},tan:function(){var a=2*this.re,u=2*this.im,c=Math.cos(a)+n(u);return new o(Math.sin(a)/c,t(u)/c)},cot:function(){var a=2*this.re,u=2*this.im,c=Math.cos(a)-n(u);return new o(-Math.sin(a)/c,t(u)/c)},sec:function(){var a=this.re,u=this.im,c=.5*n(2*u)+.5*Math.cos(2*a);return new o(Math.cos(a)*n(u)/c,Math.sin(a)*t(u)/c)},csc:function(){var a=this.re,u=this.im,c=.5*n(2*u)-.5*Math.cos(2*a);return new o(Math.sin(a)*n(u)/c,-Math.cos(a)*t(u)/c)},asin:function(){var a=this.re,u=this.im,c=new o(u*u-a*a+1,-2*a*u).sqrt(),p=new o(c.re-u,c.im+a).log();return new o(p.im,-p.re)},acos:function(){var a=this.re,u=this.im,c=new o(u*u-a*a+1,-2*a*u).sqrt(),p=new o(c.re-u,c.im+a).log();return new o(Math.PI/2-p.im,p.re)},atan:function(){var a=this.re,u=this.im;if(a===0){if(u===1)return new o(0,1/0);if(u===-1)return new o(0,-1/0)}var c=a*a+(1-u)*(1-u),p=new o((1-u*u-a*a)/c,-2*a/c).log();return new o(-.5*p.im,.5*p.re)},acot:function(){var a=this.re,u=this.im;if(u===0)return new o(Math.atan2(1,a),0);var c=a*a+u*u;return c!==0?new o(a/c,-u/c).atan():new o(a!==0?a/0:0,u!==0?-u/0:0).atan()},asec:function(){var a=this.re,u=this.im;if(a===0&&u===0)return new o(0,1/0);var c=a*a+u*u;return c!==0?new o(a/c,-u/c).acos():new o(a!==0?a/0:0,u!==0?-u/0:0).acos()},acsc:function(){var a=this.re,u=this.im;if(a===0&&u===0)return new o(Math.PI/2,1/0);var c=a*a+u*u;return c!==0?new o(a/c,-u/c).asin():new o(a!==0?a/0:0,u!==0?-u/0:0).asin()},sinh:function(){var a=this.re,u=this.im;return new o(t(a)*Math.cos(u),n(a)*Math.sin(u))},cosh:function(){var a=this.re,u=this.im;return new o(n(a)*Math.cos(u),t(a)*Math.sin(u))},tanh:function(){var a=2*this.re,u=2*this.im,c=n(a)+Math.cos(u);return new o(t(a)/c,Math.sin(u)/c)},coth:function(){var a=2*this.re,u=2*this.im,c=n(a)-Math.cos(u);return new o(t(a)/c,-Math.sin(u)/c)},csch:function(){var a=this.re,u=this.im,c=Math.cos(2*u)-n(2*a);return new o(-2*t(a)*Math.cos(u)/c,2*n(a)*Math.sin(u)/c)},sech:function(){var a=this.re,u=this.im,c=Math.cos(2*u)+n(2*a);return new o(2*n(a)*Math.cos(u)/c,-2*t(a)*Math.sin(u)/c)},asinh:function(){var a=this.im;this.im=-this.re,this.re=a;var u=this.asin();return this.re=-this.im,this.im=a,a=u.re,u.re=-u.im,u.im=a,u},acosh:function(){var a=this.acos();if(a.im<=0){var u=a.re;a.re=-a.im,a.im=u}else{var u=a.im;a.im=-a.re,a.re=u}return a},atanh:function(){var a=this.re,u=this.im,c=a>1&&u===0,p=1-a,f=1+a,m=p*p+u*u,g=m!==0?new o((f*p-u*u)/m,(u*p+f*u)/m):new o(a!==-1?a/0:0,u!==0?u/0:0),M=g.re;return g.re=h(g.re,g.im)/2,g.im=Math.atan2(g.im,M)/2,c&&(g.im=-g.im),g},acoth:function(){var a=this.re,u=this.im;if(a===0&&u===0)return new o(0,Math.PI/2);var c=a*a+u*u;return c!==0?new o(a/c,-u/c).atanh():new o(a!==0?a/0:0,u!==0?-u/0:0).atanh()},acsch:function(){var a=this.re,u=this.im;if(u===0)return new o(a!==0?Math.log(a+Math.sqrt(a*a+1)):1/0,0);var c=a*a+u*u;return c!==0?new o(a/c,-u/c).asinh():new o(a!==0?a/0:0,u!==0?-u/0:0).asinh()},asech:function(){var a=this.re,u=this.im;if(this.isZero())return o.INFINITY;var c=a*a+u*u;return c!==0?new o(a/c,-u/c).acosh():new o(a!==0?a/0:0,u!==0?-u/0:0).acosh()},inverse:function(){if(this.isZero())return o.INFINITY;if(this.isInfinite())return o.ZERO;var a=this.re,u=this.im,c=a*a+u*u;return new o(a/c,-u/c)},conjugate:function(){return new o(this.re,-this.im)},neg:function(){return new o(-this.re,-this.im)},ceil:function(a){return a=Math.pow(10,a||0),new o(Math.ceil(this.re*a)/a,Math.ceil(this.im*a)/a)},floor:function(a){return a=Math.pow(10,a||0),new o(Math.floor(this.re*a)/a,Math.floor(this.im*a)/a)},round:function(a){return a=Math.pow(10,a||0),new o(Math.round(this.re*a)/a,Math.round(this.im*a)/a)},equals:function(a,u){var c=new o(a,u);return Math.abs(c.re-this.re)<=o.EPSILON&&Math.abs(c.im-this.im)<=o.EPSILON},clone:function(){return new o(this.re,this.im)},toString:function(){var a=this.re,u=this.im,c="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(a)<o.EPSILON&&(a=0),Math.abs(u)<o.EPSILON&&(u=0),u===0?c+a:(a!==0?(c+=a,c+=" ",u<0?(u=-u,c+="-"):c+="+",c+=" "):u<0&&(u=-u,c+="-"),u!==1&&(c+=u),c+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},o.ZERO=new o(0,0),o.ONE=new o(1,0),o.I=new o(0,1),o.PI=new o(Math.PI,0),o.E=new o(Math.E,0),o.INFINITY=new o(1/0,1/0),o.NAN=new o(NaN,NaN),o.EPSILON=1e-15,Object.defineProperty(o,"__esModule",{value:!0}),o.default=o,o.Complex=o,r.exports=o})()})(Sn);var Or=Kt(Sn.exports),uo="Complex",fo=[],co=X(uo,fo,()=>(Or.prototype.type="Complex",Or.prototype.isComplex=!0,Or.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Or.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Or.prototype.format=function(r){var e="",i=this.im,n=this.re,t=Ge(this.re,r),s=Ge(this.im,r),l=lr(r)?r:r?r.precision:null;if(l!==null){var v=Math.pow(10,-l);Math.abs(n/i)<v&&(n=0),Math.abs(i/n)<v&&(i=0)}return i===0?e=t:n===0?i===1?e="i":i===-1?e="-i":e=s+"i":i<0?i===-1?e=t+" - i":e=t+" - "+s.substring(1)+"i":i===1?e=t+" + i":e=t+" + "+s+"i",e},Or.fromPolar=function(r){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return Or(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var i=arguments[0],n=arguments[1];if(lr(i)){if(it(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),lr(n))return new Or({r:i,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Or.prototype.valueOf=Or.prototype.toString,Or.fromJSON=function(r){return new Or(r)},Or.compare=function(r,e){return r.re>e.re?1:r.re<e.re?-1:r.im>e.im?1:r.im<e.im?-1:0},Or),{isClass:!0}),An={exports:{}};/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(r,e){(function(i){var n=2e3,t={s:1,n:0,d:1};function s(p,f){if(isNaN(p=parseInt(p,10)))throw c.InvalidParameter;return p*f}function l(p,f){if(f===0)throw c.DivisionByZero;var m=Object.create(c.prototype);m.s=p<0?-1:1,p=p<0?-p:p;var g=u(p,f);return m.n=p/g,m.d=f/g,m}function v(p){for(var f={},m=p,g=2,M=4;M<=m;){for(;m%g===0;)m/=g,f[g]=(f[g]||0)+1;M+=1+2*g++}return m!==p?m>1&&(f[m]=(f[m]||0)+1):f[p]=(f[p]||0)+1,f}var h=function(p,f){var m=0,g=1,M=1,w=0,_=0,b=0,N=1,S=1,y=0,E=1,D=1,z=1,P=1e7,$;if(p!=null)if(f!==void 0){if(m=p,g=f,M=m*g,m%1!==0||g%1!==0)throw c.NonIntegerParameter}else switch(typeof p){case"object":{if("d"in p&&"n"in p)m=p.n,g=p.d,"s"in p&&(m*=p.s);else if(0 in p)m=p[0],1 in p&&(g=p[1]);else throw c.InvalidParameter;M=m*g;break}case"number":{if(p<0&&(M=p,p=-p),p%1===0)m=p;else if(p>0){for(p>=1&&(S=Math.pow(10,Math.floor(1+Math.log(p)/Math.LN10)),p/=S);E<=P&&z<=P;)if($=(y+D)/(E+z),p===$){E+z<=P?(m=y+D,g=E+z):z>E?(m=D,g=z):(m=y,g=E);break}else p>$?(y+=D,E+=z):(D+=y,z+=E),E>P?(m=D,g=z):(m=y,g=E);m*=S}else(isNaN(p)||isNaN(f))&&(g=m=NaN);break}case"string":{if(E=p.match(/\d+|./g),E===null)throw c.InvalidParameter;if(E[y]==="-"?(M=-1,y++):E[y]==="+"&&y++,E.length===y+1?_=s(E[y++],M):E[y+1]==="."||E[y]==="."?(E[y]!=="."&&(w=s(E[y++],M)),y++,(y+1===E.length||E[y+1]==="("&&E[y+3]===")"||E[y+1]==="'"&&E[y+3]==="'")&&(_=s(E[y],M),N=Math.pow(10,E[y].length),y++),(E[y]==="("&&E[y+2]===")"||E[y]==="'"&&E[y+2]==="'")&&(b=s(E[y+1],M),S=Math.pow(10,E[y+1].length)-1,y+=3)):E[y+1]==="/"||E[y+1]===":"?(_=s(E[y],M),N=s(E[y+2],1),y+=3):E[y+3]==="/"&&E[y+1]===" "&&(w=s(E[y],M),_=s(E[y+2],M),N=s(E[y+4],1),y+=5),E.length<=y){g=N*S,M=m=b+g*w+S*_;break}}default:throw c.InvalidParameter}if(g===0)throw c.DivisionByZero;t.s=M<0?-1:1,t.n=Math.abs(m),t.d=Math.abs(g)};function d(p,f,m){for(var g=1;f>0;p=p*p%m,f>>=1)f&1&&(g=g*p%m);return g}function o(p,f){for(;f%2===0;f/=2);for(;f%5===0;f/=5);if(f===1)return 0;for(var m=10%f,g=1;m!==1;g++)if(m=m*10%f,g>n)return 0;return g}function a(p,f,m){for(var g=1,M=d(10,m,f),w=0;w<300;w++){if(g===M)return w;g=g*10%f,M=M*10%f}return 0}function u(p,f){if(!p)return f;if(!f)return p;for(;;){if(p%=f,!p)return f;if(f%=p,!f)return p}}function c(p,f){if(h(p,f),this instanceof c)p=u(t.d,t.n),this.s=t.s,this.n=t.n/p,this.d=t.d/p;else return l(t.s*t.n,t.d)}c.DivisionByZero=new Error("Division by Zero"),c.InvalidParameter=new Error("Invalid argument"),c.NonIntegerParameter=new Error("Parameters must be integer"),c.prototype={s:1,n:0,d:1,abs:function(){return l(this.n,this.d)},neg:function(){return l(-this.s*this.n,this.d)},add:function(p,f){return h(p,f),l(this.s*this.n*t.d+t.s*this.d*t.n,this.d*t.d)},sub:function(p,f){return h(p,f),l(this.s*this.n*t.d-t.s*this.d*t.n,this.d*t.d)},mul:function(p,f){return h(p,f),l(this.s*t.s*this.n*t.n,this.d*t.d)},div:function(p,f){return h(p,f),l(this.s*t.s*this.n*t.d,this.d*t.n)},clone:function(){return l(this.s*this.n,this.d)},mod:function(p,f){if(isNaN(this.n)||isNaN(this.d))return new c(NaN);if(p===void 0)return l(this.s*this.n%this.d,1);if(h(p,f),t.n===0&&this.d===0)throw c.DivisionByZero;return l(this.s*(t.d*this.n)%(t.n*this.d),t.d*this.d)},gcd:function(p,f){return h(p,f),l(u(t.n,this.n)*u(t.d,this.d),t.d*this.d)},lcm:function(p,f){return h(p,f),t.n===0&&this.n===0?l(0,1):l(t.n*this.n,u(t.n,this.n)*u(t.d,this.d))},ceil:function(p){return p=Math.pow(10,p||0),isNaN(this.n)||isNaN(this.d)?new c(NaN):l(Math.ceil(p*this.s*this.n/this.d),p)},floor:function(p){return p=Math.pow(10,p||0),isNaN(this.n)||isNaN(this.d)?new c(NaN):l(Math.floor(p*this.s*this.n/this.d),p)},round:function(p){return p=Math.pow(10,p||0),isNaN(this.n)||isNaN(this.d)?new c(NaN):l(Math.round(p*this.s*this.n/this.d),p)},inverse:function(){return l(this.s*this.d,this.n)},pow:function(p,f){if(h(p,f),t.d===1)return t.s<0?l(Math.pow(this.s*this.d,t.n),Math.pow(this.n,t.n)):l(Math.pow(this.s*this.n,t.n),Math.pow(this.d,t.n));if(this.s<0)return null;var m=v(this.n),g=v(this.d),M=1,w=1;for(var _ in m)if(_!=="1"){if(_==="0"){M=0;break}if(m[_]*=t.n,m[_]%t.d===0)m[_]/=t.d;else return null;M*=Math.pow(_,m[_])}for(var _ in g)if(_!=="1"){if(g[_]*=t.n,g[_]%t.d===0)g[_]/=t.d;else return null;w*=Math.pow(_,g[_])}return t.s<0?l(w,M):l(M,w)},equals:function(p,f){return h(p,f),this.s*this.n*t.d===t.s*t.n*this.d},compare:function(p,f){h(p,f);var m=this.s*this.n*t.d-t.s*t.n*this.d;return(0<m)-(m<0)},simplify:function(p){if(isNaN(this.n)||isNaN(this.d))return this;p=p||.001;for(var f=this.abs(),m=f.toContinued(),g=1;g<m.length;g++){for(var M=l(m[g-1],1),w=g-2;w>=0;w--)M=M.inverse().add(m[w]);if(M.sub(f).abs().valueOf()<p)return M.mul(this.s)}return this},divisible:function(p,f){return h(p,f),!(!(t.n*this.d)||this.n*t.d%(t.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(p){var f,m="",g=this.n,M=this.d;return this.s<0&&(m+="-"),M===1?m+=g:(p&&(f=Math.floor(g/M))>0&&(m+=f,m+=" ",g%=M),m+=g,m+="/",m+=M),m},toLatex:function(p){var f,m="",g=this.n,M=this.d;return this.s<0&&(m+="-"),M===1?m+=g:(p&&(f=Math.floor(g/M))>0&&(m+=f,g%=M),m+="\\frac{",m+=g,m+="}{",m+=M,m+="}"),m},toContinued:function(){var p,f=this.n,m=this.d,g=[];if(isNaN(f)||isNaN(m))return g;do g.push(Math.floor(f/m)),p=f%m,f=m,m=p;while(f!==1);return g},toString:function(p){var f=this.n,m=this.d;if(isNaN(f)||isNaN(m))return"NaN";p=p||15;var g=o(f,m),M=a(f,m,g),w=this.s<0?"-":"";if(w+=f/m|0,f%=m,f*=10,f&&(w+="."),g){for(var _=M;_--;)w+=f/m|0,f%=m,f*=10;w+="(";for(var _=g;_--;)w+=f/m|0,f%=m,f*=10;w+=")"}else for(var _=p;f&&_--;)w+=f/m|0,f%=m,f*=10;return w}},Object.defineProperty(c,"__esModule",{value:!0}),c.default=c,c.Fraction=c,r.exports=c})()})(An);var oe=Kt(An.exports),lo="Fraction",ho=[],vo=X(lo,ho,()=>(oe.prototype.type="Fraction",oe.prototype.isFraction=!0,oe.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},oe.fromJSON=function(r){return new oe(r)},oe),{isClass:!0}),po="Matrix",mo=[],go=X(po,mo,()=>{function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator")}return r.prototype.type="Matrix",r.prototype.isMatrix=!0,r.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},r.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},r.prototype.create=function(e,i){throw new Error("Cannot invoke create on a Matrix interface")},r.prototype.subset=function(e,i,n){throw new Error("Cannot invoke subset on a Matrix interface")},r.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},r.prototype.set=function(e,i,n){throw new Error("Cannot invoke set on a Matrix interface")},r.prototype.resize=function(e,i){throw new Error("Cannot invoke resize on a Matrix interface")},r.prototype.reshape=function(e,i){throw new Error("Cannot invoke reshape on a Matrix interface")},r.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},r.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},r.prototype.map=function(e,i){throw new Error("Cannot invoke map on a Matrix interface")},r.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},r.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},r.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},r.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},r.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},r.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},r},{isClass:!0}),wo="DenseMatrix",yo=["Matrix"],Mo=X(wo,yo,r=>{var{Matrix:e}=r;function i(o,a){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(a&&!Hr(a))throw new Error("Invalid datatype: "+a);if(mr(o))o.type==="DenseMatrix"?(this._data=pr(o._data),this._size=pr(o._size),this._datatype=a||o._datatype):(this._data=o.toArray(),this._size=o.size(),this._datatype=a||o._datatype);else if(o&&ur(o.data)&&ur(o.size))this._data=o.data,this._size=o.size,_t(this._data,this._size),this._datatype=a||o.datatype;else if(ur(o))this._data=d(o),this._size=Lr(this._data),_t(this._data,this._size),this._datatype=a;else{if(o)throw new TypeError("Unsupported type of data ("+Ur(o)+")");this._data=[],this._size=[0],this._datatype=a}}i.prototype=new e,i.prototype.createDenseMatrix=function(o,a){return new i(o,a)},i.prototype.type="DenseMatrix",i.prototype.isDenseMatrix=!0,i.prototype.getDataType=function(){return Ee(this._data,Ur)},i.prototype.storage=function(){return"dense"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(o,a){return new i(o,a)},i.prototype.subset=function(o,a,u){switch(arguments.length){case 1:return n(this,o);case 2:case 3:return s(this,o,a,u);default:throw new SyntaxError("Wrong number of arguments")}},i.prototype.get=function(o){if(!ur(o))throw new TypeError("Array expected");if(o.length!==this._size.length)throw new er(o.length,this._size.length);for(var a=0;a<o.length;a++)fr(o[a],this._size[a]);for(var u=this._data,c=0,p=o.length;c<p;c++){var f=o[c];fr(f,u.length),u=u[f]}return u},i.prototype.set=function(o,a,u){if(!ur(o))throw new TypeError("Array expected");if(o.length<this._size.length)throw new er(o.length,this._size.length,"<");var c,p,f,m=o.map(function(M){return M+1});h(this,m,u);var g=this._data;for(c=0,p=o.length-1;c<p;c++)f=o[c],fr(f,g.length),g=g[f];return f=o[o.length-1],fr(f,g.length),g[f]=a,this};function n(o,a){if(!Fe(a))throw new TypeError("Invalid index");var u=a.isScalar();if(u)return o.get(a.min());var c=a.size();if(c.length!==o._size.length)throw new er(c.length,o._size.length);for(var p=a.min(),f=a.max(),m=0,g=o._size.length;m<g;m++)fr(p[m],o._size[m]),fr(f[m],o._size[m]);return new i(t(o._data,a,c.length,0),o._datatype)}function t(o,a,u,c){var p=c===u-1,f=a.dimension(c);return p?f.map(function(m){return fr(m,o.length),o[m]}).valueOf():f.map(function(m){fr(m,o.length);var g=o[m];return t(g,a,u,c+1)}).valueOf()}function s(o,a,u,c){if(!a||a.isIndex!==!0)throw new TypeError("Invalid index");var p=a.size(),f=a.isScalar(),m;if(mr(u)?(m=u.size(),u=u.valueOf()):m=Lr(u),f){if(m.length!==0)throw new TypeError("Scalar expected");o.set(a.min(),u,c)}else{if(p.length<o._size.length)throw new er(p.length,o._size.length,"<");if(m.length<p.length){for(var g=0,M=0;p[g]===1&&m[g]===1;)g++;for(;p[g]===1;)M++,g++;u=cn(u,p.length,M,m)}if(!_e(p,m))throw new er(p,m,">");var w=a.max().map(function(N){return N+1});h(o,w,c);var _=p.length,b=0;l(o._data,a,u,_,b)}return o}function l(o,a,u,c,p){var f=p===c-1,m=a.dimension(p);f?m.forEach(function(g,M){fr(g),o[g]=u[M[0]]}):m.forEach(function(g,M){fr(g),l(o[g],a,u[M[0]],c,p+1)})}i.prototype.resize=function(o,a,u){if(!at(o))throw new TypeError("Array or Matrix expected");var c=o.valueOf().map(f=>Array.isArray(f)&&f.length===1?f[0]:f),p=u?this.clone():this;return v(p,c,a)};function v(o,a,u){if(a.length===0){for(var c=o._data;ur(c);)c=c[0];return c}return o._size=a.slice(0),o._data=xe(o._data,o._size,u),o}i.prototype.reshape=function(o,a){var u=a?this.clone():this;u._data=Xi(u._data,o);var c=u._size.reduce((p,f)=>p*f);return u._size=st(o,c),u};function h(o,a,u){for(var c=o._size.slice(0),p=!1;c.length<a.length;)c.push(0),p=!0;for(var f=0,m=a.length;f<m;f++)a[f]>c[f]&&(c[f]=a[f],p=!0);p&&v(o,c,u)}i.prototype.clone=function(){var o=new i({data:pr(this._data),size:pr(this._size),datatype:this._datatype});return o},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(o){var a=this,u=function f(m,g){return ur(m)?m.map(function(M,w){return f(M,g.concat(w))}):o(m,g,a)},c=u(this._data,[]),p=this._datatype!==void 0?Ee(c,Ur):void 0;return new i(c,p)},i.prototype.forEach=function(o){var a=this,u=function c(p,f){ur(p)?p.forEach(function(m,g){c(m,f.concat(g))}):o(p,f,a)};u(this._data,[])},i.prototype[Symbol.iterator]=function*(){var o=function*a(u,c){if(ur(u))for(var p=0;p<u.length;p++)yield*a(u[p],c.concat(p));else yield{value:u,index:c}};yield*o(this._data,[])},i.prototype.rows=function(){var o=[],a=this.size();if(a.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var u=this._data;for(var c of u)o.push(new i([c],this._datatype));return o},i.prototype.columns=function(){var o=this,a=[],u=this.size();if(u.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var c=this._data,p=function(g){var M=c.map(w=>[w[g]]);a.push(new i(M,o._datatype))},f=0;f<u[1];f++)p(f);return a},i.prototype.toArray=function(){return pr(this._data)},i.prototype.valueOf=function(){return this._data},i.prototype.format=function(o){return wr(this._data,o)},i.prototype.toString=function(){return wr(this._data)},i.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(o){if(o){if(xr(o)&&(o=o.toNumber()),!lr(o)||!dr(o))throw new TypeError("The parameter k must be an integer number")}else o=0;for(var a=o>0?o:0,u=o<0?-o:0,c=this._size[0],p=this._size[1],f=Math.min(c-u,p-a),m=[],g=0;g<f;g++)m[g]=this._data[g+u][g+a];return new i({data:m,size:[f],datatype:this._datatype})},i.diagonal=function(o,a,u,c){if(!ur(o))throw new TypeError("Array expected, size parameter");if(o.length!==2)throw new Error("Only two dimensions matrix are supported");if(o=o.map(function(S){if(xr(S)&&(S=S.toNumber()),!lr(S)||!dr(S)||S<1)throw new Error("Size values must be positive integers");return S}),u){if(xr(u)&&(u=u.toNumber()),!lr(u)||!dr(u))throw new TypeError("The parameter k must be an integer number")}else u=0;var p=u>0?u:0,f=u<0?-u:0,m=o[0],g=o[1],M=Math.min(m-f,g-p),w;if(ur(a)){if(a.length!==M)throw new Error("Invalid value array length");w=function(y){return a[y]}}else if(mr(a)){var _=a.size();if(_.length!==1||_[0]!==M)throw new Error("Invalid matrix length");w=function(y){return a.get([y])}}else w=function(){return a};c||(c=xr(w(0))?w(0).mul(0):0);var b=[];if(o.length>0){b=xe(b,o,c);for(var N=0;N<M;N++)b[N+f][N+p]=w(N)}return new i({data:b,size:[m,g]})},i.fromJSON=function(o){return new i(o)},i.prototype.swapRows=function(o,a){if(!lr(o)||!dr(o)||!lr(a)||!dr(a))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return fr(o,this._size[0]),fr(a,this._size[0]),i._swapRows(o,a,this._data),this},i._swapRows=function(o,a,u){var c=u[o];u[o]=u[a],u[a]=c};function d(o){for(var a=0,u=o.length;a<u;a++){var c=o[a];ur(c)?o[a]=d(c):c&&c.isMatrix===!0&&(o[a]=d(c.valueOf()))}return o}return i},{isClass:!0});function No(r){var e=r.length,i=r[0].length,n,t,s=[];for(t=0;t<i;t++){var l=[];for(n=0;n<e;n++)l.push(r[n][t]);s.push(l)}return s}function ft(r){for(var e=0;e<r.length;e++)if(at(r[e]))return!0;return!1}function $e(r,e){mr(r)&&(r=r.valueOf());for(var i=0,n=r.length;i<n;i++){var t=r[i];Array.isArray(t)?$e(t,e):e(t)}}function Yr(r,e,i){return r&&typeof r.map=="function"?r.map(function(n){return Yr(n,e)}):e(r)}function ct(r,e,i){var n=Array.isArray(r)?Lr(r):r.size();if(e<0||e>=n.length)throw new te(e,n.length);return mr(r)?r.create(De(r.valueOf(),e,i)):De(r,e,i)}function De(r,e,i){var n,t,s,l;if(e<=0)if(Array.isArray(r[0])){for(l=No(r),t=[],n=0;n<l.length;n++)t[n]=De(l[n],e-1,i);return t}else{for(s=r[0],n=1;n<r.length;n++)s=i(s,r[n]);return s}else{for(t=[],n=0;n<r.length;n++)t[n]=De(r[n],e-1,i);return t}}var Cn="number",Dn="number, number";function On(r){return Math.abs(r)}On.signature=Cn;function Fn(r,e){return r+e}Fn.signature=Dn;function zn(r,e){return r*e}zn.signature=Dn;function Bn(r){return-r}Bn.signature=Cn;function At(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!dr(e)||e<0||e>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(an(r,e))}var bo="number";function In(r){return r===0}In.signature=bo;var Ct="isZero",_o=["typed"],xo=X(Ct,_o,r=>{var{typed:e}=r;return e(Ct,{number:In,BigNumber:function(n){return n.isZero()},Complex:function(n){return n.re===0&&n.im===0},Fraction:function(n){return n.d===1&&n.n===0},Unit:function(n){return this(n.value)},"Array | Matrix":function(n){return Yr(n,this)}})});function lt(r,e,i){if(i==null)return r.eq(e);if(r.eq(e))return!0;if(r.isNaN()||e.isNaN())return!1;if(r.isFinite()&&e.isFinite()){var n=r.minus(e).abs();if(n.isZero())return!0;var t=r.constructor.max(r.abs(),e.abs());return n.lte(t.times(i))}return!1}function Eo(r,e,i){return ce(r.re,e.re,i)&&ce(r.im,e.im,i)}var Oe="equalScalar",So=["typed","config"],Ao=X(Oe,So,r=>{var{typed:e,config:i}=r;return e(Oe,{"boolean, boolean":function(t,s){return t===s},"number, number":function(t,s){return ce(t,s,i.epsilon)},"BigNumber, BigNumber":function(t,s){return t.eq(s)||lt(t,s,i.epsilon)},"Fraction, Fraction":function(t,s){return t.equals(s)},"Complex, Complex":function(t,s){return Eo(t,s,i.epsilon)},"Unit, Unit":function(t,s){if(!t.equalBase(s))throw new Error("Cannot compare units with different base");return this(t.value,s.value)}})});X(Oe,["typed","config"],r=>{var{typed:e,config:i}=r;return e(Oe,{"number, number":function(t,s){return ce(t,s,i.epsilon)}})});var Co="SparseMatrix",Do=["typed","equalScalar","Matrix"],Oo=X(Co,Do,r=>{var{typed:e,equalScalar:i,Matrix:n}=r;function t(f,m){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(m&&!Hr(m))throw new Error("Invalid datatype: "+m);if(mr(f))s(this,f,m);else if(f&&ur(f.index)&&ur(f.ptr)&&ur(f.size))this._values=f.values,this._index=f.index,this._ptr=f.ptr,this._size=f.size,this._datatype=m||f.datatype;else if(ur(f))l(this,f,m);else{if(f)throw new TypeError("Unsupported type of data ("+Ur(f)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=m}}function s(f,m,g){m.type==="SparseMatrix"?(f._values=m._values?pr(m._values):void 0,f._index=pr(m._index),f._ptr=pr(m._ptr),f._size=pr(m._size),f._datatype=g||m._datatype):l(f,m.valueOf(),g||m._datatype)}function l(f,m,g){f._values=[],f._index=[],f._ptr=[],f._datatype=g;var M=m.length,w=0,_=i,b=0;if(Hr(g)&&(_=e.find(i,[g,g])||i,b=e.convert(0,g)),M>0){var N=0;do{f._ptr.push(f._index.length);for(var S=0;S<M;S++){var y=m[S];if(ur(y)){if(N===0&&w<y.length&&(w=y.length),N<y.length){var E=y[N];_(E,b)||(f._values.push(E),f._index.push(S))}}else N===0&&w<1&&(w=1),_(y,b)||(f._values.push(y),f._index.push(S))}N++}while(N<w)}f._ptr.push(f._index.length),f._size=[M,w]}t.prototype=new n,t.prototype.createSparseMatrix=function(f,m){return new t(f,m)},t.prototype.type="SparseMatrix",t.prototype.isSparseMatrix=!0,t.prototype.getDataType=function(){return Ee(this._values,Ur)},t.prototype.storage=function(){return"sparse"},t.prototype.datatype=function(){return this._datatype},t.prototype.create=function(f,m){return new t(f,m)},t.prototype.density=function(){var f=this._size[0],m=this._size[1];return f!==0&&m!==0?this._index.length/(f*m):0},t.prototype.subset=function(f,m,g){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return v(this,f);case 2:case 3:return h(this,f,m,g);default:throw new SyntaxError("Wrong number of arguments")}};function v(f,m){if(!Fe(m))throw new TypeError("Invalid index");var g=m.isScalar();if(g)return f.get(m.min());var M=m.size();if(M.length!==f._size.length)throw new er(M.length,f._size.length);var w,_,b,N,S=m.min(),y=m.max();for(w=0,_=f._size.length;w<_;w++)fr(S[w],f._size[w]),fr(y[w],f._size[w]);var E=f._values,D=f._index,z=f._ptr,P=m.dimension(0),$=m.dimension(1),I=[],T=[];P.forEach(function(L,Y){T[L]=Y[0],I[L]=!0});var O=E?[]:void 0,W=[],R=[];return $.forEach(function(L){for(R.push(W.length),b=z[L],N=z[L+1];b<N;b++)w=D[b],I[w]===!0&&(W.push(T[w]),O&&O.push(E[b]))}),R.push(W.length),new t({values:O,index:W,ptr:R,size:M,datatype:f._datatype})}function h(f,m,g,M){if(!m||m.isIndex!==!0)throw new TypeError("Invalid index");var w=m.size(),_=m.isScalar(),b;if(mr(g)?(b=g.size(),g=g.toArray()):b=Lr(g),_){if(b.length!==0)throw new TypeError("Scalar expected");f.set(m.min(),g,M)}else{if(w.length!==1&&w.length!==2)throw new er(w.length,f._size.length,"<");if(b.length<w.length){for(var N=0,S=0;w[N]===1&&b[N]===1;)N++;for(;w[N]===1;)S++,N++;g=cn(g,w.length,S,b)}if(!_e(w,b))throw new er(w,b,">");if(w.length===1){var y=m.dimension(0);y.forEach(function(z,P){fr(z),f.set([z,0],g[P[0]],M)})}else{var E=m.dimension(0),D=m.dimension(1);E.forEach(function(z,P){fr(z),D.forEach(function($,I){fr($),f.set([z,$],g[P[0]][I[0]],M)})})}}return f}t.prototype.get=function(f){if(!ur(f))throw new TypeError("Array expected");if(f.length!==this._size.length)throw new er(f.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var m=f[0],g=f[1];fr(m,this._size[0]),fr(g,this._size[1]);var M=d(m,this._ptr[g],this._ptr[g+1],this._index);return M<this._ptr[g+1]&&this._index[M]===m?this._values[M]:0},t.prototype.set=function(f,m,g){if(!ur(f))throw new TypeError("Array expected");if(f.length!==this._size.length)throw new er(f.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var M=f[0],w=f[1],_=this._size[0],b=this._size[1],N=i,S=0;Hr(this._datatype)&&(N=e.find(i,[this._datatype,this._datatype])||i,S=e.convert(0,this._datatype)),(M>_-1||w>b-1)&&(u(this,Math.max(M+1,_),Math.max(w+1,b),g),_=this._size[0],b=this._size[1]),fr(M,_),fr(w,b);var y=d(M,this._ptr[w],this._ptr[w+1],this._index);return y<this._ptr[w+1]&&this._index[y]===M?N(m,S)?o(y,w,this._values,this._index,this._ptr):this._values[y]=m:a(y,M,w,m,this._values,this._index,this._ptr),this};function d(f,m,g,M){if(g-m===0)return g;for(var w=m;w<g;w++)if(M[w]===f)return w;return m}function o(f,m,g,M,w){g.splice(f,1),M.splice(f,1);for(var _=m+1;_<w.length;_++)w[_]--}function a(f,m,g,M,w,_,b){w.splice(f,0,M),_.splice(f,0,m);for(var N=g+1;N<b.length;N++)b[N]++}t.prototype.resize=function(f,m,g){if(!at(f))throw new TypeError("Array or Matrix expected");var M=f.valueOf().map(_=>Array.isArray(_)&&_.length===1?_[0]:_);if(M.length!==2)throw new Error("Only two dimensions matrix are supported");M.forEach(function(_){if(!lr(_)||!dr(_)||_<0)throw new TypeError("Invalid size, must contain positive integers (size: "+wr(M)+")")});var w=g?this.clone():this;return u(w,M[0],M[1],m)};function u(f,m,g,M){var w=M||0,_=i,b=0;Hr(f._datatype)&&(_=e.find(i,[f._datatype,f._datatype])||i,b=e.convert(0,f._datatype),w=e.convert(w,f._datatype));var N=!_(w,b),S=f._size[0],y=f._size[1],E,D,z;if(g>y){for(D=y;D<g;D++)if(f._ptr[D]=f._values.length,N)for(E=0;E<S;E++)f._values.push(w),f._index.push(E);f._ptr[g]=f._values.length}else g<y&&(f._ptr.splice(g+1,y-g),f._values.splice(f._ptr[g],f._values.length),f._index.splice(f._ptr[g],f._index.length));if(y=g,m>S){if(N){var P=0;for(D=0;D<y;D++){f._ptr[D]=f._ptr[D]+P,z=f._ptr[D+1]+P;var $=0;for(E=S;E<m;E++,$++)f._values.splice(z+$,0,w),f._index.splice(z+$,0,E),P++}f._ptr[y]=f._values.length}}else if(m<S){var I=0;for(D=0;D<y;D++){f._ptr[D]=f._ptr[D]-I;var T=f._ptr[D],O=f._ptr[D+1]-I;for(z=T;z<O;z++)E=f._index[z],E>m-1&&(f._values.splice(z,1),f._index.splice(z,1),I++)}f._ptr[D]=f._values.length}return f._size[0]=m,f._size[1]=g,f}t.prototype.reshape=function(f,m){if(!ur(f))throw new TypeError("Array expected");if(f.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");f.forEach(function(L){if(!lr(L)||!dr(L)||L<=-2||L===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+wr(f)+")")});var g=this._size[0]*this._size[1];f=st(f,g);var M=f[0]*f[1];if(g!==M)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var w=m?this.clone():this;if(this._size[0]===f[0]&&this._size[1]===f[1])return w;for(var _=[],b=0;b<w._ptr.length;b++)for(var N=0;N<w._ptr[b+1]-w._ptr[b];N++)_.push(b);for(var S=w._values.slice(),y=w._index.slice(),E=0;E<w._index.length;E++){var D=y[E],z=_[E],P=D*w._size[1]+z;_[E]=P%f[1],y[E]=Math.floor(P/f[1])}w._values.length=0,w._index.length=0,w._ptr.length=f[1]+1,w._size=f.slice();for(var $=0;$<w._ptr.length;$++)w._ptr[$]=0;for(var I=0;I<S.length;I++){var T=y[I],O=_[I],W=S[I],R=d(T,w._ptr[O],w._ptr[O+1],w._index);a(R,T,O,W,w._values,w._index,w._ptr)}return w},t.prototype.clone=function(){var f=new t({values:this._values?pr(this._values):void 0,index:pr(this._index),ptr:pr(this._ptr),size:pr(this._size),datatype:this._datatype});return f},t.prototype.size=function(){return this._size.slice(0)},t.prototype.map=function(f,m){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var g=this,M=this._size[0],w=this._size[1],_=function(N,S,y){return f(N,[S,y],g)};return c(this,0,M-1,0,w-1,_,m)};function c(f,m,g,M,w,_,b){var N=[],S=[],y=[],E=i,D=0;Hr(f._datatype)&&(E=e.find(i,[f._datatype,f._datatype])||i,D=e.convert(0,f._datatype));for(var z=function(j,hr,vr){j=_(j,hr,vr),E(j,D)||(N.push(j),S.push(hr))},P=M;P<=w;P++){y.push(N.length);var $=f._ptr[P],I=f._ptr[P+1];if(b)for(var T=$;T<I;T++){var O=f._index[T];O>=m&&O<=g&&z(f._values[T],O-m,P-M)}else{for(var W={},R=$;R<I;R++){var L=f._index[R];W[L]=f._values[R]}for(var Y=m;Y<=g;Y++){var k=Y in W?W[Y]:0;z(k,Y-m,P-M)}}}return y.push(N.length),new t({values:N,index:S,ptr:y,size:[g-m+1,w-M+1]})}t.prototype.forEach=function(f,m){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var g=this,M=this._size[0],w=this._size[1],_=0;_<w;_++){var b=this._ptr[_],N=this._ptr[_+1];if(m)for(var S=b;S<N;S++){var y=this._index[S];f(this._values[S],[y,_],g)}else{for(var E={},D=b;D<N;D++){var z=this._index[D];E[z]=this._values[D]}for(var P=0;P<M;P++){var $=P in E?E[P]:0;f($,[P,_],g)}}}},t.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var f=this._size[1],m=0;m<f;m++)for(var g=this._ptr[m],M=this._ptr[m+1],w=g;w<M;w++){var _=this._index[w];yield{value:this._values[w],index:[_,m]}}},t.prototype.toArray=function(){return p(this._values,this._index,this._ptr,this._size,!0)},t.prototype.valueOf=function(){return p(this._values,this._index,this._ptr,this._size,!1)};function p(f,m,g,M,w){var _=M[0],b=M[1],N=[],S,y;for(S=0;S<_;S++)for(N[S]=[],y=0;y<b;y++)N[S][y]=0;for(y=0;y<b;y++)for(var E=g[y],D=g[y+1],z=E;z<D;z++)S=m[z],N[S][y]=f?w?pr(f[z]):f[z]:1;return N}return t.prototype.format=function(f){for(var m=this._size[0],g=this._size[1],M=this.density(),w="Sparse Matrix ["+wr(m,f)+" x "+wr(g,f)+"] density: "+wr(M,f)+`
`,_=0;_<g;_++)for(var b=this._ptr[_],N=this._ptr[_+1],S=b;S<N;S++){var y=this._index[S];w+=`
    (`+wr(y,f)+", "+wr(_,f)+") ==> "+(this._values?wr(this._values[S],f):"X")}return w},t.prototype.toString=function(){return wr(this.toArray())},t.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},t.prototype.diagonal=function(f){if(f){if(xr(f)&&(f=f.toNumber()),!lr(f)||!dr(f))throw new TypeError("The parameter k must be an integer number")}else f=0;var m=f>0?f:0,g=f<0?-f:0,M=this._size[0],w=this._size[1],_=Math.min(M-g,w-m),b=[],N=[],S=[];S[0]=0;for(var y=m;y<w&&b.length<_;y++)for(var E=this._ptr[y],D=this._ptr[y+1],z=E;z<D;z++){var P=this._index[z];if(P===y-m+g){b.push(this._values[z]),N[b.length-1]=P-g;break}}return S.push(b.length),new t({values:b,index:N,ptr:S,size:[_,1]})},t.fromJSON=function(f){return new t(f)},t.diagonal=function(f,m,g,M,w){if(!ur(f))throw new TypeError("Array expected, size parameter");if(f.length!==2)throw new Error("Only two dimensions matrix are supported");if(f=f.map(function(L){if(xr(L)&&(L=L.toNumber()),!lr(L)||!dr(L)||L<1)throw new Error("Size values must be positive integers");return L}),g){if(xr(g)&&(g=g.toNumber()),!lr(g)||!dr(g))throw new TypeError("The parameter k must be an integer number")}else g=0;var _=i,b=0;Hr(w)&&(_=e.find(i,[w,w])||i,b=e.convert(0,w));var N=g>0?g:0,S=g<0?-g:0,y=f[0],E=f[1],D=Math.min(y-S,E-N),z;if(ur(m)){if(m.length!==D)throw new Error("Invalid value array length");z=function(Y){return m[Y]}}else if(mr(m)){var P=m.size();if(P.length!==1||P[0]!==D)throw new Error("Invalid matrix length");z=function(Y){return m.get([Y])}}else z=function(){return m};for(var $=[],I=[],T=[],O=0;O<E;O++){T.push($.length);var W=O-N;if(W>=0&&W<D){var R=z(W);_(R,b)||(I.push(W+S),$.push(R))}}return T.push($.length),new t({values:$,index:I,ptr:T,size:[y,E]})},t.prototype.swapRows=function(f,m){if(!lr(f)||!dr(f)||!lr(m)||!dr(m))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return fr(f,this._size[0]),fr(m,this._size[0]),t._swapRows(f,m,this._size[1],this._values,this._index,this._ptr),this},t._forEachRow=function(f,m,g,M,w){for(var _=M[f],b=M[f+1],N=_;N<b;N++)w(g[N],m[N])},t._swapRows=function(f,m,g,M,w,_){for(var b=0;b<g;b++){var N=_[b],S=_[b+1],y=d(f,N,S,w),E=d(m,N,S,w);if(y<S&&E<S&&w[y]===f&&w[E]===m){if(M){var D=M[y];M[y]=M[E],M[E]=D}continue}if(y<S&&w[y]===f&&(E>=S||w[E]!==m)){var z=M?M[y]:void 0;w.splice(E,0,m),M&&M.splice(E,0,z),w.splice(E<=y?y+1:y,1),M&&M.splice(E<=y?y+1:y,1);continue}if(E<S&&w[E]===m&&(y>=S||w[y]!==f)){var P=M?M[E]:void 0;w.splice(y,0,f),M&&M.splice(y,0,P),w.splice(y<=E?E+1:E,1),M&&M.splice(y<=E?E+1:E,1)}}},t},{isClass:!0}),Fo="number",zo=["typed"];function Bo(r){var e=r.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var i={"0b":2,"0o":8,"0x":16}[e[1]],n=e[2],t=e[3];return{input:r,radix:i,integerPart:n,fractionalPart:t}}else return null}function Io(r){for(var e=parseInt(r.integerPart,r.radix),i=0,n=0;n<r.fractionalPart.length;n++){var t=parseInt(r.fractionalPart[n],r.radix);i+=t/Math.pow(r.radix,n+1)}var s=e+i;if(isNaN(s))throw new SyntaxError('String "'+r.input+'" is no valid number');return s}var Po=X(Fo,zo,r=>{var{typed:e}=r,i=e("number",{"":function(){return 0},number:function(t){return t},string:function(t){if(t==="NaN")return NaN;var s=Bo(t);if(s)return Io(s);var l=0,v=t.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);v&&(l=Number(v[2]),t=v[1]);var h=Number(t);if(isNaN(h))throw new SyntaxError('String "'+t+'" is no valid number');if(v){if(h>2**l-1)throw new SyntaxError('String "'.concat(t,'" is out of range'));h>=2**(l-1)&&(h=h-2**l)}return h},BigNumber:function(t){return t.toNumber()},Fraction:function(t){return t.valueOf()},Unit:function(t){throw new Error("Second argument with valueless unit expected")},null:function(t){return 0},"Unit, string | Unit":function(t,s){return t.toNumber(s)},"Array | Matrix":function(t){return Yr(t,this)}});return i.fromJSON=function(n){return parseFloat(n.value)},i}),To="bignumber",$o=["typed","BigNumber"],qo=X(To,$o,r=>{var{typed:e,BigNumber:i}=r;return e("bignumber",{"":function(){return new i(0)},number:function(t){return new i(t+"")},string:function(t){var s=t.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(s){var l=s[2],v=i(s[1]),h=new i(2).pow(Number(l));if(v.gt(h.sub(1)))throw new SyntaxError('String "'.concat(t,'" is out of range'));var d=new i(2).pow(Number(l)-1);return v.gte(d)?v.sub(h):v}return new i(t)},BigNumber:function(t){return t},Fraction:function(t){return new i(t.n).div(t.d).times(t.s)},null:function(t){return new i(0)},"Array | Matrix":function(t){return Yr(t,this)}})}),Ro="fraction",Uo=["typed","Fraction"],Lo=X(Ro,Uo,r=>{var{typed:e,Fraction:i}=r;return e("fraction",{number:function(t){if(!isFinite(t)||isNaN(t))throw new Error(t+" cannot be represented as a fraction");return new i(t)},string:function(t){return new i(t)},"number, number":function(t,s){return new i(t,s)},null:function(t){return new i(0)},BigNumber:function(t){return new i(t.toString())},Fraction:function(t){return t},Object:function(t){return new i(t)},"Array | Matrix":function(t){return Yr(t,this)}})}),Dt="matrix",Wo=["typed","Matrix","DenseMatrix","SparseMatrix"],Zo=X(Dt,Wo,r=>{var{typed:e,Matrix:i,DenseMatrix:n,SparseMatrix:t}=r;return e(Dt,{"":function(){return s([])},string:function(v){return s([],v)},"string, string":function(v,h){return s([],v,h)},Array:function(v){return s(v)},Matrix:function(v){return s(v,v.storage())},"Array | Matrix, string":s,"Array | Matrix, string, string":s});function s(l,v,h){if(v==="dense"||v==="default"||v===void 0)return new n(l,h);if(v==="sparse")return new t(l,h);throw new TypeError("Unknown matrix type "+JSON.stringify(v)+".")}}),Ot="unaryMinus",Vo=["typed"],Ho=X(Ot,Vo,r=>{var{typed:e}=r;return e(Ot,{number:Bn,Complex:function(n){return n.neg()},BigNumber:function(n){return n.neg()},Fraction:function(n){return n.neg()},Unit:function(n){var t=n.clone();return t.value=this(n.value),t},"Array | Matrix":function(n){return Yr(n,this)}})}),Ft="abs",Jo=["typed"],Yo=X(Ft,Jo,r=>{var{typed:e}=r;return e(Ft,{number:On,Complex:function(n){return n.abs()},BigNumber:function(n){return n.abs()},Fraction:function(n){return n.abs()},"Array | Matrix":function(n){return Yr(n,this)},Unit:function(n){return n.abs()}})}),zt="addScalar",Go=["typed"],Xo=X(zt,Go,r=>{var{typed:e}=r;return e(zt,{"number, number":Fn,"Complex, Complex":function(n,t){return n.add(t)},"BigNumber, BigNumber":function(n,t){return n.plus(t)},"Fraction, Fraction":function(n,t){return n.add(t)},"Unit, Unit":function(n,t){if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(t.value===null||t.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(t))throw new Error("Units do not match");var s=n.clone();return s.value=this(s.value,t.value),s.fixPrefix=!1,s}})}),Ko="algorithm11",Qo=["typed","equalScalar"],ht=X(Ko,Qo,r=>{var{typed:e,equalScalar:i}=r;return function(t,s,l,v){var h=t._values,d=t._index,o=t._ptr,a=t._size,u=t._datatype;if(!h)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var c=a[0],p=a[1],f,m=i,g=0,M=l;typeof u=="string"&&(f=u,m=e.find(i,[f,f]),g=e.convert(0,f),s=e.convert(s,f),M=e.find(l,[f,f]));for(var w=[],_=[],b=[],N=0;N<p;N++){b[N]=_.length;for(var S=o[N],y=o[N+1],E=S;E<y;E++){var D=d[E],z=v?M(s,h[E]):M(h[E],s);m(z,g)||(_.push(D),w.push(z))}}return b[p]=_.length,t.createSparseMatrix({values:w,index:_,ptr:b,size:[c,p],datatype:f})}}),jo="algorithm12",ko=["typed","DenseMatrix"],vt=X(jo,ko,r=>{var{typed:e,DenseMatrix:i}=r;return function(t,s,l,v){var h=t._values,d=t._index,o=t._ptr,a=t._size,u=t._datatype;if(!h)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var c=a[0],p=a[1],f,m=l;typeof u=="string"&&(f=u,s=e.convert(s,f),m=e.find(l,[f,f]));for(var g=[],M=[],w=[],_=0;_<p;_++){for(var b=_+1,N=o[_],S=o[_+1],y=N;y<S;y++){var E=d[y];M[E]=h[y],w[E]=b}for(var D=0;D<c;D++)_===0&&(g[D]=[]),w[D]===b?g[D][_]=v?m(s,M[D]):m(M[D],s):g[D][_]=v?m(s,0):m(0,s)}return new i({data:g,size:[c,p],datatype:f})}}),rs="algorithm14",es=["typed"],ne=X(rs,es,r=>{var{typed:e}=r;return function(t,s,l,v){var h=t._data,d=t._size,o=t._datatype,a,u=l;typeof o=="string"&&(a=o,s=e.convert(s,a),u=e.find(l,[a,a]));var c=d.length>0?i(u,0,d,d[0],h,s,v):[];return t.createDenseMatrix({data:c,size:pr(d),datatype:a})};function i(n,t,s,l,v,h,d){var o=[];if(t===s.length-1)for(var a=0;a<l;a++)o[a]=d?n(h,v[a]):n(v[a],h);else for(var u=0;u<l;u++)o[u]=i(n,t+1,s,s[t+1],v[u],h,d);return o}}),ts="algorithm01",ns=["typed"],Pn=X(ts,ns,r=>{var{typed:e}=r;return function(n,t,s,l){var v=n._data,h=n._size,d=n._datatype,o=t._values,a=t._index,u=t._ptr,c=t._size,p=t._datatype;if(h.length!==c.length)throw new er(h.length,c.length);if(h[0]!==c[0]||h[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+c+")");if(!o)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var f=h[0],m=h[1],g=typeof d=="string"&&d===p?d:void 0,M=g?e.find(s,[g,g]):s,w,_,b=[];for(w=0;w<f;w++)b[w]=[];var N=[],S=[];for(_=0;_<m;_++){for(var y=_+1,E=u[_],D=u[_+1],z=E;z<D;z++)w=a[z],N[w]=l?M(o[z],v[w][_]):M(v[w][_],o[z]),S[w]=y;for(w=0;w<f;w++)S[w]===y?b[w][_]=N[w]:b[w][_]=v[w][_]}return n.createDenseMatrix({data:b,size:[f,m],datatype:g})}}),is="algorithm04",as=["typed","equalScalar"],os=X(is,as,r=>{var{typed:e,equalScalar:i}=r;return function(t,s,l){var v=t._values,h=t._index,d=t._ptr,o=t._size,a=t._datatype,u=s._values,c=s._index,p=s._ptr,f=s._size,m=s._datatype;if(o.length!==f.length)throw new er(o.length,f.length);if(o[0]!==f[0]||o[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+f+")");var g=o[0],M=o[1],w,_=i,b=0,N=l;typeof a=="string"&&a===m&&(w=a,_=e.find(i,[w,w]),b=e.convert(0,w),N=e.find(l,[w,w]));var S=v&&u?[]:void 0,y=[],E=[],D=v&&u?[]:void 0,z=v&&u?[]:void 0,P=[],$=[],I,T,O,W,R;for(T=0;T<M;T++){E[T]=y.length;var L=T+1;for(W=d[T],R=d[T+1],O=W;O<R;O++)I=h[O],y.push(I),P[I]=L,D&&(D[I]=v[O]);for(W=p[T],R=p[T+1],O=W;O<R;O++)if(I=c[O],P[I]===L){if(D){var Y=N(D[I],u[O]);_(Y,b)?P[I]=null:D[I]=Y}}else y.push(I),$[I]=L,z&&(z[I]=u[O]);if(D&&z)for(O=E[T];O<y.length;)I=y[O],P[I]===L?(S[O]=D[I],O++):$[I]===L?(S[O]=z[I],O++):y.splice(O,1)}return E[M]=y.length,t.createSparseMatrix({values:S,index:y,ptr:E,size:[g,M],datatype:w})}}),ss="algorithm10",us=["typed","DenseMatrix"],Tn=X(ss,us,r=>{var{typed:e,DenseMatrix:i}=r;return function(t,s,l,v){var h=t._values,d=t._index,o=t._ptr,a=t._size,u=t._datatype;if(!h)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var c=a[0],p=a[1],f,m=l;typeof u=="string"&&(f=u,s=e.convert(s,f),m=e.find(l,[f,f]));for(var g=[],M=[],w=[],_=0;_<p;_++){for(var b=_+1,N=o[_],S=o[_+1],y=N;y<S;y++){var E=d[y];M[E]=h[y],w[E]=b}for(var D=0;D<c;D++)_===0&&(g[D]=[]),w[D]===b?g[D][_]=v?m(s,M[D]):m(M[D],s):g[D][_]=s}return new i({data:g,size:[c,p],datatype:f})}}),fs="algorithm13",cs=["typed"],qe=X(fs,cs,r=>{var{typed:e}=r;return function(t,s,l){var v=t._data,h=t._size,d=t._datatype,o=s._data,a=s._size,u=s._datatype,c=[];if(h.length!==a.length)throw new er(h.length,a.length);for(var p=0;p<h.length;p++){if(h[p]!==a[p])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+a+")");c[p]=h[p]}var f,m=l;typeof d=="string"&&d===u&&(f=d,m=e.find(l,[f,f]));var g=c.length>0?i(m,0,c,c[0],v,o):[];return t.createDenseMatrix({data:g,size:c,datatype:f})};function i(n,t,s,l,v,h){var d=[];if(t===s.length-1)for(var o=0;o<l;o++)d[o]=n(v[o],h[o]);else for(var a=0;a<l;a++)d[a]=i(n,t+1,s,s[t+1],v[a],h[a]);return d}}),ls="algorithm03",hs=["typed"],pt=X(ls,hs,r=>{var{typed:e}=r;return function(n,t,s,l){var v=n._data,h=n._size,d=n._datatype,o=t._values,a=t._index,u=t._ptr,c=t._size,p=t._datatype;if(h.length!==c.length)throw new er(h.length,c.length);if(h[0]!==c[0]||h[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+c+")");if(!o)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var f=h[0],m=h[1],g,M=0,w=s;typeof d=="string"&&d===p&&(g=d,M=e.convert(0,g),w=e.find(s,[g,g]));for(var _=[],b=0;b<f;b++)_[b]=[];for(var N=[],S=[],y=0;y<m;y++){for(var E=y+1,D=u[y],z=u[y+1],P=D;P<z;P++){var $=a[P];N[$]=l?w(o[P],v[$][y]):w(v[$][y],o[P]),S[$]=E}for(var I=0;I<f;I++)S[I]===E?_[I][y]=N[I]:_[I][y]=l?w(M,v[I][y]):w(v[I][y],M)}return n.createDenseMatrix({data:_,size:[f,m],datatype:g})}}),vs="algorithm05",ps=["typed","equalScalar"],ds=X(vs,ps,r=>{var{typed:e,equalScalar:i}=r;return function(t,s,l){var v=t._values,h=t._index,d=t._ptr,o=t._size,a=t._datatype,u=s._values,c=s._index,p=s._ptr,f=s._size,m=s._datatype;if(o.length!==f.length)throw new er(o.length,f.length);if(o[0]!==f[0]||o[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+f+")");var g=o[0],M=o[1],w,_=i,b=0,N=l;typeof a=="string"&&a===m&&(w=a,_=e.find(i,[w,w]),b=e.convert(0,w),N=e.find(l,[w,w]));var S=v&&u?[]:void 0,y=[],E=[],D=S?[]:void 0,z=S?[]:void 0,P=[],$=[],I,T,O,W;for(T=0;T<M;T++){E[T]=y.length;var R=T+1;for(O=d[T],W=d[T+1];O<W;O++)I=h[O],y.push(I),P[I]=R,D&&(D[I]=v[O]);for(O=p[T],W=p[T+1];O<W;O++)I=c[O],P[I]!==R&&y.push(I),$[I]=R,z&&(z[I]=u[O]);if(S)for(O=E[T];O<y.length;){I=y[O];var L=P[I],Y=$[I];if(L===R||Y===R){var k=L===R?D[I]:b,rr=Y===R?z[I]:b,j=N(k,rr);_(j,b)?y.splice(O,1):(S.push(j),O++)}}}return E[M]=y.length,t.createSparseMatrix({values:S,index:y,ptr:E,size:[g,M],datatype:w})}}),ms="multiplyScalar",gs=["typed"],ws=X(ms,gs,r=>{var{typed:e}=r;return e("multiplyScalar",{"number, number":zn,"Complex, Complex":function(n,t){return n.mul(t)},"BigNumber, BigNumber":function(n,t){return n.times(t)},"Fraction, Fraction":function(n,t){return n.mul(t)},"number | Fraction | BigNumber | Complex, Unit":function(n,t){var s=t.clone();return s.value=s.value===null?s._normalize(n):this(s.value,n),s},"Unit, number | Fraction | BigNumber | Complex":function(n,t){var s=n.clone();return s.value=s.value===null?s._normalize(t):this(s.value,t),s},"Unit, Unit":function(n,t){return n.multiply(t)}})}),Bt="multiply",ys=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],Ms=X(Bt,ys,r=>{var{typed:e,matrix:i,addScalar:n,multiplyScalar:t,equalScalar:s,dot:l}=r,v=ht({typed:e,equalScalar:s}),h=ne({typed:e});function d(b,N){switch(b.length){case 1:switch(N.length){case 1:if(b[0]!==N[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(b[0]!==N[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+b[0]+") must match Matrix rows ("+N[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+N.length+" dimensions)")}break;case 2:switch(N.length){case 1:if(b[1]!==N[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+b[1]+") must match Vector length ("+N[0]+")");break;case 2:if(b[1]!==N[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+b[1]+") must match Matrix B rows ("+N[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+N.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+b.length+" dimensions)")}}function o(b,N,S){if(S===0)throw new Error("Cannot multiply two empty vectors");return l(b,N)}function a(b,N){if(N.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return u(b,N)}function u(b,N){var S=b._data,y=b._size,E=b._datatype,D=N._data,z=N._size,P=N._datatype,$=y[0],I=z[1],T,O=n,W=t;E&&P&&E===P&&typeof E=="string"&&(T=E,O=e.find(n,[T,T]),W=e.find(t,[T,T]));for(var R=[],L=0;L<I;L++){for(var Y=W(S[0],D[0][L]),k=1;k<$;k++)Y=O(Y,W(S[k],D[k][L]));R[L]=Y}return b.createDenseMatrix({data:R,size:[I],datatype:T})}var c=e("_multiplyMatrixVector",{"DenseMatrix, any":f,"SparseMatrix, any":M}),p=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":m,"DenseMatrix, SparseMatrix":g,"SparseMatrix, DenseMatrix":w,"SparseMatrix, SparseMatrix":_});function f(b,N){var S=b._data,y=b._size,E=b._datatype,D=N._data,z=N._datatype,P=y[0],$=y[1],I,T=n,O=t;E&&z&&E===z&&typeof E=="string"&&(I=E,T=e.find(n,[I,I]),O=e.find(t,[I,I]));for(var W=[],R=0;R<P;R++){for(var L=S[R],Y=O(L[0],D[0]),k=1;k<$;k++)Y=T(Y,O(L[k],D[k]));W[R]=Y}return b.createDenseMatrix({data:W,size:[P],datatype:I})}function m(b,N){var S=b._data,y=b._size,E=b._datatype,D=N._data,z=N._size,P=N._datatype,$=y[0],I=y[1],T=z[1],O,W=n,R=t;E&&P&&E===P&&typeof E=="string"&&(O=E,W=e.find(n,[O,O]),R=e.find(t,[O,O]));for(var L=[],Y=0;Y<$;Y++){var k=S[Y];L[Y]=[];for(var rr=0;rr<T;rr++){for(var j=R(k[0],D[0][rr]),hr=1;hr<I;hr++)j=W(j,R(k[hr],D[hr][rr]));L[Y][rr]=j}}return b.createDenseMatrix({data:L,size:[$,T],datatype:O})}function g(b,N){var S=b._data,y=b._size,E=b._datatype,D=N._values,z=N._index,P=N._ptr,$=N._size,I=N._datatype;if(!D)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var T=y[0],O=$[1],W,R=n,L=t,Y=s,k=0;E&&I&&E===I&&typeof E=="string"&&(W=E,R=e.find(n,[W,W]),L=e.find(t,[W,W]),Y=e.find(s,[W,W]),k=e.convert(0,W));for(var rr=[],j=[],hr=[],vr=N.createSparseMatrix({values:rr,index:j,ptr:hr,size:[T,O],datatype:W}),gr=0;gr<O;gr++){hr[gr]=j.length;var sr=P[gr],Sr=P[gr+1];if(Sr>sr)for(var cr=0,ar=0;ar<T;ar++){for(var Cr=ar+1,Mr=void 0,nr=sr;nr<Sr;nr++){var Nr=z[nr];cr!==Cr?(Mr=L(S[ar][Nr],D[nr]),cr=Cr):Mr=R(Mr,L(S[ar][Nr],D[nr]))}cr===Cr&&!Y(Mr,k)&&(j.push(ar),rr.push(Mr))}}return hr[O]=j.length,vr}function M(b,N){var S=b._values,y=b._index,E=b._ptr,D=b._datatype;if(!S)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var z=N._data,P=N._datatype,$=b._size[0],I=N._size[0],T=[],O=[],W=[],R,L=n,Y=t,k=s,rr=0;D&&P&&D===P&&typeof D=="string"&&(R=D,L=e.find(n,[R,R]),Y=e.find(t,[R,R]),k=e.find(s,[R,R]),rr=e.convert(0,R));var j=[],hr=[];W[0]=0;for(var vr=0;vr<I;vr++){var gr=z[vr];if(!k(gr,rr))for(var sr=E[vr],Sr=E[vr+1],cr=sr;cr<Sr;cr++){var ar=y[cr];hr[ar]?j[ar]=L(j[ar],Y(gr,S[cr])):(hr[ar]=!0,O.push(ar),j[ar]=Y(gr,S[cr]))}}for(var Cr=O.length,Mr=0;Mr<Cr;Mr++){var nr=O[Mr];T[Mr]=j[nr]}return W[1]=O.length,b.createSparseMatrix({values:T,index:O,ptr:W,size:[$,1],datatype:R})}function w(b,N){var S=b._values,y=b._index,E=b._ptr,D=b._datatype;if(!S)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var z=N._data,P=N._datatype,$=b._size[0],I=N._size[0],T=N._size[1],O,W=n,R=t,L=s,Y=0;D&&P&&D===P&&typeof D=="string"&&(O=D,W=e.find(n,[O,O]),R=e.find(t,[O,O]),L=e.find(s,[O,O]),Y=e.convert(0,O));for(var k=[],rr=[],j=[],hr=b.createSparseMatrix({values:k,index:rr,ptr:j,size:[$,T],datatype:O}),vr=[],gr=[],sr=0;sr<T;sr++){j[sr]=rr.length;for(var Sr=sr+1,cr=0;cr<I;cr++){var ar=z[cr][sr];if(!L(ar,Y))for(var Cr=E[cr],Mr=E[cr+1],nr=Cr;nr<Mr;nr++){var Nr=y[nr];gr[Nr]!==Sr?(gr[Nr]=Sr,rr.push(Nr),vr[Nr]=R(ar,S[nr])):vr[Nr]=W(vr[Nr],R(ar,S[nr]))}}for(var Dr=j[sr],Gr=rr.length,$r=Dr;$r<Gr;$r++){var ie=rr[$r];k[$r]=vr[ie]}}return j[T]=rr.length,hr}function _(b,N){var S=b._values,y=b._index,E=b._ptr,D=b._datatype,z=N._values,P=N._index,$=N._ptr,I=N._datatype,T=b._size[0],O=N._size[1],W=S&&z,R,L=n,Y=t;D&&I&&D===I&&typeof D=="string"&&(R=D,L=e.find(n,[R,R]),Y=e.find(t,[R,R]));for(var k=W?[]:void 0,rr=[],j=[],hr=b.createSparseMatrix({values:k,index:rr,ptr:j,size:[T,O],datatype:R}),vr=W?[]:void 0,gr=[],sr,Sr,cr,ar,Cr,Mr,nr,Nr,Dr=0;Dr<O;Dr++){j[Dr]=rr.length;var Gr=Dr+1;for(Cr=$[Dr],Mr=$[Dr+1],ar=Cr;ar<Mr;ar++)if(Nr=P[ar],W)for(Sr=E[Nr],cr=E[Nr+1],sr=Sr;sr<cr;sr++)nr=y[sr],gr[nr]!==Gr?(gr[nr]=Gr,rr.push(nr),vr[nr]=Y(z[ar],S[sr])):vr[nr]=L(vr[nr],Y(z[ar],S[sr]));else for(Sr=E[Nr],cr=E[Nr+1],sr=Sr;sr<cr;sr++)nr=y[sr],gr[nr]!==Gr&&(gr[nr]=Gr,rr.push(nr));if(W)for(var $r=j[Dr],ie=rr.length,re=$r;re<ie;re++){var x=rr[re];k[re]=vr[x]}}return j[O]=rr.length,hr}return e(Bt,ot({"Array, Array":function(N,S){d(Lr(N),Lr(S));var y=this(i(N),i(S));return mr(y)?y.valueOf():y},"Matrix, Matrix":function(N,S){var y=N.size(),E=S.size();return d(y,E),y.length===1?E.length===1?o(N,S,y[0]):a(N,S):E.length===1?c(N,S):p(N,S)},"Matrix, Array":function(N,S){return this(N,i(S))},"Array, Matrix":function(N,S){return this(i(N,S.storage()),S)},"SparseMatrix, any":function(N,S){return v(N,S,t,!1)},"DenseMatrix, any":function(N,S){return h(N,S,t,!1)},"any, SparseMatrix":function(N,S){return v(S,N,t,!0)},"any, DenseMatrix":function(N,S){return h(S,N,t,!0)},"Array, any":function(N,S){return h(i(N),S,t,!1).valueOf()},"any, Array":function(N,S){return h(i(S),N,t,!0).valueOf()},"any, any":t,"any, any, ...any":function(N,S,y){for(var E=this(N,S),D=0;D<y.length;D++)E=this(E,y[D]);return E}},t.signatures))}),It="subtract",Ns=["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],bs=X(It,Ns,r=>{var{typed:e,matrix:i,equalScalar:n,addScalar:t,unaryMinus:s,DenseMatrix:l}=r,v=Pn({typed:e}),h=pt({typed:e}),d=ds({typed:e,equalScalar:n}),o=Tn({typed:e,DenseMatrix:l}),a=qe({typed:e}),u=ne({typed:e});return e(It,{"number, number":function(p,f){return p-f},"Complex, Complex":function(p,f){return p.sub(f)},"BigNumber, BigNumber":function(p,f){return p.minus(f)},"Fraction, Fraction":function(p,f){return p.sub(f)},"Unit, Unit":function(p,f){if(p.value===null)throw new Error("Parameter x contains a unit with undefined value");if(f.value===null)throw new Error("Parameter y contains a unit with undefined value");if(!p.equalBase(f))throw new Error("Units do not match");var m=p.clone();return m.value=this(m.value,f.value),m.fixPrefix=!1,m},"SparseMatrix, SparseMatrix":function(p,f){return Ne(p,f),d(p,f,this)},"SparseMatrix, DenseMatrix":function(p,f){return Ne(p,f),h(f,p,this,!0)},"DenseMatrix, SparseMatrix":function(p,f){return Ne(p,f),v(p,f,this,!1)},"DenseMatrix, DenseMatrix":function(p,f){return Ne(p,f),a(p,f,this)},"Array, Array":function(p,f){return this(i(p),i(f)).valueOf()},"Array, Matrix":function(p,f){return this(i(p),f)},"Matrix, Array":function(p,f){return this(p,i(f))},"SparseMatrix, any":function(p,f){return o(p,s(f),t)},"DenseMatrix, any":function(p,f){return u(p,f,this)},"any, SparseMatrix":function(p,f){return o(f,p,this,!0)},"any, DenseMatrix":function(p,f){return u(f,p,this,!0)},"Array, any":function(p,f){return u(i(p),f,this,!1).valueOf()},"any, Array":function(p,f){return u(i(f),p,this,!0).valueOf()}})});function Ne(r,e){var i=r.size(),n=e.size();if(i.length!==n.length)throw new er(i.length,n.length)}var _s="algorithm07",xs=["typed","DenseMatrix"],$n=X(_s,xs,r=>{var{typed:e,DenseMatrix:i}=r;return function(s,l,v){var h=s._size,d=s._datatype,o=l._size,a=l._datatype;if(h.length!==o.length)throw new er(h.length,o.length);if(h[0]!==o[0]||h[1]!==o[1])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+o+")");var u=h[0],c=h[1],p,f=0,m=v;typeof d=="string"&&d===a&&(p=d,f=e.convert(0,p),m=e.find(v,[p,p]));var g,M,w=[];for(g=0;g<u;g++)w[g]=[];var _=[],b=[],N=[],S=[];for(M=0;M<c;M++){var y=M+1;for(n(s,M,N,_,y),n(l,M,S,b,y),g=0;g<u;g++){var E=N[g]===y?_[g]:f,D=S[g]===y?b[g]:f;w[g][M]=m(E,D)}}return new i({data:w,size:[u,c],datatype:p})};function n(t,s,l,v,h){for(var d=t._values,o=t._index,a=t._ptr,u=a[s],c=a[s+1];u<c;u++){var p=o[u];l[p]=h,v[p]=d[u]}}}),Pt="conj",Es=["typed"],Ss=X(Pt,Es,r=>{var{typed:e}=r;return e(Pt,{number:function(n){return n},BigNumber:function(n){return n},Complex:function(n){return n.conjugate()},"Array | Matrix":function(n){return Yr(n,this)}})}),Tt="identity",As=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],Cs=X(Tt,As,r=>{var{typed:e,config:i,matrix:n,BigNumber:t,DenseMatrix:s,SparseMatrix:l}=r;return e(Tt,{"":function(){return i.matrix==="Matrix"?n([]):[]},string:function(o){return n(o)},"number | BigNumber":function(o){return h(o,o,i.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(o,a){return h(o,o,a)},"number | BigNumber, number | BigNumber":function(o,a){return h(o,a,i.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(o,a,u){return h(o,a,u)},Array:function(o){return v(o)},"Array, string":function(o,a){return v(o,a)},Matrix:function(o){return v(o.valueOf(),o.storage())},"Matrix, string":function(o,a){return v(o.valueOf(),a)}});function v(d,o){switch(d.length){case 0:return o?n(o):[];case 1:return h(d[0],d[0],o);case 2:return h(d[0],d[1],o);default:throw new Error("Vector containing two values expected")}}function h(d,o,a){var u=xr(d)||xr(o)?t:null;if(xr(d)&&(d=d.toNumber()),xr(o)&&(o=o.toNumber()),!dr(d)||d<1)throw new Error("Parameters in function identity must be positive integers");if(!dr(o)||o<1)throw new Error("Parameters in function identity must be positive integers");var c=u?new t(1):1,p=u?new u(0):0,f=[d,o];if(a){if(a==="sparse")return l.diagonal(f,c,0,p);if(a==="dense")return s.diagonal(f,c,0,p);throw new TypeError('Unknown matrix type "'.concat(a,'"'))}for(var m=xe([],f,p),g=d<o?d:o,M=0;M<g;M++)m[M][M]=c;return m}});function Ds(){throw new Error('No "bignumber" implementation available')}function Os(){throw new Error('No "fraction" implementation available')}function Fs(){throw new Error('No "matrix" implementation available')}var $t="size",zs=["typed","config","?matrix"],Bs=X($t,zs,r=>{var{typed:e,config:i,matrix:n}=r;return e($t,{Matrix:function(s){return s.create(s.size())},Array:Lr,string:function(s){return i.matrix==="Array"?[s.length]:n([s.length])},"number | Complex | BigNumber | Unit | boolean | null":function(s){return i.matrix==="Array"?[]:n?n([]):Fs()}})}),qt="zeros",Is=["typed","config","matrix","BigNumber"],Ps=X(qt,Is,r=>{var{typed:e,config:i,matrix:n,BigNumber:t}=r;return e(qt,{"":function(){return i.matrix==="Array"?s([]):s([],"default")},"...number | BigNumber | string":function(d){var o=d[d.length-1];if(typeof o=="string"){var a=d.pop();return s(d,a)}else return i.matrix==="Array"?s(d):s(d,"default")},Array:s,Matrix:function(d){var o=d.storage();return s(d.valueOf(),o)},"Array | Matrix, string":function(d,o){return s(d.valueOf(),o)}});function s(h,d){var o=l(h),a=o?new t(0):0;if(v(h),d){var u=n(d);return h.length>0?u.resize(h,a):u}else{var c=[];return h.length>0?xe(c,h,a):c}}function l(h){var d=!1;return h.forEach(function(o,a,u){xr(o)&&(d=!0,u[a]=o.toNumber())}),d}function v(h){h.forEach(function(d){if(typeof d!="number"||!dr(d)||d<0)throw new Error("Parameters in function zeros must be positive integers")})}});function ve(r,e,i){var n;return String(r).indexOf("Unexpected type")!==-1?(n=arguments.length>2?" (type: "+Ur(i)+", value: "+JSON.stringify(i)+")":" (type: "+r.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+n)):String(r).indexOf("complex numbers")!==-1?(n=arguments.length>2?" (type: "+Ur(i)+", value: "+JSON.stringify(i)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+n)):r}var Ts="numeric",$s=["number","?bignumber","?fraction"],qs=X(Ts,$s,r=>{var{number:e,bignumber:i,fraction:n}=r,t={string:!0,number:!0,BigNumber:!0,Fraction:!0},s={number:l=>e(l),BigNumber:i?l=>i(l):Ds,Fraction:n?l=>n(l):Os};return function(v,h){var d=Ur(v);if(!(d in t))throw new TypeError("Cannot convert "+v+' of type "'+d+'"; valid input types are '+Object.keys(t).join(", "));if(!(h in s))throw new TypeError("Cannot convert "+v+' to type "'+h+'"; valid output types are '+Object.keys(s).join(", "));return h===d?v:s[h](v)}}),Rt="divideScalar",Rs=["typed","numeric"],Us=X(Rt,Rs,r=>{var{typed:e,numeric:i}=r;return e(Rt,{"number, number":function(t,s){return t/s},"Complex, Complex":function(t,s){return t.div(s)},"BigNumber, BigNumber":function(t,s){return t.div(s)},"Fraction, Fraction":function(t,s){return t.div(s)},"Unit, number | Fraction | BigNumber":function(t,s){var l=t.clone(),v=i(1,Ur(s));return l.value=this(l.value===null?l._normalize(v):l.value,s),l},"number | Fraction | BigNumber, Unit":function(t,s){var l=s.clone();l=l.pow(-1);var v=i(1,Ur(t));return l.value=this(t,s.value===null?s._normalize(v):s.value),l},"Unit, Unit":function(t,s){return t.divide(s)}})}),se="Number of decimals in function round must be an integer",Ut="round",Ls=["typed","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],Ws=X(Ut,Ls,r=>{var{typed:e,matrix:i,equalScalar:n,zeros:t,BigNumber:s,DenseMatrix:l}=r,v=ht({typed:e,equalScalar:n}),h=vt({typed:e,DenseMatrix:l}),d=ne({typed:e});return e(Ut,{number:At,"number, number":At,"number, BigNumber":function(a,u){if(!u.isInteger())throw new TypeError(se);return new s(a).toDecimalPlaces(u.toNumber())},Complex:function(a){return a.round()},"Complex, number":function(a,u){if(u%1)throw new TypeError(se);return a.round(u)},"Complex, BigNumber":function(a,u){if(!u.isInteger())throw new TypeError(se);var c=u.toNumber();return a.round(c)},BigNumber:function(a){return a.toDecimalPlaces(0)},"BigNumber, BigNumber":function(a,u){if(!u.isInteger())throw new TypeError(se);return a.toDecimalPlaces(u.toNumber())},Fraction:function(a){return a.round()},"Fraction, number":function(a,u){if(u%1)throw new TypeError(se);return a.round(u)},"Fraction, BigNumber":function(a,u){if(!u.isInteger())throw new TypeError(se);return a.round(u.toNumber())},"Array | Matrix":function(a){return Yr(a,this)},"SparseMatrix, number | BigNumber":function(a,u){return v(a,u,this,!1)},"DenseMatrix, number | BigNumber":function(a,u){return d(a,u,this,!1)},"Array, number | BigNumber":function(a,u){return d(i(a),u,this,!1).valueOf()},"number | Complex | BigNumber | Fraction, SparseMatrix":function(a,u){return n(a,0)?t(u.size(),u.storage()):h(u,a,this,!0)},"number | Complex | BigNumber | Fraction, DenseMatrix":function(a,u){return n(a,0)?t(u.size(),u.storage()):d(u,a,this,!0)},"number | Complex | BigNumber | Fraction, Array":function(a,u){return d(i(u),a,this,!0).valueOf()}})}),Lt="smaller",Zs=["typed","config","matrix","DenseMatrix"],Vs=X(Lt,Zs,r=>{var{typed:e,config:i,matrix:n,DenseMatrix:t}=r,s=pt({typed:e}),l=$n({typed:e,DenseMatrix:t}),v=vt({typed:e,DenseMatrix:t}),h=qe({typed:e}),d=ne({typed:e});return e(Lt,{"boolean, boolean":function(a,u){return a<u},"number, number":function(a,u){return a<u&&!ce(a,u,i.epsilon)},"BigNumber, BigNumber":function(a,u){return a.lt(u)&&!lt(a,u,i.epsilon)},"Fraction, Fraction":function(a,u){return a.compare(u)===-1},"Complex, Complex":function(a,u){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(a,u){if(!a.equalBase(u))throw new Error("Cannot compare units with different base");return this(a.value,u.value)},"SparseMatrix, SparseMatrix":function(a,u){return l(a,u,this)},"SparseMatrix, DenseMatrix":function(a,u){return s(u,a,this,!0)},"DenseMatrix, SparseMatrix":function(a,u){return s(a,u,this,!1)},"DenseMatrix, DenseMatrix":function(a,u){return h(a,u,this)},"Array, Array":function(a,u){return this(n(a),n(u)).valueOf()},"Array, Matrix":function(a,u){return this(n(a),u)},"Matrix, Array":function(a,u){return this(a,n(u))},"SparseMatrix, any":function(a,u){return v(a,u,this,!1)},"DenseMatrix, any":function(a,u){return d(a,u,this,!1)},"any, SparseMatrix":function(a,u){return v(u,a,this,!0)},"any, DenseMatrix":function(a,u){return d(u,a,this,!0)},"Array, any":function(a,u){return d(n(a),u,this,!1).valueOf()},"any, Array":function(a,u){return d(n(u),a,this,!0).valueOf()}})}),Wt="larger",Hs=["typed","config","matrix","DenseMatrix"],Js=X(Wt,Hs,r=>{var{typed:e,config:i,matrix:n,DenseMatrix:t}=r,s=pt({typed:e}),l=$n({typed:e,DenseMatrix:t}),v=vt({typed:e,DenseMatrix:t}),h=qe({typed:e}),d=ne({typed:e});return e(Wt,{"boolean, boolean":function(a,u){return a>u},"number, number":function(a,u){return a>u&&!ce(a,u,i.epsilon)},"BigNumber, BigNumber":function(a,u){return a.gt(u)&&!lt(a,u,i.epsilon)},"Fraction, Fraction":function(a,u){return a.compare(u)===1},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(a,u){if(!a.equalBase(u))throw new Error("Cannot compare units with different base");return this(a.value,u.value)},"SparseMatrix, SparseMatrix":function(a,u){return l(a,u,this)},"SparseMatrix, DenseMatrix":function(a,u){return s(u,a,this,!0)},"DenseMatrix, SparseMatrix":function(a,u){return s(a,u,this,!1)},"DenseMatrix, DenseMatrix":function(a,u){return h(a,u,this)},"Array, Array":function(a,u){return this(n(a),n(u)).valueOf()},"Array, Matrix":function(a,u){return this(n(a),u)},"Matrix, Array":function(a,u){return this(a,n(u))},"SparseMatrix, any":function(a,u){return v(a,u,this,!1)},"DenseMatrix, any":function(a,u){return d(a,u,this,!1)},"any, SparseMatrix":function(a,u){return v(u,a,this,!0)},"any, DenseMatrix":function(a,u){return d(u,a,this,!0)},"Array, any":function(a,u){return d(n(a),u,this,!1).valueOf()},"any, Array":function(a,u){return d(n(u),a,this,!0).valueOf()}})}),Zt="max",Ys=["typed","config","numeric","larger"],Gs=X(Zt,Ys,r=>{var{typed:e,config:i,numeric:n,larger:t}=r;return e(Zt,{"Array | Matrix":l,"Array | Matrix, number | BigNumber":function(h,d){return ct(h,d.valueOf(),s)},"...":function(h){if(ft(h))throw new TypeError("Scalar values expected in function max");return l(h)}});function s(v,h){try{return t(v,h)?v:h}catch(d){throw ve(d,"max",h)}}function l(v){var h;if($e(v,function(d){try{isNaN(d)&&typeof d=="number"?h=NaN:(h===void 0||t(d,h))&&(h=d)}catch(o){throw ve(o,"max",d)}}),h===void 0)throw new Error("Cannot calculate max of an empty array");return typeof h=="string"&&(h=n(h,i.number)),h}}),Vt="min",Xs=["typed","config","numeric","smaller"],Ks=X(Vt,Xs,r=>{var{typed:e,config:i,numeric:n,smaller:t}=r;return e(Vt,{"Array | Matrix":l,"Array | Matrix, number | BigNumber":function(h,d){return ct(h,d.valueOf(),s)},"...":function(h){if(ft(h))throw new TypeError("Scalar values expected in function min");return l(h)}});function s(v,h){try{return t(v,h)?v:h}catch(d){throw ve(d,"min",h)}}function l(v){var h;if($e(v,function(d){try{isNaN(d)&&typeof d=="number"?h=NaN:(h===void 0||t(d,h))&&(h=d)}catch(o){throw ve(o,"min",d)}}),h===void 0)throw new Error("Cannot calculate min of an empty array");return typeof h=="string"&&(h=n(h,i.number)),h}}),Ht="add",Qs=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix"],js=X(Ht,Qs,r=>{var{typed:e,matrix:i,addScalar:n,equalScalar:t,DenseMatrix:s,SparseMatrix:l}=r,v=Pn({typed:e}),h=os({typed:e,equalScalar:t}),d=Tn({typed:e,DenseMatrix:s}),o=qe({typed:e}),a=ne({typed:e});return e(Ht,ot({"DenseMatrix, DenseMatrix":function(c,p){return o(c,p,n)},"DenseMatrix, SparseMatrix":function(c,p){return v(c,p,n,!1)},"SparseMatrix, DenseMatrix":function(c,p){return v(p,c,n,!0)},"SparseMatrix, SparseMatrix":function(c,p){return h(c,p,n)},"Array, Array":function(c,p){return this(i(c),i(p)).valueOf()},"Array, Matrix":function(c,p){return this(i(c),p)},"Matrix, Array":function(c,p){return this(c,i(p))},"DenseMatrix, any":function(c,p){return a(c,p,n,!1)},"SparseMatrix, any":function(c,p){return d(c,p,n,!1)},"any, DenseMatrix":function(c,p){return a(p,c,n,!0)},"any, SparseMatrix":function(c,p){return d(p,c,n,!0)},"Array, any":function(c,p){return a(i(c),p,n,!1).valueOf()},"any, Array":function(c,p){return a(i(p),c,n,!0).valueOf()},"any, any":n,"any, any, ...any":function(c,p,f){for(var m=this(c,p),g=0;g<f.length;g++)m=this(m,f[g]);return m}},n.signatures))}),Jt="dot",ks=["typed","addScalar","multiplyScalar","conj","size"],ru=X(Jt,ks,r=>{var{typed:e,addScalar:i,multiplyScalar:n,conj:t,size:s}=r;return e(Jt,{"Array | DenseMatrix, Array | DenseMatrix":v,"SparseMatrix, SparseMatrix":h});function l(o,a){var u=d(o),c=d(a),p,f;if(u.length===1)p=u[0];else if(u.length===2&&u[1]===1)p=u[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+u.join(", ")+")");if(c.length===1)f=c[0];else if(c.length===2&&c[1]===1)f=c[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+c.join(", ")+")");if(p!==f)throw new RangeError("Vectors must have equal length ("+p+" != "+f+")");if(p===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return p}function v(o,a){var u=l(o,a),c=mr(o)?o._data:o,p=mr(o)?o._datatype:void 0,f=mr(a)?a._data:a,m=mr(a)?a._datatype:void 0,g=d(o).length===2,M=d(a).length===2,w=i,_=n;if(p&&m&&p===m&&typeof p=="string"){var b=p;w=e.find(i,[b,b]),_=e.find(n,[b,b])}if(!g&&!M){for(var N=_(t(c[0]),f[0]),S=1;S<u;S++)N=w(N,_(t(c[S]),f[S]));return N}if(!g&&M){for(var y=_(t(c[0]),f[0][0]),E=1;E<u;E++)y=w(y,_(t(c[E]),f[E][0]));return y}if(g&&!M){for(var D=_(t(c[0][0]),f[0]),z=1;z<u;z++)D=w(D,_(t(c[z][0]),f[z]));return D}if(g&&M){for(var P=_(t(c[0][0]),f[0][0]),$=1;$<u;$++)P=w(P,_(t(c[$][0]),f[$][0]));return P}}function h(o,a){l(o,a);for(var u=o._index,c=o._values,p=a._index,f=a._values,m=0,g=i,M=n,w=0,_=0;w<u.length&&_<p.length;){var b=u[w],N=p[_];if(b<N){w++;continue}if(b>N){_++;continue}b===N&&(m=g(m,M(c[w],f[_])),w++,_++)}return m}function d(o){return mr(o)?o.size():s(o)}}),Yt="det",eu=["typed","matrix","subtract","multiply","divideScalar","isZero","unaryMinus"],tu=X(Yt,eu,r=>{var{typed:e,matrix:i,subtract:n,multiply:t,divideScalar:s,isZero:l,unaryMinus:v}=r;return e(Yt,{any:function(o){return pr(o)},"Array | Matrix":function(o){var a;switch(mr(o)?a=o.size():Array.isArray(o)?(o=i(o),a=o.size()):a=[],a.length){case 0:return pr(o);case 1:if(a[0]===1)return pr(o.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+wr(a)+")");case 2:{var u=a[0],c=a[1];if(u===c)return h(o.clone().valueOf(),u);throw new RangeError("Matrix must be square (size: "+wr(a)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+wr(a)+")")}}});function h(d,o,a){if(o===1)return pr(d[0][0]);if(o===2)return n(t(d[0][0],d[1][1]),t(d[1][0],d[0][1]));for(var u=!1,c=new Array(o).fill(0).map((S,y)=>y),p=0;p<o;p++){var f=c[p];if(l(d[f][p])){var m=void 0;for(m=p+1;m<o;m++)if(!l(d[c[m]][p])){f=c[m],c[m]=c[p],c[p]=f,u=!u;break}if(m===o)return d[f][p]}for(var g=d[f][p],M=p===0?1:d[c[p-1]][p-1],w=p+1;w<o;w++)for(var _=c[w],b=p+1;b<o;b++)d[_][b]=s(n(t(d[_][b],g),t(d[_][p],d[f][b])),M)}var N=d[c[o-1]][o-1];return u?v(N):N}}),Gt="inv",nu=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],iu=X(Gt,nu,r=>{var{typed:e,matrix:i,divideScalar:n,addScalar:t,multiply:s,unaryMinus:l,det:v,identity:h,abs:d}=r;return e(Gt,{"Array | Matrix":function(u){var c=mr(u)?u.size():Lr(u);switch(c.length){case 1:if(c[0]===1)return mr(u)?i([n(1,u.valueOf()[0])]):[n(1,u[0])];throw new RangeError("Matrix must be square (size: "+wr(c)+")");case 2:{var p=c[0],f=c[1];if(p===f)return mr(u)?i(o(u.valueOf(),p,f),u.storage()):o(u,p,f);throw new RangeError("Matrix must be square (size: "+wr(c)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+wr(c)+")")}},any:function(u){return n(1,u)}});function o(a,u,c){var p,f,m,g,M;if(u===1){if(g=a[0][0],g===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,g)]]}else if(u===2){var w=v(a);if(w===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(a[1][1],w),n(l(a[0][1]),w)],[n(l(a[1][0]),w),n(a[0][0],w)]]}else{var _=a.concat();for(p=0;p<u;p++)_[p]=_[p].concat();for(var b=h(u).valueOf(),N=0;N<c;N++){var S=d(_[N][N]),y=N;for(p=N+1;p<u;)d(_[p][N])>S&&(S=d(_[p][N]),y=p),p++;if(S===0)throw Error("Cannot calculate inverse, determinant is zero");p=y,p!==N&&(M=_[N],_[N]=_[p],_[p]=M,M=b[N],b[N]=b[p],b[p]=M);var E=_[N],D=b[N];for(p=0;p<u;p++){var z=_[p],P=b[p];if(p!==N){if(z[N]!==0){for(m=n(l(z[N]),E[N]),f=N;f<c;f++)z[f]=t(z[f],s(m,E[f]));for(f=0;f<c;f++)P[f]=t(P[f],s(m,D[f]))}}else{for(m=E[N],f=N;f<c;f++)z[f]=n(z[f],m);for(f=0;f<c;f++)P[f]=n(P[f],m)}}}return b}}}),au="divide",ou=["typed","matrix","multiply","equalScalar","divideScalar","inv"],su=X(au,ou,r=>{var{typed:e,matrix:i,multiply:n,equalScalar:t,divideScalar:s,inv:l}=r,v=ht({typed:e,equalScalar:t}),h=ne({typed:e});return e("divide",ot({"Array | Matrix, Array | Matrix":function(o,a){return n(o,l(a))},"DenseMatrix, any":function(o,a){return h(o,a,s,!1)},"SparseMatrix, any":function(o,a){return v(o,a,s,!1)},"Array, any":function(o,a){return h(i(o),a,s,!1).valueOf()},"any, Array | Matrix":function(o,a){return n(o,l(a))}},s.signatures))}),Xt="mean",uu=["typed","add","divide"],fu=X(Xt,uu,r=>{var{typed:e,add:i,divide:n}=r;return e(Xt,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":t,"...":function(v){if(ft(v))throw new TypeError("Scalar values expected in function mean");return s(v)}});function t(l,v){try{var h=ct(l,v,i),d=Array.isArray(l)?Lr(l):l.size();return n(h,d[v])}catch(o){throw ve(o,"mean")}}function s(l){var v,h=0;if($e(l,function(d){try{v=v===void 0?d:i(v,d),h++}catch(o){throw ve(o,"mean",d)}}),h===0)throw new Error("Cannot calculate the mean of an empty array");return n(v,h)}}),we=so({config:Zr}),cu=co({}),qn=vo({}),dt=go({}),kr=Mo({Matrix:dt}),tr=ca({BigNumber:we,Complex:cu,DenseMatrix:kr,Fraction:qn}),lu=Yo({typed:tr}),ye=Xo({typed:tr}),hu=qo({BigNumber:we,typed:tr}),vu=Ss({typed:tr}),pe=Ao({config:Zr,typed:tr}),pu=xo({typed:tr}),Rn=ws({typed:tr}),du=Po({typed:tr}),mt=Oo({Matrix:dt,equalScalar:pe,typed:tr}),gt=Ho({typed:tr}),mu=Lo({Fraction:qn,typed:tr}),Br=Zo({DenseMatrix:kr,Matrix:dt,SparseMatrix:mt,typed:tr}),wt=qs({bignumber:hu,fraction:mu,number:du}),gu=Bs({matrix:Br,config:Zr,typed:tr}),wu=Vs({DenseMatrix:kr,config:Zr,matrix:Br,typed:tr}),de=bs({DenseMatrix:kr,addScalar:ye,equalScalar:pe,matrix:Br,typed:tr,unaryMinus:gt}),yu=Ps({BigNumber:we,config:Zr,matrix:Br,typed:tr}),yt=Us({numeric:wt,typed:tr}),He=Ks({config:Zr,numeric:wt,smaller:wu,typed:tr}),Ar=Ws({BigNumber:we,DenseMatrix:kr,equalScalar:pe,matrix:Br,typed:tr,zeros:yu}),Mu=js({DenseMatrix:kr,SparseMatrix:mt,addScalar:ye,equalScalar:pe,matrix:Br,typed:tr}),Nu=ru({addScalar:ye,conj:vu,multiplyScalar:Rn,size:gu,typed:tr}),bu=Cs({BigNumber:we,DenseMatrix:kr,SparseMatrix:mt,config:Zr,matrix:Br,typed:tr}),et=Js({DenseMatrix:kr,config:Zr,matrix:Br,typed:tr}),Mt=Ms({addScalar:ye,dot:Nu,equalScalar:pe,matrix:Br,multiplyScalar:Rn,typed:tr}),_u=tu({divideScalar:yt,isZero:pu,matrix:Br,multiply:Mt,subtract:de,typed:tr,unaryMinus:gt}),Je=Gs({config:Zr,larger:et,numeric:wt,typed:tr}),xu=iu({abs:lu,addScalar:ye,det:_u,divideScalar:yt,identity:bu,matrix:Br,multiply:Mt,typed:tr,unaryMinus:gt}),Eu=su({divideScalar:yt,equalScalar:pe,inv:xu,matrix:Br,multiply:Mt,typed:tr}),Vr=fu({add:Mu,divide:Eu,typed:tr});class Su{async calcRateData({assignments:e,projectCrafts:i}){const n=i;for(let t=0;t<n.length;t++){const s=[];n[t].classifications.forEach(o=>{const a=e.filter(m=>m[56]===o[3]);for(let m=0;m<a.length;m++){const g=ae(a[m].offer[28].$d),w=ae(a[m][1].$d).diff(g);Object.assign(a[m],{offerToArrival:{dayjs:ae.duration(w),ms:w,format:`${Ar(ae.duration(w).asDays(),2)} days`}}),s.push(a[m])}const u=a.length===0?0:a.length===1?a[0][116]:Ar(Vr(a.map(m=>m[116])),2),c=o.fixedRate>0?o.fixedRate:0,p=a.length===0?0:a.length===1?a[0].offerToArrival.ms:Ar(Vr(a.map(m=>m.offerToArrival.ms)),2),f=c===0?0:a.filter(m=>m[116]>c).length;Object.assign(o,{analytics:{roster:a,avgWage:u,minWage:a.length===0?0:a.length===1?a[0][116]:He(a.map(m=>m[116])),maxWage:a.length===0?0:a.length===1?a[0][116]:Je(a.map(m=>m[116])),fixedWage:c,highWages:f>0,diff:Ar(de(u,c),2),averageTimeToArrive:{dayjs:ae.duration(p),ms:p,format:`${Ar(ae.duration(p).asDays(),2)} days`}},expanded:!1})});const l=n[t].classifications.filter(o=>o.analytics.avgWage>0&&o.isCraft).length===0?0:n[t].classifications.filter(o=>o.analytics.avgWage>0&&o.isCraft).length===1?n[t].classifications.filter(o=>o.analytics.avgWage>0&&o.isCraft)[0].analytics.avgWage:Vr(n[t].classifications.filter(o=>o.analytics.avgWage>0&&o.isCraft).map(o=>o.analytics.avgWage)),v=n[t].classifications.filter(o=>o.analytics.fixedWage>0&&o.isCraft).length===0?0:n[t].classifications.filter(o=>o.analytics.fixedWage>0&&o.isCraft).length===1?n[t].classifications.filter(o=>o.analytics.fixedWage>0&&o.isCraft)[0].analytics.fixedWage:Vr(n[t].classifications.filter(o=>o.analytics.fixedWage>0&&o.isCraft).map(o=>o.analytics.fixedWage)),h=n[t].classifications.filter(o=>o.analytics.avgWage>0).length===0?0:n[t].classifications.filter(o=>o.analytics.avgWage>0).length===1?n[t].classifications.filter(o=>o.analytics.avgWage>0)[0].analytics.avgWage:Vr(n[t].classifications.filter(o=>o.analytics.avgWage>0).map(o=>o.analytics.avgWage)),d=n[t].classifications.filter(o=>o.analytics.fixedWage>0).length===0?0:n[t].classifications.filter(o=>o.analytics.fixedWage>0).length===1?n[t].classifications.filter(o=>o.analytics.fixedWage>0)[0].analytics.fixedWage:Vr(n[t].classifications.filter(o=>o.analytics.fixedWage>0).map(o=>o.analytics.fixedWage));Object.assign(n[t],{highWages:n[t].classifications.filter(o=>o.analytics.highWages).length>0,highWageCount:n[t].classifications.filter(o=>o.analytics.highWages).length,avgCraftWorkerWage:Ar(l,2),fixedCraftWorkerAvg:Ar(v,2),avgWage:Ar(h,2),fixedAvg:Ar(d,2),diff:Ar(de(h,d),2),craftRoster:s}),n[t].classifications.sort((o,a)=>o.order>a.order||o.order===a.order&&o.fixedRate>a.fixedRate?-1:1)}return n.sort((t,s)=>t.order>s.order?1:-1)}async calcRateDataDeprecated({assignments:e,projectCrafts:i}){const n=[...new Map(e.map(t=>[t[124],{id:t[124],name:t[68]}])).values()];for(let t=0;t<n.length;t++){const s=i.find(a=>a[3]===n[t].id),l=s===void 0?[]:s.classifications.filter(a=>a.isCraft&&a.fixedRate>0),v=e.filter(a=>a[124]===n[t].id),h=v.length>0?Ar(Vr(v.map(a=>a[116])),2):0,d=l.length===0?0:Ar(Vr(l.map(a=>a.fixedRate)),2),o=v.filter(a=>a[116]>d);console.log(o),Object.assign(n[t],{avgWage:h,maxWage:v.length===0?0:v.length===1?v[0][116]:Je(v.map(a=>a[116])),minWage:v.length===0?0:v.length===1?v[0][116]:He(v.map(a=>a[116])),fixedAvg:d,highWages:d>0?et(h,d):!1,diff:Ar(de(h,d),2),fixedRateJobs:l,roster:v,expanded:!1})}return n}async compileJobRateData({assignments:e,fixedRateJobs:i}){for(let n=0;n<i.length;n++){const t=e.filter(v=>v[56]===i[n][3]),s=t.length>0?Ar(Vr(t.map(v=>v[116])),2):0,l=i[n].fixedRate;Object.assign(i[n],{roster:t,avgWage:s,fixedWage:l,maxWage:t.length>0?Je(t.map(v=>v[116])):0,minWage:t.length>0?He(t.map(v=>v[116])):0,highWages:l>0?et(s,l):!1,diff:Ar(de(s,l),2)}),delete i[n].avgRate,delete i[n].fixedRate}return i}}function Au(){return{analytics:new Su}}const{analytics:Cu}=Au();var zu=li(({app:r})=>{r.config.globalProperties.$analytics=Cu});export{Cu as analytics,zu as default};
