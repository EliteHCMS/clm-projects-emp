import{l as C,_ as L,A as n,aq as r,br as a,bP as M,d as t,bQ as $,ar as v,ax as A,ac as _,G as B,bR as H,b5 as m,bS as Y,B as h,F as R,b4 as z,H as Q,r as y,bT as Z,bU as x,bV as ee,w as O,bW as w,D as b,bt as te}from"./index.b3347518.js";import{Q as ae,a as U}from"./QHeader.04de9476.js";import{Q as ne}from"./QMenu.da8fc445.js";import{Q as N}from"./QToolbar.40819b0c.js";import{Q as oe}from"./QImg.a459cc95.js";import{Q as V}from"./QList.03e82f10.js";import{Q as K}from"./QSelect.c0394ceb.js";import{Q as se,a as re}from"./QDrawer.8e32a207.js";import{Q as ie,a as le}from"./QLayout.f09539de.js";import{C as ue}from"./ClosePopup.2ab6296e.js";import{Q as me}from"./QBadge.5e1cf3ac.js";import{M as pe,Q as de}from"./MenuSubLink.b91b9a76.js";import{u as ce}from"./use-quasar.0481fcc5.js";import{u as fe}from"./i18n.3b71e085.js";import{u as ve,b as ge,q as P}from"./app.861c54f9.js";import{_ as ke}from"./KioskLogin.db87b2b9.js";import{_ as ye}from"./languageSelector.016546c8.js";import{_ as be}from"./version.1b99203d.js";import{h as j}from"./HelpDeskTicket.072cb561.js";import"./QResizeObserver.81ee520a.js";import"./position-engine.0096d7d1.js";import"./selection.2c03811b.js";import"./QChip.4b9d3b26.js";import"./rtl.b51694b1.js";import"./TouchPan.ea395dc2.js";import"./touch.70a9dd44.js";import"./QSlideTransition.bce24fb9.js";import"./_commonjsHelpers.a26ce4be.js";import"./dayjs.3f8a4d98.js";import"./localForage.bdd6f67f.js";import"./api.8d39c17e.js";import"./index.04bc0a32.js";import"./vee-validate.esm.ae3bb9b1.js";import"./array.bd6dacb5.js";import"./QTooltip.89c59c9c.js";import"./QFile.97e86120.js";import"./QForm.9fb52b98.js";const _e=C({name:"MenuLink",props:{title:{type:String,required:!0},caption:{type:String,default:""},to:{type:Object,default:()=>({path:"",exact:!0})},icon:{type:String,default:""},mini:{type:Boolean,default:!1},subMenu:{type:Array,default:null},count:{type:Number,default:null}}});function he(e,s,g,i,k,p){return n(),r(H,{to:e.to,class:B(["rounded-borders bg-white",{"q-ma-sm":!e.mini,"q-ma-xs":e.mini}]),"active-class":e.mini?"brand-active-menu text-white":"brand-active-menu text-white q-py-md",exact:""},{default:a(()=>[e.icon?(n(),r(M,{key:0,avatar:""},{default:a(()=>[t($,{name:e.icon},null,8,["name"])]),_:1})):v("",!0),t(M,null,{default:a(()=>[t(K,null,{default:a(()=>[A(_(e.title),1)]),_:1})]),_:1}),e.count?(n(),r(M,{key:1,side:"",top:""},{default:a(()=>[t(me,{color:"primary",label:e.count},null,8,["label"])]),_:1})):v("",!0)]),_:1},8,["to","class","active-class"])}var Me=L(_e,[["render",he]]);const Se=C({name:"MenuExpanded",components:{MenuSubLink:pe},props:{title:{type:String,required:!0},caption:{type:String,default:""},to:{type:Object,default:()=>({path:"",exact:!0})},icon:{type:String,default:""},mini:{type:Boolean,default:!1},subMenu:{type:Array,default:null}}});function qe(e,s,g,i,k,p){const d=m("MenuSubLink");return n(),r(de,{icon:e.icon,label:e.title,class:B(["rounded-borders bg-white",{"q-ma-sm":!e.mini,"q-ma-xs":e.mini}]),"active-class":"brand-active-menu text-white",exact:""},{default:a(()=>[t(Y),t(M,null,{default:a(()=>[t(V,null,{default:a(()=>[(n(!0),h(R,null,z(e.subMenu,l=>(n(),r(d,Q({key:l},l,{mini:e.mini}),null,16,["mini"]))),128))]),_:1})]),_:1})]),_:1},8,["icon","label","class"])}var we=L(Se,[["render",qe]]);const $e=C({name:"MenuNav",components:{MenuLink:Me,MenuExpanded:we},props:{title:{type:String,required:!0},caption:{type:String,default:""},to:{type:Object,default:()=>({path:"",exact:!0})},icon:{type:String,default:""},mini:{type:Boolean,default:!1},subMenu:{type:Array,default:null}}});function Qe(e,s,g,i,k,p){const d=m("MenuLink"),l=m("MenuExpanded");return n(),h("div",null,[!e.subMenu&&e.to?(n(),r(d,Q({key:0},{...e.$props,...e.$attrs},{mini:e.mini}),null,16,["mini"])):e.subMenu&&e.subMenu.length>0?(n(),r(l,Q({key:1},{...e.$props,...e.$attrs},{mini:e.mini}),null,16,["mini"])):v("",!0)])}var Ce=L($e,[["render",Qe]]);const Le=C({name:"MainLayout",components:{MenuNav:Ce,kioskLogin:ke,languageSelector:ye,version:be,helpDeskTicket:j},setup(){const e=ce(),{locale:s}=fe(),g=y(!1),i=y(!1),k=y(!1),p=y(!1),d=y(!1),l=Z(),c=x(),S=ve(),q=ge(),{toolbarTitle:T}=q,{onKiosk:f,activeMenu:u,pageType:F,startPageEnabled:E,kioskActive:G,homeButtonEnabled:W}=ee(q),J=y(!1),D=async o=>{await P.checkKioskStatus(o)||(d.value=!0)};if(f.value&&D(!0),c.query&&c.query.office_id){const o=Object.assign({},c.query);delete o.office_id,delete o.qr,l.replace({query:o})}O(G,o=>{!o&&f.value&&D()}),O(()=>c.query,async()=>{if(f.value&&D(!1),c.query.office_id){const o=Object.assign({},c.query);delete o.office_id,o.qr&&(P.checkInUser(),delete o.qr),l.replace({query:o})}});const I=async()=>{f.value&&(s.value="en-US"),S.logout().then(()=>{E.value&&f.value?l.replace({name:"start"}):l.replace({name:"login"})})},X=()=>{I()};return{tab:y("mails"),userStore:S,leftDrawerOpen:g,rightDrawerOpen:k,miniState:i,miniHover:p,kioskPrompt:d,onIdle:X,onKiosk:f,activeMenu:u,homeButtonEnabled:W,miniMouseOver(){i.value===!0&&(p.value=!1)},miniMouseOut(){i.value===!0&&(p.value=!0)},toggleLeftDrawer(){e.screen.gt.sm?(i.value=!i.value,i.value===!0&&(p.value=!0)):g.value=!g.value},toggleRightDrawer(){k.value=!k.value},drawerClick(o){i.value&&(i.value=!1,o.stopPropagation())},logout:I,toolbarTitle:T,pageType:F,startPageEnabled:E,helpDeskTicket:j,addTicket:J}}}),Te={key:0,class:"q-mr-sm q-ml-sm",src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo-white.png",alt:"BrandSafway Logo",height:"25"},De={key:0},Ve={key:1},Be={class:"q-gutter-sm row items-center no-wrap"},Ee={class:"row no-wrap q-pa-md"},Ie={class:"column items-center"},Oe={class:"text-subtitle1 q-mt-md q-mb-xs"};function Ue(e,s,g,i,k,p){const d=m("languageSelector"),l=m("MenuNav"),c=m("router-view"),S=m("kioskLogin"),q=m("v-idle"),T=m("version"),f=m("helpDeskTicket");return n(),r(le,{view:"hHh lpR fFf"},{default:a(()=>[t(ae,{elevated:""},{default:a(()=>[t(N,{style:{height:"62px"}},{default:a(()=>[t(w,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),e.$q.screen.gt.sm?(n(),h("img",Te)):v("",!0),t(U,null,{default:a(()=>[e.$q.screen.lt.sm?(n(),h("span",De)):(n(),h("span",Ve,_(e.toolbarTitle),1))]),_:1}),b("div",Be,[t(d,{dense:"",borderless:"",class:"lang-white"}),t(w,{flat:"",dense:"",color:"white"},{default:a(()=>[b("div",null,_(e.userStore.getUser[35])+" "+_(e.userStore.getUser[37]),1),t($,{right:"",size:"2.2em",name:"account_circle"}),t(ne,null,{default:a(()=>[b("div",Ee,[b("div",Ie,[t($,{right:"",size:"72px",name:"account_circle",class:"q-mr-md"}),b("div",Oe,_(e.userStore.getUser[35])+" "+_(e.userStore.getUser[37]),1),te(t(w,{color:"primary",label:e.$t("logout"),push:"",size:"sm",onClick:e.logout},null,8,["label","onClick"]),[[ue]])])])]),_:1})]),_:1})])]),_:1})]),_:1}),t(se,{modelValue:e.leftDrawerOpen,"onUpdate:modelValue":s[1]||(s[1]=u=>e.leftDrawerOpen=u),side:"left","show-if-above":"",bordered:"",mini:e.miniState&&e.miniHover,onMouseover:e.miniMouseOver,onMouseout:e.miniMouseOut,onClickCapture:e.drawerClick,class:"text-primary bg-white"},{default:a(()=>[t(re,{class:"fit"},{default:a(()=>[e.$q.screen.lt.sm?(n(),r(N,{key:0,style:{height:"64px"}},{default:a(()=>[t(U,{class:"items-center"},{default:a(()=>[t(oe,{src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo.svg",style:{"max-width":"245px"},fit:"center",class:"q-ml-md"})]),_:1})]),_:1})):v("",!0),t(V,{class:"q-mt-sm"},{default:a(()=>[(n(!0),h(R,null,z(e.activeMenu,u=>(n(),r(l,Q({key:u.title},u,{mini:e.miniState}),null,16,["mini"]))),128))]),_:1}),t(V,{class:"q-mt-sm"},{default:a(()=>[b("div",null,[t(H,{class:B(["rounded-borders bg-white",{"q-ma-sm":!e.miniState,"q-ma-xs":e.miniState}]),clickable:"",onClick:s[0]||(s[0]=u=>e.addTicket=!0)},{default:a(()=>[t(M,{avatar:""},{default:a(()=>[t($,{name:"fa-solid fa-circle-info"})]),_:1}),t(M,null,{default:a(()=>[t(K,null,{default:a(()=>[A("Request Support")]),_:1})]),_:1})]),_:1},8,["class"])])]),_:1})]),_:1})]),_:1},8,["modelValue","mini","onMouseover","onMouseout","onClickCapture"]),t(ie,null,{default:a(()=>[t(c)]),_:1}),e.onKiosk?(n(),r(S,{key:0,modelValue:e.kioskPrompt,"onUpdate:modelValue":s[2]||(s[2]=u=>e.kioskPrompt=u)},null,8,["modelValue"])):v("",!0),e.onKiosk?(n(),r(q,{key:1,onIdle:e.onIdle,duration:300,style:{display:"none"}},null,8,["onIdle"])):v("",!0),e.onKiosk&&e.startPageEnabled&&e.homeButtonEnabled?(n(),r(w,{key:2,icon:"o_home",onClick:e.onIdle,class:"z-max home-button-main",size:"xl",ripple:!0},null,8,["onClick"])):v("",!0),t(T),t(f,{modelValue:e.addTicket,"onUpdate:modelValue":s[3]||(s[3]=u=>e.addTicket=u)},null,8,["modelValue"])]),_:1})}var Mt=L(Le,[["render",Ue]]);export{Mt as default};
