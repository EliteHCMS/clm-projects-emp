var Oe=Object.defineProperty,$e=Object.defineProperties;var Ee=Object.getOwnPropertyDescriptors;var ce=Object.getOwnPropertySymbols;var Qe=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable;var pe=(e,t,r)=>t in e?Oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,B=(e,t)=>{for(var r in t||(t={}))Qe.call(t,r)&&pe(e,r,t[r]);if(ce)for(var r of ce(t))ze.call(t,r)&&pe(e,r,t[r]);return e},_=(e,t)=>$e(e,Ee(t));import{r as K,c as q,g as qe,cI as Ie,cb as we,cF as Te,h as X,bP as Pe,cJ as Le,cN as Be,cK as Me,cM as Xe,cO as Ke,dp as We,cP as fe,dq as He,d4 as Je,cL as Ye,cB as Ge,l as Ze,k as Fe,bL as Ae,w as Ce,_ as Re,A as Q,B as I,d as l,bi as p,cz as ue,cw as de,D as n,ab as M,bJ as ee,bH as G,au as J,cx as ve,bO as te,F as be,aY as xe,bK as ye,ao as Ue,dr as y,cy as _e,bF as et,bM as tt,aZ as at,an as ge}from"./index.61fe6e1c.js";import{Q as lt}from"./QPage.bcf9b23c.js";import{u as ke}from"./use-quasar.4ee78fe6.js";import{u as De}from"./useQuerySaver.e863619d.js";import{u as ot,q as z}from"./quickbase.7f66a5fd.js";import{u as Ne}from"./dataStore.116b3066.js";import{Q as ae}from"./QSelect.a8f07c31.js";import{Q as st}from"./QChip.b9996413.js";import{Q as nt}from"./QItemLabel.3947d95a.js";import{Q as it}from"./QList.ecce4ac7.js";import{Q as rt}from"./QForm.23f3acc2.js";import{a as le,f as ut,c as Ve,e as oe,b as dt,u as O}from"./array.eb3aae39.js";import{dayjs as me}from"./dayjs.07775a6d.js";import{u as je}from"./dataStore.3898036f.js";import"./_commonjsHelpers.a26ce4be.js";import"./index.7dbe61ef.js";import"./localForage.81cbb332.js";import"./i18n.b5aeee55.js";import"./api.75a5bd03.js";import"./QMenu.46a8fbe5.js";import"./position-engine.94259159.js";import"./selection.111ecd00.js";import"./rtl.cf9bbe47.js";function H(e,t,r,f){const s=[];return e.forEach(d=>{f(d)===!0?s.push(d):t.push({failedPropValidation:r,file:d})}),s}function se(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),we(e)}const mt={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},ct=["rejected"];function pt({editable:e,dnd:t,getFileInput:r,addFilesToQueue:f}){const{props:s,emit:d,proxy:a}=qe(),g=K(null),D=q(()=>s.accept!==void 0?s.accept.split(",").map(o=>(o=o.trim(),o==="*"?"*/":(o.endsWith("/*")&&(o=o.slice(0,o.length-1)),o.toUpperCase()))):null),h=q(()=>parseInt(s.maxFiles,10)),N=q(()=>parseInt(s.maxTotalSize,10));function V(o){if(e.value)if(o!==Object(o)&&(o={target:null}),o.target!==null&&o.target.matches('input[type="file"]')===!0)o.clientX===0&&o.clientY===0&&Ie(o);else{const k=r();k&&k!==o.target&&k.click(o)}}function F(o){e.value&&o&&f(null,o)}function U(o,k,T,P){let c=Array.from(k||o.target.files);const C=[],$=()=>{C.length>0&&d("rejected",C)};if(s.accept!==void 0&&D.value.indexOf("*/")===-1&&(c=H(c,C,"accept",v=>D.value.some(w=>v.type.toUpperCase().startsWith(w)||v.name.toUpperCase().endsWith(w))),c.length===0))return $();if(s.maxFileSize!==void 0){const v=parseInt(s.maxFileSize,10);if(c=H(c,C,"max-file-size",w=>w.size<=v),c.length===0)return $()}if(s.multiple!==!0&&c.length>0&&(c=[c[0]]),c.forEach(v=>{v.__key=v.webkitRelativePath+v.lastModified+v.name+v.size}),P===!0){const v=T.map(w=>w.__key);c=H(c,C,"duplicate",w=>v.includes(w.__key)===!1)}if(c.length===0)return $();if(s.maxTotalSize!==void 0){let v=P===!0?T.reduce((w,Y)=>w+Y.size,0):0;if(c=H(c,C,"max-total-size",w=>(v+=w.size,v<=N.value)),c.length===0)return $()}if(typeof s.filter=="function"){const v=s.filter(c);c=H(c,C,"filter",w=>v.includes(w))}if(s.maxFiles!==void 0){let v=P===!0?T.length:0;if(c=H(c,C,"max-files",()=>(v++,v<=h.value)),c.length===0)return $()}if($(),c.length>0)return c}function A(o){se(o),t.value!==!0&&(t.value=!0)}function i(o){we(o),(o.relatedTarget!==null||Te.is.safari!==!0?o.relatedTarget!==g.value:document.elementsFromPoint(o.clientX,o.clientY).includes(g.value)===!1)===!0&&(t.value=!1)}function b(o){se(o);const k=o.dataTransfer.files;k.length>0&&f(null,k),t.value=!1}function j(o){if(t.value===!0)return X("div",{ref:g,class:`q-${o}__dnd absolute-full`,onDragenter:se,onDragover:se,onDragleave:i,onDrop:b})}return Object.assign(a,{pickFiles:V,addFiles:F}),{pickFiles:V,addFiles:F,onDragover:A,onDragleave:i,processFiles:U,getDndNode:j,maxFilesNumber:h,maxTotalSizeNumber:N}}var ft=Pe({name:"QFile",inheritAttrs:!1,props:_(B(B(B({},Le),Be),mt),{modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]}),emits:[...Me,...ct],setup(e,{slots:t,emit:r,attrs:f}){const{proxy:s}=qe(),d=Xe(),a=K(null),g=K(!1),D=Ke(e),{pickFiles:h,onDragover:N,onDragleave:V,processFiles:F,getDndNode:U}=pt({editable:d.editable,dnd:g,getFileInput:Z,addFilesToQueue:x}),A=We(e),i=q(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),b=q(()=>fe(i.value)),j=q(()=>i.value.map(m=>m.name).join(", ")),o=q(()=>He(i.value.reduce((m,R)=>m+R.size,0))),k=q(()=>({totalSize:o.value,filesNumber:i.value.length,maxFiles:e.maxFiles})),T=q(()=>_(B({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:D.value},f),{id:d.targetUid.value,disabled:d.editable.value!==!0})),P=q(()=>"q-file q-field--auto-height"+(g.value===!0?" q-file--dnd":"")),c=q(()=>e.multiple===!0&&e.append===!0);function C(m){const R=i.value.slice();R.splice(m,1),v(R)}function $(m){const R=i.value.findIndex(m);R>-1&&C(R)}function v(m){r("update:modelValue",e.multiple===!0?m:m[0])}function w(m){m.keyCode===13&&Ge(m)}function Y(m){(m.keyCode===13||m.keyCode===32)&&h(m)}function Z(){return a.value}function x(m,R){const u=F(m,R,i.value,c.value),S=Z();S!=null&&(S.value=""),u!==void 0&&((e.multiple===!0?e.modelValue&&u.every(E=>i.value.includes(E)):e.modelValue===u[0])||v(c.value===!0?i.value.concat(u):u))}function L(){return[X("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function ne(){if(t.file!==void 0)return i.value.length===0?L():i.value.map((R,u)=>t.file({index:u,file:R,ref:this}));if(t.selected!==void 0)return i.value.length===0?L():t.selected({files:i.value,ref:this});if(e.useChips===!0)return i.value.length===0?L():i.value.map((R,u)=>X(st,{key:"file-"+u,removable:d.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{C(u)}},()=>X("span",{class:"ellipsis",textContent:R.name})));const m=e.displayValue!==void 0?e.displayValue:j.value;return m.length>0?[X("div",{class:e.inputClass,style:e.inputStyle,textContent:m})]:L()}function ie(){const m=_(B(B({ref:a},T.value),A.value),{class:"q-field__input fit absolute-full cursor-pointer",onChange:x});return e.multiple===!0&&(m.multiple=!0),X("input",m)}return Object.assign(d,{fieldClass:P,emitValue:v,hasValue:b,inputRef:a,innerValue:i,floatingLabel:q(()=>b.value===!0||fe(e.displayValue)),computedCounter:q(()=>{if(e.counterLabel!==void 0)return e.counterLabel(k.value);const m=e.maxFiles;return`${i.value.length}${m!==void 0?" / "+m:""} (${o.value})`}),getControlChild:()=>U("file"),getControl:()=>{const m={ref:d.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return d.editable.value===!0&&Object.assign(m,{onDragover:N,onDragleave:V,onKeydown:w,onKeyup:Y}),X("div",m,[ie()].concat(ne()))}}),Object.assign(s,{removeAtIndex:C,removeFile:$,getNativeElement:()=>a.value}),Je(s,"nativeEl",()=>a.value),Ye(d)}});const vt=async({employee:e,assignment:t,effectiveNow:r,values:f,attachments:s,ratings:d,supervisor:a})=>{const{userData:g,getUserType:D}=ot(),h=g;h.access&&delete h.access,h.permissions&&delete h.permissions;const N=[{25:{value:e[3]},28:{value:t[3]},30:{value:f.selection[10]},35:{value:t[142]},36:{value:f.effective},38:{value:JSON.stringify(h)},39:{value:D!=="QuickBase User"},60:{value:d.comments?d.comments:""},72:{value:f.equipment.value}}];if(r){const{ee:V,assign:F}=await bt({assignment:t,supervisor:a}),{data:U}=await z.upsertRecordsXML({to:"bp3ga39ut",data:N,fieldsToReturn:[37],formatObject:37},{action:"create",type:"release"}),{release:A}=await he({release:U[0][37][3],employee:U[0][37][25],ratings:d,user:h,supervisor:a});if(s.length>0){const{docs:i}=await Se({release:A,attachments:s,user:h});return A[70]=i.map(b=>b[12]),{release:A,employee:V,assignment:F,attachments:i}}else return{release:A,employee:V,assignment:F,attachments:[]}}else{const{data:V}=await z.upsertRecordsXML({to:"bp3ga39ut",data:N,fieldsToReturn:[37],formatObject:37},{action:"create",type:"release"});a&&gt({assignment:t,supervisor:a});const{release:F}=await he({release:V[0][37][3],employee:V[0][37][25],ratings:d,user:h,supervisor:a});if(s.length>0){const{docs:U}=await Se({release:F,attachments:s,user:h});return F[70]=U.map(A=>A[12]),{release:F,employee:e,assignment:t,attachments:U}}else return{release:F,employee:e,assignment:t,attachments:[]}}},he=async({release:e,employee:t,ratings:r,user:f,supervisor:s})=>{const d={6:{value:r.attendance},8:{value:r.attitude},10:{value:r.capability},12:{value:r.promotable},14:{value:r.comments?r.comments:""},16:{value:t},34:{value:e},36:{value:JSON.stringify(f)}};s&&Object.assign(d,{42:{value:s[18]}});const{data:a}=await z.upsertRecordsXML({to:"bqzkbcxup",data:[d],fieldsToReturn:[35],formatObject:35});return{release:a[0][35]}},Se=async({release:e,attachments:t,user:r})=>{const f=[];t.forEach(d=>{Object.assign(d,{8:{value:JSON.stringify(r)},9:{value:e[3]},10:{value:e[25]}}),f.push(d)});const{data:s}=await z.upsertRecordsXML({to:"bsstsai5d",data:f,fieldsToReturn:[12],formatObject:12});return{docs:s}},bt=async({assignment:e,supervisor:t})=>{const{removeData:r}=je(),f={3:{value:e[3]},21:{value:"Complete"},22:{value:me().tz("America/Chicago")}};t&&Object.assign(f,{133:{value:t[3]}});const{data:s}=await z.upsertRecordsXML({to:"bp3gazpqj",data:[f],fieldsToReturn:[110],formatObject:110});return r({type:"assignments",key:s[0][110][74],item:s[0][110],storageKey:Ze.storageAssignments}),{ee:await yt(e[18]),assign:s[0][110]}},yt=async e=>{const t=[{3:{value:e},79:{value:19}}],{data:r}=await z.upsertRecordsXML({to:"bp3gb7ng2",data:t,fieldsToReturn:[549],formatObject:549});return r[0][549]},gt=async({assignment:e,supervisor:t})=>{z.upsertRecordsXML({to:"bp3gazpqj",data:[{3:{value:e[3]},133:{value:t[3]}}],fieldsToReturn:[110],formatObject:110})},Vt=Fe({emits:["releaseSubmitted"],props:{record:Object,employee:Object},setup(e,{emit:t}){const r=K(!1),f=K(null),s=K([]),d=ke(),a=Ae(),{getTermReasons:g,setTermReasons:D}=Ne(),{getAssignments:h,fetchAssignments:N}=je(),V=q(()=>le({selection:le().required().nullable().label("Reason"),effective:ut().required().label("Last Day On Site"),category:Ve().nullable(),attendance:oe().required().label("Attendance"),capability:oe().required().label("Capability"),attitude:oe().required().label("Attitude"),promotable:oe().required().label("Promotability"),comments:Ve().nullable().label("Comments"),equipment:le().required().nullable().label("Equipment Returned"),supervisor:le().nullable().label("Supervisor")})),{errors:F,handleSubmit:U,handleReset:A}=dt({validationSchema:V,initialValues:{}}),{value:i}=O("selection"),{value:b}=O("effective"),{value:j}=O("category"),{value:o}=O("attachments"),{value:k}=O("capability"),{value:T}=O("attendance"),{value:P}=O("attitude"),{value:c}=O("promotable"),{value:C}=O("comments"),{value:$}=O("equipment"),{value:v}=O("supervisor"),w=q(()=>{const u=g();return j.value?u.filter(S=>S[6]===j.value).sort((S,E)=>S[12]>E[12]?1:-1):u.sort((S,E)=>S[12]>E[12]?1:-1)}),Y=U(async u=>{if(r.value&&s.value.length===0)d.dialog({title:"Alert",message:"Supporting documents are required for this reason!"});else{const S={capability:u.capability,attendance:u.attendance,attitude:u.attitude,promotable:u.promotable,comments:u.comments};d.dialog({title:"Confirm",message:"Are you sure you want to release this employee?",cancel:!0,persistent:!0}).onOk(async()=>{try{const{release:E,employee:W,assignment:re}=await vt({employee:e.employee,assignment:e.record,values:u,effectiveNow:!L.value,attachments:s.value,ratings:S,supervisor:u.supervisor});t("releaseSubmitted",{release:E,employee:W,assignment:re,effectiveNow:!L.value}),A()}catch{d.notify({type:"negative",message:"Cannot submit release."})}})}}),Z=()=>{d.dialog({title:"Confirm",message:"Are you sure you want to cancel?",cancel:!0,persistent:!0}).onOk(()=>{A(),a.go(-1)})};Ce(i,(u,S)=>{u&&u[19]?(r.value=!0,o.value=!0):(o.value=!1,r.value=!1)});const x=q(()=>{const u=g();return[...new Map(u.map(S=>[S[6],S[6]])).values()]}),L=q(()=>b.value&&b.value!==""?me().isBefore(me(b.value)):!1),ne=u=>new Promise((S,E)=>{const W=new FileReader;W.readAsDataURL(u),W.onload=()=>S(W.result.replace(/^data:.+;base64,/,"")),W.onerror=re=>E(re)}),ie=()=>{f.value&&f.value.forEach(async u=>{const S={6:{value:await ne(u),filename:u.name},7:{value:u.name}};s.value.push(S),f.value=null}),console.log(s.value)},m=u=>{console.log(s.value[u]),s.value.splice(u,1)};return(async()=>{if(g().length===0){const{data:u}=await z.fetchFromHiringApp({fields:[De({type:"termReasons",query:"{'11'.EX.'true'}"})]});D({reasons:u})}N({projectId:e.record[74]})})(),{props:e,options:w,primaryReasons:x,category:j,selection:i,effective:b,attachments:o,capability:k,attendance:T,attitude:P,promotable:c,comments:C,equipment:$,supervisor:v,attachmentsRequired:r,fileAttachment:f,attachedFiles:s,submit:Y,formErrors:F,handleReset:A,cancelRelease:Z,showFiles:ie,deleteFile:m,getAssignments:h}}}),ht={class:"row"},St={class:"col-12 col-md-4 q-px-sm"},qt=n("div",{class:"text-caption"},"Is this release voluntary or involuntary?",-1),wt={class:"text-caption"},Ft={class:"col-12 col-md-4 q-pl-xs q-pr-sm"},At=n("div",{class:"text-caption"},"What is the reason for this release?",-1),Ct={class:"text-caption"},Rt={class:"row"},Ut={class:"col-12 col-md-4 q-pl-xs q-pr-sm"},kt=n("div",{class:"text-caption"},"When is the employee's last day on site?",-1),Dt={class:"text-caption"},Nt={class:"col-12 col-md-4 q-pl-xs q-pr-sm"},jt=n("div",{class:"text-caption"},"Has all Company Equipment been returned?",-1),Ot={class:"text-caption"},$t={class:"row items-top justify-between q-mt-sm"},Et={class:"col-4 q-pl-xs q-pr-sm"},Qt={key:0,class:"text-body2 text-negative text-italic"},zt={key:0},It={key:1},Tt={key:1,class:"text-body2 text-dark text-italic"},Pt=n("span",null,"**Supporting documents are optional for this reason.",-1),Lt=[Pt],Bt={key:0,class:"col-6 q-pl-xs q-pr-sm"},Mt=n("div",{class:"text-body1 text-info q-mb-sm"},"Attached Documents",-1),Xt={class:"row q-my-md"},Kt={class:"col-12"},Wt=n("div",{class:"q-pa-sm"},[n("div",{class:"text-h6 text-bold"},"CAAP Rating"),n("div",{class:"text-body1 text-dark text-italic"},"Capability, Attendance, Attitude, and Promotability"),n("div",{class:"text-body2 text-accent q-mt-sm"},"Select how much you agree with each of the following statements.")],-1),Ht={class:"q-pb-sm"},Jt=n("div",{class:"text-body2 text-info text-bold q-mb-sm"},"This employee is capable of performing their assigned job.",-1),Yt={class:"q-pb-sm"},Gt=n("div",{class:"text-body2 text-info text-bold q-mb-sm"},"This employee regularly shows up to work on time.",-1),Zt={class:"q-pb-sm"},xt=n("div",{class:"text-body2 text-info text-bold q-mb-sm"},"This employee has a good attitude.",-1),_t={class:"q-pb-sm"},ea=n("div",{class:"text-body2 text-info text-bold q-mb-sm"},"I am confident that this employee can be promoted in the future.",-1),ta={class:"row q-mt-md"},aa={class:"col-12 col-md-5"},la=n("div",{class:"text-body2 text-weight-bold text-info"},[J(" Who conducted this evaluation? "),n("span",{class:"text-italic text-weight-light text-dark"},"(recommended)")],-1),oa={class:"text-caption"},sa={class:"row q-py-sm"},na={class:"col-12"};function ia(e,t,r,f,s,d){return Q(),I("div",null,[l(rt,{onSubmit:et(e.submit,["prevent"])},{default:p(()=>[l(ue,null,{default:p(()=>[l(de,null,{default:p(()=>[n("div",ht,[n("div",St,[qt,l(ae,{dense:"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.category,"onUpdate:modelValue":t[0]||(t[0]=a=>e.category=a),options:e.primaryReasons},{error:p(()=>[n("div",wt,M(e.formErrors.selection),1)]),"no-option":p(()=>[l(ee,null,{default:p(()=>[l(G,{class:"text-grey"},{default:p(()=>[J(" No Options Available ")]),_:1})]),_:1})]),_:1},8,["modelValue","options"])]),n("div",Ft,[At,l(ae,{dense:"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.selection,"onUpdate:modelValue":t[1]||(t[1]=a=>e.selection=a),options:e.options,"option-label":"12","display-value":`${e.selection?e.selection[12]:""}`,"bottom-slots":"",error:!!e.formErrors.selection,disable:!e.category},{error:p(()=>[n("div",Ct,M(e.formErrors.selection),1)]),"no-option":p(()=>[l(ee,null,{default:p(()=>[l(G,{class:"text-grey"},{default:p(()=>[J(" No Options Available ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","display-value","error","disable"])])]),n("div",Rt,[n("div",Ut,[kt,l(ve,{dense:"",type:"date",modelValue:e.effective,"onUpdate:modelValue":t[2]||(t[2]=a=>e.effective=a),error:!!e.formErrors.effective,"bottom-slots":""},{error:p(()=>[n("div",Dt,M(e.formErrors.effective),1)]),_:1},8,["modelValue","error"])]),n("div",Nt,[jt,l(ae,{dense:"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.equipment,"onUpdate:modelValue":t[3]||(t[3]=a=>e.equipment=a),options:[{value:!0,label:"Yes"},{value:!1,label:"No"},{value:!0,label:"None Issued"}],"bottom-slots":"",error:!!e.formErrors.equipment},{error:p(()=>[n("div",Ot,M(e.formErrors.equipment),1)]),_:1},8,["modelValue","error"])])]),n("div",$t,[n("div",Et,[l(ft,{dense:"","bottom-slots":"",modelValue:e.fileAttachment,"onUpdate:modelValue":t[4]||(t[4]=a=>e.fileAttachment=a),multiple:"",append:"",label:"Attach Supporting Documents"},{after:p(()=>[l(te,{dense:"",color:"info",round:"",flat:"",icon:"cloud_upload",onClick:e.showFiles},null,8,["onClick"])]),_:1},8,["modelValue"]),e.attachmentsRequired?(Q(),I("div",Qt,[J("!! "),e.selection[12].toLowerCase().includes("attendance")?(Q(),I("span",zt,"Supporting attendance records must be attached.")):(Q(),I("span",It,"Supporting documents are required for this reason."))])):(Q(),I("div",Tt,Lt))]),e.attachedFiles.length>0?(Q(),I("div",Bt,[Mt,l(it,{dense:""},{default:p(()=>[(Q(!0),I(be,null,xe(e.attachedFiles,(a,g)=>(Q(),I(be,{key:a},[l(ee,null,{default:p(()=>[l(G,null,{default:p(()=>[l(nt,null,{default:p(()=>[J(M(g+1)+". "+M(a[6].filename),1)]),_:2},1024)]),_:2},1024),l(G,{side:""},{default:p(()=>[l(te,{color:"accent",round:"",flat:"",class:"cursor-pointer",icon:"delete",size:"md",onClick:D=>e.deleteFile(g)},null,8,["onClick"])]),_:2},1024)]),_:2},1024),l(ye)],64))),128))]),_:1})])):Ue("",!0)])]),_:1})]),_:1}),l(ye),n("div",Xt,[n("div",Kt,[Wt,l(ue,null,{default:p(()=>[l(de,null,{default:p(()=>[n("div",null,[n("div",Ht,[Jt,l(y,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[5]||(t[5]=a=>e.capability=a),val:"1",label:"Strongly Disagree"},null,8,["modelValue"]),l(y,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[6]||(t[6]=a=>e.capability=a),val:"2",label:"Disagree"},null,8,["modelValue"]),l(y,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[7]||(t[7]=a=>e.capability=a),val:"3",label:"Neutral"},null,8,["modelValue"]),l(y,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[8]||(t[8]=a=>e.capability=a),val:"4",label:"Agree"},null,8,["modelValue"]),l(y,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[9]||(t[9]=a=>e.capability=a),val:"5",label:"Strongly Agree"},null,8,["modelValue"]),l(y,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[10]||(t[10]=a=>e.capability=a),val:"0",label:"I Do Not Know"},null,8,["modelValue"])]),n("div",Yt,[Gt,l(y,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[11]||(t[11]=a=>e.attendance=a),val:"1",label:"Strongly Disagree"},null,8,["modelValue"]),l(y,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[12]||(t[12]=a=>e.attendance=a),val:"2",label:"Disagree"},null,8,["modelValue"]),l(y,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[13]||(t[13]=a=>e.attendance=a),val:"3",label:"Neutral"},null,8,["modelValue"]),l(y,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[14]||(t[14]=a=>e.attendance=a),val:"4",label:"Agree"},null,8,["modelValue"]),l(y,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[15]||(t[15]=a=>e.attendance=a),val:"5",label:"Strongly Agree"},null,8,["modelValue"]),l(y,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[16]||(t[16]=a=>e.attendance=a),val:"0",label:"I Do Not Know"},null,8,["modelValue"])]),n("div",Zt,[xt,l(y,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[17]||(t[17]=a=>e.attitude=a),val:"1",label:"Strongly Disagree"},null,8,["modelValue"]),l(y,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[18]||(t[18]=a=>e.attitude=a),val:"2",label:"Disagree"},null,8,["modelValue"]),l(y,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[19]||(t[19]=a=>e.attitude=a),val:"3",label:"Neutral"},null,8,["modelValue"]),l(y,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[20]||(t[20]=a=>e.attitude=a),val:"4",label:"Agree"},null,8,["modelValue"]),l(y,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[21]||(t[21]=a=>e.attitude=a),val:"5",label:"Strongly Agree"},null,8,["modelValue"]),l(y,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[22]||(t[22]=a=>e.attitude=a),val:"0",label:"I Do Not Know"},null,8,["modelValue"])]),n("div",_t,[ea,l(y,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[23]||(t[23]=a=>e.promotable=a),val:"1",label:"Strongly Disagree"},null,8,["modelValue"]),l(y,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[24]||(t[24]=a=>e.promotable=a),val:"2",label:"Disagree"},null,8,["modelValue"]),l(y,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[25]||(t[25]=a=>e.promotable=a),val:"3",label:"Neutral"},null,8,["modelValue"]),l(y,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[26]||(t[26]=a=>e.promotable=a),val:"4",label:"Agree"},null,8,["modelValue"]),l(y,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[27]||(t[27]=a=>e.promotable=a),val:"5",label:"Strongly Agree"},null,8,["modelValue"]),l(y,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[28]||(t[28]=a=>e.promotable=a),val:"0",label:"I Do Not Know"},null,8,["modelValue"])])]),n("div",ta,[n("div",aa,[la,l(ae,{dense:"",clearable:"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.supervisor,"onUpdate:modelValue":t[29]||(t[29]=a=>e.supervisor=a),options:e.getAssignments(e.props.record[74]).length>0?e.getAssignments(e.props.record[74]).filter(a=>a[3]!==e.props.record[3]).sort((a,g)=>a[75]>g[75]?1:-1):[],"option-label":a=>`${a[75]} - ${a[104]}`,"display-value":`${e.supervisor?e.supervisor[75]:""}`,"bottom-slots":"",error:!!e.formErrors.supervisor,hint:"Ex: Employee's Supervisor"},{error:p(()=>[n("div",oa,M(e.formErrors.supervisor),1)]),"no-option":p(()=>[l(ee,null,{default:p(()=>[l(G,{class:"text-grey"},{default:p(()=>[J(" No Options Available ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","option-label","display-value","error"])])])]),_:1})]),_:1})])]),n("div",sa,[n("div",na,[l(ve,{filled:"",type:"textarea",modelValue:e.comments,"onUpdate:modelValue":t[30]||(t[30]=a=>e.comments=a),label:"Comments"},null,8,["modelValue"])])]),l(_e,{align:"right"},{default:p(()=>[l(te,{color:"info",label:"Submit",type:"submit"}),l(te,{color:"secondary",label:"Cancel",onClick:e.cancelRelease},null,8,["onClick"])]),_:1})]),_:1},8,["onSubmit"])])}var ra=Re(Vt,[["render",ia]]);const ua=Fe({components:{ReleaseForm:ra},setup(){const e=K(0),t=tt(),r=Ae(),f=ke(),{getEmployee:s,getAssignmentsByEmployee:d,setAssignmentsByEmployee:a,setEmployees:g,setReleases:D,setReleasesByAssignment:h,setReleasesByEmployee:N}=Ne(),V=q(()=>s(t.params.id)),F=q(()=>V.value?d(V.value[3]):null),U=async()=>{if(!F.value&&V.value[577]){const{data:i}=await z.fetchFromHiringApp({fields:[De({type:"assignments",query:"",id:V.value[577]})]});console.log(i),a({id:V.value[3],data:i})}};return Ce(V,(i,b)=>{i&&U()}),{employee:V,assignment:F,releaseSubmitted:({employee:i,release:b,assignment:j,effectiveNow:o})=>{f.notify({type:"positive",message:"Release successfully submitted."}),o?(i[581]=b[3],D({id:b[3],data:b}),g({id:i[3],data:i}),a({id:i[3],assignment:j}),h({id:j[3],data:b}),N({id:i[3],data:b})):(i[581]=b[3],g({id:i[3],data:i}),D({id:b[3],data:b}),h({id:j[3],data:b}),N({id:i[3],data:b})),r.replace({name:"view-ee-release",params:{id:i[3],release:b[3]}})},step:e}}}),da={class:"q-pa-sm"},ma={class:"row"},ca={class:"col-12"},pa=n("div",{class:"text-h6 text-weight-bold q-mb-md"},"Please complete the following to submit this release.",-1);function fa(e,t,r,f,s,d){const a=at("release-form");return Q(),ge(lt,{style:{"max-width":"100vw"}},{default:p(()=>[n("div",da,[n("div",ma,[n("div",ca,[l(ue,{flat:""},{default:p(()=>[e.assignment?(Q(),ge(de,{key:0},{default:p(()=>[pa,l(a,{record:e.assignment,employee:e.employee,onReleaseSubmitted:e.releaseSubmitted},null,8,["record","employee","onReleaseSubmitted"])]),_:1})):Ue("",!0)]),_:1})])])])]),_:1})}var Ta=Re(ua,[["render",fa]]);export{Ta as default};
