import{Q as be,b as ye,a as ve}from"./QTabPanels.06cc4af0.js";import{Q as we}from"./QTabs.d70a9a25.js";import{Q as Ce}from"./QToolbar.494c5d41.js";import{Q as $e}from"./QPage.5a0e1cca.js";import{u as Z}from"./use-quasar.4af32af0.js";import{l as J,r as C,_ as K,A as g,B as E,d as r,bi as n,cz as G,cw as P,D as m,ab as S,cx as D,cy as B,bO as h,bF as re,y as ie,ao as R,cA as me,aZ as W,an as T,F as I,aY as Y,au as de,d5 as fe,bM as pe,c as te,w as he}from"./index.8bd7d03d.js";import{a as Q,c as k}from"./array.14a74a50.js";import{q as $}from"./quickbase.c9a95ac7.js";import{c as _,a as Ae}from"./useQuerySaver.73c5586e.js";import"./dayjs.cdcb4373.js";import{u as ke}from"./index.0f5fcea1.js";import{u as ge}from"./dataStore.b8fdaaa5.js";import{Q as ue}from"./QInnerLoading.fe8d9432.js";import{a as ce,Q as x}from"./QTable.6a0684f8.js";import{Q as ee}from"./QTr.9ef1cc28.js";import{Q as ae}from"./QTd.f4f753a0.js";import{Q as oe}from"./QSelect.c330a623.js";import{Q as le}from"./QForm.85837132.js";import{a as ne,u as X}from"./vee-validate.esm.fe112456.js";import"./use-panel.7de68e10.js";import"./touch.60582172.js";import"./selection.f7c019af.js";import"./QResizeObserver.743a08b5.js";import"./rtl.cf9bbe47.js";import"./_commonjsHelpers.a26ce4be.js";import"./index.7dbe61ef.js";import"./localForage.f89ac332.js";import"./i18n.711540c5.js";import"./api.d2932112.js";import"./QList.ffe6803e.js";import"./QMarkupTable.b9f567b7.js";import"./use-fullscreen.fab45d51.js";import"./QChip.cc56d764.js";import"./QItemLabel.9525a139.js";import"./QMenu.cac3fcd3.js";import"./position-engine.d9830195.js";const qe=J({emits:["cancelAdd","addComplete"],props:{},setup(a,{emit:t}){const y=Z(),u=C(null),{capitalize:c}=ie,b=N=>{const F=N.split(" ");let L="";return F.forEach((z,H)=>{L+=H>0?` ${c(z.toLowerCase())}`:c(z.toLowerCase())}),L},l=Q({name:k().required().label("Course Name"),category:Q().required().label("Category").nullable(),code:k().label("Course Code").nullable()}),{meta:i,errors:v,handleSubmit:A,handleReset:q}=ne({validationSchema:l}),{value:e}=X("name"),{value:o}=X("category"),{value:s}=X("code"),d=A(async N=>{const F={6:{value:b(N.name)},8:{value:N.code||""},10:{value:N.category[3]}};try{const{data:L}=await $.upsertRecordsXML({to:"bp6rvwu6i",data:[F],fieldsToReturn:[20],formatObject:20});t("addComplete",L[0][20]),q()}catch(L){console.log(L),y.notify({type:"negative",message:"Something went wrong!"})}});return(async()=>{const{data:N}=await $.fetchFromCredentialsAndTrainingApp({fields:[_({type:"requirementCategories",query:"{'7'.EX.'Active'}"})]});u.value=N.sort((F,L)=>F[6]>L[6]?1:-1)})(),{formErrors:v,formMeta:i,submit:d,name:e,category:o,code:s,categories:u}}}),Ne={class:"q-mb-md"},Se={class:"text-caption"},Ve={class:"q-mb-md"},Oe={class:"text-caption"},Te={class:"text-caption"};function Ee(a,t,y,u,c,b){return g(),E("div",null,[r(le,{onSubmit:re(a.submit,["prevent"])},{default:n(()=>[r(G,null,{default:n(()=>[r(P,null,{default:n(()=>[m("div",null,[m("div",Ne,[r(oe,{class:"q-mb-sm",dense:"",label:"Select a Category","transition-show":"flip-up","transition-hide":"flip-down",modelValue:a.category,"onUpdate:modelValue":t[0]||(t[0]=l=>a.category=l),options:a.categories||[],"option-label":"6","display-value":`${a.category?a.category[6]:""}`,"bottom-slots":"",error:!!a.formErrors.category},{error:n(()=>[m("div",Se,S(a.formErrors.category),1)]),_:1},8,["modelValue","options","display-value","error"])]),m("div",Ve,[r(D,{label:"Course Name",dense:"",modelValue:a.name,"onUpdate:modelValue":t[1]||(t[1]=l=>a.name=l),error:!!a.formErrors.name,"bottom-slots":""},{error:n(()=>[m("div",Oe,S(a.formErrors.name),1)]),_:1},8,["modelValue","error"])]),m("div",null,[r(D,{label:"Course Code",dense:"",modelValue:a.code,"onUpdate:modelValue":t[2]||(t[2]=l=>a.code=l),error:!!a.formErrors.code,"bottom-slots":""},{error:n(()=>[m("div",Te,S(a.formErrors.code),1)]),_:1},8,["modelValue","error"])])])]),_:1}),r(B,{align:"right"},{default:n(()=>[r(h,{color:"secondary",label:"Cancel",onClick:t[3]||(t[3]=l=>a.$emit("cancelAdd"))}),r(h,{color:"primary",label:"Submit",type:"submit",onClick:a.submit},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])])}var Me=K(qe,[["render",Ee]]);const Re=J({emits:["cancelAdd","addComplete"],props:{},setup(a,{emit:t}){const y=Z(),u=C([]),c=C([]),b=C(!1),l=C(""),i=C(null),{capitalize:v}=ie,A=f=>{const w=f.split(" ");let O="";return w.forEach((M,U)=>{O+=U>0?` ${v(M.toLowerCase())}`:v(M.toLowerCase())}),O},q=Q({name:k().required().label("Type"),category:Q().required().label("Regulator").nullable(),code:k().required().label("Description").nullable()}),{meta:e,errors:o,handleSubmit:s,handleReset:d}=ne({validationSchema:q}),{value:p}=X("name"),{value:N}=X("category"),{value:F}=X("code"),L=s(async f=>{const w={6:{value:A(f.name)},7:{value:f.code},8:{value:f.category[3]}};try{const{data:O}=await $.upsertRecordsXML({to:"bp6rvxmg3",data:[w],fieldsToReturn:[15],formatObject:15});t("addComplete",O[0][15]),d()}catch(O){console.log(O),y.notify({type:"negative",message:"Something went wrong!"})}}),z=(f,w)=>{if(f===""){w(()=>{u.value=c.value});return}w(()=>{const O=f.toLowerCase();u.value=c.value.filter(M=>M[6].toLowerCase().indexOf(O)>-1)})},H=async()=>{await k().required().label("Regulator Name").isValid(l.value)?(i.value=null,se(l.value)):i.value="Regulator Name is required!"},se=async f=>{try{const{data:w}=await $.upsertRecordsXML({to:"bp6r8qzkg",data:[{6:{value:A(f)}}],fieldsToReturn:[12],formatObject:12});c.value.push(w[0][12]),N.value=w[0][12],u.value=c.value,V()}catch(w){y.dialog({title:"Alert",message:w}).onDismiss(()=>{V()})}},V=()=>{l.value="",i.value=!1,b.value=!1};return(async()=>{const{data:f}=await $.fetchFromCredentialsAndTrainingApp({fields:[_({type:"regulators",query:"{'7'.EX.'Active'}"})]});c.value=f.sort((w,O)=>w[6]>O[6]?1:-1),u.value=c.value})(),{formErrors:o,formMeta:e,submit:L,name:p,category:N,code:F,categories:u,filterOptions:z,addNew:b,newCategory:l,newCatError:i,closeAddNew:V,validateNewCategory:H}}}),Le={class:"q-mb-md"},Fe={class:"text-caption"},je={key:0,class:"text-center bg-info"},Xe={class:"text-center bg-info"},Qe={class:"q-mb-md"},De={class:"text-caption"},Ue={class:"text-caption"},Pe={class:"text-caption"};function Be(a,t,y,u,c,b){return g(),E("div",null,[r(le,{onSubmit:re(a.submit,["prevent"])},{default:n(()=>[r(G,null,{default:n(()=>[r(P,null,{default:n(()=>[m("div",null,[m("div",Le,[r(oe,{class:"q-mb-sm",dense:"",label:"Select a Regulator","transition-show":"flip-up","transition-hide":"flip-down",modelValue:a.category,"onUpdate:modelValue":t[2]||(t[2]=l=>a.category=l),options:a.categories,"option-label":"6","display-value":`${a.category?a.category[6]:""}`,"bottom-slots":"",error:!!a.formErrors.category,"use-input":"","input-debounce":"0",onFilter:a.filterOptions},{error:n(()=>[m("div",Fe,S(a.formErrors.category),1)]),"after-options":n(()=>[a.categories.length>0?(g(),E("div",je,[r(h,{flat:"",color:"white",label:"Add a New Regulator",onClick:t[0]||(t[0]=l=>a.addNew=!0)})])):R("",!0)]),"no-option":n(()=>[m("div",Xe,[r(h,{flat:"",color:"white",label:"Add a New Regulator",onClick:t[1]||(t[1]=l=>a.addNew=!0)})])]),_:1},8,["modelValue","options","display-value","error","onFilter"])]),m("div",Qe,[r(D,{label:"Test Type",dense:"",modelValue:a.name,"onUpdate:modelValue":t[3]||(t[3]=l=>a.name=l),error:!!a.formErrors.name,"bottom-slots":""},{error:n(()=>[m("div",De,S(a.formErrors.name),1)]),_:1},8,["modelValue","error"])]),m("div",null,[r(D,{label:"Description",dense:"",modelValue:a.code,"onUpdate:modelValue":t[4]||(t[4]=l=>a.code=l),error:!!a.formErrors.code,"bottom-slots":""},{error:n(()=>[m("div",Ue,S(a.formErrors.code),1)]),_:1},8,["modelValue","error"])])])]),_:1}),r(B,{align:"right"},{default:n(()=>[r(h,{color:"secondary",label:"Cancel",onClick:t[5]||(t[5]=l=>a.$emit("cancelAdd"))}),r(h,{color:"primary",label:"Submit",type:"submit",onClick:a.submit},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onSubmit"]),r(me,{modelValue:a.addNew,"onUpdate:modelValue":t[7]||(t[7]=l=>a.addNew=l)},{default:n(()=>[r(G,null,{default:n(()=>[r(P,null,{default:n(()=>[r(D,{dense:"",label:"Regulator Name",modelValue:a.newCategory,"onUpdate:modelValue":t[6]||(t[6]=l=>a.newCategory=l),error:!!a.newCatError,"bottom-slots":""},{error:n(()=>[m("div",Pe,S(a.newCatError),1)]),_:1},8,["modelValue","error"])]),_:1}),r(B,{align:"right"},{default:n(()=>[r(h,{color:"secondary",label:"Cancel",onClick:a.closeAddNew},null,8,["onClick"]),r(h,{color:"primary",label:"Submit",type:"submit",onClick:a.validateNewCategory},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var ze=K(Re,[["render",Be]]);const He=[{label:"Half Face",value:"Half"},{label:"Full Face",value:"Full"}],Ie=J({emits:["cancelAdd","addComplete"],props:{options:Array},setup(a,{emit:t}){const y=Z(),u=C([]),c=C([]),b=C(!1),l=C(""),i=C(null),v=Q({name:k().required().label("Model"),category:k().required().label("Manufacturer").nullable(),code:Q().required().label("Type").nullable()}),{meta:A,errors:q,handleSubmit:e,handleReset:o}=ne({validationSchema:v}),{value:s}=X("name"),{value:d}=X("category"),{value:p}=X("code"),N=e(async V=>{const j={8:{value:V.name},11:{value:V.category},13:{value:V.code.value}};try{const{data:f}=await $.upsertRecordsXML({to:"bp6rv4qnn",data:[j],fieldsToReturn:[16],formatObject:16});t("addComplete",f[0][16]),o()}catch(f){console.log(f),y.notify({type:"negative",message:"Something went wrong!"})}}),F=(V,j)=>{if(!V||V===""){j(()=>{u.value=c.value});return}j(()=>{const f=V.toLowerCase();u.value=c.value.filter(w=>w.toLowerCase().indexOf(f)>-1)})},L=async()=>{await k().required().isValid(l.value)?(i.value=null,z(l.value)):i.value="Manufacturer Name is required!"},z=V=>{const j=c.value.find(f=>f===V);j?d.value=j:(c.value.unshift(V),u.value=c.value),H()},H=()=>{l.value="",i.value=!1,b.value=!1};return(()=>{const V=a.options;c.value=[...new Map(V.map(j=>[j[11],j[11]])).values()],u.value=c.value})(),{formErrors:q,formMeta:A,submit:N,name:s,category:d,code:p,categories:u,types:He,filterOptions:F,addNew:b,newCategory:l,newCatError:i,closeAddNew:H,validateNewCategory:L}}}),Ye={class:"q-mb-md"},Ge={class:"text-caption"},Ze={key:0,class:"text-center bg-info"},Je={class:"text-center bg-info"},Ke={class:"q-mb-md"},We={class:"text-caption"},_e={class:"text-caption"},xe={class:"text-caption"};function ea(a,t,y,u,c,b){return g(),E("div",null,[r(le,{onSubmit:re(a.submit,["prevent"])},{default:n(()=>[r(G,null,{default:n(()=>[r(P,null,{default:n(()=>[m("div",null,[m("div",Ye,[r(oe,{class:"q-mb-sm",dense:"",label:"Select a Manufacturer",modelValue:a.category,"onUpdate:modelValue":t[2]||(t[2]=l=>a.category=l),options:a.categories,"bottom-slots":"",error:!!a.formErrors.category,"use-input":"","input-debounce":"0",onFilter:a.filterOptions},{error:n(()=>[m("div",Ge,S(a.formErrors.category),1)]),"after-options":n(()=>[a.categories.length>0?(g(),E("div",Ze,[r(h,{flat:"",color:"white",label:"Add a New Manufacturer",onClick:t[0]||(t[0]=l=>a.addNew=!0)})])):R("",!0)]),"no-option":n(()=>[m("div",Je,[r(h,{flat:"",color:"white",label:"Add a New Manufacturer",onClick:t[1]||(t[1]=l=>a.addNew=!0)})])]),_:1},8,["modelValue","options","error","onFilter"])]),m("div",Ke,[r(D,{label:"Model",dense:"",modelValue:a.name,"onUpdate:modelValue":t[3]||(t[3]=l=>a.name=l),error:!!a.formErrors.name,"bottom-slots":""},{error:n(()=>[m("div",We,S(a.formErrors.name),1)]),_:1},8,["modelValue","error"])]),m("div",null,[r(oe,{class:"q-mb-sm",dense:"",label:"Mask Type","transition-show":"flip-up","transition-hide":"flip-down",modelValue:a.code,"onUpdate:modelValue":t[4]||(t[4]=l=>a.code=l),options:a.types,"bottom-slots":"",error:!!a.formErrors.code},{error:n(()=>[m("div",_e,S(a.formErrors.code),1)]),_:1},8,["modelValue","options","error"])])])]),_:1}),r(B,{align:"right"},{default:n(()=>[r(h,{color:"secondary",label:"Cancel",onClick:t[5]||(t[5]=l=>a.$emit("cancelAdd"))}),r(h,{color:"primary",label:"Submit",type:"submit",onClick:a.submit},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onSubmit"]),r(me,{modelValue:a.addNew,"onUpdate:modelValue":t[7]||(t[7]=l=>a.addNew=l)},{default:n(()=>[r(G,null,{default:n(()=>[r(P,null,{default:n(()=>[r(D,{dense:"",label:"Manufacturer Name",modelValue:a.newCategory,"onUpdate:modelValue":t[6]||(t[6]=l=>a.newCategory=l),error:!!a.newCatError,"bottom-slots":""},{error:n(()=>[m("div",xe,S(a.newCatError),1)]),_:1},8,["modelValue","error"])]),_:1}),r(B,{align:"right"},{default:n(()=>[r(h,{color:"secondary",label:"Cancel",onClick:a.closeAddNew},null,8,["onClick"]),r(h,{color:"primary",label:"Submit",type:"submit",onClick:a.validateNewCategory},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var aa=K(Ie,[["render",ea]]);const ta=J({emits:["cancelAdd","addComplete"],props:{options:Array},setup(a,{emit:t}){const y=Z(),{capitalize:u}=ie,c=o=>{const s=o.split(" ");let d="";return s.forEach((p,N)=>{d+=N>0?` ${u(p.toLowerCase())}`:u(p.toLowerCase())}),d},b=Q({code:k().label("Course Code").nullable()}),{meta:l,errors:i,handleSubmit:v,handleReset:A}=ne({validationSchema:b}),{value:q}=X("code"),e=v(async o=>{if(a.options.find(p=>p[6].toLowerCase()===o.code.toLowerCase())){y.notify({type:"negative",message:"Medical Screen already exists!"}),t("cancelAdd");return}const d={6:{value:c(o.code)}};try{const{data:p}=await $.upsertRecordsXML({to:"bp6rv3ne3",data:[d],fieldsToReturn:[12],formatObject:12});t("addComplete",p[0][12]),A()}catch(p){console.log(p),y.notify({type:"negative",message:"Something went wrong!"})}});return{formErrors:i,formMeta:l,submit:e,code:q}}}),oa={class:"text-caption"};function ra(a,t,y,u,c,b){return g(),E("div",null,[r(le,{onSubmit:re(a.submit,["prevent"])},{default:n(()=>[r(G,null,{default:n(()=>[r(P,null,{default:n(()=>[m("div",null,[m("div",null,[r(D,{label:"Medical Screen Type",dense:"",modelValue:a.code,"onUpdate:modelValue":t[0]||(t[0]=l=>a.code=l),error:!!a.formErrors.code,"bottom-slots":""},{error:n(()=>[m("div",oa,S(a.formErrors.code),1)]),_:1},8,["modelValue","error"])])])]),_:1}),r(B,{align:"right"},{default:n(()=>[r(h,{color:"secondary",label:"Cancel",onClick:t[1]||(t[1]=l=>a.$emit("cancelAdd"))}),r(h,{color:"primary",label:"Submit",type:"submit",onClick:a.submit},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])])}var la=K(ta,[["render",ra]]);const na=[{label:"Half Face",value:"Half"},{label:"Full Face",value:"Full"}],sa=J({emits:["cancelAdd","addComplete"],props:{options:Array},setup(a,{emit:t}){const y=Z(),u=C([]),c=C([]),b=C(!1),l=C(""),i=C(null),{capitalize:v}=ie,A=f=>{const w=f.split(" ");let O="";return w.forEach((M,U)=>{O+=U>0?` ${v(M.toLowerCase())}`:v(M.toLowerCase())}),O},q=Q({name:k().required().label("Model"),category:k().required().label("Manufacturer").nullable()}),{meta:e,errors:o,handleSubmit:s,handleReset:d}=ne({validationSchema:q}),{value:p}=X("name"),{value:N}=X("category"),F=async f=>{const{data:w}=await $.upsertRecordsXML({to:"bp6sjuy5b",data:[{6:{value:A(f)}}],fieldsToReturn:[3]});return console.log(w),w[0][3]},L=s(async f=>{if(f.category==="Yes"){if(a.options.find(M=>M[8].toLowerCase()===f.name.toLowerCase())){y.notify({type:"negative",message:"Owner already exists!"}),t("cancelAdd");return}const O={6:{value:1},8:{value:f.name}};try{const{data:M}=await $.upsertRecordsXML({to:"bp6rvyr7k",data:[O],fieldsToReturn:[17],formatObject:17});t("addComplete",M[0][17]),d()}catch(M){console.log(M),y.notify({type:"negative",message:"Something went wrong!"})}}else{if(a.options.find(U=>U[8].toLowerCase()===f.name.toLowerCase())){y.notify({type:"negative",message:"Background Type already exists!"}),t("cancelAdd");return}y.loading.show();const M={6:{value:await F(f.name)},8:{value:A(f.name)}};try{const{data:U}=await $.upsertRecordsXML({to:"bp6rvyr7k",data:[M],fieldsToReturn:[17],formatObject:17});t("addComplete",U[0][17]),d()}catch(U){console.log(U),y.notify({type:"negative",message:"Something went wrong!"})}y.loading.hide()}}),z=(f,w)=>{if(!f||f===""){w(()=>{u.value=c.value});return}w(()=>{const O=f.toLowerCase();u.value=c.value.filter(M=>M.toLowerCase().indexOf(O)>-1)})},H=async()=>{await k().required().isValid(l.value)?(i.value=null,se(l.value)):i.value="Manufacturer Name is required!"},se=f=>{const w=c.value.find(O=>O===f);w?N.value=w:(c.value.unshift(f),u.value=c.value),V()},V=()=>{l.value="",i.value=!1,b.value=!1};return(()=>{const f=a.options;c.value=[...new Map(f.map(w=>[w[11],w[11]])).values()],u.value=c.value})(),{formErrors:o,formMeta:e,submit:L,name:p,category:N,categories:u,types:na,filterOptions:z,addNew:b,newCategory:l,newCatError:i,closeAddNew:V,validateNewCategory:H}}}),ia={class:"q-mb-sm"},da=m("div",{class:"text-body2 q-pb-md q-pr-md"}," Is this background Disa Express DCC Order? ",-1),ua={class:"text-caption"},ca={key:0,class:"q-mb-md"},ma={class:"text-caption"};function fa(a,t,y,u,c,b){return g(),E("div",null,[r(le,{onSubmit:re(a.submit,["prevent"])},{default:n(()=>[r(G,null,{default:n(()=>[r(P,null,{default:n(()=>[m("div",null,[m("div",ia,[da,r(oe,{dense:"",modelValue:a.category,"onUpdate:modelValue":t[0]||(t[0]=l=>a.category=l),label:"Make a Selection",options:["No","Yes"],"bottom-slots":"",error:!!a.formErrors.category,style:{width:"200px"}},{error:n(()=>[m("div",ua,S(a.formErrors.category),1)]),_:1},8,["modelValue","error"])]),a.category?(g(),E("div",ca,[r(D,{label:a.category==="Yes"?"Owner Name":"Background Check Type",dense:"",modelValue:a.name,"onUpdate:modelValue":t[1]||(t[1]=l=>a.name=l),error:!!a.formErrors.name,"bottom-slots":""},{error:n(()=>[m("div",ma,S(a.formErrors.name),1)]),_:1},8,["label","modelValue","error"])])):R("",!0)])]),_:1}),r(B,{align:"right"},{default:n(()=>[r(h,{color:"secondary",label:"Cancel",onClick:t[2]||(t[2]=l=>a.$emit("cancelAdd"))}),r(h,{color:"primary",label:"Submit",type:"submit",onClick:a.submit},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])])}var pa=K(sa,[["render",fa]]);const ga=J({components:{AddAvailableOrientation:Me,AddAvailableDrugScreen:ze,AddAvailableFitTest:aa,AddAvailableMedical:la,AddAvailableBackground:pa},emits:["hideAdd"],props:{config:Object},setup(a,{emit:t}){const y=Z(),u=C(""),c=C([]),b=C(!1),l=C([]),i=C(null),v=C(!1),A=p=>{y.dialog({title:"Alert",message:p}).onOk(()=>{t("hideAdd")}).onCancel(()=>{t("hideAdd")})},q=p=>{const{filter:N}=a.config;if(p){const F=p.toLowerCase();l.value=N(i.value,F)}else l.value=i.value},e=async()=>{const{getter:p,tableColumns:N}=a.config;p?N?(v.value=!0,i.value=await p(),l.value=i.value,v.value=!1):A("Table columns are required in config props!"):A("A getter is required in config props!")},o=()=>{c.value.length===0?t("hideAdd"):y.dialog({title:"Confirm",message:"Are you sure? All your selections will be lost.",cancel:!0,persistent:!0}).onOk(()=>{t("hideAdd")})},s=async()=>{const{setter:p}=a.config;p?(v.value=!0,await p({selections:c.value}),t("hideAdd"),v.value=!1):A("A setter is required in config props!")},d=p=>{i.value.push(p),c.value.push(p),q(null),b.value=!1};return e(),{options:l,rawOptions:i,selection:c,addNew:b,search:u,filterOptions:q,loading:v,initialPagination:{rowsPerPage:C(10)},cancelAdd:o,submit:s,newOptionAdded:d}}}),ba={class:"row justify-between"},ya={class:"col-12 col-sm-4"},va={class:"col-4 text-right"},wa={class:"row"},Ca={class:"col-12 col-md-8 q-px-xs"},$a={class:"text-caption"},ha={key:0,class:"col-12 col-md-4 q-px-xs"},Aa={class:"text-caption"},ka={class:"full-width text-dark text-italic"};function qa(a,t,y,u,c,b){const l=W("add-available-orientation"),i=W("add-available-drug-screen"),v=W("add-available-fit-test"),A=W("add-available-medical"),q=W("add-available-background");return g(),E("div",null,[r(G,{flat:""},{default:n(()=>[r(P,{class:"q-pa-sm"},{default:n(()=>[m("div",ba,[m("div",ya,[r(D,{outlined:"",filled:"",clearable:"",dense:"",modelValue:a.search,"onUpdate:modelValue":[t[0]||(t[0]=e=>a.search=e),t[1]||(t[1]=e=>a.filterOptions(e))],placeholder:"Search"},null,8,["modelValue"])]),m("div",va,[r(h,{color:"dark",label:"Cancel",icon:"arrow_back",onClick:a.cancelAdd},null,8,["onClick"])])])]),_:1}),r(P,{class:"q-pa-xs"},{default:n(()=>[m("div",wa,[m("div",Ca,[r(ce,{title:"Available Options","title-class":"text-body1 text-primary",dense:"",columns:a.config.tableColumns,rows:a.options,"row-key":e=>e[3],"table-header-class":"bg-dark text-white text-caption",pagination:a.initialPagination,loading:a.loading,selection:"multiple",selected:a.selection,"onUpdate:selected":t[3]||(t[3]=e=>a.selection=e)},{"top-right":n(()=>[a.config.allowNew?(g(),T(h,{key:0,color:"accent",size:"sm",label:"Add Another Option",onClick:t[2]||(t[2]=e=>a.addNew=!0)})):R("",!0)]),header:n(e=>[r(ee,{class:"bg-dark text-white",props:e},{default:n(()=>[r(x,{"auto-width":""}),(g(!0),E(I,null,Y(e.cols,o=>(g(),T(x,{class:"text-left",key:o.name},{default:n(()=>[de(S(o.label),1)]),_:2},1024))),128))]),_:2},1032,["props"])]),body:n(e=>[r(ee,{"no-hover":"",props:e},{default:n(()=>[r(ae,{"auto-width":""},{default:n(()=>[r(fe,{class:"q-pa-none q-ma-none",size:"xs",modelValue:e.selected,"onUpdate:modelValue":o=>e.selected=o},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),(g(!0),E(I,null,Y(e.cols,o=>(g(),T(ae,{key:o.name,props:e},{default:n(()=>[m("span",$a,S(o.value),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),loading:n(()=>[r(ue,{showing:a.loading,label:"Loading...","label-class":"text-info"},null,8,["showing"])]),_:1},8,["columns","rows","row-key","pagination","loading","selected"])]),a.loading?R("",!0):(g(),E("div",ha,[r(ce,{title:"Selections","title-class":"text-body1 text-primary",dense:"",columns:a.config.tableColumns.filter(e=>e.showOnSelection),rows:a.selection,"row-key":e=>e[3],"table-header-class":"bg-dark text-white text-caption",loading:a.loading,"hide-pagination":"",pagination:{rowsPerPage:25},"rows-per-page-options":[0],"no-data-label":"No options have been selected",selection:"multiple",selected:a.selection,"onUpdate:selected":t[4]||(t[4]=e=>a.selection=e)},{header:n(e=>[r(ee,{class:"bg-dark text-white",props:e},{default:n(()=>[(g(!0),E(I,null,Y(e.cols,o=>(g(),T(x,{class:"text-left",key:o.name},{default:n(()=>[de(S(o.label),1)]),_:2},1024))),128)),r(x,{"auto-width":""})]),_:2},1032,["props"])]),body:n(e=>[r(ee,{"no-hover":"",props:e},{default:n(()=>[(g(!0),E(I,null,Y(e.cols,o=>(g(),T(ae,{key:o.name,props:e},{default:n(()=>[m("span",Aa,S(o.value),1)]),_:2},1032,["props"]))),128)),r(ae,{class:"q-pa-none","auto-width":""},{default:n(()=>[r(fe,{class:"q-pa-none q-ma-none",size:"xs",modelValue:e.selected,"onUpdate:modelValue":o=>e.selected=o},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1032,["props"])]),"no-data":n(({message:e})=>[m("div",ka,[m("span",null,S(e),1)])]),loading:n(()=>[r(ue,{showing:a.loading,label:"Loading...","label-class":"text-info"},null,8,["showing"])]),_:1},8,["columns","rows","row-key","loading","selected"]),r(B,{align:"right"},{default:n(()=>[a.selection.length>0?(g(),T(h,{key:0,dense:"",color:"info",label:"Submit",onClick:a.submit},null,8,["onClick"])):R("",!0)]),_:1})]))])]),_:1}),r(B,{align:"right"})]),_:1}),r(me,{persistent:"",modelValue:a.addNew,"onUpdate:modelValue":t[10]||(t[10]=e=>a.addNew=e)},{default:n(()=>[a.config.newType==="orientation"?(g(),T(l,{key:0,onCancelAdd:t[5]||(t[5]=e=>a.addNew=!1),onAddComplete:a.newOptionAdded},null,8,["onAddComplete"])):R("",!0),a.config.newType==="drugScreen"?(g(),T(i,{key:1,onCancelAdd:t[6]||(t[6]=e=>a.addNew=!1),onAddComplete:a.newOptionAdded},null,8,["onAddComplete"])):R("",!0),a.config.newType==="fitTest"?(g(),T(v,{key:2,options:a.rawOptions,onCancelAdd:t[7]||(t[7]=e=>a.addNew=!1),onAddComplete:a.newOptionAdded},null,8,["options","onAddComplete"])):R("",!0),a.config.newType==="medical"?(g(),T(A,{key:3,options:a.rawOptions,onCancelAdd:t[8]||(t[8]=e=>a.addNew=!1),onAddComplete:a.newOptionAdded},null,8,["options","onAddComplete"])):R("",!0),a.config.newType==="background"?(g(),T(q,{key:4,options:a.rawOptions,onCancelAdd:t[9]||(t[9]=e=>a.addNew=!1),onAddComplete:a.newOptionAdded},null,8,["options","onAddComplete"])):R("",!0)]),_:1},8,["modelValue"])])}var Na=K(ga,[["render",qa]]);const Sa=J({props:{category:Object,formConfig:Object},components:{AddMoreRequirements:Na},setup(a){const t=Z(),y=pe(),u=C(!0),c=C(!1),{getViewedProjects:b,updateViewedProjects:l}=ge(),i=te(()=>b(y.params.id)),v=te(()=>i.value?i.value[a.category.key]?i.value[a.category.key]:[]:[]),A=async o=>{if(u.value=!0,i.value&&(o||!i.value[a.category.key]||i.value[a.category.key].length===0)){const{data:s}=await $.fetchFromProjectsApp({fields:[Ae({type:a.category.key,query:a.category.query})]});l({id:y.params.id,dataset:a.category.key,data:s})}u.value=!1};function q(o){const{removeMessage:s}=a.category;t.dialog({title:"Confirm",message:s(o),cancel:!0,persistent:!0}).onOk(()=>{e(o)})}const e=async o=>{const{remover:s}=a.category;u.value=!0,await s({row:o,current:v.value}),u.value=!1};return A(),he(i,()=>{i.value&&A()}),{props:a,loading:u,loadData:A,rows:v,initialPagination:C({rowsPerPage:100}),removeRow:q,addNew:c}}}),Va={class:"text-caption"};function Oa(a,t,y,u,c,b){const l=W("add-more-requirements");return g(),E("div",null,[a.addNew?R("",!0):(g(),T(ce,{key:0,dense:"",columns:a.category.columns,rows:a.rows,"row-key":i=>i[3],"table-header-class":"bg-dark text-white",class:"sticky-header-table","hide-pagination":"",pagination:a.initialPagination,"onUpdate:pagination":t[2]||(t[2]=i=>a.initialPagination=i),"rows-per-page-options":[0],loading:a.loading},{"top-left":n(()=>[a.$can("manage","projects")||a.$can("create","projectRequirements")?(g(),T(h,{key:0,onClick:t[0]||(t[0]=i=>a.addNew=!0),color:"accent",label:`Add new ${a.category.label}`},null,8,["label"])):R("",!0)]),"top-right":n(()=>[r(h,{color:"secondary",flat:"","icon-right":"refresh",label:"Refresh",onClick:t[1]||(t[1]=i=>a.loadData(!0))})]),loading:n(()=>[r(ue,{showing:a.loading,label:"Loading...","label-class":"text-info"},null,8,["showing"])]),header:n(i=>[r(ee,{class:"bg-dark text-white",props:i},{default:n(()=>[(g(!0),E(I,null,Y(i.cols,v=>(g(),T(x,{class:"text-left",key:v.name},{default:n(()=>[de(S(v.label),1)]),_:2},1024))),128)),r(x,{"auto-width":""})]),_:2},1032,["props"])]),body:n(i=>[r(ee,{props:i},{default:n(()=>[(g(!0),E(I,null,Y(i.cols,v=>(g(),T(ae,{key:v.name,props:i},{default:n(()=>[m("span",Va,S(v.value),1)]),_:2},1032,["props"]))),128)),r(ae,{"auto-width":""},{default:n(()=>[a.$can("manage","projectRequirements")||a.$can("manage","projects")?(g(),T(h,{key:0,color:"accent",dense:"",flat:"",round:"",icon:"delete",onClick:v=>a.removeRow(i.row)},null,8,["onClick"])):R("",!0)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["columns","rows","row-key","pagination","loading"])),a.addNew?(g(),T(l,{key:1,config:a.formConfig,onHideAdd:t[3]||(t[3]=i=>a.addNew=!1)},null,8,["config"])):R("",!0)])}var Ta=K(Sa,[["render",Oa]]);const Ea=J({components:{RequirementPanel:Ta},setup(){const a=C("orientations"),t=Z(),y=pe(),{can:u}=ke(),{getViewedProjects:c,updateViewedProjects:b}=ge(),l=te(()=>c(y.params.id)),i=te(()=>l.value?l.value[3]:y.params.id),v=(q,e,o)=>q!==e[o]?`${q} - ${e[o]}`:q,A=te(()=>[{label:"Orientation",key:"orientations",fields:[8,9],columns:[{name:0,label:"Course Code",align:"left",field:e=>e[8],format:e=>e===""?"N/A":`${e}`,sortable:!0,required:!0},{name:1,label:"Course Name",align:"left",field:e=>e[9],format:e=>e===""?"N/A":`${e}`,sortable:!0}],query:`{'13'.EX.'${i.value}'}AND{'25'.XEX.true}`,formSchema:{category:Q().required().label("Category").nullable(),name:k().required().label("Course Name").nullable(),code:k().label("Course Code").nullable()},remover:async({row:e,current:o})=>{const{data:s}=await $.upsertRecordsXML({to:"bp6rvdha2",data:[{3:{value:e[3]},25:{value:!0}}],fieldsToReturn:[24],formatObject:24}),d=o.filter(p=>p[3]!==s[0][24][3]);b({id:i.value,dataset:"orientations",data:d})},removeMessage:e=>`Are you sure you want to remove ${e[9]} from the required orientations?`,addMoreFormConfig:{tableColumns:[{name:0,label:"Course Code",align:"left",field:e=>e[8],format:e=>e===""?"N/A":`${e}`,sortable:!0},{name:1,label:"Course Name",align:"left",field:e=>e[6],format:e=>e===""?"N/A":`${e}`,sortable:!0,required:!0,showOnSelection:!0},{name:2,label:"Category",align:"left",field:e=>e[11],format:e=>e===""?"N/A":`${e}`,sortable:!0,required:!0,showOnSelection:!1}],getter:async()=>{const{data:e}=await $.fetchFromCredentialsAndTrainingApp({fields:[_({type:"availableOrientations",query:"{'7'.EX.'Active'}"})]});return e.sort((o,s)=>o[6]>s[6]?1:-1)},setter:async({selections:e})=>{const o=[];e.forEach(s=>{const d={6:{value:l.value[84]},7:{value:s[3]}};o.push(d)});try{const{data:s}=await $.upsertRecordsXML({to:"bp6rvdha2",data:o,fieldsToReturn:[24],formatObject:24});b({id:l.value[3],dataset:"orientations",data:s.map(d=>d[24]),push:!0}),t.notify({type:"positive",message:"Orientations successfully updated"})}catch{t.notify({type:"negative",message:"Error updating Orientations"})}},filter:(e,o)=>e.filter(s=>s[6].toLowerCase().indexOf(o)>-1||s[8].toLowerCase().indexOf(o)>-1||s[11].toLowerCase().indexOf(o)>-1),allowNew:u("create","availableRequirements"),newType:"orientation",addNewFormConfig:{}}},{label:"D&A Screen",key:"drugScreens",fields:[10,8],columns:[{name:0,label:"Test Type",align:"left",field:e=>e[8],format:e=>e===""?"N/A":`${e}`,sortable:!0,required:!0},{name:1,label:"Description",align:"left",field:e=>e[10],format:e=>`${e}`,sortable:!0}],query:`{'14'.EX.'${i.value}'}AND{'23'.XEX.true}`,formSchema:{category:Q().required().label("Category").nullable(),name:k().required().label("Course Name").nullable(),code:k().label("Course Code").nullable()},remover:async({row:e,current:o})=>{const{data:s}=await $.upsertRecordsXML({to:"bp6rvd7zc",data:[{3:{value:e[3]},23:{value:!0}}],fieldsToReturn:[23],formatObject:23}),d=o.filter(p=>p[3]!==s[0][23][3]);b({id:i.value,dataset:"drugScreens",data:d})},removeMessage:e=>`Are you sure you want to remove ${e[10]} ${e[8]} from the required drug and alcohol screens?`,addMoreFormConfig:{tableColumns:[{name:0,label:"Category",align:"left",field:e=>e[9],format:e=>`${e}`,sortable:!0},{name:1,label:"Type",align:"left",field:e=>e[6],format:e=>e===""?"N/A":`${e}`,sortable:!0,required:!0,showOnSelection:!0},{name:2,label:"Description",align:"left",field:e=>e[7],format:e=>e===""?"N/A":`${e}`,sortable:!0,required:!0,showOnSelection:!0}],getter:async()=>{const{data:e}=await $.fetchFromCredentialsAndTrainingApp({fields:[_({type:"availableDrugScreens",query:"{'10'.EX.'Active'}"})]});return e.sort((o,s)=>o[6]>s[6]?1:-1)},setter:async({selections:e})=>{const o=[];e.forEach(s=>{const d={6:{value:l.value[84]},7:{value:s[3]}};o.push(d)});try{const{data:s}=await $.upsertRecordsXML({to:"bp6rvd7zc",data:o,fieldsToReturn:[22],formatObject:22});b({id:l.value[3],dataset:"drugScreens",data:s.map(d=>d[22]),push:!0}),t.notify({type:"positive",message:"Drug Screens successfully updated"})}catch{t.notify({type:"negative",message:"Error updating Drug Screens"})}},filter:(e,o)=>e.filter(s=>s[6].toLowerCase().indexOf(o)>-1||s[7].toLowerCase().indexOf(o)>-1||s[9].toLowerCase().indexOf(o)>-1),allowNew:u("create","availableRequirements"),newType:"drugScreen",addNewFormConfig:{}}},{label:"Background",key:"backgrounds",fields:[8,9],columns:[{name:0,label:"Background Type",align:"left",field:e=>e[8],format:(e,o)=>v(e,o,9),sortable:!0,required:!0}],query:`{'13'.EX.'${i.value}'}AND{'26'.XEX.true}`,formSchema:{category:Q().required().label("Category").nullable(),name:k().required().label("Course Name").nullable(),code:k().label("Course Code").nullable()},remover:async({row:e,current:o})=>{const{data:s}=await $.upsertRecordsXML({to:"bp6rvfzpj",data:[{3:{value:e[3]},26:{value:!0}}],fieldsToReturn:[25],formatObject:25}),d=o.filter(p=>p[3]!==s[0][25][3]);b({id:i.value,dataset:"backgrounds",data:d})},removeMessage:e=>`Are you sure you want to remove ${v(e[8],e,9)} from the required background checks?`,addMoreFormConfig:{tableColumns:[{name:0,label:"Background Type",align:"left",field:e=>e[7],format:(e,o)=>v(e,o,8),sortable:!0,required:!0,showOnSelection:!0}],getter:async()=>{const{data:e}=await $.fetchFromCredentialsAndTrainingApp({fields:[_({type:"availableBackgrounds",query:"{'6'.GT.0}"})]});return e.sort((o,s)=>o[7]>s[7]?1:-1)},setter:async({selections:e})=>{const o=[];e.forEach(s=>{const d={6:{value:l.value[84]},7:{value:s[3]}};o.push(d)});try{const{data:s}=await $.upsertRecordsXML({to:"bp6rvfzpj",data:o,fieldsToReturn:[25],formatObject:25});b({id:l.value[3],dataset:"backgrounds",data:s.map(d=>d[25]),push:!0}),t.notify({type:"positive",message:"Backgrounds successfully updated"})}catch{t.notify({type:"negative",message:"Error updating Backgrounds"})}},filter:(e,o)=>e.filter(s=>s[7].toLowerCase().indexOf(o)>-1||s[8].toLowerCase().indexOf(o)>-1),allowNew:u("create","availableRequirements"),newType:"background",addNewFormConfig:{}}},{label:"Fit Test",key:"fitTests",fields:[18],columns:[{name:0,label:"Mask",align:"left",field:e=>e[18],format:e=>e===""?"N/A":`${e}`,sortable:!0,required:!0},{name:1,label:"Manufacturer",align:"left",field:e=>e[20],format:e=>e===""?"N/A":`${e}`,sortable:!0}],query:`{'12'.EX.'${i.value}'}AND{'25'.XEX.true}`,formSchema:{category:k().required().label("Manufacturer").nullable(),name:k().required().label("Model").nullable(),code:k().required().label("Type").nullable()},remover:async({row:e,current:o})=>{const{data:s}=await $.upsertRecordsXML({to:"bp6rvmzc6",data:[{3:{value:e[3]},25:{value:!0}}],fieldsToReturn:[24],formatObject:24}),d=o.filter(p=>p[3]!==s[0][24][3]);b({id:i.value,dataset:"fitTests",data:d})},removeMessage:e=>`Are you sure you want to remove ${e[18]} from the required fit tests?`,addMoreFormConfig:{tableColumns:[{name:0,label:"Manufacturer",align:"left",field:e=>e[11],format:e=>`${e}`,sortable:!0,showOnSelection:!0},{name:1,label:"Model",align:"left",field:e=>e[8],format:e=>e===""?"N/A":`${e}`,sortable:!0,required:!0,showOnSelection:!0},{name:2,label:"Type",align:"left",field:e=>e[13],format:e=>e===""?"N/A":`${e} Face`,sortable:!0,required:!0}],getter:async()=>{const{data:e}=await $.fetchFromCredentialsAndTrainingApp({fields:[_({type:"availableFitTests",query:"{'9'.EX.'Active'}"})]});return e.sort((o,s)=>o[11]>s[11]?1:-1)},setter:async({selections:e})=>{const o=[];e.forEach(s=>{const d={6:{value:l.value[84]},7:{value:s[3]}};o.push(d)});try{const{data:s}=await $.upsertRecordsXML({to:"bp6rvmzc6",data:o,fieldsToReturn:[24],formatObject:24});b({id:l.value[3],dataset:"fitTests",data:s.map(d=>d[24]),push:!0}),t.notify({type:"positive",message:"Fit Tests successfully updated"})}catch{t.notify({type:"negative",message:"Error updating Fit Tests"})}},filter:(e,o)=>e.filter(s=>s[8].toLowerCase().indexOf(o)>-1||s[11].toLowerCase().indexOf(o)>-1||s[13].toLowerCase().indexOf(o)>-1),allowNew:u("create","availableRequirements"),newType:"fitTest",addNewFormConfig:{}}},{label:"Medical Screen",key:"medical",fields:[10],columns:[{name:0,label:"Screen Type",align:"left",field:e=>e[10],format:e=>e===""?"N/A":`${e}`,sortable:!0,required:!0}],query:`{'12'.EX.'${i.value}'}AND{'19'.XEX.true}`,formSchema:{category:k().required().label("Screen Type").nullable()},remover:async({row:e,current:o})=>{const{data:s}=await $.upsertRecordsXML({to:"bp6rvj39b",data:[{3:{value:e[3]},19:{value:!0}}],fieldsToReturn:[18],formatObject:18}),d=o.filter(p=>p[3]!==s[0][18][3]);b({id:i.value,dataset:"medical",data:d})},removeMessage:e=>`Are you sure you want to remove ${e[10]} from the required medical screens?`,addMoreFormConfig:{tableColumns:[{name:0,label:"Medical Screen Type",align:"left",field:e=>e[6],format:e=>`${e}`,sortable:!0,showOnSelection:!0}],getter:async()=>{const{data:e}=await $.fetchFromCredentialsAndTrainingApp({fields:[_({type:"availableMedical",query:"{'7'.EX.'Active'}"})]});return e.sort((o,s)=>o[6]>s[6]?1:-1)},setter:async({selections:e})=>{const o=[];e.forEach(s=>{const d={6:{value:l.value[84]},7:{value:s[3]}};o.push(d)});try{const{data:s}=await $.upsertRecordsXML({to:"bp6rvj39b",data:o,fieldsToReturn:[18],formatObject:18});b({id:l.value[3],dataset:"medical",data:s.map(d=>d[18]),push:!0}),t.notify({type:"positive",message:"Medical Screens successfully updated"})}catch{t.notify({type:"negative",message:"Error updating Medical Screens"})}},filter:(e,o)=>e.filter(s=>s[6].toLowerCase().indexOf(o)>-1),allowNew:u("create","availableRequirements"),newType:"medical",addNewFormConfig:{}}}]);return{tab:a,project:l,categories:A}}}),Ma={class:"q-pa-sm"};function Ra(a,t,y,u,c,b){const l=W("requirement-panel");return g(),T($e,{style:{"max-width":"100vw"}},{default:n(()=>[m("div",Ma,[r(Ce,{class:"bg-info text-white shadow-2 rounded-borders"},{default:n(()=>[r(we,{dense:"",modelValue:a.tab,"onUpdate:modelValue":t[0]||(t[0]=i=>a.tab=i),align:"left","indicator-color":"accent"},{default:n(()=>[(g(!0),E(I,null,Y(a.categories,i=>(g(),T(be,{key:i.key,name:i.key,label:`${i.label}s`},null,8,["name","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(ve,{modelValue:a.tab,"onUpdate:modelValue":t[1]||(t[1]=i=>a.tab=i),animated:""},{default:n(()=>[(g(!0),E(I,null,Y(a.categories,i=>(g(),T(ye,{key:i.key,name:i.key,class:"q-px-xs"},{default:n(()=>[r(l,{category:i,formConfig:i.addMoreFormConfig},null,8,["category","formConfig"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])])]),_:1})}var bt=K(Ea,[["render",Ra]]);export{bt as default};
