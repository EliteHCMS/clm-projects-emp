import{Q as P}from"./QSpace.0aefa4da.js";import{c1 as O,r,w as U,aK as W,c as g,z as p,am as E,bh as s,C as u,d as l,bX as R,a6 as o,cx as K,aa as f,E as B,A as x,an as ee,c6 as X,c2 as z,c3 as A}from"./index.52c71ca6.js";import{Q as k}from"./QTd.be89a153.js";import{u as G}from"./use-quasar.8076b8cd.js";import{e as H}from"./export-file.6b95af49.js";import{R as J,c as Z}from"./quickbase.0d6b62e6.js";import{dayjs as Y}from"./dayjs.7e2f14dc.js";import{a as F,_ as te}from"./aTable.0ed71fc6.js";import{_ as ae}from"./hiringTabs.511d2e09.js";import"./_commonjsHelpers.dfee5925.js";import"./localForage.83b50c47.js";import"./index.7dbe61ef.js";import"./i18n.3d69f992.js";import"./api.14a19609.js";import"./QSelect.02464590.js";import"./QChip.bee081d7.js";import"./QMenu.b5435217.js";import"./position-engine.901fa583.js";import"./selection.445971ab.js";import"./rtl.a367ced8.js";import"./QTable.34b4b377.js";import"./QList.dade0d45.js";import"./QMarkupTable.6709601e.js";import"./use-fullscreen.57b102bc.js";import"./QBadge.58e5f8ba.js";import"./QRouteTab.81b0e7cb.js";import"./QTabs.b09ba654.js";import"./QResizeObserver.cd0d3c43.js";const le={class:"col-12 col-md-5 q-px-sm"},se={key:0},ne={key:1},oe={key:0},ie={__name:"scheduled",setup(M){const m=G(),b=J(),{openWindow:h}=Z(),{fetchScheduledInterviews:I,fetchAllScheduledInterviews:y}=b,{getScheduledInterviews:T,getSelectedOffice:c,getLoadingState:D}=O(b),d=r(c.value?c.value[8]:null),$=r("Scheduled Interviews"),L=r("scheduledInterviews"),_=r(""),S=r({sortBy:"1",descending:!1,rowsPerPage:150});d.value?I({selectedId:d.value}):y({can:"read"}),U(c,()=>{d.value=c.value?c.value[8]:null,d.value?I({selectedId:d.value}):y({can:"read"})});const q=r(new Date),N=setInterval(()=>{q.value=new Date},1e3);W(()=>{clearInterval(N)});const Q=g(()=>["scheduledTime","name","phoneNumber","wait","scheduledBy","lastMessageSent","action",...c.value?[]:["office"]]),w=g(()=>[{name:"scheduledTime",align:"left",label:"Time",field:"19",sortable:!1},{name:"name",align:"left",label:"Name",field:"13",sortable:!1},{name:"phoneNumber",align:"center",label:"Phone Number",field:"14",sortable:!1},{name:"wait",align:"center",label:"Wait",field:"83",sortable:!1},{name:"scheduledBy",align:"left",label:"Scheduled By",field:"4",sortable:!1},{name:"lastMessageSent",align:"center",label:"Last Message Sent",field:"41",sortable:!1},{name:"office",align:"center",label:"Office",field:"24",sortable:!1},{name:"action",align:"center",label:"",sortable:!1}]),v=g(()=>T.value(d.value).filter(a=>!0).sort((a,t)=>S.value.descending?a[1].isBefore(t[1]):a[1].isAfter(t[1]))),C=g(()=>v.value.map(a=>Y(q.value).to(a[19],!0))),V=(a,t,e)=>{let n=t!==void 0?t(a,e):a;return n=n==null?"":String(n),n=n.split('"').join('""'),`"${n}"`},j=a=>{h(null,{url:`https://elitehcms.quickbase.com/db/bpzpy6n3x?a=dbpage&pageID=2&ee=${a[10]}`,name:"View Profile"})},i=()=>{const a=[w.value.map(e=>V(e.label))].concat(v.value.map(e=>w.value.map(n=>V(typeof n.field=="function"?n.field(e):e[n.field===void 0?n.name:n.field],n.format,e)).join(","))).join(`\r
`);H(`${$.value} ${Y().format("MM.DD.YYYY")}.csv`,a,"text/csv")!==!0&&m.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})};return(a,t)=>(p(),E(F,{rows:o(v),columns:o(w),pagination:S.value,filter:_.value,title:$.value,separator:"vertical","row-key":"3",loading:o(D)(L.value),"visible-columns":o(Q),downloadButton:!0,onDownload:i},{top:s(()=>[u("div",le,[l(K,{dense:o(m).screen.lt.md,modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=e=>_.value=e),label:"Search...",clearable:""},{prepend:s(()=>[l(R,{name:"search"})]),_:1},8,["dense","modelValue"])]),l(P),u("div",{class:B(["text-dark text-caption text-italic",o(m).screen.lt.md?"offset-xs-5":""])},"(Total: "+f(o(v).length)+")",3)]),"body-cell-scheduledTime":s(e=>[l(k,{props:e},{default:s(()=>[a.$dayjs(e.value).isValid()?(p(),x("div",se,f(e.value.format("L LT")),1)):(p(),x("div",ne,f(e.row[1].format("L LT")),1))]),_:2},1032,["props"])]),"body-cell-wait":s(e=>[l(k,{props:e},{default:s(()=>[e.row[19]?(p(),x("div",oe,f(o(C)[e.rowIndex]),1)):ee("",!0)]),_:2},1032,["props"])]),"body-cell-action":s(e=>[l(k,{props:e},{default:s(()=>[l(X,{color:"primary",label:"View Profile",onClick:n=>j(e.row),size:".75rem"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination","filter","title","loading","visible-columns"]))}},re={class:"col-12 col-md-5 q-px-sm"},ce={key:0},de={key:1},ue={__name:"inprocess",setup(M){const m=G(),b=J(),{openWindow:h}=Z(),{fetchInProcessInterviews:I,fetchAllInProcessInterviews:y}=b,{getInProcessInterviews:T,getSelectedOffice:c,getLoadingState:D}=O(b),d=r(c.value?c.value[8]:null),$=r("In Process Interviews"),L=r("inProcessInterviews"),_=r(""),S=r({sortBy:"1",descending:!1,rowsPerPage:150});d.value?I({selectedId:d.value,refresh:!0}):y({can:"read"}),U(c,()=>{d.value=c.value?c.value[8]:null,d.value?I({selectedId:d.value}):y({can:"read"})});const q=r(new Date),N=setInterval(()=>{q.value=new Date},1e3);W(()=>{clearInterval(N)});const Q=g(()=>["startTimestamp","name","phoneNumber","interviewer","qualifiedCraft","qualifiedLevel","action",...c.value?[]:["office"]]),w=g(()=>[{name:"startTimestamp",align:"left",label:"Time",field:"26",sortable:!1},{name:"name",align:"left",label:"Name",field:"13",sortable:!1},{name:"phoneNumber",align:"center",label:"Phone Number",field:"14",sortable:!1},{name:"interviewer",align:"left",label:"Interviewer",field:"5",sortable:!1},{name:"qualifiedCraft",align:"center",label:"Qualified Craft",field:"31",sortable:!1},{name:"qualifiedLevel",align:"center",label:"Qualified Level",field:"29",sortable:!1},{name:"office",align:"center",label:"Office",field:"24",sortable:!1},{name:"action",align:"center",label:"",sortable:!1}]),v=g(()=>T.value(d.value).filter(i=>!0).sort((i,a)=>S.value.descending?i[1].isBefore(a[1]):i[1].isAfter(a[1]))),C=(i,a,t)=>{let e=a!==void 0?a(i,t):i;return e=e==null?"":String(e),e=e.split('"').join('""'),`"${e}"`},V=i=>{h(null,{url:`https://elitehcms.quickbase.com/db/bpzpy6n3x?a=dbpage&pageID=2&ee=${i[10]}`,name:"View Profile"})},j=()=>{const i=[w.value.map(t=>C(t.label))].concat(v.value.map(t=>w.value.map(e=>C(typeof e.field=="function"?e.field(t):t[e.field===void 0?e.name:e.field],e.format,t)).join(","))).join(`\r
`);H(`${$.value} ${Y().format("MM.DD.YYYY")}.csv`,i,"text/csv")!==!0&&m.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})};return(i,a)=>(p(),E(F,{rows:o(v),columns:o(w),pagination:S.value,filter:_.value,title:$.value,separator:"vertical","row-key":"3",loading:o(D)(L.value),"visible-columns":o(Q),downloadButton:!1,onDownload:j},{top:s(()=>[u("div",re,[l(K,{dense:o(m).screen.lt.md,modelValue:_.value,"onUpdate:modelValue":a[0]||(a[0]=t=>_.value=t),label:"Search...",clearable:""},{prepend:s(()=>[l(R,{name:"search"})]),_:1},8,["dense","modelValue"])]),l(P),u("div",{class:B(["text-dark text-caption text-italic",o(m).screen.lt.md?"offset-xs-5":""])},"(Total: "+f(o(v).length)+")",3)]),"body-cell-startTimestamp":s(t=>[l(k,{props:t},{default:s(()=>[i.$dayjs(t.value).isValid()?(p(),x("div",ce,f(t.value.format("L LT")),1)):(p(),x("div",de,f(t.row[1].format("L LT")),1))]),_:2},1032,["props"])]),"body-cell-action":s(t=>[l(k,{props:t},{default:s(()=>[l(X,{color:"primary",label:"View Profile",onClick:e=>V(t.row),size:".75rem"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination","filter","title","loading","visible-columns"]))}},me={class:"q-pa-md"},fe={class:"row items-center"},ve={class:"col-12 col-md-5 q-px-sm"},pe={class:"col-12 col-md-4 q-px-sm"},be={class:"row items-center"},_e={class:"col-12 col-md-5 q-px-sm"},we=u("div",{class:"col-12 col-md-4 q-px-sm"},null,-1),Ke={__name:"index",setup(M){const m=r("Scheduled Interviews"),b=r("In Process Interviews");return(h,I)=>(p(),x("div",me,[l(ae),l(A,{flat:"",class:"q-pt-none"},{default:s(()=>[l(z,null,{default:s(()=>[u("div",fe,[u("div",ve,[u("div",{class:B(["text-dark",h.$q.screen.lt.md?"text-body1":"text-h5"])},f(m.value),3)]),l(P),u("div",pe,[l(te,{styleSelection:!0})])])]),_:1})]),_:1}),l(ie),l(A,{flat:"",class:"q-pt-none q-mt-xs"},{default:s(()=>[l(z,null,{default:s(()=>[u("div",be,[u("div",_e,[u("div",{class:B(["text-dark",h.$q.screen.lt.md?"text-body1":"text-h5"])},f(b.value),3)]),l(P),we])]),_:1})]),_:1}),l(ue)]))}};export{Ke as default};
