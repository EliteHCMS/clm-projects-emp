import{l as z,bU as U,r as h,c as g,_ as E,A as t,B as l,aq as c,br as s,d as m,bW as F,D as p,ac as i,ar as d,F as b,b4 as k,ax as L,bQ as O}from"./index.fd21eb93.js";import{Q}from"./QRating.4b1aa1f5.js";import{Q as _}from"./QInnerLoading.4df665ca.js";import{Q as V,a as A}from"./QTable.c8eb40b5.js";import{Q as R}from"./QTr.a3694089.js";import{Q as D}from"./QTd.a86bf6e9.js";import{u as H}from"./use-quasar.43d53512.js";import{u as I}from"./dataStore.dfe1407a.js";import"./app.f520a54e.js";const S=z({props:{category:Object},components:{},setup(e){H();const u=U(),y=h(!0),w=h(!1),{getEmployee:v,updateViewedEmployees:$}=I(),a=g(()=>v(u.params.id)),o=g(()=>(a.value&&a.value.history&&a.value.history[e.category.key]?a.value.history[e.category.key]:[]).sort((r,P)=>r[1].$d>P[1].$d?-1:1)),f=async n=>{const{getter:r}=e.category;y.value=!0,await r(),y.value=!1},C=g(()=>{const{averageDuration:n,showDuration:r}=e.category;return r&&n?n(o.value):null}),T=g(()=>{const{completionRate:n,showCompletion:r}=e.category;return r&&n?n(o.value):null}),B=g(()=>{const{showRating:n,averageRating:r}=e.category;return n&&r?r(o.value):null}),N=n=>{const{viewer:r}=e.category;r&&r(n)};function q(n){}return f(),{props:e,loading:y,loadData:f,rows:o,initialPagination:h({rowsPerPage:100}),removeRow:q,addNew:w,duration:C,completion:T,rating:B,viewData:N}}}),j={key:0,class:"text-dark text-italic text-caption"},G={key:0},W={key:1},J={key:2},K=p("span",{class:"q-mr-sm"},"Rating:",-1),M={key:0,class:"text-caption"},X={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function Y(e,u,y,w,v,$){return t(),l("div",null,[e.addNew?d("",!0):(t(),c(A,{key:0,dense:"",columns:e.category.columns.filter(a=>!a.hide),rows:e.rows,"row-key":a=>a[3],"table-header-class":"bg-dark text-white",class:"sticky-header-table",pagination:e.initialPagination,loading:e.loading,"no-data-label":`This employee has no ${e.category.label}.`},{"top-right":s(()=>[m(F,{color:"secondary",flat:"","icon-right":"refresh",label:"Refresh",onClick:u[0]||(u[0]=a=>e.loadData(!0))})]),"top-left":s(()=>[e.rows.length>0?(t(),l("div",j,[p("div",null,"Total - "+i(e.rows.length)+" "+i(e.category.label),1),e.category.showDuration&&e.duration?(t(),l("div",G,"Avg. Duration - "+i(e.duration.toFixed(2))+" days",1)):d("",!0),e.category.showCompletion&&e.completion?(t(),l("div",W,i(e.category.completionRateOverride?e.category.completionRateOverride:"Completion Rate")+" - "+i(e.completion)+"%",1)):d("",!0),e.category.showRating&&e.rating?(t(),l("div",J,[K,m(Q,{modelValue:e.rating,"onUpdate:modelValue":u[1]||(u[1]=a=>e.rating=a),max:"5",size:"xs",color:"accent",icon:"star_border","icon-selected":"star","icon-half":"star_half","no-dimming":"",readonly:""},null,8,["modelValue"])])):d("",!0)])):d("",!0)]),loading:s(()=>[m(_,{showing:e.loading,label:"Loading...","label-class":"text-info"},null,8,["showing"])]),header:s(a=>[m(R,{class:"bg-dark text-white",props:a},{default:s(()=>[e.category.showView?(t(),c(V,{key:0,"auto-width":""})):d("",!0),(t(!0),l(b,null,k(a.cols,o=>(t(),c(V,{class:"text-left",key:o.name},{default:s(()=>[L(i(o.label),1)]),_:2},1024))),128))]),_:2},1032,["props"])]),body:s(a=>[m(R,{props:a},{default:s(()=>[e.category.showView?(t(),c(D,{key:0},{default:s(()=>[m(O,{class:"cursor-pointer",size:e.$q.screen.gt.sm?"sm":"xs",color:"info",round:"",dense:"",onClick:o=>e.viewData(a.row),name:a.expand?"visibility_off":"visibility"},null,8,["size","onClick","name"])]),_:2},1024)):d("",!0),(t(!0),l(b,null,k(a.cols,o=>(t(),c(D,{key:o.name,props:a},{default:s(()=>[o.showRating?(t(),c(Q,{key:1,modelValue:o.value,"onUpdate:modelValue":f=>o.value=f,max:"5",size:"xs",color:"accent",icon:"star_border","icon-selected":"star","icon-half":"star_half","no-dimming":"",readonly:""},null,8,["modelValue","onUpdate:modelValue"])):(t(),l("span",M,i(o.value),1))]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"no-data":s(({message:a})=>[p("div",X,[p("span",null,i(a),1)])]),_:1},8,["columns","rows","row-key","pagination","loading","no-data-label"]))])}var le=E(S,[["render",Y]]);export{le as H};
