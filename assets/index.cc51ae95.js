import{l as j,r as E,c as y,_ as P,A as c,aq as f,br as n,d as a,cT as v,D as e,ac as o,bS as C,bW as Q,ax as B,ar as k,B as D,F as H,b4 as J,cS as A,w as se,bt as ie,bR as de,bP as O,bQ as ce,dc as re,bT as me,cV as ue,bO as De,bU as xe,b5 as L,y as ke}from"./index.cb6e3ba9.js";import{Q as Re}from"./QPage.3e5f7718.js";import{u as te}from"./use-quasar.cd140bb6.js";import{u as W}from"./useQuerySaver.d29ff9ee.js";import{u as U,q as V}from"./app.4c518291.js";import{dayjs as Y}from"./dayjs.a8a44880.js";import{s as Ce,f as Ye,r as Se,t as ee,a as Te}from"./submitRelease.ed237d47.js";import{a as ae,b as Ae,u as Ie}from"./checkTermStatus.eea22896.js";import{u as F}from"./dataStore.4971b77b.js";import{Q as pe}from"./QTooltip.1c1c8709.js";import{Q as Ee}from"./QInnerLoading.d91e75ed.js";import{o as _e,d as ve}from"./helpers.b74a0f75.js";import{a as le}from"./syncEmployeeWithWorkday.d1a26127.js";import{d as K}from"./decode.3998c82c.js";import{Q as z}from"./QRating.ba68478d.js";import{Q as Me}from"./QFile.840feb91.js";import{Q as ye}from"./QList.8b650d39.js";import{a as Ne}from"./QSelect.3ecc2587.js";import{Q as Pe}from"./QForm.7bb315f7.js";import{a as Le,u as Qe}from"./vee-validate.esm.637f2681.js";import{a as ne}from"./array.59f93f43.js";import"./_commonjsHelpers.a26ce4be.js";import"./localForage.32fec901.js";import"./api.db3ffd2c.js";import"./index.04bc0a32.js";import"./i18n.60f1f179.js";import"./dataStore.4beba232.js";import"./workdayAPI.b2584957.js";import"./position-engine.8c77df6b.js";import"./selection.3fc2c0f7.js";import"./workday.74d0f91f.js";import"./QChip.f5597a09.js";import"./QMenu.87ae7483.js";import"./rtl.b51694b1.js";const je=j({props:{employee:Object,assignment:Object,release:Object},setup(s){const{getUserType:d}=U(),{updateViewedReleases:u,getReleases:t}=F(),h=E(!0),b=E(!0),i=y(()=>t(s.release[3])),m=y(()=>i.value&&i.value.employee?i.value.employee:null),x=y(()=>i.value&&i.value.assignment?i.value.assignment:null),R=y(()=>{if(!m.value||!m.value.workday)return[];{const{personalData:r}=m.value.workday;if(r){const{customIds:S}=r.identificationData?r.identificationData:{customIds:[]};return S}else return[]}}),_=async()=>{if(m.value){const{sync:r}=await le({clm:m.value});u({id:s.release[3],dataset:"employee",nested:!0,subset:"workday",data:r}),h.value=!1}else{const{data:r}=await V.fetchFromHiringApp({fields:[W({type:"employee",id:s.release[25]})]});if(r[207]===!1){const{sync:S}=await le({clm:r});await u({id:s.release[3],dataset:"employee",data:r}),u({id:s.release[3],dataset:"employee",nested:!0,subset:"workday",data:S})}else await u({id:s.release[3],dataset:"employee",data:r});h.value=!1}if(x.value)b.value=!1;else{const{data:r}=await V.fetchFromHiringApp({fields:[W({type:"rawAssignments",id:s.release[28]})]});u({id:s.release[3],dataset:"assignment",data:r}),b.value=!1}},I=r=>{if(!!r)return r[145].$d?Y(r[145].$d).format("MM/DD/YYYY"):Y(r[1].$d).format("MM/DD/YYYY")},$=({id:r,idType:S})=>S.includes("J&amp;E")?`${r.slice(1,4)} / ${r.slice(-5)}`:r;return _(),{dayjs:Y,openWindow:_e,getUserType:d,employeeData:m,assignmentData:x,eeLoading:h,assignLoading:b,getArrivalDate:I,employeeCustomIds:R,decodeHTML:K,processCustomID:$}}}),Ve=e("div",{class:"text-primary text-h6 text-bold"},"Employee Information",-1),Be={class:"row q-py-sm"},Ue={class:"col-12 col-sm-3"},Fe=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Name")],-1),ze={class:"text-body2 q-pl-md"},Oe={class:"col-12 col-sm-3"},We=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Last 4 Digits of SS#")],-1),He={class:"text-body2 q-pl-md"},Je={class:"col-12 col-sm-3"},Ke=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Phone")],-1),Ge={class:"text-body2 q-pl-md"},Xe={class:"row q-py-sm"},Ze={class:"col-12 col-sm-3"},es={class:"text-body2"},ss=e("span",{class:"text-bold q-mr-md"},"Workday Employee ID",-1),ts={class:"text-body2 q-pl-md"},os={class:"text-body2"},as={class:"text-bold q-mr-md"},ls={class:"text-body2 q-pl-md"},ns={class:"row q-py-sm"},is={class:"col-12 col-sm-3"},ds=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Arrival Date")],-1),cs={class:"text-body2 q-pl-md"},rs={class:"col-12 col-sm-3"},ms=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Last Hire Date")],-1),us={class:"text-body2 q-pl-md"},ps={class:"col-12 col-sm-3"},_s=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Last Day Worked")],-1),vs={class:"text-body2 q-pl-md"},ys={class:"col-12 col-sm-3"},fs=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Effective Date")],-1),hs={class:"text-body2 q-pl-md"},bs={class:"row q-py-sm"},$s={class:"col-12 col-sm-4"},qs=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Job Site/ Location")],-1),gs={class:"text-body2 q-pl-md"},ws={class:"col-12 col-sm-4"},Ds=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Job Title")],-1),xs={class:"text-body2 q-pl-md"},ks={class:"col-12 col-sm-4"},Rs=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Pay Rate")],-1),Cs={class:"text-body2 q-pl-md"};function Ys(s,d,u,t,h,b){return c(),f(A,null,{default:n(()=>[a(v,{class:"text-center q-py-sm"},{default:n(()=>[Ve]),_:1}),!s.eeLoading&&!s.assignLoading?(c(),f(v,{key:0,class:"q-py-none"},{default:n(()=>[e("div",Be,[e("div",Ue,[Fe,e("div",ze,[e("span",null,o(s.employeeData[22])+", "+o(s.employeeData[20]),1)])]),e("div",Oe,[We,e("div",He,[e("span",null,o(s.employeeData[188].substring(s.employeeData[188].length-4)),1)])]),e("div",Je,[Ke,e("div",Ge,[e("span",null,o(s.employeeData[25]),1)])])]),a(C),e("div",Xe,[e("div",Ze,[e("div",es,[ss,s.getUserType==="QuickBase User"?(c(),f(Q,{key:0,dense:"",size:"sm",flat:"",icon:"open_in_new",color:"info",onClick:d[0]||(d[0]=i=>s.openWindow({url:s.employeeData[451]}))},{default:n(()=>[a(pe,null,{default:n(()=>[B("Open in Workday")]),_:1})]),_:1})):k("",!0)]),e("div",ts,[e("span",null,o(s.employeeData[378]),1)])]),(c(!0),D(H,null,J(s.employeeCustomIds,(i,m)=>(c(),D("div",{key:m,class:"col-12 col-sm-3"},[e("div",os,[e("span",as,o(s.decodeHTML(i.idType)),1)]),e("div",ls,[e("span",null,o(s.processCustomID(i)),1)])]))),128))]),a(C),e("div",ns,[e("div",is,[ds,e("div",cs,[e("span",null,o(s.getArrivalDate(s.assignmentData)),1)])]),e("div",rs,[ms,e("div",us,[e("span",null,o(s.dayjs(s.employeeData[397].$d).format("MM/DD/YYYY")),1)])]),e("div",ps,[_s,e("div",vs,[e("span",null,o(s.dayjs(s.release[36].$d).format("MM/DD/YYYY")),1)])]),e("div",ys,[fs,e("div",hs,[e("span",null,o(s.dayjs(s.release[36].$d).format("MM/DD/YYYY")),1)])])]),a(C),e("div",bs,[e("div",$s,[qs,e("div",gs,[e("span",null,o(s.release[57]),1)])]),e("div",ws,[Ds,e("div",xs,[e("span",null,o(s.assignmentData[20]),1)])]),e("div",ks,[Rs,e("div",Cs,[e("span",null,"$ "+o(s.assignmentData[116].toFixed(2)),1)])])])]),_:1})):(c(),f(v,{key:1,class:"q-my-lg"},{default:n(()=>[a(Ee,{color:"primary",showing:""})]),_:1}))]),_:1})}var Ss=P(je,[["render",Ys]]);const Ts=j({props:{data:Object},setup(s){return{evaluation:y(()=>s.data),convertScore:t=>({1:"Strongly Disagreed",2:"Disagreed",3:"Neutral",4:"Agreed",5:"Strongly Agreed",0:"Did Not Know"})[t]}}}),As=e("div",{class:"text-primary text-h6 text-bold"},"Employee Performance Evaluation",-1),Is={class:"row q-py-sm"},Es={class:"col-12 col-sm-6 col-md-3"},Ms=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Has good attendance")],-1),Ns={class:"text-body2 q-pl-md"},Ps={class:"q-mr-md"},Ls={class:"col-12 col-sm-6 col-md-3"},Qs=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Has a good attitude")],-1),js={class:"text-body2 q-pl-md"},Vs={class:"q-mr-md"},Bs={class:"col-12 col-sm-6 col-md-3"},Us=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Can do their job")],-1),Fs={class:"text-body2 q-pl-md"},zs={class:"q-mr-md"},Os={class:"col-12 col-sm-6 col-md-3"},Ws=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Can be promoted in the future")],-1),Hs={class:"text-body2 q-pl-md"},Js={class:"q-mr-md"};function Ks(s,d,u,t,h,b){return c(),f(A,null,{default:n(()=>[a(v,{class:"text-center q-py-sm"},{default:n(()=>[As]),_:1}),a(v,{class:"q-py-none"},{default:n(()=>[e("div",Is,[e("div",Es,[Ms,e("div",Ns,[e("span",Ps,o(s.convertScore(s.evaluation.attendance)),1),a(z,{modelValue:s.evaluation.attendance,"onUpdate:modelValue":d[0]||(d[0]=i=>s.evaluation.attendance=i),max:"5",size:"sm",color:"accent",icon:"star_border","icon-selected":"star","icon-half":"star_half","no-dimming":"",readonly:""},null,8,["modelValue"])])]),e("div",Ls,[Qs,e("div",js,[e("span",Vs,o(s.convertScore(s.evaluation.attitude)),1),a(z,{modelValue:s.evaluation.attitude,"onUpdate:modelValue":d[1]||(d[1]=i=>s.evaluation.attitude=i),max:"5",size:"sm",color:"accent",icon:"star_border","icon-selected":"star","icon-half":"star_half","no-dimming":"",readonly:""},null,8,["modelValue"])])]),e("div",Bs,[Us,e("div",Fs,[e("span",zs,o(s.convertScore(s.evaluation.capable)),1),a(z,{modelValue:s.evaluation.capable,"onUpdate:modelValue":d[2]||(d[2]=i=>s.evaluation.capable=i),max:"5",size:"sm",color:"accent",icon:"star_border","icon-selected":"star","icon-half":"star_half","no-dimming":"",readonly:""},null,8,["modelValue"])])]),e("div",Os,[Ws,e("div",Hs,[e("span",Js,o(s.convertScore(s.evaluation.promotion)),1),a(z,{modelValue:s.evaluation.promotion,"onUpdate:modelValue":d[3]||(d[3]=i=>s.evaluation.promotion=i),max:"5",size:"sm",color:"accent",icon:"star_border","icon-selected":"star","icon-half":"star_half","no-dimming":"",readonly:""},null,8,["modelValue"])])])])]),_:1})]),_:1})}var Gs=P(Ts,[["render",Ks]]);const Xs=j({props:{release:Object,employee:Object},setup(s){const d=te(),{userData:u,getUserType:t}=U(),{getReleases:h,updateReleaseAttachments:b}=F(),i=E(s.release[70]),m=E(null),x=E(null),R=E([]),_=y(()=>h(s.release[3])&&h(s.release[3]).employee?h(s.release[3]).employee:null),I=y(()=>_.value&&!s.release[72]&&Y.duration(Y(s.release[36].$d).diff(Y(s.employee[397].$d))).asDays()<30?"Yes":"No"),$=()=>{x.value.$el.click()};se(m,q=>{q&&r()});const r=async()=>{const q=u;if(q.access&&delete q.access,q.permissions&&delete q.permissions,m.value)for await(const w of m.value){const T={6:{value:await S(w),filename:w.name},7:{value:w.name}};R.value.push(T),m.value=null}if(R.value.length>0)try{const{docs:w}=await Ce({release:s.release,attachments:R.value,user:q}),T=w.map(N=>N[12]);await b({id:s.release[3],data:T}),i.value=[...i.value,...T],m.value=null,R.value=[],d.notify({type:"positive",message:`Successfully added ${R.value.length} attachment(s)!`})}catch(w){console.log(w),m.value=null,R.value=[],d.notify({type:"negative",message:"Error adding attachment!"})}},S=q=>new Promise((w,T)=>{const N=new FileReader;N.readAsDataURL(q),N.onload=()=>w(N.result.replace(/^data:.+;base64,/,"")),N.onerror=G=>T(G)});return{deductNeeded:I,downloadFile:ve,decodeHTML:K,fileAttachment:m,fileInput:x,openFileInput:$,currentAttachments:i}}}),Zs=e("div",{class:"text-primary text-h6 text-bold"},"Release Information",-1),et={class:"row"},st={class:"col-12 col-sm-9"},tt={class:"row q-py-sm"},ot={class:"col-12 col-sm-6 col-md-6"},at={class:"text-body2"},lt=e("span",{class:"text-bold q-mr-md"},"Return Company Equipment and/or PPE",-1),nt={class:"col-12 col-sm-6 col-md-6"},it={class:"text-body2"},dt=e("span",{class:"text-bold q-mr-md"},"Payroll Deduction Needed",-1),ct={class:"row q-py-sm"},rt={class:"col-12"},mt={class:"text-body2"},ut=e("span",{class:"text-bold q-mr-md"},"Reason",-1),pt={class:"row q-py-sm"},_t={class:"col-12"},vt={class:"text-body2"},yt=e("span",{class:"text-bold q-mr-md"},"Recommendation for Rehire / Reassignment",-1),ft={class:"row q-py-sm"},ht={class:"col-12"},bt=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Comments")],-1),$t={class:"text-body2 text-italic q-pl-md"},qt={class:"col-12 col-sm-3 q-pl-sm"},gt={class:"text-body2 text-bold text-center q-mb-sm"},wt={key:1,class:"text-body2 text-italic text-center"},Dt=e("span",null,"No Supporting Documents",-1),xt=[Dt];function kt(s,d,u,t,h,b){return c(),f(A,null,{default:n(()=>[a(v,{class:"text-center q-py-sm"},{default:n(()=>[Zs]),_:1}),a(v,{class:"q-py-none"},{default:n(()=>[e("div",et,[e("div",st,[e("div",tt,[e("div",ot,[e("div",at,[lt,e("span",null,o(s.release[72]?"Yes":"No"),1)])]),e("div",nt,[e("div",it,[dt,e("span",null,o(s.deductNeeded),1)])])]),a(C),e("div",ct,[e("div",rt,[e("div",mt,[ut,e("span",null,o(s.release[31])+" - "+o(s.release[32]),1)])])]),a(C),e("div",pt,[e("div",_t,[e("div",vt,[yt,e("span",null,o(s.release[12]),1)])])]),a(C),e("div",ft,[e("div",ht,[bt,e("div",$t,[e("span",null,o(s.release[60]===""?"No Comments":s.decodeHTML(s.release[60])),1)])])])]),e("div",qt,[e("div",gt,[B("Supporting Documents "),s.$can("manage","releases")?(c(),f(Q,{key:0,color:"accent",round:"",flat:"",class:"cursor-pointer",icon:"add",size:"md",onClick:s.openFileInput},null,8,["onClick"])):k("",!0)]),a(Me,{ref:"fileInput",style:{display:"none"},dense:"","bottom-slots":"",modelValue:s.fileAttachment,"onUpdate:modelValue":d[0]||(d[0]=i=>s.fileAttachment=i),multiple:"",append:"",label:""},null,8,["modelValue"]),s.currentAttachments.length>0?(c(),f(ye,{key:0},{default:n(()=>[(c(!0),D(H,null,J(s.currentAttachments,(i,m)=>ie((c(),f(de,{key:m,clickable:"",class:"text-body2",onClick:x=>s.downloadFile({tableId:"bsstsai5d",recordId:i[3],fieldId:6,versionNumber:1,name:i[7]})},{default:n(()=>[a(O,null,{default:n(()=>[B(o(m+1)+". "+o(i[7]),1)]),_:2},1024),a(O,{avatar:""},{default:n(()=>[a(ce,{color:"info",name:"file_download"})]),_:1})]),_:2},1032,["onClick"])),[[re]])),128))]),_:1})):(c(),D("div",wt,xt))])])]),_:1})]),_:1})}var Rt=P(Xs,[["render",kt]]);const Ct=j({props:{employee:Object,assignment:Object,release:Object},setup(s){const{getUserType:d}=U(),{updateViewedReleases:u,getReleases:t}=F(),h=E(!0),b=E(!0),i=y(()=>t(s.release[3])),m=y(()=>i.value&&i.value.employee?i.value.employee:null),x=y(()=>i.value&&i.value.assignment?i.value.assignment:null),R=y(()=>{if(!m.value||!m.value.workday)return[];{const{personalData:$}=m.value.workday;if($){const{customIds:r}=$.identificationData?$.identificationData:{customIds:[]};return r}else return[]}});return{dayjs:Y,openWindow:_e,getUserType:d,employeeData:m,assignmentData:x,eeLoading:h,assignLoading:b,getArrivalDate:$=>$[145].$d?Y($[145].$d).format("MM/DD/YYYY"):Y($[1].$d).format("MM/DD/YYYY"),employeeCustomIds:R,processCustomID:({id:$,idType:r})=>r.includes("J&amp;E")?`${$.slice(1,4)} / ${$.slice(-5)}`:$,decodeHTML:K}}}),Yt=e("div",{class:"text-body1 text-bold"},"Employee Information",-1),St={class:"row q-py-sm"},Tt={class:"col-3"},At=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Name")],-1),It={class:"text-caption q-pl-md"},Et={class:"col-3"},Mt=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Last 4 Digits of SS#")],-1),Nt={class:"text-caption q-pl-md"},Pt={class:"col-3"},Lt=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Phone")],-1),Qt={class:"text-caption q-pl-md"},jt={class:"row q-py-sm"},Vt={class:"col-3"},Bt={class:"text-caption"},Ut=e("span",{class:"text-bold q-mr-md"},"Workday Employee ID",-1),Ft={class:"text-caption q-pl-md"},zt={class:"text-caption"},Ot={class:"text-bold q-mr-md"},Wt={class:"text-caption q-pl-md"},Ht={class:"row q-py-sm"},Jt={class:"col-3"},Kt=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Arrival Date")],-1),Gt={class:"text-caption q-pl-md"},Xt={class:"col-3"},Zt=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Last Hire Date")],-1),eo={class:"text-caption q-pl-md"},so={class:"col-3"},to=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Last Day Worked")],-1),oo={class:"text-caption q-pl-md"},ao={class:"col-3"},lo=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Effective Date")],-1),no={class:"text-caption q-pl-md"},io={class:"row q-py-sm"},co={class:"col-4"},ro=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Job Site/ Location")],-1),mo={class:"text-caption q-pl-md"},uo={class:"col-4"},po=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Job Title")],-1),_o={class:"text-caption q-pl-md"},vo={class:"col-2"},yo=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Pay Rate")],-1),fo={class:"text-caption q-pl-md"};function ho(s,d,u,t,h,b){return c(),f(A,{flat:""},{default:n(()=>[a(v,{class:"q-py-sm"},{default:n(()=>[Yt]),_:1}),a(v,{class:"q-py-none"},{default:n(()=>[e("div",St,[e("div",Tt,[At,e("div",It,[e("span",null,o(s.employeeData[22])+", "+o(s.employeeData[20]),1)])]),e("div",Et,[Mt,e("div",Nt,[e("span",null,o(s.employeeData[188].substring(s.employeeData[188].length-4)),1)])]),e("div",Pt,[Lt,e("div",Qt,[e("span",null,o(s.employeeData[25]),1)])])]),a(C),e("div",jt,[e("div",Vt,[e("div",Bt,[Ut,s.getUserType==="QuickBase User"?(c(),f(Q,{key:0,dense:"",size:"sm",flat:"",icon:"open_in_new",color:"info",onClick:d[0]||(d[0]=i=>s.openWindow({url:s.employeeData[451]}))},{default:n(()=>[a(pe,null,{default:n(()=>[B("Open in Workday")]),_:1})]),_:1})):k("",!0)]),e("div",Ft,[e("span",null,o(s.employeeData[378]),1)])]),(c(!0),D(H,null,J(s.employeeCustomIds,(i,m)=>(c(),D("div",{key:m,class:"col-3"},[e("div",zt,[e("span",Ot,o(s.decodeHTML(i.idType)),1)]),e("div",Wt,[e("span",null,o(s.processCustomID(i)),1)])]))),128))]),a(C),e("div",Ht,[e("div",Jt,[Kt,e("div",Gt,[e("span",null,o(s.getArrivalDate(s.assignmentData)),1)])]),e("div",Xt,[Zt,e("div",eo,[e("span",null,o(s.dayjs(s.employeeData[397].$d).format("MM/DD/YYYY")),1)])]),e("div",so,[to,e("div",oo,[e("span",null,o(s.dayjs(s.release[36].$d).format("MM/DD/YYYY")),1)])]),e("div",ao,[lo,e("div",no,[e("span",null,o(s.dayjs(s.release[36].$d).format("MM/DD/YYYY")),1)])])]),a(C),e("div",io,[e("div",co,[ro,e("div",mo,[e("span",null,o(s.assignmentData[141]),1)])]),e("div",uo,[po,e("div",_o,[e("span",null,o(s.assignmentData[20]),1)])]),e("div",vo,[yo,e("div",fo,[e("span",null,"$ "+o(s.assignmentData[116].toFixed(2)),1)])])])]),_:1})]),_:1})}var bo=P(Ct,[["render",ho]]);const $o=j({props:{data:Object},setup(s){return{evaluation:y(()=>s.data),convertScore:t=>({1:"Strongly Disagreed",2:"Disagreed",3:"Neutral",4:"Agreed",5:"Strongly Agreed",0:"Did Not Know"})[t]}}}),qo=e("div",{class:"text-body1 text-bold"},"Employee Performance Evaluation",-1),go={class:"row q-py-sm"},wo={class:"col-3"},Do=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Has good attendance")],-1),xo={class:"text-caption q-pl-md"},ko={class:"q-mr-md"},Ro={class:"col-3"},Co=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Has a good attitude")],-1),Yo={class:"text-caption q-pl-md"},So={class:"q-mr-md"},To={class:"col-3"},Ao=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Can do their job")],-1),Io={class:"text-caption q-pl-md"},Eo={class:"q-mr-md"},Mo={class:"col-3"},No=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Can be promoted in the future")],-1),Po={class:"text-caption q-pl-md"},Lo={class:"q-mr-md"};function Qo(s,d,u,t,h,b){return c(),f(A,{flat:"",class:"q-my-none q-py-none"},{default:n(()=>[a(v,{class:"q-py-sm"},{default:n(()=>[qo]),_:1}),a(v,{class:"q-py-none"},{default:n(()=>[e("div",go,[e("div",wo,[Do,e("div",xo,[e("span",ko,o(s.evaluation.attendance)+" / 5 - "+o(s.convertScore(s.evaluation.attendance)),1)])]),e("div",Ro,[Co,e("div",Yo,[e("span",So,o(s.evaluation.attitude)+" / 5 - "+o(s.convertScore(s.evaluation.attitude)),1)])]),e("div",To,[Ao,e("div",Io,[e("span",Eo,o(s.evaluation.capable)+" / 5 - "+o(s.convertScore(s.evaluation.capable)),1)])]),e("div",Mo,[No,e("div",Po,[e("span",Lo,o(s.evaluation.promotion)+" / 5 - "+o(s.convertScore(s.evaluation.promotion)),1)])])])]),_:1})]),_:1})}var jo=P($o,[["render",Qo]]);const Vo=j({props:{release:Object,employee:Object},setup(s){const{getReleases:d}=F(),u=y(()=>d(s.release[3])&&d(s.release[3]).employee?d(s.release[3]).employee:null);return{deductNeeded:y(()=>u.value&&!s.release[72]&&Y.duration(Y(s.release[36].$d).diff(Y(s.employee[397].$d))).asDays()<30?"Yes":"No"),downloadFile:ve,decodeHTML:K}}}),Bo=e("div",{class:"text-body1 text-bold"},"Release Information",-1),Uo={class:"row"},Fo={class:"col-9"},zo={class:"row q-py-sm"},Oo={class:"col-6"},Wo={class:"text-caption"},Ho=e("span",{class:"text-bold q-mr-md"},"Return Company Equipment and/or PPE",-1),Jo={class:"col-6"},Ko={class:"text-caption"},Go=e("span",{class:"text-bold q-mr-md"},"Payroll Deduction Needed",-1),Xo={class:"row q-py-sm"},Zo={class:"col-12"},ea={class:"text-caption"},sa=e("span",{class:"text-bold q-mr-md"},"Reason",-1),ta={class:"row q-py-sm"},oa={class:"col-12"},aa={class:"text-caption"},la=e("span",{class:"text-bold q-mr-md"},"Recommendation for Rehire / Reassignment",-1),na={class:"row q-py-sm"},ia={class:"col-12"},da=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Comments")],-1),ca={class:"text-caption text-italic q-pl-md"},ra={class:"col-3 q-pl-sm"},ma=e("div",{class:"text-caption text-bold text-center q-mb-sm"},"Supporting Documents",-1),ua={key:1,class:"text-caption text-italic text-center"},pa=e("span",null,"No Supporting Documents",-1),_a=[pa];function va(s,d,u,t,h,b){return c(),f(A,{flat:""},{default:n(()=>[a(v,{class:"q-py-sm"},{default:n(()=>[Bo]),_:1}),a(v,{class:"q-py-none"},{default:n(()=>[e("div",Uo,[e("div",Fo,[e("div",zo,[e("div",Oo,[e("div",Wo,[Ho,e("span",null,o(s.release[72]?"Yes":"No"),1)])]),e("div",Jo,[e("div",Ko,[Go,e("span",null,o(s.deductNeeded),1)])])]),a(C),e("div",Xo,[e("div",Zo,[e("div",ea,[sa,e("span",null,o(s.release[32]),1)])])]),a(C),e("div",ta,[e("div",oa,[e("div",aa,[la,e("span",null,o(s.release[12]),1)])])]),a(C),e("div",na,[e("div",ia,[da,e("div",ca,[e("span",null,o(s.release[60]===""?"No Comments":s.decodeHTML(s.release[60])),1)])])])]),e("div",ra,[ma,s.release[70].length>0?(c(),f(ye,{key:0},{default:n(()=>[(c(!0),D(H,null,J(s.release[70],(i,m)=>ie((c(),f(de,{key:m,clickable:"",class:"text-caption",onClick:x=>s.downloadFile({tableId:"bsstsai5d",recordId:i[3],fieldId:6,versionNumber:1,name:i[7]})},{default:n(()=>[a(O,null,{default:n(()=>[B(o(m+1)+". "+o(i[7]),1)]),_:2},1024),a(O,{avatar:""},{default:n(()=>[a(ce,{color:"info",name:"file_download"})]),_:1})]),_:2},1032,["onClick"])),[[re]])),128))]),_:1})):(c(),D("div",ua,_a))])])]),_:1})]),_:1})}var ya=P(Vo,[["render",va]]);const fa=j({emits:["releaseReviewed"],props:{release:Object},setup(s,{emit:d}){const u=te(),t=me(),{getUserType:h}=U(),b=E(!1),i=y(()=>(h==="Project User","How would you like to proceed with this employee?")),m=y(()=>h==="Project User"?[{label:"Rescind Release (Add Back to Roster)",value:"Rescind"}]:[{label:"Reassign this Employee",value:"Reassign"},{label:"Terminate this Employee",value:"Terminate"},{label:"Rescind Release (Add Back to Roster)",value:"Rescind"}]),x=ne({selection:ne().required("Required field if taking action on this release.").label("Disposition").nullable()}),{meta:R,errors:_,handleSubmit:I,handleReset:$}=Le({validationSchema:x}),{value:r}=Qe("selection");se(r,q=>{q?b.value=!0:b.value=!1});const S=I(async q=>{u.dialog({title:"Confirm",message:`Are you sure you want to ${q.selection.value} this ${q.selection.value==="Rescind"?"release":"employee"}?`,cancel:!0,persistent:!0}).onOk(async()=>{try{if(u.loading.show(),q.selection.value==="Reassign"||q.selection.value==="Terminate"){const{release:w,employee:T}=await Ye({release:s.release,disp:q.selection});d("releaseReviewed",{release:w,employee:T}),window.postMessage("reloadDepartures"),$()}else if(q.selection.value==="Rescind"){const{release:w,employee:T}=await Se({release:s.release,disp:q.selection});d("releaseReviewed",{release:w,employee:T}),t.replace({name:"employees",query:{refresh:!0}}),$()}}catch(w){console.log(w),u.loading.hide(),u.notify({type:"negative",message:"Cannot update release."})}})});return{formErrors:_,formMeta:R,submit:S,selection:r,options:m,question:i,visibleButton:b}}}),ha={class:"text-body2 text-weight-bold"},ba={class:"text-caption"};function $a(s,d,u,t,h,b){return c(),D("div",null,[a(Pe,{onSubmit:De(s.submit,["prevent"])},{default:n(()=>[a(A,null,{default:n(()=>[a(v,{class:"q-pb-xs"},{default:n(()=>[e("div",ha,o(s.question),1),a(Ne,{class:"q-mb-sm",dense:"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:s.selection,"onUpdate:modelValue":d[0]||(d[0]=i=>s.selection=i),options:s.options,"bottom-slots":"",clearable:"",error:!!s.formErrors.selection},{error:n(()=>[e("div",ba,o(s.formErrors.selection),1)]),_:1},8,["modelValue","options","error"])]),_:1}),s.visibleButton?(c(),f(ue,{key:0,class:"q-pt-xs",align:"right"},{default:n(()=>[a(Q,{color:"primary",label:"Submit",type:"submit"})]),_:1})):k("",!0)]),_:1})]),_:1},8,["onSubmit"])])}var qa=P(fa,[["render",$a]]);const ga={name:"View Release",directives:{},components:{EmployeeInformation:Ss,Evaluation:Gs,DepartureInformation:Rt,PrintDepartureInformation:ya,PrintEmployeeInformation:bo,PrintEvaluation:jo,ReviewForm:qa},setup(){const s=E(!1),d=E(!1),u=te(),t=xe();me();const{capitalize:h}=ke,{getUserType:b,userData:i}=U(),{getReleases:m,setReleases:x,updateViewedReleases:R}=F(),_=y(()=>m(t.params.release)),I=y(()=>_.value&&_.value.employee?_.value.employee:null),$=y(()=>_.value&&_.value.assignment?_.value.assignment:null),r=y(()=>_.value[59]&&_.value[59][0]?_.value[59][0]:null),S=y(()=>{const{data:l}=r.value?r.value:{data:null};return l}),q=y(()=>_.value?_.value[38]:null),w=y(()=>r.value&&r.value[44]?r.value[44]:null),T=y(()=>_.value?_.value[75]:null),N=y(()=>_.value?_.value[76]:null),G=async()=>{const l=await ae({release:_.value});let p={referenceId:"N/A",logDescription:"N/A",logEffectiveMoment:"N/A",logEntryMoment:"N/A",eventType:"N/A",organizationReferenceID:"N/A",positionID:"N/A",employeeID:l[50],logType:"N/A"},g=_.value[36].$d;if(l.lastTerm&&(p=l.lastTerm),l.termEntryDate&&(g=l.termEntryDate.$d),I.value[397].isSameOrAfter(_.value[36])&&(!l.terminated||!l.lastTerm)){const{data:Z}=await ee({release:l,entryMoment:g,workdayData:p});M({data:Z,notify:!0})}else if(!l.terminated||!l.lastTerm)u.dialog({title:"Alert",message:"Please complete the termination in Workday first."});else{const{data:Z}=await ee({release:l,entryMoment:g,workdayData:p});M({data:Z,notify:!0})}},fe=({release:l,employee:p})=>{if(l[43]==="Reassign"){const g=`https://elitehcms.quickbase.com/db/bs7qsu6wh?a=dbpage&pageID=6&ee=${p[3]}`;window.location.href=g}else M({data:l,notify:!0,employee:p})},he=()=>{window.close()},be=async()=>{if(!m(t.params.release)){u.loading.show();const{data:l}=await V.fetchFromHiringApp({fields:[W({type:"releases",query:"",id:t.params.release})]});x({id:l[3],data:l}),u.loading.hide(),b==="QuickBase User"&&$e({data:l})}},$e=async({data:l})=>{if(l[87]==="Active"&&l[95]&&l[42]!=="Complete"){const{reassigned:p,timestamp:g}=await Ae({release:l});p&&ge({release:l,timestamp:g})}else if(l[73]==="Processed"){if(l.workdayTerm)return;const{release:p}=await X({release:l});M({data:p})}else if(l[79]!=="Complete"&&l[36].$d&&!Y().isBefore(Y(l[36].$d))){const{completed:p}=await qe({release:l}),{release:g}=await X({release:p});g.terminated?oe({release:g}):M({data:g})}else{const{release:p}=await X({release:l});p.terminated?oe({release:p}):M({data:p})}},X=async({release:l})=>{if(l[87]!=="Terminated")return l.terminated=!1,{release:l};{const p=await ae({release:l});if(p.terminated&&p.lastTerm)if(p[73]==="Processed"){const{data:g}=await V.upsertRecordsXML({to:"bp3ga39ut",data:[{3:{value:p[3]},106:{value:JSON.stringify(p.lastTerm)}}],fieldsToReturn:[80],formatObject:80});return{release:g[0][80]}}else return{release:p};else return{release:p}}},qe=async({release:l})=>{await Te({id:l[28]});const{data:p}=await V.fetchFromHiringApp({fields:[W({type:"releases",query:"",id:l[3]})]});return{completed:p}},oe=async({release:l})=>{u.dialog({title:"Confirm",message:"It looks like this termination has already been processed in Workday. Would you like to update this employee in CEM now?",persistent:!0,cancel:!0}).onOk(async()=>{const{data:p}=await ee({release:l,entryMoment:l.termEntryDate.$d,workdayData:l.lastTerm});M({data:p,notify:!0})}).onCancel(()=>{M({data:l})})},ge=async({release:l,timestamp:p})=>{u.dialog({title:"Confirm",message:"It looks like this employee has been reassigned. Would you like to update this release in CEM now?",persistent:!0,cancel:!0}).onOk(async()=>{const g=await Ie({release:l,disposition:"Reassign",ts:p,updatedBy:i});M({data:g,notify:!0})}).onCancel(()=>{M({data:l})})},M=({data:l,notify:p,employee:g})=>{u.loading.isActive&&u.loading.hide(),_.value.employee?l.employee=_.value.employee:g&&(l.employee=g),_.value.assignment&&(l.assignment=_.value.assignment),x({id:l[3],data:l}),p&&u.notify({type:"positive",message:"Employee updated in CEM"})},we=()=>{s.value=!0};return se(s,(l,p)=>{s.value&&setTimeout(()=>{print(),setTimeout(()=>{s.value=!1},500)},200)}),be(),{release:_,employee:I,assignment:$,evaluation:S,evaluator:w,reviewer:T,processor:N,getUserType:b,fab:d,dayjs:Y,submitter:q,capitalize:h,showPrint:s,printPage:we,releaseReviewed:fe,completeTermination:G,closeWindow:he}}},wa={class:"q-px-sm q-pb-xl"},Da={class:"row q-py-sm"},xa={class:"col-12 col-sm-3"},ka=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Submitted By")],-1),Ra={class:"text-body2 q-pl-md"},Ca={class:"col-12 col-sm-3"},Ya=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Evaluated By")],-1),Sa={class:"text-body2 q-pl-md"},Ta={key:0},Aa={key:1},Ia={key:0,class:"col-12 col-sm-3"},Ea=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Reviewed By")],-1),Ma={class:"text-body2 q-pl-md"},Na={key:1,class:"col-3"},Pa=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Processed By")],-1),La={class:"text-body2 q-pl-md"},Qa=e("div",{class:"text-primary text-h6 text-bold"},"Termination Workday Data",-1),ja={class:"row q-py-sm"},Va={class:"col-12 col-sm-3"},Ba=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Entry Date")],-1),Ua={class:"text-body2 q-pl-md"},Fa={class:"col-12 col-sm-3"},za=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Effective Date")],-1),Oa={class:"text-body2 q-pl-md"},Wa={class:"row"},Ha={class:"col-12 col-md-6"},Ja={class:"row q-py-sm"},Ka={class:"col-3"},Ga=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Submitted By")],-1),Xa={class:"text-body2 q-pl-md"},Za={class:"col-3"},el=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Evaluated By")],-1),sl={class:"text-body2 q-pl-md"},tl={key:0},ol={key:1},al={key:0,class:"col-3"},ll=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Reviewed By")],-1),nl={class:"text-body2 q-pl-md"},il={key:1,class:"col-3"},dl=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Processed By")],-1),cl={class:"text-body2 q-pl-md"};function rl(s,d,u,t,h,b){const i=L("employee-information"),m=L("evaluation"),x=L("departure-information"),R=L("review-form"),_=L("print-employee-information"),I=L("print-evaluation"),$=L("print-departure-information");return c(),f(Re,{style:{"max-width":"100vw"}},{default:n(()=>[e("div",wa,[t.release&&!t.showPrint?(c(),f(A,{key:0,flat:"",class:"text-dark"},{default:n(()=>[s.$route.name==="view-release"?(c(),f(ue,{key:0,class:"q-pb-xs print-hide",align:"right"},{default:n(()=>[t.release[42]==="Reviewed"&&t.release[43]==="Terminate"&&t.getUserType==="QuickBase User"?(c(),f(Q,{key:0,icon:"done",label:"Termination Processed",color:"positive",onClick:t.completeTermination},null,8,["onClick"])):k("",!0),a(Q,{icon:"print",label:"Print",color:"info",onClick:t.printPage},null,8,["onClick"]),a(Q,{icon:"close",label:"Close",color:"dark",onClick:d[0]||(d[0]=r=>t.getUserType==="QuickBase User"?t.closeWindow():s.$router.replace({name:"employees",query:{refresh:!0}}))})]),_:1})):k("",!0),a(v,{class:"q-py-xs"},{default:n(()=>[a(i,{assignment:t.assignment,employee:t.employee,release:t.release},null,8,["assignment","employee","release"])]),_:1}),t.evaluation?(c(),f(v,{key:1,class:"q-py-xs"},{default:n(()=>[a(m,{data:t.evaluation},null,8,["data"])]),_:1})):k("",!0),a(v,{class:"q-py-xs"},{default:n(()=>[a(x,{employee:t.employee,release:t.release},null,8,["employee","release"])]),_:1}),a(v,{class:"q-py-xs"},{default:n(()=>[a(A,null,{default:n(()=>[a(v,{class:"q-py-none"},{default:n(()=>[e("div",Da,[e("div",xa,[ka,e("div",Ra,[e("span",null,o(t.submitter[37])+", "+o(t.submitter[35])+" - "+o(t.submitter[6]),1)])]),e("div",Ca,[Ya,e("div",Sa,[t.evaluator?(c(),D("span",Ta,o(t.capitalize(t.evaluator[22].toLowerCase()))+", "+o(t.capitalize(t.evaluator[20].toLowerCase())),1)):(c(),D("span",Aa,"Not Specified"))])]),t.reviewer?(c(),D("div",Ia,[Ea,e("div",Ma,[e("span",null,o(t.capitalize(t.reviewer[37].toLowerCase()))+", "+o(t.capitalize(t.reviewer[35].toLowerCase())),1)])])):k("",!0),t.processor?(c(),D("div",Na,[Pa,e("div",La,[e("span",null,o(t.capitalize(t.processor[37].toLowerCase()))+", "+o(t.capitalize(t.processor[35].toLowerCase())),1)])])):k("",!0)])]),_:1})]),_:1})]),_:1}),t.release.workdayTerm?(c(),f(v,{key:2,class:"q-py-xs"},{default:n(()=>[a(A,null,{default:n(()=>[a(v,{class:"text-center q-py-sm"},{default:n(()=>[Qa]),_:1}),a(v,{class:"q-py-none"},{default:n(()=>[e("div",ja,[e("div",Va,[Ba,e("div",Ua,[e("span",null,o(s.$dayjs(t.release.workdayTerm.logEntryMoment).format("MM/DD/YYYY hh:mm:ss a z")),1)])]),e("div",Fa,[za,e("div",Oa,[e("span",null,o(s.$dayjs(t.release.workdayTerm.logEffectiveMoment).format("MM/DD/YYYY hh:mm:ss a z")),1)])])])]),_:1})]),_:1})]),_:1})):k("",!0),t.release[42]==="Pending"&&s.$can("manage","releases")?(c(),f(v,{key:3,class:"q-py-sm"},{default:n(()=>[e("div",Wa,[e("div",Ha,[a(R,{release:t.release,onReleaseReviewed:t.releaseReviewed},null,8,["release","onReleaseReviewed"])])])]),_:1})):k("",!0)]),_:1})):k("",!0),t.release&&t.showPrint?(c(),f(A,{key:1,id:"printArea",flat:"",class:"text-body2"},{default:n(()=>[a(v,{class:"q-py-xs"},{default:n(()=>[a(_,{assignment:t.assignment,employee:t.employee,release:t.release},null,8,["assignment","employee","release"])]),_:1}),a(C),t.evaluation?(c(),f(v,{key:0,class:"q-py-xs"},{default:n(()=>[a(I,{data:t.evaluation},null,8,["data"])]),_:1})):k("",!0),a(C),a(v,{class:"q-py-xs"},{default:n(()=>[a($,{employee:t.employee,release:t.release},null,8,["employee","release"])]),_:1}),a(C),a(v,{class:"q-pb-sm"},{default:n(()=>[a(A,{flat:""},{default:n(()=>[a(v,{class:"q-py-none"},{default:n(()=>[e("div",Ja,[e("div",Ka,[Ga,e("div",Xa,[e("span",null,o(t.submitter[37])+", "+o(t.submitter[35]),1)])]),e("div",Za,[el,e("div",sl,[t.evaluator?(c(),D("span",tl,o(t.capitalize(t.evaluator[22].toLowerCase()))+", "+o(t.capitalize(t.evaluator[20].toLowerCase())),1)):(c(),D("span",ol,"Not Specified"))])]),t.reviewer?(c(),D("div",al,[ll,e("div",nl,[e("span",null,o(t.capitalize(t.reviewer[37].toLowerCase()))+", "+o(t.capitalize(t.reviewer[35].toLowerCase())),1)])])):k("",!0),t.processor?(c(),D("div",il,[dl,e("div",cl,[e("span",null,o(t.capitalize(t.processor[37].toLowerCase()))+", "+o(t.capitalize(t.processor[35].toLowerCase())),1)])])):k("",!0)])]),_:1})]),_:1})]),_:1})]),_:1})):k("",!0)])]),_:1})}var Ol=P(ga,[["render",rl]]);export{Ol as default};
