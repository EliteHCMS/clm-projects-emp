var ga=Object.defineProperty;var va=(t,e,r)=>e in t?ga(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var $=(t,e,r)=>(va(t,typeof e!="symbol"?e+"":e,r),r);import{m as dr,n as ba,p as xa,q as te,k as O,P as q,f as wi,s as Ai,t as U,u as Si,v as wa,x as Aa,y as Sa,z as ka}from"./index.c7640e72.js";import{c as Oa,a as nt,g as Ia}from"./_commonjsHelpers.a26ce4be.js";import{dayjs as h}from"./dayjs.3faf0a5e.js";import{stateDB as L,localforage as w}from"./localForage.cb436dbd.js";import{api as Se}from"./api.d1dfc8c4.js";import{r as Fr,a as _r}from"./index.04bc0a32.js";import{i as tt}from"./i18n.911c9472.js";function Ta(t){const e=Object.assign({noopener:!0},t),r=[];for(const s in e){const n=e[s];n===!0?r.push(s):(xa(n)||typeof n=="string"&&n!=="")&&r.push(s+"="+n)}return r.join(",")}function ds(t,e,r){let s=window.open;if(dr.is.cordova===!0){if(cordova!==void 0&&cordova.InAppBrowser!==void 0&&cordova.InAppBrowser.open!==void 0)s=cordova.InAppBrowser.open;else if(navigator!==void 0&&navigator.app!==void 0)return navigator.app.loadUrl(t,{openExternal:!0})}const n=s(t,"_blank",Ta(r));if(n)return dr.is.desktop&&n.focus(),n;e&&e()}var Ca=(t,e,r)=>{if(dr.is.ios===!0&&window.SafariViewController!==void 0){window.SafariViewController.isAvailable(s=>{s?window.SafariViewController.show({url:t},ba,e):ds(t,e,r)});return}return ds(t,e,r)},ki={exports:{}};(function(t){/**
 * @license bcrypt.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/bcrypt.js for details
 */(function(e,r){typeof Oa=="function"&&!0&&t&&t.exports?t.exports=r():(e.dcodeIO=e.dcodeIO||{}).bcrypt=r()})(nt,function(){var e={},r=null;function s(v){if(t&&t.exports)try{return require("crypto").randomBytes(v)}catch{}try{var y;return(self.crypto||self.msCrypto).getRandomValues(y=new Uint32Array(v)),Array.prototype.slice.call(y)}catch{}if(!r)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return r(v)}var n=!1;try{s(1),n=!0}catch{}r=null,e.setRandomFallback=function(v){r=v},e.genSaltSync=function(v,y){if(v=v||T,typeof v!="number")throw Error("Illegal arguments: "+typeof v+", "+typeof y);v<4?v=4:v>31&&(v=31);var p=[];return p.push("$2a$"),v<10&&p.push("0"),p.push(v.toString()),p.push("$"),p.push(m(s(k),k)),p.join("")},e.genSalt=function(v,y,p){if(typeof y=="function"&&(p=y,y=void 0),typeof v=="function"&&(p=v,v=void 0),typeof v=="undefined")v=T;else if(typeof v!="number")throw Error("illegal arguments: "+typeof v);function f(d){a(function(){try{d(null,e.genSaltSync(v))}catch(b){d(b)}})}if(p){if(typeof p!="function")throw Error("Illegal callback: "+typeof p);f(p)}else return new Promise(function(d,b){f(function(S,D){if(S){b(S);return}d(D)})})},e.hashSync=function(v,y){if(typeof y=="undefined"&&(y=T),typeof y=="number"&&(y=e.genSaltSync(y)),typeof v!="string"||typeof y!="string")throw Error("Illegal arguments: "+typeof v+", "+typeof y);return de(v,y)},e.hash=function(v,y,p,f){function d(b){typeof v=="string"&&typeof y=="number"?e.genSalt(y,function(S,D){de(v,D,b,f)}):typeof v=="string"&&typeof y=="string"?de(v,y,b,f):a(b.bind(this,Error("Illegal arguments: "+typeof v+", "+typeof y)))}if(p){if(typeof p!="function")throw Error("Illegal callback: "+typeof p);d(p)}else return new Promise(function(b,S){d(function(D,I){if(D){S(D);return}b(I)})})};function i(v,y){for(var p=0,f=0,d=0,b=v.length;d<b;++d)v.charCodeAt(d)===y.charCodeAt(d)?++p:++f;return p<0?!1:f===0}e.compareSync=function(v,y){if(typeof v!="string"||typeof y!="string")throw Error("Illegal arguments: "+typeof v+", "+typeof y);return y.length!==60?!1:i(e.hashSync(v,y.substr(0,y.length-31)),y)},e.compare=function(v,y,p,f){function d(b){if(typeof v!="string"||typeof y!="string"){a(b.bind(this,Error("Illegal arguments: "+typeof v+", "+typeof y)));return}if(y.length!==60){a(b.bind(this,null,!1));return}e.hash(v,y.substr(0,29),function(S,D){S?b(S):b(null,i(D,y))},f)}if(p){if(typeof p!="function")throw Error("Illegal callback: "+typeof p);d(p)}else return new Promise(function(b,S){d(function(D,I){if(D){S(D);return}b(I)})})},e.getRounds=function(v){if(typeof v!="string")throw Error("Illegal arguments: "+typeof v);return parseInt(v.split("$")[2],10)},e.getSalt=function(v){if(typeof v!="string")throw Error("Illegal arguments: "+typeof v);if(v.length!==60)throw Error("Illegal hash length: "+v.length+" != 60");return v.substring(0,29)};var a=typeof process!="undefined"&&process&&typeof process.nextTick=="function"?typeof setImmediate=="function"?setImmediate:process.nextTick:setTimeout;function c(v){var y=[],p=0;return x.encodeUTF16toUTF8(function(){return p>=v.length?null:v.charCodeAt(p++)},function(f){y.push(f)}),y}var o="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),l=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1],u=String.fromCharCode;function m(v,y){var p=0,f=[],d,b;if(y<=0||y>v.length)throw Error("Illegal len: "+y);for(;p<y;){if(d=v[p++]&255,f.push(o[d>>2&63]),d=(d&3)<<4,p>=y){f.push(o[d&63]);break}if(b=v[p++]&255,d|=b>>4&15,f.push(o[d&63]),d=(b&15)<<2,p>=y){f.push(o[d&63]);break}b=v[p++]&255,d|=b>>6&3,f.push(o[d&63]),f.push(o[b&63])}return f.join("")}function g(v,y){var p=0,f=v.length,d=0,b=[],S,D,I,N,F,M;if(y<=0)throw Error("Illegal len: "+y);for(;p<f-1&&d<y&&(M=v.charCodeAt(p++),S=M<l.length?l[M]:-1,M=v.charCodeAt(p++),D=M<l.length?l[M]:-1,!(S==-1||D==-1||(F=S<<2>>>0,F|=(D&48)>>4,b.push(u(F)),++d>=y||p>=f)||(M=v.charCodeAt(p++),I=M<l.length?l[M]:-1,I==-1)||(F=(D&15)<<4>>>0,F|=(I&60)>>2,b.push(u(F)),++d>=y||p>=f)));)M=v.charCodeAt(p++),N=M<l.length?l[M]:-1,F=(I&3)<<6>>>0,F|=N,b.push(u(F)),++d;var oe=[];for(p=0;p<d;p++)oe.push(b[p].charCodeAt(0));return oe}var x=function(){var v={};return v.MAX_CODEPOINT=1114111,v.encodeUTF8=function(y,p){var f=null;for(typeof y=="number"&&(f=y,y=function(){return null});f!==null||(f=y())!==null;)f<128?p(f&127):f<2048?(p(f>>6&31|192),p(f&63|128)):f<65536?(p(f>>12&15|224),p(f>>6&63|128),p(f&63|128)):(p(f>>18&7|240),p(f>>12&63|128),p(f>>6&63|128),p(f&63|128)),f=null},v.decodeUTF8=function(y,p){for(var f,d,b,S,D=function(I){I=I.slice(0,I.indexOf(null));var N=Error(I.toString());throw N.name="TruncatedError",N.bytes=I,N};(f=y())!==null;)if((f&128)===0)p(f);else if((f&224)===192)(d=y())===null&&D([f,d]),p((f&31)<<6|d&63);else if((f&240)===224)((d=y())===null||(b=y())===null)&&D([f,d,b]),p((f&15)<<12|(d&63)<<6|b&63);else if((f&248)===240)((d=y())===null||(b=y())===null||(S=y())===null)&&D([f,d,b,S]),p((f&7)<<18|(d&63)<<12|(b&63)<<6|S&63);else throw RangeError("Illegal starting byte: "+f)},v.UTF16toUTF8=function(y,p){for(var f,d=null;(f=d!==null?d:y())!==null;){if(f>=55296&&f<=57343&&(d=y())!==null&&d>=56320&&d<=57343){p((f-55296)*1024+d-56320+65536),d=null;continue}p(f)}d!==null&&p(d)},v.UTF8toUTF16=function(y,p){var f=null;for(typeof y=="number"&&(f=y,y=function(){return null});f!==null||(f=y())!==null;)f<=65535?p(f):(f-=65536,p((f>>10)+55296),p(f%1024+56320)),f=null},v.encodeUTF16toUTF8=function(y,p){v.UTF16toUTF8(y,function(f){v.encodeUTF8(f,p)})},v.decodeUTF8toUTF16=function(y,p){v.decodeUTF8(y,function(f){v.UTF8toUTF16(f,p)})},v.calculateCodePoint=function(y){return y<128?1:y<2048?2:y<65536?3:4},v.calculateUTF8=function(y){for(var p,f=0;(p=y())!==null;)f+=v.calculateCodePoint(p);return f},v.calculateUTF16asUTF8=function(y){var p=0,f=0;return v.UTF16toUTF8(y,function(d){++p,f+=v.calculateCodePoint(d)}),[p,f]},v}();Date.now=Date.now||function(){return+new Date};var k=16,T=10,j=16,R=100,re=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],ie=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],ve=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function ne(v,y,p,f){var d,b=v[y],S=v[y+1];return b^=p[0],d=f[b>>>24],d+=f[256|b>>16&255],d^=f[512|b>>8&255],d+=f[768|b&255],S^=d^p[1],d=f[S>>>24],d+=f[256|S>>16&255],d^=f[512|S>>8&255],d+=f[768|S&255],b^=d^p[2],d=f[b>>>24],d+=f[256|b>>16&255],d^=f[512|b>>8&255],d+=f[768|b&255],S^=d^p[3],d=f[S>>>24],d+=f[256|S>>16&255],d^=f[512|S>>8&255],d+=f[768|S&255],b^=d^p[4],d=f[b>>>24],d+=f[256|b>>16&255],d^=f[512|b>>8&255],d+=f[768|b&255],S^=d^p[5],d=f[S>>>24],d+=f[256|S>>16&255],d^=f[512|S>>8&255],d+=f[768|S&255],b^=d^p[6],d=f[b>>>24],d+=f[256|b>>16&255],d^=f[512|b>>8&255],d+=f[768|b&255],S^=d^p[7],d=f[S>>>24],d+=f[256|S>>16&255],d^=f[512|S>>8&255],d+=f[768|S&255],b^=d^p[8],d=f[b>>>24],d+=f[256|b>>16&255],d^=f[512|b>>8&255],d+=f[768|b&255],S^=d^p[9],d=f[S>>>24],d+=f[256|S>>16&255],d^=f[512|S>>8&255],d+=f[768|S&255],b^=d^p[10],d=f[b>>>24],d+=f[256|b>>16&255],d^=f[512|b>>8&255],d+=f[768|b&255],S^=d^p[11],d=f[S>>>24],d+=f[256|S>>16&255],d^=f[512|S>>8&255],d+=f[768|S&255],b^=d^p[12],d=f[b>>>24],d+=f[256|b>>16&255],d^=f[512|b>>8&255],d+=f[768|b&255],S^=d^p[13],d=f[S>>>24],d+=f[256|S>>16&255],d^=f[512|S>>8&255],d+=f[768|S&255],b^=d^p[14],d=f[b>>>24],d+=f[256|b>>16&255],d^=f[512|b>>8&255],d+=f[768|b&255],S^=d^p[15],d=f[S>>>24],d+=f[256|S>>16&255],d^=f[512|S>>8&255],d+=f[768|S&255],b^=d^p[16],v[y]=S^p[j+1],v[y+1]=b,v}function ae(v,y){for(var p=0,f=0;p<4;++p)f=f<<8|v[y]&255,y=(y+1)%v.length;return{key:f,offp:y}}function ue(v,y,p){for(var f=0,d=[0,0],b=y.length,S=p.length,D,I=0;I<b;I++)D=ae(v,f),f=D.offp,y[I]=y[I]^D.key;for(I=0;I<b;I+=2)d=ne(d,0,y,p),y[I]=d[0],y[I+1]=d[1];for(I=0;I<S;I+=2)d=ne(d,0,y,p),p[I]=d[0],p[I+1]=d[1]}function fe(v,y,p,f){for(var d=0,b=[0,0],S=p.length,D=f.length,I,N=0;N<S;N++)I=ae(y,d),d=I.offp,p[N]=p[N]^I.key;for(d=0,N=0;N<S;N+=2)I=ae(v,d),d=I.offp,b[0]^=I.key,I=ae(v,d),d=I.offp,b[1]^=I.key,b=ne(b,0,p,f),p[N]=b[0],p[N+1]=b[1];for(N=0;N<D;N+=2)I=ae(v,d),d=I.offp,b[0]^=I.key,I=ae(v,d),d=I.offp,b[1]^=I.key,b=ne(b,0,p,f),f[N]=b[0],f[N+1]=b[1]}function be(v,y,p,f,d){var b=ve.slice(),S=b.length,D;if(p<4||p>31)if(D=Error("Illegal number of rounds (4-31): "+p),f){a(f.bind(this,D));return}else throw D;if(y.length!==k)if(D=Error("Illegal salt length: "+y.length+" != "+k),f){a(f.bind(this,D));return}else throw D;p=1<<p>>>0;var I,N,F=0,M;Int32Array?(I=new Int32Array(re),N=new Int32Array(ie)):(I=re.slice(),N=ie.slice()),fe(y,v,I,N);function oe(){if(d&&d(F/p),F<p)for(var qe=Date.now();F<p&&(F=F+1,ue(v,I,N),ue(y,I,N),!(Date.now()-qe>R)););else{for(F=0;F<64;F++)for(M=0;M<S>>1;M++)ne(b,M<<1,I,N);var X=[];for(F=0;F<S;F++)X.push((b[F]>>24&255)>>>0),X.push((b[F]>>16&255)>>>0),X.push((b[F]>>8&255)>>>0),X.push((b[F]&255)>>>0);if(f){f(null,X);return}else return X}f&&a(oe)}if(typeof f!="undefined")oe();else for(var et;;)if(typeof(et=oe())!="undefined")return et||[]}function de(v,y,p,f){var d;if(typeof v!="string"||typeof y!="string")if(d=Error("Invalid string / salt: Not a string"),p){a(p.bind(this,d));return}else throw d;var b,S;if(y.charAt(0)!=="$"||y.charAt(1)!=="2")if(d=Error("Invalid salt version: "+y.substring(0,2)),p){a(p.bind(this,d));return}else throw d;if(y.charAt(2)==="$")b=String.fromCharCode(0),S=3;else{if(b=y.charAt(2),b!=="a"&&b!=="b"&&b!=="y"||y.charAt(3)!=="$")if(d=Error("Invalid salt revision: "+y.substring(2,4)),p){a(p.bind(this,d));return}else throw d;S=4}if(y.charAt(S+2)>"$")if(d=Error("Missing salt rounds"),p){a(p.bind(this,d));return}else throw d;var D=parseInt(y.substring(S,S+1),10)*10,I=parseInt(y.substring(S+1,S+2),10),N=D+I,F=y.substring(S+3,S+25);v+=b>="a"?"\0":"";var M=c(v),oe=g(F,k);function et(qe){var X=[];return X.push("$2"),b>="a"&&X.push(b),X.push("$"),N<10&&X.push("0"),X.push(N.toString()),X.push("$"),X.push(m(oe,oe.length)),X.push(m(qe,ve.length*4-1)),X.join("")}if(typeof p=="undefined")return et(be(M,oe,N));be(M,oe,N,function(qe,X){qe?p(qe,null):p(null,et(X))},f)}return e.encodeBase64=m,e.decodeBase64=g,e})})(ki);var at=ki.exports;const ge=Object.create(null);ge.open="0";ge.close="1";ge.ping="2";ge.pong="3";ge.message="4";ge.upgrade="5";ge.noop="6";const Ot=Object.create(null);Object.keys(ge).forEach(t=>{Ot[ge[t]]=t});const Ra={type:"error",data:"parser error"},$a=typeof Blob=="function"||typeof Blob!="undefined"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Pa=typeof ArrayBuffer=="function",Ea=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Oi=({type:t,data:e},r,s)=>$a&&e instanceof Blob?r?s(e):hs(e,s):Pa&&(e instanceof ArrayBuffer||Ea(e))?r?s(e):hs(new Blob([e]),s):s(ge[t]+(e||"")),hs=(t,e)=>{const r=new FileReader;return r.onload=function(){const s=r.result.split(",")[1];e("b"+(s||""))},r.readAsDataURL(t)},ps="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ot=typeof Uint8Array=="undefined"?[]:new Uint8Array(256);for(let t=0;t<ps.length;t++)ot[ps.charCodeAt(t)]=t;const Da=t=>{let e=t.length*.75,r=t.length,s,n=0,i,a,c,o;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const l=new ArrayBuffer(e),u=new Uint8Array(l);for(s=0;s<r;s+=4)i=ot[t.charCodeAt(s)],a=ot[t.charCodeAt(s+1)],c=ot[t.charCodeAt(s+2)],o=ot[t.charCodeAt(s+3)],u[n++]=i<<2|a>>4,u[n++]=(a&15)<<4|c>>2,u[n++]=(c&3)<<6|o&63;return l},ja=typeof ArrayBuffer=="function",Ii=(t,e)=>{if(typeof t!="string")return{type:"message",data:Ti(t,e)};const r=t.charAt(0);return r==="b"?{type:"message",data:Na(t.substring(1),e)}:Ot[r]?t.length>1?{type:Ot[r],data:t.substring(1)}:{type:Ot[r]}:Ra},Na=(t,e)=>{if(ja){const r=Da(t);return Ti(r,e)}else return{base64:!0,data:t}},Ti=(t,e)=>{switch(e){case"blob":return t instanceof ArrayBuffer?new Blob([t]):t;case"arraybuffer":default:return t}},Ci=String.fromCharCode(30),Fa=(t,e)=>{const r=t.length,s=new Array(r);let n=0;t.forEach((i,a)=>{Oi(i,!1,c=>{s[a]=c,++n===r&&e(s.join(Ci))})})},_a=(t,e)=>{const r=t.split(Ci),s=[];for(let n=0;n<r.length;n++){const i=Ii(r[n],e);if(s.push(i),i.type==="error")break}return s},Ri=4;function H(t){if(t)return qa(t)}function qa(t){for(var e in H.prototype)t[e]=H.prototype[e];return t}H.prototype.on=H.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};H.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this};H.prototype.off=H.prototype.removeListener=H.prototype.removeAllListeners=H.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var s,n=0;n<r.length;n++)if(s=r[n],s===e||s.fn===e){r.splice(n,1);break}return r.length===0&&delete this._callbacks["$"+t],this};H.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),r=this._callbacks["$"+t],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(r){r=r.slice(0);for(var s=0,n=r.length;s<n;++s)r[s].apply(this,e)}return this};H.prototype.emitReserved=H.prototype.emit;H.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};H.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Ce=(()=>typeof self!="undefined"?self:typeof window!="undefined"?window:Function("return this")())();function $i(t,...e){return e.reduce((r,s)=>(t.hasOwnProperty(s)&&(r[s]=t[s]),r),{})}const La=setTimeout,Ma=clearTimeout;function qt(t,e){e.useNativeTimers?(t.setTimeoutFn=La.bind(Ce),t.clearTimeoutFn=Ma.bind(Ce)):(t.setTimeoutFn=setTimeout.bind(Ce),t.clearTimeoutFn=clearTimeout.bind(Ce))}const Ua=1.33;function Ba(t){return typeof t=="string"?Ha(t):Math.ceil((t.byteLength||t.size)*Ua)}function Ha(t){let e=0,r=0;for(let s=0,n=t.length;s<n;s++)e=t.charCodeAt(s),e<128?r+=1:e<2048?r+=2:e<55296||e>=57344?r+=3:(s++,r+=4);return r}class Ka extends Error{constructor(e,r,s){super(e),this.description=r,this.context=s,this.type="TransportError"}}class Pi extends H{constructor(e){super(),this.writable=!1,qt(this,e),this.opts=e,this.query=e.query,this.readyState="",this.socket=e.socket}onError(e,r,s){return super.emitReserved("error",new Ka(e,r,s)),this}open(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const r=Ii(e,this.socket.binaryType);this.onPacket(r)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}}const Ei="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),hr=64,Xa={};let ys=0,mt=0,ms;function gs(t){let e="";do e=Ei[t%hr]+e,t=Math.floor(t/hr);while(t>0);return e}function Di(){const t=gs(+new Date);return t!==ms?(ys=0,ms=t):t+"."+gs(ys++)}for(;mt<hr;mt++)Xa[Ei[mt]]=mt;function ji(t){let e="";for(let r in t)t.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e}function za(t){let e={},r=t.split("&");for(let s=0,n=r.length;s<n;s++){let i=r[s].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}let Ni=!1;try{Ni=typeof XMLHttpRequest!="undefined"&&"withCredentials"in new XMLHttpRequest}catch{}const Ya=Ni;function Fi(t){const e=t.xdomain;try{if(typeof XMLHttpRequest!="undefined"&&(!e||Ya))return new XMLHttpRequest}catch{}if(!e)try{return new Ce[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function Qa(){}const Va=function(){return new Fi({xdomain:!1}).responseType!=null}();class Wa extends Pi{constructor(e){if(super(e),this.polling=!1,typeof location!="undefined"){const s=location.protocol==="https:";let n=location.port;n||(n=s?"443":"80"),this.xd=typeof location!="undefined"&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==s}const r=e&&e.forceBase64;this.supportsBinary=Va&&!r}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const r=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let s=0;this.polling&&(s++,this.once("pollComplete",function(){--s||r()})),this.writable||(s++,this.once("drain",function(){--s||r()}))}else r()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const r=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};_a(e,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Fa(e,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.query||{};const r=this.opts.secure?"https":"http";let s="";this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=Di()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.opts.port&&(r==="https"&&Number(this.opts.port)!==443||r==="http"&&Number(this.opts.port)!==80)&&(s=":"+this.opts.port);const n=ji(e),i=this.opts.hostname.indexOf(":")!==-1;return r+"://"+(i?"["+this.opts.hostname+"]":this.opts.hostname)+s+this.opts.path+(n.length?"?"+n:"")}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new me(this.uri(),e)}doWrite(e,r){const s=this.request({method:"POST",data:e});s.on("success",r),s.on("error",(n,i)=>{this.onError("xhr post error",n,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(r,s)=>{this.onError("xhr poll error",r,s)}),this.pollXhr=e}}class me extends H{constructor(e,r){super(),qt(this,r),this.opts=r,this.method=r.method||"GET",this.uri=e,this.async=r.async!==!1,this.data=r.data!==void 0?r.data:null,this.create()}create(){const e=$i(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const r=this.xhr=new Fi(e);try{r.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this.opts.extraHeaders[s])}}catch{}if(this.method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{r.readyState===4&&(r.status===200||r.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof r.status=="number"?r.status:0)},0))},r.send(this.data)}catch(s){this.setTimeoutFn(()=>{this.onError(s)},0);return}typeof document!="undefined"&&(this.index=me.requestsCount++,me.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr=="undefined"||this.xhr===null)){if(this.xhr.onreadystatechange=Qa,e)try{this.xhr.abort()}catch{}typeof document!="undefined"&&delete me.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}me.requestsCount=0;me.requests={};if(typeof document!="undefined"){if(typeof attachEvent=="function")attachEvent("onunload",vs);else if(typeof addEventListener=="function"){const t="onpagehide"in Ce?"pagehide":"unload";addEventListener(t,vs,!1)}}function vs(){for(let t in me.requests)me.requests.hasOwnProperty(t)&&me.requests[t].abort()}const _i=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,r)=>r(e,0))(),gt=Ce.WebSocket||Ce.MozWebSocket,bs=!0,Ja="arraybuffer",xs=typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Ga extends Pi{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),r=this.opts.protocols,s=xs?{}:$i(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=bs&&!xs?r?new gt(e,r):new gt(e):new gt(e,r,s)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType||Ja,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let r=0;r<e.length;r++){const s=e[r],n=r===e.length-1;Oi(s,this.supportsBinary,i=>{const a={};try{bs&&this.ws.send(i)}catch{}n&&_i(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws!="undefined"&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const r=this.opts.secure?"wss":"ws";let s="";this.opts.port&&(r==="wss"&&Number(this.opts.port)!==443||r==="ws"&&Number(this.opts.port)!==80)&&(s=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=Di()),this.supportsBinary||(e.b64=1);const n=ji(e),i=this.opts.hostname.indexOf(":")!==-1;return r+"://"+(i?"["+this.opts.hostname+"]":this.opts.hostname)+s+this.opts.path+(n.length?"?"+n:"")}check(){return!!gt}}const Za={websocket:Ga,polling:Wa},eo=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,to=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function pr(t){const e=t,r=t.indexOf("["),s=t.indexOf("]");r!=-1&&s!=-1&&(t=t.substring(0,r)+t.substring(r,s).replace(/:/g,";")+t.substring(s,t.length));let n=eo.exec(t||""),i={},a=14;for(;a--;)i[to[a]]=n[a]||"";return r!=-1&&s!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=ro(i,i.path),i.queryKey=so(i,i.query),i}function ro(t,e){const r=/\/{2,9}/g,s=e.replace(r,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&s.splice(0,1),e.slice(-1)=="/"&&s.splice(s.length-1,1),s}function so(t,e){const r={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,n,i){n&&(r[n]=i)}),r}class Ie extends H{constructor(e,r={}){super(),e&&typeof e=="object"&&(r=e,e=null),e?(e=pr(e),r.hostname=e.host,r.secure=e.protocol==="https"||e.protocol==="wss",r.port=e.port,e.query&&(r.query=e.query)):r.host&&(r.hostname=pr(r.host).host),qt(this,r),this.secure=r.secure!=null?r.secure:typeof location!="undefined"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location!="undefined"?location.hostname:"localhost"),this.port=r.port||(typeof location!="undefined"&&location.port?location.port:this.secure?"443":"80"),this.transports=r.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},r),this.opts.path=this.opts.path.replace(/\/$/,"")+"/",typeof this.opts.query=="string"&&(this.opts.query=za(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const r=Object.assign({},this.opts.query);r.EIO=Ri,r.transport=e,this.id&&(r.sid=this.id);const s=Object.assign({},this.opts.transportOptions[e],this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new Za[e](s)}open(){let e;if(this.opts.rememberUpgrade&&Ie.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",r=>this.onClose("transport close",r))}probe(e){let r=this.createTransport(e),s=!1;Ie.priorWebsocketSuccess=!1;const n=()=>{s||(r.send([{type:"ping",data:"probe"}]),r.once("packet",m=>{if(!s)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Ie.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(u(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const g=new Error("probe error");g.transport=r.name,this.emitReserved("upgradeError",g)}}))};function i(){s||(s=!0,u(),r.close(),r=null)}const a=m=>{const g=new Error("probe error: "+m);g.transport=r.name,i(),this.emitReserved("upgradeError",g)};function c(){a("transport closed")}function o(){a("socket closed")}function l(m){r&&m.name!==r.name&&i()}const u=()=>{r.removeListener("open",n),r.removeListener("error",a),r.removeListener("close",c),this.off("close",o),this.off("upgrading",l)};r.once("open",n),r.once("error",a),r.once("close",c),this.once("close",o),this.once("upgrading",l),r.open()}onOpen(){if(this.readyState="open",Ie.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade&&this.transport.pause){let e=0;const r=this.upgrades.length;for(;e<r;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const r=new Error("server error");r.code=e.data,this.onError(r);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let s=0;s<this.writeBuffer.length;s++){const n=this.writeBuffer[s].data;if(n&&(r+=Ba(n)),s>0&&r>this.maxPayload)return this.writeBuffer.slice(0,s);r+=2}return this.writeBuffer}write(e,r,s){return this.sendPacket("message",e,r,s),this}send(e,r,s){return this.sendPacket("message",e,r,s),this}sendPacket(e,r,s,n){if(typeof r=="function"&&(n=r,r=void 0),typeof s=="function"&&(n=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const i={type:e,data:r,options:s};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),e()},s=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}onError(e){Ie.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,r){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,r),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const r=[];let s=0;const n=e.length;for(;s<n;s++)~this.transports.indexOf(e[s])&&r.push(e[s]);return r}}Ie.protocol=Ri;function io(t,e="",r){let s=t;r=r||typeof location!="undefined"&&location,t==null&&(t=r.protocol+"//"+r.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=r.protocol+t:t=r.host+t),/^(https?|wss?):\/\//.test(t)||(typeof r!="undefined"?t=r.protocol+"//"+t:t="https://"+t),s=pr(t)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const i=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+i+":"+s.port+e,s.href=s.protocol+"://"+i+(r&&r.port===s.port?"":":"+s.port),s}const no=typeof ArrayBuffer=="function",ao=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,qi=Object.prototype.toString,oo=typeof Blob=="function"||typeof Blob!="undefined"&&qi.call(Blob)==="[object BlobConstructor]",co=typeof File=="function"||typeof File!="undefined"&&qi.call(File)==="[object FileConstructor]";function qr(t){return no&&(t instanceof ArrayBuffer||ao(t))||oo&&t instanceof Blob||co&&t instanceof File}function It(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let r=0,s=t.length;r<s;r++)if(It(t[r]))return!0;return!1}if(qr(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return It(t.toJSON(),!0);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&It(t[r]))return!0;return!1}function lo(t){const e=[],r=t.data,s=t;return s.data=yr(r,e),s.attachments=e.length,{packet:s,buffers:e}}function yr(t,e){if(!t)return t;if(qr(t)){const r={_placeholder:!0,num:e.length};return e.push(t),r}else if(Array.isArray(t)){const r=new Array(t.length);for(let s=0;s<t.length;s++)r[s]=yr(t[s],e);return r}else if(typeof t=="object"&&!(t instanceof Date)){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=yr(t[s],e));return r}return t}function uo(t,e){return t.data=mr(t.data,e),delete t.attachments,t}function mr(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=mr(t[r],e);else if(typeof t=="object")for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=mr(t[r],e));return t}const fo=5;var E;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(E||(E={}));class ho{constructor(e){this.replacer=e}encode(e){return(e.type===E.EVENT||e.type===E.ACK)&&It(e)?this.encodeAsBinary({type:e.type===E.EVENT?E.BINARY_EVENT:E.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let r=""+e.type;return(e.type===E.BINARY_EVENT||e.type===E.BINARY_ACK)&&(r+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(r+=e.nsp+","),e.id!=null&&(r+=e.id),e.data!=null&&(r+=JSON.stringify(e.data,this.replacer)),r}encodeAsBinary(e){const r=lo(e),s=this.encodeAsString(r.packet),n=r.buffers;return n.unshift(s),n}}class Lr extends H{constructor(e){super(),this.reviver=e}add(e){let r;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(e);const s=r.type===E.BINARY_EVENT;s||r.type===E.BINARY_ACK?(r.type=s?E.EVENT:E.ACK,this.reconstructor=new po(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(qr(e)||e.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(e),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let r=0;const s={type:Number(e.charAt(0))};if(E[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===E.BINARY_EVENT||s.type===E.BINARY_ACK){const i=r+1;for(;e.charAt(++r)!=="-"&&r!=e.length;);const a=e.substring(i,r);if(a!=Number(a)||e.charAt(r)!=="-")throw new Error("Illegal attachments");s.attachments=Number(a)}if(e.charAt(r+1)==="/"){const i=r+1;for(;++r&&!(e.charAt(r)===","||r===e.length););s.nsp=e.substring(i,r)}else s.nsp="/";const n=e.charAt(r+1);if(n!==""&&Number(n)==n){const i=r+1;for(;++r;){const a=e.charAt(r);if(a==null||Number(a)!=a){--r;break}if(r===e.length)break}s.id=Number(e.substring(i,r+1))}if(e.charAt(++r)){const i=this.tryParse(e.substr(r));if(Lr.isPayloadValid(s.type,i))s.data=i;else throw new Error("invalid payload")}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,r){switch(e){case E.CONNECT:return typeof r=="object";case E.DISCONNECT:return r===void 0;case E.CONNECT_ERROR:return typeof r=="string"||typeof r=="object";case E.EVENT:case E.BINARY_EVENT:return Array.isArray(r)&&r.length>0;case E.ACK:case E.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class po{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const r=uo(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}var yo=Object.freeze(Object.defineProperty({__proto__:null,protocol:fo,get PacketType(){return E},Encoder:ho,Decoder:Lr},Symbol.toStringTag,{value:"Module"}));function le(t,e,r){return t.on(e,r),function(){t.off(e,r)}}const mo=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Li extends H{constructor(e,r,s){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=r,s&&s.auth&&(this.auth=s.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[le(e,"open",this.onopen.bind(this)),le(e,"packet",this.onpacket.bind(this)),le(e,"error",this.onerror.bind(this)),le(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...r){if(mo.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');r.unshift(e);const s={type:E.EVENT,data:r};if(s.options={},s.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const a=this.ids++,c=r.pop();this._registerAckCallback(a,c),s.id=a}const n=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!n||!this.connected)||(this.connected?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(e,r){const s=this.flags.timeout;if(s===void 0){this.acks[e]=r;return}const n=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let i=0;i<this.sendBuffer.length;i++)this.sendBuffer[i].id===e&&this.sendBuffer.splice(i,1);r.call(this,new Error("operation has timed out"))},s);this.acks[e]=(...i)=>{this.io.clearTimeoutFn(n),r.apply(this,[null,...i])}}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this.packet({type:E.CONNECT,data:e})}):this.packet({type:E.CONNECT,data:this.auth})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,r)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case E.CONNECT:if(e.data&&e.data.sid){const n=e.data.sid;this.onconnect(n)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case E.EVENT:case E.BINARY_EVENT:this.onevent(e);break;case E.ACK:case E.BINARY_ACK:this.onack(e);break;case E.DISCONNECT:this.ondisconnect();break;case E.CONNECT_ERROR:this.destroy();const s=new Error(e.data.message);s.data=e.data.data,this.emitReserved("connect_error",s);break}}onevent(e){const r=e.data||[];e.id!=null&&r.push(this.ack(e.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const s of r)s.apply(this,e)}super.emit.apply(this,e)}ack(e){const r=this;let s=!1;return function(...n){s||(s=!0,r.packet({type:E.ACK,id:e,data:n}))}}onack(e){const r=this.acks[e.id];typeof r=="function"&&(r.apply(this,e.data),delete this.acks[e.id])}onconnect(e){this.id=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:E.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const r=this._anyListeners;for(let s=0;s<r.length;s++)if(e===r[s])return r.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const r=this._anyOutgoingListeners;for(let s=0;s<r.length;s++)if(e===r[s])return r.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const s of r)s.apply(this,e.data)}}}function Ye(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Ye.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-r:t+r}return Math.min(t,this.max)|0};Ye.prototype.reset=function(){this.attempts=0};Ye.prototype.setMin=function(t){this.ms=t};Ye.prototype.setMax=function(t){this.max=t};Ye.prototype.setJitter=function(t){this.jitter=t};class gr extends H{constructor(e,r){var s;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(r=e,e=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,qt(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((s=r.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new Ye({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=e;const n=r.parser||yo;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var r;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(r=this.backoff)===null||r===void 0||r.setMin(e),this)}randomizationFactor(e){var r;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(r=this.backoff)===null||r===void 0||r.setJitter(e),this)}reconnectionDelayMax(e){var r;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(r=this.backoff)===null||r===void 0||r.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Ie(this.uri,this.opts);const r=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const n=le(r,"open",function(){s.onopen(),e&&e()}),i=le(r,"error",a=>{s.cleanup(),s._readyState="closed",this.emitReserved("error",a),e?e(a):s.maybeReconnectOnOpen()});if(this._timeout!==!1){const a=this._timeout;a===0&&n();const c=this.setTimeoutFn(()=>{n(),r.close(),r.emit("error",new Error("timeout"))},a);this.opts.autoUnref&&c.unref(),this.subs.push(function(){clearTimeout(c)})}return this.subs.push(n),this.subs.push(i),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(le(e,"ping",this.onping.bind(this)),le(e,"data",this.ondata.bind(this)),le(e,"error",this.onerror.bind(this)),le(e,"close",this.onclose.bind(this)),le(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(r){this.onclose("parse error",r)}}ondecoded(e){_i(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,r){let s=this.nsps[e];return s||(s=new Li(this,e,r),this.nsps[e]=s),s}_destroy(e){const r=Object.keys(this.nsps);for(const s of r)if(this.nsps[s].active)return;this._close()}_packet(e){const r=this.encoder.encode(e);for(let s=0;s<r.length;s++)this.engine.write(r[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,r){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(n=>{n?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",n)):e.onreconnect()}))},r);this.opts.autoUnref&&s.unref(),this.subs.push(function(){clearTimeout(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const rt={};function Tt(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const r=io(t,e.path||"/socket.io"),s=r.source,n=r.id,i=r.path,a=rt[n]&&i in rt[n].nsps,c=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let o;return c?o=new gr(s,e):(rt[n]||(rt[n]=new gr(s,e)),o=rt[n]),r.query&&!e.query&&(e.query=r.queryKey),o.socket(r.path,e)}Object.assign(Tt,{Manager:gr,Socket:Li,io:Tt,connect:Tt});var Mi={get dev(){return!1},baseURL:"https://clm-api.elitehcms.com",apiDevURL:"http://localhost:1337",socketDevURL:"wss://clm-api.elitehcms.com",token:"clm-jwt",tokenExpiration:"24h"};function go(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function ct(){return(ct=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t}).apply(this,arguments)}function Mr(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var Ui=function(){function t(s,n){this.operator=s,this.value=n,Object.defineProperty(this,"t",{writable:!0})}var e,r;return t.prototype.addNote=function(s){this.t=this.t||[],this.t.push(s)},e=t,(r=[{key:"notes",get:function(){return this.t}}])&&go(e.prototype,r),t}(),Ur=function(t){function e(){return t.apply(this,arguments)||this}return Mr(e,t),e}(Ui),Lt=function(t){function e(r,s){if(!Array.isArray(s))throw new Error('"'+r+'" operator expects to receive an array of conditions');return t.call(this,r,s)||this}return Mr(e,t),e}(Ur),ht="__itself__",Mt=function(t){function e(r,s,n){var i;return(i=t.call(this,r,n)||this).field=s,i}return Mr(e,t),e}(Ui),Bi=new Ur("__null__",null),vr=Object.prototype.hasOwnProperty.call.bind(Object.prototype.hasOwnProperty);function vo(t,e){return e instanceof Lt&&e.operator===t}function Hi(t,e){return e.length===1?e[0]:new Lt(t,function r(s,n,i){for(var a=i||[],c=0,o=n.length;c<o;c++){var l=n[c];vo(s,l)?r(s,l.value,a):a.push(l)}return a}(t,e))}var bo=function(t){return t},Ki=function(){return Object.create(null)},Xi=Object.defineProperty(Ki(),"__@type@__",{value:"ignore value"});function xo(t,e,r){if(r===void 0&&(r=!1),!t||t&&t.constructor!==Object)return!1;for(var s in t)if(vr(t,s)&&vr(e,s)&&(!r||t[s]!==Xi))return!0;return!1}function wo(t){var e=[];for(var r in t)vr(t,r)&&t[r]!==Xi&&e.push(r);return e}function Vt(t,e){e!==Bi&&t.push(e)}var zi=function(t){return Hi("and",t)},Yi={compound:function(t,e,r){var s=(Array.isArray(e)?e:[e]).map(function(n){return r.parse(n)});return new Lt(t.name,s)},field:function(t,e,r){return new Mt(t.name,r.field,e)},document:function(t,e){return new Ur(t.name,e)}},Qi=function(){function t(r,s){var n=this;s===void 0&&(s=Ki()),this.i=void 0,this.o=void 0,this.u=void 0,this.s=void 0,this.h=void 0,this.parse=this.parse.bind(this),this.s={operatorToConditionName:s.operatorToConditionName||bo,defaultOperatorName:s.defaultOperatorName||"eq",mergeFinalConditions:s.mergeFinalConditions||zi},this.i=Object.keys(r).reduce(function(i,a){return i[a]=ct({name:n.s.operatorToConditionName(a)},r[a]),i},{}),this.o=ct({},s.fieldContext,{field:"",query:{},parse:this.parse,hasOperators:function(i){return xo(i,n.i,s.useIgnoreValue)}}),this.u=ct({},s.documentContext,{parse:this.parse,query:{}}),this.h=s.useIgnoreValue?wo:Object.keys}var e=t.prototype;return e.setParse=function(r){this.parse=r,this.o.parse=r,this.u.parse=r},e.parseField=function(r,s,n,i){var a=this.i[s];if(!a)throw new Error('Unsupported operator "'+s+'"');if(a.type!=="field")throw new Error("Unexpected "+a.type+' operator "'+s+'" at field level');return this.o.field=r,this.o.query=i,this.parseInstruction(a,n,this.o)},e.parseInstruction=function(r,s,n){return typeof r.validate=="function"&&r.validate(r,s),(r.parse||Yi[r.type])(r,s,n)},e.parseFieldOperators=function(r,s){for(var n=[],i=this.h(s),a=0,c=i.length;a<c;a++){var o=i[a];if(!this.i[o])throw new Error('Field query for "'+r+'" may contain only operators or a plain object as a value');Vt(n,this.parseField(r,o,s[o],s))}return n},e.parse=function(r){var s=[],n=this.h(r);this.u.query=r;for(var i=0,a=n.length;i<a;i++){var c=n[i],o=r[c],l=this.i[c];if(l){if(l.type!=="document"&&l.type!=="compound")throw new Error('Cannot use parsing instruction for operator "'+c+'" in "document" context as it is supposed to be used in  "'+l.type+'" context');Vt(s,this.parseInstruction(l,o,this.u))}else this.o.hasOperators(o)?s.push.apply(s,this.parseFieldOperators(c,o)):Vt(s,this.parseField(c,this.s.defaultOperatorName,o,r))}return this.s.mergeFinalConditions(s)},t}();function Wt(t,e){var r=t[e];if(typeof r!="function")throw new Error('Unable to interpret "'+e+'" condition. Did you forget to register interpreter for it?');return r}function Ao(t){return t.operator}function So(t,e){var r,s=e,n=s&&s.getInterpreterName||Ao;switch(s?s.numberOfArguments:0){case 1:r=function(a){var c=n(a,s);return Wt(t,c)(a,i)};break;case 3:r=function(a,c,o){var l=n(a,s);return Wt(t,l)(a,c,o,i)};break;default:r=function(a,c){var o=n(a,s);return Wt(t,o)(a,c,i)}}var i=ct({},s,{interpret:r});return i.interpret}function ko(t,e){return function(r){for(var s=arguments.length,n=new Array(s>1?s-1:0),i=1;i<s;i++)n[i-1]=arguments[i];var a=t.apply(void 0,[r].concat(n)),c=e.bind(null,a);return c.ast=a,c}}Qi.prototype.parseInstruction;function Vi(t,e){if(!Array.isArray(e))throw new Error('"'+t.name+'" expects value to be an array')}function Wi(t,e){if(Vi(t,e),!e.length)throw new Error('"'+t.name+'" expects to have at least one element in array')}var Br=function(t){return function(e,r){if(typeof r!==t)throw new Error('"'+e.name+'" expects value to be a "'+t+'"')}},Ji={type:"compound",validate:Wi,parse:function(t,e,r){var s=r.parse,n=e.map(function(i){return s(i)});return Hi(t.name,n)}},Oo=Ji,Io={type:"compound",validate:Wi},To={type:"field",validate:function(t,e){if(!(e&&(e instanceof RegExp||e.constructor===Object)))throw new Error('"'+t.name+'" expects to receive either regular expression or object of field operators')},parse:function(t,e,r){var s=e instanceof RegExp?new Mt("regex",r.field,e):r.parse(e,r);return new Lt(t.name,[s])}},Gi={type:"field",validate:function(t,e){if(!e||e.constructor!==Object)throw new Error('"'+t.name+'" expects to receive an object with nested query or field level operators')},parse:function(t,e,r){var s=r.parse,n=r.field,i=(0,r.hasOperators)(e)?s(e,{field:ht}):s(e);return new Mt(t.name,n,i)}},Zi={type:"field",validate:Br("number")},Ut={type:"field",validate:Vi},en=Ut,tn=Ut,Co={type:"field",validate:function(t,e){if(!Array.isArray(e)||e.length!==2)throw new Error('"'+t.name+'" expects an array with 2 numeric elements')}},rn={type:"field",validate:Br("boolean")},Hr={type:"field",validate:function(t,e){if(!(typeof e=="string"||typeof e=="number"||e instanceof Date))throw new Error('"'+t.name+'" expects value to be comparable (i.e., string, number or date)')}},Bt=Hr,sn=Bt,nn=Bt,Kr={type:"field"},an=Kr,on={type:"field",validate:function(t,e){if(!(e instanceof RegExp)&&typeof e!="string")throw new Error('"'+t.name+'" expects value to be a regular expression or a string that represents regular expression')},parse:function(t,e,r){var s=typeof e=="string"?new RegExp(e,r.query.$options||""):e;return new Mt(t.name,r.field,s)}},cn={type:"field",parse:function(){return Bi}},Ro={type:"document",validate:Br("function")},$o=Object.freeze({__proto__:null,$and:Ji,$or:Oo,$nor:Io,$not:To,$elemMatch:Gi,$size:Zi,$in:Ut,$nin:en,$all:tn,$mod:Co,$exists:rn,$gte:Hr,$gt:Bt,$lt:sn,$lte:nn,$eq:Kr,$ne:an,$regex:on,$options:cn,$where:Ro}),Po=function(t){var e,r;function s(n){return t.call(this,n,{defaultOperatorName:"$eq",operatorToConditionName:function(i){return i.slice(1)}})||this}return r=t,(e=s).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,s.prototype.parse=function(n,i){return i&&i.field?zi(this.parseFieldOperators(i.field,n)):t.prototype.parse.call(this,n)},s}(Qi),br=$o;function Xr(t,e,r){for(var s=0,n=t.length;s<n;s++)if(r(t[s],e)===0)return!0;return!1}function zr(t,e){return Array.isArray(t)&&Number.isNaN(Number(e))}function ws(t,e,r){if(!zr(t,e))return r(t,e);for(var s=[],n=0;n<t.length;n++){var i=r(t[n],e);i!==void 0&&(s=s.concat(i))}return s}function Fe(t){return function(e,r,s){var n=s.get(r,e.field);return Array.isArray(n)?n.some(function(i){return t(e,i,s)}):t(e,n,s)}}function Yr(){return(Yr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t}).apply(this,arguments)}var Eo=function(t,e){return t[e]};function ln(t,e,r){var s=e.lastIndexOf(".");return s===-1?[t,e]:[r(t,e.slice(0,s)),e.slice(s+1)]}function Do(t,e,r){if(r===void 0&&(r=Eo),e===ht)return t;if(!t)throw new Error('Unable to get field "'+e+'" out of '+String(t)+".");return function(s,n,i){if(n.indexOf(".")===-1)return ws(s,n,i);for(var a=n.split("."),c=s,o=0,l=a.length;o<l;o++)if(!(c=ws(c,a[o],i))||typeof c!="object")return c;return c}(t,e,r)}function un(t,e){return t===e?0:t>e?1:-1}function fn(t,e){return e===void 0&&(e={}),So(t,Yr({get:Do,compare:un},e))}var dn=function(t,e,r){var s=r.interpret;return t.value.some(function(n){return s(n,e)})},jo=function(t,e,r){return!dn(t,e,r)},hn=function(t,e,r){var s=r.interpret;return t.value.every(function(n){return s(n,e)})},No=function(t,e,r){return!(0,r.interpret)(t.value[0],e)},Qr=function(t,e,r){var s=r.compare,n=(0,r.get)(e,t.field);return Array.isArray(n)&&!Array.isArray(t.value)?Xr(n,t.value,s):s(n,t.value)===0},pn=function(t,e,r){return!Qr(t,e,r)},yn=Fe(function(t,e,r){var s=r.compare(e,t.value);return s===0||s===-1}),mn=Fe(function(t,e,r){return r.compare(e,t.value)===-1}),gn=Fe(function(t,e,r){return r.compare(e,t.value)===1}),vn=Fe(function(t,e,r){var s=r.compare(e,t.value);return s===0||s===1}),bn=function(t,e,r){var s=r.get;if(t.field===ht)return e!==void 0;var n=ln(e,t.field,s),i=n[0],a=n[1],c=function(o){return!!o&&o.hasOwnProperty(a)===t.value};return zr(i,a)?i.some(c):c(i)},Fo=Fe(function(t,e){return typeof e=="number"&&e%t.value[0]===t.value[1]}),xn=function(t,e,r){var s=r.get,n=ln(e,t.field,s),i=n[0],a=n[1],c=function(o){var l=s(o,a);return Array.isArray(l)&&l.length===t.value};return t.field!==ht&&zr(i,a)?i.some(c):c(i)},wn=Fe(function(t,e){return typeof e=="string"&&t.value.test(e)}),Pt=Fe(function(t,e,r){var s=r.compare;return Xr(t.value,e,s)}),An=function(t,e,r){return!Pt(t,e,r)},Sn=function(t,e,r){var s=r.compare,n=(0,r.get)(e,t.field);return Array.isArray(n)&&t.value.every(function(i){return Xr(n,i,s)})},kn=function(t,e,r){var s=r.interpret,n=(0,r.get)(e,t.field);return Array.isArray(n)&&n.some(function(i){return s(t.value,i)})},_o=function(t,e){return t.value.call(e)},Vr=Yr({},Object.freeze({__proto__:null,or:dn,nor:jo,and:hn,not:No,eq:Qr,ne:pn,lte:yn,lt:mn,gt:gn,gte:vn,exists:bn,mod:Fo,size:xn,regex:wn,within:Pt,nin:An,all:Sn,elemMatch:kn,where:_o}),{in:Pt});fn(Vr);function lt(){return(lt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t}).apply(this,arguments)}function As(t){return t instanceof Date?t.getTime():t&&typeof t.toJSON=="function"?t.toJSON():t}var qo=function(t,e){return un(As(t),As(e))};function Wr(t,e,r){var s=new Po(t),n=fn(e,lt({compare:qo},r));if(r&&r.forPrimitives){var i={field:ht},a=s.parse;s.setParse(function(c){return a(c,i)})}return ko(s.parse,n)}Wr(br,Vr);Wr(["$and","$or"].reduce(function(t,e){return t[e]=lt({},t[e],{type:"field"}),t},lt({},br,{$nor:lt({},br.$nor,{type:"field",parse:Yi.compound})})),Vr,{forPrimitives:!0});function Ss(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function On(t,e,r){return e&&Ss(t.prototype,e),r&&Ss(t,r),t}function xr(){return xr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},xr.apply(this,arguments)}function Jr(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,wr(t,e)}function wr(t,e){return wr=Object.setPrototypeOf||function(s,n){return s.__proto__=n,s},wr(t,e)}function Lo(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ar(t){return Array.isArray(t)?t:[t]}var In=Object.hasOwn||Object.prototype.hasOwnProperty.call.bind(Object.prototype.hasOwnProperty),Ue="__caslSubjectType__";function Xm(t,e){if(e){if(!In(e,Ue))Object.defineProperty(e,Ue,{value:t});else if(t!==e[Ue])throw new Error("Trying to cast object to subject type "+t+" but previously it was casted to "+e[Ue])}return e}var Sr=function(e){var r=typeof e;return r==="string"||r==="function"},Tn=function(e){return e.modelName||e.name},Mo=function(e){return typeof e=="string"?e:Tn(e)};function Uo(t){return In(t,Ue)?t[Ue]:Tn(t.constructor)}function ks(t,e,r){for(var s=r;s<e.length;s++)t.push(e[s])}function Os(t,e){if(!t||!t.length)return e||[];if(!e||!e.length)return t||[];for(var r=0,s=0,n=[];r<t.length&&s<e.length;)t[r].priority<e[s].priority?(n.push(t[r]),r++):(n.push(e[s]),s++);return ks(n,t,r),ks(n,e,s),n}function vt(t,e,r){var s=t.get(e);return s||(s=r(),t.set(e,s)),s}var Bo=function(e){return e};function Ho(t,e){if(Array.isArray(t.fields)&&!t.fields.length)throw new Error("`rawRule.fields` cannot be an empty array. https://bit.ly/390miLa");if(t.fields&&!e.fieldMatcher)throw new Error('You need to pass "fieldMatcher" option in order to restrict access by fields');if(t.conditions&&!e.conditionsMatcher)throw new Error('You need to pass "conditionsMatcher" option in order to restrict access by conditions')}var Ko=function(){function t(r,s,n){n===void 0&&(n=0),Ho(r,s),this.action=s.resolveAction(r.action),this.subject=r.subject,this.inverted=!!r.inverted,this.conditions=r.conditions,this.reason=r.reason,this.fields=r.fields?Ar(r.fields):void 0,this.priority=n,this.t=s}var e=t.prototype;return e.i=function(){return this.conditions&&!this.u&&(this.u=this.t.conditionsMatcher(this.conditions)),this.u},e.matchesConditions=function(s){if(!this.conditions)return!0;if(!s||Sr(s))return!this.inverted;var n=this.i();return n(s)},e.matchesField=function(s){return this.fields?s?(this.fields&&!this.o&&(this.o=this.t.fieldMatcher(this.fields)),this.o(s)):!this.inverted:!0},On(t,[{key:"ast",get:function(){var s=this.i();return s?s.ast:void 0}}]),t}();function Xo(t,e){var r={value:t,prev:e,next:null};return e&&(e.next=r),r}function zo(t){t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next),t.next=t.prev=null}var Yo=function(e){return{value:e.value,prev:e.prev,next:e.next}},Is=function(){return{rules:[],merged:!1}},Ts=function(){return new Map},Qo=function(e,r){!e.h&&r.fields&&(e.h=!0)},Vo=function(){function t(r,s){r===void 0&&(r=[]),s===void 0&&(s={}),this.h=!1,this.v=new Map,this.l={conditionsMatcher:s.conditionsMatcher,fieldMatcher:s.fieldMatcher,resolveAction:s.resolveAction||Bo},this.p=s.anyAction||"manage",this.g=s.anySubjectType||"all",this.A=s.detectSubjectType||Uo,this.j=r,this.$=this.M(r)}var e=t.prototype;return e.detectSubjectType=function(s){return Sr(s)?s:s?this.A(s):this.g},e.update=function(s){var n={rules:s,ability:this,target:this};return this.m("update",n),this.j=s,this.$=this.M(s),this.m("updated",n),this},e.M=function(s){for(var n=new Map,i=s.length-1;i>=0;i--){var a=s.length-i-1,c=new Ko(s[i],this.l,a),o=Ar(c.action),l=Ar(c.subject||this.g);Qo(this,c);for(var u=0;u<l.length;u++)for(var m=vt(n,l[u],Ts),g=0;g<o.length;g++)vt(m,o[g],Is).rules.push(c)}return n},e.possibleRulesFor=function(s,n){if(n===void 0&&(n=this.g),!Sr(n))throw new Error('"possibleRulesFor" accepts only subject types (i.e., string or class) as the 2nd parameter');var i=vt(this.$,n,Ts),a=vt(i,s,Is);if(a.merged)return a.rules;var c=s!==this.p&&i.has(this.p)?i.get(this.p).rules:void 0,o=Os(a.rules,c);return n!==this.g&&(o=Os(o,this.possibleRulesFor(s,this.g))),a.rules=o,a.merged=!0,o},e.rulesFor=function(s,n,i){var a=this.possibleRulesFor(s,n);if(i&&typeof i!="string")throw new Error("The 3rd, `field` parameter is expected to be a string. See https://stalniy.github.io/casl/en/api/casl-ability#can-of-pure-ability for details");return this.h?a.filter(function(c){return c.matchesField(i)}):a},e.on=function(s,n){var i=this,a=this.v.get(s)||null,c=Xo(n,a);return this.v.set(s,c),function(){var o=i.v.get(s);!c.next&&!c.prev&&o===c?i.v.delete(s):c===o&&i.v.set(s,c.prev),zo(c)}},e.m=function(s,n){for(var i=this.v.get(s)||null;i!==null;){var a=i.prev?Yo(i.prev):null;i.value(n),i=a}},On(t,[{key:"rules",get:function(){return this.j}}]),t}(),Wo=function(t){Jr(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.can=function(n,i,a){var c=this.relevantRuleFor(n,i,a);return!!c&&!c.inverted},r.relevantRuleFor=function(n,i,a){for(var c=this.detectSubjectType(i),o=this.rulesFor(n,c,a),l=0,u=o.length;l<u;l++)if(o[l].matchesConditions(i))return o[l];return null},r.cannot=function(n,i,a){return!this.can(n,i,a)},e}(Vo),Jo={$eq:Kr,$ne:an,$lt:sn,$lte:nn,$gt:Bt,$gte:Hr,$in:Ut,$nin:en,$all:tn,$size:Zi,$regex:on,$options:cn,$elemMatch:Gi,$exists:rn},Go={eq:Qr,ne:pn,lt:mn,lte:yn,gt:gn,gte:vn,in:Pt,nin:An,all:Sn,size:xn,regex:wn,elemMatch:kn,exists:bn,and:hn},Zo=Wr(Jo,Go),ec=/[-/\\^$+?.()|[\]{}]/g,tc=/\.?\*+\.?/g,rc=/\*+/,sc=/\./g;function ic(t,e,r){var s=r[0]==="*"||t[0]==="."&&t[t.length-1]==="."?"+":"*",n=t.indexOf("**")===-1?"[^.]":".",i=t.replace(sc,"\\$&").replace(rc,n+s);return e+t.length===r.length?"(?:"+i+")?":i}function nc(t,e,r){return t==="."&&(r[e-1]==="*"||r[e+1]==="*")?t:"\\"+t}function ac(t){var e=t.map(function(s){return s.replace(ec,nc).replace(tc,ic)}),r=e.length>1?"(?:"+e.join("|")+")":e[0];return new RegExp("^"+r+"$")}var oc=function(e){var r;return function(s){return typeof r=="undefined"&&(r=e.every(function(n){return n.indexOf("*")===-1})?null:ac(e)),r===null?e.indexOf(s)!==-1:r.test(s)}},cc=function(t){Jr(e,t);function e(r,s){return r===void 0&&(r=[]),s===void 0&&(s={}),t.call(this,r,xr({conditionsMatcher:Zo,fieldMatcher:oc},s))||this}return e}(Wo),lc=function(e){return'Cannot execute "'+e.action+'" on "'+e.subjectType+'"'},Cn=function(e){this.message=e};Cn.prototype=Object.create(Error.prototype);var uc=function(t){Jr(e,t),e.setDefaultMessage=function(n){this._=typeof n=="string"?function(){return n}:n},e.from=function(n){return new this(n)};function e(s){var n;return n=t.call(this,"")||this,n.ability=s,typeof Error.captureStackTrace=="function"&&(n.name="ForbiddenError",Error.captureStackTrace(Lo(n),n.constructor)),n}var r=e.prototype;return r.setMessage=function(n){return this.message=n,this},r.throwUnlessCan=function(n,i,a){var c=this.unlessCan(n,i,a);if(c)throw c},r.unlessCan=function(n,i,a){var c=this.ability.relevantRuleFor(n,i,a);if(!(c&&!c.inverted)){this.action=n,this.subject=i,this.subjectType=Mo(this.ability.detectSubjectType(i)),this.field=a;var o=c?c.reason:"";return this.message=this.message||o||this.constructor._(this),this}},e}(Cn);uc._=lc;Object.freeze({__proto__:null});var kr=[{action:"read",subject:"auth"},{action:"read",subject:"open"}];const ke=new cc(kr),we=te("dataStore",{state:()=>({queryBy:"office",selectedOffice:null,selectedProject:null,selfCheckIns:{isLoading:!1},profiles:{isLoading:!1},scheduledInterviews:{isLoading:!1},inProcessInterviews:{isLoading:!1},inProcess:{isLoading:!1},pending:{isLoading:!1},deployments:{isLoading:!1},openRequest:{isLoading:!1},pendingRequest:{isLoading:!1},closedRequest:{isLoading:!1},openClassifications:{isLoading:!1},pendingClassifications:{isLoading:!1},closedClassifications:{isLoading:!1},nameRequest:{isLoading:!1},projects:{isLoading:!1},pendingProjects:{isLoading:!1},releases:{isLoading:!1},rosters:{isLoading:!1},jobPost:{isLoading:!1},onlineApplications:{isLoading:!1},requestedTimeStamps:{},forms:{isLoading:!1},conversations:[],conversationNotification:null,messageNotification:null}),getters:{getSelfCheckIns:t=>e=>{if(e)return t.selfCheckIns[e]?t.selfCheckIns[e]:[];{let r=[];return Object.keys(t.selfCheckIns).forEach(s=>{s!=="isLoading"&&(r=r.concat(t.selfCheckIns[s]))}),r}},getProfiles:t=>e=>{if(e)return t.profiles[e]?t.profiles[e]:[];{let r=[];return Object.keys(t.profiles).forEach(s=>{s!=="isLoading"&&(r=r.concat(t.profiles[s]))}),r}},getScheduledInterviews:t=>e=>{if(e)return t.scheduledInterviews[e]?t.scheduledInterviews[e]:[];{let r=[];return Object.keys(t.scheduledInterviews).forEach(s=>{s!=="isLoading"&&(r=r.concat(t.scheduledInterviews[s]))}),r}},getInProcessInterviews:t=>e=>{if(e)return t.inProcessInterviews[e]?t.inProcessInterviews[e]:[];{let r=[];return Object.keys(t.inProcessInterviews).forEach(s=>{s!=="isLoading"&&(r=r.concat(t.inProcessInterviews[s]))}),r}},getInProcess:t=>e=>{if(e)return t.inProcess[e]?t.inProcess[e]:[];{let r=[];return Object.keys(t.inProcess).forEach(s=>{s!=="isLoading"&&(r=r.concat(t.inProcess[s]))}),r}},getPending:t=>e=>{if(e)return t.pending[e]?t.pending[e]:[];{let r=[];return Object.keys(t.pending).forEach(s=>{s!=="isLoading"&&(r=r.concat(t.pending[s]))}),r}},getDeployments:t=>e=>{if(e)return t.deployments[e]?t.deployments[e]:[];{let r=[];return Object.keys(t.deployments).forEach(s=>{s!=="isLoading"&&(r=r.concat(t.deployments[s]))}),r}},getRoster:t=>e=>{if(e)return t.rosters[e]?t.rosters[e]:[];{let r=[];return Object.keys(t.rosters).forEach(s=>{s!=="isLoading"&&(r=r.concat(t.rosters[s]))}),r}},getProjects:t=>({selectedId:e,can:r,userType:s})=>{if(!e&&!r){let n=[];return Object.keys(t.projects).forEach(i=>{i!=="isLoading"&&(n=n.concat(t.projects[i]))}),n}else if(!e&&r&&s==="QuickBase User"){const{userOffices:n}=C();let i=[];return n(r).forEach(a=>{i=i.concat(t.projects[a[8]])}),i}else if(e&&r&&s==="QuickBase User"){const{getOffice:n}=C(),i=n(e);return r==="read"&&i&&i[39]!==!0?[]:(r==="create"||r==="update")&&i&&i[40]!==!0?[]:r==="manage"&&i&&i[41]!==!0?[]:t.projects[e]?t.projects[e]:[]}else if(!e&&r&&s==="Project User"){let n=[];return Object.keys(t.projects).forEach(i=>{i!=="isLoading"&&(n=n.concat(t.projects[i]))}),n}else return t.projects[e]?t.projects[e]:[]},getPendingProjects:t=>e=>{if(e)return t.pendingProjects[e]?t.pendingProjects[e]:[];{let r=[];return Object.keys(t.pendingProjects).forEach(s=>{s!=="isLoading"&&(r=r.concat(t.pendingProjects[s]))}),r}},getRequestedTimeStamps(t){return t.requestedTimeStamps},getSelectedOffice(t){return t.selectedOffice},getSelectedProject(t){return t.selectedProject},getReleases:t=>e=>{if(e)return t.releases[e]?t.releases[e]:[];{let r=[];return Object.keys(t.releases).forEach(s=>{s!=="isLoading"&&(r=r.concat(t.releases[s]))}),r}},getJobPost:t=>e=>{if(e)return t.jobPost[e]?t.jobPost[e]:[];{let r=[];return Object.keys(t.jobPost).forEach(s=>{s!=="isLoading"&&(r=r.concat(t.jobPost[s]))}),r}},getOnlineApplications:t=>e=>{if(e)return t.onlineApplications[e]?t.onlineApplications[e]:[];{let r=[];return Object.keys(t.onlineApplications).forEach(s=>{s!=="isLoading"&&(r=r.concat(t.onlineApplications[s]))}),r}},getLoadingState:t=>e=>t[`${e}`].isLoading||!1,getForms:t=>e=>{if(e)return t.forms[e]?t.forms[e]:[];{let r=[];return Object.keys(t.forms).forEach(s=>{s!=="isLoading"&&(r=r.concat(t.forms[s]))}),r}},getConversations(t){return this.selectedOffice?t.conversations.filter(e=>e.twilio_messaging_service.sid===this.selectedOffice[48]).sort((e,r)=>new Date(r.lastMessageDateTime)-new Date(e.lastMessageDateTime)):t.conversations.sort((e,r)=>new Date(r.lastMessageDateTime)-new Date(e.lastMessageDateTime))},getUnreadConversations(t){return t.conversations.filter(e=>e.unread===!0).length},getMessageNotification(t){return t.messageNotification}},actions:{setQueryBy(t){this.queryBy=t},setSelectedOffice(t,e){this.selectedOffice=t},setSelectedProject(t,e){this.selectedProject=t},setTimeStamp({name:t,timeStamp:e,selectedId:r},s){if(this.requestedTimeStamps[r]?this.requestedTimeStamps[r][t]=e:this.requestedTimeStamps[r]={[t]:e},s){const n=JSON.parse(JSON.stringify(this.requestedTimeStamps));L.setItem("requestedTimeStamps",n)}},setTimeStampState(t){this.requestedTimeStamps=t},async fetchSelfCheckIns(t){this.selfCheckIns.isLoading=!0;const e=this.getRequestedTimeStamps[t.selectedId]||{};let r=!0;const s=[{9:{value:t.selectedId},7:{value:"Self Check-Ins"}}];if(e.selfCheckIns&&(e.selfCheckIns.isBefore(h().subtract(1,"minute"))?r=!0:r=t.refresh?t.refresh:!1),r){this.setTimeStamp({selectedId:t.selectedId,name:"selfCheckIns",timeStamp:h()},!0);const{data:n}=await A.fetchFromRecruitingApp({fields:s});return this.setSelfCheckIns({selectedId:t.selectedId,data:n},!0),this.selfCheckIns.isLoading=!1,{data:n}}else return this.selfCheckIns.isLoading=!1,{data:[]}},async fetchAllSelfCheckIns(t){const{userOffices:e}=C(),r=[];return e(t?t.can:null).forEach(n=>{let i=this.fetchSelfCheckIns({...t,selectedId:n[8]});r.push(i)}),await Promise.allSettled(r)},setSelfCheckIns({selectedId:t,data:e},r){this.selfCheckIns[t]=e,r&&L.setItem(`selfCheckIns_${t}`,e)},async fetchProfiles(t){this.profiles.isLoading=!0;const e=this.getRequestedTimeStamps[t.selectedId]||{};let r=!0;const s=[{9:{value:t.selectedId},7:{value:"Employees"}}];if(e.profiles&&(e.profiles.isBefore(h().subtract(1,"minute"))?r=!0:r=t.refresh?t.refresh:!1),r){this.setTimeStamp({selectedId:t.selectedId,name:"profiles",timeStamp:h()},!0);const{data:n}=await A.fetchFromHiringApp({fields:s});return this.setProfiles({selectedId:t.selectedId,data:n},!0),this.profiles.isLoading=!1,{data:n}}else return this.profiles.isLoading=!1,{data:[]}},async fetchAllProfiles(t){const{userOffices:e}=C(),r=[];return e(t?t.can:null).forEach(n=>{let i=this.fetchProfiles({...t,selectedId:n[8]});r.push(i)}),await Promise.allSettled(r)},setProfiles({selectedId:t,data:e},r){this.profiles[t]=e,r&&L.setItem(`profiles_${t}`,e)},updateProfiles({selectedId:t,data:e},r){Se.createNotification({title:"profilesUpdated",type:"office-notification",task:null,officeId:t,details:e})},async fetchScheduledInterviews(t){this.scheduledInterviews.isLoading=!0;const e=this.getRequestedTimeStamps[t.selectedId]||{};let r=!0;const s=[{9:{value:t.selectedId},7:{value:"Scheduled Interviews"}}];if(e.scheduledInterviews&&(e.scheduledInterviews.isBefore(h().subtract(1,"minute"))?r=!0:r=t.refresh?t.refresh:!1),r){this.setTimeStamp({selectedId:t.selectedId,name:"scheduledInterviews",timeStamp:h()},!0);const{data:n}=await A.fetchFromHiringApp({fields:s});return this.setScheduledInterviews({selectedId:t.selectedId,data:n},!0),this.scheduledInterviews.isLoading=!1,{data:n}}else return this.scheduledInterviews.isLoading=!1,{data:[]}},async fetchAllScheduledInterviews(t){const{userOffices:e}=C(),r=[];return e(t?t.can:null).forEach(n=>{let i=this.fetchScheduledInterviews({...t,selectedId:n[8]});r.push(i)}),await Promise.allSettled(r)},setScheduledInterviews({selectedId:t,data:e},r){this.scheduledInterviews[t]=e,r&&L.setItem(`interviews_${t}`,e)},updateScheduledInterviews({selectedId:t,data:e}){Se.createNotification({title:"scheduledInterviewsUpdated",type:"office-notification",task:null,officeId:t,values:e})},async fetchInProcessInterviews(t){this.inProcessInterviews.isLoading=!0;const e=this.getRequestedTimeStamps[t.selectedId]||{};let r=!0;const s=[{9:{value:t.selectedId},7:{value:"In Process Interviews"}}];if(e.inProcessInterviews&&(e.inProcessInterviews.isBefore(h().subtract(1,"minute"))?r=!0:r=t.refresh?t.refresh:!1),r){this.setTimeStamp({selectedId:t.selectedId,name:"inProcessInterviews",timeStamp:h()},!0);const{data:n}=await A.fetchFromHiringApp({fields:s});return this.setInProcessInterviews({selectedId:t.selectedId,data:n},!0),this.inProcessInterviews.isLoading=!1,{data:n}}else return this.inProcessInterviews.isLoading=!1,{data:[]}},async fetchAllInProcessInterviews(t){const{userOffices:e}=C(),r=[];return e(t?t.can:null).forEach(n=>{let i=this.fetchInProcessInterviews({...t,selectedId:n[8]});r.push(i)}),await Promise.allSettled(r)},setInProcessInterviews({selectedId:t,data:e},r){this.inProcessInterviews[t]=e,r&&L.setItem(`interviews_${t}`,e)},updateInProcessInterviews({selectedId:t,data:e}){Se.createNotification({title:"activeInterviewsUpdated",type:"office-notification",task:null,officeId:t,values:e})},async fetchInProcess(t){this.inProcess.isLoading=!0;const e=this.getRequestedTimeStamps[t.selectedId]||{};let r=!0;const s=[{9:{value:t.selectedId},7:{value:"In Processes"}}];if(e.inProcess&&(e.inProcess.isBefore(h().subtract(1,"minute"))?r=!0:r=t.refresh?t.refresh:!1),r){this.setTimeStamp({selectedId:t.selectedId,name:"inProcess",timeStamp:h()},!0);const{data:n}=await A.fetchFromHiringApp({fields:s});return this.setInProcess({selectedId:t.selectedId,data:n},!0),this.inProcess.isLoading=!1,{data:n}}else return this.inProcess.isLoading=!1,{data:[]}},async fetchAllInProcess(t){const{userOffices:e}=C(),r=[];return e(t?t.can:null).forEach(n=>{let i=this.fetchInProcess({...t,selectedId:n[8]});r.push(i)}),await Promise.allSettled(r)},setInProcess({selectedId:t,data:e},r){this.inProcess[t]=e,r&&L.setItem(`inProcess_${t}`,e)},updateInProcess({selectedId:t,data:e}){Se.createNotification({title:"inProcessUpdated",type:"office-notification",task:null,officeId:t,values:e})},async fetchPending(t){this.pending.isLoading=!0;const e=this.getRequestedTimeStamps[t.selectedId]||{};let r=!0;const s=[{9:{value:t.selectedId},7:{value:"Dispatches"}}];if(e.pending&&(e.pending.isBefore(h().subtract(1,"minute"))?r=!0:r=t.refresh?t.refresh:!1),r){this.setTimeStamp({selectedId:t.selectedId,name:"pending",timeStamp:h()},!0);const{data:n}=await A.fetchFromHiringApp({fields:s});return this.setPending({selectedId:t.selectedId,data:n},!0),this.pending.isLoading=!1,{data:n}}else return this.pending.isLoading=!1,{data:[]}},async fetchAllPending(t){const{userOffices:e}=C(),r=[];return e(t?t.can:null).forEach(n=>{let i=this.fetchPending({...t,selectedId:n[8]});r.push(i)}),await Promise.allSettled(r)},setPending({selectedId:t,data:e},r){this.pending[t]=e,r&&L.setItem(`pending_${t}`,e)},updatePending({selectedId:t,data:e}){Se.createNotification({title:"pendingUpdated",type:"office-notification",task:null,officeId:t,values:e})},async fetchOpenRequest(t){this.openRequest.isLoading=!0;const e=this.getRequestedTimeStamps[t.selectedId]||{};let r=!0;const s=[{9:{value:t.selectedId},7:{value:"Open Request"}}];if(e.openRequest&&(e.openRequest.isBefore(h().subtract(1,"minute"))?r=!0:r=t.refresh?t.refresh:!1),r){this.setTimeStamp({selectedId:t.selectedId,name:"openRequest",timeStamp:h()},!0);const{data:n}=await A.fetchFromProjectsApp({fields:s});return this.setOpenRequest({selectedId:t.selectedId,data:n},!0),this.openRequest.isLoading=!1,{data:n}}else return this.openRequest.isLoading=!1,{data:[]}},async fetchAllOpenRequest(t){const{userOffices:e}=C(),r=[];return e(t?t.can:null).forEach(n=>{let i=this.fetchOpenRequest({...t,selectedId:n[8]});r.push(i)}),await Promise.allSettled(r)},setOpenRequest({selectedId:t,data:e},r){this.openRequest[t]=e,r&&L.setItem(`openRequest_${t}`,e)},async fetchPendingRequest(t){this.pendingRequest.isLoading=!0;const e=this.getRequestedTimeStamps[t.selectedId]||{};let r=!0;const s=[{9:{value:t.selectedId},7:{value:"Pending Request"}}];if(e.pendingRequest&&(e.pendingRequest.isBefore(h().subtract(1,"minute"))?r=!0:r=t.refresh?t.refresh:!1),r){this.setTimeStamp({selectedId:t.selectedId,name:"pendingRequest",timeStamp:h()},!0);const{data:n}=await A.fetchFromProjectsApp({fields:s});return this.setPendingRequest({selectedId:t.selectedId,data:n},!0),this.pendingRequest.isLoading=!1,{data:n}}else return this.pendingRequest.isLoading=!1,{data:[]}},async fetchAllPendingRequest(t){const{userOffices:e}=C(),r=[];return e(t?t.can:null).forEach(n=>{let i=this.fetchPendingRequest({...t,selectedId:n[8]});r.push(i)}),await Promise.allSettled(r)},setPendingRequest({selectedId:t,data:e},r){this.pendingRequest[t]=e,r&&L.setItem(`pendingRequest_${t}`,e)},async fetchProjects(t){const{getOffice:e,getUserType:r}=C();this.projects.isLoading=!0;const s=this.getRequestedTimeStamps[t.selectedId]||{};let n=!0,i=1;if(t&&t.can&&r==="QuickBase User"){const c=e(t.selectedId);if(t.can==="read"&&c&&c[39]!==!0)return{data:[]};if((t.can==="create"||t.can==="update")&&c&&c[40]!==!0)return{data:[]};if(t.can==="manage"&&c&&c[41]!==!0)return{data:[]}}t.extendTime&&(i=t.extendTime);const a=[];if(r==="QuickBase User")a.push({9:{value:t.selectedId},7:{value:"Projects"}});else if(r==="Project User"){let c="";t.projects&&(c+=t.projects.map((o,l)=>`{'3'.EX.'${o}'}OR`).join("")),t.facilities&&(c+=t.facilities.map((o,l)=>`{'8'.EX.'${o}'}OR`).join("")),a.push({9:{value:t.selectedId},7:{value:"Projects"},8:{value:`{'77'.EX.'17'}AND{'21'.EX.'Complete'}AND${c?"("+c+")":""}`.replace("OR)",")")}})}if(s.projects&&(s.projects.isBefore(h().subtract(i,"minute"))?n=!0:n=t.refresh?t.refresh:!1),n){this.setTimeStamp({selectedId:t.selectedId,name:"projects",timeStamp:h()},!0);const{data:c}=await A.fetchFromProjectsApp({fields:a});return this.setProjects({selectedId:t.selectedId,data:c},!0),this.projects.isLoading=!1,{data:c}}else return this.projects.isLoading=!1,{data:[]}},async fetchAllProjects(t){const{userOffices:e,userProjects:r,getUser:s,getUserType:n,userFacilities:i}=C();if(n==="Project User"){const a=[],c=[],o=[];return r(t?t.can:null).forEach(u=>{a.push(u[9])}),i(t?t.can:null).forEach(u=>{c.push(u[31])}),(a.length>0||c.length>0)&&o.push(this.fetchProjects({...t,selectedId:s[3],projects:a,facilities:c})),await Promise.allSettled(o)}else if(n==="QuickBase User"){const a=[];return e(t?t.can:null).forEach(o=>{let l=this.fetchProjects({...t,selectedId:o[8]});a.push(l)}),await Promise.allSettled(a)}},setProjects({selectedId:t,data:e},r){t&&e&&(this.projects[t]=e),r&&t&&L.setItem(`projects_${t}`,e)},async fetchPendingProjects(t){this.pendingProjects.isLoading=!0;const e=this.getRequestedTimeStamps[t.selectedId]||{};let r=!0;const s=[{9:{value:t.selectedId},7:{value:"Pending Projects"}}];if(e.pendingProjects&&(e.pendingProjects.isBefore(h().subtract(1,"minute"))?r=!0:r=t.refresh?t.refresh:!1),r){this.setTimeStamp({selectedId:t.selectedId,name:"pendingProjects",timeStamp:h()},!0);const{data:n}=await A.fetchFromProjectsApp({fields:s});return this.setPendingProjects({selectedId:t.selectedId,data:n},!0),this.pendingProjects.isLoading=!1,{data:n}}else return this.pendingProjects.isLoading=!1,{data:[]}},async fetchAllPendingProjects(t){const{userOffices:e}=C(),r=[];return e(t?t.can:null).forEach(n=>{let i=this.fetchPendingProjects({...t,selectedId:n[8]});r.push(i)}),await Promise.allSettled(r)},setPendingProjects({selectedId:t,data:e},r){this.pendingProjects[t]=e,r&&L.setItem(`pendingProjects_${t}`,e)},async fetchDeployments(t){this.deployments.isLoading=!0;const e=this.getRequestedTimeStamps[t.selectedId]||{};let r=!0;const s=[{9:{value:t.selectedId},7:{value:"Deployments"}}];if(e.deployments&&(e.deployments.isBefore(h().subtract(1,"minute"))?r=!0:r=t.refresh?t.refresh:!1),r){this.setTimeStamp({selectedId:t.selectedId,name:"deployments",timeStamp:h()},!0);const{data:n}=await A.fetchFromHiringApp({fields:s});return this.setDeployments({selectedId:t.selectedId,data:n},!0),this.deployments.isLoading=!1,{data:n}}else return this.deployments.isLoading=!1,{data:[]}},async fetchAllDeployments(t){const{userOffices:e}=C(),r=[];return e(t?t.can:null).forEach(n=>{let i=this.fetchDeployments({...t,selectedId:n[8]});r.push(i)}),await Promise.allSettled(r)},setDeployments({selectedId:t,data:e},r){this.deployments[t]=e,r&&L.setItem(`deployments_${t}`,e)},updateDeployments({selectedId:t,data:e}){Se.createNotification({title:"deploymentsUpdated",type:"office-notification",task:null,officeId:t,values:e})},async fetchReleases(t){this.releases.isLoading=!0;const e=this.getRequestedTimeStamps[t.selectedId]||{};let r=!0;const s=[{9:{value:t.selectedId},7:{value:"Releases"}}];if(e.releases&&(e.releases.isBefore(h().subtract(1,"minute"))?r=!0:r=t.refresh?t.refresh:!1),r){this.setTimeStamp({selectedId:t.selectedId,name:"releases",timeStamp:h()},!0);const{data:n}=await A.fetchFromHiringApp({fields:s});return this.setReleases({selectedId:t.selectedId,data:n},!0),this.releases.isLoading=!1,{data:n}}else return this.releases.isLoading=!1,{data:[]}},async fetchAllReleases(t){const{userOffices:e}=C(),r=[];return e(t?t.can:null).forEach(n=>{let i=this.fetchReleases({...t,selectedId:n[8]});r.push(i)}),await Promise.allSettled(r)},setReleases({selectedId:t,data:e},r){this.releases[t]=e,r&&L.setItem(`releases_${t}`,e)},updateReleases({selectedId:t,data:e}){Se.createNotification({title:"releasesUpdated",type:"office-notification",task:null,officeId:t,values:e})},async fetchJobPost(t){this.jobPost.isLoading=!0;const e=this.getRequestedTimeStamps[t.selectedId]||{};let r=!0;const s=[{9:{value:t.selectedId},7:{value:"Job Post"}}];if(e.jobPost&&(e.jobPost.isBefore(h().subtract(1,"minute"))?r=!0:r=t.refresh?t.refresh:!1),r){this.setTimeStamp({selectedId:t.selectedId,name:"jobPost",timeStamp:h()},!0);const{data:n}=await A.fetchFromRecruitingApp({fields:s});return this.setJobPost({selectedId:t.selectedId,data:n},!0),this.jobPost.isLoading=!1,{data:n}}else return this.jobPost.isLoading=!1,{data:[]}},async fetchAllJobPost(t){const{userOffices:e}=C(),r=[];return e(t?t.can:null).forEach(n=>{let i=this.fetchJobPost({...t,selectedId:n[8]});r.push(i)}),await Promise.allSettled(r)},setJobPost({selectedId:t,data:e},r){this.jobPost[t]=e,r&&L.setItem(`jobPost_${t}`,e)},async fetchOnlineApplications(t){this.onlineApplications.isLoading=!0;const e=this.getRequestedTimeStamps[t.selectedId]||{};let r=!0;const s=[{9:{value:t.selectedId},7:{value:"Online Applications 30 Days"}}];if(e.onlineApplications&&(e.onlineApplications.isBefore(h().subtract(1,"minute"))?r=!0:r=t.refresh?t.refresh:!1),r){this.setTimeStamp({selectedId:t.selectedId,name:"onlineApplications",timeStamp:h()},!0);const{data:n}=await A.fetchFromRecruitingApp({fields:s});return this.setOnlineApplications({selectedId:t.selectedId,data:n},!0),this.onlineApplications.isLoading=!1,{data:n}}else return this.onlineApplications.isLoading=!1,{data:[]}},async fetchAllOnlineApplications(t){const{userOffices:e}=C(),r=[];return e(t?t.can:null).forEach(n=>{let i=this.fetchOnlineApplications({...t,selectedId:n[8]});r.push(i)}),await Promise.allSettled(r)},setOnlineApplications({selectedId:t,data:e},r){this.onlineApplications[t]=e,r&&L.setItem(`onlineApplications_${t}`,e)},async fetchForms(t){this.forms.isLoading=!0;const e=this.getRequestedTimeStamps[t.selectedId]||{};let r=!0;const s=[{9:{value:t.selectedId},7:{value:"Forms"}}];if(e.forms&&(e.forms.isBefore(h().subtract(1,"minute"))?r=!0:r=t.refresh?t.refresh:!1),r){this.setTimeStamp({selectedId:t.selectedId,name:"forms",timeStamp:h()},!0);const{data:n}=await A.fetchFromStructureApp({fields:s});return this.setForms({selectedId:t.selectedId,data:n},!0),this.forms.isLoading=!1,{data:n}}else return this.forms.isLoading=!1,{data:[]}},async fetchAllForms(t){const{userOffices:e}=C(),r=[];return e(t?t.can:null).forEach(n=>{let i=this.fetchForms({...t,selectedId:n[8]});r.push(i)}),await Promise.allSettled(r)},setForms({selectedId:t,data:e},r){this.forms[t]=e,r&&L.setItem(`forms_${t}`,e)},async fetchRoster(t){const{getOffice:e,getUserType:r}=C();this.projects.isLoading=!0;const s=this.getRequestedTimeStamps[t.selectedId]||{};let n=!0,i=1;if(t&&t.can&&r==="QuickBase User"){const c=e(t.selectedId);if(t.can==="read"&&c&&c[39]!==!0)return{data:[]};if((t.can==="create"||t.can==="update")&&c&&c[40]!==!0)return{data:[]};if(t.can==="manage"&&c&&c[41]!==!0)return{data:[]}}t.extendTime&&(i=t.extendTime);const a=[];if(r==="QuickBase User")a.push({9:{value:t.selectedId},7:{value:"Projects"}});else if(r==="Project User"){let c="";t.projects&&(c+=t.projects.map((o,l)=>`{'3'.EX.'${o}'}OR`).join("")),t.facilities&&(c+=t.facilities.map((o,l)=>`{'8'.EX.'${o}'}OR`).join("")),a.push({9:{value:t.selectedId},7:{value:"Projects"},8:{value:`{'77'.EX.'17'}AND{'21'.EX.'Complete'}AND${c?"("+c+")":""}`.replace("OR)",")")}})}if(s.projects&&(s.projects.isBefore(h().subtract(i,"minute"))?n=!0:n=t.refresh?t.refresh:!1),n){this.setTimeStamp({selectedId:t.selectedId,name:"projects",timeStamp:h()},!0);const{data:c}=await A.fetchFromProjectsApp({fields:a});return this.setProjects({selectedId:t.selectedId,data:c},!0),this.projects.isLoading=!1,{data:c}}else return this.projects.isLoading=!1,{data:[]}},async fetchAllRosters(t){const{userOffices:e,userProjects:r,getUser:s,getUserType:n,userFacilities:i}=C();if(n==="Project User"){const a=[],c=[],o=[];return r(t?t.can:null).forEach(u=>{a.push(u[9])}),i(t?t.can:null).forEach(u=>{c.push(u[31])}),(a.length>0||c.length>0)&&o.push(this.fetchRoster({...t,selectedId:s[3],projects:a,facilities:c})),await Promise.allSettled(o)}else if(n==="QuickBase User"){const a=[];return e(t?t.can:null).forEach(o=>{let l=this.fetchRoster({...t,selectedId:o[8]});a.push(l)}),await Promise.allSettled(a)}},setRosters({selectedId:t,data:e},r){t&&e&&(this.rosters[t]=e),r&&t&&L.setItem(`rosters_${t}`,e)},async fetchConversations(t,e){return He.getConversations({pagination:{page:t,pageSize:e},sort:"lastMessageDateTime:desc",populate:{contact:!0}}).then(r=>{const s=r.data.length===0||r.data.length<e;return(!s||r.data.length>0)&&this.setConversations({data:r.data},!0),s})},setConversations({data:t},e){const r=[...t,...this.conversations].sort((i,a)=>new Date(a.lastMessageDateTime)-new Date(i.lastMessageDateTime)),s=[],n=new Map;for(const i of r)n.has(i.id)||(n.set(i.id,!0),s.push(i));this.conversations=s,e&&L.setItem("conversations",JSON.parse(JSON.stringify(s)))},setConversation({data:t}){const e=this.conversations.findIndex(r=>r.id===t.id);e&&(this.conversations[e].contacts=t.contacts,this.conversations[e].name=t.name)},setConversationNotification(t){this.conversationNotification=t;const e=t.data||t;if(t.action==="create")this.conversations.unshift(e);else{e.unread===void 0&&e.lastMessage.direction==="outbound-api"&&(e.unread=!1);const r=this.conversations.find(s=>s.id===e.id);r&&(r.lastMessage=e.lastMessage,r.name=e.name,r.lastMessageDateTime=e.lastMessageDateTime,r.readBy=e.readBy||[],r.unread=e.unread,r.updatedAt=e.updatedAt)}},setMessageNotification(t){this.messageNotification=t}}}),C=te("user",{state:()=>({user:{},access:[],permissions:[],notifications:[],feathersNotification:null,strapiUser:{},automationUser:{6:"robert.bel@elitehcms.com",32:"System Automation",35:"CEM",37:"Automation",67:"CEM Automation"}}),getters:{getAutomationUser:t=>t.automationUser,getUser:t=>t.user,getUserType:t=>t.user[32],userData:t=>t.user,fullName:t=>`${t.user[35]}${t.user[36]!==""?` ${t.user[36]} `:" "}${t.user[37]}`,userLoggedIn:t=>!!t.user[3],userAccess:t=>t.access,employeeLinkRequired:t=>t.user[84]===!0&&(t.user[85]===!0||t.user[82]===!1||t.user[82]===!0&&(t.user[80]===""||!t.user[80])),verifyRequired:t=>(t.user[32]==="Candidate"||t.user[32]==="Employee"||t.user[32]==="Project User")&&!t.user.verified,phoneNumberRequired:t=>t.user[111]||t.user[8]==="",emailRequired:t=>t.user[112]||t.user[6]==="",passwordRequired:t=>t.user[17]||t.user[7]==="",employeeLinked:t=>t.user[82],employeeProfileRID:t=>t.user[80],createEmployeeProfile:t=>t.user[85],userPermissions:t=>t.permissions,primaryOffice:t=>t.access.find(e=>e[15]===!0&&e[7]==="Office")||null,userOffices:t=>e=>t.access.filter(r=>e?e==="read"?r[7]==="Office"&&(r[39]===!0||r[41]===!0):e==="create"||e==="update"?r[7]==="Office"&&(r[40]===!0||r[41]===!0):e==="manage"?r[7]==="Office"&&r[41]===!0:!1:r[7]==="Office"),userOfficesRead:t=>t.access.filter(e=>e[7]==="Office"&&e[39]===!0),userOfficesCreate:t=>t.access.filter(e=>e[7]==="Office"&&e[40]===!0),userOfficesManage:t=>t.access.filter(e=>e[7]==="Office"&&e[41]===!0),primaryProject:t=>t.access.find(e=>e[15]===!0&&e[7]==="Project")||null,userProjects:t=>e=>t.access.filter(r=>e?e==="read"?r[7]==="Project"&&(r[39]===!0||r[41]===!0):e==="create"||e==="update"?r[7]==="Project"&&(r[40]===!0||r[41]===!0):e==="manage"?r[7]==="Project"&&r[41]===!0:!1:r[7]==="Project"),userFacilities:t=>e=>t.access.filter(r=>e?e==="read"?r[7]==="Facility"&&(r[39]===!0||r[41]===!0):e==="create"||e==="update"?r[7]==="Facility"&&(r[40]===!0||r[41]===!0):e==="manage"?r[7]==="Facility"&&r[41]===!0:!1:r[7]==="Project"),getOffice:t=>e=>e?t.access.find(r=>r[7]==="Office"&&r[8]===e):null},actions:{async fetchUser(t){const e=`{'10'.EX.'Active'}${t.rid?`AND{'3'.EX.'${t.rid}'}`:""}${t.email?`AND{'6'.EX.'${t.email}'}`:""}${t.phoneNumber?`AND{'8'.EX.'${t.phoneNumber}'}`:""}${t.userType?`AND{'32'.EX.'${t.userType}'}`:""}`,r=[{7:{value:"User Clean"},8:{value:e},9:{value:t.rid?t.rid:1},14:{value:76}}],s=await A.fetchFromStructureApp({fields:r}),{user:n,access:i,permissions:a}=s.data;return this.setUser(n,!0),this.setAccess(i,!0),this.setPermissions(a,!0),s},async updateUserData({fields:t}){if(!t)throw"No Fields Provided";t[3]===void 0&&Object.assign(t,{3:{value:this.userData[3]}});const{data:e,metadata:r}=await A.upsertRecordsXML({to:"br4pxrbs6",fieldsToReturn:[3,76],data:[t],formatObject:76});if(r.lineErrors)throw{lineErrors:r.lineErrors[1],error:r.lineErrors};const s=e[0][76],n=Object.assign({},s);return delete n.access,delete n.permissions,this.setUser(n,!0),s},setUser(t,e){const{setQueryBy:r}=we();this.user=t,t[32]==="QuickBase User"?r("office"):t[32]==="Project User"&&r("project"),e&&w.setItem(O.storageUserKeyName,t)},setStrapiUser(t,e){this.strapiUser=t,e&&w.setItem(O.storageStrapiUserKeyName,t)},setPhoneNumberVerified(t){this.user[50]=t},setVerified(t){this.user.verified=t},setPhoneNumber(t){this.user[8]=t,this.user[111]=!0},setEmail(t){this.user[6]=t,this.user[112]=!0},setIdentityVerified(t){typeof t=="number"?this.user[80]=t:this.user[85]=t},setAccess(t,e){this.access=t,e&&w.setItem(O.storageAccessKeyName,t)},setPermissions(t,e){for(let s=0;s<t.length;s++)if(t[s].conditions){if(t[s].conditions.deny&&!Array.isArray(t[s].conditions.deny)){let n=t[s].conditions.deny.split(",");n.forEach(i=>{i=i.trim()}),t[s].conditions.deny=n;continue}if(t[s].conditions.accept&&!Array.isArray(t[s].conditions.accept)){let n=t[s].conditions.accept.split(",");n.forEach(i=>{i=i.trim()}),t[s].conditions.accept=n;continue}}const r=t.concat(kr);ke.update(r),this.permissions=r,e&&w.setItem(O.storagePermissionsKeyName,t)},setFeathersNotification(t){this.feathersNotification=t},async logout(){return await A.logout(),ke.update(kr)}}});var fc=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),s=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(s)!=="[object Symbol]")return!1;var n=42;e[r]=n;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var i=Object.getOwnPropertySymbols(e);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,r);if(a.value!==n||a.enumerable!==!0)return!1}return!0},Cs=typeof Symbol!="undefined"&&Symbol,dc=fc,hc=function(){return typeof Cs!="function"||typeof Symbol!="function"||typeof Cs("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:dc()},Rs={foo:{}},pc=Object,yc=function(){return{__proto__:Rs}.foo===Rs.foo&&!({__proto__:null}instanceof pc)},mc="Function.prototype.bind called on incompatible ",Jt=Array.prototype.slice,gc=Object.prototype.toString,vc="[object Function]",bc=function(e){var r=this;if(typeof r!="function"||gc.call(r)!==vc)throw new TypeError(mc+r);for(var s=Jt.call(arguments,1),n,i=function(){if(this instanceof n){var u=r.apply(this,s.concat(Jt.call(arguments)));return Object(u)===u?u:this}else return r.apply(e,s.concat(Jt.call(arguments)))},a=Math.max(0,r.length-s.length),c=[],o=0;o<a;o++)c.push("$"+o);if(n=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var l=function(){};l.prototype=r.prototype,n.prototype=new l,l.prototype=null}return n},xc=bc,Gr=Function.prototype.bind||xc,wc=Gr,Ac=wc.call(Function.call,Object.prototype.hasOwnProperty),P,Ke=SyntaxError,Rn=Function,Be=TypeError,Gt=function(t){try{return Rn('"use strict"; return ('+t+").constructor;")()}catch{}},je=Object.getOwnPropertyDescriptor;if(je)try{je({},"")}catch{je=null}var Zt=function(){throw new Be},Sc=je?function(){try{return arguments.callee,Zt}catch{try{return je(arguments,"callee").get}catch{return Zt}}}():Zt,Le=hc(),kc=yc(),Y=Object.getPrototypeOf||(kc?function(t){return t.__proto__}:null),Me={},Oc=typeof Uint8Array=="undefined"||!Y?P:Y(Uint8Array),Ne={"%AggregateError%":typeof AggregateError=="undefined"?P:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?P:ArrayBuffer,"%ArrayIteratorPrototype%":Le&&Y?Y([][Symbol.iterator]()):P,"%AsyncFromSyncIteratorPrototype%":P,"%AsyncFunction%":Me,"%AsyncGenerator%":Me,"%AsyncGeneratorFunction%":Me,"%AsyncIteratorPrototype%":Me,"%Atomics%":typeof Atomics=="undefined"?P:Atomics,"%BigInt%":typeof BigInt=="undefined"?P:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?P:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?P:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?P:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?P:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?P:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?P:FinalizationRegistry,"%Function%":Rn,"%GeneratorFunction%":Me,"%Int8Array%":typeof Int8Array=="undefined"?P:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?P:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?P:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Le&&Y?Y(Y([][Symbol.iterator]())):P,"%JSON%":typeof JSON=="object"?JSON:P,"%Map%":typeof Map=="undefined"?P:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!Le||!Y?P:Y(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?P:Promise,"%Proxy%":typeof Proxy=="undefined"?P:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?P:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?P:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!Le||!Y?P:Y(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?P:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Le&&Y?Y(""[Symbol.iterator]()):P,"%Symbol%":Le?Symbol:P,"%SyntaxError%":Ke,"%ThrowTypeError%":Sc,"%TypedArray%":Oc,"%TypeError%":Be,"%Uint8Array%":typeof Uint8Array=="undefined"?P:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?P:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?P:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?P:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?P:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?P:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?P:WeakSet};if(Y)try{null.error}catch(t){var Ic=Y(Y(t));Ne["%Error.prototype%"]=Ic}var Tc=function t(e){var r;if(e==="%AsyncFunction%")r=Gt("async function () {}");else if(e==="%GeneratorFunction%")r=Gt("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=Gt("async function* () {}");else if(e==="%AsyncGenerator%"){var s=t("%AsyncGeneratorFunction%");s&&(r=s.prototype)}else if(e==="%AsyncIteratorPrototype%"){var n=t("%AsyncGenerator%");n&&Y&&(r=Y(n.prototype))}return Ne[e]=r,r},$s={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},pt=Gr,Et=Ac,Cc=pt.call(Function.call,Array.prototype.concat),Rc=pt.call(Function.apply,Array.prototype.splice),Ps=pt.call(Function.call,String.prototype.replace),Dt=pt.call(Function.call,String.prototype.slice),$c=pt.call(Function.call,RegExp.prototype.exec),Pc=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ec=/\\(\\)?/g,Dc=function(e){var r=Dt(e,0,1),s=Dt(e,-1);if(r==="%"&&s!=="%")throw new Ke("invalid intrinsic syntax, expected closing `%`");if(s==="%"&&r!=="%")throw new Ke("invalid intrinsic syntax, expected opening `%`");var n=[];return Ps(e,Pc,function(i,a,c,o){n[n.length]=c?Ps(o,Ec,"$1"):a||i}),n},jc=function(e,r){var s=e,n;if(Et($s,s)&&(n=$s[s],s="%"+n[0]+"%"),Et(Ne,s)){var i=Ne[s];if(i===Me&&(i=Tc(s)),typeof i=="undefined"&&!r)throw new Be("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:s,value:i}}throw new Ke("intrinsic "+e+" does not exist!")},Zr=function(e,r){if(typeof e!="string"||e.length===0)throw new Be("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Be('"allowMissing" argument must be a boolean');if($c(/^%?[^%]*%?$/,e)===null)throw new Ke("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var s=Dc(e),n=s.length>0?s[0]:"",i=jc("%"+n+"%",r),a=i.name,c=i.value,o=!1,l=i.alias;l&&(n=l[0],Rc(s,Cc([0,1],l)));for(var u=1,m=!0;u<s.length;u+=1){var g=s[u],x=Dt(g,0,1),k=Dt(g,-1);if((x==='"'||x==="'"||x==="`"||k==='"'||k==="'"||k==="`")&&x!==k)throw new Ke("property names with quotes must have matching quotes");if((g==="constructor"||!m)&&(o=!0),n+="."+g,a="%"+n+"%",Et(Ne,a))c=Ne[a];else if(c!=null){if(!(g in c)){if(!r)throw new Be("base intrinsic for "+e+" exists, but the property is not available.");return}if(je&&u+1>=s.length){var T=je(c,g);m=!!T,m&&"get"in T&&!("originalValue"in T.get)?c=T.get:c=c[g]}else m=Et(c,g),c=c[g];m&&!o&&(Ne[a]=c)}}return c},$n={exports:{}};(function(t){var e=Gr,r=Zr,s=r("%Function.prototype.apply%"),n=r("%Function.prototype.call%"),i=r("%Reflect.apply%",!0)||e.call(n,s),a=r("%Object.getOwnPropertyDescriptor%",!0),c=r("%Object.defineProperty%",!0),o=r("%Math.max%");if(c)try{c({},"a",{value:1})}catch{c=null}t.exports=function(m){var g=i(e,n,arguments);if(a&&c){var x=a(g,"length");x.configurable&&c(g,"length",{value:1+o(0,m.length-(arguments.length-1))})}return g};var l=function(){return i(e,s,arguments)};c?c(t.exports,"apply",{value:l}):t.exports.apply=l})($n);var Pn=Zr,En=$n.exports,Nc=En(Pn("String.prototype.indexOf")),Fc=function(e,r){var s=Pn(e,!!r);return typeof s=="function"&&Nc(e,".prototype.")>-1?En(s):s},_c={},qc=Object.freeze(Object.defineProperty({__proto__:null,default:_c},Symbol.toStringTag,{value:"Module"})),Lc=Ia(qc),es=typeof Map=="function"&&Map.prototype,er=Object.getOwnPropertyDescriptor&&es?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,jt=es&&er&&typeof er.get=="function"?er.get:null,Es=es&&Map.prototype.forEach,ts=typeof Set=="function"&&Set.prototype,tr=Object.getOwnPropertyDescriptor&&ts?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Nt=ts&&tr&&typeof tr.get=="function"?tr.get:null,Ds=ts&&Set.prototype.forEach,Mc=typeof WeakMap=="function"&&WeakMap.prototype,ut=Mc?WeakMap.prototype.has:null,Uc=typeof WeakSet=="function"&&WeakSet.prototype,ft=Uc?WeakSet.prototype.has:null,Bc=typeof WeakRef=="function"&&WeakRef.prototype,js=Bc?WeakRef.prototype.deref:null,Hc=Boolean.prototype.valueOf,Kc=Object.prototype.toString,Xc=Function.prototype.toString,zc=String.prototype.match,rs=String.prototype.slice,Re=String.prototype.replace,Yc=String.prototype.toUpperCase,Ns=String.prototype.toLowerCase,Dn=RegExp.prototype.test,Fs=Array.prototype.concat,ye=Array.prototype.join,Qc=Array.prototype.slice,_s=Math.floor,Or=typeof BigInt=="function"?BigInt.prototype.valueOf:null,rr=Object.getOwnPropertySymbols,Ir=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Xe=typeof Symbol=="function"&&typeof Symbol.iterator=="object",J=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Xe?"object":"symbol")?Symbol.toStringTag:null,jn=Object.prototype.propertyIsEnumerable,qs=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function Ls(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||Dn.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var s=t<0?-_s(-t):_s(t);if(s!==t){var n=String(s),i=rs.call(e,n.length+1);return Re.call(n,r,"$&_")+"."+Re.call(Re.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Re.call(e,r,"$&_")}var Tr=Lc,Ms=Tr.custom,Us=Fn(Ms)?Ms:null,Vc=function t(e,r,s,n){var i=r||{};if(Oe(i,"quoteStyle")&&i.quoteStyle!=="single"&&i.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Oe(i,"maxStringLength")&&(typeof i.maxStringLength=="number"?i.maxStringLength<0&&i.maxStringLength!==1/0:i.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=Oe(i,"customInspect")?i.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Oe(i,"indent")&&i.indent!==null&&i.indent!=="	"&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Oe(i,"numericSeparator")&&typeof i.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var c=i.numericSeparator;if(typeof e=="undefined")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return qn(e,i);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var o=String(e);return c?Ls(e,o):o}if(typeof e=="bigint"){var l=String(e)+"n";return c?Ls(e,l):l}var u=typeof i.depth=="undefined"?5:i.depth;if(typeof s=="undefined"&&(s=0),s>=u&&u>0&&typeof e=="object")return Cr(e)?"[Array]":"[Object]";var m=hl(i,s);if(typeof n=="undefined")n=[];else if(_n(n,e)>=0)return"[Circular]";function g(p,f,d){if(f&&(n=Qc.call(n),n.push(f)),d){var b={depth:i.depth};return Oe(i,"quoteStyle")&&(b.quoteStyle=i.quoteStyle),t(p,b,s+1,n)}return t(p,i,s+1,n)}if(typeof e=="function"&&!Bs(e)){var x=il(e),k=bt(e,g);return"[Function"+(x?": "+x:" (anonymous)")+"]"+(k.length>0?" { "+ye.call(k,", ")+" }":"")}if(Fn(e)){var T=Xe?Re.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Ir.call(e);return typeof e=="object"&&!Xe?st(T):T}if(ul(e)){for(var j="<"+Ns.call(String(e.nodeName)),R=e.attributes||[],re=0;re<R.length;re++)j+=" "+R[re].name+"="+Nn(Wc(R[re].value),"double",i);return j+=">",e.childNodes&&e.childNodes.length&&(j+="..."),j+="</"+Ns.call(String(e.nodeName))+">",j}if(Cr(e)){if(e.length===0)return"[]";var ie=bt(e,g);return m&&!dl(ie)?"["+Rr(ie,m)+"]":"[ "+ye.call(ie,", ")+" ]"}if(Gc(e)){var ve=bt(e,g);return!("cause"in Error.prototype)&&"cause"in e&&!jn.call(e,"cause")?"{ ["+String(e)+"] "+ye.call(Fs.call("[cause]: "+g(e.cause),ve),", ")+" }":ve.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+ye.call(ve,", ")+" }"}if(typeof e=="object"&&a){if(Us&&typeof e[Us]=="function"&&Tr)return Tr(e,{depth:u-s});if(a!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(nl(e)){var ne=[];return Es&&Es.call(e,function(p,f){ne.push(g(f,e,!0)+" => "+g(p,e))}),Hs("Map",jt.call(e),ne,m)}if(cl(e)){var ae=[];return Ds&&Ds.call(e,function(p){ae.push(g(p,e))}),Hs("Set",Nt.call(e),ae,m)}if(al(e))return sr("WeakMap");if(ll(e))return sr("WeakSet");if(ol(e))return sr("WeakRef");if(el(e))return st(g(Number(e)));if(rl(e))return st(g(Or.call(e)));if(tl(e))return st(Hc.call(e));if(Zc(e))return st(g(String(e)));if(!Jc(e)&&!Bs(e)){var ue=bt(e,g),fe=qs?qs(e)===Object.prototype:e instanceof Object||e.constructor===Object,be=e instanceof Object?"":"null prototype",de=!fe&&J&&Object(e)===e&&J in e?rs.call(Ee(e),8,-1):be?"Object":"",v=fe||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",y=v+(de||be?"["+ye.call(Fs.call([],de||[],be||[]),": ")+"] ":"");return ue.length===0?y+"{}":m?y+"{"+Rr(ue,m)+"}":y+"{ "+ye.call(ue,", ")+" }"}return String(e)};function Nn(t,e,r){var s=(r.quoteStyle||e)==="double"?'"':"'";return s+t+s}function Wc(t){return Re.call(String(t),/"/g,"&quot;")}function Cr(t){return Ee(t)==="[object Array]"&&(!J||!(typeof t=="object"&&J in t))}function Jc(t){return Ee(t)==="[object Date]"&&(!J||!(typeof t=="object"&&J in t))}function Bs(t){return Ee(t)==="[object RegExp]"&&(!J||!(typeof t=="object"&&J in t))}function Gc(t){return Ee(t)==="[object Error]"&&(!J||!(typeof t=="object"&&J in t))}function Zc(t){return Ee(t)==="[object String]"&&(!J||!(typeof t=="object"&&J in t))}function el(t){return Ee(t)==="[object Number]"&&(!J||!(typeof t=="object"&&J in t))}function tl(t){return Ee(t)==="[object Boolean]"&&(!J||!(typeof t=="object"&&J in t))}function Fn(t){if(Xe)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!Ir)return!1;try{return Ir.call(t),!0}catch{}return!1}function rl(t){if(!t||typeof t!="object"||!Or)return!1;try{return Or.call(t),!0}catch{}return!1}var sl=Object.prototype.hasOwnProperty||function(t){return t in this};function Oe(t,e){return sl.call(t,e)}function Ee(t){return Kc.call(t)}function il(t){if(t.name)return t.name;var e=zc.call(Xc.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function _n(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,s=t.length;r<s;r++)if(t[r]===e)return r;return-1}function nl(t){if(!jt||!t||typeof t!="object")return!1;try{jt.call(t);try{Nt.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function al(t){if(!ut||!t||typeof t!="object")return!1;try{ut.call(t,ut);try{ft.call(t,ft)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function ol(t){if(!js||!t||typeof t!="object")return!1;try{return js.call(t),!0}catch{}return!1}function cl(t){if(!Nt||!t||typeof t!="object")return!1;try{Nt.call(t);try{jt.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function ll(t){if(!ft||!t||typeof t!="object")return!1;try{ft.call(t,ft);try{ut.call(t,ut)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function ul(t){return!t||typeof t!="object"?!1:typeof HTMLElement!="undefined"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function qn(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,s="... "+r+" more character"+(r>1?"s":"");return qn(rs.call(t,0,e.maxStringLength),e)+s}var n=Re.call(Re.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,fl);return Nn(n,"single",e)}function fl(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+Yc.call(e.toString(16))}function st(t){return"Object("+t+")"}function sr(t){return t+" { ? }"}function Hs(t,e,r,s){var n=s?Rr(r,s):ye.call(r,", ");return t+" ("+e+") {"+n+"}"}function dl(t){for(var e=0;e<t.length;e++)if(_n(t[e],`
`)>=0)return!1;return!0}function hl(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=ye.call(Array(t.indent+1)," ");else return null;return{base:r,prev:ye.call(Array(e+1),r)}}function Rr(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+ye.call(t,","+r)+`
`+e.prev}function bt(t,e){var r=Cr(t),s=[];if(r){s.length=t.length;for(var n=0;n<t.length;n++)s[n]=Oe(t,n)?e(t[n],t):""}var i=typeof rr=="function"?rr(t):[],a;if(Xe){a={};for(var c=0;c<i.length;c++)a["$"+i[c]]=i[c]}for(var o in t)!Oe(t,o)||r&&String(Number(o))===o&&o<t.length||Xe&&a["$"+o]instanceof Symbol||(Dn.call(/[^\w$]/,o)?s.push(e(o,t)+": "+e(t[o],t)):s.push(o+": "+e(t[o],t)));if(typeof rr=="function")for(var l=0;l<i.length;l++)jn.call(t,i[l])&&s.push("["+e(i[l])+"]: "+e(t[i[l]],t));return s}var ss=Zr,Qe=Fc,pl=Vc,yl=ss("%TypeError%"),xt=ss("%WeakMap%",!0),wt=ss("%Map%",!0),ml=Qe("WeakMap.prototype.get",!0),gl=Qe("WeakMap.prototype.set",!0),vl=Qe("WeakMap.prototype.has",!0),bl=Qe("Map.prototype.get",!0),xl=Qe("Map.prototype.set",!0),wl=Qe("Map.prototype.has",!0),is=function(t,e){for(var r=t,s;(s=r.next)!==null;r=s)if(s.key===e)return r.next=s.next,s.next=t.next,t.next=s,s},Al=function(t,e){var r=is(t,e);return r&&r.value},Sl=function(t,e,r){var s=is(t,e);s?s.value=r:t.next={key:e,next:t.next,value:r}},kl=function(t,e){return!!is(t,e)},Ol=function(){var e,r,s,n={assert:function(i){if(!n.has(i))throw new yl("Side channel does not contain "+pl(i))},get:function(i){if(xt&&i&&(typeof i=="object"||typeof i=="function")){if(e)return ml(e,i)}else if(wt){if(r)return bl(r,i)}else if(s)return Al(s,i)},has:function(i){if(xt&&i&&(typeof i=="object"||typeof i=="function")){if(e)return vl(e,i)}else if(wt){if(r)return wl(r,i)}else if(s)return kl(s,i);return!1},set:function(i,a){xt&&i&&(typeof i=="object"||typeof i=="function")?(e||(e=new xt),gl(e,i,a)):wt?(r||(r=new wt),xl(r,i,a)):(s||(s={key:{},next:null}),Sl(s,i,a))}};return n},Il=String.prototype.replace,Tl=/%20/g,ir={RFC1738:"RFC1738",RFC3986:"RFC3986"},ns={default:ir.RFC3986,formatters:{RFC1738:function(t){return Il.call(t,Tl,"+")},RFC3986:function(t){return String(t)}},RFC1738:ir.RFC1738,RFC3986:ir.RFC3986},Cl=ns,nr=Object.prototype.hasOwnProperty,De=Array.isArray,he=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),Rl=function(e){for(;e.length>1;){var r=e.pop(),s=r.obj[r.prop];if(De(s)){for(var n=[],i=0;i<s.length;++i)typeof s[i]!="undefined"&&n.push(s[i]);r.obj[r.prop]=n}}},Ln=function(e,r){for(var s=r&&r.plainObjects?Object.create(null):{},n=0;n<e.length;++n)typeof e[n]!="undefined"&&(s[n]=e[n]);return s},$l=function t(e,r,s){if(!r)return e;if(typeof r!="object"){if(De(e))e.push(r);else if(e&&typeof e=="object")(s&&(s.plainObjects||s.allowPrototypes)||!nr.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var n=e;return De(e)&&!De(r)&&(n=Ln(e,s)),De(e)&&De(r)?(r.forEach(function(i,a){if(nr.call(e,a)){var c=e[a];c&&typeof c=="object"&&i&&typeof i=="object"?e[a]=t(c,i,s):e.push(i)}else e[a]=i}),e):Object.keys(r).reduce(function(i,a){var c=r[a];return nr.call(i,a)?i[a]=t(i[a],c,s):i[a]=c,i},n)},Pl=function(e,r){return Object.keys(r).reduce(function(s,n){return s[n]=r[n],s},e)},El=function(t,e,r){var s=t.replace(/\+/g," ");if(r==="iso-8859-1")return s.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(s)}catch{return s}},Dl=function(e,r,s,n,i){if(e.length===0)return e;var a=e;if(typeof e=="symbol"?a=Symbol.prototype.toString.call(e):typeof e!="string"&&(a=String(e)),s==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(u){return"%26%23"+parseInt(u.slice(2),16)+"%3B"});for(var c="",o=0;o<a.length;++o){var l=a.charCodeAt(o);if(l===45||l===46||l===95||l===126||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||i===Cl.RFC1738&&(l===40||l===41)){c+=a.charAt(o);continue}if(l<128){c=c+he[l];continue}if(l<2048){c=c+(he[192|l>>6]+he[128|l&63]);continue}if(l<55296||l>=57344){c=c+(he[224|l>>12]+he[128|l>>6&63]+he[128|l&63]);continue}o+=1,l=65536+((l&1023)<<10|a.charCodeAt(o)&1023),c+=he[240|l>>18]+he[128|l>>12&63]+he[128|l>>6&63]+he[128|l&63]}return c},jl=function(e){for(var r=[{obj:{o:e},prop:"o"}],s=[],n=0;n<r.length;++n)for(var i=r[n],a=i.obj[i.prop],c=Object.keys(a),o=0;o<c.length;++o){var l=c[o],u=a[l];typeof u=="object"&&u!==null&&s.indexOf(u)===-1&&(r.push({obj:a,prop:l}),s.push(u))}return Rl(r),e},Nl=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},Fl=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},_l=function(e,r){return[].concat(e,r)},ql=function(e,r){if(De(e)){for(var s=[],n=0;n<e.length;n+=1)s.push(r(e[n]));return s}return r(e)},Mn={arrayToObject:Ln,assign:Pl,combine:_l,compact:jl,decode:El,encode:Dl,isBuffer:Fl,isRegExp:Nl,maybeMap:ql,merge:$l},Un=Ol,Ct=Mn,dt=ns,Ll=Object.prototype.hasOwnProperty,Ks={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},Ae=Array.isArray,Ml=Array.prototype.push,Bn=function(t,e){Ml.apply(t,Ae(e)?e:[e])},Ul=Date.prototype.toISOString,Xs=dt.default,V={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Ct.encode,encodeValuesOnly:!1,format:Xs,formatter:dt.formatters[Xs],indices:!1,serializeDate:function(e){return Ul.call(e)},skipNulls:!1,strictNullHandling:!1},Bl=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},ar={},Hl=function t(e,r,s,n,i,a,c,o,l,u,m,g,x,k,T,j){for(var R=e,re=j,ie=0,ve=!1;(re=re.get(ar))!==void 0&&!ve;){var ne=re.get(e);if(ie+=1,typeof ne!="undefined"){if(ne===ie)throw new RangeError("Cyclic object value");ve=!0}typeof re.get(ar)=="undefined"&&(ie=0)}if(typeof o=="function"?R=o(r,R):R instanceof Date?R=m(R):s==="comma"&&Ae(R)&&(R=Ct.maybeMap(R,function(b){return b instanceof Date?m(b):b})),R===null){if(i)return c&&!k?c(r,V.encoder,T,"key",g):r;R=""}if(Bl(R)||Ct.isBuffer(R)){if(c){var ae=k?r:c(r,V.encoder,T,"key",g);return[x(ae)+"="+x(c(R,V.encoder,T,"value",g))]}return[x(r)+"="+x(String(R))]}var ue=[];if(typeof R=="undefined")return ue;var fe;if(s==="comma"&&Ae(R))k&&c&&(R=Ct.maybeMap(R,c)),fe=[{value:R.length>0?R.join(",")||null:void 0}];else if(Ae(o))fe=o;else{var be=Object.keys(R);fe=l?be.sort(l):be}for(var de=n&&Ae(R)&&R.length===1?r+"[]":r,v=0;v<fe.length;++v){var y=fe[v],p=typeof y=="object"&&typeof y.value!="undefined"?y.value:R[y];if(!(a&&p===null)){var f=Ae(R)?typeof s=="function"?s(de,y):de:de+(u?"."+y:"["+y+"]");j.set(e,ie);var d=Un();d.set(ar,j),Bn(ue,t(p,f,s,n,i,a,s==="comma"&&k&&Ae(R)?null:c,o,l,u,m,g,x,k,T,d))}}return ue},Kl=function(e){if(!e)return V;if(e.encoder!==null&&typeof e.encoder!="undefined"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||V.charset;if(typeof e.charset!="undefined"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var s=dt.default;if(typeof e.format!="undefined"){if(!Ll.call(dt.formatters,e.format))throw new TypeError("Unknown format option provided.");s=e.format}var n=dt.formatters[s],i=V.filter;return(typeof e.filter=="function"||Ae(e.filter))&&(i=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:V.addQueryPrefix,allowDots:typeof e.allowDots=="undefined"?V.allowDots:!!e.allowDots,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:V.charsetSentinel,delimiter:typeof e.delimiter=="undefined"?V.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:V.encode,encoder:typeof e.encoder=="function"?e.encoder:V.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:V.encodeValuesOnly,filter:i,format:s,formatter:n,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:V.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:V.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:V.strictNullHandling}},Xl=function(t,e){var r=t,s=Kl(e),n,i;typeof s.filter=="function"?(i=s.filter,r=i("",r)):Ae(s.filter)&&(i=s.filter,n=i);var a=[];if(typeof r!="object"||r===null)return"";var c;e&&e.arrayFormat in Ks?c=e.arrayFormat:e&&"indices"in e?c=e.indices?"indices":"repeat":c="indices";var o=Ks[c];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var l=o==="comma"&&e&&e.commaRoundTrip;n||(n=Object.keys(r)),s.sort&&n.sort(s.sort);for(var u=Un(),m=0;m<n.length;++m){var g=n[m];s.skipNulls&&r[g]===null||Bn(a,Hl(r[g],g,o,l,s.strictNullHandling,s.skipNulls,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,u))}var x=a.join(s.delimiter),k=s.addQueryPrefix===!0?"?":"";return s.charsetSentinel&&(s.charset==="iso-8859-1"?k+="utf8=%26%2310003%3B&":k+="utf8=%E2%9C%93&"),x.length>0?k+x:""},ze=Mn,$r=Object.prototype.hasOwnProperty,zl=Array.isArray,z={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:ze.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Yl=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},Hn=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},Ql="utf8=%26%2310003%3B",Vl="utf8=%E2%9C%93",Wl=function(e,r){var s={__proto__:null},n=r.ignoreQueryPrefix?e.replace(/^\?/,""):e,i=r.parameterLimit===1/0?void 0:r.parameterLimit,a=n.split(r.delimiter,i),c=-1,o,l=r.charset;if(r.charsetSentinel)for(o=0;o<a.length;++o)a[o].indexOf("utf8=")===0&&(a[o]===Vl?l="utf-8":a[o]===Ql&&(l="iso-8859-1"),c=o,o=a.length);for(o=0;o<a.length;++o)if(o!==c){var u=a[o],m=u.indexOf("]="),g=m===-1?u.indexOf("="):m+1,x,k;g===-1?(x=r.decoder(u,z.decoder,l,"key"),k=r.strictNullHandling?null:""):(x=r.decoder(u.slice(0,g),z.decoder,l,"key"),k=ze.maybeMap(Hn(u.slice(g+1),r),function(T){return r.decoder(T,z.decoder,l,"value")})),k&&r.interpretNumericEntities&&l==="iso-8859-1"&&(k=Yl(k)),u.indexOf("[]=")>-1&&(k=zl(k)?[k]:k),$r.call(s,x)?s[x]=ze.combine(s[x],k):s[x]=k}return s},Jl=function(t,e,r,s){for(var n=s?e:Hn(e,r),i=t.length-1;i>=0;--i){var a,c=t[i];if(c==="[]"&&r.parseArrays)a=[].concat(n);else{a=r.plainObjects?Object.create(null):{};var o=c.charAt(0)==="["&&c.charAt(c.length-1)==="]"?c.slice(1,-1):c,l=parseInt(o,10);!r.parseArrays&&o===""?a={0:n}:!isNaN(l)&&c!==o&&String(l)===o&&l>=0&&r.parseArrays&&l<=r.arrayLimit?(a=[],a[l]=n):o!=="__proto__"&&(a[o]=n)}n=a}return n},Gl=function(e,r,s,n){if(!!e){var i=s.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/,c=/(\[[^[\]]*])/g,o=s.depth>0&&a.exec(i),l=o?i.slice(0,o.index):i,u=[];if(l){if(!s.plainObjects&&$r.call(Object.prototype,l)&&!s.allowPrototypes)return;u.push(l)}for(var m=0;s.depth>0&&(o=c.exec(i))!==null&&m<s.depth;){if(m+=1,!s.plainObjects&&$r.call(Object.prototype,o[1].slice(1,-1))&&!s.allowPrototypes)return;u.push(o[1])}return o&&u.push("["+i.slice(o.index)+"]"),Jl(u,r,s,n)}},Zl=function(e){if(!e)return z;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset!="undefined"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof e.charset=="undefined"?z.charset:e.charset;return{allowDots:typeof e.allowDots=="undefined"?z.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:z.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:z.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:z.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:z.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:z.comma,decoder:typeof e.decoder=="function"?e.decoder:z.decoder,delimiter:typeof e.delimiter=="string"||ze.isRegExp(e.delimiter)?e.delimiter:z.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:z.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:z.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:z.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:z.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:z.strictNullHandling}},eu=function(t,e){var r=Zl(e);if(t===""||t===null||typeof t=="undefined")return r.plainObjects?Object.create(null):{};for(var s=typeof t=="string"?Wl(t,r):t,n=r.plainObjects?Object.create(null):{},i=Object.keys(s),a=0;a<i.length;++a){var c=i[a],o=Gl(c,s[c],r,typeof t=="string");n=ze.merge(n,o,r)}return r.allowSparse===!0?n:ze.compact(n)},tu=Xl,ru=eu,su=ns,or={formats:su,parse:ru,stringify:tu};class iu{constructor(e,r){$(this,"axiosIns",null);$(this,"appConfig",O);$(this,"config",{...Mi});$(this,"isAlreadyFetchingAccessToken",!1);$(this,"subscribers",[]);$(this,"socket",null);$(this,"userStore",null);$(this,"dataStore",null);this.axiosIns=e,this.config={...this.config,...r},this.axiosIns.interceptors.request.use(async s=>new Promise(n=>{const i=this.getToken();i&&(s.headers.Authorization=`Bearer ${i}`),n(s)}),s=>Promise.reject(s))}setSocket(){const e=this.getToken();e&&!this.socket&&(this.socket=Tt("http://localhost:1337",{auth:{token:e}}),this.socket.on("connect",()=>{this.socket.on("conversation:create",r=>{r.action="create",this.setConversationNotification(r)}),this.socket.on("conversation:update",r=>{r.action="update",this.setConversationNotification(r)}),this.socket.on("message:create",r=>{r.data?(r.data.action="create",this.setMessageNotification(r.data)):(r.action="create",this.setMessageNotification(r))}),this.socket.on("message:update",r=>{r.data?(r.data.action="update",this.setMessageNotification(r.data)):(r.action="update",this.setMessageNotification(r))})}))}loginLocal(e){return this.axiosIns.post("api/auth/local",e).then(r=>r.data).catch(r=>{throw r})}loginQuickbase(e){return this.axiosIns.post("api/auth/quickbase",e).then(r=>r.data).then(r=>{this.setToken(r.jwt),this.setStrapiUser(r.user,!0),this.setSocket()}).catch(r=>{throw r})}logout(){this.socket&&(this.socket.disconnect(),this.socket=null),this.removeToken()}getToken(){return q.get(this.config.token)}setToken(e){q.set(this.config.token,e,{expires:this.config.tokenExpiration,secure:!0,sameSite:"Strict"})}removeToken(){q.remove(this.config.token,{secure:!0,sameSite:"Strict"})}async setStrapiUser(e,r){this.userStore=this.userStore||C(),this.userStore.setStrapiUser(e,r)}async setConversationNotification(e,r){this.dataStore=this.dataStore||we(),this.dataStore.setConversationNotification(e)}async setMessageNotification(e,r){this.dataStore=this.dataStore||we(),this.dataStore.setMessageNotification(e)}getConversations(e){const r=or.stringify(e,{arrayFormat:"brackets"});return this.axiosIns.get(`api/conversations?${r}`,e).then(s=>s.data).catch(s=>{throw s})}getConversation(e){const r=or.stringify({populate:{messages:{sort:"createdAt:desc"}}},{encodeValuesOnly:!0});return this.axiosIns.get(`api/conversations/${e}?${r}`).then(s=>s.data).catch(s=>{throw s})}readConversation(e){return this.axiosIns.get(`api/conversations/${e}/read`).then(r=>r.data).catch(r=>{throw r})}getMessages(e){const r=or.stringify(e,{arrayFormat:"brackets"});return this.axiosIns.get(`api/messages?${r}`).then(s=>s.data).catch(s=>{throw s})}sendMessage(e){return this.axiosIns.post("api/messages",e).then(r=>r.data).catch(r=>{throw r})}updateConversation(e,r){return this.axiosIns.put(`api/conversations/${e}`,r).then(s=>s.data).catch(s=>{throw s})}createConversation(e){return this.axiosIns.post("api/conversations",e).then(r=>r.data).catch(r=>{throw r})}getContacts(e){return this.axiosIns.get("api/contacts",e).then(r=>r.data).catch(r=>{throw r})}createContact(e){return this.axiosIns.post("api/contacts",e).then(r=>r.data).catch(r=>{throw r})}updateContact(e,r){return this.axiosIns.put(`api/contacts/${e}`,r).then(s=>s.data).catch(s=>{throw s})}getWorkers(e){return this.axiosIns.post("api/workday/get-workers",e).then(r=>r.data).catch(r=>{throw r})}getApplicants(e){return this.axiosIns.post("api/workday/get-applicants",e).then(r=>r.data).catch(r=>{throw r})}updateQuickbaseWorker(e){return this.axiosIns.post("api/workday/update-quickbase-worker",e).then(r=>r.data).catch(r=>{throw r})}}function nu(t,e){return{strapi:new iu(t,e)}}const au=Fr(_r.create({baseURL:Mi.apiDevURL,timeout:25e3,headers:{"Content-Type":"application/json"}}),{maxRequests:6,perMilliseconds:1e3}),{strapi:He}=nu(au,{});var ou=wi(({app:t})=>{t.config.globalProperties.$strapi=He}),zm=Object.freeze(Object.defineProperty({__proto__:null,default:ou,strapi:He},Symbol.toStringTag,{value:"Module"})),Kn={get dev(){return!1},realm:"elitehcms",appDBID:"bp3gargfh",baseURL:"https://api.quickbase.com/v1",loginEndpoint:"https://elitehcms.quickbase.com/db/main?act=API_Authenticate",appToken:"cjibuvub93rvd2dbh4iksbeft4n4",refreshEndpoint:"https://api.quickbase.com/v1/auth/temporary",queryRecords:"https://api.quickbase.com/v1/records/query",insertRecords:"https://api.quickbase.com/v1/records",updateRecords:"https://api.quickbase.com/v1/records",runReport:"https://api.quickbase.com/v1/reports",storageUserKeyName:"clm_emp_user",storageUserTicketKeyName:"clm_emp_ticket",storageIPInfoKeyName:"clm_emp_ip",storagePermissionsKeyName:"clm_emp_permissions",storageAccessKeyName:"clm_emp_access",storageOfficeLocationKeyName:"clm_emp_office",storageEmployeeKeyName:"clm_emp_employee",storageCheckInKeyName:"clm_emp_checkin",storageJobBoardKeyName:"clm_emp_jobboard",cookieExpiration:"1d",kioskExpiration:"30d",officeExpiration:"3d",checkInExpiration:"5m",tokenExpiration:"4m 45s",userToken:"b3rntv_ng3q_0_b3f26wpbjxp4xdhqrxjmdpjmvus",commonParameters:{msInUTC:0,includeRids:1,fmt:"structured",options:"num-5000"},maxLoginAttempts:5,lastAttemptExpMinutes:5,loginAttemptMinutesBeforeLast:2,booleanFields:{br26nivmr:[21]}};const At=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function cu(t){return uu(t)===0}function lu(t,e){return e<=6?31:e<=11||cu(t)?30:29}function uu(t){const e=At.length;let r=At[0],s,n,i,a,c;if(t<r||t>=At[e-1])throw new Error("Invalid Jalaali year "+t);for(c=1;c<e&&(s=At[c],n=s-r,!(t<s));c+=1)r=s;return a=t-r,n-a<6&&(a=a-n+fu(n+4,33)*33),i=zs(zs(a+1,33)-1,4),i===-1&&(i=4),i}function fu(t,e){return~~(t/e)}function zs(t,e){return t-~~(t/e)*e}const Xn=864e5,du=36e5,Pr=6e4,zn="YYYY-MM-DDTHH:mm:ss.SSSZ",hu=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,pu=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,cr={};function yu(t,e){const r="("+e.days.join("|")+")",s=t+r;if(cr[s]!==void 0)return cr[s];const n="("+e.daysShort.join("|")+")",i="("+e.months.join("|")+")",a="("+e.monthsShort.join("|")+")",c={};let o=0;const l=t.replace(pu,m=>{switch(o++,m){case"YY":return c.YY=o,"(-?\\d{1,2})";case"YYYY":return c.YYYY=o,"(-?\\d{1,4})";case"M":return c.M=o,"(\\d{1,2})";case"MM":return c.M=o,"(\\d{2})";case"MMM":return c.MMM=o,a;case"MMMM":return c.MMMM=o,i;case"D":return c.D=o,"(\\d{1,2})";case"Do":return c.D=o++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return c.D=o,"(\\d{2})";case"H":return c.H=o,"(\\d{1,2})";case"HH":return c.H=o,"(\\d{2})";case"h":return c.h=o,"(\\d{1,2})";case"hh":return c.h=o,"(\\d{2})";case"m":return c.m=o,"(\\d{1,2})";case"mm":return c.m=o,"(\\d{2})";case"s":return c.s=o,"(\\d{1,2})";case"ss":return c.s=o,"(\\d{2})";case"S":return c.S=o,"(\\d{1})";case"SS":return c.S=o,"(\\d{2})";case"SSS":return c.S=o,"(\\d{3})";case"A":return c.A=o,"(AM|PM)";case"a":return c.a=o,"(am|pm)";case"aa":return c.aa=o,"(a\\.m\\.|p\\.m\\.)";case"ddd":return n;case"dddd":return r;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return c.Z=o,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return c.ZZ=o,"(Z|[+-]\\d{2}\\d{2})";case"X":return c.X=o,"(-?\\d+)";case"x":return c.x=o,"(-?\\d{4,})";default:return o--,m[0]==="["&&(m=m.substring(1,m.length-1)),m.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),u={map:c,regex:new RegExp("^"+l)};return cr[s]=u,u}function Yn(t,e){return t!==void 0?t:e!==void 0?e.date:wa.date}function Ys(t,e=""){const r=t>0?"-":"+",s=Math.abs(t),n=Math.floor(s/60),i=s%60;return r+U(n)+e+U(i)}function mu(t,e,r){let s=t.getFullYear(),n=t.getMonth();const i=t.getDate();return e.year!==void 0&&(s+=r*e.year,delete e.year),e.month!==void 0&&(n+=r*e.month,delete e.month),t.setDate(1),t.setMonth(2),t.setFullYear(s),t.setMonth(n),t.setDate(Math.min(i,os(t))),e.date!==void 0&&(t.setDate(t.getDate()+r*e.date),delete e.date),t}function gu(t,e,r){const s=e.year!==void 0?e.year:t[`get${r}FullYear`](),n=e.month!==void 0?e.month-1:t[`get${r}Month`](),i=new Date(s,n+1,0).getDate(),a=Math.min(i,e.date!==void 0?e.date:t[`get${r}Date`]());return t[`set${r}Date`](1),t[`set${r}Month`](2),t[`set${r}FullYear`](s),t[`set${r}Month`](n),t[`set${r}Date`](a),delete e.year,delete e.month,delete e.date,t}function as(t,e,r){const s=Qn(e),n=new Date(t),i=s.year!==void 0||s.month!==void 0||s.date!==void 0?mu(n,s,r):n;for(const a in s){const c=Aa(a);i[`set${c}`](i[`get${c}`]()+r*s[a])}return i}function Qn(t){const e={...t};return t.years!==void 0&&(e.year=t.years,delete e.years),t.months!==void 0&&(e.month=t.months,delete e.months),t.days!==void 0&&(e.date=t.days,delete e.days),t.day!==void 0&&(e.date=t.day,delete e.day),t.hour!==void 0&&(e.hours=t.hour,delete e.hour),t.minute!==void 0&&(e.minutes=t.minute,delete e.minute),t.second!==void 0&&(e.seconds=t.second,delete e.second),t.millisecond!==void 0&&(e.milliseconds=t.millisecond,delete e.millisecond),e}function Vn(t,e,r){const s=Qn(e),n=r===!0?"UTC":"",i=new Date(t),a=s.year!==void 0||s.month!==void 0||s.date!==void 0?gu(i,s,n):i;for(const c in s){const o=c.charAt(0).toUpperCase()+c.slice(1);a[`set${n}${o}`](s[c])}return a}function vu(t,e,r){const s=bu(t,e,r),n=new Date(s.year,s.month===null?null:s.month-1,s.day===null?1:s.day,s.hour,s.minute,s.second,s.millisecond),i=n.getTimezoneOffset();return s.timezoneOffset===null||s.timezoneOffset===i?n:as(n,{minutes:s.timezoneOffset-i},1)}function bu(t,e,r,s,n){const i={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(n!==void 0&&Object.assign(i,n),t==null||t===""||typeof t!="string")return i;e===void 0&&(e=zn);const a=Yn(r,Ai.props),c=a.months,o=a.monthsShort,{regex:l,map:u}=yu(e,a),m=t.match(l);if(m===null)return i;let g="";if(u.X!==void 0||u.x!==void 0){const x=parseInt(m[u.X!==void 0?u.X:u.x],10);if(isNaN(x)===!0||x<0)return i;const k=new Date(x*(u.X!==void 0?1e3:1));i.year=k.getFullYear(),i.month=k.getMonth()+1,i.day=k.getDate(),i.hour=k.getHours(),i.minute=k.getMinutes(),i.second=k.getSeconds(),i.millisecond=k.getMilliseconds()}else{if(u.YYYY!==void 0)i.year=parseInt(m[u.YYYY],10);else if(u.YY!==void 0){const x=parseInt(m[u.YY],10);i.year=x<0?x:2e3+x}if(u.M!==void 0){if(i.month=parseInt(m[u.M],10),i.month<1||i.month>12)return i}else u.MMM!==void 0?i.month=o.indexOf(m[u.MMM])+1:u.MMMM!==void 0&&(i.month=c.indexOf(m[u.MMMM])+1);if(u.D!==void 0){if(i.day=parseInt(m[u.D],10),i.year===null||i.month===null||i.day<1)return i;const x=s!=="persian"?new Date(i.year,i.month,0).getDate():lu(i.year,i.month);if(i.day>x)return i}u.H!==void 0?i.hour=parseInt(m[u.H],10)%24:u.h!==void 0&&(i.hour=parseInt(m[u.h],10)%12,(u.A&&m[u.A]==="PM"||u.a&&m[u.a]==="pm"||u.aa&&m[u.aa]==="p.m.")&&(i.hour+=12),i.hour=i.hour%24),u.m!==void 0&&(i.minute=parseInt(m[u.m],10)%60),u.s!==void 0&&(i.second=parseInt(m[u.s],10)%60),u.S!==void 0&&(i.millisecond=parseInt(m[u.S],10)*10**(3-m[u.S].length)),(u.Z!==void 0||u.ZZ!==void 0)&&(g=u.Z!==void 0?m[u.Z].replace(":",""):m[u.ZZ],i.timezoneOffset=(g[0]==="+"?-1:1)*(60*g.slice(1,3)+1*g.slice(3,5)))}return i.dateHash=U(i.year,6)+"/"+U(i.month)+"/"+U(i.day),i.timeHash=U(i.hour)+":"+U(i.minute)+":"+U(i.second)+g,i}function xu(t){return typeof t=="number"?!0:isNaN(Date.parse(t))===!1}function wu(t,e){return Vn(new Date,t,e)}function Au(t){const e=new Date(t).getDay();return e===0?7:e}function Er(t){const e=new Date(t.getFullYear(),t.getMonth(),t.getDate());e.setDate(e.getDate()-(e.getDay()+6)%7+3);const r=new Date(e.getFullYear(),0,4);r.setDate(r.getDate()-(r.getDay()+6)%7+3);const s=e.getTimezoneOffset()-r.getTimezoneOffset();e.setHours(e.getHours()-s);const n=(e-r)/(Xn*7);return 1+Math.floor(n)}function Su(t){return t.getFullYear()*1e4+t.getMonth()*100+t.getDate()}function lr(t,e){const r=new Date(t);return e===!0?Su(r):r.getTime()}function ku(t,e,r,s={}){const n=lr(e,s.onlyDate),i=lr(r,s.onlyDate),a=lr(t,s.onlyDate);return(a>n||s.inclusiveFrom===!0&&a===n)&&(a<i||s.inclusiveTo===!0&&a===i)}function Ou(t,e){return as(t,e,1)}function Iu(t,e){return as(t,e,-1)}function pe(t,e,r){const s=new Date(t),n=`set${r===!0?"UTC":""}`;switch(e){case"year":case"years":s[`${n}Month`](0);case"month":case"months":s[`${n}Date`](1);case"day":case"days":case"date":s[`${n}Hours`](0);case"hour":case"hours":s[`${n}Minutes`](0);case"minute":case"minutes":s[`${n}Seconds`](0);case"second":case"seconds":s[`${n}Milliseconds`](0)}return s}function Tu(t,e,r){const s=new Date(t),n=`set${r===!0?"UTC":""}`;switch(e){case"year":case"years":s[`${n}Month`](11);case"month":case"months":s[`${n}Date`](os(s));case"day":case"days":case"date":s[`${n}Hours`](23);case"hour":case"hours":s[`${n}Minutes`](59);case"minute":case"minutes":s[`${n}Seconds`](59);case"second":case"seconds":s[`${n}Milliseconds`](999)}return s}function Cu(t){let e=new Date(t);return Array.prototype.slice.call(arguments,1).forEach(r=>{e=Math.max(e,new Date(r))}),e}function Ru(t){let e=new Date(t);return Array.prototype.slice.call(arguments,1).forEach(r=>{e=Math.min(e,new Date(r))}),e}function St(t,e,r){return(t.getTime()-t.getTimezoneOffset()*Pr-(e.getTime()-e.getTimezoneOffset()*Pr))/r}function Wn(t,e,r="days"){const s=new Date(t),n=new Date(e);switch(r){case"years":case"year":return s.getFullYear()-n.getFullYear();case"months":case"month":return(s.getFullYear()-n.getFullYear())*12+s.getMonth()-n.getMonth();case"days":case"day":case"date":return St(pe(s,"day"),pe(n,"day"),Xn);case"hours":case"hour":return St(pe(s,"hour"),pe(n,"hour"),du);case"minutes":case"minute":return St(pe(s,"minute"),pe(n,"minute"),Pr);case"seconds":case"second":return St(pe(s,"second"),pe(n,"second"),1e3)}}function Dr(t){return Wn(t,pe(t,"year"),"days")+1}function $u(t){return Si(t)===!0?"date":typeof t=="number"?"number":"string"}function Pu(t,e,r){const s=new Date(t);if(e){const n=new Date(e);if(s<n)return n}if(r){const n=new Date(r);if(s>n)return n}return s}function Eu(t,e,r){const s=new Date(t),n=new Date(e);if(r===void 0)return s.getTime()===n.getTime();switch(r){case"second":case"seconds":if(s.getSeconds()!==n.getSeconds())return!1;case"minute":case"minutes":if(s.getMinutes()!==n.getMinutes())return!1;case"hour":case"hours":if(s.getHours()!==n.getHours())return!1;case"day":case"days":case"date":if(s.getDate()!==n.getDate())return!1;case"month":case"months":if(s.getMonth()!==n.getMonth())return!1;case"year":case"years":if(s.getFullYear()!==n.getFullYear())return!1;break;default:throw new Error(`date isSameDate unknown unit ${r}`)}return!0}function os(t){return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()}function Qs(t){if(t>=11&&t<=13)return`${t}th`;switch(t%10){case 1:return`${t}st`;case 2:return`${t}nd`;case 3:return`${t}rd`}return`${t}th`}const Vs={YY(t,e,r){const s=this.YYYY(t,e,r)%100;return s>=0?U(s):"-"+U(Math.abs(s))},YYYY(t,e,r){return r!=null?r:t.getFullYear()},M(t){return t.getMonth()+1},MM(t){return U(t.getMonth()+1)},MMM(t,e){return e.monthsShort[t.getMonth()]},MMMM(t,e){return e.months[t.getMonth()]},Q(t){return Math.ceil((t.getMonth()+1)/3)},Qo(t){return Qs(this.Q(t))},D(t){return t.getDate()},Do(t){return Qs(t.getDate())},DD(t){return U(t.getDate())},DDD(t){return Dr(t)},DDDD(t){return U(Dr(t),3)},d(t){return t.getDay()},dd(t,e){return this.dddd(t,e).slice(0,2)},ddd(t,e){return e.daysShort[t.getDay()]},dddd(t,e){return e.days[t.getDay()]},E(t){return t.getDay()||7},w(t){return Er(t)},ww(t){return U(Er(t))},H(t){return t.getHours()},HH(t){return U(t.getHours())},h(t){const e=t.getHours();return e===0?12:e>12?e%12:e},hh(t){return U(this.h(t))},m(t){return t.getMinutes()},mm(t){return U(t.getMinutes())},s(t){return t.getSeconds()},ss(t){return U(t.getSeconds())},S(t){return Math.floor(t.getMilliseconds()/100)},SS(t){return U(Math.floor(t.getMilliseconds()/10))},SSS(t){return U(t.getMilliseconds(),3)},A(t){return this.H(t)<12?"AM":"PM"},a(t){return this.H(t)<12?"am":"pm"},aa(t){return this.H(t)<12?"a.m.":"p.m."},Z(t,e,r,s){const n=s==null?t.getTimezoneOffset():s;return Ys(n,":")},ZZ(t,e,r,s){const n=s==null?t.getTimezoneOffset():s;return Ys(n)},X(t){return Math.floor(t.getTime()/1e3)},x(t){return t.getTime()}};function Du(t,e,r,s,n){if(t!==0&&!t||t===1/0||t===-1/0)return;const i=new Date(t);if(isNaN(i))return;e===void 0&&(e=zn);const a=Yn(r,Ai.props);return e.replace(hu,(c,o)=>c in Vs?Vs[c](i,a,s,n):o===void 0?c:o.split("\\]").join("]"))}function ju(t){return Si(t)===!0?new Date(t.getTime()):t}var G={isValid:xu,extractDate:vu,buildDate:wu,getDayOfWeek:Au,getWeekOfYear:Er,isBetweenDates:ku,addToDate:Ou,subtractFromDate:Iu,adjustDate:Vn,startOfDate:pe,endOfDate:Tu,getMaxDate:Cu,getMinDate:Ru,getDateDiff:Wn,getDayOfYear:Dr,inferDateFormat:$u,getDateBetween:Pu,isSameDate:Eu,daysInMonth:os,formatDate:Du,clone:ju};const Z=te("hiringCenter",{state:()=>({hiringCenterInfo:null}),getters:{hiringCenter:t=>t.hiringCenterInfo,hiringCenterAvailable:t=>t.hiringCenterInfo!==null},actions:{async fetchHiringCenter(t,e){const r=[{9:{value:t},7:{value:"Hiring Center"}}];if(!this.hiringCenterInfo||e){const{data:s}=await A.fetchFromStructureApp({fields:r});return this.setHiringCenter(s,!0),s}else return this.hiringCenterInfo},setHiringCenter(t,e){this.hiringCenterInfo=t,e&&t?w.setItem(O.storageHiringCenter,t):t||w.removeItem(O.storageHiringCenter)}}}),Jn=te("boardAppStore",{state:()=>({boardApp:{},requestJobs:null,requestedTimestamp:null}),getters:{getBoardApp:t=>t.boardApp,profileData(){const{profileData:t}=Pe();return t},jobsForBoard(){if(this.requestJobs){const{employeeData:t}=B(),e=this.requestJobs;return t[3]||(e.forEach(r=>{Object.assign(r,{recommended:r[68]===t[53]&&r[69]===t[51]});const s=t[537].find(n=>n[10]===r[3]);s!==void 0&&Object.assign(r,{applied:!0,appliedOn:s[1].$d!==void 0?G.formatDate(s[1].$d,"MM-DD-YYYY"):s[1].date})}),e.sort((r,s)=>r.recommended===s.recommended?s[1].isAfter(r[1]):r.recommended?-1:1)),e}else return[]},timeRequested(){return this.requestedTimestamp}},actions:{async getRequestJobs(){const t=[{14:{value:224},9:{value:1},8:{value:"{'17'.EX.'Open'}AND{'182'.EX.'false'}AND{'175'.EX.'true'}"},7:{value:"Table Query"},6:{value:"bpzpyqcu4"}}],{data:e}=await A.fetchFromProjectsApp({fields:t});if(e.length>0)return this.setRequestJobs(e,!0),this.requestedTimestamp=h(),e;throw"No jobs"},async applyOnBoard({job:t}){const{employeeData:e}=B(),{data:r}=await A.upsertRecordsXML({to:"bsfq6uktu",data:[{6:{value:e[3]},8:{value:t[56]},10:{value:t[3]},12:{value:t[61]}}],fieldsToReturn:[19],formatObject:19});if(console.log(r),r[0])return r[0][19];throw"Cannot apply"},storeBoardApp(t){this.boardApp=t},setRequestJobs(t,e){const r=t.sort((s,n)=>n[1].isAfter(s[1]));this.requestJobs=r,e&&w.setItem(O.storageJobBoardKeyName,r)}}}),ur=[{link:"https://beis-newhire.sabacloud.com/Saba/Web_wdk/NA3P1PRD0029/index/prelogin.rdf",linkName:"BSLN",img:"https://static-na3p1.sabacloud.com/assets/s/s13cvy4thve9/common/img/favicon.ico"}],Q=te("kiosk",{state:()=>({kiosk:null,access:null,permissions:null,bookmarks:ur,bookMarksOnly:!1}),getters:{getBookMarksOnly:t=>t.bookMarksOnly,getBookmarks:t=>t.bookmarks,kioskAccount:t=>t.kiosk,kioskAvailable:t=>t.kiosk!==null,kioskHiringCenter:t=>t.kiosk?t.kiosk[37]:null,hasAffirmative:t=>t.kiosk?t.kiosk.voluntaryForms.affirmative:!1,hasVets:t=>t.kiosk?t.kiosk.voluntaryForms.vets:!1,hasDisability:t=>t.kiosk?!!t.kiosk.voluntaryForms.disability:!1,goToVoluntary:t=>t.hasAffirmative||t.hasVets||t.hasDisability,availableTests:t=>t.kiosk&&t.kiosk.tests?t.kiosk.tests:[],hasTests:t=>t.kiosk&&t.kiosk.tests?t.kiosk.tests.length>0:!1,testForCraft:t=>{const{currentLang:e}=K(),{craftId:r}=Pe();let s=1;return e==="en-US"?s=1:e==="es"&&(s=2),t.kiosk&&t.kiosk.tests&&t.kiosk.tests.find(n=>n[15]===r&&n[16]===s)||!1}},actions:{async fetchKioskAccount(t,e){const r=`{'11'.EX.'${t.email}'}AND{'6'.EX.'Active'}`,s=[{7:{value:"Kiosks"},8:{value:r},9:{value:1},14:{value:30}}];if(!this.kiosk||e){const{data:n}=await A.fetchFromStructureApp({fields:s});if(n.length>0){const i=Object.assign({},n[0][37]);delete i.kiosk,n[0][37]=i,this.setKioskAccount(n[0],!0),t.ticket&&A.setKioskTicket(t.ticket),n[0][45]===!0&&this.setBookmarksOnly(!0,!0),n[0].bookmarks&&this.setBookmarks(n[0].bookmarks,!0)}return n}else return[this.kiosk]},async loginKiosk(t){const e=`{'10'.EX.'Active'}AND{'6'.EX.'${t.email}'}AND{'32'.EX.'Kiosk Profile'}`,r=[{7:{value:"User Request"},8:{value:e},9:{value:1},14:{value:77}}],{data:s}=await A.fetchFromStructureApp({fields:r}),n=[{6:{value:"login"}}];let i=await A.getIpInfo();if(i&&i.query)n[0][8]={value:i.ip?i.ip:"N/A"},n[0][10]={value:i.userAgent?i.userAgent:"N/A"},n[0][27]={value:i.continent?i.continent:"N/A"},n[0][28]={value:i.continentCode?i.continentCode:"N/A"},n[0][29]={value:i.country?i.country:"N/A"},n[0][30]={value:i.countryCode},n[0][31]={value:i.region?i.region:"N/A"},n[0][32]={value:i.regionName?i.regionName:"N/A"},n[0][33]={value:i.city?i.city:"N/A"},n[0][34]={value:i.district?i.district:"N/A"},n[0][38]={value:i.zip?i.zip:"N/A"},n[0][36]={value:i.lat?i.lat:"N/A"},n[0][37]={value:i.lon?i.lon:"N/A"},n[0][38]={value:i.timezone?i.timezone:"N/A"},n[0][39]={value:i.offset?i.offset:"N/A"},n[0][40]={value:i.isp?i.isp:"N/A"},n[0][41]={value:i.org?i.org:"N/A"},n[0][42]={value:i.as?i.as:"N/A"},n[0][43]={value:i.asname?i.asname:"N/A"},n[0][44]={value:i.mobile?i.mobile:!1},n[0][45]={value:i.proxy?i.proxy:!1},n[0][46]={value:i.hosting?i.hosting:!1},n[0][46]={value:i.hosting?i.hosting:"N/A"},n[0][47]={value:i.query?i.query:"N/A"};else{try{i=await A.fetchIpInfo()}catch{i=null}i&&i.query&&(n[0][8]={value:i.ip?i.ip:"N/A"},n[0][10]={value:i.userAgent?i.userAgent:"N/A"},n[0][27]={value:i.continent?i.continent:"N/A"},n[0][28]={value:i.continentCode?i.continentCode:"N/A"},n[0][29]={value:i.country?i.country:"N/A"},n[0][30]={value:i.countryCode},n[0][31]={value:i.region?i.region:"N/A"},n[0][32]={value:i.regionName?i.regionName:"N/A"},n[0][33]={value:i.city?i.city:"N/A"},n[0][34]={value:i.district?i.district:"N/A"},n[0][38]={value:i.zip?i.zip:"N/A"},n[0][36]={value:i.lat?i.lat:"N/A"},n[0][37]={value:i.lon?i.lon:"N/A"},n[0][38]={value:i.timezone?i.timezone:"N/A"},n[0][39]={value:i.offset?i.offset:"N/A"},n[0][40]={value:i.isp?i.isp:"N/A"},n[0][41]={value:i.org?i.org:"N/A"},n[0][42]={value:i.as?i.as:"N/A"},n[0][43]={value:i.asname?i.asname:"N/A"},n[0][44]={value:i.mobile?i.mobile:!1},n[0][45]={value:i.proxy?i.proxy:!1},n[0][46]={value:i.hosting?i.hosting:!1},n[0][47]={value:i.query?i.query:"N/A"})}if(s.length===1){const a=s[0];if(n[0][12]={value:a[3]},a[32]==="Kiosk Profile"){if(await at.compare(t.password,a[7]))return n[0][7]={value:"Successful"},await A.addLoginAttempt(n),this.fetchKioskAccountV2(a);throw n[0][7]={value:"Invalid Password"},A.addLoginAttempt(n),{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}}else throw n[0][7]={value:"Invalid Login"},A.addLoginAttempt(n),{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}}else throw n[0][7]={value:"Invalid Login"},A.addLoginAttempt(n),{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}},async fetchKioskAccountV2(t,e){const r=`{'10'.EX.'Active'}AND{'6'.EX.'${t[6]}'}AND{'32'.EX.'Kiosk Profile'}`,s=[{7:{value:"User"},8:{value:r},9:{value:t[3]},14:{value:76}}],n=await A.fetchFromStructureApp({fields:s}),{user:i,access:a,permissions:c}=n.data;if(a.length>0){const o=[];a.forEach(l=>{l[7]==="Bookmark"&&o.push(l)}),this.setBookmarks(o,!0)}return i[113]===!0&&this.setBookmarksOnly(!0,!0),i[102]&&A.setKioskTicket(i[102]),console.log("fetchKioskV2:",i,a,c),i},setKioskAccount(t,e){const{setKioskActive:r}=K(),{setHiringCenter:s}=Z();if(this.kiosk=t,r(!!t),e&&t)w.setItem(O.storageKioskAccount,t),r(!0),this.setLastKioskFetch();else if(!t){w.removeItem(O.storageKioskAccount),r(!1),this.removeLastKioskFetch(),s(null,e);return}if(t&&t[37]){const n=Object.assign({},t[37]);s(n,e)}},setBookmarks(t,e){let r=t||[];return r=ur.concat(r),this.bookmarks=r,e&&t&&w.setItem(O.storageBookmarks,JSON.parse(JSON.stringify(r))),!0},setLastKioskFetch(){w.setItem(O.storageLastKioskFetch,h())},removeLastKioskFetch(){w.removeItem(O.storageLastKioskFetch)},setBookmarksFromStorage(t,e){return this.bookmarks=t,!0},setBookmarksOnly(t,e){this.bookMarksOnly=t,e&&w.setItem(O.storageBookmarksOnly,t),t||w.removeItem(O.storageBookmarksOnly)},removeBookmarks(){this.setBookmarksOnly(!1),this.kioskAvailable&&this.getBookMarksOnly&&this.setKioskAccount(null,!1),this.bookmarks=ur,this.bookMarksOnly=!1,w.removeItem(O.storageBookmarks),w.removeItem(O.storageBookmarksOnly)}}}),Pe=te("profile",{state:()=>({profile:{6:{field:"Related Employee"},15:{field:"Related Hiring Center"},19:{field:"Related Job"},23:{field:"First"},24:{field:"Middle"},25:{field:"Last"},26:{field:"Suffix"},27:{field:"Phone"},28:{field:"Email"},32:{field:"Street1"},33:{field:"Street2"},34:{field:"City"},35:{field:"State"},36:{field:"Zip"},37:{field:"Country"},38:{field:"Preferred Name"},40:{field:"Related Craft"},42:{field:"Related Experience Option"},44:{field:"Related Employment Status"},46:{field:"Related Contact Method"},49:{field:"Related Kiosk Session"},67:{field:"Related Available Language"}},voluntaryForms:{affirmative:{6:{field:"Related Kiosk Profile"},12:{field:"Related Hiring Center"},16:{field:"Related Affirmative Option (Gender)"},18:{field:"Related Job"},20:{field:"Related Affirmative Option (Ethnicity)"},22:{field:"Related Affirmative Option (Race)"},25:{field:"Related Kiosk Session"},24:{field:"Completion Timestamp"}},veterans:{6:{field:"Related Kiosk Profile"},8:{field:"Related Veteran Status Form"},10:{field:"Related Hiring Center"},16:{field:"Initials"},18:{field:"Related Kiosk Session"},17:{field:"Completion Timestamp"}},disability:{6:{field:"Completion Timestamp"},7:{field:"Name Entered"},8:{field:"Date Entered"},9:{field:"Related Kiosk Profile"},10:{field:"Related Disability Form"},15:{field:"Related Disability Form Option"},17:{field:"Related Hiring Center"},19:{field:"Related Job"},21:{field:"Related Kiosk Session"}},children:{vets:{field:"Veteran Form Selections",value:[]}}},step:0,loading:!0,completed:!1,jobBoardApplication:{},vetsSelections:null,vetsForm:null,craft:null,levelStartTest:null}),getters:{personalInfoNeeded(){const{employeeData:t}=B();return!(t[3]&&t[20]!==""&&t[22]!==""&&t[41]!==""&&t[43]!==""&&t[44]!==""&&t[45]!==""&&t[46]!=="")},onJobBoard(){const{getBoardApp:t}=Jn();return!(!t[3]||t[3]===void 0)},profileData:t=>t.profile,profileComplete:t=>t.completed,loadingState:t=>t.loading,proceedToTest(){const{onKiosk:t}=K(),{testForCraft:e}=Q(),{employeeData:r}=B();return r.needsTest&&r.needsTest?t&&!!e:!1},selectedPreferencesOnProfile(){return{craft:this.profile[40],language:this.profile[67]}},experienceLevelOnProfile(){return this.profile[42].value?this.profile[42].value:null},submitProfileData(){const{employeeData:t}=B(),{hiringCenter:e}=Z(),r={},s=[3];for(const[n,i]of Object.entries(this.profile))i.value!==void 0&&i.value!==null&&(Object.assign(r,{[n]:{value:i.value}}),s.push(parseInt(n)));return r[6]===void 0?(Object.assign(r,{6:{value:t[3]}}),s.push(6)):r[6].value=t[3],r[15]===void 0?(Object.assign(r,{15:{value:e?e[3]:""}}),s.push(15)):r[15].value=e?e[3]:"",r[77]&&delete r[77],s.push(77),{to:"bp3gci48x",data:[r],fieldsToReturn:s}},submitDisabilityData(){const{employeeData:t}=B(),{hiringCenter:e}=Z(),r={},s=[];for(const[n,i]of Object.entries(this.voluntaryForms.disability))i.value!==void 0&&i.value!==null&&(Object.assign(r,{[n]:{value:i.value}}),s.push(parseInt(n)));return r[17]===void 0?(Object.assign(r,{17:{value:e?e[3]:""}}),s.push(17)):r[17].value=e?e[3]:"",this.onJobBoard?r[24]===void 0?(Object.assign(r,{24:{value:this.jobBoardApplication[3]?this.jobBoardApplication[3]:""}}),s.push(24)):r[24].value=this.jobBoardApplication[3]?this.jobBoardApplication[3]:"":r[9]===void 0?(Object.assign(r,{9:{value:this.profile[3]?this.profile[3].value:""}}),s.push(9)):r[9].value=this.profile[3]?this.profile[3].value:"",r[22]===void 0?(Object.assign(r,{22:{value:t[3]?t[3]:""}}),s.push(22)):r[22].value=t[3]?t[3]:"",{to:"bqaiuve9q",data:[r],fieldsToReturn:s}},submitAffirmativeData(){const{employeeData:t}=B(),{hiringCenter:e}=Z(),r={},s=[];for(const[n,i]of Object.entries(this.voluntaryForms.affirmative))i.value!==void 0&&i.value!==null&&(Object.assign(r,{[n]:{value:i.value}}),s.push(parseInt(n)));return r[12]===void 0?(Object.assign(r,{12:{value:e?e[3]:""}}),s.push(12)):r[12].value=e?e[3]:"",this.onJobBoard?r[38]===void 0?(Object.assign(r,{38:{value:this.jobBoardApplication[3]?this.jobBoardApplication[3]:""}}),s.push(38)):r[38].value=this.jobBoardApplication[3]?this.jobBoardApplication[3]:"":r[6]===void 0?(Object.assign(r,{6:{value:this.profile[3]?this.profile[3].value:""}}),s.push(6)):r[6].value=this.profile[3]?this.profile[3].value:"",r[35]===void 0?(Object.assign(r,{35:{value:t[3]?t[3]:""}}),s.push(35)):r[35].value=t[3]?t[3]:"",s.push(33),s.push(17),{to:"bp3gcmump",data:[r],fieldsToReturn:s}},async submitVeteransData(){const{employeeData:t}=B(),{hiringCenter:e}=Z(),r={},s=[];if(this.vetsForm){for(const[n,i]of Object.entries(this.voluntaryForms.veterans))i.value!==void 0&&i.value!==null?(Object.assign(r,{[n]:{value:i.value}}),s.push(parseInt(n))):this.vetsForm[n]&&this.vetsForm[n].value&&(Object.assign(r,{[n]:{value:this.vetsForm[n].value}}),s.push(parseInt(n)));return r[10]===void 0?(Object.assign(r,{10:{value:e?e[3]:""}}),s.push(10)):r[10].value=e?e[3]:"",this.onJobBoard?r[20]===void 0?(Object.assign(r,{20:{value:this.jobBoardApplication[3]?this.jobBoardApplication[3]:""}}),s.push(20)):r[20].value=this.jobBoardApplication[3]?this.jobBoardApplication[3]:"":r[6]===void 0?(Object.assign(r,{6:{value:this.profile[3]?this.profile[3].value:""}}),s.push(6)):r[6].value=this.profile[3]?this.profile[3].value:"",r[19]===void 0?(Object.assign(r,{19:{value:t[3]?t[3]:""}}),s.push(19)):r[19].value=t[3]?t[3]:"",s.includes(3)||s.push(3),{to:"bqamq3kr4",data:[r],fieldsToReturn:s}}else return{}},vetsFormSelections(){const t=this.vetsSelections?this.vetsSelections:[],e=[];return t.length>0&&t.forEach(r=>{const s={};for(const[n,i]of Object.entries(r))i.value!==void 0&&i.value!==null&&Object.assign(s,{[n]:{value:i.value}});s[6]===void 0?Object.assign(s,{6:{value:this.voluntaryForms.veterans[3]?this.voluntaryForms.veterans[3].value:""}}):s[6].value=this.voluntaryForms.veterans[3]?this.voluntaryForms.veterans[3].value:"",this.onJobBoard||(s[10]===void 0?Object.assign(s,{10:{value:this.profile[19]?this.profile[19].value:""}}):s[10].value=this.profile[19]?this.profile[19].value:""),e.push(s)}),{to:"bqamrfpj9",data:e,fieldsToReturn:[1,2,3,8,9]}},startLevelForTest:t=>t.levelStartTest,craftId:t=>t.craft},actions:{async submitProfileToQB(){const{updateEmployeeData:t}=B(),{onKiosk:e}=K(),{testForCraft:r}=Q(),{hiringCenter:s}=Z();if(this.onJobBoard)return(await t({fields:{16:{value:s[3]},20:{value:this.profile[23].value===void 0?"":this.profile[23].value},21:{value:this.profile[24].value===void 0?"":this.profile[24].value},22:{value:this.profile[25].value===void 0?"":this.profile[25].value},23:{value:this.profile[26].value===void 0?"":this.profile[26].value},41:{value:this.profile[32].value===void 0?"":this.profile[32].value},42:{value:this.profile[33].value===void 0?"":this.profile[33].value},43:{value:this.profile[34].value===void 0?"":this.profile[34].value},44:{value:this.profile[35].value===void 0?"":this.profile[35].value},45:{value:this.profile[36].value===void 0?"":this.profile[36].value},46:{value:this.profile[37].value===void 0?"":this.profile[37].value},51:{value:this.profile[40].value===void 0?"":this.profile[40].value},53:{value:this.profile[42].value===void 0?"":this.profile[42].value},55:{value:this.profile[44].value===void 0?"":this.profile[44].value},57:{value:this.profile[46].value===void 0?"":this.profile[46].value}}})).needsTest&&r?(t({fields:{122:{value:7}}}),this.storeLocalForage(),this.submitProfileData):(this.storeLocalForage(),this.submitProfileData);{const{data:n}=await A.upsertRecordsXML(this.submitProfileData);if(n[0]){const i=n[0];!this.profile[3]||this.profile[3].value===void 0?Object.assign(this.profile,{3:{value:n[0][3]}}):this.profile[3].value=n[0][3],!this.profile[77]||this.profile[77].value===void 0?Object.assign(this.profile,{77:{value:n[0][77]}}):this.profile[77].value=n[0][77];const a={16:{value:s[3]},20:{value:i[23]===void 0?"":i[23]},21:{value:i[24]===void 0?"":i[24]},22:{value:i[25]===void 0?"":i[25]},23:{value:i[26]===void 0?"":i[26]},41:{value:i[32]===void 0?"":i[32]},42:{value:i[33]===void 0?"":i[33]},43:{value:i[34]===void 0?"":i[34]},44:{value:i[35]===void 0?"":i[35]},45:{value:i[36]===void 0?"":i[36]},46:{value:i[37]===void 0?"":i[37]},51:{value:i[40]===void 0?"":i[40]},53:{value:i[42]===void 0?"":i[42]},55:{value:i[44]===void 0?"":i[44]},57:{value:i[46]===void 0?"":i[46]}},c=await t({fields:a});return c[119]!==void 0&&(this.profile[77].value=c[119]==="Yes"?"No":"Yes"),this.storeLocalForage(),c.needsTest&&r&&!e&&await t({fields:{122:{value:7}}}),i}else throw"Something went wrong"}},async submitDisabilityToQB(){const{updateEmployeeFromApp:t}=B(),{data:e}=await A.upsertRecordsXML(this.submitDisabilityData);if(e[0])Object.assign(this.voluntaryForms.disability,{3:{value:e[0][3]}}),t({action:"push",values:this.voluntaryForms.disability,key:"disability"});else throw"Something went wrong";return this.submitDisabilityData},async submitAffirmativeToQB(){const{updateEmployeeData:t}=B(),{data:e}=await A.upsertRecordsXML(this.submitAffirmativeData);if(e[0]){Object.assign(this.voluntaryForms.affirmative,{3:{value:e[0][3]}});const r={406:{value:e[0][33]},380:{value:e[0][17]}};t({fields:r})}else throw"Something went wrong";return this.submitAffirmativeData},async submitVeteransToQB(){const{updateEmployeeFromApp:t}=B(),e=await this.submitVeteransData,{data:r}=await A.upsertRecordsXML(e);if(r[0]){if(this.voluntaryForms.veterans[3]===void 0?Object.assign(this.voluntaryForms.veterans,{3:{value:r[0][3]}}):this.voluntaryForms.veterans[3].value=r[0][3],(await A.upsertRecordsXML(this.vetsFormSelections)).data.length>0)return Object.assign(this.voluntaryForms.veterans,{selections:r}),t({action:"push",values:this.voluntaryForms.veterans,key:"vets"}),!0;throw"Cannot save vets form selections"}else throw"Cannot save veterans"},async updateProfile(t){if(this.completed=t.completed===void 0?!1:t.completed,this.step=t.next?t.next:0,t.values&&Object.entries(t.values).length>0)for(const[e,r]of Object.entries(t.values))r&&(this.profile[e]!==void 0?(this.profile[e].value=r.value?r.value:r||"",this.profile[e].label=r.label?r.label:""):Object.assign(this.profile,{[e]:{value:!r.value||r.value===void 0?!r||r===void 0?"":r:r.value,label:!r.label||r.label===void 0?"":r.label}}));return this.storeLocalForage(),this.submitProfileData},async updateVoluntaryForm(t){this.step=t.next?t.next:0;const e=this.voluntaryForms[t.type];if(t.values&&Object.entries(t.values).length>0){for(const[r,s]of Object.entries(t.values))e[r]!==void 0?Array.isArray(e[r].value)?s.value&&Array.isArray(s.value)?s.value.forEach(n=>{e[r].value.push(n)}):s&&Array.isArray(s)?s.forEach(n=>{e[r].value.push(n)}):e[r].value.push(s.value?s.value:s||""):(e[r].value=s.value?s.value:s||"",e[r].label=s.label?s.label:""):Object.assign(e,{[r]:{value:s.value?s.value:s||"",label:s.label?s.label:""}});return!0}else throw"Missing data"},async updateVetsForm({next:t,values:e,selections:r}){return this.step=t||0,this.vetsForm=e,this.vetsSelections=r,!0},async updateVetsSelections(t){this.vetsSelections=t},updateStep(t){this.step=t},dataLoaded(t){this.loading=t===void 0?!1:t},toggleLoader(t){this.loading=t},setLevelStartTest(t){this.levelStartTest=t},setCraft(t){this.craft=t},resetProfile(){this.profile={6:{field:"Related Employee"},15:{field:"Related Hiring Center"},19:{field:"Related Job"},23:{field:"First"},24:{field:"Middle"},25:{field:"Last"},26:{field:"Suffix"},27:{field:"Phone"},28:{field:"Email"},32:{field:"Street1"},33:{field:"Street2"},34:{field:"City"},35:{field:"State"},36:{field:"Zip"},37:{field:"Country"},38:{field:"Preferred Name"},40:{field:"Related Craft"},42:{field:"Related Experience Option"},44:{field:"Related Employment Status"},46:{field:"Related Contact Method"},49:{field:"Related Kiosk Session"},67:{field:"Related Available Language"}},this.step=0,this.voluntaryForms={affirmative:{6:{field:"Related Kiosk Profile"},12:{field:"Related Hiring Center"},16:{field:"Related Affirmative Option (Gender)"},18:{field:"Related Job"},20:{field:"Related Affirmative Option (Ethnicity)"},22:{field:"Related Affirmative Option (Race)"},25:{field:"Related Kiosk Session"},24:{field:"Completion Timestamp"}},veterans:{6:{field:"Related Kiosk Profile"},8:{field:"Related Veteran Status Form"},10:{field:"Related Hiring Center"},16:{field:"Initials"},18:{field:"Related Kiosk Session"},17:{field:"Completion Timestamp"}},disability:{6:{field:"Completion Timestamp"},7:{field:"Name Entered"},8:{field:"Date Entered"},9:{field:"Related Kiosk Profile"},10:{field:"Related Disability Form"},15:{field:"Related Disability Form Option"},17:{field:"Related Hiring Center"},19:{field:"Related Job"},21:{field:"Related Kiosk Session"}},children:{vets:{field:"Veteran Form Selections",value:[]}}}},setProfile(t,e){this.profile=t,e&&w.setItem(O.storageProfile,t)},setProfileStep(t,e){this.step=t,e&&w.setItem(O.storageProfileStep,t)},setVoluntaryForms(t,e){this.voluntaryForms=t,e&&w.setItem(O.storageProfileVoluntaryForms,t)},storeLocalForage(){const t=JSON.parse(JSON.stringify(this.profile)),e=JSON.parse(JSON.stringify(this.voluntaryForms));w.setItem(O.storageProfile,t),w.setItem(O.storageProfileStep,this.step),w.setItem(O.storageProfileVoluntaryForms,e)}}}),B=te("employee",{state:()=>({devEmployee:{3:46},employee:{},emergencyContacts:[],history:[],training:[{3:2,6:"Security Passport",7:1,8:"Identification Credentials",11:"",20:"IDs",21:1},{3:1,6:"TWIC Card",7:1,8:"Identification Credentials",11:"",20:"IDs",21:1}],jobBoardApplications:[]}),getters:{noTasks(){return!this.checkInActive&&this.employeeData.complete&&this.voluntaryFormsComplete&&!this.showInProcess&&!this.employeeData.needsTest},employeeActive(){return this.employeeData[408]==="Active"},checkInActive(){const{checkedIn:t,checkInData:e}=K();return this.showInProcess||this.employeeData[79]===6||e[36]?!1:!!(this.employeeData[408]==="Active"&&t)},voluntaryFormsSubmitted(){return this.employee[3]?{disability:this.employee.disability.length>0?this.employee.disability.sort((t,e)=>t[3]>e[3]?-1:1)[0]:null,affirmative:this.employee.affirmative.length>0?this.employee.affirmative.sort((t,e)=>t[3]>e[3]?-1:1)[0]:null,vets:this.employee.vets.length>0?this.employee.vets.filter(t=>t.selections.length>0).sort((t,e)=>t[3]>e[3]?-1:1)[0]:null}:null},voluntaryFormsComplete(){return!(!this.voluntaryFormsSubmitted||!this.voluntaryFormsSubmitted.disability||!this.voluntaryFormsSubmitted.affirmative||!this.voluntaryFormsSubmitted.vets)},applicationsSubmitted:t=>t.jobBoardApplications,showInProcess(){return this.employee[519]?this.employee[519]===1:!1},showEmployment(){return this.employee[408]?this.employee[408]==="Active":!1},employeeData:t=>t.employee,employeeAvailable(){return!!this.employee[3]},offerData(){return this.employee[1516]&&!Array.isArray(this.employee[1516].offer)?this.employee[1516].offer:null},processingData(){return this.employee[1516]&&!Array.isArray(this.employee[1516].processing)?this.employee[1516].processing:null},savedEmergencyContacts(){return this.emergencyContacts},savedHistory(){const t=[];return this.employee[513]&&this.employee[513].forEach(e=>{const r=e[12]&&e[12].includes("-")?e[12].split("-"):null,s=e[13]&&e[13].includes("-")?e[13].split("-"):null,n=r?G.buildDate({year:r[2],date:r[1],month:r[0]}):e[12],i=s?G.buildDate({year:s[2],date:s[1],month:s[0]}):e[13];e[12]=G.formatDate(n,"MM/DD/YYYY"),e[13]=G.formatDate(i,"MM/DD/YYYY"),Object.assign(e,{company:{value:e[6],label:e[7]}}),Object.assign(e,{craft:{value:e[15],label:e[16]}}),t.push(e)}),t},savedTraining(){return this.training},getEmployee:t=>t.employee,socialRequired:t=>{const{getCountry:e}=K();return e==="CA"?!t.employee[3]||t.employee[564]===""||!t.employee[564]:!t.employee[3]||t.employee[109]===""||!t.employee[109]}},actions:{addMatrixToEmployee({data:t}){Object.assign(this.employee,{[t.key]:t.value})},async updateEmployeeData({fields:t}){if(!t)throw"No Fields Provided";t[3]===void 0&&Object.assign(t,{3:{value:this.employeeData[3]}});const{data:e}=await A.upsertRecordsXML({to:"bp3gb7ng2",fieldsToReturn:[500],data:[t],formatObject:500}),r=e[0][500];return this.setEmployee(r,!0),r},setEmployee(t,e){const{setCraft:r,setLevelStartTest:s}=Pe();t[507]&&(this.emergencyContacts=t[507]),t.craft&&r(t.craft),t[53]&&s(t[53]),this.employee=t,e&&w.setItem(O.storageEmployeeKeyName,t)},async removeContact(t){await A.upsertRecordsXML({to:"bruxz7dsh",data:[{3:{value:t},17:{value:!0},18:{value:new Date}}],fieldsToReturn:[3,14],formatObject:14}),this.employee[507]=this.employee[507].filter(e=>e[3]!==t)},async addContact(t){const{data:e}=await A.upsertRecordsXML({to:"bruxz7dsh",data:[{6:{value:t[6]},7:{value:t[7]},8:{value:t[16]},10:{value:this.employee[3]},11:{value:t[11]}}],fieldsToReturn:[3,14],formatObject:14});if(!e.length>0)throw"Cannot save contact";t=e[0][14],this.employee[507].push(t)},async updateContact(t){const{data:e}=await A.upsertRecordsXML({to:"bruxz7dsh",data:[{3:{value:t[3]},6:{value:t[6]},7:{value:t[7]},8:{value:t[16]},11:{value:t[11]}}],fieldsToReturn:[3,14],formatObject:14});this.employee[507].forEach((r,s)=>{r[3]===t[3]&&(this.employee[507][s]=e[0][14])})},async addHistory(t){const e={6:{value:t.company.value},10:{value:t[10]},11:{value:t[11]},12:{value:t[12]},13:{value:t[13]},15:{value:t.craft.value},34:{value:this.employeeData[3]}};this.employeeData[234]>0&&Object.assign(e,{8:{value:this.employeeData[234]}});const{data:r}=await A.upsertRecordsXML({to:"bpzpy6pj7",data:[e],fieldsToReturn:[3]});if(!r.length>0)throw"Cannot save experience";t[3]=r[0][3],t[12]=G.formatDate(G.addToDate(t[12],{days:1}),"MM/DD/YYYY"),t[13]=G.formatDate(G.addToDate(t[13],{days:1}),"MM/DD/YYYY"),this.employee[513]&&Array.isArray(this.employee[513])?this.employee[513].push(t):this.employee[513]=[t]},async updateHistory(t){const{data:e}=await A.upsertRecordsXML({to:"bpzpy6pj7",data:[{3:{value:t[3]},6:{value:t.company.value},10:{value:t[10]},11:{value:t[11]},12:{value:t[12]},13:{value:t[13]},15:{value:t.craft.value},34:{value:this.employeeData[3]}}],fieldsToReturn:[3]});if(!e.length>0)throw"Cannot save history";t[12]=G.formatDate(G.addToDate(t[12],{days:1}),"MM/DD/YYYY"),t[13]=G.formatDate(G.addToDate(t[13],{days:1}),"MM/DD/YYYY"),this.employee[513].forEach((r,s)=>{r[3]===t[3]&&(this.employee[513][s]=t)})},async removeHistory(t){const{data:e}=await A.upsertRecordsXML({to:"bpzpy6pj7",data:[{3:{value:t},32:{value:!0},33:{value:new Date}}],fieldsToReturn:[3]});if(!e.length>0)throw"Cannot save history";this.employee[513]=this.employee[513].filter(r=>r[3]!==e[0][3])},addTraining(t){this.training.push(t)},updateTraining(t){this.training.forEach((e,r)=>{e[3]===t[3]&&(this.training[r]=t)})},removeTraining(t){this.training=this.training.filter(e=>e[3]!==t)},async applyOnBoard(t){const{data:e}=await A.upsertRecordsXML({to:"bsfq6uktu",data:[{6:{value:this.employeeData[3]},8:{value:t[56]},10:{value:t[3]},12:{value:t[61]}}],fieldsToReturn:[19],formatObject:19});if(e[0])return this.employee[537].push(e[0][19]),e;throw"Cannot apply"},async acceptDeployment(t){const{data:e}=await A.upsertRecordsXML({to:"bsf2qqd63",data:[{8:{value:this.employeeData[3]},9:{value:t},6:{value:new Date},7:{value:"accept"}}],fieldsToReturn:[11],formatObject:11});if(e[0])return this.employee[1516].processing=e[0][11],e;throw"Cannot accept"},updateEmployeeFromApp({action:t,values:e,key:r}){t==="push"?this.employee[r]===void 0?Object.assign(this.employee,{[r]:e}):this.employee[r].push(e):t==="replace"&&(this.employee[r]===void 0?Object.assign(this.employee,{[r]:e}):this.employee[r]=e)}}});class Nu{formatName(e){if(typeof e!="string")return"";const r=e.trim().split(" ");if(r.length===1){if(e=e.toLowerCase(),e==="de"||e==="dela"||e==="del"||e==="las"||e==="y"||e==="la")return e;try{e=e.charAt(0).toUpperCase()+e.slice(1)}catch{e=e.charAt(0)+e.slice(1)}if(e.startsWith("Mc"))try{e=e.slice(0,2)+e.charAt(2).toUpperCase()+e.slice(3)}catch{e=e.slice(0,2)+e.charAt(2)+e.slice(3)}if(e.includes("'")){const s=e.indexOf("'");try{e=e.slice(0,s+1)+e.charAt(s+1).toUpperCase()+e.slice(s+2)}catch{e=e.slice(0,s+1)+e.charAt(s+1)+(e.slice(s+2)?e.slice(s+2):"")}}if(e.includes("-")){const s=e.indexOf("-");try{e=e.slice(0,s+1)+e.charAt(s+1).toUpperCase()+e.slice(s+2)}catch{e=e.slice(0,s+1)+e.charAt(s+1)+(e.slice(s+2)?e.slice(s+2):"")}}return e}else{for(let s=r.length-1;s>=0;s--)if(r[s]===""){r.splice(s);continue}else{try{r[s]=r[s].toLowerCase()}catch{return r[s]}if(r[s]==="de"||r[s]==="dela"||r[s]==="del"||r[s]==="la"||r[s]==="las"||r[s]==="y")if(s===0&&r[s]==="la"){try{r[s]=r[s].charAt(0).toUpperCase()+r[s].slice(1)}catch{r[s]=r[s].charAt(0)+r[s].slice(1)}continue}else continue;else{try{r[s]=r[s].charAt(0).toUpperCase()+r[s].slice(1)}catch{r[s]=r[s].charAt(0)+r[s].slice(1)}if(r[s].startsWith("Mc"))try{r[s]=r[s].slice(0,2)+r[s][2].toUpperCase()+r[s].slice(3)}catch{r[s]=r[s].slice(0,2)+r[s][2]+r[s].slice(3)}if(r[s].includes("'")){const n=r[s].indexOf("'");try{r[s]=r[s].slice(0,n+1)+r[s][n+1].toUpperCase()+(r[s].slice(n+2)?r[s].slice(n+2):"")}catch{r[s]=r[s].slice(0,n+1)+(r[s][n+1]?r[s][n+1]:"")+(r[s].slice(n+2)?r[s].slice(n+2):"")}}if(r[s].includes("-")){const n=r[s].indexOf("-");try{r[s]=r[s].slice(0,n+1)+r[s][n+1].toUpperCase()+r[s].slice(n+2)}catch{r[s]=r[s].slice(0,n+1)+(r[s][n+1]?r[s][n+1]:"")+(r[s].slice(n+2)?r[s].slice(n+2):"")}}}}return r.join(" ")}}calculateDuration(e){return G.getDateDiff(e.end,e.start,e.unit)}formatPhone(e){const s=(""+e).replace(/\D/g,"").match(/^(\d{3})(\d{3})(\d{4})$/);return s?`(${s[1]}) ${s[2]}-${s[3]}`:null}async converter(e){let r;return e&&Array.isArray(e)?(r=[],e.forEach(s=>{const n=JSON.parse(s);r.push(n)})):r=JSON.parse(e),r}async decode(e){if(e){const r=document.createElement("div");return r.innerHTML=e,r.childNodes[0].nodeValue}else return""}fileToBase64(e){return new Promise(r=>{const s=new FileReader;s.onload=function(n){r(n.target.result.split(",")[1])},s.readAsDataURL(e)})}}function Fu(){return{helpers:new Nu}}const{helpers:Ws}=Fu(),_u=25,Ym=te("assessment",{state:()=>({step:0,loading:!0,tools:[],testData:{allQuestions:[],selectedQuestions:[],completedQuestions:[],nextQuestions:null,testStatus:"In Progress",currentScope:0,loadIteration:0,qb:{testRecord:{3:{field:"Record ID#",value:24712},6:{field:"Related Kiosk Profile"},13:{field:"Related Hiring Center"},15:{field:"Related Employee"},17:{field:"Related Craft"},23:{field:"Related Available Language"},34:{field:"Test Completion Timestamp"},37:{field:"Test Status"},testQuestions:[{6:{field:"Related Test"},7:{field:"Related All Test Question"},11:{field:"Status"},questionResponse:[{6:{field:"Related Test Question"},8:{field:"Related Question Alternative"}}]}]}}},testId:null,qb:null,questions:[],answers:[],toolListId:null,toolChecklists:[]}),getters:{questionsLoaded(){return this.testData.allQuestions.length>0},nextQuestions(){return this.testData.nextQuestions?this.testData.nextQuestions:null},completedOnIteration(){return this.testData.completedQuestions.filter(t=>t.iteration===this.testData.loadIteration)},algo(){const t=this.testData.completedQuestions.filter(e=>e.selection[14]===1&&e.iteration===this.testData.loadIteration);return t!==void 0?t:[]},ratio(){return isNaN(this.algo.length/this.completedOnIteration.length)?0:(this.algo.length/this.completedOnIteration.length).toFixed(2)},nextScope(){return this.completedOnIteration.length>0?this.ratio>.6?this.testData.currentScope<6?this.testData.currentScope+1:this.testData.currentScope:this.ratio===.6?this.testData.currentScope:this.testData.currentScope>2?this.testData.currentScope-1:this.testData.currentScope:this.testData.currentScope},nextIteration(){return this.testData.loadIteration+1},timeToStop(){const t=this.testData.completedQuestions.filter(r=>r[23]>this.testData.currentScope).length,e=this.testData.completedQuestions.filter(r=>r[23]<this.testData.currentScope).length;return t>0&&e>0&&this.testData.completedQuestions.length>=_u},toolChecklistData(){const{testForCraft:t}=Q(),{hiringCenter:e}=Z(),{employeeData:r}=B(),s={6:{value:this.testId?this.testId:0},11:{value:e?e[3]:0},15:{value:r[3]?r[3]:0},20:{value:t[15]?t[15]:0},22:{value:t[16]?t[16]:0}};return{to:"bp3gcpk2w",data:[s],fieldsToReturn:[3]}},toolsData(){const t=[];return this.tools.length>0&&this.tools.forEach(e=>{const r={6:{value:this.toolListId?this.toolListId:0},7:{value:e.value}};t.push(r)}),{to:"bp928wac2",data:t,fieldsToReturn:[3]}},availableToolChecklists:t=>t.toolChecklists,toolsForCraft(){const{testForCraft:t}=Q();if(t){const e=this.availableToolChecklists.find(r=>r[6]===t[3]);return e!==void 0?e[11]:[]}else return[]},toolListInstructions(){const{testForCraft:t}=Q();if(t){const e=this.availableToolChecklists.find(r=>r[6]===t[3]);return e!==void 0?e[13]:null}else return null},toolListName(){const{testForCraft:t}=Q();if(t){const e=this.availableToolChecklists.find(r=>r[6]===t[3]);return e!==void 0?e[8]:null}else return null}},actions:{async startAssessment(){const{profile:t}=Pe(),{testForCraft:e}=Q(),{hiringCenter:r}=Z(),{employeeData:s,updateEmployeeData:n}=B(),i={13:{value:r[3]},15:{value:s[3]},17:{value:e[15]},23:{value:e[16]},51:{value:e[3]}};t[3]!==void 0&&Object.assign(i,{6:{value:t[3].value}});const{data:a}=await A.upsertRecordsXML({to:"bp3gckirf",data:[i],fieldsToReturn:[3]});if(a[0])return this.testId=a[0][3],n({fields:{122:{value:8}}}),a[0];throw"Something went wrong"},async finishAssessment(){const{metadata:t}=await A.upsertRecordsXML({to:"bp3gckirf",data:[{3:{value:this.testId},34:{value:new Date},37:{value:"Complete"}}],mergeFieldId:3,fieldsToReturn:[3]});if(t.updatedRecordIds[0]){const{data:e}=await A.upsertRecordsXML({to:"bp9np6ckn",data:this.questions,fieldsToReturn:[3,7]});if(!e.length>0)throw"Cannot save questions";{const r=[];e.forEach(n=>{const i=this.answers.findIndex(a=>a.link===n[7]);if(i>-1){const a={6:{value:n[3]},8:{value:this.answers[i][8]}};r.push(a)}});const{metadata:s}=await A.upsertRecordsXML({to:"bp9np9vk7",data:r,fieldsToReturn:[3]});if(!s.createdRecordIds.length===this.answers.length)throw"Something went wrong";return{success:!0}}}else throw"Cannot finish assessment"},async startToolChecklist(){const{data:t}=await A.upsertRecordsXML(this.toolChecklistData);if(t[0])return this.toolListId=t[0][3],t[0];throw"Cannot start checklist"},async finishToolChecklist(){const{metadata:t}=await A.upsertRecordsXML({to:"bp3gcpk2w",data:[{3:{value:this.toolListId},18:{value:new Date},17:{value:"Complete"}}],mergeFieldId:3,fieldsToReturn:[3]});if(t.updatedRecordIds[0]){const{data:e}=await A.upsertRecordsXML(this.toolsData);if(e.length>0)return!0;throw"Cannot save tools"}else throw"Cannot finish tool checklist"},async submitToQB(){const{profile:t}=Pe(),{testForCraft:e}=Q(),{hiringCenter:r}=Z(),{devEmployee:s}=B();this.testData.qb.testRecord[6].value=t[3].value,this.testData.qb.testRecord[13].value=r[3],this.testData.qb.testRecord[15].value=s[3],this.testData.qb.testRecord[17].value=e[15],this.testData.qb.testRecord[23].value=e[16],this.testData.qb.testRecord[34].value=Date.now(),this.testData.qb.testRecord[37].value="Complete";const n=[];return this.testData.completedQuestions.forEach(i=>{const a={6:{value:this.testData.qb.testRecord[3].value},7:{value:i[8]},11:{value:"Complete"},questionResponse:[{6:{value:0},8:{value:i.selection[3]}}]};n.push(a)}),this.testData.qb.testRecord.testQuestions=n,this.testData.qb.testRecord},async updateAssessment(t){return this.step=t.next,t.type==="tools"&&(this.tools=t.values),!0},updateStep(t){this.step=t},dataLoaded(){this.loading=!1},async getAllQuestions(){const{testForCraft:t}=Q();if(this.questionsLoaded)return!0;if(t)try{const{data:e}=await A.fetchFromStructureApp({fields:[{6:{value:"bqamed7sr"},7:{value:"Table Query"},8:{value:`{'6'.EX.'${t[9]}'}`},9:{value:1},14:{value:17}}]});if(e)return e.forEach(async r=>{r[20]&&(r.hasImage=!0,r.imageData={src:r[22],alt:r[21]}),r[19].forEach(s=>{s.value=s[3],s.label=s[6]})}),this.testData.allQuestions=e,!0;throw"Something went wrong"}catch(e){console.log(e);const{data:r}=await A.doQuery({from:"bqamed7sr",where:`{'6'.EX.'${t[9]}'}`,select:[3,6,8,9,10,11,12,13,14,18,19,20,21,22,23,24],sortBy:[{fieldId:11,order:"ASC"}]});if(r)return r.forEach(async s=>{s[20]==="Yes"&&(s.hasImage=!0,s.imageData={src:s[22],alt:s[21]}),s[19]=await Ws.converter(s[19]),s[24]=await Ws.converter(s[24]),s[19].forEach(n=>{n.value=n[3],n.label=n[6]})}),this.testData.allQuestions=r,!0;throw"Something went wrong"}else throw"No test for craft"},async loadQuestionGroup(t,e){if(t!==void 0){const r=this.testData.allQuestions.filter(s=>s[23]===t);if(r.length>0)return r.length>5&&(r.length=5),r.forEach(s=>{s.response=null;const n=this.testData.allQuestions.findIndex(i=>i[3]===s[3]);n>-1&&this.testData.allQuestions.splice(n,1)}),this.testData.nextQuestions=r,this.testData.currentScope=t,this.testData.loadIteration=e,r;throw"There are no questions"}},async completeQuestion(t){const e=t.response,r=t[19].find(i=>i.value===e);if(r!==void 0)t.selection=r;else throw"No selection";t.iteration=this.testData.loadIteration,t.storedData={};const s={6:{value:this.testId},7:{value:t[8]},11:{value:"Complete"}};this.questions.push(s);const n={6:null,8:t.selection[3],link:t[8]};return this.answers.push(n),this.testData.completedQuestions.push(t),this.testData.nextQuestions=this.testData.nextQuestions.filter(i=>i[3]!==t[3]),{data:{nextQuestions:this.timeToStop?[]:this.testData.nextQuestions,scope:this.nextScope,iteration:this.nextIteration}}},async fetchCraftToolsFromStorage(){const t=await w.getItem(O.storageToolCheckList);if(t){for(let e=0;e<t.length;e++){const r=Object.keys(t[e]);for(let s=0;s<r.length;s++){typeof t[e][r[s]]=="object"&&t[e][r[s]]!==null&&Object.prototype.hasOwnProperty.call(t[e][r[s]],"$d")&&(t[e][r[s]]=h(t[e][r[s]].$d));try{t[e][r[s]].endsWith(".000Z")&&(t[e][r[s]]=h(t[e][r[s]]))}catch{}}}this.setCraftTools(t,!1)}else return!1},async fetchCraftTools(t){await this.fetchCraftToolsFromStorage();const e=[{6:{value:"bqamh3rpi"},7:{value:"Table Query"},8:{value:"{'10'.EX.'Active'}"},9:{value:1},14:{value:12}}];if(this.toolChecklists.length===0||t){const{data:r}=await A.fetchFromStructureApp({fields:e});return this.setCraftTools(r,!0),r}else return this.toolChecklists},setCraftTools(t,e){this.toolChecklists=t,e&&w.setItem(O.storageToolCheckList,t)}}}),se=te("application",{state:()=>({formOptions:{crafts:[],experience:[],companies:[],credentials:[],relationships:[],employment:[],contactMethods:[]},voluntaryFormOptions:{affirmative:[],veterans:[],disability:{pages:[],options:[],form:{}}},formOptionsLoading:!1,voluntaryFormsLoading:!1,evergreenJobs:[]}),getters:{craftOptions:t=>t.formOptions.crafts,experienceOptions:t=>t.formOptions.experience,companyOptions:t=>t.formOptions.companies,credentialOptions:t=>t.formOptions.credentials,relationshipOptions:t=>t.formOptions.relationships,employmentOptions:t=>t.formOptions.employment,contactMethodOptions:t=>t.formOptions.contactMethods,affirmativeOptions:t=>t.voluntaryFormOptions.affirmative,veteranOptions:t=>t.voluntaryFormOptions.veterans,disabilityOptions:t=>t.voluntaryFormOptions.disability.options,disabilityPages:t=>t.voluntaryFormOptions.disability.pages,disabilityForm:t=>t.voluntaryFormOptions.disability.form,evergreenJobOptions:t=>t.evergreenJobs,formOptionsLoadingState:t=>t.formOptionsLoading,voluntaryLoadingState:t=>t.voluntaryFormsLoading,credentialGroups(){const t=[];return this.formOptions.credentials.forEach(e=>{const r={value:e[7],label:e[8],acronym:e[20],number:e[21]};t.find(n=>n.value===r.value)||t.push(r)}),t.sort((e,r)=>e.number>r.number?1:e.number<r.number?-1:0)},compiledCredentials(){const t=[];return this.credentialGroups.forEach(e=>{const r=e.value;e.list=[],this.formOptions.credentials.forEach(s=>{s[7]===r&&e.list.push(s)}),t.push(e)}),t}},actions:{async fetchFormOptions(){this.formOptionsLoading=!0;const t=[this.fetchExperienceOptions(),this.fetchContactMethodOptions(),this.fetchEmploymentOptions(),this.fetchCompanyOptions(),this.fetchCraftOptions(),this.fetchRelationshipOptions(),this.fetchEverGreenJobs()],e=await Promise.allSettled(t);return this.formOptionsLoading=!1,e},async fetchVoluntaryForms(){this.voluntaryFormsLoading=!0;const t=[this.fetchAffirmativeOptions(!0),this.fetchVeteranStatusOptions(),this.fetchDisabilityPages()],e=await Promise.allSettled(t);return this.voluntaryFormsLoading=!1,e},async fetchExperienceOptions(t){const e=[{7:{value:"Experience Options"},9:{value:1},14:{value:44}}];if(this.formOptions.experience.length===0||t){const{data:r}=await A.fetchFromRecruitingApp({fields:e});return this.setExperienceOptions(r,!0),r}else return this.formOptions.experience},setExperienceOptions(t,e){this.formOptions.experience=t,e&&w.setItem(O.storageExperienceOptions,t)},async fetchContactMethodOptions(t){const e=[{7:{value:"Contact Methods"},9:{value:1},14:{value:15}}];if(this.formOptions.contactMethods.length===0||t){const{data:r}=await A.fetchFromRecruitingApp({fields:e});return this.setContactMethods(r,!0),r}else return this.formOptions.contactMethods},setContactMethods(t,e){this.formOptions.contactMethods=t,e&&w.setItem(O.storageContactMethods,t)},async fetchEmploymentOptions(t){const e=[{7:{value:"Employment Options"},9:{value:1},14:{value:15}}];if(this.formOptions.employment.length===0||t){const{data:r}=await A.fetchFromRecruitingApp({fields:e});return this.setEmploymentOptions(r,!0),r}else return this.formOptions.employment},setEmploymentOptions(t,e){this.formOptions.employment=t,e&&w.setItem(O.storageEmploymentOptions,t)},async fetchCompanyOptions(t){const e=[{7:{value:"Company Options"},9:{value:1},14:{value:15}}];if(this.formOptions.companies.length===0||t){const{data:r}=await A.fetchFromStructureApp({fields:e});return this.setCompanyOptions(r,!0),r}else return this.formOptions.companies},setCompanyOptions(t,e){this.formOptions.companies=t,e&&w.setItem(O.storageCompanyOptions,t)},async fetchCraftOptions(t){const e=[{6:{value:"bp2pcb379"},7:{value:"Table Query"},8:{value:"{'12'.EX.'Yes'}"},9:{value:1},14:{value:59}}];if(this.formOptions.crafts.length===0||t){const{data:r}=await A.fetchFromStructureApp({fields:e});return this.setCraftOptions(r,!0),r}else return this.formOptions.crafts},setCraftOptions(t,e){this.formOptions.crafts=t,e&&w.setItem(O.storageCraftOptions,t)},async fetchRelationshipOptions(t){const e=[{6:{value:"brux2ptjd"},7:{value:"Table Query"},8:{value:"{'3'.GT.0}"},9:{value:1},14:{value:15}}];if(this.formOptions.relationships.length===0||t){const{data:r}=await A.fetchFromHiringApp({fields:e});return this.setRelationshipOptions(r,!0),r}else return this.formOptions.relationships},setRelationshipOptions(t,e){this.formOptions.relationships=t,e&&w.setItem(O.storageRelationshipOptions,t)},async fetchCredentialOptions(t){const e=[{6:{value:"bp2cdv2rd"},7:{value:"Table Query"},8:{value:"{'3'.GT.0}"},9:{value:1},14:{value:22}}];if(this.formOptions.credentials.length===0||t){const{data:r}=await A.fetchFromCredentialsAndTrainingApp({fields:e});return this.setCredentialOptions(r,!0),r}else return this.formOptions.credentials},setCredentialOptions(t,e){this.formOptions.credentials=t,e&&w.setItem(O.storageCredentialOptions,t)},async fetchAffirmativeOptions(t){const e=[{6:{value:"bqamkyebu"},7:{value:"Table Query"},8:{value:"{'7'.EX.'Active'}"},9:{value:1},14:{value:18}}];if(this.voluntaryFormOptions.affirmative.length===0||t){const{data:r}=await A.fetchFromCredentialsAndTrainingApp({fields:e});return r.forEach(s=>{s.val=s.value,s.value=s[3]}),this.setAffirmativeOptions(r,!0),r}else return this.voluntaryFormOptions.affirmative},setAffirmativeOptions(t,e){this.voluntaryFormOptions.affirmative=t,e&&w.setItem(O.storageAffirmativeOptions,t)},async fetchVeteranStatusOptions(t){const e=[{6:{value:"bqampwqag"},7:{value:"Table Query"},8:{value:"{'8'.EX.'Active'}"},9:{value:1},14:{value:14}}];if(this.voluntaryFormOptions.veterans.length===0||t){const{data:r}=await A.fetchFromCredentialsAndTrainingApp({fields:e});return this.setVeteranStatusOptions(r,!0),r}else return this.voluntaryFormOptions.veterans},setVeteranStatusOptions(t,e){this.voluntaryFormOptions.veterans=t,e&&w.setItem(O.storageVeteranStatusOptions,t)},async fetchDisabilityPages(t){const{hasDisability:e,kioskAccount:r}=Q();if(e){const s=[{6:{value:"bp96dpdmp"},7:{value:"Table Query"},8:{value:`{26.EX.${r.voluntaryForms.disability[9]}}AND{'46'.EX.'Active'}`},9:{value:1},14:{value:59}}],n=Object.assign({},r.voluntaryForms.disability);if(n.controlNumber=n[11],n.expiration=n[13],n.formId=n[12],n.rid=n[9],n.title=n[10],n.pages=this.voluntaryFormOptions.disability.pages,this.voluntaryFormOptions.disability.pages.length===0||t){const{data:i}=await A.fetchFromCredentialsAndTrainingApp({fields:s});return this.setDisabilityPages(i,!0),n.pages=i,this.setDisabilityForm(n,!0),i}else return this.voluntaryFormOptions.disability.pages}else return!1},setDisabilityPages(t,e){this.voluntaryFormOptions.disability.pages=t,e&&w.setItem(O.storageDisabilityPages,t)},setDisabilityForm(t,e){this.voluntaryFormOptions.disability.form=t,e&&w.setItem(O.storageDisabilityForm,t)},async fetchEverGreenJobs(t){const e=[{6:{value:"bpzpqe2q5"},7:{value:"Jobs"},8:{value:"{'60'.EX.'Yes'}AND{'71'.XEX.'Pending'}"},9:{value:1},14:{value:94}}];if(this.evergreenJobs.length===0||t){const{data:r}=await A.fetchFromStructureApp({fields:e});return this.setEverGreenJobs(r,!0),r}else return this.evergreenJobs},setEverGreenJobs(t,e){this.evergreenJobs=t,e&&w.setItem(O.storageEverGreenJobs,t)}}});var Rt={get dev(){return!1},get baseURL(){return this.dev?this.productionURL:this.productionURL},get token(){return this.dev?this.prodToken:this.prodToken},productionURL:"https://api.disa.com/api",devURL:"https://apisandbox.disa.com/api",tokenType:"Basic",prodToken:"YnJhbmRzYWZ3YXlhcGk6WFhUSkxXNFMy",devToken:"QnJhbmRzYWZ3YXlhcGk6V0RYQ1YxTEM2"};class qu{constructor(e,r){$(this,"axiosIns",null);$(this,"config",{...Rt});$(this,"isAlreadyFetchingAccessToken",!1);$(this,"subscribers",[]);this.axiosIns=e,this.config={...this.config,...r}}onAccessTokenFetched(e){this.subscribers=this.subscribers.filter(r=>r(e))}addSubscriber(e){this.subscribers.push(e)}async status(e,r,s){const n=[],i=[],a=[];let c={};r[10].forEach(x=>{const k=x.trim().replace("  "," ");a.push({name:k,label:`${k} Status`,status:"N/A",dateLabel:`Last ${k} Test`,date:"N/A",type:"DrugScreen"})}),(r[36]||r[10].includes("Background Only"))&&a.push({name:"Background",label:"Background Status",status:"Inactive",dateLabel:"Background Expiration Date",date:"N/A",type:"Background"});const o=[this.justChecking({ownerId:e.ownerId,socialSecurityNumbers:[e.ssn]},s),this.employeeStatus({employeeIdentifiers:{ssn:e.ssn}},s)],l=await Promise.allSettled(o),u=l[0].value.results;let m=[];if(l[1].status==="rejected")if(!e.firstName||!e.lastName||!e.phoneNumber)m=[];else{const x={employeeIdentifiers:{ssn:e.ssn,externalEmployeeId:Js(e.externalEmployeeId)?e.externalEmployeeId:""},firstName:e.firstName,lastName:e.lastName,phoneNumber:e.phoneNumber.replace(/[^0-9]/g,""),emailAddress:Js(e.email)?e.email:""};await this.createEmployee(x,s);try{m=await this.employeeStatus({employeeIdentifiers:{ssn:e.ssn}},s)}catch{m=[]}}else m=l[1].value;return u.length>0&&(c=u[0],c.dateChecked=h(),c.ownerStatus="Inactive",i.push({name:"Last Urine Test",date:h(c.lastUrineTest).isValid()?h(c.lastUrineTest).format("MM/DD/YYYY"):"N/A"}),i.push({name:"Last Hair Test",date:h(c.lastHairTest).isValid()?h(c.lastHairTest).format("MM/DD/YYYY"):"N/A"})),a.forEach(x=>{const k=m.find(T=>{const j=T.policyId.split("-")[1].trim().split("Consortium Policy")[0].trim();return j===x.name?T:(x.name==="DCCHT w/ Randoms"||x.name==="DCCHT w/  Randoms")&&(j==="DCCHT w/Randoms"||j==="DCCHT w/ Randoms")?x:""});x.name==="Background"&&(c.backgrounds==="Active"&&(x.status="Active"),x.date=h(c.backgroundsExpDate).isValid()?h(c.backgroundsExpDate).format("MM/DD/YYYY"):"N/A"),x.name==="NASAP"&&(c.nasapStatus==="Active"&&(x.status="Active"),x.date=h(c.lastNASAPTest).isValid()?h(c.lastNASAPTest).format("MM/DD/YYYY"):"N/A"),x.name.startsWith("DCCHA")&&(x.dateLabel="Last Urine Test",x.date=h(c.lastUrineTest).isValid()?h(c.lastUrineTest).format("MM/DD/YYYY"):"N/A"),x.name.startsWith("DCCHT")&&(x.dateLabel="Last Hair Test",x.date=h(c.lastHairTest).isValid()?h(c.lastHairTest).format("MM/DD/YYYY"):"N/A"),x.name==="DCCOF"&&(i.push({name:"Last Oral Fluid Test",date:h(c.lastOralFluidTest).isValid()?h(c.lastOralFluidTest).format("MM/DD/YYYY"):"N/A"}),x.date=h(c.lastOralFluidTest).isValid()?h(c.lastOralFluidTest).format("MM/DD/YYYY"):"N/A"),k&&(x={...x,...k},x.status=k.policyStatus),n.push(x)}),n.find(x=>x.status==="Inactive"||x.status==="Inactive Retest"||x.status==="INACTIVE"||x.status==="Inactive Pending"||x.status==="")||c.dccStatus!=="ACTIVE"?c.ownerStatus="Inactive":c.ownerStatus="Active",{disaStatus:c,policies:n,testDates:i}}async justChecking(e){return this.axiosIns({method:"post",url:"/justChecking",data:e,withCredentials:!0}).then(r=>r.data).catch(r=>{throw r})}employeeStatus(e,r){return this.axiosIns.post("/employee/status",e,{headers:{Authorization:`Basic ${r}`}}).then(s=>s.data).catch(s=>{throw s})}policies(e){return this.axiosIns.get("/drugTest/policy",{headers:{Authorization:`Basic ${e}`}}).then(r=>r.data).catch(r=>{throw r})}testPurposes(e){return this.axiosIns.get("/drugTest/testPurpose",{headers:{Authorization:`Basic ${e}`}}).then(r=>r.data).catch(r=>{throw r})}clientLocations(e){return this.axiosIns.get("/client/locations",{headers:{Authorization:`Basic ${e}`}}).then(r=>r.data).catch(r=>{throw r})}collectionSites(e,r){let s="/drugTest/collectionSite";return e.collectionSiteId?s=`/drugTest/collectionSite/${e.collectionSiteId}`:e.zipCode&&e.radius?s=`/drugTest/collectionSite/zipCode/${e.zipCode}/radius/${e.radius}`:e.zipCode?s=`/drugTest/collectionSite/zipCode/${e.zipCode}`:e.countryCode&&e.stateProvinceCode&&e.cityName?s=`/drugTest/collectionSite/country/${e.countryCode}/stateProvince/${e.stateProvinceCode}/city/${e.cityName}`:e.countryCode&&e.stateProvinceCode&&(s=`/drugTest/collectionSite/country/${e.countryCode}/stateProvince/${e.stateProvinceCode}`),this.axiosIns.get(s,{headers:{Authorization:`Basic ${r}`}}).then(n=>n.data).catch(n=>{throw n})}orderECCF(e,r){return this.axiosIns.post("/drugTest/eccf/order",e,{headers:{Authorization:`Basic ${r}`}}).then(s=>s.data).catch(s=>{throw s})}validateECCF(e,r){return this.axiosIns.post("/drugTest/eccf/validate",e,{headers:{Authorization:`Basic ${r}`}}).then(s=>s.data).catch(s=>{throw s})}getECCFOrder(e,r){if(!e.authorizationNumber)throw"Authorization Number Required!";let s=`/drugTest/eccf/order/${e.authorizationNumber}`;return e.policyId&&e.authorizationNumber&&(s=`/drugTest/eccf/order/${e.authorizationNumber}/policy/${e.policyId}`),this.axiosIns.get(s,{headers:{Authorization:`Basic ${r}`}}).then(n=>n.data).catch(n=>{throw n})}getECCFOrderStatus(e,r){if(!e.authorizationNumber)throw"Authorization Number Required!";let s=`/drugTest/eccf/order/${e.authorizationNumber}/status`;return e.policyId&&e.authorizationNumber&&(s=`/drugTest/eccf/order/${e.authorizationNumber}/policy/${e.policyId}/status`),this.axiosIns.get(s,{headers:{Authorization:`Basic ${r}`}}).then(n=>n.data).catch(n=>{throw n})}}const Js=t=>!(typeof t=="undefined"||t===null||t==="");function Lu(t,e){return{disa:new qu(t,e)}}const Mu=Fr(_r.create({baseURL:Rt.baseURL,timeout:5e4,headers:{"Content-Type":"application/json",Authorization:`${Rt.tokenType} ${Rt.token}`}}),{maxRequests:6,perMilliseconds:1e3}),{disa:Uu}=Lu(Mu,{}),$t=te("hiring",{state:()=>({deployments:[],dispatches:[],inprocesses:[],assignments:[],flaggedAssignments:[],newEmployee:{}}),getters:{userAccess(){const{userAccess:t}=W();return t||[]},deploymentsForProject(){const{active:t}=W();return this.modifiedDeployment.length>0?this.modifiedDeployment.filter(e=>e.map.pid===t[3]):[]},alreadyArrived(){const{active:t}=W();return this.modifiedDeployment.filter(e=>e[20]==="Complete"&&e.map.pid===t[3])},deploymentQuery(){let t="";return this.userAccess.forEach((e,r)=>{t+=`{'134'.EX.'${e[3]}'}${r<this.userAccess.length-1?"OR":""}`}),`(${t})AND({'33'.OAF.'today'}OR{'33'.IR.'last 10 d'})AND({'20'.EX.'In Process'}OR{'20'.EX.'Complete'})AND{'128'.EX.'Yes'}AND({'27'.EX.'6'}OR{'27'.EX.'7'})`},dispatchQuery(){let t="";return this.userAccess.forEach((e,r)=>{t+=`{'94'.EX.'${e[3]}'}${r<this.userAccess.length-1?"OR":""}`}),`(${t})AND{'17'.EX.'In Process'}`},inProcessQuery(){let t="";return this.userAccess.forEach((e,r)=>{t+=`{'108'.EX.'${e[3]}'}${r<this.userAccess.length-1?"OR":""}`}),`(${t})AND{'37'.EX.'In Process'}`},assignmentQuery(){let t="";return this.userAccess.forEach((e,r)=>{t+=`{'74'.EX.'${e[3]}'}${r<this.userAccess.length-1?"OR":""}`}),`(${t})AND{'21'.EX.'In Process'}AND{'102'.EX.'Active'}`},pipelineForProject(){const{active:t}=W();return this.modifiedInProcess.concat(this.modifiedDispatch).concat(this.modifiedDeployment).filter(r=>r.map.pid===t[3])},assignmentsForProject(){const{active:t}=W();return this.modifiedAssignments.filter(e=>e.map.pid===t[3])},modifiedInProcess(){const t=[];return this.inprocesses.forEach(e=>{const r={pid:e[108],name:e[39],phone:e[14],status:"In Process",offerDate:e[197].$d,fullJob:e[106],craft:e[175],job:e[120],start:null,jobNumber:e[44],workdayId:e[216]};Object.assign(e,{map:r}),t.push(e)}),t},modifiedDeployment(){const t=[];return this.deployments.forEach(e=>{const r={pid:e[134],name:e[31],phone:e[42],status:"Deployed",offerDate:e[144]===void 0?"":e[144].$d,fullJob:e[45],craft:e[132],job:e[60],start:e[33],jobNumber:e[85],workdayId:e[152],contact:e[186]};Object.assign(e,{map:r}),t.push(e)}),t},modifiedDispatch(){const t=[];return this.dispatches.forEach(e=>{const r={pid:e[157],name:e[25],phone:e[14],status:"In Process",offerDate:e[165].$d,fullJob:e[45],craft:e[141],job:e[76],start:null,jobNumber:e[63],workdayId:e[178]};Object.assign(e,{map:r}),t.push(e)}),t},modifiedAssignments(){const t=[];return this.assignments.forEach(e=>{const r={pid:e[74],name:e[75],phone:e[76],status:"Arrived",offerDate:e[79].$d,fullJob:e[20],craft:e[68],job:e[33],start:e[1].$d,jobNumber:e[105],workdayId:e[104]};Object.assign(e,{map:r}),t.push(e)}),t},getFlaggedAssignments(){return this.assignmentsForProject.filter(t=>t[112])},getNewEmployee:t=>t.newEmployee},actions:{refreshAssignment({assignment:t}){const e=this.assignments.findIndex(r=>r[3]===t[3]);e>-1&&(this.assignments[e]=t)},async checkDisa({project:t,roster:e}){const r=[];e.forEach(n=>{n.employee[188].length===9&&r.push(n.employee[188])});const s={ownerId:t[322],socialSecurityNumbers:r};try{const i=(await Uu.justChecking(s)).results;console.log(i);const a=[];i.forEach(o=>{o.dateChecked=h(),t[321][36]&&o.dccStatus==="ACTIVE"||o.dccStatus==="ACTIVE"?o.ownerStatus="Active":o.ownerStatus="Inactive";const l=o.socialSecurityNumber.slice(o.socialSecurityNumber.length-4),u=o.name.toLowerCase().trim(),m=e.filter(g=>g.employee[188].slice(g.employee[188].length-4)===l?g:null);if(m.length===1){const g={6:{value:m[0].employee[3]},7:{value:m[0].offer[3]},10:{value:JSON.stringify(o)}};a.push(g)}else if(m.length>1){const g=m.find(x=>{const k=x.employee[20].toLowerCase().trim().split(),T=x.employee[22].toLowerCase().trim().split();return u.includes(k)||u.includes(T)?x:null});if(g){const x={6:{value:g.employee[3]},7:{value:g.offer[3]},10:{value:JSON.stringify(o)}};a.push(x)}}else console.log(o)});const{data:c}=await A.upsertRecordsXML({to:"bsfjg3kz9",data:a,fieldsToReturn:[15],formatObject:15});if(!c.length>0)throw"Something went wrong";c.forEach(o=>{const l=this.assignments.findIndex(u=>u.employee[3]===o[15][6]);l>-1?this.assignments[l].employee[556]=o[15]:console.log("no employee found")})}catch(n){throw console.log(n),"Something went wrong"}},async checkHiringData(){const{getUser:t}=C();if(t[11]===11)return await this.getDeployments();if(t[11]===5)return await this.getHiringData()},async getHiringData(){const t=await this.getDeployments();return this.getDispatches(),this.getInProcesses(),this.getAssignments(),t},async getInProcesses(){if(this.inprocesses.length===0){const{data:t}=await A.fetchFromHiringApp({fields:[{6:{value:"bp3gawbee"},7:{value:"Table Query"},8:{value:this.inProcessQuery},9:{value:1},14:{value:239}}]});return this.inprocesses=t,t}else return this.inprocesses},async getDispatches(){if(this.dispatches.length===0){const{data:t}=await A.fetchFromHiringApp({fields:[{6:{value:"bp3gaxedv"},7:{value:"Table Query"},8:{value:this.dispatchQuery},9:{value:1},14:{value:193}}]});return this.dispatches=t,t}else return this.dispatches},async getDeployments(){if(this.deployments.length===0){const{data:t}=await A.fetchFromHiringApp({fields:[{6:{value:"bp3gaymc3"},7:{value:"Table Query"},8:{value:this.deploymentQuery},9:{value:1},14:{value:201}}]});return this.deployments=t,t}else return this.dispatches},async getAssignments(){if(this.assignments.length===0){console.log(this.assignmentQuery);const{data:t}=await A.fetchFromHiringApp({fields:[{6:{value:"bp3gazpqj"},7:{value:"Table Query"},8:{value:this.assignmentQuery},9:{value:1},14:{value:132}}]});return console.log(t),this.assignments=t,t}else return this.assignments},async updateArrival({row:t,added:e}){const r=t,s=this.deployments.find(n=>n[3]===r[3]?n:!1);s&&(e?(await this.addAssignment(s),await this.editEmployee({id:s.employee[3],status:7}),this.editDeployment(s[3],"Complete")):(await this.cancelAssignment(s),await this.editEmployee({id:s.employee[3],status:6}),this.editDeployment(s[3],"In Process")))},async editEmployee({id:t,status:e}){const{data:r}=await A.upsertRecordsXML({to:"bp3gb7ng2",data:[{3:{value:t},79:{value:e}}],fieldsToReturn:[3]});if(r[0]===void 0)throw"Something went wrong";return r[0]},async editDeployment(t,e){const{data:r}=await A.upsertRecordsXML({to:"bp3gaymc3",data:[{3:{value:t},20:{value:e},22:{value:new Date}}],fieldsToReturn:[201],formatObject:201});if(r[0]!==void 0){const s=this.deployments.findIndex(n=>n[3]===r[0][201][3]);s>-1&&(this.deployments[s]=r[0][201])}},async addAssignment(t){const{data:e}=await A.upsertRecordsXML({to:"bp3gazpqj",data:[{6:{value:t[3]},13:{value:t[15]},18:{value:t.employee[3]},60:{value:""}}],fieldsToReturn:[108],formatObject:108});if(e[0]===void 0)throw"There was an error";return this.assignments.push(e[0][108]),e[0]},async cancelAssignment(t){const{data:e}=await A.upsertRecordsXML({to:"bp3gazpqj",data:[{3:{value:t.assignment[0][3]},22:{value:new Date},21:{value:"Canceled"},19:{value:""},60:{value:""}}],fieldsToReturn:[108],formatObject:108});if(e[0]===void 0)throw"There was an error";{const r=this.assignments.findIndex(s=>s[3]===e[0][108][3]);r>-1&&this.assignments.splice(r,1)}return e[0]},async flagAssignment({record:t,status:e}){const{data:r}=await A.upsertRecordsXML({to:"bp3gazpqj",data:[{3:{value:t[3]},112:{value:e}}],fieldsToReturn:[108],formatObject:108});if(r[0]===void 0)throw"There was an error";{const s=this.assignments.findIndex(n=>n[3]===r[0][108][3]);s>-1&&(this.assignments[s]=r[0][108])}return r[0]},updateNewEmployee({info:t}){for(const[e,r]of Object.entries(t))this.newEmployee[e]===void 0?Object.assign(this.newEmployee,{[e]:{value:r}}):this.newEmployee[e]=r}}}),Gs=te("request",{state:()=>({requests:[],newRequest:{},addedClassifications:[],addedNames:[]}),getters:{getClassifications(){return this.addedClassifications},getNames(){const t=[];return this.addedClassifications.forEach(e=>{e.names.forEach(r=>{t.push(r)})}),t},activeProject(){const{active:t}=W();return t},requestOptions(){return{contacts:[...new Map(this.activeProject.contacts.map(t=>[t[18],t])).values()],crafts:this.activeProject.crafts,jobNumbers:this.activeProject.jobNumbers,locations:this.activeProject.locations,perdiem:this.activeProject.perdiem}},siteContacts(){return[...new Map(this.activeProject.contacts.map(t=>[t[18],t])).values()]},requestQuery(){const{userAccess:t}=C();let e="";return t.forEach((r,s)=>{e+=`{'6'.EX.'${r[9]}'}${s<t.length-1?"OR":""}`}),`(${e})AND{'14'.XEX.'Canceled'}AND{'147'.XEX.'6'}`},modifiedOpenRequests(){const{active:t}=W(),{modifiedInProcess:e,modifiedDispatch:r,modifiedDeployment:s,modifiedAssignments:n}=$t(),i=[];return t.openRequests.forEach(a=>{a.classes.forEach(o=>{Object.assign(o,{duration:o[17]==="Closed"?h.duration(h(o[50].$d).diff(h(o[29].$d))).humanize():h(o[50].$d).fromNow(),aboveAvg:o[23]>o.avgRate,aboveAmount:o[23]>o.avgRate?`$ ${(o[23]-o.avgRate).toFixed(2)} above average`:"",balance:o[18]-o.offers.filter(l=>l[21]==="Accepted").length,offers:o.offers,offersCount:o.offers.length,accepted:o.offers.filter(l=>l[21]==="Accepted"),rejected:o.offers.filter(l=>l[21]==="Rejected"),rescinded:o.offers.filter(l=>l[21]==="Rescinded"),need:o[18],title:`${o[43]} ${o[12]}`})});const c={openDate:a[82],closedDate:a[86],id:a[3],pid:a[6],office:a[103],jobNumber:a[27],offers:a.offers,offersCount:a.offers.length,accepted:a.offers.filter(o=>o[21]==="Accepted"),rejected:a.offers.filter(o=>o[21]==="Rejected"),rescinded:a.offers.filter(o=>o[21]==="Rescinded"),deployNumber:a[243],balance:a.classes.reduce((o,l)=>o+l[18],0)-a.offers.filter(o=>o[21]==="Accepted").length,need:a.classes.reduce((o,l)=>o+l[18],0),inprocesses:e.filter(o=>o[138]===a[3]),dispatches:r.filter(o=>o[95]===a[3]),deployments:s.filter(o=>o[80]===a[3]),assignments:n.filter(o=>o[109]===a[3]),status:a[14],hot:a[121],duration:h(a[82].$d).fromNow()};Object.assign(a,{map:c}),i.push(a)}),i},modifiedClosedRequests(){const{active:t}=W(),{modifiedInProcess:e,modifiedDispatch:r,modifiedDeployment:s,modifiedAssignments:n}=$t(),i=[];return t.closedRequests.forEach(a=>{a.classes.forEach(o=>{Object.assign(o,{duration:h.duration(h(o[50].$d).diff(h(o[29].$d))).humanize(),balance:o[18]-o.offers.filter(l=>l[21]==="Accepted").length,offers:o.offers,offersCount:o.offers.length,accepted:o.offers.filter(l=>l[21]==="Accepted"),rejected:o.offers.filter(l=>l[21]==="Rejected"),rescinded:o.offers.filter(l=>l[21]==="Rescinded"),need:o[18],title:`${o[43]} ${o[12]}`})});const c={created:h(a[82].$d).fromNow(),openDate:a[82],closedDate:a[86],id:a[3],pid:a[6],office:a[103],jobNumber:a[27],need:a.classes.reduce((o,l)=>o+l[18],0),offers:a.offers,offersCount:a.offers.length,accepted:a.offers.filter(o=>o[21]==="Accepted"),rejected:a.offers.filter(o=>o[21]==="Rejected"),rescinded:a.offers.filter(o=>o[21]==="Rescinded"),deployNumber:a[243],balance:a.classes.reduce((o,l)=>o+l[18],0)-a.offers.filter(o=>o[21]==="Accepted").length,inprocesses:e.filter(o=>o[138]===a[3]),dispatches:r.filter(o=>o[95]===a[3]),deployments:s.filter(o=>o[80]===a[3]),assignments:n.filter(o=>o[109]===a[3]),status:a[14],hot:a[121],duration:h.duration(h(a[82].$d).diff(h(a[86].$d))).humanize(),durationRaw:h.duration(h(a[82].$d).diff(h(a[86].$d))).as("milliseconds")};Object.assign(a,{map:c}),i.push(a)}),i},modifiedPendingRequests(){const{active:t}=W(),{modifiedInProcess:e,modifiedDispatch:r,modifiedDeployment:s,modifiedAssignments:n}=$t(),i=[];return t.pendingRequests.forEach(a=>{a.classes.forEach(o=>{Object.assign(o,{duration:h.duration(h(o[50].$d).diff(h(o[29].$d))).humanize(),balance:o[18]-o.offers.filter(l=>l[21]==="Accepted").length,offers:o.offers,offersCount:o.offers.length,accepted:o.offers.filter(l=>l[21]==="Accepted"),rejected:o.offers.filter(l=>l[21]==="Rejected"),rescinded:o.offers.filter(l=>l[21]==="Rescinded"),need:o[18],title:`${o[43]} ${o[12]}`})});const c={created:h(a[82].$d).fromNow(),openDate:a[82],closedDate:a[86],id:a[3],pid:a[6],office:a[103],jobNumber:a[27],need:a.classes.reduce((o,l)=>o+l[18],0),offers:a.offers,offersCount:a.offers.length,accepted:a.offers.filter(o=>o[21]==="Accepted"),rejected:a.offers.filter(o=>o[21]==="Rejected"),rescinded:a.offers.filter(o=>o[21]==="Rescinded"),deployNumber:a[243],balance:a.classes.reduce((o,l)=>o+l[18],0)-a.offers.filter(o=>o[21]==="Accepted").length,inprocesses:e.filter(o=>o[138]===a[3]),dispatches:r.filter(o=>o[95]===a[3]),deployments:s.filter(o=>o[80]===a[3]),assignments:n.filter(o=>o[109]===a[3]),status:a[14],hot:a[121],duration:h.duration(h(a[82].$d).diff(h(a[86].$d))).humanize(),durationRaw:h.duration(h(a[82].$d).diff(h(a[86].$d))).as("milliseconds")};Object.assign(a,{map:c}),i.push(a)}),i.sort((a,c)=>a[1].$d>c[1].$d?-1:1)},openRequestsForProject(){return this.modifiedOpenRequests.length>0?this.modifiedOpenRequests:[]},closedRequestsForProject(){return this.modifiedClosedRequests.length>0?this.modifiedClosedRequests:[]},pendingRequestsForProject(){return this.modifiedPendingRequests.length>0?this.modifiedPendingRequests:[]},openRequestsForProjectSummary(){const t=[];this.openRequestsForProject.forEach(s=>{s.classes.forEach(n=>{t.push(n)})});const{length:e}=t,r=t.reduce((s,n)=>s+n[23]/e,0);return{requestCount:this.openRequestsForProject.length,classCount:this.openRequestsForProject.reduce((s,n)=>s+n.classes.length,0),need:this.openRequestsForProject.reduce((s,n)=>s+n.map.need,0),offers:this.openRequestsForProject.reduce((s,n)=>s+n.map.offersCount,0),balance:this.openRequestsForProject.reduce((s,n)=>s+n.map.balance,0),avgRate:r.toFixed(2)}},closedRequestsForProjectSummary(){const t=[];this.closedRequestsForProject.forEach(s=>{s.classes.forEach(n=>{t.push(n)})});const{length:e}=t,r=t.reduce((s,n)=>s+n[23]/e,0);return{requestCount:this.closedRequestsForProject.length,classCount:this.closedRequestsForProject.reduce((s,n)=>s+n.classes.length,0),need:this.closedRequestsForProject.reduce((s,n)=>s+n.map.need,0),offers:this.closedRequestsForProject.reduce((s,n)=>s+n.map.offersCount,0),balance:this.closedRequestsForProject.reduce((s,n)=>s+n.map.balance,0),avgRate:r.toFixed(2),avgDuration:h.duration(this.closedRequestsForProject.reduce((s,n)=>s+n.map.durationRaw/this.closedRequestsForProject.length,0)).humanize()}},pendingRequestsForProjectSummary(){const t=[];this.pendingRequestsForProject.forEach(s=>{s.classes.forEach(n=>{t.push(n)})});const{length:e}=t,r=t.reduce((s,n)=>s+n[23]/e,0);return{requestCount:this.pendingRequestsForProject.length,classCount:this.pendingRequestsForProject.reduce((s,n)=>s+n.classes.length,0),need:this.pendingRequestsForProject.reduce((s,n)=>s+n.map.need,0),offers:this.pendingRequestsForProject.reduce((s,n)=>s+n.map.offersCount,0),balance:this.pendingRequestsForProject.reduce((s,n)=>s+n.map.balance,0),avgRate:r.toFixed(2)}},nameRequestsForProject(){const t=[],e=this.openRequestsForProject.concat(this.pendingRequestsForProject),r=[];return e.forEach(s=>{s.classes.forEach(n=>{r.push(n)})}),r.forEach(s=>{s.names.forEach(n=>{Object.assign(n,{expand:!1}),t.push(n)})}),t}},actions:{pushClassification(t){this.addedClassifications.push(t)},spliceClassification({item:t}){const e=this.addedClassifications.findIndex(r=>r.id===t.id);e>-1&&this.addedClassifications.splice(e,1)},pushName(t){const e=this.addedClassifications.findIndex(r=>r.id===t.classification.id);this.addedClassifications[e].names===void 0?Object.assign(this.addedClassifications[e],{names:[t]}):this.addedClassifications[e].names.push(t),console.log(this.addedClassifications),console.log(this.getNames)},spliceName({item:t}){const e=this.addedNames.findIndex(r=>r.id===t.id);e>-1&&this.addedNames.splice(e,1)},async storeRequest({request:t}){const{checkForMatch:e}=W(),r=await e({request:t}),{addPendingRequest:s}=W(),{getUser:n}=C();this.newRequest=t;const i={6:{value:this.activeProject[3]},14:{value:"Pending"},92:{value:this.activeProject[12]},9:{value:t.jobNumber[3]},31:{value:t.location[3]},60:{value:t.contact[3]},64:{value:G.formatDate(t.dateNeeded,"MM-DD-YYYY")},68:{value:t.perdiem!==void 0?"Yes":"No"},82:{value:new Date},272:{value:n[3]},147:{value:2},281:{value:!0},280:{value:r?r[3]:""},282:{value:t.restriction.value},284:{value:t.reason.value}};t.perdiem&&t.perdiem[3]!==void 0&&Object.assign(i,{65:{value:t.perdiem[3]}});const{data:a}=await A.upsertRecordsXML({to:"bpzpyjbuy",data:[i],fieldsToReturn:[266],formatObject:266});if(a.length>0){this.newRequest=a[0][266];const c=[],o=[];return this.addedClassifications.forEach(u=>{const m={6:{value:this.newRequest[3]},9:{value:u.job[3]},17:{value:"Pending"},18:{value:u.qty},23:{value:u.rate},238:{value:u.id}};c.push(m),u.names.length>0&&u.names.forEach(g=>{o.push(g)})}),(await this.upsertClassifications({fields:c,names:o})).forEach(u=>{this.newRequest.classes.push(u[220])}),s(this.newRequest),!0}else return!1},async addToRequest({request:t}){const{mergePendingRequest:e}=W();this.newRequest=t;const r=[],s=[];return this.addedClassifications.forEach(i=>{const a=t.classes.find(o=>o[9]===i.job[3]&&o[23]===parseFloat(i.rate)),c=a===void 0?{6:{value:this.newRequest[3]},9:{value:i.job[3]},17:{value:"Pending"},18:{value:parseInt(i.qty)<i.names.length?i.names.length:i.qty},23:{value:i.rate},238:{value:i.id}}:{3:{value:a[3]},18:{value:parseInt(i.qty)<i.names.length?i.names.length+a[18]:parseInt(i.qty)+a[18]},238:{value:i.id}};r.push(c),i.names.length>0&&i.names.forEach(o=>{s.push(o)})}),(await this.upsertClassifications({fields:r,names:s})).forEach(i=>{const a=!this.newRequest.classes||this.newRequest.classes.length===0?-1:this.newRequest.classes.findIndex(c=>c[3]===i[220][3]);a<0?this.newRequest.classes.push(i[220]):this.newRequest.classes[a]=i[220]}),e(this.newRequest),t},async upsertClassifications({fields:t,names:e}){const{getUser:r}=C(),{data:s}=await A.upsertRecordsXML({to:"bpzpyqcu4",data:t,fieldsToReturn:[220],formatObject:220});if(s.length>0)if(e.length>0){const n=[];e.forEach(a=>{const c={6:{value:a.firstName},7:{value:a.lastName},8:{value:a.phone},19:{value:h().tz("America/Chicago")},16:{value:a.ssn},10:{value:"Has Not Arrived"},14:{value:`${r[35]} ${r[37]}`}},o=s.find(l=>l[220][238]===a.classification.id);o!==void 0&&Object.assign(c,{17:{value:o[220][3]}}),n.push(c)});const i=await A.upsertRecordsXML({to:"bsg4yb4wa",data:n,fieldsToReturn:[15],formatObject:15});if(i.data.length>0)return i.data.forEach(a=>{const c=s.findIndex(o=>o[220][3]===a[15][17]);s[c][220].names===void 0?Object.assign(s[c][220],{names:[a[15]]}):s[c][220].names.push(a[15])}),s;throw"Something went wrong"}else return s;else throw"Something went wrong"},resetRequest(){this.newRequest={},this.addedClassifications=[],this.addedNames=[]},async submitCancelRequest({request:t}){const{removeRequest:e}=W(),{getUser:r}=C(),s=[];if(t.classes.forEach(i=>{const a={3:{value:i[3]},17:{value:"Cancelled"},51:{value:new Date},128:{value:6}};s.push(a)}),s.length>0)try{await A.upsertRecordsXML({to:"bpzpyqcu4",data:s,fieldsToReturn:[220],formatObject:220})}catch{throw"There was a problem. Try again later."}const{data:n}=await A.upsertRecordsXML({to:"bpzpyjbuy",data:[{3:{value:t[3]},14:{value:"Cancelled"},84:{value:new Date},147:{value:6},276:{value:r[3]},277:{value:`${r[35]} ${r[37]}`}}],fieldsToReturn:[266],formatObject:266});if(n.length>0)return e({request:n[0][266]}),!0;throw"There was a problem. Try again later."},async submitCancelClassification({item:t}){const{removeClassification:e}=W(),r=[{3:{value:t[3]},17:{value:"Cancelled"},51:{value:new Date},128:{value:6}}],{data:s}=await A.upsertRecordsXML({to:"bpzpyqcu4",data:r,fieldsToReturn:[220],formatObject:220});if(s.length>0){if(s[0][220][243]>0)return e({classification:s[0][220]}),"Classification removed!";{const n={3:s[0][220][6],classes:[]};return await this.submitCancelRequest({request:n}),"Classification removed and request canceled!"}}else throw"There was a problem. Try again later."},async upsertName({name:t,action:e}){const{getUser:r}=C(),{refreshClassification:s}=W(),n=e==="create"?{6:{value:t.firstName},7:{value:t.lastName},8:{value:t.phone},17:{value:t.classification[3]},19:{value:h().tz("America/Chicago")},16:{value:t.ssn},10:{value:"Has Not Arrived"},14:{value:`${r[35]} ${r[37]}`}}:{3:{value:t[3]},11:{value:!0},12:{value:h().tz("America/Chicago")},13:{value:`${r[35]} ${r[37]}`}},{data:i}=await A.upsertRecordsXML({to:"bsg4yb4wa",data:[n],fieldsToReturn:[20],formatObject:20});if(i[0]!==void 0)return s({classification:i[0][20]}),i[0][20]}}}),{capitalize:Zs}=Sa,W=te("projects",{state:()=>({projects:[],requests:[],activeProject:{},matrixColumns:[]}),getters:{active(){return this.activeProject[3]!==void 0?this.activeProject:this.projects.length>0?this.projects[0]:{openRequests:[],closedRequests:[]}},userAccess(){return this.projects.length>0?this.projects:null},projectCrafts(){return this.active.crafts!==void 0?this.active.crafts.sort((t,e)=>t.order>e.order?1:-1):null},usersForProject(){return this.active.users!==void 0?this.active.users:[]},availableMatrixColumns(){const t=this.active?this.active.matrix:[],e=[];return this.matrixColumns.forEach(r=>{t.findIndex(n=>n[18]===r[12])<0&&e.push(r)}),e.forEach(r=>{const s=r[6].split(" ");let n="";s.forEach((i,a)=>{n+=a>0?` ${Zs(i)}`:Zs(i)}),r[6]=n}),e.length>0?[...new Map(e.map(r=>[r[6],r])).values()]:[]}},actions:{addNewMatrixColumn({project:t,data:e}){const r=this.projects.findIndex(s=>s[3]===t[3]);r>-1&&this.projects[r].matrix.push(e)},async getMatrixColumns(){if(this.matrixColumns.length===0){const{data:t}=await A.fetchFromProjectsApp({fields:[{14:{value:9},9:{value:1},8:{value:"{'13'.EX.false}"},7:{value:"Table Query"},6:{value:"bsjdig6gn"}}]});return this.matrixColumns=t,this.availableMatrixColumns}else return this.availableMatrixColumns},refreshClassification({classification:t}){const e=this.projects.findIndex(r=>r[3]===t[7]);if(t[131]==="Pending"){const r=this.projects[e].pendingRequests.findIndex(n=>n[3]===t[6]),s=this.projects[e].pendingRequests[r].classes.findIndex(n=>n[3]===t[3]);this.projects[e].pendingRequests[r].classes[s]=t}else if(t[131]==="Open"){const r=this.projects[e].openRequests.findIndex(n=>n[3]===t[6]),s=this.projects[e].openRequests[r].classes.findIndex(n=>n[3]===t[3]);this.projects[e].openRequests[r].classes[s]=t}},addUser({user:t}){this.projects.find(r=>r[3]===this.active[3]).users.push(t)},updateActive({project:t}){this.activeProject=t},async getProjectsData(){const{userAccess:t}=C();return t.forEach(e=>{if(e[7]==="Project"){const r=e.project?e.project:{};(r[3]===void 0?0:this.projects.findIndex(n=>n[3]===r[3]))<0&&this.projects.push(r)}else e[7]==="Facility"&&e.facility.projects.forEach(s=>{this.projects.findIndex(i=>i[3]===s[3])<0&&this.projects.push(s)})}),this.projects},addPendingRequest(t){const e=this.projects.findIndex(r=>r[3]===t[6]);if(e>-1){this.projects[e].pendingRequests.unshift(t);const{resetRequest:r}=Gs();r()}},mergePendingRequest(t){console.log(t),Object.assign(t,{updated:!0});const e=this.projects.findIndex(r=>r[3]===t[6]);if(e>-1){const r=this.projects[e].pendingRequests.findIndex(n=>n[3]===t[3]);r>-1&&(this.projects[e].pendingRequests[r]=t,setTimeout(()=>{this.projects[e].pendingRequests[r].updated=!1},1e4));const{resetRequest:s}=Gs();s()}},removeRequest({request:t}){const e=this.projects.findIndex(r=>r[3]===t[6]);if(e>-1){const r=this.projects[e].pendingRequests.findIndex(s=>s[3]===t[3]);r>-1&&this.projects[e].pendingRequests.splice(r,1)}},removeClassification({classification:t}){const e=this.projects.findIndex(r=>r[3]===t[7]);if(e>-1){const r=this.projects[e].pendingRequests.findIndex(s=>s[3]===t[6]);if(r>-1){const s=this.projects[e].pendingRequests[r].classes.findIndex(n=>n[3]===t[3]);s>-1&&this.projects[e].pendingRequests[r].classes.splice(s,1)}}},udpateProjectCrafts({craft:t}){const e=this.projects.findIndex(r=>r[3]===t[7]);if(e>-1){const r=this.projects[e].crafts.findIndex(s=>s[3]===t[3]);r>-1&&(this.projects[e].crafts[r]=t)}},async checkForMatch({request:t}){let e;return t.perdiem===void 0?e=this.active.openRequests.filter(r=>r[9]===t.jobNumber[3]&&r[31]===t.location[3]&&r[60]===t.contact[3]):e=this.active.openRequests.filter(r=>r[9]===t.jobNumber[3]&&r[31]===t.location[3]&&r[60]===t.contact[3]&&r[65]===t.perdiem[3]),e.length>0?(e.sort((r,s)=>r[1].$d<s[1].$d?1:-1),e[0]):null}}});function Bu(){this.__data__=[],this.size=0}var Hu=Bu;function Ku(t,e){return t===e||t!==t&&e!==e}var Ht=Ku,Xu=Ht;function zu(t,e){for(var r=t.length;r--;)if(Xu(t[r][0],e))return r;return-1}var Kt=zu,Yu=Kt,Qu=Array.prototype,Vu=Qu.splice;function Wu(t){var e=this.__data__,r=Yu(e,t);if(r<0)return!1;var s=e.length-1;return r==s?e.pop():Vu.call(e,r,1),--this.size,!0}var Ju=Wu,Gu=Kt;function Zu(t){var e=this.__data__,r=Gu(e,t);return r<0?void 0:e[r][1]}var ef=Zu,tf=Kt;function rf(t){return tf(this.__data__,t)>-1}var sf=rf,nf=Kt;function af(t,e){var r=this.__data__,s=nf(r,t);return s<0?(++this.size,r.push([t,e])):r[s][1]=e,this}var of=af,cf=Hu,lf=Ju,uf=ef,ff=sf,df=of;function Ve(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var s=t[e];this.set(s[0],s[1])}}Ve.prototype.clear=cf;Ve.prototype.delete=lf;Ve.prototype.get=uf;Ve.prototype.has=ff;Ve.prototype.set=df;var Xt=Ve,hf=Xt;function pf(){this.__data__=new hf,this.size=0}var yf=pf;function mf(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var gf=mf;function vf(t){return this.__data__.get(t)}var bf=vf;function xf(t){return this.__data__.has(t)}var wf=xf,Af=typeof nt=="object"&&nt&&nt.Object===Object&&nt,Gn=Af,Sf=Gn,kf=typeof self=="object"&&self&&self.Object===Object&&self,Of=Sf||kf||Function("return this")(),We=Of,If=We,Tf=If.Symbol,Zn=Tf,ei=Zn,ea=Object.prototype,Cf=ea.hasOwnProperty,Rf=ea.toString,it=ei?ei.toStringTag:void 0;function $f(t){var e=Cf.call(t,it),r=t[it];try{t[it]=void 0;var s=!0}catch{}var n=Rf.call(t);return s&&(e?t[it]=r:delete t[it]),n}var Pf=$f,Ef=Object.prototype,Df=Ef.toString;function jf(t){return Df.call(t)}var Nf=jf,ti=Zn,Ff=Pf,_f=Nf,qf="[object Null]",Lf="[object Undefined]",ri=ti?ti.toStringTag:void 0;function Mf(t){return t==null?t===void 0?Lf:qf:ri&&ri in Object(t)?Ff(t):_f(t)}var zt=Mf;function Uf(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var _e=Uf,Bf=zt,Hf=_e,Kf="[object AsyncFunction]",Xf="[object Function]",zf="[object GeneratorFunction]",Yf="[object Proxy]";function Qf(t){if(!Hf(t))return!1;var e=Bf(t);return e==Xf||e==zf||e==Kf||e==Yf}var cs=Qf,Vf=We,Wf=Vf["__core-js_shared__"],Jf=Wf,fr=Jf,si=function(){var t=/[^.]+$/.exec(fr&&fr.keys&&fr.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Gf(t){return!!si&&si in t}var Zf=Gf,ed=Function.prototype,td=ed.toString;function rd(t){if(t!=null){try{return td.call(t)}catch{}try{return t+""}catch{}}return""}var sd=rd,id=cs,nd=Zf,ad=_e,od=sd,cd=/[\\^$.*+?()[\]{}|]/g,ld=/^\[object .+?Constructor\]$/,ud=Function.prototype,fd=Object.prototype,dd=ud.toString,hd=fd.hasOwnProperty,pd=RegExp("^"+dd.call(hd).replace(cd,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function yd(t){if(!ad(t)||nd(t))return!1;var e=id(t)?pd:ld;return e.test(od(t))}var md=yd;function gd(t,e){return t==null?void 0:t[e]}var vd=gd,bd=md,xd=vd;function wd(t,e){var r=xd(t,e);return bd(r)?r:void 0}var ls=wd,Ad=ls,Sd=We,kd=Ad(Sd,"Map"),ta=kd,Od=ls,Id=Od(Object,"create"),Yt=Id,ii=Yt;function Td(){this.__data__=ii?ii(null):{},this.size=0}var Cd=Td;function Rd(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var $d=Rd,Pd=Yt,Ed="__lodash_hash_undefined__",Dd=Object.prototype,jd=Dd.hasOwnProperty;function Nd(t){var e=this.__data__;if(Pd){var r=e[t];return r===Ed?void 0:r}return jd.call(e,t)?e[t]:void 0}var Fd=Nd,_d=Yt,qd=Object.prototype,Ld=qd.hasOwnProperty;function Md(t){var e=this.__data__;return _d?e[t]!==void 0:Ld.call(e,t)}var Ud=Md,Bd=Yt,Hd="__lodash_hash_undefined__";function Kd(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Bd&&e===void 0?Hd:e,this}var Xd=Kd,zd=Cd,Yd=$d,Qd=Fd,Vd=Ud,Wd=Xd;function Je(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var s=t[e];this.set(s[0],s[1])}}Je.prototype.clear=zd;Je.prototype.delete=Yd;Je.prototype.get=Qd;Je.prototype.has=Vd;Je.prototype.set=Wd;var Jd=Je,ni=Jd,Gd=Xt,Zd=ta;function eh(){this.size=0,this.__data__={hash:new ni,map:new(Zd||Gd),string:new ni}}var th=eh;function rh(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var sh=rh,ih=sh;function nh(t,e){var r=t.__data__;return ih(e)?r[typeof e=="string"?"string":"hash"]:r.map}var Qt=nh,ah=Qt;function oh(t){var e=ah(this,t).delete(t);return this.size-=e?1:0,e}var ch=oh,lh=Qt;function uh(t){return lh(this,t).get(t)}var fh=uh,dh=Qt;function hh(t){return dh(this,t).has(t)}var ph=hh,yh=Qt;function mh(t,e){var r=yh(this,t),s=r.size;return r.set(t,e),this.size+=r.size==s?0:1,this}var gh=mh,vh=th,bh=ch,xh=fh,wh=ph,Ah=gh;function Ge(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var s=t[e];this.set(s[0],s[1])}}Ge.prototype.clear=vh;Ge.prototype.delete=bh;Ge.prototype.get=xh;Ge.prototype.has=wh;Ge.prototype.set=Ah;var Sh=Ge,kh=Xt,Oh=ta,Ih=Sh,Th=200;function Ch(t,e){var r=this.__data__;if(r instanceof kh){var s=r.__data__;if(!Oh||s.length<Th-1)return s.push([t,e]),this.size=++r.size,this;r=this.__data__=new Ih(s)}return r.set(t,e),this.size=r.size,this}var Rh=Ch,$h=Xt,Ph=yf,Eh=gf,Dh=bf,jh=wf,Nh=Rh;function Ze(t){var e=this.__data__=new $h(t);this.size=e.size}Ze.prototype.clear=Ph;Ze.prototype.delete=Eh;Ze.prototype.get=Dh;Ze.prototype.has=jh;Ze.prototype.set=Nh;var Fh=Ze,_h=ls,qh=function(){try{var t=_h(Object,"defineProperty");return t({},"",{}),t}catch{}}(),ra=qh,ai=ra;function Lh(t,e,r){e=="__proto__"&&ai?ai(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var us=Lh,Mh=us,Uh=Ht;function Bh(t,e,r){(r!==void 0&&!Uh(t[e],r)||r===void 0&&!(e in t))&&Mh(t,e,r)}var sa=Bh;function Hh(t){return function(e,r,s){for(var n=-1,i=Object(e),a=s(e),c=a.length;c--;){var o=a[t?c:++n];if(r(i[o],o,i)===!1)break}return e}}var Kh=Hh,Xh=Kh,zh=Xh(),Yh=zh,jr={exports:{}};(function(t,e){var r=We,s=e&&!e.nodeType&&e,n=s&&!0&&t&&!t.nodeType&&t,i=n&&n.exports===s,a=i?r.Buffer:void 0,c=a?a.allocUnsafe:void 0;function o(l,u){if(u)return l.slice();var m=l.length,g=c?c(m):new l.constructor(m);return l.copy(g),g}t.exports=o})(jr,jr.exports);var Qh=We,Vh=Qh.Uint8Array,Wh=Vh,oi=Wh;function Jh(t){var e=new t.constructor(t.byteLength);return new oi(e).set(new oi(t)),e}var Gh=Jh,Zh=Gh;function ep(t,e){var r=e?Zh(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var tp=ep;function rp(t,e){var r=-1,s=t.length;for(e||(e=Array(s));++r<s;)e[r]=t[r];return e}var sp=rp,ip=_e,ci=Object.create,np=function(){function t(){}return function(e){if(!ip(e))return{};if(ci)return ci(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),ap=np;function op(t,e){return function(r){return t(e(r))}}var cp=op,lp=cp,up=lp(Object.getPrototypeOf,Object),ia=up,fp=Object.prototype;function dp(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||fp;return t===r}var na=dp,hp=ap,pp=ia,yp=na;function mp(t){return typeof t.constructor=="function"&&!yp(t)?hp(pp(t)):{}}var gp=mp;function vp(t){return t!=null&&typeof t=="object"}var yt=vp,bp=zt,xp=yt,wp="[object Arguments]";function Ap(t){return xp(t)&&bp(t)==wp}var Sp=Ap,li=Sp,kp=yt,aa=Object.prototype,Op=aa.hasOwnProperty,Ip=aa.propertyIsEnumerable,Tp=li(function(){return arguments}())?li:function(t){return kp(t)&&Op.call(t,"callee")&&!Ip.call(t,"callee")},oa=Tp,Cp=Array.isArray,ca=Cp,Rp=9007199254740991;function $p(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Rp}var la=$p,Pp=cs,Ep=la;function Dp(t){return t!=null&&Ep(t.length)&&!Pp(t)}var fs=Dp,jp=fs,Np=yt;function Fp(t){return Np(t)&&jp(t)}var _p=Fp,Ft={exports:{}};function qp(){return!1}var Lp=qp;(function(t,e){var r=We,s=Lp,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===n,c=a?r.Buffer:void 0,o=c?c.isBuffer:void 0,l=o||s;t.exports=l})(Ft,Ft.exports);var Mp=zt,Up=ia,Bp=yt,Hp="[object Object]",Kp=Function.prototype,Xp=Object.prototype,ua=Kp.toString,zp=Xp.hasOwnProperty,Yp=ua.call(Object);function Qp(t){if(!Bp(t)||Mp(t)!=Hp)return!1;var e=Up(t);if(e===null)return!0;var r=zp.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&ua.call(r)==Yp}var Vp=Qp,Wp=zt,Jp=la,Gp=yt,Zp="[object Arguments]",e0="[object Array]",t0="[object Boolean]",r0="[object Date]",s0="[object Error]",i0="[object Function]",n0="[object Map]",a0="[object Number]",o0="[object Object]",c0="[object RegExp]",l0="[object Set]",u0="[object String]",f0="[object WeakMap]",d0="[object ArrayBuffer]",h0="[object DataView]",p0="[object Float32Array]",y0="[object Float64Array]",m0="[object Int8Array]",g0="[object Int16Array]",v0="[object Int32Array]",b0="[object Uint8Array]",x0="[object Uint8ClampedArray]",w0="[object Uint16Array]",A0="[object Uint32Array]",_={};_[p0]=_[y0]=_[m0]=_[g0]=_[v0]=_[b0]=_[x0]=_[w0]=_[A0]=!0;_[Zp]=_[e0]=_[d0]=_[t0]=_[h0]=_[r0]=_[s0]=_[i0]=_[n0]=_[a0]=_[o0]=_[c0]=_[l0]=_[u0]=_[f0]=!1;function S0(t){return Gp(t)&&Jp(t.length)&&!!_[Wp(t)]}var k0=S0;function O0(t){return function(e){return t(e)}}var I0=O0,Nr={exports:{}};(function(t,e){var r=Gn,s=e&&!e.nodeType&&e,n=s&&!0&&t&&!t.nodeType&&t,i=n&&n.exports===s,a=i&&r.process,c=function(){try{var o=n&&n.require&&n.require("util").types;return o||a&&a.binding&&a.binding("util")}catch{}}();t.exports=c})(Nr,Nr.exports);var T0=k0,C0=I0,ui=Nr.exports,fi=ui&&ui.isTypedArray,R0=fi?C0(fi):T0,fa=R0;function $0(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var da=$0,P0=us,E0=Ht,D0=Object.prototype,j0=D0.hasOwnProperty;function N0(t,e,r){var s=t[e];(!(j0.call(t,e)&&E0(s,r))||r===void 0&&!(e in t))&&P0(t,e,r)}var F0=N0,_0=F0,q0=us;function L0(t,e,r,s){var n=!r;r||(r={});for(var i=-1,a=e.length;++i<a;){var c=e[i],o=s?s(r[c],t[c],c,r,t):void 0;o===void 0&&(o=t[c]),n?q0(r,c,o):_0(r,c,o)}return r}var M0=L0;function U0(t,e){for(var r=-1,s=Array(t);++r<t;)s[r]=e(r);return s}var B0=U0,H0=9007199254740991,K0=/^(?:0|[1-9]\d*)$/;function X0(t,e){var r=typeof t;return e=e==null?H0:e,!!e&&(r=="number"||r!="symbol"&&K0.test(t))&&t>-1&&t%1==0&&t<e}var ha=X0,z0=B0,Y0=oa,Q0=ca,V0=Ft.exports,W0=ha,J0=fa,G0=Object.prototype,Z0=G0.hasOwnProperty;function ey(t,e){var r=Q0(t),s=!r&&Y0(t),n=!r&&!s&&V0(t),i=!r&&!s&&!n&&J0(t),a=r||s||n||i,c=a?z0(t.length,String):[],o=c.length;for(var l in t)(e||Z0.call(t,l))&&!(a&&(l=="length"||n&&(l=="offset"||l=="parent")||i&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||W0(l,o)))&&c.push(l);return c}var ty=ey;function ry(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var sy=ry,iy=_e,ny=na,ay=sy,oy=Object.prototype,cy=oy.hasOwnProperty;function ly(t){if(!iy(t))return ay(t);var e=ny(t),r=[];for(var s in t)s=="constructor"&&(e||!cy.call(t,s))||r.push(s);return r}var uy=ly,fy=ty,dy=uy,hy=fs;function py(t){return hy(t)?fy(t,!0):dy(t)}var pa=py,yy=M0,my=pa;function gy(t){return yy(t,my(t))}var vy=gy,di=sa,by=jr.exports,xy=tp,wy=sp,Ay=gp,hi=oa,pi=ca,Sy=_p,ky=Ft.exports,Oy=cs,Iy=_e,Ty=Vp,Cy=fa,yi=da,Ry=vy;function $y(t,e,r,s,n,i,a){var c=yi(t,r),o=yi(e,r),l=a.get(o);if(l){di(t,r,l);return}var u=i?i(c,o,r+"",t,e,a):void 0,m=u===void 0;if(m){var g=pi(o),x=!g&&ky(o),k=!g&&!x&&Cy(o);u=o,g||x||k?pi(c)?u=c:Sy(c)?u=wy(c):x?(m=!1,u=by(o,!0)):k?(m=!1,u=xy(o,!0)):u=[]:Ty(o)||hi(o)?(u=c,hi(c)?u=Ry(c):(!Iy(c)||Oy(c))&&(u=Ay(o))):m=!1}m&&(a.set(o,u),n(u,o,s,i,a),a.delete(o)),di(t,r,u)}var Py=$y,Ey=Fh,Dy=sa,jy=Yh,Ny=Py,Fy=_e,_y=pa,qy=da;function ya(t,e,r,s,n){t!==e&&jy(e,function(i,a){if(n||(n=new Ey),Fy(i))Ny(t,e,a,r,ya,s,n);else{var c=s?s(qy(t,a),i,a+"",t,e,n):void 0;c===void 0&&(c=i),Dy(t,a,c)}},_y)}var Ly=ya;function My(t){return t}var ma=My;function Uy(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var By=Uy,Hy=By,mi=Math.max;function Ky(t,e,r){return e=mi(e===void 0?t.length-1:e,0),function(){for(var s=arguments,n=-1,i=mi(s.length-e,0),a=Array(i);++n<i;)a[n]=s[e+n];n=-1;for(var c=Array(e+1);++n<e;)c[n]=s[n];return c[e]=r(a),Hy(t,this,c)}}var Xy=Ky;function zy(t){return function(){return t}}var Yy=zy,Qy=Yy,gi=ra,Vy=ma,Wy=gi?function(t,e){return gi(t,"toString",{configurable:!0,enumerable:!1,value:Qy(e),writable:!0})}:Vy,Jy=Wy,Gy=800,Zy=16,em=Date.now;function tm(t){var e=0,r=0;return function(){var s=em(),n=Zy-(s-r);if(r=s,n>0){if(++e>=Gy)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var rm=tm,sm=Jy,im=rm,nm=im(sm),am=nm,om=ma,cm=Xy,lm=am;function um(t,e){return lm(cm(t,e,om),t+"")}var fm=um,dm=Ht,hm=fs,pm=ha,ym=_e;function mm(t,e,r){if(!ym(r))return!1;var s=typeof e;return(s=="number"?hm(r)&&pm(e,r.length):s=="string"&&e in r)?dm(r[e],t):!1}var gm=mm,vm=fm,bm=gm;function xm(t){return vm(function(e,r){var s=-1,n=r.length,i=n>1?r[n-1]:void 0,a=n>2?r[2]:void 0;for(i=t.length>3&&typeof i=="function"?(n--,i):void 0,a&&bm(r[0],r[1],a)&&(i=n<3?void 0:i,n=1),e=Object(e);++s<n;){var c=r[s];c&&t(e,c,s,i)}return e})}var wm=xm,Am=Ly,Sm=wm,km=Sm(function(t,e,r){Am(t,e,r)}),Om=km;const Im=async t=>{const{meta:e,record:r}=t,{action:s,type:n}=e,{userData:i,getUserType:a}=C(),c=i;delete c.access,delete c.permissions;const o=[{6:{value:s},7:{value:n},10:{value:JSON.stringify(r)},11:{value:a},12:{value:i[3]}}];A.upsertRecordsXML({to:"bsvafpumu",data:o,fieldsToReturn:[3]})};class Tm{constructor(e,r){$(this,"axiosIns",null);$(this,"config",{...Kn});$(this,"appConfig",O);$(this,"isAlreadyFetchingAccessToken",{});$(this,"subscribers",[]);$(this,"rateLimit",null);$(this,"rateLimitRemaining",null);$(this,"rateLimitReset",null);$(this,"router",null);$(this,"loginAttempts",{invalidLogins:0,login:null,exp:null,currentTime:null});$(this,"appStore",null);$(this,"userStore",null);$(this,"employeeStore",null);$(this,"jobBoardStore",null);$(this,"profileStore",null);$(this,"assessmentStore",null);$(this,"applicationStore",null);$(this,"kioskStore",null);$(this,"hiringCenterStore",null);$(this,"projectsStore",null);$(this,"hiringStore",null);$(this,"dataStore",null);$(this,"serverAPI",Se);if(this.axiosIns=e,this.config={...this.config,...r},this.axiosIns.interceptors.request.use(async s=>new Promise(n=>{const{url:i,data:a}=s;if(this.config.dev&&(s.url="https://cors-anywhere.elitehcms.com/"+i),this.appConfig.trackPerformance){const l=window.location.hash.split("#")[1]||"";s.metadata={pageType:this.appConfig.pageType,pageId:this.appConfig.pageId,page:l}}let c=null,o="";if(i.includes("act=API_Authenticate")||i.includes("a=API_GetUserInfo")||i.includes("a=API_DoQuery")||i.includes("a=API_AddRecord")||i.includes("?a=API_EditRecord")){try{c=i.split("/db/")[1].split("?")[0]}catch{c=null}try{o=i.split("=")[1]}catch{o=""}if(i.includes("a=API_DoQuery")){const l={6:{value:`${this.appConfig.pageType}-${this.appConfig.pageId}`},7:{value:"DoQuery"},8:{value:c}};this.addLogRecord({data:[l]})}this.appConfig.trackPerformance&&(s.metadata.dbid=c,s.metadata.action=o,s.metadata.startTime=performance.now()),n(s)}else if(i.includes("auth/temporary"))this.config.realm&&(s.headers["QB-Realm-Hostname"]=`${this.config.realm}.quickbase.com`),this.config.appToken&&(s.headers["QB-App-Token"]=this.config.appToken),s.headers["Request-Count"]?s.headers["Request-Count"]+=1:s.headers["Request-Count"]=1,this.appConfig.trackPerformance&&(s.metadata.action="Auth/Temporary",s.metadata.startTime=performance.now()),n(s);else{if(this.config.realm&&(s.headers["QB-Realm-Hostname"]=`${this.config.realm}.quickbase.com`),this.config.appToken&&(s.headers["QB-App-Token"]=this.config.appToken),s.headers["Request-Count"]?s.headers["Request-Count"]+=1:s.headers["Request-Count"]=1,i==="https://api.quickbase.com/v1/records/query"){c=a.from;const u={6:{value:`${this.appConfig.pageType}-${this.appConfig.pageId}`},7:{value:"Rest Query"},8:{value:c}};s.metadata.dbid=c,s.metadata.action="Rest Query",this.addLogRecord({data:[u]})}else if(i==="https://api.quickbase.com/v1/records")c=a.to,s.metadata.dbid=c,s.metadata.action="Records";else if(i.startsWith("https://api.quickbase.com/v1/reports")){const u=new URL(i);c=new URLSearchParams(u.search).get("tableId"),c=a.from;const g={6:{value:`${this.appConfig.pageType}-${this.appConfig.pageId}`},7:{value:"Rest Report"},8:{value:c}};s.metadata.dbid=c,s.metadata.action="Rest Report",this.addLogRecord({data:[g]})}else i.startsWith("https://api.quickbase.com/v1/files")&&(c=i.split("/files/")[1].split("/")[0]);const l=this;if(!c){const u=JSON.parse(a);c=u.from?u.from:u.to,s.metadata.dbid=c}this.getToken(c).then(u=>{const m=u;if(m)s.headers.Authorization=m,this.appConfig.trackPerformance&&(s.metadata.startTime=performance.now()),n(s);else if(!l.isAlreadyFetchingAccessToken[`${c}`])l.isAlreadyFetchingAccessToken[`${c}`]=!0,l.refreshToken(c).then(g=>{const{data:x}=g;l.isAlreadyFetchingAccessToken[`${c}`]=!1,l.setToken(x.temporaryAuthorization,c).then(()=>{l.onAccessTokenFetched(x.temporaryAuthorization),s.headers.Authorization=`QB-TEMP-TOKEN ${x.temporaryAuthorization}`,this.appConfig.trackPerformance&&(s.metadata.startTime=performance.now()),n(s)})});else{const g=m;async function x(){l.getToken(c).then(k=>{const T=k;if(T===g){setTimeout(x,50);return}s.headers.Authorization=T,s.metadata.startTime=performance.now(),n(s)})}x()}})}}),s=>Promise.reject(s)),this.axiosIns.interceptors.response.use(s=>{if(this.appConfig.trackPerformance&&(s.config.metadata.endTime=performance.now(),s.config.metadata.duration=s.config.metadata.endTime-s.config.metadata.startTime,this.postAPIPerformance(s.config.metadata)),s&&s.headers){const{headers:n}=s;n&&(this.rateLimit=n["x-ratelimit-limit"]?n["x-ratelimit-limit"]:null,this.rateLimitRemaining=n["x-ratelimit-remaining"]?n["x-ratelimit-remaining"]:null,this.rateLimitReset=n["x-ratelimit-reset"]?n["x-ratelimit-reset"]:null)}return s},s=>new Promise((n,i)=>{const{config:a,response:c}=s;console.log(s);const{headers:o}=c;o&&(this.rateLimit=o["x-ratelimit-limit"]?o["x-ratelimit-limit"]:null,this.rateLimitRemaining=o["x-ratelimit-remaining"]?o["x-ratelimit-remaining"]:null,this.rateLimitReset=o["x-ratelimit-reset"]?o["x-ratelimit-reset"]:null);const l=a,{url:u,data:m}=l;let g=this.config.appDBID;const x=m?JSON.parse(m):null;if(u==="https://api.quickbase.com/v1/records/query"?g=x.from:u==="https://api.quickbase.com/v1/records"&&(g=x.to),c&&c.status===401){const k=new Promise(T=>{this.addSubscriber(j=>{l.headers.Authorization=j,T(this.axiosIns(l))})});this.isAlreadyFetchingAccessToken[`${g}`]||(this.isAlreadyFetchingAccessToken[`${g}`]=!0,this.refreshToken(g).then(T=>{this.isAlreadyFetchingAccessToken[`${g}`]=!1,this.setToken(T.data.temporaryAuthorization,g),this.onAccessTokenFetched(T.data.temporaryAuthorization)})),n(k)}else if(c&&c.status===429){const k=this,T=new Promise(j=>{setTimeout(()=>{j(this.axiosIns(l))},k.rateLimitReset)});l.headers["Request-Count"]&&l.headers["Request-Count"]>4?i(s):n(T)}else if(c&&c.status===400){const{data:k}=c;if(k.description==="You are not currently signed into the realm.")window.close(),i(s);else if(k.description==="Required header 'Authorization' not specified"){this.isAlreadyFetchingAccessToken[`${g}`]||(this.isAlreadyFetchingAccessToken[`${g}`]=!0,this.refreshToken(g).then(j=>{this.isAlreadyFetchingAccessToken[`${g}`]=!1,this.setToken(j.data.temporaryAuthorization,g),this.onAccessTokenFetched(j.data.temporaryAuthorization)}));const T=new Promise(j=>{this.addSubscriber(R=>{l.headers.Authorization=R,j(this.axiosIns(l))})});n(T)}else if(k.description==="Invalid Authorization"){this.isAlreadyFetchingAccessToken[`${g}`]||(this.isAlreadyFetchingAccessToken[`${g}`]=!0,this.refreshToken(g).then(j=>{this.isAlreadyFetchingAccessToken[`${g}`]=!1,this.setToken(j.data.temporaryAuthorization,g),this.onAccessTokenFetched(j.data.temporaryAuthorization)}));const T=new Promise(j=>{this.addSubscriber(R=>{l.headers.Authorization=R,j(this.axiosIns(l))})});n(T)}}i(s)})),this.serverAPI.feathersClient){const s=this;this.serverAPI.feathersClient.service("notifications").on("created",function(n){s.processServerNotifications(n)})}}processServerNotifications(e){e.type==="user-notification"?e.task==="reload-user"?this.reloadUserInfo({reAuthenticate:!0}):e.task==="reload-page"?window.location.reload(!0):e.task==="logout"&&this.logout():e.type==="office-notification"&&(e.task==="reload-page"?window.location.reload(!0):this.userStore.setFeathersNotification(e))}onAccessTokenFetched(e){this.subscribers=this.subscribers.filter(r=>r(e))}addSubscriber(e){this.subscribers.push(e)}async getToken(e){return this.config.dev&&this.config.userToken?`QB-USER-TOKEN ${this.config.userToken}`:q.has(`${e}`)?`QB-TEMP-TOKEN ${q.get(`${e}`)}`:null}refreshToken(e){return this.axiosIns.get(`${this.config.refreshEndpoint}/${e}`,{withCredentials:!0})}async setToken(e,r){const s=r||this.config.appDBID;q.set(`${s}`,e,{expires:this.config.tokenExpiration,secure:!0,sameSite:"Strict"})}async setIpInfo(e){w.setItem(this.appConfig.storageIPInfoKeyName,e),e.countryCode!==this.appConfig.country&&this.appConfig.pageId!==26&&this.setCountry(e.countryCode)}async setCountry(e){this.appStore=this.appStore||K(),this.appStore.setCountry(e)}async getIpInfo(){return await w.getItem(this.appConfig.storageIPInfoKeyName)}setUserTicket(e,r){q.set(this.appConfig.storageUserTicketKeyName,e,{expires:r||this.config.cookieExpiration,secure:!0,sameSite:"Strict"})}getUserTicket(){return q.get(this.appConfig.storageUserTicketKeyName)}setKioskTicket(e,r){q.set(this.appConfig.storageKioskAccountTicket,e,{expires:r||this.config.kioskExpiration,secure:!0,sameSite:"Strict"})}getKioskTicket(){return q.get(this.appConfig.storageKioskAccountTicket)}removeKioskTicket(){q.remove(this.appConfig.storageKioskAccountTicket,{secure:!0,sameSite:"Strict"})}setOfficeLocation(e){this.hiringCenterStore=this.hiringCenterStore||Z(),this.appConfig.pageType!=="Candidate Kiosk"&&this.hiringCenterStore.fetchHiringCenter(e.rid,!0),q.set(this.appConfig.storageOfficeLocationKeyName,e,{expires:this.config.officeExpiration,secure:!0,sameSite:"Strict"})}setCheckIn(e){console.log(e),q.set(this.appConfig.storageCheckInKeyName,e,{expires:this.config.checkInExpiration,secure:!0,sameSite:"Strict"})}removeCheckIn(){q.remove(this.appConfig.storageCheckInKeyName,{secure:!0,sameSite:"Strict"})}getCheckIn(){return q.get(this.appConfig.storageCheckInKeyName)}getOfficeLocation(){return q.get(this.appConfig.storageOfficeLocationKeyName)}removeOfficeLocation(){q.remove(this.appConfig.storageOfficeLocationKeyName,{secure:!0,sameSite:"Strict"})}async setUserInfo(e,r){this.userStore.setUser(e,r)}async setStrapiUser(e,r){this.userStore.setStrapiUser(e,r),He.setSocket()}async setUserAccess(e,r){this.userStore.setAccess(e,r)}async setUserPermissions(e,r){this.userStore.setPermissions(e,r)}async getUserInfo(){return await w.getItem(this.appConfig.storageUserKeyName)}async getUserAccess(){return await w.getItem(this.appConfig.storageAccessKeyName)}async getUserPermissions(){return await w.getItem(this.appConfig.storagePermissionsKeyName)}async setEmployee(e,r){this.employeeStore.setEmployee(e,r)}async setJobBoard(e,r){this.jobBoardStore.setRequestJobs(e,r)}async getUserTypeFromStore(){return this.appStore.currentUserType}async getEmployeeFromStore(){return this.employeeStore.getEmployee}async getSocialRequired(e){return(this.appConfig.pageType==="Candidate Kiosk"||this.appConfig.pageType==="Candidate")&&e?(this.employeeStore=this.employeeStore||B(),this.employeeStore.socialRequired):!1}async getUserFromStore(e){return e?(this.userStore=this.userStore||C(),this.userStore.getUser):!1}async getLoggedInFromStore(){return this.userStore.isLoggedIn}async verifyRequired(e){return e?(this.userStore=this.userStore||C(),this.userStore.verifyRequired):!1}async phoneNumberRequired(e){return e?(this.userStore=this.userStore||C(),this.userStore.phoneNumberRequired):!1}async setEvent(e,r){this.appStore=this.appStore||K(),this.appStore.setEvent(e,r)}async getEvent(e){return this.appStore=this.appStore||K(),e?this.appStore.currentEvent:null}async emailRequired(e){return e?(this.userStore=this.userStore||C(),this.userStore.emailRequired):!1}async setPhoneNumberVerified(e){this.userStore.setPhoneNumberVerified(e)}async setVerified(e){this.userStore.setVerified(e)}async employeeLinkRequired(e){return e?(this.userStore=this.userStore||C(),this.userStore.employeeLinkRequired):!1}async bookmarksValid(){return this.kioskStore=this.kioskStore||Q(),!!(this.kioskStore.getBookmarks&&this.kioskStore.getBookmarks.length>0)}async getKioskAccount(){return this.kioskStore?this.kioskStore.kioskAccount:null}async logoutKiosk(e){if(this.kioskStore=this.kioskStore||Q(),e)this.removeKioskTicket(),this.kioskStore.setKioskAccount(null,!1),this.clearBookmarks();else if(!this.kioskStore.kioskAvailable)this.clearBookmarks();else if(this.kioskStore.getBookMarksOnly&&this.kioskStore.kioskAccount[45]===!0)this.removeKioskTicket(),this.kioskStore.setKioskAccount(null,!1),this.clearBookmarks();else return!0}async clearBookmarks(){this.kioskStore=this.kioskStore||Q(),this.kioskStore.removeBookmarks()}async bookMarksOnly(){return this.kioskStore=this.kioskStore||Q(),this.kioskStore.getBookMarksOnly}async startPageEnabled(){return this.appStore=this.appStore||K(),this.appStore.startPageEnabled}async setIdentityVerified(e){this.userStore.setIdentityVerified(e)}async setPhoneNumber(e){this.userStore.setPhoneNumber(e)}async setEmail(e){this.userStore.setEmail(e)}async isUserLoggedIn(){const e=this.getUserInfo(),r=this.getUserAccess(),s=this.getUserPermissions(),n=this.getUserTicket(),i=await e,a=await r,c=await s;return!!(i&&a&&c&&n||n)}async reloadUserInfo(e){const r=await this.getUserInfo();if(this.userStore=this.userStore||C(),e.reAuthenticate&&r)return await this.fetchAndSetUserData({phoneNumber:r[8],userType:r[32],rid:r[3],reAuthenticate:e.reAuthenticate}),this.updateStore();if(!r&&this.appConfig.pageType==="QuickBase User"){const{data:s}=await this.getNativeQuickbaseUser({qbUser:!0});if(s.login==="Anonymous")return this.userStore.logout();const n=`{'10'.EX.'Active'}AND{'6'.EX.'${s.email}'}AND{'32'.EX.'QuickBase User'}`,i=[{7:{value:"User Request"},8:{value:n},9:{value:1},14:{value:77}}],{data:a}=await this.fetchFromStructureApp({fields:i});return a[0]&&a[0][10]==="Active"?(await this.fetchAndSetUserData({email:a[0][6],rid:a[0][3],userType:a[0][32],reAuthenticate:e.reAuthenticate}),this.updateStore()):a[0]&&a[0][10]!=="Active"?this.userStore.logout():this.createQBUser({qbUser:s,login:!0})}else return this.updateStore()}async createQBUser(e){const r=e.qbUser||null;if(!r&&e.login)return this.userStore.logout();if(!r)return e;const s=[{7:{value:"Hiring Center User"},9:{value:1},16:{value:r.email}}],{data:n}=await this.fetchFromStructureApp({fields:s});if(typeof n=="object"&&!Array.isArray(n)&&n!==null&&n.user&&typeof n.user=="object")try{const i=new Date,a=await at.genSalt(10),c=at.hashSync("welcome",a),o=n.user,l=n.accessiblePayGroups,u=n.accessibleHiringCenters,m=r.email.match(/^([^@]*)@/)[1],g=[{6:{value:r.email},7:{value:c},10:{value:"Active"},11:{value:4},17:{value:!1},32:{value:"QuickBase User"},35:{value:r.firstName},37:{value:r.lastName},23:{value:0},24:{value:0},25:{value:i},26:{value:i},33:{value:m},49:{value:!!r.isVerified},65:{value:o[13]},70:{value:o[251]},100:{value:"en-US"},110:{value:r.id}}],x=[],{data:k}=await this.upsertRecordsXML({to:"br4pxrbs6",fieldsToReturn:[76],data:g,formatObject:76});return k.length===0?this.userStore.logout():(l.forEach(T=>{const j={6:{value:k[0][76][3]},7:{value:"Pay Group"},13:{value:T[10]},20:{value:!0},21:{value:!0},22:{value:!0}};x.push(j)}),u.forEach(T=>{const j={6:{value:k[0][76][3]},7:{value:"Office"},8:{value:T[10]},20:{value:!0},21:{value:!0},22:{value:!0}};x.push(j)}),await this.upsertRecordsXML({to:"br598isx6",fieldsToReturn:[3],data:x,formatObject:24}),await this.fetchAndSetUserData({email:k[0][76][6],rid:k[0][76][3],userType:k[0][76][32],reAuthenticate:e.reAuthenticate}))}catch{return this.userStore.logout()}else return this.userStore.logout()}async updateUserData(e){const r=await this.getUserInfo();if(this.appStore=this.appStore||K(),r)return this.userStore=this.userStore||C(),await this.userStore.updateUserData(e)}async updateEmployeeData(e){const r=await this.getUserInfo();if(this.appStore=this.appStore||K(),(this.appStore.pageType==="Candidate"||this.appStore.pageType==="Candidate Kiosk")&&r)return this.employeeStore=this.employeeStore||B(),await this.employeeStore.updateEmployeeData(e)}async updateStore(e){const r=await w.keys();for(let n=0;n<r.length;n++){if(r[n]===this.appConfig.storageUserKeyName){const i=await w.getItem(r[n]);Object.keys(i).forEach(a=>{if(typeof i[a]=="object"&&i[a]!==null&&Object.prototype.hasOwnProperty.call(i[a],"$d")){i[a]=h(i[a].$d);return}try{i[a].endsWith(".000Z")&&(i[a]=h(i[a]))}catch{}}),await this.setUserInfo(i,!1)}if(r[n]===this.appConfig.storageStrapiUserKeyName){const i=await w.getItem(r[n]);Object.keys(i).forEach(a=>{if(typeof i[a]=="object"&&i[a]!==null&&Object.prototype.hasOwnProperty.call(i[a],"$d")){i[a]=h(i[a].$d);return}try{i[a].endsWith(".000Z")&&(i[a]=h(i[a]))}catch{}}),await this.setStrapiUser(i,!1)}if(r[n]===this.appConfig.storageAccessKeyName){const i=await w.getItem(r[n]);for(let a=0;a<i.length;a++){const c=Object.keys(i[a]);for(let o=0;o<c.length;o++){typeof i[a][c[o]]=="object"&&i[a][c[o]]!==null&&Object.prototype.hasOwnProperty.call(i[a][c[o]],"$d")&&(i[a][c[o]]=h(i[a][c[o]].$d));try{i[a][c[o]].endsWith(".000Z")&&(i[a][c[o]]=h(i[a][c[o]]))}catch{}}}await this.setUserAccess(i,!1)}if(r[n]===this.appConfig.storagePermissionsKeyName){const i=await w.getItem(r[n]);for(let a=0;a<i.length;a++){const c=Object.keys(i[a]);for(let o=0;o<c.length;o++){typeof i[a][c[o]]=="object"&&i[a][c[o]]!==null&&Object.prototype.hasOwnProperty.call(i[a][c[o]],"$d")&&(i[a][c[o]]=h(i[a][c[o]].$d));try{i[a][c[o]].endsWith(".000Z")&&(i[a][c[o]]=h(i[a][c[o]]))}catch{}}}await this.setUserPermissions(i,!1)}if(r[n]===this.appConfig.storageEmployeeKeyName){const i=await w.getItem(r[n]);for(let a=0;a<i.length;a++){const c=Object.keys(i[a]);for(let o=0;o<c.length;o++){typeof i[a][c[o]]=="object"&&i[a][c[o]]!==null&&Object.prototype.hasOwnProperty.call(i[a][c[o]],"$d")&&(i[a][c[o]]=h(i[a][c[o]].$d));try{i[a][c[o]].endsWith(".000Z")&&(i[a][c[o]]=h(i[a][c[o]]))}catch{}}}await this.setEmployee(i,!1)}if(r[n]===this.appConfig.storageJobBoardKeyName){const i=await w.getItem(r[n]);for(let a=0;a<i.length;a++){const c=Object.keys(i[a]);for(let o=0;o<c.length;o++){typeof i[a][c[o]]=="object"&&i[a][c[o]]!==null&&Object.prototype.hasOwnProperty.call(i[a][c[o]],"$d")&&(i[a][c[o]]=h(i[a][c[o]].$d));try{i[a][c[o]].endsWith(".000Z")&&(i[a][c[o]]=h(i[a][c[o]]))}catch{}}}this.jobBoardStore=this.jobBoardStore||Jn(),await this.setJobBoard(i,!1)}if(r[n]===this.appConfig.storageExperienceOptions){const i=await w.getItem(r[n]);for(let a=0;a<i.length;a++){const c=Object.keys(i[a]);for(let o=0;o<c.length;o++){typeof i[a][c[o]]=="object"&&i[a][c[o]]!==null&&Object.prototype.hasOwnProperty.call(i[a][c[o]],"$d")&&(i[a][c[o]]=h(i[a][c[o]].$d));try{i[a][c[o]].endsWith(".000Z")&&(i[a][c[o]]=h(i[a][c[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setExperienceOptions(i,!1)}if(r[n]===this.appConfig.storageContactMethods){const i=await w.getItem(r[n]);for(let a=0;a<i.length;a++){const c=Object.keys(i[a]);for(let o=0;o<c.length;o++){typeof i[a][c[o]]=="object"&&i[a][c[o]]!==null&&Object.prototype.hasOwnProperty.call(i[a][c[o]],"$d")&&(i[a][c[o]]=h(i[a][c[o]].$d));try{i[a][c[o]].endsWith(".000Z")&&(i[a][c[o]]=h(i[a][c[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setContactMethods(i,!1)}if(r[n]===this.appConfig.storageEmploymentOptions){const i=await w.getItem(r[n]);for(let a=0;a<i.length;a++){const c=Object.keys(i[a]);for(let o=0;o<c.length;o++){typeof i[a][c[o]]=="object"&&i[a][c[o]]!==null&&Object.prototype.hasOwnProperty.call(i[a][c[o]],"$d")&&(i[a][c[o]]=h(i[a][c[o]].$d));try{i[a][c[o]].endsWith(".000Z")&&(i[a][c[o]]=h(i[a][c[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setEmploymentOptions(i,!1)}if(r[n]===this.appConfig.storageCompanyOptions){const i=await w.getItem(r[n]);for(let a=0;a<i.length;a++){const c=Object.keys(i[a]);for(let o=0;o<c.length;o++){typeof i[a][c[o]]=="object"&&i[a][c[o]]!==null&&Object.prototype.hasOwnProperty.call(i[a][c[o]],"$d")&&(i[a][c[o]]=h(i[a][c[o]].$d));try{i[a][c[o]].endsWith(".000Z")&&(i[a][c[o]]=h(i[a][c[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setCompanyOptions(i,!1)}if(r[n]===this.appConfig.storageCraftOptions){const i=await w.getItem(r[n]);for(let a=0;a<i.length;a++){const c=Object.keys(i[a]);for(let o=0;o<c.length;o++){typeof i[a][c[o]]=="object"&&i[a][c[o]]!==null&&Object.prototype.hasOwnProperty.call(i[a][c[o]],"$d")&&(i[a][c[o]]=h(i[a][c[o]].$d));try{i[a][c[o]].endsWith(".000Z")&&(i[a][c[o]]=h(i[a][c[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setCraftOptions(i,!1)}if(r[n]===this.appConfig.storageRelationshipOptions){const i=await w.getItem(r[n]);for(let a=0;a<i.length;a++){const c=Object.keys(i[a]);for(let o=0;o<c.length;o++){typeof i[a][c[o]]=="object"&&i[a][c[o]]!==null&&Object.prototype.hasOwnProperty.call(i[a][c[o]],"$d")&&(i[a][c[o]]=h(i[a][c[o]].$d));try{i[a][c[o]].endsWith(".000Z")&&(i[a][c[o]]=h(i[a][c[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setRelationshipOptions(i,!1)}if(r[n]===this.appConfig.storageCredentialOptions){const i=await w.getItem(r[n]);for(let a=0;a<i.length;a++){const c=Object.keys(i[a]);for(let o=0;o<c.length;o++){typeof i[a][c[o]]=="object"&&i[a][c[o]]!==null&&Object.prototype.hasOwnProperty.call(i[a][c[o]],"$d")&&(i[a][c[o]]=h(i[a][c[o]].$d));try{i[a][c[o]].endsWith(".000Z")&&(i[a][c[o]]=h(i[a][c[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setCredentialOptions(i,!1)}if(r[n]===this.appConfig.storageAffirmativeOptions){const i=await w.getItem(r[n]);for(let a=0;a<i.length;a++){const c=Object.keys(i[a]);for(let o=0;o<c.length;o++){typeof i[a][c[o]]=="object"&&i[a][c[o]]!==null&&Object.prototype.hasOwnProperty.call(i[a][c[o]],"$d")&&(i[a][c[o]]=h(i[a][c[o]].$d));try{i[a][c[o]].endsWith(".000Z")&&(i[a][c[o]]=h(i[a][c[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setAffirmativeOptions(i,!1)}if(r[n]===this.appConfig.storageVeteranStatusOptions){const i=await w.getItem(r[n]);for(let a=0;a<i.length;a++){const c=Object.keys(i[a]);for(let o=0;o<c.length;o++){typeof i[a][c[o]]=="object"&&i[a][c[o]]!==null&&Object.prototype.hasOwnProperty.call(i[a][c[o]],"$d")&&(i[a][c[o]]=h(i[a][c[o]].$d));try{i[a][c[o]].endsWith(".000Z")&&(i[a][c[o]]=h(i[a][c[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setVeteranStatusOptions(i,!1)}if(r[n]===this.appConfig.storageDisabilityPages){const i=await w.getItem(r[n]);for(let a=0;a<i.length;a++){const c=Object.keys(i[a]);for(let o=0;o<c.length;o++){typeof i[a][c[o]]=="object"&&i[a][c[o]]!==null&&Object.prototype.hasOwnProperty.call(i[a][c[o]],"$d")&&(i[a][c[o]]=h(i[a][c[o]].$d));try{i[a][c[o]].endsWith(".000Z")&&(i[a][c[o]]=h(i[a][c[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setDisabilityPages(i,!1)}if(r[n]===this.appConfig.storageDisabilityForm){const i=await w.getItem(r[n]);for(let a=0;a<i.length;a++){const c=Object.keys(i[a]);for(let o=0;o<c.length;o++){typeof i[a][c[o]]=="object"&&i[a][c[o]]!==null&&Object.prototype.hasOwnProperty.call(i[a][c[o]],"$d")&&(i[a][c[o]]=h(i[a][c[o]].$d));try{i[a][c[o]].endsWith(".000Z")&&(i[a][c[o]]=h(i[a][c[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setDisabilityForm(i,!1)}if(r[n]===this.appConfig.storageEverGreenJobs){const i=await w.getItem(r[n]);for(let a=0;a<i.length;a++){const c=Object.keys(i[a]);for(let o=0;o<c.length;o++){typeof i[a][c[o]]=="object"&&i[a][c[o]]!==null&&Object.prototype.hasOwnProperty.call(i[a][c[o]],"$d")&&(i[a][c[o]]=h(i[a][c[o]].$d));try{i[a][c[o]].endsWith(".000Z")&&(i[a][c[o]]=h(i[a][c[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setEverGreenJobs(i,!1)}if(r[n]===this.appConfig.storageProfile){const i=await w.getItem(r[n]);for(let a=0;a<i.length;a++){const c=Object.keys(i[a]);for(let o=0;o<c.length;o++){typeof i[a][c[o]]=="object"&&i[a][c[o]]!==null&&Object.prototype.hasOwnProperty.call(i[a][c[o]],"$d")&&(i[a][c[o]]=h(i[a][c[o]].$d));try{i[a][c[o]].endsWith(".000Z")&&(i[a][c[o]]=h(i[a][c[o]]))}catch{}}}this.profileStore=this.profileStore||Pe(),await this.profileStore.setProfile(i,!1)}if(r[n]===this.appConfig.storageProfileStep){const i=await w.getItem(r[n]);for(let a=0;a<i.length;a++){const c=Object.keys(i[a]);for(let o=0;o<c.length;o++){typeof i[a][c[o]]=="object"&&i[a][c[o]]!==null&&Object.prototype.hasOwnProperty.call(i[a][c[o]],"$d")&&(i[a][c[o]]=h(i[a][c[o]].$d));try{i[a][c[o]].endsWith(".000Z")&&(i[a][c[o]]=h(i[a][c[o]]))}catch{}}}this.profileStore=this.profileStore||Pe(),await this.profileStore.setProfileStep(i,!1)}if(r[n]===this.appConfig.storageProfileVoluntaryForms){const i=await w.getItem(r[n]);for(let a=0;a<i.length;a++){const c=Object.keys(i[a]);for(let o=0;o<c.length;o++){typeof i[a][c[o]]=="object"&&i[a][c[o]]!==null&&Object.prototype.hasOwnProperty.call(i[a][c[o]],"$d")&&(i[a][c[o]]=h(i[a][c[o]].$d));try{i[a][c[o]].endsWith(".000Z")&&(i[a][c[o]]=h(i[a][c[o]]))}catch{}}}this.profileStore=this.profileStore||Pe(),await this.profileStore.setVoluntaryForms(i,!1)}if(r[n]===this.appConfig.storageKioskAccount){const i=await w.getItem(r[n]);for(let a=0;a<i.length;a++){const c=Object.keys(i[a]);for(let o=0;o<c.length;o++){typeof i[a][c[o]]=="object"&&i[a][c[o]]!==null&&Object.prototype.hasOwnProperty.call(i[a][c[o]],"$d")&&(i[a][c[o]]=h(i[a][c[o]].$d));try{i[a][c[o]].endsWith(".000Z")&&(i[a][c[o]]=h(i[a][c[o]]))}catch{}}}this.kioskStore=this.kioskStore||Q(),await this.kioskStore.setKioskAccount(i,!1)}if(r[n]===this.appConfig.storageBookmarks){const i=await w.getItem(r[n]);for(let a=0;a<i.length;a++){const c=Object.keys(i[a]);for(let o=0;o<c.length;o++){typeof i[a][c[o]]=="object"&&i[a][c[o]]!==null&&Object.prototype.hasOwnProperty.call(i[a][c[o]],"$d")&&(i[a][c[o]]=h(i[a][c[o]].$d));try{i[a][c[o]].endsWith(".000Z")&&(i[a][c[o]]=h(i[a][c[o]]))}catch{}}}this.kioskStore=this.kioskStore||Q(),await this.kioskStore.setBookmarksFromStorage(i)}if(r[n]===this.appConfig.storageBookmarksOnly){const i=await w.getItem(r[n]);this.kioskStore=this.kioskStore||Q(),await this.kioskStore.setBookmarksOnly(i,!1)}if(r[n]===this.appConfig.storageHiringCenter&&this.appConfig.pageType==="Candidate"){const i=await w.getItem(r[n]);if(i){for(let a=0;a<i.length;a++){const c=Object.keys(i[a]);for(let o=0;o<c.length;o++){typeof i[a][c[o]]=="object"&&i[a][c[o]]!==null&&Object.prototype.hasOwnProperty.call(i[a][c[o]],"$d")&&(i[a][c[o]]=h(i[a][c[o]].$d));try{i[a][c[o]].endsWith(".000Z")&&(i[a][c[o]]=h(i[a][c[o]]))}catch{}}}this.hiringCenterStore=this.hiringCenterStore||Z(),await this.hiringCenterStore.setHiringCenter(i,!1)}}if(this.appConfig.pageType==="QuickBase User"){if(r[n].startsWith(this.appConfig.storageSelfCheckIns)){const i=r[n].split("_")[4],a=await w.getItem(r[n]);if(a){for(let c=0;c<a.length;c++){const o=Object.keys(a[c]);for(let l=0;l<o.length;l++){typeof a[c][o[l]]=="object"&&a[c][o[l]]!==null&&Object.prototype.hasOwnProperty.call(a[c][o[l]],"$d")&&(a[c][o[l]]=h(a[c][o[l]].$d));try{a[c][o[l]].endsWith(".000Z")&&(a[c][o[l]]=h(a[c][o[l]]))}catch{}}}this.dataStore=this.dataStore||we(),await this.dataStore.setSelfCheckIns({officeId:i,data:a},!1)}}if(r[n].startsWith(this.appConfig.storageProcessTimeStamps)){const i=await w.getItem(r[n]);if(i){const a=Object.keys(i);for(let c=0;c<a.length;c++){const o=Object.keys(i[a[c]]);for(let l=0;l<o.length;l++){typeof i[a[c]][o[l]]=="object"&&i[a[c]][o[l]]!==null&&Object.prototype.hasOwnProperty.call(i[a[c]][o[l]],"$d")&&(i[a[c]][o[l]]=h(i[a[c]][o[l]].$d));try{i[a[c]][o[l]]&&(i[a[c]][o[l]]=h(i[a[c]][o[l]]))}catch{}}}this.dataStore=this.dataStore||we(),await this.dataStore.setTimeStampState(i)}}if(r[n].startsWith(this.appConfig.storageProjects)){const i=r[n].split("_")[3],a=await w.getItem(r[n]);if(a){for(let c=0;c<a.length;c++){const o=Object.keys(a[c]);for(let l=0;l<o.length;l++){typeof a[c][o[l]]=="object"&&a[c][o[l]]!==null&&Object.prototype.hasOwnProperty.call(a[c][o[l]],"$d")&&(a[c][o[l]]=h(a[c][o[l]].$d));try{a[c][o[l]].endsWith(".000Z")&&(a[c][o[l]]=h(a[c][o[l]]))}catch{}}}this.dataStore=this.dataStore||we(),await this.dataStore.setProjects({officeId:i,data:a},!1)}}if(r[n].startsWith(this.appConfig.storagePendingProjects)){const i=r[n].split("_")[4],a=await w.getItem(r[n]);if(a){for(let c=0;c<a.length;c++){const o=Object.keys(a[c]);for(let l=0;l<o.length;l++){typeof a[c][o[l]]=="object"&&a[c][o[l]]!==null&&Object.prototype.hasOwnProperty.call(a[c][o[l]],"$d")&&(a[c][o[l]]=h(a[c][o[l]].$d));try{a[c][o[l]].endsWith(".000Z")&&(a[c][o[l]]=h(a[c][o[l]]))}catch{}}}this.dataStore=this.dataStore||we(),await this.dataStore.setPendingProjects({officeId:i,data:a},!1)}}}if(r[n]===this.appConfig.storageEvent){const i=await w.getItem(r[n]);for(let a=0;a<i.length;a++){const c=Object.keys(i[a]);for(let o=0;o<c.length;o++){typeof i[a][c[o]]=="object"&&i[a][c[o]]!==null&&Object.prototype.hasOwnProperty.call(i[a][c[o]],"$d")&&(i[a][c[o]]=h(i[a][c[o]].$d));try{i[a][c[o]].endsWith(".000Z")&&(i[a][c[o]]=h(i[a][c[o]]))}catch{}}}this.appStore=this.appStore||K(),await this.appStore.setEvent(i,!1)}if(r[n]===this.appConfig.storageStartPage){const i=await w.getItem(r[n]);for(let a=0;a<i.length;a++){const c=Object.keys(i[a]);for(let o=0;o<c.length;o++){typeof i[a][c[o]]=="object"&&i[a][c[o]]!==null&&Object.prototype.hasOwnProperty.call(i[a][c[o]],"$d")&&(i[a][c[o]]=h(i[a][c[o]].$d));try{i[a][c[o]].endsWith(".000Z")&&(i[a][c[o]]=h(i[a][c[o]]))}catch{}}}this.appStore=this.appStore||K(),await this.appStore.setStartPage(i,!1)}if(r[n]===this.appConfig.storageHomeButton){const i=await w.getItem(r[n]);for(let a=0;a<i.length;a++){const c=Object.keys(i[a]);for(let o=0;o<c.length;o++){typeof i[a][c[o]]=="object"&&i[a][c[o]]!==null&&Object.prototype.hasOwnProperty.call(i[a][c[o]],"$d")&&(i[a][c[o]]=h(i[a][c[o]].$d));try{i[a][c[o]].endsWith(".000Z")&&(i[a][c[o]]=h(i[a][c[o]]))}catch{}}}this.appStore=this.appStore||K(),await this.appStore.setHomeButton(i,!1)}}const s=await L.keys();for(let n=0;n<s.length;n++)if(s[n]==="conversations"){const i=await L.getItem(s[n]);i&&(this.dataStore=this.dataStore||we(),await this.dataStore.setConversations({data:i},!1))}return!0}async login(e){let r=null;e.redirectPath&&(r=e.redirectPath,delete e.redirectPath);const s=`{'10'.EX.'Active'}${e.email?`AND{'6'.EX.'${e.email}'}`:""}${e.phoneNumber?`AND{'8'.EX.'${e.phoneNumber}'}`:""}${e.userType?`AND{'32'.EX.'${e.userType}'}`:""}`,n=[{7:{value:"User Request"},8:{value:s},9:{value:1},14:{value:77}}],i=e.email?e.email:e.phoneNumber;if(s==="{'10'.EX.'Active'}AND{'32'.EX.'Candidate'}"||s==="{'10'.EX.'Active'}AND{'32'.EX.'Project User'}")throw{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}};if(!i||i==="")throw{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}};const a=h();if(this.loginAttempts.invalidLogins>=this.config.maxLoginAttempts&&i===this.loginAttempts.login)if(a.isBefore(this.loginAttempts.exp)){const u=a.to(this.loginAttempts.exp,!0);throw{response:{data:{errtext:"Too many failed Login Attempts",errdetail:`Please wait ${u} before attempting to try again.`}}}}else this.loginAttempts={invalidLogins:0,login:null,exp:null,currentTime:null};else this.loginAttempts.exp&&a.isAfter(this.loginAttempts.exp)&&(this.loginAttempts={invalidLogins:0,login:null,exp:null,currentTime:null});const{data:c}=await this.fetchFromStructureApp({fields:n}),o=[{6:{value:"login"}}];let l=await this.getIpInfo();if(l&&l.query)o[0][8]={value:l.ip?l.ip:"N/A"},o[0][10]={value:l.userAgent?l.userAgent:"N/A"},o[0][27]={value:l.continent?l.continent:"N/A"},o[0][28]={value:l.continentCode?l.continentCode:"N/A"},o[0][29]={value:l.country?l.country:"N/A"},o[0][30]={value:l.countryCode},o[0][31]={value:l.region?l.region:"N/A"},o[0][32]={value:l.regionName?l.regionName:"N/A"},o[0][33]={value:l.city?l.city:"N/A"},o[0][34]={value:l.district?l.district:"N/A"},o[0][38]={value:l.zip?l.zip:"N/A"},o[0][36]={value:l.lat?l.lat:"N/A"},o[0][37]={value:l.lon?l.lon:"N/A"},o[0][38]={value:l.timezone?l.timezone:"N/A"},o[0][39]={value:l.offset?l.offset:"N/A"},o[0][40]={value:l.isp?l.isp:"N/A"},o[0][41]={value:l.org?l.org:"N/A"},o[0][42]={value:l.as?l.as:"N/A"},o[0][43]={value:l.asname?l.asname:"N/A"},o[0][44]={value:l.mobile?l.mobile:!1},o[0][45]={value:l.proxy?l.proxy:!1},o[0][46]={value:l.hosting?l.hosting:!1},o[0][46]={value:l.hosting?l.hosting:"N/A"},o[0][47]={value:l.query?l.query:"N/A"};else{try{l=await this.fetchIpInfo()}catch{l=null}l&&l.query&&(o[0][8]={value:l.ip?l.ip:"N/A"},o[0][10]={value:l.userAgent?l.userAgent:"N/A"},o[0][27]={value:l.continent?l.continent:"N/A"},o[0][28]={value:l.continentCode?l.continentCode:"N/A"},o[0][29]={value:l.country?l.country:"N/A"},o[0][30]={value:l.countryCode},o[0][31]={value:l.region?l.region:"N/A"},o[0][32]={value:l.regionName?l.regionName:"N/A"},o[0][33]={value:l.city?l.city:"N/A"},o[0][34]={value:l.district?l.district:"N/A"},o[0][38]={value:l.zip?l.zip:"N/A"},o[0][36]={value:l.lat?l.lat:"N/A"},o[0][37]={value:l.lon?l.lon:"N/A"},o[0][38]={value:l.timezone?l.timezone:"N/A"},o[0][39]={value:l.offset?l.offset:"N/A"},o[0][40]={value:l.isp?l.isp:"N/A"},o[0][41]={value:l.org?l.org:"N/A"},o[0][42]={value:l.as?l.as:"N/A"},o[0][43]={value:l.asname?l.asname:"N/A"},o[0][44]={value:l.mobile?l.mobile:!1},o[0][45]={value:l.proxy?l.proxy:!1},o[0][46]={value:l.hosting?l.hosting:!1},o[0][47]={value:l.query?l.query:"N/A"})}if(c.length===1){const u=c[0];if(o[0][12]={value:u[3]},u[63]===!0&&a.isBefore(u[60])){this.loginAttempts={invalidLogins:u[59],login:i,exp:u[60],currentTime:null};const m=a.to(this.loginAttempts.exp,!0);throw{response:{data:{errtext:"Too many failed Login Attempts",errdetail:`Please wait ${m} before attempting to try again.`}}}}if(u[32]==="QuickBase User"){const m={qdbapi:{username:e.email,password:e.password,hours:e.hours||72}};if(!e.email)throw o[0][7]={value:"Invalid Login"},this.addLoginAttempt(o),{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}};return this.axiosIns({method:"post",url:this.config.loginEndpoint,headers:{"QUICKBASE-ACTION":"API_Authenticate","Content-Type":"application/xml"},data:ce(m),withCredentials:!0}).then(g=>{const x=xe(new window.DOMParser().parseFromString(g.data,"text/xml"));if(x.email=e.email,x.errcode!==0)throw g.data=x,o[0][7]={value:"Invalid Login"},this.addLoginAttempt(o),{response:g};if(x.userid==="1.ckbs"||x.userid.startsWith("1."))throw g.data=x,o[0][7]={value:"Invalid Login"},this.addLoginAttempt(o),{response:g};return delete x.action,delete x.errcode,delete x.errtext,g.data=x,o[0][7]={value:"Successful"},this.addLoginAttempt(o),this.setUserTicket(g.data.ticket),this.fetchAndSetUserData({...g.data,redirect:!0,redirectPath:r,rid:u[3],userType:e.userType})}).catch(g=>{throw o[0][7]={value:"Invalid Password"},this.addLoginAttempt(o),g})}else if(u[32]==="Candidate"){if(await at.compare(e.password,u[7]))return o[0][7]={value:"Successful"},await this.addLoginAttempt(o,!0),this.fetchAndSetUserData({redirect:!0,redirectPath:r,rid:u[3],userType:e.userType});throw o[0][7]={value:"Invalid Password"},{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}}else if(u[32]==="Project User"){if(await at.compare(e.password,u[7]))return o[0][7]={value:"Successful"},await this.addLoginAttempt(o,!0),this.fetchAndSetUserData({redirect:!0,redirectPath:r,rid:u[3],userType:e.userType});throw o[0][7]={value:"Invalid Password"},this.addLoginAttempt(o),{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}}else throw o[0][7]={value:"Invalid Login"},this.addLoginAttempt(o),{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}}else throw o[0][7]={value:"Invalid Login"},this.addLoginAttempt(o),{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}}async checkIfUserExist(e){const r=`{'10'.EX.'Active'}${e.email?`AND{'6'.EX.'${e.email}'}`:""}${e.phoneNumber?`AND{'8'.EX.'${e.phoneNumber}'}`:""}${e.userType?`AND{'32'.EX.'${e.userType}'}`:""}`,s=[{7:{value:"User Request"},8:{value:r},9:{value:1},14:{value:77}}],n=e.email?e.email:e.phoneNumber;if(r==="{'10'.EX.'Active'}AND{'32'.EX.'Candidate'}"||r==="{'10'.EX.'Active'}AND{'32'.EX.'Project User'}")throw{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong"}}};if(!n||n==="")throw{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong"}}};const{data:i}=await this.fetchFromStructureApp({fields:s});return i.length>0}async fetchAndSetUserData(e){this.userStore=this.userStore||C();const{data:r}=await this.userStore.fetchUser(e);if(!r.user)throw{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}};const s=r.user,n=this.getOfficeLocation(),i=this.getCheckIn();if(this.userType=s[32],s[32]==="QuickBase User"?(e.reAuthenticate&&this.nativeQuickbaseReAuthenticate({}),this.dataStore=this.dataStore||we(),this.dataStore.getSelectedOffice||this.dataStore.setSelectedOffice(r.access.find(a=>a[15]===!0&&a[7]==="Office")),e.ticket&&e.userid&&He.loginQuickbase({identifier:s[6],ticket:e.ticket,userId:e.userid}).catch(a=>{console.log("error with login inside fetchandset",a)}),this.loginFeathers({email:s[6],id:s[3]}).catch(async a=>{console.log(a)})):s[32]==="Candidate"?(this.employeeStore=this.employeeStore||B(),$e(s[102])&&await this.setUserTicket(s[102],s[104].toDate())):s[32]==="Project User"&&($e(s[102])&&await this.setUserTicket(s[102],s[104].toDate()),r.access.length>0&&(this.projectsStore=this.projectsStore||W(),this.hiringStore=this.hiringStore||$t(),await this.projectsStore.getProjectsData())),s[82]===!0&&s.empRID&&s[32]==="Candidate"){const a=[{9:{value:s[80]},7:{value:"Employee"}}],{data:c}=await this.fetchFromHiringApp({fields:a});if(this.employeeStore=this.employeeStore||B(),this.employeeStore.setEmployee(c.employee,!0),!c.employee.lang||c.employee.lang===0){let o=1;tt.global.locale.value==="en-US"?o=1:tt.global.locale.value==="es"&&(o=2);const l={339:{value:o}};this.updateEmployeeData({fields:l})}}if(s[100]===""){this.userStore.$patch(c=>c.user[100]=tt.global.locale.value);const a=[{3:{value:s[3]},26:{value:"now"},100:{value:tt.global.locale.value}}];this.upsertRecordsXML({to:"br4pxrbs6",fieldsToReturn:[76],data:a,formatObject:76})}else this.appStore=this.appStore||K(),tt.global.locale.value=s[100],this.appStore.setLang(s[100]);if($e(s[86])&&s[32]==="Candidate"){const a=[{9:{value:s[86]},7:{value:"Self Check-In"}}],{data:c}=await this.fetchFromRecruitingApp({fields:a});c&&(c[13].isToday()&&c[15]==="Called"&&n&&i?this.checkInUser():c[13].isToday()?(this.appStore=this.appStore||K(),this.appStore.setCheckInData(c)):n&&i?this.checkInUser():(this.appStore=this.appStore||K(),this.appStore.setCheckInData({})))}else n&&i&&s[32]==="Candidate"&&this.checkInUser();return s}loginFeathers(e){return this.serverAPI.login({strategy:"local-quickbase",email:e.email,quickbaseId:e.id,token:this.getUserTicket()}).catch(r=>{throw r})}feathersReAuthenticate(){return this.serverAPI.reAuthenticate()}feathersAuthenticated(){return this.serverAPI.authenticated()}async nativeQuickbaseLogin(e){const r={qdbapi:{username:e.email,password:e.password,hours:e.hours||720}};return this.axiosIns({method:"post",url:this.config.loginEndpoint,headers:{"QUICKBASE-ACTION":"API_Authenticate","Content-Type":"application/xml"},data:ce(r),withCredentials:!0}).then(s=>{const n=xe(new window.DOMParser().parseFromString(s.data,"text/xml"));if(n.email=e.email,n.errcode!==0)throw s.data=n,{response:s};if(n.userid==="1.ckbs"||n.userid.startsWith("1."))throw s.data=n,{response:s};return s.data=n,s.data}).catch(s=>{throw s})}async nativeQuickbaseReAuthenticate(e){let r=this.getUserTicket();if(e.kiosk&&(r=this.getKioskTicket()),!r)return null;const s={qdbapi:{ticket:r,hours:e.hours||336}};return this.axiosIns({method:"post",url:this.config.loginEndpoint,headers:{"QUICKBASE-ACTION":"API_Authenticate","Content-Type":"application/xml"},data:ce(s),withCredentials:!0}).then(n=>{const i=xe(new window.DOMParser().parseFromString(n.data,"text/xml"));if(i.errcode!==0)throw n.data=i,{response:n};if(i.userid==="1.ckbs"||i.userid.startsWith("1."))throw n.data=i,{response:n};return n.data=i,e.kiosk?this.setKioskTicket(n.data.ticket):this.setUserTicket(n.data.ticket),n.data}).catch(n=>{throw n})}async checkInUser(e){e=e||{};const r=await this.getUserInfo(),s=this.getOfficeLocation(),n=await this.getIpInfo();if(this.userStore=this.userStore||C(),this.appStore=this.appStore||K(),this.employeeStore=this.employeeStore||B(),!r||!s)return;if(this.appStore.checkedIn){console.log("already checked in",this.appStore.checkedIn),this.removeCheckIn();return}const i=[{6:{value:r[9]?r[9].phoneNumber:r[8].replace(/[^0-9]/g,"")},7:{value:r[35]},8:{value:r[37]},9:{value:s.rid},10:{value:e.reason?e.reason:"Applying"},11:{value:e.position?e.position:""},13:{value:"now"},16:{value:r[80]},21:{value:!0},24:{value:n?JSON.stringify(n):""}}];try{const{data:a}=await this.upsertRecordsXML({to:"br26nivmr",fieldsToReturn:[3,31],data:i,formatObject:31});this.removeCheckIn(),this.appStore.setCheckInData(a[0][31]);const c=[{3:{value:r[3]},26:{value:"now"},86:{value:a[0][3]}}],{data:o}=await this.upsertRecordsXML({to:"br4pxrbs6",fieldsToReturn:[76],data:c,formatObject:76}),l=o[0][76];if(this.userStore.userLoggedIn){const u=Object.assign({},l);delete u.access,delete u.permissions,this.setUserPermissions(l.permissions,!0),this.setUserAccess(l.access,!0),await this.setUserInfo(u,!0)}return l}catch(a){console.log(a)}}async deActivateAccount(e){const r=`{'10'.EX.'Active'}${e.email?`AND{'6'.EX.'${e.email}'}`:""}${e.phoneNumber?`AND{'8'.EX.'${e.phoneNumber}'}`:""}${e.userType?`AND{'32'.EX.'${e.userType}'}`:""}`,s=[{7:{value:"User Request"},8:{value:r},9:{value:1},14:{value:77}}];if(r==="{'10'.EX.'Active'}AND{'32'.EX.'Candidate'}"||r==="{'10'.EX.'Active'}AND{'32'.EX.'Project User'}")throw{response:{data:{errtext:"User Error",errdetail:"Sorry! Something's wrong"}}};const{data:n}=await this.fetchFromStructureApp({fields:s});if(n.length>0){const a=[{3:{value:n[0][3]},10:{value:"Inactive"},50:{value:!1},17:{value:!1}}];return await this.upsertRecordsFormat({to:"br4pxrbs6",fieldsToReturn:[76],data:a}),!0}return n}async resetPassword(e){const r=e.firstName.split(" "),s=e.lastName.split(" ");let n=`AND{'35'.CT.'${e.firstName}'}`,i=`AND{'37'.CT.'${e.lastName}'}`;r.length>1&&(r.forEach((g,x)=>{x===0?n=`({'35'.CT.'${g}'}`:n+=`OR{'35'.CT.'${g}'}`}),n+=")"),s.length>1&&(s.forEach((g,x)=>{x===0?i=`AND({'37'.CT.'${g}'}`:i+=`OR{'37'.CT.'${g}'}`}),i+=")");const a=`{'10'.EX.'Active'}${e.email?`AND{'6'.EX.'${e.email}'}`:""}${e.phoneNumber?`AND{'8'.EX.'${e.phoneNumber}'}`:""}${e.userType?`AND{'32'.EX.'${e.userType}'}`:""}${n}${i}`,c=[{7:{value:"User Request"},8:{value:a},9:{value:1},14:{value:77}}];if(a==="{'10'.EX.'Active'}AND{'32'.EX.'Candidate'}"||a==="{'10'.EX.'Active'}AND{'32'.EX.'Project User'}")throw{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong. Try again."}}};const o=e.email?e.email:e.phoneNumber;if(!o||o==="")throw{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong. Try again."}}};const l=await this.fetchFromStructureApp({fields:c}),u=l.data,m=new Date;if(u.length>0){const x=[{3:{value:u[0][3]},26:{value:m},17:{value:!0}}];return await this.upsertRecordsXML({to:"br4pxrbs6",fieldsToReturn:[76],formatObject:76,data:x})}return l}async findAndUpdateUser(e){const r=e.firstName?e.firstName.split(" "):[],s=e.lastName?e.lastName.split(" "):[];let n=e.firstName?`AND{'35'.CT.'${e.firstName}'}`:"",i=e.firstName?`AND{'37'.CT.'${e.lastName}'}`:"";r.length>1&&(r.forEach((m,g)=>{g===0?n=`({'35'.CT.'${m}'}`:n+=`OR{'35'.CT.'${m}'}`}),n+=")"),s.length>1&&(s.forEach((m,g)=>{g===0?i=`AND({'37'.CT.'${m}'}`:i+=`OR{'37'.CT.'${m}'}`}),i+=")");const a=`{'10'.EX.'Active'}${e.email?`AND{'6'.EX.'${e.email}'}`:""}${e.phoneNumber?`AND{'8'.EX.'${e.phoneNumber}'}`:""}${e.userType?`AND{'32'.EX.'${e.userType}'}`:""}${n}${i}`,c=[{7:{value:"User Request"},8:{value:a},9:{value:1},14:{value:77}}];if(a==="{'10'.EX.'Active'}AND{'32'.EX.'Candidate'}"||a==="{'10'.EX.'Active'}AND{'32'.EX.'Project User'}")throw{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong. Try again."}}};const o=e.email?e.email:e.phoneNumber;if(!o||o==="")throw{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong. Try again."}}};const l=await this.fetchFromStructureApp({fields:c}),u=l.data;if(u.length>0){const m=u[0];let g=JSON.parse(JSON.stringify(e.fields[0]));return g=await Om({3:{value:m[3]}},g),await this.upsertRecordsXML({to:"br4pxrbs6",fieldsToReturn:[76],formatObject:76,data:[g]})}return l}async clearLocalForage(){let e=[w.removeItem(this.appConfig.storageUserKeyName),w.removeItem(this.appConfig.storageUserTicketKeyName),w.removeItem(this.appConfig.storagePermissionsKeyName),w.removeItem(this.appConfig.storageAccessKeyName),w.removeItem(this.appConfig.storageOfficeLocationKeyName),w.removeItem(this.appConfig.storageEmployeeKeyName),w.removeItem(this.appConfig.storageCheckInKeyName),w.removeItem(this.appConfig.storageJobBoardKeyName),w.removeItem(this.appConfig.storageProfile),w.removeItem(this.appConfig.storageProfileStep),w.removeItem(this.appConfig.storageProfileVoluntaryForms),w.removeItem(this.appConfig.storageHiringCenter),L.clear()];return this.appConfig.pageType!=="Candidate Kiosk"&&(e=e.concat([w.removeItem(this.appConfig.storageExperienceOptions),w.removeItem(this.appConfig.storageContactMethods),w.removeItem(this.appConfig.storageEmploymentOptions),w.removeItem(this.appConfig.storageCompanyOptions),w.removeItem(this.appConfig.storageCraftOptions),w.removeItem(this.appConfig.storageRelationshipOptions),w.removeItem(this.appConfig.storageCredentialOptions),w.removeItem(this.appConfig.storageAffirmativeOptions),w.removeItem(this.appConfig.storageVeteranStatusOptions),w.removeItem(this.appConfig.storageDisabilityPages),w.removeItem(this.appConfig.storageDisabilityForm),w.removeItem(this.appConfig.storageEverGreenJobs),w.removeItem(this.appConfig.storageToolCheckList)])),await Promise.allSettled(e)}async storeLogout(){return this.userStore=this.userStore||C(),this.userStore.logout()}async logout(e){const r=ka(),s=[this.clearLocalForage(),this.removeOfficeLocation()];He.logout();const n=r._s[Symbol.iterator]();for(const i of n)if(this.appConfig.pageType==="Candidate"||this.appConfig.pageType==="Candidate Kiosk"){if(i[0]==="employee"){s.push(i[1].$reset());continue}if(i[0]==="boardAppStore"){s.push(i[1].$reset());continue}if(i[0]==="profile"){s.push(i[1].$reset());continue}if(i[0]==="assessment"){s.push(i[1].$reset());continue}if(i[0]==="hiringCenter"){s.push(i[1].$reset());continue}}else{s.push(i[1].$reset());continue}return q.remove(this.appConfig.storageUserTicketKeyName,{secure:!0,sameSite:"Strict"}),await Promise.allSettled(s),!0}async upsertRecordsFormat(...e){const r=e[0].formatObject||null;e[0].formatObject&&delete e[0].formatObject;const s=await this.axiosIns.post(this.config.insertRecords,...e).then(async n=>{let{data:i}=n.data;const a=i.map(async o=>{Object.keys(o).map(async u=>{o[u]=await o[u].value})});return i=await Promise.all(a),n.data});return r&&s.data.length>0&&s.data.forEach(n=>{Array.isArray(r)?r.forEach(i=>{ee(i)&&n[i]&&(n[i]=kt(n[i]))}):ee(r)&&(n[r]=kt(n[r])),n[1]&&(n[1]=h(n[1]).tz("America/Chicago")),n[2]&&(n[2]=h(n[2]).tz("America/Chicago"))}),s}async addRecordNoUser(e){const r={qdbapi:{msInUTC:1}};return this.config.appToken&&(r.qdbapi.apptoken=this.config.appToken),e.fields&&(r.qdbapi.fields=e.fields),r.qdbapi.usertoken=this.config.userToken,this.axiosIns({method:"post",url:`https://elitehcms.quickbase.com/db/${e.to}?a=API_AddRecord`,headers:{"QUICKBASE-ACTION":"API_AddRecord","Content-Type":"application/xml"},data:ce(r)}).then(n=>{const i=xe(new window.DOMParser().parseFromString(n.data,"text/xml"));return n.data=i,n.data})}async upsertRecordsXML(e,r){if(e.data.length>1){const s=[];for(let a=0;a<e.data.length;a++){const c=Object.assign({},e);c.data=[e.data[a]],s.push(this.upsertRecordXML(c,r))}const n=await Promise.all(s),i={data:[],metadata:{createdRecordIds:[],totalNumberOfRecordsProcessed:0,unchangedRecordIds:[],updatedRecordIds:[]}};return n.forEach((a,c)=>{a.data[0]&&i.data.push(a.data[0]),i.metadata.createdRecordIds=i.metadata.createdRecordIds.concat(a.metadata.createdRecordIds),i.metadata.unchangedRecordIds=i.metadata.unchangedRecordIds.concat(a.metadata.unchangedRecordIds),i.metadata.updatedRecordIds=i.metadata.updatedRecordIds.concat(a.metadata.updatedRecordIds),i.metadata.totalNumberOfRecordsProcessed+=a.metadata.totalNumberOfRecordsProcessed,a.metadata.lineErrors&&(i.metadata.lineErrors||(i.metadata.lineErrors={}),i.metadata.lineErrors[c+1]=a.metadata.lineErrors[1])}),i}else return this.upsertRecordXML(e,r)}async upsertRecordXML(e,r){const s={qdbapi:{msInUTC:1}},n=e.formatObject||null,i=e.booleanFields?e.booleanFields.concat(this.config.booleanFields[`${e.to}`]||[]):this.config.booleanFields[`${e.to}`]||[];let a="";e.data[0][3]?(a="API_EditRecord",s.qdbapi.rid=e.data[0][3].value,delete e.data[0][3]):a="API_AddRecord",this.config.appToken&&(s.qdbapi.apptoken=this.config.appToken),e.data&&(s.qdbapi.fields=e.data),e.fieldsToReturn&&(s.qdbapi.clist=e.fieldsToReturn.join("."));const c=await this.getUserTicket();if(c)s.qdbapi.ticket=c;else if(this.config.userToken&&this.config.dev)s.qdbapi.usertoken=this.config.userToken;else if(e.to==="br54phpqz"&&this.appConfig.pageType==="Candidate Kiosk"){const l=this.getKioskTicket();l&&(s.qdbapi.ticket=l)}return this.axiosIns({method:"post",url:`https://elitehcms.quickbase.com/db/${e.to}?a=${a}`,headers:{"QUICKBASE-ACTION":`${a}`,"Content-Type":"application/xml"},data:_t(s)}).then(l=>{let u=xe(new window.DOMParser().parseFromString(l.data,"text/xml"));if(u.metadata={createdRecordIds:[],...u.errcode!==0&&{lineErrors:{}},totalNumberOfRecordsProcessed:0,unchangedRecordIds:[],updatedRecordIds:[]},u.errcode!==0?(u.data=[],u.metadata.lineErrors[1]=[u.errdetail]):(u.data=[$m(new window.DOMParser().parseFromString(l.data,"text/xml"))],n&&(Array.isArray(n)?n.forEach(m=>{ee(m)&&u.data[0][m]&&(u.data[0][m]=kt(u.data[0][m]))}):ee(n)&&u.data[0][n]&&u.data[0][n]&&(u.data[0][n]=kt(u.data[0][n]))),i.length>0&&i.forEach(m=>{u.data[0][m]&&(u.data[0][m]=u.data[0][m]===1)}),u.data[0][1]&&(u.data[0][1]=h(u.data[0][1]).tz("America/Chicago")),u.data[0][2]&&(u.data[0][2]=h(u.data[0][2]).tz("America/Chicago"))),u.data[0]&&u.rid&&(u.metadata.totalNumberOfRecordsProcessed=1,u.num_fields_changed===0&&(u.metadata.unchangedRecordIds=[u.rid]),a==="API_EditRecord"&&u.num_fields_changed>0?u.metadata.updatedRecordIds=[u.rid]:a==="API_AddRecord"&&(u.metadata.createdRecordIds=[u.rid])),delete u.action,delete u.errcode,delete u.errdetail,delete u.errtext,delete u.num_fields_changed,delete u.rid,delete u.update_id,delete u.record,l.data=u,r){const{data:m}=l.data;let g;r.action==="read"?g=m[0][12]:g=m[0],this.config.dev||Im({meta:r,record:g})}return l.data})}async addRecordXML(e){const r={qdbapi:{msInUTC:1}};this.config.appToken&&(r.qdbapi.apptoken=this.config.appToken),e.fields&&(r.qdbapi.fields=e.fields),e.list&&(r.qdbapi.clist=e.list.join("."));const s=await this.getUserTicket();return s?r.qdbapi.ticket=s:this.config.userToken&&this.config.dev&&(r.qdbapi.usertoken=this.config.userToken),this.axiosIns({method:"post",url:`https://elitehcms.quickbase.com/db/${e.to}?a=API_AddRecord`,headers:{"QUICKBASE-ACTION":"API_AddRecord","Content-Type":"application/xml"},data:ce(r)}).then(i=>{const a=xe(new window.DOMParser().parseFromString(i.data,"text/xml"));return i.data=a,i.data})}async editRecordXML(e){const r={qdbapi:{msInUTC:1}};if(e.rid)r.qdbapi.rid=e.rid;else throw"You must supply rid!";this.config.appToken&&(r.qdbapi.apptoken=this.config.appToken),e.fields&&(r.qdbapi.fields=e.fields),e.list&&(r.qdbapi.clist=e.list.join("."));const s=await this.getUserTicket();return s?r.qdbapi.ticket=s:this.config.userToken&&this.config.dev&&(r.qdbapi.usertoken=this.config.userToken),this.axiosIns({method:"post",url:`https://elitehcms.quickbase.com/db/${e.to}?a=API_EditRecord`,headers:{"QUICKBASE-ACTION":"API_EditRecord","Content-Type":"application/xml"},data:ce(r)}).then(i=>{const a=xe(new window.DOMParser().parseFromString(i.data,"text/xml"));return i.data=a,i.data})}async addLogRecord(e){const r={qdbapi:{}};return r.qdbapi.apptoken="dx47ve3djh2kcybbetrvscuqa2gk",e.data&&(r.qdbapi.fields=e.data),e.list&&(r.qdbapi.clist=e.list.join(".")),r.qdbapi.usertoken="b596fu_ng3q_0_dxyp9j657g8xdbgiftajcj56p7s",fetch("https://elitehcms.quickbase.com/db/bsh2qrysj?a=API_AddRecord",{method:"POST",credentials:"omit",headers:{"Content-Type":"application/xml"},body:_t(r)}).then(i=>i.text()).then(i=>i).catch(i=>{throw i})}async fetchFromProjectsApp(e,r){const s=await this.upsertRecordsXML({to:"bsazqhchc",fieldsToReturn:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],formatObject:12,data:e.fields},r);return s.data=s.data[0][12],s}async fetchFromStructureApp(e,r){const s=await this.upsertRecordsXML({to:"br9srnufv",fieldsToReturn:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],formatObject:12,data:e.fields},r);return s.data=s.data[0][12],s}async fetchFromHiringApp(e,r){const s=await this.upsertRecordsXML({to:"br9vuzuj7",fieldsToReturn:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],formatObject:12,data:e.fields},r);return s.data=s.data[0][12],s}async fetchFromRecruitingApp(e,r){const s=await this.upsertRecordsXML({to:"br9j45fg5",fieldsToReturn:[1,2,3,4,5,6,7,8,9,10,11,12,13,14],formatObject:12,data:e.fields},r);return s.data=s.data[0][12],s}async fetchFromCredentialsAndTrainingApp(e,r){const s=await this.upsertRecordsXML({to:"bsgydhtiq",fieldsToReturn:[1,2,3,4,5,6,7,8,9,10,11,12,13,14],formatObject:12,data:e.fields},r);return s.data=s.data[0][12],s}async softDeleteEmployee(e){const r=new Date,s=[{3:{value:e},109:{value:""},25:{value:""},28:{value:""},16:{value:""},26:{value:""},34:{value:""},509:{value:!0},510:{value:r}}],{data:n}=await this.upsertRecordsFormat({to:"bp3gb7ng2",fieldsToReturn:[3,500],data:s,formatObject:500});return n[3]}fetchIpInfo(){return fetch("https://api-v1.elitehcms.com/ipInfo").then(e=>e.json()).then(e=>(this.setIpInfo(e),e))}async addLoginAttempt(e,r){try{let o=null;q.has("clm-qb-id")?o=q.get("clm-qb-id"):(o=new DeviceUUID().get(),q.set("clm-qb-id",o,{expires:"365d",secure:!0,sameSite:"Strict"})),e[0][24]={value:o}}catch(o){console.log(o)}const s=e[0][6]?e[0][6].value:"",n=e[0][7]?e[0][7].value:"",i=h(),a=i.add(this.config.lastAttemptExpMinutes,"minute");n[7]==="Invalid Login"||n[7]==="Invalid Password"?s[6]===this.loginAttempts.login?(this.loginAttempts.invalidLogins+=1,this.loginAttempts.exp=a,this.loginAttempts.currentTime=i,e[0][15]={value:this.loginAttempts.invalidLogins},e[0][16]={value:a.valueOf()}):(this.loginAttempts.invalidLogins=1,this.loginAttempts.exp=a,this.loginAttempts.currentTime=i,this.loginAttempts.login=s[6],e[0][15]={value:this.loginAttempts.invalidLogins},e[0][16]={value:a.valueOf()}):n[7]==="Successful"&&(this.loginAttempts={invalidLogins:0,login:null,exp:null,currentTime:null}),e[0][25]={value:this.appConfig.pageId},e[0][26]={value:this.appConfig.appId};const{data:c}=await this.upsertRecordsXML({to:"br54phpqz",data:e,formatObject:22,fieldsToReturn:[3,22]});if(r&&c.length===1&!!c[0][22])return this.setUserTicket(c[0][22][20],c[0][22][23].toDate())}async getFileAttachmentUrl(e){let r;const s=await this.getUserTicket();return s?r=`${e}&ticket=${s}`:this.config.userToken&&this.config.dev&&(r=`${e}&usertoken=${this.config.userToken}`),r}async doQuery(e){const r={qdbapi:{...this.config.commonParameters}};e.queryTotalRecords=$e(e.queryTotalRecords)?e.queryTotalRecords:!1,e.select&&(r.qdbapi.clist=e.select.join(".")),e.where&&(r.qdbapi.query=e.where);let s=null;if(e.sortBy)for(let o=0;o<e.sortBy.length;o++)o===0?(r.qdbapi.slist=`${e.sortBy[o].fieldId?`${e.sortBy[o].fieldId}.`:""}`,s=`${e.sortBy[o].order==="ASC"?"sortorder-A.":"sortorder-D."}`):(r.qdbapi.slist+=`${e.sortBy[o].fieldId?`${e.sortBy[o].fieldId}.`:""}`,s+=`${e.sortBy[o].order==="ASC"?"sortorder-A.":"sortorder-D."}`);e.options&&(r.qdbapi.options=`${e.options.top?`num-${e.options.top}.`:""}${s||""}${e.options.skip&&e.options.skip>0?`skp-${e.options.skip}`:""}`),this.config.appToken&&(r.qdbapi.apptoken=this.config.appToken);const n=await this.getUserTicket();n&&!e.refresh?r.qdbapi.ticket=n:this.config.userToken&&this.config.dev&&(r.qdbapi.usertoken=this.config.userToken);const i=this.axiosIns({method:"post",url:`https://elitehcms.quickbase.com/db/${e.from}?a=API_DoQuery`,headers:{"QUICKBASE-ACTION":"API_DoQuery","Content-Type":"application/xml"},data:ce(r)}).then(o=>{const l={};l.data=Rm(new window.DOMParser().parseFromString(o.data,"text/xml")),l.fields=Pm(new window.DOMParser().parseFromString(o.data,"text/xml"));const u=[];return l.fields.forEach(m=>{m.type==="checkbox"&&u.push(m.id)}),l.data.forEach(m=>{for(const[g,x]of Object.entries(m))u.includes(g)&&(m[`${g}`]=x===1)}),l.metadata={totalRecords:l.data.length,numRecords:l.data.length,numFields:e.select?e.select.length:0,skip:e.options&&e.options.skip?e.options.skip:0,...e.options&&e.options.top?{top:e.options.top}:{}},o.data=l,o.data});let a=null;e.queryTotalRecords&&(a=this.axiosIns({method:"post",url:`https://elitehcms.quickbase.com/db/${e.from}?a=API_DoQueryCount`,headers:{"QUICKBASE-ACTION":"API_DoQueryCount","Content-Type":"application/xml"},data:ce(r)}).then(o=>{const l=xe(new window.DOMParser().parseFromString(o.data,"text/xml"));return o.data=l,o.data}));const c=await i;if(e.queryTotalRecords){const o=await a;c.metadata.totalRecords=o.numMatches}return c}async checkKioskStatus(e){this.kioskStore=this.kioskStore||Q(),this.hiringCenterStore=this.hiringCenterStore||Z();let r=await w.getItem(this.appConfig.storageLastKioskFetch);const s=this.getKioskTicket();let n=!1;if(r&&r.$d&&!e&&(r=h(r.$d),e=r.isBefore(h().subtract(2,"day")),n=e),!s)return!1;if(r)if(e||!this.kioskStore.kioskAvailable||!this.hiringCenterStore.hiringCenterAvailable){const{data:i}=await this.getNativeQuickbaseUser({kiosk:!0});if(i.login==="Anonymous")return!1;{const a=await this.kioskStore.fetchKioskAccount(i,!0);return s&&n&&this.nativeQuickbaseReAuthenticate({kiosk:!0}),a.length!==0}}else{if(this.kioskStore.kioskAvailable&&this.hiringCenterStore.hiringCenterAvailable&&"45"in this.kioskStore.kioskAccount&&"bookmarks"in this.kioskStore.kioskAccount&&(!e||this.config.dev))return!0;if(this.kioskStore.kioskAvailable&&this.hiringCenterStore.hiringCenterAvailable&&(!e||this.config.dev)){const{data:i}=await this.getNativeQuickbaseUser({kiosk:!0});if(i.login==="Anonymous")return!1;{const a=await this.kioskStore.fetchKioskAccount(i,!0);return s&&this.nativeQuickbaseReAuthenticate({kiosk:!0}),a.length!==0}}else return!1}else{const{data:i}=await this.getNativeQuickbaseUser({kiosk:!0});if(i.login==="Anonymous")return!1;{const a=await this.kioskStore.fetchKioskAccount(i,!1);return s&&n&&this.nativeQuickbaseReAuthenticate({kiosk:!0}),a.length!==0}}}async getNativeQuickbaseUser(e){const r={qdbapi:{}};if(e.qbUser){const i=await this.getUserTicket();r.qdbapi.ticket=i}if(this.config.dev&&e.kiosk){const i=this.getKioskTicket();r.qdbapi.ticket=i}return await this.axiosIns({method:"post",url:"https://elitehcms.quickbase.com/db/main?a=API_GetUserInfo",headers:{"QUICKBASE-ACTION":"API_GetUserInfo","Content-Type":"application/xml"},data:ce(r)}).then(i=>{const a={};return a.data=Cm(new window.DOMParser().parseFromString(i.data,"text/xml")),a.data.errcode&&(a.data.email="",a.data.externalAuth=0,a.data.firstName="",a.data.id="1.ckbs",a.data.isVerified=0,a.data.lastName="",a.data.login="Anonymous",a.data.screenName="Anonymous"),i.data=a,i.data})}async downloadBase64(e){const{tableId:r,recordId:s,fieldId:n,versionNumber:i=1}=e;return this.axiosIns.get(`https://api.quickbase.com/v1/files/${r}/${s}/${n}/${i}`).then(a=>a.data)}async postAPIPerformance(e){const s=await this.getUserInfo();e.qb_user=s,delete e.qb_user[1],delete e.qb_user[2],delete e.qb_user[104],delete e.qb_user.access,delete e.qb_user.permissions,fetch("http://localhost:1337/api/qb-api-perfromances",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({data:e})})}}const $e=t=>!(typeof t=="undefined"||t===null||t===""),ee=t=>!isNaN(parseFloat(t))&&isFinite(t),ce=t=>{let e="";for(const r in t){if(e+=t[r]instanceof Array?"":`<${r}>`,t[r]instanceof Array)if(r==="fields")for(let s=0;s<t[r].length;s++)if(Object.keys(t[r][s]).length===2&&t[r][s].filename){let n=null;for(const i in t[r][s])ee(i)&&(n=i);e+=`<field fid="${n}" filename="${t[r][s].filename}">${t[r][s][`${n}`]}</field>`}else for(const n in t[r][s])e+=`<field fid="${n}">${t[r][s][n].replaceAll("&","&#38;").replaceAll("<","&#60;").replaceAll(">","&#62;")}</field>`;else for(const s in t[r])e+=`<${r}>`,e+=ce(t[r][s]),e+=`</${r}>`;else typeof t[r]=="object"?e+=ce(t[r]):e+=t[r];e+=t[r]instanceof Array?"":`</${r}>`}return e=e.replace(/<\/?[0-9]{1,}>/g,""),e},_t=t=>{let e="";for(const r in t){if(e+=t[r]instanceof Array?"":`<${r}>`,t[r]instanceof Array)if(r==="fields")for(let s=0;s<t[r].length;s++)if(Object.keys(t[r][s]).length===2&&t[r][s].filename){let n=null;for(const i in t[r][s])ee(i)&&(n=i);e+=`<field fid="${n}" filename="${t[r][s].filename}">${t[r][s][`${n}`].value}</field>`}else for(const n in t[r][s])if(Object.keys(t[r][s][n]).length===2&&(t[r][s][n].filename||t[r][s][n].fileName)){let i=t[r][s][n].filename||t[r][s][n].fileName;e+=`<field fid="${n}" filename="${i}">${t[r][s][n].value}</field>`}else try{e+=`<field fid="${n}">${t[r][s][n].value.replaceAll("&","&#38;").replaceAll("<","&#60;").replaceAll(">","&#62;")}</field>`}catch{e+=`<field fid="${n}">${t[r][s][n].value}</field>`}else for(const s in t[r])e+=`<${r}>`,e+=_t(t[r][s]),e+=`</${r}>`;else typeof t[r]=="object"?e+=_t(t[r]):e+=t[r];e+=t[r]instanceof Array?"":`</${r}>`}return e=e.replace(/<\/?[0-9]{1,}>/g,""),e},xe=t=>{const e=t.querySelector("qdbapi").children,r={};for(let s=0;s<e.length;s++)e[s].tagName!=="table"&&(r[`${e[s].tagName}`]=ee(e[s].innerHTML)?parseInt(e[s].innerHTML):e[s].innerHTML);return r},Cm=t=>{const e=t.querySelector("qdbapi user");if(!e)return xe(t);const r={id:ee(e.id)?parseInt(e.id):e.id};for(let s=0;s<e.children.length;s++)r[`${e.children[s].tagName}`]=ee(e.children[s].innerHTML)?parseInt(e.children[s].innerHTML):e.children[s].innerHTML;return r},Rm=t=>{const e=t.querySelector("qdbapi table records"),r=[];for(let s=0;s<e.children.length;s++){const n={};for(let i=0;i<e.children[s].children.length;i++)e.children[s].children[i].id&&(n[`${e.children[s].children[i].id}`]=ee(e.children[s].children[i].innerHTML)?parseInt(e.children[s].children[i].innerHTML):e.children[s].children[i].innerHTML);r.push(n)}return r},$m=t=>{const e=t.querySelector("qdbapi record"),r={};for(let s=0;s<e.children.length;s++)e.children[s].id&&(r[`${e.children[s].id}`]=ee(e.children[s].innerHTML)?parseInt(e.children[s].innerHTML):e.children[s].innerHTML);return r},Pm=t=>{const e=t.querySelector("qdbapi table fields"),r=[];for(let s=0;s<e.children.length;s++){let n=e.children[s].attributes.field_type.value,i=e.children[s].firstElementChild.nodeName==="label"?e.children[s].firstElementChild.innerHTML:null;if(!i){for(let c=0;c<e.children[s].children.length;c++)if(e.children[s].children[c].nodeName==="label"){i=e.children[s].children[c].innerHTML;break}}n==="float"&&(n="numeric");const a={id:e.children[s].id,label:i,type:n};r.push(a)}return r},Te=(t,e)=>(Array.isArray(t)?t.forEach(r=>{Object.keys(r).forEach(s=>{r[s]&&(r[s]=Te(r[s],s))})}):!ee(e)&&typeof t=="object"&&!Array.isArray(t)&&t!==null?Object.keys(t).forEach(r=>{t[r]&&(t[r]=Te(t[r],r))}):$e(t.date)&&$e(t.time)&&t.time!=="::"?(t=`${t.date} ${t.time}`,t=h(t,"MM-DD-YYYY H:m:s").tz("America/Chicago")):$e(t.date)?(t=`${t.date}`,t=h(t,"MM-DD-YYYY").tz("America/Chicago")):$e(t.time)&&t.time!=="::"?(t=`${t.time}`,t=h(t,"H:m:s").tz("America/Chicago")):typeof t=="object"&&!Array.isArray(t)&&t!==null&&Object.keys(t).forEach(r=>{t[r]&&(t[r]=Te(t[r],r))}),t),kt=t=>{const e=t.replace(/\n/g,"\\n");try{let r=JSON.parse(e);return Array.isArray(r)?r.forEach(s=>{Object.keys(s).forEach(n=>{s[n]&&(s[n]=Te(s[n],n))})}):typeof r=="object"&&!Array.isArray(r)&&r!==null&&Object.keys(r).forEach(s=>{Array.isArray(r[s])?r[s].forEach(n=>{Object.keys(n).forEach(i=>{ee(i)&&n[i]?n[i]=Te(n[i],i):n[i]&&typeof n[i]=="object"&&!Array.isArray(n[i])&&n[i]!==null&&Object.keys(n[i]).forEach(a=>{n[i][a]&&(n[i][a]=Te(n[i][a],a))})})}):typeof r[s]=="object"&&!Array.isArray(r[s])&&r[s]!==null&&(ee(s)?r[s]=Te(r[s],s):Object.keys(r[s]).forEach(n=>{r[s][n]&&(r[s][n]=Te(r[s][n],n))}))}),r}catch(r){return console.log(r),console.log("error parsing:",e),[]}};function Em(t,e){return{quickbase:new Tm(t,e)}}const Dm=Fr(_r.create({baseURL:Kn.baseURL,timeout:25e3,headers:{"Content-Type":"application/json"}}),{maxRequests:6,perMilliseconds:1e3}),{quickbase:A}=Em(Dm,{});var jm=wi(({app:t})=>{t.config.globalProperties.$quickbase=A}),Qm=Object.freeze(Object.defineProperty({__proto__:null,default:jm,quickbase:A},Symbol.toStringTag,{value:"Module"})),vi=[{title:"Home",i18n:"home",caption:"Home",icon:"home",to:{name:"home",exact:!0},resource:"dashboard",action:"read",userType:"All"},{title:"Profile",caption:"Information",icon:"assignment_ind",to:{name:"profile",exact:!0},resource:"profile",action:"read",access:{userType:"none",public:!1,private:!1}},{title:"Job Board",caption:"Job Board",icon:"work",to:{name:"jobs",exact:!0},resource:"jobBoardMenu",action:"read",userType:"Candidate",access:{userType:"Candidate",public:!0,private:!1,checkIn:!1}},{title:"Apply",caption:"Apply",icon:"feed",to:{name:"apply",exact:!0},resource:"applyMenu",action:"read",userType:"Candidate",access:{userType:"Candidate",public:!0,private:!0,checkIn:!0}}],bi=[{title:"Home",caption:"Dashboard",icon:"fa-solid fa-house",to:{name:"home",exact:!0},resource:"dashboard",userType:"Project User"},{title:"Hire Requests",caption:"Requests",icon:"fa-solid fa-user-plus",to:{name:"requests",exact:!0},resource:"projectRequests",userType:"Project User"},{title:"Pipeline",caption:"Pipeline",icon:"fa-solid fa-bars-progress",to:{name:"pipeline",exact:!0},resource:"projectPipeline",userType:"Project User"},{title:"Expected Arrivals",caption:"Arrivals",icon:"fa-solid fa-person-walking-arrow-right",to:{name:"arrivals",exact:!0},resource:"projectArrivals",userType:"Project User"},{title:"Employees",caption:"Employees",icon:"fa-solid fa-people-group",to:{name:"employees",exact:!0},resource:"projectEmployees",userType:"Project User"},{title:"Reporting",caption:"Reporting",icon:"fa-solid fa-file-lines",to:{name:"reporting",exact:!0},resource:"projectEmployees",userType:"Project User"},{title:"Compliance",caption:"Compliance",icon:"fa-solid fa-shield-halved",to:{name:"compliance",exact:!0},resource:"compliance",userType:"Project User"},{title:"Inventory",caption:"Inventory",icon:"fa-solid fa-boxes-stacked",to:{name:"yard-inventory",exact:!0},resource:"projectInventory",userType:"Project User"}],xi=[{title:"Self Check-Ins",caption:"self-check-ins",icon:"list_alt",to:{name:"self-check-ins",exact:!0},resource:"selfCheckIns",userType:"QuickBase User"},{title:"Hiring",caption:"Hiring",icon:"group_add",to:{name:"profiles",exact:!0},resource:"hiring",userType:"QuickBase User"},{title:"Recruiting",caption:"Recruiting",icon:"connect_without_contact",to:{name:"jobPost",exact:!0},resource:"recruiting",userType:"QuickBase User"},{title:"Projects",caption:"Projects",icon:"corporate_fare",to:{name:"projects",exact:!0},resource:"projects",userType:"QuickBase User"},{title:"Releases",caption:"Releases",icon:"receipt",to:{name:"releases",exact:!0},resource:"releases",userType:"QuickBase User"},{title:"Chat",caption:"Chat",icon:"chat",to:{name:"chat",exact:!0},resource:"chat",userType:"QuickBase User"},{title:"Admin",caption:"Admin",icon:"settings",to:{name:"admin",exact:!0},resource:"admin",userType:"QuickBase User"}],Nm=[{title:"Summary",caption:"Summary",icon:"summarize",resource:"open",to:{name:"ee-summary",exact:!0}},{title:"History",caption:"History",icon:"history",resource:"employeeHistory",to:{name:"ee-history",exact:!0}}],Fm=[{title:"General",caption:"General",icon:"info_outline",resource:"open",to:{name:"project-general",exact:!0}},{title:"Job Structure",caption:"Jobs",icon:"construction",resource:"open",to:{name:"project-jobs",exact:!0}},{title:"Requirements",caption:"Requirements",icon:"room_preferences",resource:"open",to:{name:"project-requirements",exact:!0}},{title:"Hire Requests",caption:"Requests",icon:"shopping_basket",resource:"open",to:{name:"project-requests",exact:!0}},{title:"Manpower",caption:"Manpower",icon:"groups",resource:"open",to:{name:"project-manpower",exact:!0}}];const K=te("app",{state:()=>({title:O.toolbarTitle,lang:null,checkIn:O.pageType==="Candidate"||O.pageType==="Candidate Kiosk",checkInData:{},pageType:O.pageType,userType:O.userType,menu:O.userType==="Candidate"?vi:O.userType==="Project User"?bi:O.userType==="QuickBase User"?xi:[],startPage:O.startPage,version:O.version,homeButton:O.homeButton,event:null,kioskActive:!1,country:O.country,sandbox:O.sandbox||!1}),getters:{appVersion:t=>t.version,toolbarTitle:t=>t.title,currentPageType:t=>t.pageType,currentUserType:t=>t.userType,inHiringCenter:t=>t.checkInData[15]?t.checkInData[15]==="Waiting":!1,checkedIn:t=>t.checkInData[15]?t.checkInData[15]==="Waiting":!1,checkedInStatus:t=>t.checkInData[15]||null,onKiosk(){return this.currentPageType==="Candidate Kiosk"},currentLang:t=>t.lang,startPageEnabled:t=>t.startPage,homeButtonEnabled:t=>t.homeButton,activeMenu(){const{hiringCenterAvailable:t}=Z();return this.menu.filter(r=>{let s=!0,n=!0;if(ke.can(r.action||"read",r.resource)){let i=ke.possibleRulesFor(r.action||"read",r.resource)[0].conditions;return i&&(i.userType&&(s=i.userType===this.currentUserType,s||(n=!1)),i.accept&&(s=i.accept.find(a=>a==="checkedIn"&&this.checkedIn||a==="kiosk"&&this.onKiosk?!0:!!(a==="office"&&t)),s||(n=!1)),i.deny&&(s=i.deny.filter(a=>a==="checkedIn"&&this.checkedIn||a==="kiosk"&&this.onKiosk?!0:!!(a==="office"&&t)).length===0,s||(n=!1))),n}else return!1})},viewEmployeeMenu(){return Nm.filter(e=>{let r=!0,s=!0;if(ke.can(e.action||"read",e.resource)){let n=ke.possibleRulesFor(e.action||"read",e.resource)[0].conditions;return n&&n.userType&&(r=n.userType===this.currentUserType,r||(s=!1)),s}else return!1})},viewProjectMenu(){return Fm.filter(e=>{let r=!0,s=!0;if(ke.can(e.action||"read",e.resource)){let n=ke.possibleRulesFor(e.action||"read",e.resource)[0].conditions;return n&&n.userType&&(r=n.userType===this.currentUserType,r||(s=!1)),s}else return!1})},currentEvent:t=>t.event,getCountry:t=>t.country,sandboxMode:t=>t.sandbox},actions:{setCheckInData(t){const{setHiringCenter:e}=Z();this.checkInData=t,w.setItem(O.storageCheckInKeyName,t),this.currentPageType==="Candidate"&&t[15]==="Waiting"&&e(t.office,!0)},openWindow(t,e){(e.fullScreen===null||e.fullScreen===void 0)&&(e.fullScreen=!0),e.name==="Full Profile"&&!e.height&&(e.height=775),e.width=e.width?e.width:screen.availWidth&&e.fullScreen?screen.availWidth:1450,e.height=e.height?e.height:screen.availHeight&&e.fullScreen?screen.availHeight:700;const r=window.top.outerHeight/2+window.top.screenY-e.height/2,s=window.top.outerWidth/2+window.top.screenX-e.width/2;`${e.width}`,`${e.height}`,e.fullScreen,Ca(e.url,null,{width:e.width,height:e.height,top:r,left:s,popup:!0,fullscreen:e.fullScreen||!0,menubar:!1,toolbar:!1})},async addTaskToCheckin({task:t,reason:e,active:r}){const s={3:{value:this.checkInData[3]},10:{value:e},27:{value:t}};r&&Object.assign(s,{36:{value:!0}});const{data:n}=await A.upsertRecordsXML({to:"br26nivmr",data:[s],fieldsToReturn:[31],formatObject:31});if(n[0])return this.checkInData=n[0][31],this.checkInData;throw"Something went wrong"},setLang(t){this.lang=t},setEvent(t,e){this.event=t,e&&w.setItem(O.storageEvent,t),t||w.removeItem(O.storageEvent)},setKioskActive(t){this.kioskActive=t},setStartPage(t,e){this.startPage=t,e&&w.setItem(O.storageStartPage,t),t||w.removeItem(O.storageStartPage)},setHomeButton(t,e){this.homeButton=t,e&&w.setItem(O.storageHomeButton,t),t||w.removeItem(O.storageHomeButton)},setCountry(t){this.country=t},setMode(t){this.pageType=t,w.setItem("clm_mode",t),this.userType=t,this.checkIn=!1,t==="Candidate"||t==="Candidate Kiosk"?(this.checkIn=!0,this.userType="Candidate",this.menu=vi):t==="Project User"?this.menu=bi:t==="QuickBase User"&&(this.menu=xi)}}});export{fa as A,_e as B,ma as C,us as D,Ws as E,B as F,Z as G,G as H,we as I,at as J,Pe as K,se as L,Ym as M,W as N,$t as O,Uu as P,Jn as Q,He as R,Xm as S,Ca as T,zm as U,Qm as V,zt as _,ke as a,K as b,Q as c,ca as d,Sh as e,Zn as f,oa as g,ha as h,yt as i,la as j,cp as k,na as l,ty as m,fs as n,Yh as o,Wh as p,A as q,Ht as r,Wo as s,ls as t,C as u,We as v,ta as w,sd as x,Fh as y,Ft as z};
