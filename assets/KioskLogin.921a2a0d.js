import{r as m,c as y,v as C,aj as K,be as t,d as a,b$ as c,cz as w,a3 as i,b as q,bU as g,cA as A,c3 as B,c0 as U,C as M,bB as R,bA as L,cB as P,z as S}from"./index.e20034c8.js";import{u as $}from"./use-quasar.bd9c808e.js";import{c as _,u as x}from"./array.1710152c.js";import{d as j,q as z}from"./quickbase.38cf4852.js";const E=S("div",{class:"text-h6"},"Hiring Center Kiosk Login",-1),G={__name:"KioskLogin",setup(I){const{screen:n,notify:u}=$(),{fetchKioskAccount:Q}=j(),d=m(!0),f=m(null),r=m(!1),V=y(()=>_().email().required().nullable()),h=y(()=>_().required().nullable()),{errorMessage:v,value:o}=x("email",V),{errorMessage:b,value:l}=x("password",h),k=async()=>{if(o.value===""||l.value===""||!o.value||!l.value){u({type:"negative",message:"Email and password Required!",timeout:7e3,position:n.lt.md?"top":"top-right"});return}r.value=!0;const p={email:o.value,password:l.value};try{const e=await z.nativeQuickbaseLogin(p);if((await Q(e,!0)).length===0){u({type:"negative",message:"Valid Kiosk Account Required!",timeout:7e3,position:n.lt.md?"top":"top-right"}),r.value=!1;return}else r.value=!1,f.value.hide()}catch(e){r.value=!1;const{response:s}=e;s&&s.data.errtext&&s.data.errdetail?u({type:"negative",message:s.data.errdetail,timeout:7e3,position:n.lt.md?"top":"top-right"}):(console.log(e),u({type:"negative",message:"An error occurred, please try again later",timeout:7e3,position:n.lt.md?"top":"top-right"}))}};return(p,e)=>(C(),K(P,M({persistent:""},p.$attrs,{ref_key:"dialog",ref:f,onSubmit:e[3]||(e[3]=R(()=>{},["prevent"])),onKeyup:L(k,["enter"])}),{default:t(()=>[a(U,{style:{"min-width":"350px"}},{default:t(()=>[a(c,null,{default:t(()=>[E]),_:1}),a(c,{class:"q-pt-none"},{default:t(()=>[a(w,{for:"email-kiosk",style:{"padding-bottom":"0px"},autocomplete:"username",clearable:"",outlined:"",modelValue:i(o),"onUpdate:modelValue":e[0]||(e[0]=s=>q(o)?o.value=s:null),type:"email",label:"Email",tabindex:"1",error:!!i(v),"error-message":i(v)},{prepend:t(()=>[a(g,{name:"email"})]),_:1},8,["modelValue","error","error-message"])]),_:1}),a(c,{class:"q-pt-none"},{default:t(()=>[a(w,{for:"password-kiosk",class:"q-mt-lg",outlined:"",modelValue:i(l),"onUpdate:modelValue":e[2]||(e[2]=s=>q(l)?l.value=s:null),type:d.value?"password":"text",label:"Password",autocomplete:"current-password",tabindex:"2",error:!!i(b),"error-message":i(b)},{append:t(()=>[a(g,{name:d.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[1]||(e[1]=s=>d.value=!d.value)},null,8,["name"])]),prepend:t(()=>[a(g,{name:"lock"})]),_:1},8,["modelValue","type","error","error-message"])]),_:1}),a(A,{align:"right",class:"text-primary"},{default:t(()=>[a(B,{label:"Login",color:"primary",onClick:k,loading:r.value,disabled:r.value},null,8,["loading","disabled"])]),_:1})]),_:1})]),_:1},16,["onKeyup"]))}};export{G as _};
