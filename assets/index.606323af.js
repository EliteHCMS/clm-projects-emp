import{bX as Ye,r as C,c as E,d1 as Ae,aQ as xe,ct as Me,h as L,g as $e,bW as D,a5 as Se,bT as De,A as Y,B as V,d as a,br as s,D as b,E as ie,cS as U,G as ue,a8 as j,cT as R,ax as _,ac as Q,aq as H,cU as W,bO as ce,bS as je,F as de,b4 as me,bR as Ve,bP as fe,bQ as qe,cV as ae,cy as le,dd as Qe,bt as Re,_ as Pe,bV as ve,b5 as pe}from"./index.6e98b4fc.js";import{Q as ge,a as Ie}from"./QSelect.89f587a8.js";import{Q as Oe}from"./QPage.0b15359a.js";import{u as he}from"./use-quasar.7b00bfd6.js";import{g as ye,c as Te,u as ze,i as be,q}from"./app.57679044.js";import{dayjs as c}from"./dayjs.0920df94.js";import{u as Ne}from"./dataStore.aaea5633.js";import{Q as B}from"./QTooltip.666c009d.js";import{Q as Be}from"./QMenu.5a6a8e58.js";import{Q as Ee}from"./QList.9fe04d2e.js";import{Q as Fe}from"./QTd.c4e9db26.js";import{Q as Le}from"./QTr.d2fd4a1d.js";import{Q as Ue}from"./QInnerLoading.c5fcd529.js";import{Q as He}from"./QTable.a3a97b91.js";import{C as We}from"./ClosePopup.e83694ef.js";import"./arrivalDate.1ad79435.js";import{_ as Xe}from"./projectSelector.e82114ba.js";import"./QChip.ce5914c4.js";import"./rtl.b51694b1.js";import"./_commonjsHelpers.a26ce4be.js";import"./localForage.02d1ceba.js";import"./api.98c01b66.js";import"./index.04bc0a32.js";import"./i18n.b591f6cd.js";import"./position-engine.5cdfd8e5.js";import"./selection.071e5cd7.js";import"./QMarkupTable.7c00ca6c.js";import"./use-fullscreen.d88cb6f2.js";import"./QForm.1f5a237d.js";import"./vee-validate.esm.6d3b1fc4.js";import"./array.59f93f43.js";import"./useQuerySaver.d29ff9ee.js";function X(o,u=new WeakMap){if(Object(o)!==o)return o;if(u.has(o))return u.get(o);const f=o instanceof Date?new Date(o):o instanceof RegExp?new RegExp(o.source,o.flags):o instanceof Set?new Set:o instanceof Map?new Map:typeof o.constructor!="function"?Object.create(null):o.prototype!==void 0&&typeof o.prototype.constructor=="function"?o:new o.constructor;if(typeof o.constructor=="function"&&typeof o.valueOf=="function"){const i=o.valueOf();if(Object(i)!==i){const h=new o.constructor(i);return u.set(o,h),h}}return u.set(o,f),o instanceof Set?o.forEach(i=>{f.add(X(i,u))}):o instanceof Map&&o.forEach((i,h)=>{f.set(h,X(i,u))}),Object.assign(f,...Object.keys(o).map(i=>({[i]:X(o[i],u)})))}var we=Ye({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(o,{slots:u,emit:f}){const{proxy:i}=$e(),{$q:h}=i,p=C(null),g=C(""),d=C("");let v=!1;const $=E(()=>Ae({initialValue:g.value,validate:o.validate,set:A,cancel:k,updatePosition:w},"value",()=>d.value,y=>{d.value=y}));function A(){o.validate(d.value)!==!1&&(x()===!0&&(f("save",d.value,g.value),f("update:modelValue",d.value)),O())}function k(){x()===!0&&f("cancel",d.value,g.value),O()}function w(){xe(()=>{p.value.updatePosition()})}function x(){return Me(d.value,g.value)===!1}function O(){v=!0,p.value.hide()}function T(){v=!1,g.value=X(o.modelValue),d.value=X(o.modelValue),f("beforeShow")}function z(){f("show")}function N(){v===!1&&x()===!0&&(o.autoSave===!0&&o.validate(d.value)===!0?(f("save",d.value,g.value),f("update:modelValue",d.value)):f("cancel",d.value,g.value)),f("beforeHide")}function F(){f("hide")}function P(){const y=u.default!==void 0?[].concat(u.default($.value)):[];return o.title&&y.unshift(L("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},o.title)),o.buttons===!0&&y.push(L("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[L(D,{flat:!0,color:o.color,label:o.labelCancel||h.lang.label.cancel,onClick:k}),L(D,{flat:!0,color:o.color,label:o.labelSet||h.lang.label.set,onClick:A})])),y}return Object.assign(i,{set:A,cancel:k,show(y){p.value!==null&&p.value.show(y)},hide(y){p.value!==null&&p.value.hide(y)},updatePosition:w}),()=>{if(o.disable!==!0)return L(Be,{ref:p,class:"q-popup-edit",cover:o.cover,onBeforeShow:T,onShow:z,onBeforeHide:N,onHide:F,onEscapeKey:k},P)}}});const Ge={class:"q-px-sm"},Je={key:0,class:"float-right q-card__actions--horiz"},Ke={key:1,class:"float-right q-card__actions--horiz"},Ze={key:0},et={key:1},tt={key:2,class:"text-caption"},at={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"},lt=b("div",{class:"text-h6"},"Arrival Date",-1),ot=b("span",{class:"q-ml-sm"},"Release as No Show!",-1),nt=b("div",{class:"text-h6"},"Has not arrived.",-1),st=b("br",null,null,-1),rt={__name:"markArrivals",props:{rows:Array,selected:Array},emits:["arrivalMarked","updateArrival","arrivalRelease"],setup(o,{emit:u}){const f=o,{rows:i,selected:h}=Se(f),p=he();De();const g=C(c().format("YYYY-MM-DD")),d=C(c().subtract(3,"months").format("YYYY-MM-DD")),v=C(!1),$=C(!1),A=C(!1),k=C(!1),w=C(null),x=C(0),O=E(()=>p.screen.gt.sm?[{name:207,label:"Arrival Date",align:"left",field:219,format:t=>`${t&&t.$d&&t.$d.format?t.$d.format("MM/DD/YYYY"):""}`,sortable:!0,style:"text-align: center !important;"},{name:7,label:"Expected Date",align:"left",field:t=>t[33].$d,format:t=>`${t?ye.formatDate(new Date(t),"MM/DD/YYYY"):"N/A"}`,sortable:!0},{name:1,label:"Name",align:"left",field:t=>t[31],format:t=>`${t}`,sortable:!0},{name:9,label:"Phone #",align:"left",field:t=>t[42],format:t=>`${t}`,sortable:!1},{name:2,label:"Workday ID",align:"left",field:t=>t[152],format:(t,r)=>r[20]==="In Process"?"W---------":t,sortable:!0},{name:3,label:"Project",align:"left",field:t=>t[171],format:t=>`${t}`,sortable:!0},{name:4,label:"Classification",align:"left",field:t=>t[45],format:t=>`${t}`,sortable:!0},{name:5,label:"Job Number",align:"left",field:t=>t[85],format:t=>`${!t||t===""?"Not Assigned":t}`,sortable:!0},{name:6,label:"Site Contact",align:"left",field:t=>t[186],format:t=>`${t===""||!t?"Not Assigned":t}`,sortable:!0}]:[{name:227,label:"Arrival Date",align:"left",field:219,format:t=>`${t&&t.$d&&t.$d.format?t.$d.format("MM/DD/YYYY"):""}`,sortable:!0},{name:7,label:"Expected Date",align:"left",field:t=>t[33].$d,format:t=>`${t?ye.formatDate(new Date(t),"MM/DD/YYYY"):"N/A"}`,sortable:!0},{name:1,label:"Name",align:"left",field:t=>t[31],format:t=>`${t}`,sortable:!0},{name:9,label:"Phone #",align:"left",field:t=>t[42],format:t=>`${t}`,sortable:!1},{name:2,label:"Workday ID",align:"left",field:t=>t[152],format:(t,r)=>r[20]==="In Process"?"W---------":t,sortable:!0},{name:3,label:"Project",align:"left",field:t=>t[171],format:t=>`${t}`,sortable:!0},{name:4,label:"Classification",align:"left",field:t=>t[45],format:t=>`${t}`,sortable:!0},{name:5,label:"Job Number",align:"left",field:t=>t[85],format:t=>`${!t||t===""?"Not Assigned":t}`,sortable:!0},{name:6,label:"Site Contact",align:"left",field:t=>t[186],format:t=>`${t===""||!t?"Not Assigned":t}`,sortable:!0}]),T=({rows:t,added:r,evt:e})=>{v.value=!0,u("arrivalMarked",{record:t[0],added:r}),setTimeout(function(){v.value=!1},1500)},z=t=>{v.value=!0,u("arrivalMarked",{record:w.value,added:t}),t?$.value=!1:k.value=!1,setTimeout(function(){v.value=!1},1500)},N=t=>{w.value=t,w.value[227]=g.value,$.value=!0},F=()=>{w.value=null,$.value=!1},P=t=>{w.value=t,k.value=!0},y=()=>{w.value=null,k.value=!1},I=t=>{w.value=t,A.value=!0},G=()=>{u("arrivalRelease",{record:w.value,added:!0})},J=t=>{t.target.showPicker()},K=async(t,r)=>{r[219]=c(t),x.value+=1,u("updateArrivalDate",{record:r,value:t})};return(t,r)=>(Y(),V("div",Ge,[a(He,{dense:"",columns:O.value,rows:j(i),"row-key":e=>e[3],class:"q-pa-sm",pagination:{rowsPerPage:j(p).screen.gt.sm?25:100},separator:"vertical",onSelection:T,selected:j(h),"table-header-class":"bg-dark text-white","no-data-label":"There are no expected arrivals",loading:v.value,grid:j(p).screen.lt.md},{item:s(e=>[b("div",{class:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3 grid-style-transition",style:ie(e.selected?"transform: scale(0.95);":"")},[a(U,{bordered:"",flat:"",class:ue(e.selected?j(p).dark.isActive?"bg-grey-9":"bg-grey-2":"")},{default:s(()=>[a(R,null,{default:s(()=>[_(Q(e.row[31])+" ",1),e.row[20]!=="Complete"||!e.row[207]?(Y(),V("span",Je,[a(D,{round:"",color:"positive",icon:"done",size:"xs",onClick:l=>N(e.row)},{default:s(()=>[a(B,{class:"bg-primary"},{default:s(()=>[_("Arrived")]),_:1})]),_:2},1032,["onClick"]),a(D,{round:"",color:"negative",icon:"close",size:"xs",onClick:l=>I(e.row)},{default:s(()=>[a(B,{class:"bg-primary"},{default:s(()=>[_("No Show")]),_:1})]),_:2},1032,["onClick"])])):(Y(),V("span",Ke,[_(Q(j(c)(e.row[219]).format("MM/DD/YYYY"))+" ",1),a(D,{icon:"edit",color:"accent",flat:"",size:"xs",class:"q-px-none q-pr-xs"}),(Y(),H(we,{key:x.value,"model-value":j(c)(e.row[219]).format("YYYY-MM-DD"),title:"Arrival Date"},{default:s(l=>[a(W,{autofocus:"",onFocus:r[0]||(r[0]=n=>J(n)),dense:"","model-value":l.value,type:"date",max:g.value,min:d.value,rules:[n=>!!n||"Field is required"],"onUpdate:modelValue":n=>K(n,e.row)},null,8,["model-value","max","min","rules","onUpdate:modelValue"])]),_:2},1032,["model-value"])),a(D,{round:"",color:"white",icon:"history",size:"xs",onClick:ce(l=>P(e.row),["stop"])},{default:s(()=>[a(B,{class:"bg-primary"},{default:s(()=>[_("Revert Back - Has not arrived yet.")]),_:1})]),_:2},1032,["onClick"])]))]),_:2},1024),a(je),a(Ee,{dense:""},{default:s(()=>[(Y(!0),V(de,null,me(e.cols.filter(l=>l.name!=="action"),l=>(Y(),H(Ve,{key:l.name},{default:s(()=>[a(fe,null,{default:s(()=>[a(ge,null,{default:s(()=>[_(Q(l.label),1)]),_:2},1024)]),_:2},1024),a(fe,{side:""},{default:s(()=>[a(ge,{caption:""},{default:s(()=>[_(Q(l.value),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["class"])],4)]),body:s(e=>[a(Le,{"no-hover":"",props:e,class:ue(e.row[33]&&e.row[33].$d&&t.$dayjs().businessDiff(t.$dayjs(e.row[33].$d),"day",!0)>5&&e.row[20]!=="Complete"?"bg-red-11":"")},{default:s(()=>[(Y(!0),V(de,null,me(e.cols,l=>(Y(),H(Fe,{key:l.name,props:e,classes:l.name===207&&e.row[20]!=="Complete"||!e.row[207]?"q-card__actions--horiz":"",style:ie(l.style)},{default:s(()=>[l.name===207&&(e.row[20]!=="Complete"||!e.row[207])?(Y(),V("span",Ze,[a(D,{round:"",color:"positive",icon:"done",size:"xs",onClick:n=>N(e.row)},{default:s(()=>[a(B,{class:"bg-primary"},{default:s(()=>[_("Arrived")]),_:1})]),_:2},1032,["onClick"]),a(D,{round:"",color:"negative",icon:"close",size:"xs",onClick:n=>I(e.row)},{default:s(()=>[a(B,{class:"bg-primary"},{default:s(()=>[_("No Show")]),_:1})]),_:2},1032,["onClick"])])):l.name===207?(Y(),V("span",et,[_(Q(j(c)(e.row[219]).format("MM/DD/YYYY"))+" ",1),(Y(),H(we,{key:x.value,"model-value":j(c)(e.row[219]).format("YYYY-MM-DD"),title:"Arrival Date"},{default:s(n=>[a(W,{autofocus:"",onFocus:r[1]||(r[1]=m=>J(m)),dense:"","model-value":n.value,type:"date",max:g.value,min:d.value,rules:[m=>!!m||"Field is required"],"onUpdate:modelValue":m=>K(m,e.row)},null,8,["model-value","max","min","rules","onUpdate:modelValue"])]),_:2},1032,["model-value"])),a(D,{round:"",color:"negative",icon:"history",size:"xs",onClick:ce(n=>P(e.row),["stop"])},{default:s(()=>[a(B,{class:"bg-primary"},{default:s(()=>[_("Revert Back - Has not arrived yet.")]),_:1})]),_:2},1032,["onClick"])])):(Y(),V("span",tt,Q(l.value),1))]),_:2},1032,["props","classes","style"]))),128))]),_:2},1032,["props","class"])]),"no-data":s(({message:e})=>[b("div",at,[a(qe,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),b("span",null,Q(e),1)])]),loading:s(()=>[a(Ue,{showing:"",color:"primary"})]),_:1},8,["columns","rows","row-key","pagination","selected","loading","grid"]),a(le,{modelValue:$.value,"onUpdate:modelValue":r[5]||(r[5]=e=>$.value=e),persistent:""},{default:s(()=>[a(U,{style:{"min-width":"350px"}},{default:s(()=>[a(R,null,{default:s(()=>[lt]),_:1}),a(R,{class:"q-pt-none"},{default:s(()=>[a(W,{dense:"",modelValue:w.value[227],"onUpdate:modelValue":r[2]||(r[2]=e=>w.value[227]=e),autofocus:"",type:"date",max:g.value,min:d.value,rules:[e=>!!e||"Field is required"]},null,8,["modelValue","max","min","rules"])]),_:1}),a(ae,{align:"right",class:"text-primary"},{default:s(()=>[a(D,{flat:"",label:"Cancel",onClick:r[3]||(r[3]=e=>F())}),a(D,{flat:"",label:"Confirm",onClick:r[4]||(r[4]=e=>z(!0))})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(le,{modelValue:A.value,"onUpdate:modelValue":r[7]||(r[7]=e=>A.value=e),persistent:""},{default:s(()=>[a(U,null,{default:s(()=>[a(R,{class:"row items-center"},{default:s(()=>[a(Qe,{icon:"person_remove",color:"primary","text-color":"white"}),ot]),_:1}),a(ae,{align:"right"},{default:s(()=>[Re(a(D,{flat:"",label:"Cancel",color:"primary"},null,512),[[We]]),a(D,{flat:"",label:"Release",color:"primary",onClick:r[6]||(r[6]=e=>G())})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(le,{modelValue:k.value,"onUpdate:modelValue":r[10]||(r[10]=e=>k.value=e),persistent:""},{default:s(()=>[a(U,{style:{"min-width":"350px"}},{default:s(()=>[a(R,null,{default:s(()=>[nt]),_:1}),a(R,{class:"q-pt-none"},{default:s(()=>[_(" You are about to erase the arrival date."),st,_(" Are you sure you want to do this? ")]),_:1}),a(ae,{align:"right",class:"text-primary"},{default:s(()=>[a(D,{label:"No",onClick:r[8]||(r[8]=e=>y())}),a(D,{flat:"",label:"Yes",onClick:r[9]||(r[9]=e=>z(!1))})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}},it={name:"Arrivals",components:{MarkArrivalsTable:rt,projectSelector:Xe},setup(){const o=he(),u=Te(),f=ze(),i=De(),h=C(null),p=C(""),g=C(""),{getSelectedProject:d}=ve(u),{getUser:v}=ve(f),{fetchAllDeployments:$,updateDeployment:A,getDeployments:k,fetchDeployments:w}=Ne(),x=E(()=>d.value?d.value[3]:null),O=E(()=>k(x.value).filter(e=>e[20]==="Complete")),T=E(()=>{let e=[];return k(x.value).forEach(l=>{l[31].toLowerCase().includes(g.value.toLowerCase())&&e.push(l)}),e=p.value?e.filter(l=>c(l[33].$d).tz("America/Chicago").format("MM/DD/YYYY")===c(p.value).tz("America/Chicago").format("MM/DD/YYYY")):e,e=h.value?e.filter(l=>l[132]===h.value):e,e.sort((l,n)=>l[219]-n[219]||l[33]-n[33])}),z=E(()=>[...new Map(T.value.map(e=>[e[132],e[132]])).values()]);async function N(e){o.loading.show(),x.value?await w({projectId:x.value,refresh:e}):await $({refresh:e}),o.loading.hide()}async function F({record:e,added:l}){if(l){if(e[233]&&e[233]!==""){const n=e[227]?c(e[227]):c();let m=e[234],M=null,S=n,Z=!0;try{const oe=await be.getWorkers({employeeId:e[152],options:{includePersonalInformation:!1,includeApplicantInformation:!1,includeRelatedPersons:!1,includeOrganizations:!0,excludeCostCenters:!1,excludeCompanies:!1,excludePayGroups:!1,excludeCustomOrganizations:!1,includeCompensation:!1,includeManagementChainData:!1,includeTransactionLogData:!0,transactionDateRangeData:{updatedFrom:c().subtract("1","M").format("YYYY-MM-DD"),updatedThrough:c().format("YYYY-MM-DD")},filter:{count:1,page:1}}});if(oe.total>=1){const ee=oe.data[0];m=ee.employmentData.positionData.positionId;const ne=ee.organizations.find(te=>te.typeId==="Customer_Project");if(ne&&(ne.referenceId===e[233]?(Z=!1,console.log("does not need update project")):(Z=!0,console.log("update project",e[233]))),ee.jobHistory.length>0&&Z){M=c(ee.jobHistory[0].effectiveDate);const te=M.isSame(n,"day"),Ce=M.isSame(c(),"day"),se=M.isSameOrBefore(c(),"day"),re=n.isSameOrBefore(c(),"day"),ke=n.isBefore(M,"day");se&&Ce||!re&&se?S=M:re?te?S=n:ke&&(S=M):S=M}}}catch{console.log("no worker found")}const _e={employeeId:e[152],positionId:m,customOrganizationId:e[233],effectiveDate:S.format("YYYY-MM-DD"),submittedBy:v.value[70],comment:`Change Organization Assignment Submitted By ${v.value[67]} (${v.value[6]}) from WMP`};if(Z)if(m!=="")try{await be.changeCustomOrgAssignment(_e)}catch{e.failedCustomOrgAssignment=!0,console.log("unable to change add custom org assignment")}else e.failedCustomOrgAssignment=!0}try{const n=await P(e);await y({id:e[21],status:7,assignment:n});const m=await I(e[3],"Complete");A({projectId:m[134],key:m[3],record:m})}catch{const n=[{7:{value:"Assignments By Employee"},9:{value:e[21]}}],{data:m}=await q.fetchFromHiringApp({fields:n});if(m.length===1){await J(m[0]);const M=await P(e);await y({id:e[21],status:7,assignment:M});const S=await I(e[3],"Complete");A({projectId:S[134],key:S[3],record:S})}}}else{await G(e),await y({id:e[21],status:6});const n=await I(e[3],"In Process");A({projectId:n[134],key:n[3],record:n})}}async function P(e){try{const l=e[227]?c(e[227]):c(),{data:n}=await q.upsertRecordsXML({to:"bp3gazpqj",data:[{6:{value:e[3]},13:{value:e[15]},18:{value:e[21]},60:{value:""},125:{value:l},145:{value:l},165:{value:"Active"},...e.failedCustomOrgAssignment&&{204:{value:!0}}}],fieldsToReturn:[108],formatObject:108},{action:"create",type:"arrival"});return console.log(n),n[0][108]}catch(l){throw{message:"Cannot add assignment",error:l}}}async function y({id:e,status:l,assignment:n}){try{const m={3:{value:e},79:{value:l}};n&&(m[609]={value:n[3]});const{data:M}=await q.upsertRecordsXML({to:"bp3gb7ng2",data:[m],fieldsToReturn:[3]});return M[0][3]}catch(m){throw{message:"Cannot edit employee",error:m}}}async function I(e,l){try{const{data:n}=await q.upsertRecordsXML({to:"bp3gaymc3",data:[{3:{value:e},20:{value:l},22:{value:new Date}}],fieldsToReturn:[204],formatObject:204});return n[0][204]}catch(n){throw{message:"Cannot edit deployment",error:n}}}async function G(e){try{const{data:l}=await q.upsertRecordsXML({to:"bp3gazpqj",data:[{3:{value:e.assignment[3]},22:{value:new Date},21:{value:"Canceled"},19:{value:""},60:{value:""},165:{value:"Inactive"}}],fieldsToReturn:[108],formatObject:108});return l[0][108]}catch(l){throw{message:"Cannot cancel assignment",error:l}}}async function J(e){try{const{data:l}=await q.upsertRecordsXML({to:"bp3gazpqj",data:[{3:{value:e[3]},21:{value:"Complete"},165:{value:"Inactive"}}],fieldsToReturn:[108],formatObject:108});return l[0][108]}catch(l){throw{message:"Cannot complete assignment",error:l}}}async function K(e){try{const l=e.value?c(e.value):c();if(e.record.assignment&&e.record.assignment[3]){const{data:n}=await q.upsertRecordsXML({to:"bp3gazpqj",data:[{3:{value:e.record.assignment[3]},125:{value:l},145:{value:l}}],fieldsToReturn:[3]});return n[0][3]}}catch(l){throw{message:"Cannot edit Assignment",error:l}}}async function t({record:e,added:l}){if(l){const n=await r(e);i.push({name:"ee-termination",params:{id:e[21]},query:{reason:"no-show",hc:e[15],aid:n[3],did:e[3]}})}else{await G(e),await y({id:e[21],status:6});const n=await I(e[3],"In Process");A({projectId:n[134],key:n[3],record:n})}}async function r(e){try{const l=e[207]?c(e[207]):c(),{data:n}=await q.upsertRecordsXML({to:"bp3gazpqj",data:[{6:{value:e[3]},13:{value:e[15]},18:{value:e[21]},60:{value:""},21:{value:"DNC"},112:{value:!0},165:{value:"Inactive"}}],fieldsToReturn:[108],formatObject:108},{action:"create",type:"arrival"});return n[0][108]}catch(l){throw{message:"Cannot release assignment",error:l}}}return N(!0),{arrived:O,allDeployments:T,arrivalMarked:F,updateArrivalDate:K,arrivalRelease:t,craftOptions:z,craftFilter:h,startDateFilter:p,search:g}}},ut={class:"q-pt-sm"},ct={class:"text-h5 text-dark"},dt={class:"text-body2 text-italic q-ml-sm"},mt=b("div",{class:"text-subtitle2 text-accent"},"Please click on the green checkmark as employees arrive to the job site.",-1),ft={class:"row items-center"},vt={class:"col-12 col-md-3 q-px-sm"},pt={class:"col-12 col-md-3 q-px-sm"},gt={class:"col-12 col-md-3 q-px-sm"},yt={class:"col-12 col-md-3 q-px-sm"};function bt(o,u,f,i,h,p){const g=pe("projectSelector"),d=pe("mark-arrivals-table");return Y(),H(Oe,{style:{"max-width":"100vw"}},{default:s(()=>[b("div",ut,[a(U,{flat:""},{default:s(()=>[a(R,{class:"q-pb-none"},{default:s(()=>[b("div",ct,[_(" Expected Arrivals "),b("span",dt,"("+Q(i.allDeployments.length)+" total)",1)]),mt]),_:1}),a(R,null,{default:s(()=>[b("div",ft,[b("div",vt,[a(g,{dense:""})]),b("div",pt,[a(W,{dense:"",modelValue:i.search,"onUpdate:modelValue":u[0]||(u[0]=v=>i.search=v),label:"Search"},null,8,["modelValue"])]),b("div",gt,[a(W,{dense:"",modelValue:i.startDateFilter,"onUpdate:modelValue":u[1]||(u[1]=v=>i.startDateFilter=v),label:"Expected Date",type:"date","stack-label":""},null,8,["modelValue"])]),b("div",yt,[a(Ie,{dense:"",label:"Craft","transition-show":"flip-up","transition-hide":"flip-down",modelValue:i.craftFilter,"onUpdate:modelValue":u[2]||(u[2]=v=>i.craftFilter=v),options:i.craftOptions,"use-chips":""},null,8,["modelValue","options"])])])]),_:1})]),_:1}),a(d,{rows:i.allDeployments,selected:i.arrived,onArrivalRelease:i.arrivalRelease,onArrivalMarked:i.arrivalMarked,onUpdateArrivalDate:i.updateArrivalDate},null,8,["rows","selected","onArrivalRelease","onArrivalMarked","onUpdateArrivalDate"])])]),_:1})}var Jt=Pe(it,[["render",bt]]);export{Jt as default};
