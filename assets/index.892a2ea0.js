import{Q as S,b as y,a as L}from"./QTabPanels.20287a25.js";import{Q as z}from"./QTabs.80f66e4e.js";import{Q as U}from"./QSpace.a9679a9a.js";import{l as R,r as w,bN as C,c as b,_ as h,aZ as p,A as $,B as D,d as o,bi as r,cw as Q,D as q,cz as P,bM as M,w as E,y as I,bL as K,an as g,ao as N,bO as X}from"./index.226bbe9e.js";import{Q as Z}from"./QToolbar.8bdd3a1d.js";import{Q as G}from"./QPage.8b35320d.js";import{u as T}from"./use-quasar.e37fb258.js";import{u as V}from"./dataStore.6104af90.js";import{I as k,u as H,q as J}from"./quickbase.aae604ff.js";import{R as O}from"./requestData.419e556a.js";import{_ as A}from"./projectSelector.3cdfe28c.js";import{dayjs as W}from"./dayjs.61ba8b06.js";import{N as Y}from"./nameRequestData.f66ee488.js";import"./use-panel.4921cae5.js";import"./touch.60582172.js";import"./selection.e3cea41b.js";import"./QResizeObserver.a399e20c.js";import"./rtl.cf9bbe47.js";import"./localForage.2f4a21a3.js";import"./_commonjsHelpers.a26ce4be.js";import"./useQuerySaver.ae1b8d62.js";import"./index.7dbe61ef.js";import"./api.1ce17484.js";import"./i18n.df17a73c.js";import"./QTable.ae80641c.js";import"./QList.1943e8e4.js";import"./QMarkupTable.c37a3647.js";import"./QSelect.5f4edeef.js";import"./QChip.5521b37c.js";import"./QItemLabel.d7e00488.js";import"./QMenu.0ed2d0c1.js";import"./position-engine.283f53ba.js";import"./use-fullscreen.199cb342.js";import"./QTr.01b0c941.js";import"./QTd.d82945b5.js";import"./QTooltip.d9dcbf65.js";import"./workday.8116a750.js";import"./syncEmployeeWithWorkday.28277b2b.js";import"./workdayAPI.885ebaaa.js";import"./dataStore.67299c24.js";const x=R({props:{},components:{RequestDataTable:O,projectSelector:A},setup(e){const t=T(),l=k(),d=w(null),{getSelectedProject:u}=C(l),{getOpenRequest:c,fetchAllOpenRequest:s}=V(),a=b(()=>u.value?u.value[3]:null),m=b(()=>c(a.value).sort((n,f)=>n[1].$d<f[1].$d?1:-1));async function i(n){t.loading.show(),await s({refresh:n}),t.loading.hide()}return i(!1),{openRequests:m,projectFilter:d,loadData:i}}}),ee={class:"row items-center"},te={class:"col-12 col-md-4"};function oe(e,t,l,d,u,c){const s=p("projectSelector"),a=p("request-data-table");return $(),D("div",null,[o(P,{flat:""},{default:r(()=>[o(Q,null,{default:r(()=>[q("div",ee,[q("div",te,[o(s,{dense:""})])])]),_:1})]),_:1}),o(a,{requests:e.openRequests,status:"Open",onRefreshData:t[0]||(t[0]=m=>e.loadData(!0))},null,8,["requests"])])}var se=h(x,[["render",oe]]);const ae=R({props:{},components:{RequestDataTable:O,projectSelector:A},setup(e){const t=T(),l=M(),d=k(),u=w(null),{getSelectedProject:c}=C(d),{getPendingRequest:s,fetchAllPendingRequest:a}=V(),m=b(()=>c.value?c.value[3]:null),i=b(()=>s(m.value).sort((f,j)=>f[1].$d<j[1].$d?1:-1));async function n(f){t.loading.show(),await a({refresh:f}),t.loading.hide()}return E(()=>l.from,f=>{f.name==="new-request"&&(console.log("reloading"),a({refresh:!0}))}),n(!1),{pendingRequests:i,projectFilter:u,loadData:n}}}),ne={class:"row items-center"},re={class:"col-12 col-md-4"};function le(e,t,l,d,u,c){const s=p("projectSelector"),a=p("request-data-table");return $(),D("div",null,[o(P,{flat:""},{default:r(()=>[o(Q,null,{default:r(()=>[q("div",ne,[q("div",re,[o(s,{dense:""})])])]),_:1})]),_:1}),o(a,{requests:e.pendingRequests,status:"Pending",onRefreshData:t[0]||(t[0]=m=>e.loadData(!0))},null,8,["requests"])])}var ue=h(ae,[["render",le]]);const ce=R({props:{},components:{RequestDataTable:O,projectSelector:A},setup(e){const t=T(),l=k(),d=w(null),{getSelectedProject:u}=C(l),{getClosedRequest:c,fetchAllClosedRequest:s}=V(),a=b(()=>u.value?u.value[3]:null),m=b(()=>c(a.value).sort((n,f)=>n[1].$d<f[1].$d?1:-1));async function i(n){t.loading.show(),await s({refresh:n}),t.loading.hide()}return i(),{closedRequests:m,projectFilter:d,loadData:i}}}),de={class:"row items-center"},me={class:"col-12 col-md-4"};function pe(e,t,l,d,u,c){const s=p("projectSelector"),a=p("request-data-table");return $(),D("div",null,[o(P,{flat:""},{default:r(()=>[o(Q,null,{default:r(()=>[q("div",de,[q("div",me,[o(s,{dense:""})])])]),_:1})]),_:1}),o(a,{requests:e.closedRequests,status:"Completed",onRefreshData:t[0]||(t[0]=m=>e.loadData(!0))},null,8,["requests"])])}var ie=h(ce,[["render",pe]]);const fe=R({props:{},components:{NameRequestDataTable:Y,projectSelector:A},setup(e){const t=T(),l=k(),{capitalize:d}=I,u=w(null),{userData:c}=H(),{getSelectedProject:s}=C(l),{getNameRequest:a,fetchAllNameRequest:m,removeData:i}=V(),n=b(()=>s.value?s.value[3]:null),f=b(()=>a(n.value).sort((_,v)=>_[1].$d<v[1].$d?1:-1));async function j(_){t.loading.show(),await m({refresh:_}),t.loading.hide()}function F(_){return`${d(_[6].toLowerCase())} ${d(_[7].toLowerCase())}`}async function B(_){t.dialog({title:"Confirm",message:`Are you sure you want to remove ${F(_)} from request# ${_[18]}?`,cancel:!0,persistent:!0}).onOk(async()=>{try{const{data:v}=await J.upsertRecordsXML({to:"bsg4yb4wa",data:[{3:{value:_[3]},11:{value:!0},12:{value:W().tz("America/Chicago")},13:{value:`${c[35]} ${c[37]}`}}],fieldsToReturn:[15],formatObject:15});i({type:"nameRequest",key:v[0][15][38],item:v[0][15],storageKey:"storageNameRequest"})}catch(v){t.notify({type:"negative",message:"Cannot remove name request"}),console.log(v)}})}return j(),{nameRequests:f,projectFilter:u,removeName:B,loadData:j}}}),_e={class:"row items-center"},$e={class:"col-12 col-md-4"};function qe(e,t,l,d,u,c){const s=p("projectSelector"),a=p("name-request-data-table");return $(),D("div",null,[o(P,{flat:""},{default:r(()=>[o(Q,null,{default:r(()=>[q("div",_e,[q("div",$e,[o(s,{dense:""})])])]),_:1})]),_:1}),o(a,{requests:e.nameRequests,status:"Named",onRemoveName:e.removeName,onRefreshData:t[0]||(t[0]=m=>e.loadData(!0))},null,8,["requests","onRemoveName"])])}var be=h(fe,[["render",qe]]);const ve=R({name:"Requests",components:{OpenTab:se,PendingTab:ue,CompleteTab:ie,NamesTab:be},setup(){const e=K(),t=w(0);function l(){e.push({name:"new-request"})}return{tab:t,addNewRequest:l}}}),ge={class:"q-pa-md"};function Re(e,t,l,d,u,c){const s=p("open-tab"),a=p("pending-tab"),m=p("names-tab"),i=p("complete-tab");return $(),g(G,{style:{"max-width":"100vw"}},{default:r(()=>[q("div",ge,[o(Z,{class:"bg-info text-white shadow-2 rounded-borders"},{default:r(()=>[o(z,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=n=>e.tab=n),"bg-color":"none","indicator-color":"accent",dense:e.$q.screen.lt.md},{default:r(()=>[o(S,{name:0,label:e.$q.screen.gt.xs?"Open Requests":"Open"},null,8,["label"]),e.$q.screen.gt.sm?($(),g(S,{key:0,name:1,label:e.$q.screen.gt.xs?"Pending Requests":"Pending"},null,8,["label"])):N("",!0),e.$can("read","nameRequests")?($(),g(S,{key:1,name:2,label:e.$q.screen.gt.xs?"Named Requests":"Named"},null,8,["label"])):N("",!0),e.$q.screen.gt.sm?($(),g(S,{key:2,name:3,label:e.$q.screen.gt.xs?"Completed Requests":"Completed"},null,8,["label"])):N("",!0)]),_:1},8,["modelValue","dense"]),o(U),e.$q.screen.gt.sm?($(),g(X,{key:0,dense:"",color:"accent",icon:"add",label:e.$q.screen.lt.md?"Add New":"Add New Request",onClick:e.addNewRequest},null,8,["label","onClick"])):N("",!0)]),_:1}),o(L,{modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=n=>e.tab=n),animated:""},{default:r(()=>[o(y,{name:0},{default:r(()=>[o(s)]),_:1}),o(y,{name:1},{default:r(()=>[o(a)]),_:1}),o(y,{name:2},{default:r(()=>[o(m)]),_:1}),o(y,{name:3},{default:r(()=>[o(i)]),_:1})]),_:1},8,["modelValue"])])]),_:1})}var ut=h(ve,[["render",Re]]);export{ut as default};
