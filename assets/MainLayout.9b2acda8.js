import{l as $,_ as Q,A as n,aq as r,br as a,bP as q,d as t,bQ as B,ar as f,ax as F,ac as _,G as P,bR as G,b5 as m,bS as W,B as b,F as U,b4 as T,H as w,r as y,bT as J,bU as X,bV as Y,w as O,bW as S,D as k,bt as Z}from"./index.e8fb2253.js";import{Q as x,a as D}from"./QHeader.be6bf03f.js";import{Q as ee}from"./QMenu.b4300bfa.js";import{Q as V}from"./QToolbar.30b493d3.js";import{Q as te}from"./QImg.377710c3.js";import{Q as j}from"./QList.d18fd6ea.js";import{Q as ae,a as ne}from"./QDrawer.9c313da4.js";import{Q as oe,a as se}from"./QLayout.25004f62.js";import{C as re}from"./ClosePopup.0353f9a9.js";import{Q as ie}from"./QSelect.c4b0a406.js";import{Q as le}from"./QBadge.421039c9.js";import{M as ue,Q as me}from"./MenuSubLink.93d89105.js";import{u as pe}from"./use-quasar.0aa2fc3d.js";import{u as de}from"./i18n.2814a62c.js";import{u as ce,b as fe,q as N}from"./app.00bf1e10.js";import{_ as ve}from"./KioskLogin.7dba8dba.js";import{_ as ge}from"./languageSelector.ac25040f.js";import{_ as ye}from"./version.8b2d13c9.js";import"./QResizeObserver.e0fe0d9d.js";import"./position-engine.d748a9db.js";import"./selection.1f477e95.js";import"./TouchPan.a9bf8065.js";import"./touch.70a9dd44.js";import"./QChip.178232ad.js";import"./rtl.b51694b1.js";import"./QSlideTransition.970aeafa.js";import"./_commonjsHelpers.a26ce4be.js";import"./dayjs.d1250a8a.js";import"./localForage.8666a90b.js";import"./api.e92e8aaa.js";import"./index.04bc0a32.js";import"./vee-validate.esm.f9a9192e.js";import"./array.6a8b7cfb.js";const _e=$({name:"MenuLink",props:{title:{type:String,required:!0},caption:{type:String,default:""},to:{type:Object,default:()=>({path:"",exact:!0})},icon:{type:String,default:""},mini:{type:Boolean,default:!1},subMenu:{type:Array,default:null},count:{type:Number,default:null}}});function be(e,u,v,i,g,p){return n(),r(G,{to:e.to,class:P(["rounded-borders bg-white",{"q-ma-sm":!e.mini,"q-ma-xs":e.mini}]),"active-class":e.mini?"brand-active-menu text-white":"brand-active-menu text-white q-py-md",exact:""},{default:a(()=>[e.icon?(n(),r(q,{key:0,avatar:""},{default:a(()=>[t(B,{name:e.icon},null,8,["name"])]),_:1})):f("",!0),t(q,null,{default:a(()=>[t(ie,null,{default:a(()=>[F(_(e.title),1)]),_:1})]),_:1}),e.count?(n(),r(q,{key:1,side:"",top:""},{default:a(()=>[t(le,{color:"primary",label:e.count},null,8,["label"])]),_:1})):f("",!0)]),_:1},8,["to","class","active-class"])}var ke=Q(_e,[["render",be]]);const he=$({name:"MenuExpanded",components:{MenuSubLink:ue},props:{title:{type:String,required:!0},caption:{type:String,default:""},to:{type:Object,default:()=>({path:"",exact:!0})},icon:{type:String,default:""},mini:{type:Boolean,default:!1},subMenu:{type:Array,default:null}}});function Me(e,u,v,i,g,p){const d=m("MenuSubLink");return n(),r(me,{icon:e.icon,label:e.title,class:P(["rounded-borders bg-white",{"q-ma-sm":!e.mini,"q-ma-xs":e.mini}]),"active-class":"brand-active-menu text-white",exact:""},{default:a(()=>[t(W),t(q,null,{default:a(()=>[t(j,null,{default:a(()=>[(n(!0),b(U,null,T(e.subMenu,l=>(n(),r(d,w({key:l},l,{mini:e.mini}),null,16,["mini"]))),128))]),_:1})]),_:1})]),_:1},8,["icon","label","class"])}var Se=Q(he,[["render",Me]]);const qe=$({name:"MenuNav",components:{MenuLink:ke,MenuExpanded:Se},props:{title:{type:String,required:!0},caption:{type:String,default:""},to:{type:Object,default:()=>({path:"",exact:!0})},icon:{type:String,default:""},mini:{type:Boolean,default:!1},subMenu:{type:Array,default:null}}});function we(e,u,v,i,g,p){const d=m("MenuLink"),l=m("MenuExpanded");return n(),b("div",null,[!e.subMenu&&e.to?(n(),r(d,w({key:0},{...e.$props,...e.$attrs},{mini:e.mini}),null,16,["mini"])):e.subMenu&&e.subMenu.length>0?(n(),r(l,w({key:1},{...e.$props,...e.$attrs},{mini:e.mini}),null,16,["mini"])):f("",!0)])}var $e=Q(qe,[["render",we]]);const Qe=$({name:"MainLayout",components:{MenuNav:$e,kioskLogin:ve,languageSelector:ge,version:ye},setup(){const e=pe(),{locale:u}=de(),v=y(!1),i=y(!1),g=y(!1),p=y(!1),d=y(!1),l=J(),c=X(),h=ce(),M=fe(),{toolbarTitle:C}=M,{onKiosk:s,activeMenu:A,pageType:H,startPageEnabled:E,kioskActive:z,homeButtonEnabled:K}=Y(M),L=async o=>{await N.checkKioskStatus(o)||(d.value=!0)};if(s.value&&L(!0),c.query&&c.query.office_id){const o=Object.assign({},c.query);delete o.office_id,delete o.qr,l.replace({query:o})}O(z,o=>{!o&&s.value&&L()}),O(()=>c.query,async()=>{if(s.value&&L(!1),c.query.office_id){const o=Object.assign({},c.query);delete o.office_id,o.qr&&(N.checkInUser(),delete o.qr),l.replace({query:o})}});const I=async()=>{s.value&&(u.value="en-US"),h.logout().then(()=>{E.value&&s.value?l.replace({name:"start"}):l.replace({name:"login"})})},R=()=>{I()};return{tab:y("mails"),userStore:h,leftDrawerOpen:v,rightDrawerOpen:g,miniState:i,miniHover:p,kioskPrompt:d,onIdle:R,onKiosk:s,activeMenu:A,homeButtonEnabled:K,miniMouseOver(){i.value===!0&&(p.value=!1)},miniMouseOut(){i.value===!0&&(p.value=!0)},toggleLeftDrawer(){e.screen.gt.sm?(i.value=!i.value,i.value===!0&&(p.value=!0)):v.value=!v.value},toggleRightDrawer(){g.value=!g.value},drawerClick(o){i.value&&(i.value=!1,o.stopPropagation())},logout:I,toolbarTitle:C,pageType:H,startPageEnabled:E}}}),Ce={key:0,class:"q-mr-sm q-ml-sm",src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo-white.png",alt:"BrandSafway Logo",height:"25"},Le={key:0},Be={key:1},Ee={class:"q-gutter-sm row items-center no-wrap"},Ie={class:"row no-wrap q-pa-md"},Oe={class:"column items-center"},De={class:"text-subtitle1 q-mt-md q-mb-xs"};function Ve(e,u,v,i,g,p){const d=m("languageSelector"),l=m("MenuNav"),c=m("router-view"),h=m("kioskLogin"),M=m("v-idle"),C=m("version");return n(),r(se,{view:"hHh lpR fFf"},{default:a(()=>[t(x,{elevated:""},{default:a(()=>[t(V,{style:{height:"62px"}},{default:a(()=>[t(S,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),e.$q.screen.gt.sm?(n(),b("img",Ce)):f("",!0),t(D,null,{default:a(()=>[e.$q.screen.lt.sm?(n(),b("span",Le)):(n(),b("span",Be,_(e.toolbarTitle),1))]),_:1}),k("div",Ee,[t(d,{dense:"",borderless:"",class:"lang-white"}),t(S,{flat:"",dense:"",color:"white"},{default:a(()=>[k("div",null,_(e.userStore.getUser[35])+" "+_(e.userStore.getUser[37]),1),t(B,{right:"",size:"2.2em",name:"account_circle"}),t(ee,null,{default:a(()=>[k("div",Ie,[k("div",Oe,[t(B,{right:"",size:"72px",name:"account_circle",class:"q-mr-md"}),k("div",De,_(e.userStore.getUser[35])+" "+_(e.userStore.getUser[37]),1),Z(t(S,{color:"primary",label:e.$t("logout"),push:"",size:"sm",onClick:e.logout},null,8,["label","onClick"]),[[re]])])])]),_:1})]),_:1})])]),_:1})]),_:1}),t(ae,{modelValue:e.leftDrawerOpen,"onUpdate:modelValue":u[0]||(u[0]=s=>e.leftDrawerOpen=s),side:"left","show-if-above":"",bordered:"",mini:e.miniState&&e.miniHover,onMouseover:e.miniMouseOver,onMouseout:e.miniMouseOut,onClickCapture:e.drawerClick,class:"text-primary bg-white"},{default:a(()=>[t(ne,{class:"fit"},{default:a(()=>[e.$q.screen.lt.sm?(n(),r(V,{key:0,style:{height:"64px"}},{default:a(()=>[t(D,{class:"items-center"},{default:a(()=>[t(te,{src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo.svg",style:{"max-width":"245px"},fit:"center",class:"q-ml-md"})]),_:1})]),_:1})):f("",!0),t(j,{class:"q-mt-sm"},{default:a(()=>[(n(!0),b(U,null,T(e.activeMenu,s=>(n(),r(l,w({key:s.title},s,{mini:e.miniState}),null,16,["mini"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue","mini","onMouseover","onMouseout","onClickCapture"]),t(oe,null,{default:a(()=>[t(c)]),_:1}),e.onKiosk?(n(),r(h,{key:0,modelValue:e.kioskPrompt,"onUpdate:modelValue":u[1]||(u[1]=s=>e.kioskPrompt=s)},null,8,["modelValue"])):f("",!0),e.onKiosk?(n(),r(M,{key:1,onIdle:e.onIdle,duration:300,style:{display:"none"}},null,8,["onIdle"])):f("",!0),e.onKiosk&&e.startPageEnabled&&e.homeButtonEnabled?(n(),r(S,{key:2,icon:"o_home",onClick:e.onIdle,class:"z-max home-button-main",size:"xl",ripple:!0},null,8,["onClick"])):f("",!0),t(C)]),_:1})}var gt=Q(Qe,[["render",Ve]]);export{gt as default};
