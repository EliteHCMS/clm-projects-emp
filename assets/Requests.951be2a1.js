import{Q as Le}from"./QPage.08de2908.js";import{bC as ge,c as O,h as ie,bR as de,g as De,k as G,c0 as K,_ as L,v as n,x as c,d as s,be as o,cx as Y,z as t,a7 as i,cA as H,F as R,aU as V,aj as f,aq as S,bU as ee,c1 as $,bg as X,bz as Z,ak as p,B as U,r as J,cy as M,bB as ae,w as $e,aV as D,d4 as Je,bY as qe,cz as me,cB as Ie}from"./index.815436d6.js";import{Q as ne}from"./QBadge.6ba0a250.js";import{a as Ye,Q as se,c as He,b as oe}from"./QTabPanels.15a4ea3b.js";import{Q as We}from"./QSpace.5a509e78.js";import{Q as Ge}from"./QToolbar.0d0274b3.js";import{Q as pe}from"./QSlideTransition.90bbca9b.js";import{Q as be}from"./QTooltip.c9aa8456.js";import{a as B}from"./QSelect.6a1df565.js";import{a as P,Q as W}from"./QTable.fd1dce3e.js";import{Q as le}from"./QForm.8a411639.js";import{u as te}from"./use-quasar.4d72c5c3.js";import{a as z,c as I,b as re,u as N,e as he,f as Ke}from"./array.989c5125.js";import{Q as ue}from"./QMarkupTable.fe35c84c.js";import{n as Q}from"./quickbase.91d527ce.js";import{dayjs as Xe}from"./dayjs.98e455c1.js";import"./QResizeObserver.67ff482b.js";import"./rtl.65b79c69.js";import"./use-panel.e503c978.js";import"./touch.d8ab472d.js";import"./selection.d5003517.js";import"./position-engine.6589cfde.js";import"./QMenu.8256acc3.js";import"./QList.09de2b9f.js";import"./use-fullscreen.a53a7864.js";import"./_commonjsHelpers.dfee5925.js";import"./localForage.4fd3b42d.js";import"./index.7dbe61ef.js";import"./i18n.ec12bbab.js";import"./api.a9cf1540.js";var _=ge({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:l}){const u=O(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>ie("tr",{class:u.value},de(l.default))}}),v=ge({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:l}){const u=De(),b=O(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return ie("td",{class:b.value},de(l.default));const q=u.vnode.key,h=(e.props.colsMap!==void 0?e.props.colsMap[q]:null)||e.props.col;if(h===void 0)return;const{row:a}=e.props;return ie("td",{class:b.value+h.__tdClass(a),style:h.__tdStyle(a)},de(l.default))}}});const Ze=[{name:5,label:"Created",align:"left",field:e=>e.map.duration,format:e=>`${e}`,sortable:!0},{name:2,label:"ID",align:"left",field:e=>e[3],format:e=>`${e}`,sortable:!0,required:!0},{name:1,label:"Type",align:"left",field:e=>e[282],format:e=>`${e===""?"Open":e}`,sortable:!0,required:!0},{name:3,label:"Office",align:"left",field:e=>e[103],format:e=>`${e}`,sortable:!0},{name:4,label:"Job #",align:"left",field:e=>e[27],format:e=>`${e}`,sortable:!0,required:!0},{name:6,label:"# Requested",align:"right",field:e=>e.map.need,format:e=>`${e}`},{name:7,label:"Offers",align:"right",field:e=>e.map.accepted.length,format:e=>`${e}`,sortable:!0,required:!0},{name:8,label:"Deployed",align:"right",field:e=>e[254],format:e=>`${e}`,sortable:!0,required:!0},{name:9,label:"Balance",align:"right",field:e=>e.map.balance,format:e=>`${e}`,sortable:!0,required:!0}],xe=[{name:9,label:"Balance",align:"right",field:e=>e.map.balance,format:e=>`${e}`,sortable:!0,required:!0},{name:4,label:"Job #",align:"left",field:e=>e[27],format:e=>`${e}`,sortable:!0,required:!0}],et=[{name:3,label:"Classification",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0,required:!0},{name:4,label:"Status",align:"left",field:e=>e[17],format:e=>`${e}`,sortable:!0,required:!0},{name:5,label:"Rate",align:"right",field:e=>e[23],format:e=>`$ ${e.toFixed(2)}`,sortable:!0},{name:6,label:"#Requested",align:"right",field:e=>e[18],format:e=>`${e}`},{name:7,label:"Offers",align:"right",field:e=>e.accepted.length,format:e=>`${e}`},{name:9,label:"Balance",align:"right",field:e=>e.balance,format:e=>`${e}`,sortable:!0,required:!0}],tt=[{name:9,label:"Balance",align:"right",field:e=>e.balance,format:e=>`${e}`,sortable:!0,required:!0},{name:3,label:"Classification",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0,required:!0}],st=[{name:0,label:"Name",align:"left",field:e=>e[6],format:(e,l)=>`${e} ${l[7]}`,sortable:!0,required:!0},{name:1,label:"Phone",align:"right",field:e=>e[8],format:e=>`${e}`,sortable:!0},{name:2,label:"Status",align:"right",field:e=>e[10],format:e=>`${e}`}],ot=G({name:"Open Table",components:{},setup(e,l){const u=te(),{activeProject:b,openRequestsForProject:q,openRequestsForProjectSummary:h}=K(Q()),a=q,r=O(()=>u.screen.lt.md?100:10);function d(k){l.emit("addSomeNames",k)}function T(k){l.emit("removeName",k)}return console.log(a.value),{columns:Ze,rows:a,initialPagination:{rowsPerPage:r},separator:"vertical",secondColumns:et,mobileColumns:xe,secMobileColumns:tt,activeProject:b,openRequestsForProjectSummary:h,nameColumns:st,addSomeNames:d,removeName:T}}}),at={class:"q-px-none"},lt={class:"row text-caption"},rt={class:"col-12 col-md-2"},nt=t("span",{class:"text-accent"},"Total Requests:",-1),it={class:"text-white q-ml-sm"},dt={class:"col-12 col-md-2"},mt=t("span",{class:"text-accent"},"Classifications:",-1),ut={class:"text-white q-ml-sm"},ct={class:"col-12 col-md-2"},ft=t("span",{class:"text-accent"},"Total Need:",-1),pt={class:"text-white q-ml-sm"},bt={class:"col-12 col-md-2"},ht=t("span",{class:"text-accent"},"Balance:",-1),gt={class:"text-white q-ml-sm"},$t={class:"col-12 col-md-2"},qt=t("span",{class:"text-accent"},"Avg. Rate:",-1),yt={class:"text-white q-ml-sm"},vt={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"},wt=t("thead",{class:"bg-accent"},[t("tr",null,[t("th",{class:"text-left"},"Name"),t("th",{class:"text-left"},"Phone"),t("th",{class:"text-left"},"Status")])],-1),Nt={class:"text-left"},Ct={key:0,class:"text-left"},_t={class:"text-left"};function Rt(e,l,u,b,q,h){return n(),c("div",at,[s(H,{class:"q-mb-md bg-dark"},{default:o(()=>[s(Y,{class:"q-pa-sm"},{default:o(()=>[t("div",lt,[t("div",rt,[t("div",null,[nt,t("span",it,i(e.openRequestsForProjectSummary.requestCount),1)])]),t("div",dt,[t("div",null,[mt,t("span",ut,i(e.openRequestsForProjectSummary.classCount),1)])]),t("div",ct,[t("div",null,[ft,t("span",pt,i(e.openRequestsForProjectSummary.need),1)])]),t("div",bt,[t("div",null,[ht,t("span",gt,i(e.openRequestsForProjectSummary.balance),1)])]),t("div",$t,[t("div",null,[qt,t("span",yt,"$ "+i(e.openRequestsForProjectSummary.avgRate),1)])])])]),_:1})]),_:1}),s(W,{"title-class":e.$q.screen.gt.sm?"text-primary text-h6":"text-primary text-body1",title:e.$q.screen.gt.md?`Open Requests for ${e.activeProject[20]}`:"Open Requests",columns:e.$q.screen.lt.sm?e.mobileColumns:e.columns,rows:e.rows,"row-key":"3",class:"q-pa-sm",pagination:e.initialPagination,"table-header-class":"bg-dark text-white","no-data-label":`There are no open requests for ${e.activeProject[20]}`,dense:e.$q.screen.lt.md},{header:o(a=>[s(_,{class:"bg-dark text-white",props:a},{default:o(()=>[s(P,{"auto-width":""}),(n(!0),c(R,null,V(a.cols,r=>(n(),f(P,{key:r.name,props:a},{default:o(()=>[S(i(r.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"no-data":o(({message:a})=>[t("div",vt,[s(ee,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),t("span",null,i(a),1)])]),body:o(a=>[s(_,{props:a},{default:o(()=>[s(v,{"auto-width":""},{default:o(()=>[s($,{size:e.$q.screen.gt.sm?"sm":"xs",color:"primary",round:"",dense:"",onClick:r=>a.expand=!a.expand,icon:a.expand?"remove":"add"},null,8,["size","onClick","icon"])]),_:2},1024),(n(!0),c(R,null,V(a.cols,r=>(n(),f(v,{key:r.name,props:a},{default:o(()=>[S(i(r.value),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"]),X(s(_,{props:a},{default:o(()=>[s(v,{colspan:"100%"},{default:o(()=>[s(W,{dense:"","hide-pagination":!0,columns:e.$q.screen.lt.sm?e.secMobileColumns:e.secondColumns,rows:a.row.classes,"row-key":"3","table-header-class":"bg-secondary"},{header:o(r=>[s(_,{class:"bg-dark text-white",props:r},{default:o(()=>[s(P,{"auto-width":""}),(n(!0),c(R,null,V(r.cols,d=>(n(),f(P,{key:d.name,props:r},{default:o(()=>[S(i(d.label),1)]),_:2},1032,["props"]))),128)),s(P,{"auto-width":""})]),_:2},1032,["props"])]),body:o(r=>[s(_,{props:r},{default:o(()=>[s(v,{"auto-width":""},{default:o(()=>[r.row.names.length>0&&e.$can("read","nameRequests")?(n(),f($,{key:0,size:e.$q.screen.gt.sm?"sm":"xs",color:"primary",round:"",dense:"",onClick:d=>r.expand=!r.expand,icon:r.expand?"remove":"add"},null,8,["size","onClick","icon"])):p("",!0)]),_:2},1024),(n(!0),c(R,null,V(r.cols,d=>(n(),f(v,{key:d.name,props:r},{default:o(()=>[S(i(d.value),1)]),_:2},1032,["props"]))),128)),s(v,{"auto-width":""},{default:o(()=>[e.$can("create","nameRequests")?(n(),f($,{key:0,class:"q-ml-sm",size:"sm",color:"dark",onClick:d=>e.addSomeNames(r.row),label:"Add Names"},null,8,["onClick"])):p("",!0)]),_:2},1024)]),_:2},1032,["props"]),r.row.names.length>0?X((n(),f(_,{key:0,props:r},{default:o(()=>[s(v,{colspan:"100%"},{default:o(()=>[s(ue,{dense:"",flat:"",bordered:""},{default:o(()=>[wt,t("tbody",null,[(n(!0),c(R,null,V(r.row.names,d=>(n(),c("tr",{key:d[3],class:U(d.employee[0]===void 0?"":d.employee[0][408]==="Terminated"&&!d.employee[0][421]?"bg-negative text-white":"")},[t("td",Nt,i(d[6])+" "+i(d[7]),1),e.$q.screen.gt.sm?(n(),c("td",Ct,i(d[8]),1)):p("",!0),t("td",_t,i(d.employee[0]===void 0?d[10]:d.employee[0][408]==="Terminated"&&!d.employee[0][421]?"Not Eligible":d.employee[0][552]===""?d[10]:d.employee[0][552]),1)],2))),128))])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])),[[Z,r.expand]]):p("",!0)]),_:2},1032,["columns","rows"])]),_:2},1024)]),_:2},1032,["props"]),[[Z,a.expand]])]),_:1},8,["title-class","title","columns","rows","pagination","no-data-label","dense"])])}var kt=L(ot,[["render",Rt]]);const jt=[{name:1,label:"Created",align:"left",field:e=>e.map.created,format:e=>`${e}`,sortable:!0},{name:4,label:"Job #",align:"left",field:e=>e[27],format:e=>`${e}`,sortable:!0,required:!0},{name:3,label:"Type",align:"left",field:e=>e[282],format:e=>`${e===""?"Open":e}`,sortable:!0,required:!0},{name:5,label:"Time Open",align:"right",field:e=>e.map.duration,format:e=>`${e}`,sortable:!0},{name:6,label:"#Requested",align:"right",field:e=>e.map.need,format:e=>`${e}`},{name:7,label:"All Offers",align:"right",field:e=>e.map.offers.length,format:e=>`${e}`,sortable:!0,required:!0},{name:8,label:"Accepted",align:"right",field:e=>e.map.accepted.length,format:e=>`${e}`,sortable:!0,required:!0},{name:9,label:"Rejected",align:"right",field:e=>e.map.rejected.length,format:e=>`${e}`,sortable:!0,required:!0},{name:10,label:"Rescinded",align:"right",field:e=>e.map.rescinded.length,format:e=>`${e}`,sortable:!0,required:!0}],St=[{name:1,label:"Created",align:"left",field:e=>e.map.created,format:e=>`${e}`,sortable:!0},{name:4,label:"Job #",align:"left",field:e=>e[27],format:e=>`${e}`,sortable:!0,required:!0},{name:5,label:"Time Open",align:"right",field:e=>e.map.duration,format:e=>`${e}`,sortable:!0},{name:6,label:"#Requested",align:"right",field:e=>e.map.need,format:e=>`${e}`},{name:7,label:"All Offers",align:"right",field:e=>e.map.offers.length,format:e=>`${e}`,sortable:!0,required:!0},{name:8,label:"Accepted",align:"right",field:e=>e.map.accepted.length,format:e=>`${e}`,sortable:!0,required:!0},{name:9,label:"Rejected",align:"right",field:e=>e.map.rejected.length,format:e=>`${e}`,sortable:!0,required:!0},{name:10,label:"Rescinded",align:"right",field:e=>e.map.rescinded.length,format:e=>`${e}`,sortable:!0,required:!0}],Pt=[{name:1,label:"Classification",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0,required:!0},{name:2,label:"Time Open",align:"right",field:e=>e.duration,format:e=>`${e}`,sortable:!0}],Vt=[{name:1,label:"Job",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0,required:!0},{name:2,label:"Time Open",align:"right",field:e=>e.duration,format:e=>`${e}`,sortable:!0}],Tt=G({name:"Closed Table",components:{},setup(){const e=te(),{activeProject:l,closedRequestsForProject:u,closedRequestsForProjectSummary:b}=K(Q()),q=u,h=O(()=>e.screen.lt.md?100:5);return{columns:jt,rows:q,initialPagination:{rowsPerPage:h},separator:"vertical",secondColumns:Pt,mobileColumns:St,secMobileColumns:Vt,activeProject:l,closedRequestsForProjectSummary:b}}}),Ft={class:"q-px-none"},Et={class:"row text-caption"},At={class:"col-12 col-md-2"},Ot=t("span",{class:"text-accent"},"Requests:",-1),Qt={class:"text-white q-ml-sm"},zt={class:"col-12 col-md-2"},Ut=t("span",{class:"text-accent"},"Classifications:",-1),Mt={class:"text-white q-ml-sm"},Bt={class:"col-12 col-md-2"},Lt=t("span",{class:"text-accent"},"Need:",-1),Dt={class:"text-white q-ml-sm"},Jt={class:"col-12 col-md-2"},It=t("span",{class:"text-accent"},"Offers:",-1),Yt={class:"text-white q-ml-sm"},Ht={class:"col-12 col-md-2"},Wt=t("span",{class:"text-accent"},"Avg. Rate:",-1),Gt={class:"text-white q-ml-sm"},Kt={class:"col-12 col-md-2"},Xt=t("span",{class:"text-accent"},"Avg. Time Open:",-1),Zt={class:"text-white q-ml-sm"},xt={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function es(e,l,u,b,q,h){return n(),c("div",Ft,[s(H,{class:"q-mb-md bg-dark"},{default:o(()=>[s(Y,{class:"q-pa-sm"},{default:o(()=>[t("div",Et,[t("div",At,[t("div",null,[Ot,t("span",Qt,i(e.closedRequestsForProjectSummary.requestCount),1)])]),t("div",zt,[t("div",null,[Ut,t("span",Mt,i(e.closedRequestsForProjectSummary.classCount),1)])]),t("div",Bt,[t("div",null,[Lt,t("span",Dt,i(e.closedRequestsForProjectSummary.need),1)])]),t("div",Jt,[t("div",null,[It,t("span",Yt,i(e.closedRequestsForProjectSummary.offers),1)])]),t("div",Ht,[t("div",null,[Wt,t("span",Gt,"$ "+i(e.closedRequestsForProjectSummary.avgRate),1)])]),t("div",Kt,[t("div",null,[Xt,t("span",Zt,i(e.closedRequestsForProjectSummary.avgDuration),1)])])])]),_:1})]),_:1}),s(W,{"title-class":e.$q.screen.gt.sm?"text-primary text-h6":"text-primary text-body1",title:e.$q.screen.gt.md?`Completed Requests for ${e.activeProject[20]}`:"Completed Requests",columns:e.$q.screen.lt.sm?e.mobileColumns:e.columns,rows:e.rows,"row-key":"3",class:"q-pa-sm",pagination:e.initialPagination,"table-header-class":"bg-dark text-white","no-data-label":`There are no completed requests for ${e.activeProject[20]}`,dense:e.$q.screen.lt.sm},{header:o(a=>[s(_,{class:"bg-dark text-white",props:a},{default:o(()=>[s(P,{"auto-width":""}),(n(!0),c(R,null,V(a.cols,r=>(n(),f(P,{key:r.name,props:a},{default:o(()=>[S(i(r.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"no-data":o(({message:a})=>[t("div",xt,[s(ee,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),t("span",null,i(a),1)])]),body:o(a=>[s(_,{props:a},{default:o(()=>[s(v,{"auto-width":""},{default:o(()=>[s($,{size:"sm",color:"primary",round:"",dense:"",onClick:r=>a.expand=!a.expand,icon:a.expand?"remove":"add"},null,8,["onClick","icon"])]),_:2},1024),(n(!0),c(R,null,V(a.cols,r=>(n(),f(v,{key:r.name,props:a},{default:o(()=>[S(i(r.value),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"]),X(s(_,{props:a},{default:o(()=>[s(v,{colspan:"100%"},{default:o(()=>[t("div",null,[s(W,{dense:"",title:"Classifications","hide-pagination":!0,columns:e.$q.screen.lt.sm?e.secMobileColumns:e.secondColumns,rows:a.row.classes,"row-key":"3","table-header-class":"bg-secondary"},null,8,["columns","rows"])])]),_:2},1024)]),_:2},1032,["props"]),[[Z,a.expand]])]),_:1},8,["title-class","title","columns","rows","pagination","no-data-label","dense"])])}var ts=L(Tt,[["render",es]]);const ss=[{name:5,label:"Created",align:"left",field:e=>e.map.duration,format:e=>`${e}`,sortable:!0},{name:2,label:"ID",align:"left",field:e=>e[3],format:e=>`${e}`,sortable:!0,required:!0},{name:1,label:"Type",align:"left",field:e=>e[282],format:e=>`${e===""?"Open":e}`,sortable:!0,required:!0},{name:3,label:"Office",align:"left",field:e=>e[103],format:e=>`${e}`,sortable:!0},{name:4,label:"Job #",align:"left",field:e=>e[27],format:e=>`${e}`,sortable:!0,required:!0},{name:6,label:"# Requested",align:"right",field:e=>e.map.need,format:e=>`${e}`}],os=[{name:6,label:"# Requested",align:"right",field:e=>e.map.need,format:e=>`${e}`},{name:4,label:"Job #",align:"left",field:e=>e[27],format:e=>`${e}`,sortable:!0,required:!0}],as=[{name:3,label:"Classification",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0,required:!0},{name:5,label:"Rate",align:"right",field:e=>e[23],format:e=>`$ ${e.toFixed(2)}`,sortable:!0},{name:6,label:"Quantity",align:"right",field:e=>e[18],format:e=>`${e}`},{name:7,label:"Names",align:"right",field:e=>e.names,format:e=>`${e.length}`}],ls=[{name:3,label:"Job",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0,required:!0},{name:5,label:"Rate",align:"right",field:e=>e[23],format:e=>`$ ${e.toFixed(2)}`,sortable:!0},{name:6,label:"Qty",align:"right",field:e=>e[18],format:e=>`${e}`},{name:7,label:"Names",align:"right",field:e=>e.names,format:e=>`${e.length}`}],rs=[{name:0,label:"Name",align:"left",field:e=>e[6],format:(e,l)=>`${e} ${l[7]}`,sortable:!0,required:!0},{name:1,label:"Phone",align:"right",field:e=>e[8],format:e=>`${e}`,sortable:!0},{name:2,label:"Status",align:"right",field:e=>e.employee[0][80],format:(e,l)=>`${e===""?l[10]:e}`}],ns=G({name:"Open Table",components:{},setup(e,l){const u=te(),{submitCancelRequest:b,submitCancelClassification:q}=Q(),{activeProject:h,pendingRequestsForProject:a,pendingRequestsForProjectSummary:r}=K(Q()),d=a,T=O(()=>u.screen.lt.md?100:10);function k(C){u.dialog({title:"Confirm",message:"Are you sure you want to cancel this request?",cancel:!0,persistent:!0}).onOk(async()=>{try{await b({request:C}),u.notify({type:"positive",message:"Request Canceled!",position:"top-right"})}catch(y){u.notify({type:"negative",message:y,position:"top-right"})}})}function F(C){u.dialog({title:"Confirm",message:"Are you sure you want to cancel this classification?",cancel:!0,persistent:!0}).onOk(async()=>{try{const y=await q({item:C});u.notify({type:"positive",message:y,position:"top-right"})}catch(y){u.notify({type:"negative",message:y,position:"top-right"})}})}function m(C){l.emit("addSomeNames",C)}function g(C){l.emit("removeName",C)}return console.log(a.value),{columns:ss,rows:d,initialPagination:{rowsPerPage:T},separator:"vertical",secondColumns:as,mobileColumns:os,secMobileColumns:ls,nameColumns:rs,activeProject:h,pendingRequestsForProjectSummary:r,cancelRequest:k,cancelClassification:F,addSomeNames:m,removeName:g}}}),is={class:"q-px-none"},ds={class:"row text-caption"},ms={class:"col-12 col-md-2"},us=t("span",{class:"text-accent"},"Total Requests:",-1),cs={class:"text-white q-ml-sm"},fs={class:"col-12 col-md-2"},ps=t("span",{class:"text-accent"},"Classifications:",-1),bs={class:"text-white q-ml-sm"},hs={class:"col-12 col-md-2"},gs=t("span",{class:"text-accent"},"Total Need:",-1),$s={class:"text-white q-ml-sm"},qs={class:"col-12 col-md-2"},ys=t("span",{class:"text-accent"},"Balance:",-1),vs={class:"text-white q-ml-sm"},ws={class:"col-12 col-md-2"},Ns=t("span",{class:"text-accent"},"Avg. Rate:",-1),Cs={class:"text-white q-ml-sm"},_s={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"},Rs={class:"bg-accent"},ks=t("th",{class:"text-left"},"Name",-1),js=t("th",{class:"text-left"},"Phone",-1),Ss=t("th",{class:"text-left"},"Status",-1),Ps={key:0},Vs={class:"text-left"},Ts={key:0,class:"text-left"},Fs={class:"text-left"},Es={class:"text-right"};function As(e,l,u,b,q,h){return n(),c("div",is,[s(H,{class:"q-mb-md bg-dark"},{default:o(()=>[s(Y,{class:"q-pa-sm"},{default:o(()=>[t("div",ds,[t("div",ms,[t("div",null,[us,t("span",cs,i(e.pendingRequestsForProjectSummary.requestCount),1)])]),t("div",fs,[t("div",null,[ps,t("span",bs,i(e.pendingRequestsForProjectSummary.classCount),1)])]),t("div",hs,[t("div",null,[gs,t("span",$s,i(e.pendingRequestsForProjectSummary.need),1)])]),t("div",qs,[t("div",null,[ys,t("span",vs,i(e.pendingRequestsForProjectSummary.balance),1)])]),t("div",ws,[t("div",null,[Ns,t("span",Cs,"$ "+i(e.pendingRequestsForProjectSummary.avgRate),1)])])])]),_:1})]),_:1}),s(W,{"title-class":e.$q.screen.gt.sm?"text-primary text-h6":"text-primary text-body1",title:e.$q.screen.gt.md?`Pending Requests for ${e.activeProject[20]}`:"Pending Requests",columns:e.$q.screen.lt.sm?e.mobileColumns:e.columns,rows:e.rows,"row-key":"3",class:"q-pa-sm",pagination:e.initialPagination,"table-header-class":"bg-dark text-white","no-data-label":`There are no pending requests for ${e.activeProject[20]}`,dense:e.$q.screen.lt.sm},{header:o(a=>[s(_,{class:"bg-dark text-white",props:a},{default:o(()=>[s(P,{"auto-width":""}),(n(!0),c(R,null,V(a.cols,r=>(n(),f(P,{key:r.name,props:a},{default:o(()=>[S(i(r.label),1)]),_:2},1032,["props"]))),128)),s(P,{"auto-width":""})]),_:2},1032,["props"])]),"no-data":o(({message:a})=>[t("div",_s,[s(ee,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),t("span",null,i(a),1)])]),body:o(a=>[s(_,{props:a},{default:o(()=>[s(v,{"auto-width":""},{default:o(()=>[s($,{size:e.$q.screen.gt.sm?"sm":"xs",color:"primary",round:"",dense:"",onClick:r=>a.expand=!a.expand,icon:a.expand?"remove":"add"},null,8,["size","onClick","icon"])]),_:2},1024),(n(!0),c(R,null,V(a.cols,r=>(n(),f(v,{key:r.name,props:a},{default:o(()=>[S(i(r.value),1)]),_:2},1032,["props"]))),128)),s(v,{"auto-width":""},{default:o(()=>[s($,{size:"sm",color:"primary",onClick:r=>e.cancelRequest(a.row),label:"Cancel"},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"]),X(s(_,{props:a},{default:o(()=>[s(v,{colspan:"100%"},{default:o(()=>[s(W,{dense:"","hide-pagination":!0,columns:e.$q.screen.lt.sm?e.secMobileColumns:e.secondColumns,rows:a.row.classes,"row-key":"3","table-header-class":"bg-secondary"},{header:o(r=>[s(_,{class:"bg-dark text-white",props:r},{default:o(()=>[s(P,{"auto-width":""}),(n(!0),c(R,null,V(r.cols,d=>(n(),f(P,{key:d.name,props:r},{default:o(()=>[S(i(d.label),1)]),_:2},1032,["props"]))),128)),s(P,{"auto-width":""})]),_:2},1032,["props"])]),body:o(r=>[s(_,{props:r},{default:o(()=>[s(v,{"auto-width":""},{default:o(()=>[r.row.names.length>0&&e.$can("read","nameRequests")?(n(),f($,{key:0,size:e.$q.screen.gt.sm?"sm":"xs",color:"primary",round:"",dense:"",onClick:d=>r.expand=!r.expand,icon:r.expand?"remove":"add"},null,8,["size","onClick","icon"])):p("",!0)]),_:2},1024),(n(!0),c(R,null,V(r.cols,d=>(n(),f(v,{key:d.name,props:r},{default:o(()=>[S(i(d.value),1)]),_:2},1032,["props"]))),128)),s(v,{"auto-width":""},{default:o(()=>[s($,{size:"sm",color:"primary",onClick:d=>e.cancelClassification(r.row),label:"remove"},null,8,["onClick"]),e.$can("create","nameRequests")?(n(),f($,{key:0,class:"q-ml-sm",size:"sm",color:"dark",onClick:d=>e.addSomeNames(r.row),label:"Add Names"},null,8,["onClick"])):p("",!0)]),_:2},1024)]),_:2},1032,["props"]),r.row.names.length>0?X((n(),f(_,{key:0,props:r},{default:o(()=>[s(v,{colspan:"100%"},{default:o(()=>[s(ue,{dense:"",flat:"",bordered:"",separator:"none"},{default:o(()=>[t("thead",Rs,[t("tr",null,[ks,js,Ss,e.$can("create","nameRequests")?(n(),c("th",Ps)):p("",!0)])]),t("tbody",null,[(n(!0),c(R,null,V(r.row.names,d=>(n(),c("tr",{key:d[3],class:U(d.employee[0]===void 0?"":d.employee[0][408]==="Terminated"&&!d.employee[0][421]?"bg-negative text-white":"")},[t("td",Vs,i(d[6])+" "+i(d[7]),1),e.$q.screen.gt.sm?(n(),c("td",Ts,i(d[8]),1)):p("",!0),t("td",Fs,i(d.employee[0]===void 0?d[10]:d.employee[0][408]==="Terminated"&&!d.employee[0][421]?"Not Eligible":d.employee[0][552]===""?d[10]:d.employee[0][552]),1),t("td",Es,[e.$can("create","nameRequests")&&d[35]==="Pending"?(n(),f($,{key:0,round:"",size:"sm",color:"accent",onClick:T=>e.removeName(d),icon:"delete"},null,8,["onClick"])):(n(),f($,{key:1,round:"",size:"sm",color:"dark",disable:"",icon:"delete"}))])],2))),128))])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])),[[Z,r.expand]]):p("",!0)]),_:2},1032,["columns","rows"])]),_:2},1024)]),_:2},1032,["props"]),[[Z,a.expand]])]),_:1},8,["title-class","title","columns","rows","pagination","no-data-label","dense"])])}var Os=L(ns,[["render",As]]);const Qs=G({components:{},setup(){const{addedClassifications:e,addedNames:l}=K(Q()),{pushName:u}=Q(),b=J(10),q=J(null),h=O(()=>{const A=new RegExp("^[0-9]{"+b.value+"}","g");return z({job:z().required("Classification is required"),firstName:I().required().label("First Name"),lastName:I().required().label("Last Name"),phoneNumber:I().matches(A,{excludeEmptyString:!0,message:"Number Only!"}).required().label("Phone Number"),ssn:I().matches(/^\d+$/,{excludeEmptyString:!0,message:"Numbers Only!"}).required().label("Last 4 of SSN")})}),{meta:a,errors:r,handleSubmit:d,handleReset:T}=re({validationSchema:h}),{value:k}=N("job"),{value:F}=N("firstName"),{value:m}=N("lastName"),{value:g}=N("phoneNumber"),{value:C}=N("ssn"),y=d(async A=>{console.log(A);const x={classification:A.job,id:l.value.length+1,firstName:A.firstName,lastName:A.lastName,phone:A.phoneNumber,ssn:A.ssn};console.log(x),u(x),T()}),w=A=>{q.value=A},E=A=>{b.value=A};return console.log(e.value),{job:k,firstName:F,lastName:m,phoneNumber:g,ssn:C,formMeta:a,formErrors:r,submit:y,addedClassifications:e,updateCountry:w,updatePhoneMaxLength:E}}}),zs=t("div",{class:"row justify-between q-mb-sm"},[t("div",{class:"col-12 col-md-6"},[t("div",{class:"text-dark text-body1"},"Add Names")])],-1),Us={class:"row"},Ms={class:"col-12 col-md-6 q-px-sm"},Bs={class:"text-caption"},Ls={class:"text-caption"},Ds={class:"text-caption"},Js={class:"text-caption"},Is={class:"col-12 col-md-5 q-px-sm"},Ys={class:"text-caption"},Hs={class:"q-mt-md",align:"right"};function Ws(e,l,u,b,q,h){return n(),c("div",{class:U(e.$q.screen.lt.md?"q-pt-md":"")},[zs,s(le,{onSubmit:ae(e.submit,["prevent"])},{default:o(()=>[t("div",Us,[t("div",Ms,[s(M,{dense:"",label:"First Name",modelValue:e.firstName,"onUpdate:modelValue":l[0]||(l[0]=a=>e.firstName=a),error:!!e.formErrors.firstName,"bottom-slots":""},{error:o(()=>[t("div",Bs,i(e.formErrors.firstName),1)]),_:1},8,["modelValue","error"]),s(M,{dense:"",label:"Last Name",modelValue:e.lastName,"onUpdate:modelValue":l[1]||(l[1]=a=>e.lastName=a),error:!!e.formErrors.lastName,"bottom-slots":""},{error:o(()=>[t("div",Ls,i(e.formErrors.lastName),1)]),_:1},8,["modelValue","error"]),s(M,{dense:"",label:"Phone Number",modelValue:e.phoneNumber,"onUpdate:modelValue":l[2]||(l[2]=a=>e.phoneNumber=a),error:!!e.formErrors.phoneNumber,"bottom-slots":""},{error:o(()=>[t("div",Ds,i(e.formErrors.phoneNumber),1)]),_:1},8,["modelValue","error"]),s(M,{maxlength:"4",dense:"",label:"Last 4 of SSN",modelValue:e.ssn,"onUpdate:modelValue":l[3]||(l[3]=a=>e.ssn=a),error:!!e.formErrors.ssn,"bottom-slots":""},{error:o(()=>[t("div",Js,i(e.formErrors.ssn),1)]),_:1},8,["modelValue","error"])]),t("div",Is,[s(B,{dense:"",label:"Classification","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.job,"onUpdate:modelValue":l[4]||(l[4]=a=>e.job=a),options:e.addedClassifications,"option-label":"label","display-value":`${e.job?e.job.label:""}`,"bottom-slots":"",error:!!e.formErrors.job},{error:o(()=>[t("div",Ys,i(e.formErrors.job),1)]),_:1},8,["modelValue","options","display-value","error"])])]),t("div",Hs,[s($,{class:"q-mr-sm",size:"sm",color:"secondary",label:"Back",onClick:l[5]||(l[5]=a=>e.$emit("closeNames"))}),s($,{type:"submit",size:"sm",color:"primary",label:"Save"})])]),_:1},8,["onSubmit"])],2)}var Gs=L(Qs,[["render",Ws]]);const Ks=G({components:{AddNames:Gs},props:{},setup(){const{requestOptions:e,addedClassifications:l}=K(Q()),{pushClassification:u}=Q(),b=J(!1),q=O(()=>e.value.crafts),h=O(()=>F.value&&F.value!==void 0?F.value.classifications:[]),a=z({craft:z().required("Craft is required.").nullable(),job:z().required("Classification is required.").nullable(),rate:he().required("Rate is required.").nullable(),qty:he().required("Craft is required.").nullable()}),{meta:r,errors:d,handleSubmit:T,handleReset:k}=re({validationSchema:a}),{value:F}=N("craft"),{value:m}=N("job"),{value:g}=N("rate"),{value:C}=N("qty");$e(m,(w,E)=>{w!==void 0&&w.hasFixedRate&&(g.value=w.fixedRate)});const y=T(async w=>{console.log(w);const E={id:l.value.length+1,craft:w.craft,job:w.job,rate:w.rate,qty:w.qty,label:w.job[18],names:[]};console.log(E),u(E),k()});return{crafts:q,jobs:h,craft:F,job:m,rate:g,qty:C,formMeta:r,formErrors:d,submit:y,showAddNames:b,addedClassifications:l}}}),Xs={class:"row justify-between q-mb-sm"},Zs=t("div",{class:"col-12 col-md-6"},[t("div",{class:"text-dark text-body1"},"Add Classifications")],-1),xs={key:0,align:"right",class:"col-12 col-md-6"},eo={class:"row items-center"},to={class:"col-12 col-md-3 q-px-sm"},so={class:"text-caption"},oo={class:"col-12 col-md-4 q-px-sm"},ao={class:"text-caption"},lo={class:"col-12 col-md-2 q-px-sm"},ro=t("span",null,"Rate",-1),no={class:"text-caption"},io={class:"col-12 col-md-2 q-px-sm"},mo={class:"text-caption"},uo={key:1};function co(e,l,u,b,q,h){const a=D("add-names");return n(),c("div",null,[e.showAddNames?p("",!0):(n(),c("div",{key:0,class:U(e.$q.screen.lt.md?"q-pt-md":"")},[t("div",Xs,[Zs,e.addedClassifications.length>0&&e.$can("create","nameRequests")?(n(),c("div",xs,[s($,{dense:"",color:"info",label:"Add Names",icon:"add",onClick:l[0]||(l[0]=r=>e.showAddNames=!0)})])):p("",!0)]),s(le,{onSubmit:ae(e.submit,["prevent"])},{default:o(()=>[t("div",eo,[t("div",to,[s(B,{dense:"",label:"Select a Craft","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.craft,"onUpdate:modelValue":l[1]||(l[1]=r=>e.craft=r),options:e.crafts,"option-label":"10","display-value":`${e.craft?e.craft[10]:""}`,"bottom-slots":"",error:!!e.formErrors.craft},{error:o(()=>[t("div",so,i(e.formErrors.craft),1)]),_:1},8,["modelValue","options","display-value","error"])]),t("div",oo,[s(B,{dense:"",label:"Select a Classification","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.job,"onUpdate:modelValue":l[2]||(l[2]=r=>e.job=r),options:e.jobs,"option-label":"18","display-value":`${e.job?e.job[18]:""}`,"bottom-slots":"",error:!!e.formErrors.job},{error:o(()=>[t("div",ao,i(e.formErrors.job),1)]),_:1},8,["modelValue","options","display-value","error"])]),t("div",lo,[s(M,{step:"any",dense:"",type:"number",modelValue:e.rate,"onUpdate:modelValue":l[3]||(l[3]=r=>e.rate=r),"bottom-slots":"",error:!!e.formErrors.rate,prefix:"$","label-slot":"",disable:e.job!==void 0&&e.job.hasFixedRate&&!e.$can("manage","rates")},{label:o(()=>[ro]),error:o(()=>[t("div",no,i(e.formErrors.rate),1)]),_:1},8,["modelValue","error","disable"])]),t("div",io,[s(M,{dense:"",type:"number",label:"Qty",modelValue:e.qty,"onUpdate:modelValue":l[4]||(l[4]=r=>e.qty=r),"bottom-slots":"",error:!!e.formErrors.qty},{error:o(()=>[t("div",mo,i(e.formErrors.qty),1)]),_:1},8,["modelValue","error"])]),t("div",{class:U(["col-12 col-md-1",e.$q.screen.lt.md?"text-right":"q-px-sm"])},[s($,{type:"submit",size:"sm",color:"primary",round:e.$q.screen.gt.sm,icon:"add",label:e.$q.screen.gt.sm?"":"Add Classification"},null,8,["round","label"])],2)])]),_:1},8,["onSubmit"])],2)),e.showAddNames?(n(),c("div",uo,[s(a,{onCloseNames:l[5]||(l[5]=r=>e.showAddNames=!1)})])):p("",!0)])}var fo=L(Ks,[["render",co]]);const po=G({props:{job:Object},setup(e,l){const u=te(),{addedNames:b}=K(Q()),{upsertName:q}=Q(),h=J(10),{capitalize:a}=Je,r=O(()=>{const E=new RegExp("^[0-9]{"+h.value+"}","g");return z({firstName:I().required().label("First Name"),lastName:I().required().label("Last Name"),phoneNumber:I().matches(E,{excludeEmptyString:!0,message:"Number Only!"}).required().label("Phone Number"),ssn:I().min(4).max(4).matches(/^\d+$/,{excludeEmptyString:!0,message:"Numbers Only!"}).required().label("Last 4 of SSN")})}),{meta:d,errors:T,handleSubmit:k,handleReset:F}=re({validationSchema:r}),{value:m}=N("firstName"),{value:g}=N("lastName"),{value:C}=N("phoneNumber"),{value:y}=N("ssn"),w=k(async E=>{console.log(E),u.loading.show();const A={classification:e.job,id:b.value.length+1,firstName:a(E.firstName.toLowerCase()),lastName:a(E.lastName.toLowerCase()),phone:E.phoneNumber,ssn:E.ssn},x=await q({name:A,action:"create"});console.log(x),F(),u.loading.hide(),l.emit("newNameAdded")});return{firstName:m,lastName:g,phoneNumber:C,ssn:y,formMeta:d,formErrors:T,submit:w}}});function bo(e,l,u,b,q,h){return n(),c("div",null,[t("div",null,[s(le,{onSubmit:ae(e.submit,["prevent"])},{default:o(()=>[s(H,null,{default:o(()=>[s(Y,null,{default:o(()=>[s(M,{dense:"",label:"First Name",modelValue:e.firstName,"onUpdate:modelValue":l[0]||(l[0]=a=>e.firstName=a),error:!!e.formErrors.firstName},null,8,["modelValue","error"]),s(M,{dense:"",label:"Last Name",modelValue:e.lastName,"onUpdate:modelValue":l[1]||(l[1]=a=>e.lastName=a),error:!!e.formErrors.lastName},null,8,["modelValue","error"]),s(M,{dense:"",label:"Phone Number",modelValue:e.phoneNumber,"onUpdate:modelValue":l[2]||(l[2]=a=>e.phoneNumber=a),error:!!e.formErrors.phoneNumber},null,8,["modelValue","error"]),s(M,{maxlength:"4",dense:"",label:"Last 4 of SSN",modelValue:e.ssn,"onUpdate:modelValue":l[3]||(l[3]=a=>e.ssn=a),error:!!e.formErrors.ssn},null,8,["modelValue","error"])]),_:1}),s(qe),s(me,{class:"bg-accent",align:"right"},{default:o(()=>[s($,{size:e.$q.screen.lt.md?"sm":"",color:"secondary",label:"Cancel",onClick:l[4]||(l[4]=a=>e.$emit("closeNames"))},null,8,["size"]),s($,{type:"submit",size:e.$q.screen.lt.md?"sm":"",color:"primary",label:"Save"},null,8,["size"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])])])}var ho=L(po,[["render",bo]]);const go=[{name:2,label:"Request ID",align:"left",field:e=>e[18],format:e=>`${e}`,sortable:!0,required:!0},{name:3,label:"Office",align:"left",field:e=>e[103],format:e=>`${e}`,sortable:!0},{name:4,label:"Job #",align:"left",field:e=>e[27],format:e=>`${e}`,sortable:!0,required:!0},{name:6,label:"# Requested",align:"right",field:e=>e.map.need,format:e=>`${e}`}],$o=[{name:6,label:"# Requested",align:"right",field:e=>e.map.need,format:e=>`${e}`},{name:4,label:"Job #",align:"left",field:e=>e[27],format:e=>`${e}`,sortable:!0,required:!0}],qo=[{name:3,label:"Classification",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0,required:!0},{name:5,label:"Rate",align:"right",field:e=>e[23],format:e=>`$ ${e.toFixed(2)}`,sortable:!0},{name:6,label:"Quantity",align:"right",field:e=>e[18],format:e=>`${e}`},{name:7,label:"Names",align:"right",field:e=>e.names,format:e=>`${e.length}`}],yo=[{name:3,label:"Job",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0,required:!0},{name:5,label:"Rate",align:"right",field:e=>e[23],format:e=>`$ ${e.toFixed(2)}`,sortable:!0},{name:6,label:"Qty",align:"right",field:e=>e[18],format:e=>`${e}`},{name:7,label:"Names",align:"right",field:e=>e.names,format:e=>`${e.length}`}],vo=[{name:0,label:"Name",align:"left",field:e=>e[6],format:(e,l)=>`${e} ${l[7]}`,sortable:!0,required:!0},{name:1,label:"Phone",align:"right",field:e=>e[8],format:e=>`${e}`,sortable:!0},{name:2,label:"Status",align:"right",field:e=>e.employee[0][80],format:(e,l)=>`${e===""?l[10]:e}`}],wo=G({name:"Open Table",components:{},setup(e,l){const u=te(),{submitCancelRequest:b,submitCancelClassification:q}=Q(),{activeProject:h,pendingRequestsForProject:a,pendingRequestsForProjectSummary:r,nameRequestsForProject:d}=K(Q()),T=a,k=O(()=>u.screen.lt.md?100:5);function F(y){u.dialog({title:"Confirm",message:"Are you sure you want to cancel this request?",cancel:!0,persistent:!0}).onOk(async()=>{try{await b({request:y}),u.notify({type:"positive",message:"Request Canceled!",position:"top-right"})}catch(w){u.notify({type:"negative",message:w,position:"top-right"})}})}function m(y){u.dialog({title:"Confirm",message:"Are you sure you want to cancel this classification?",cancel:!0,persistent:!0}).onOk(async()=>{try{await q({item:y}),u.notify({type:"positive",message:"Classification Removed!",position:"top-right"})}catch(w){u.notify({type:"negative",message:w,position:"top-right"})}})}function g(y){l.emit("addSomeNames",y)}function C(y){l.emit("removeName",y)}return console.log(a.value),{columns:go,rows:T,initialPagination:{rowsPerPage:k},separator:"vertical",secondColumns:qo,mobileColumns:$o,secMobileColumns:yo,nameColumns:vo,activeProject:h,pendingRequestsForProjectSummary:r,cancelRequest:F,cancelClassification:m,addSomeNames:g,removeName:C,nameRequestsForProject:d,dayjs:Xe}}}),No={class:"q-px-none"},Co={class:"bg-dark text-white"},_o={key:0,class:"text-left"},Ro=t("th",{class:"text-left"},"Name",-1),ko={key:1,class:"text-left"},jo=t("th",{class:"text-left"},"Status",-1),So={key:2},Po={key:0,class:"text-left"},Vo={class:"text-left"},To={key:1,class:"text-left"},Fo={class:"text-left"},Eo={class:"text-right"},Ao={key:0},Oo={colspan:"100%"},Qo={class:"row"},zo={class:"col-12 col-md-8 q-px-sm"},Uo={class:"col-12 col-md-4 q-px-sm"},Mo={key:0},Bo={colspan:"100%"},Lo={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function Do(e,l,u,b,q,h){return n(),c("div",No,[s(H,null,{default:o(()=>[s(Y,{class:"q-pb-none"},{default:o(()=>[t("div",{class:U(["text-primary",e.$q.screen.lt.md?"text-body1":"text-h6"])},i(e.$q.screen.gt.md?`Named Requests for ${e.activeProject[20]}`:"Named Requests"),3)]),_:1}),s(Y,null,{default:o(()=>[s(ue,{dense:e.$q.screen.lt.md,flat:""},{default:o(()=>[t("thead",Co,[t("tr",null,[e.$q.screen.gt.sm?(n(),c("th",_o,"Request#")):p("",!0),Ro,e.$q.screen.gt.sm?(n(),c("th",ko,"Phone")):p("",!0),jo,e.$can("create","nameRequests")?(n(),c("td",So)):p("",!0)])]),t("tbody",null,[(n(!0),c(R,null,V(e.nameRequestsForProject,a=>(n(),c(R,{key:a[3]},[t("tr",{class:U(a.employee[0]===void 0?"":a.employee[0][408]==="Terminated"&&!a.employee[0][421]?"bg-negative text-white":"")},[e.$q.screen.gt.sm?(n(),c("td",Po,i(a[18]),1)):p("",!0),t("td",Vo,i(a[6])+" "+i(a[7]),1),e.$q.screen.gt.sm?(n(),c("td",To,i(a[8]),1)):p("",!0),t("td",Fo,i(a.employee[0]===void 0?a[10]:a.employee[0][408]==="Terminated"&&!a.employee[0][421]?"Not Eligible":a.employee[0][552]===""?a[10]:a.employee[0][552]),1),t("td",Eo,[a.employee[0]!==void 0&&a.employee[0][408]==="Terminated"&&!a.employee[0][421]?(n(),f($,{key:0,round:"",class:"q-mr-sm",size:e.$q.screen.gt.sm?"sm":"xs",color:"white","text-color":"negative",onClick:r=>a.expand=!a.expand,icon:a.expand?"visibility_off":"visibility"},null,8,["size","onClick","icon"])):p("",!0),e.$can("create","nameRequests")&&a[35]==="Pending"?(n(),f($,{key:1,round:"",size:"sm",color:"accent",onClick:r=>e.removeName(a),icon:"delete"},null,8,["onClick"])):(n(),f($,{key:2,round:"",size:"sm",color:"dark",disable:"",icon:"delete"}))])],2),a.expand?(n(),c("tr",Ao,[t("td",Oo,[s(H,null,{default:o(()=>[s(Y,null,{default:o(()=>[t("div",Qo,[t("div",zo,[t("div",{class:U([e.$q.screen.lt.md?"text-caption":"text-body2","text-primary q-mb-sm"])}," Termination Reason ",2),t("div",{class:U([e.$q.screen.lt.md?"text-caption":"text-body2","q-pl-sm"])},i(a.employee[0][420]),3)]),t("div",Uo,[t("div",{class:U([e.$q.screen.lt.md?"text-caption":"text-body2","text-primary q-mb-sm"])}," Termination Date ",2),t("div",{class:U([e.$q.screen.lt.md?"text-caption":"text-body2","q-pl-sm"])},i(e.dayjs(a.employee[0][400].$d).format("MM/DD/YYYY")),3)])])]),_:2},1024)]),_:2},1024)])])):p("",!0)],64))),128)),e.nameRequestsForProject.length<1?(n(),c("tr",Mo,[t("td",Bo,[t("div",Lo,[s(ee,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),t("span",null,i(`There are no named requests for ${e.activeProject[20]}`),1)])])])):p("",!0)])]),_:1},8,["dense"])]),_:1})]),_:1})])}var Jo=L(wo,[["render",Do]]);const Io=[{name:1,label:"Craft",align:"left",field:e=>e.craft[10],format:e=>`${e}`,sortable:!0},{name:2,label:"Classification",align:"left",field:e=>e.job[18],format:e=>`${e}`,sortable:!0,required:!0},{name:3,label:"Rate",align:"left",field:e=>e.rate,format:e=>`${e}`,sortable:!0},{name:4,label:"Qty",align:"left",field:e=>e.qty,format:e=>`${e}`,sortable:!0,required:!0}],Yo=[{name:1,label:"Name",align:"left",field:e=>e.firstName,format:(e,l)=>`${e} ${l.lastName}`,sortable:!0},{name:2,label:"Phone",align:"left",field:e=>e.phone,format:e=>`${e}`,sortable:!0,required:!0},{name:3,label:"Last 4",align:"left",field:e=>e.ssn,format:e=>`${e}`,sortable:!0},{name:4,label:"Classification",align:"left",field:e=>e.classification.job[18],format:e=>`${e}`,sortable:!0,required:!0}],Ho=G({name:"Requests",components:{openTable:kt,closedTable:ts,pendingTable:Os,addClassifications:fo,addNamesDialog:ho,nameRequestTable:Jo},setup(){const e=te(),{requestOptions:l,getClassifications:u,openRequestsForProject:b,pendingRequestsForProject:q,closedRequestsForProject:h,nameRequestsForProject:a}=K(Q()),{storeRequest:r,resetRequest:d,spliceClassification:T,spliceName:k,upsertName:F}=Q(),m=J(0),g=J(!1),C=J(!1),y=J(null),w=[{value:"Name Request Only",description:"The hiring center will only hire the names you provide, even if you DO NOT provide enough names to fill the quantity you request."},{value:"Open",description:"The hiring center will fill positions by recruiting and selecting the most qualified candidates available."},{value:"Mixed",description:"The hiring center will hire all of the names that you provide and fill remaining positions by recruiting and selecting the most qualified candidates available."}],E=[{value:"Backfill",description:"This request is to fill positions that are open because of an employee leaving the job site."},{value:"Increase in Manpower",description:"This request is to fill positions that are new because of an increased need in manpower. This may be due to a change in the scope of an existing contract, an additional contract awarded, etc."}];$e(u,()=>{console.log(u.value)});const A=z({jobNumber:z().required("Job number is required."),contact:z().required().nullable("Contact is required."),location:z().required().nullable("Location is required."),perdiem:z().nullable(),dateNeeded:Ke().required().nullable("Date needed is required."),restriction:z().required().label("Request Type"),reason:z().required().label("Request Reason")}),{meta:x,errors:ye,handleSubmit:ve,handleReset:ce}=re({validationSchema:A,initialValues:{restriction:w[1],reason:E[0]}}),{value:we}=N("jobNumber"),{value:Ne}=N("contact"),{value:Ce}=N("location"),{value:_e}=N("perdiem"),{value:Re}=N("dateNeeded"),{value:ke}=N("restriction"),{value:je}=N("reason"),Se=ve(async j=>{console.log(j),e.loading.show();try{await r({request:j}),ce(),m.value=1,g.value=!1,e.notify({type:"positive",message:"Request submitted!"})}catch{e.notify({type:"negative",message:"There was a problem submitting request!"})}e.loading.hide()}),Pe=O(()=>{const j=[];return u.value.forEach(fe=>{fe.names.forEach(Be=>{j.push(Be)})}),j}),Ve=O(()=>l.value.jobNumbers),Te=O(()=>l.value.perdiem.length>0?l.value.perdiem:null),Fe=O(()=>l.value.locations),Ee=O(()=>l.value.contacts);function Ae(){e.dialog({title:"Confirm",message:"Are you sure you want to cancel? All of your progress will be lost.",cancel:!0,persistent:!0}).onOk(()=>{d(),g.value=!1,ce()})}function Oe(j){e.dialog({title:"Confirm",message:"Are you sure you want to delete this classification?",cancel:!0,persistent:!0}).onOk(()=>{T({item:j})})}function Qe(j){e.dialog({title:"Confirm",message:"Are you sure you want to delete this name?",cancel:!0,persistent:!0}).onOk(()=>{k({item:j})})}function ze(j){console.log(j),e.dialog({title:"Confirm",message:`Are you sure you want to delete ${j[6]} ${j[7]} from request# ${j[18]}?`,cancel:!0,persistent:!0}).onOk(async()=>{await F({name:j,action:"delete"}),e.notify({type:"positive",message:"Name deleted!"})})}function Ue(j){y.value=j,C.value=!0}function Me(){e.notify({type:"positive",message:"New name added!"}),y.value=null,C.value=!1}return console.log(a.value),{tab:m,showNew:g,getClassifications:u,columns:Io,nameColumns:Yo,jobNumbers:Ve,perdiems:Te,locations:Fe,contacts:Ee,restrictions:w,reasons:E,submitRequest:Se,jobNumber:we,contact:Ne,location:Ce,perdiem:_e,dateNeeded:Re,restriction:ke,reason:je,formMeta:x,formErrors:ye,removeClassification:Oe,cancelNew:Ae,openRequestsForProject:b,pendingRequestsForProject:q,closedRequestsForProject:h,removeName:Qe,names:Pe,addSomeNames:Ue,showAddSomeNames:C,jobForNewName:y,newNameAdded:Me,deleteName:ze,nameRequestsForProject:a}}}),Wo={class:"q-px-sm"},Go={class:"row justify-between"},Ko={class:"col-12 col-md-5 q-pr-lg"},Xo={class:"text-caption"},Zo=t("div",null,[t("span",null,"Request Reason")],-1),xo={class:"text-caption"},ea={class:"text-caption"},ta=t("div",null,[t("span",null,"Request Type")],-1),sa={class:"text-caption"},oa={class:"text-caption"},aa={class:"text-caption"},la={class:"text-caption"},ra={class:"text-caption"},na={class:"text-caption"},ia={class:"col-12 col-md-7"},da={class:"q-mt-md"},ma={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"},ua={key:1,class:"q-mt-md"},ca={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function fa(e,l,u,b,q,h){const a=D("open-table"),r=D("pending-table"),d=D("name-request-table"),T=D("closed-table"),k=D("add-classifications"),F=D("add-names-dialog");return n(),c("div",null,[t("div",Wo,[s(pe,{duration:100},{default:o(()=>[X(t("div",null,[e.$q.screen.lt.md?(n(),f(H,{key:0,flat:"",class:"q-mb-sm q-mt-none q-pt-none"},{default:o(()=>[s(me,{align:"right"},{default:o(()=>[e.$can("create","projectRequests")?(n(),f($,{key:0,dense:"",color:"primary",icon:"add",label:e.$q.screen.lt.md?"Add New":"Add New Request",onClick:l[0]||(l[0]=m=>e.showNew=!0)},null,8,["label"])):p("",!0)]),_:1})]),_:1})):p("",!0),s(Ge,{class:"bg-info text-white shadow-2 rounded-borders"},{default:o(()=>[s(Ye,{modelValue:e.tab,"onUpdate:modelValue":l[1]||(l[1]=m=>e.tab=m),"bg-color":"none","indicator-color":"accent",dense:e.$q.screen.lt.md},{default:o(()=>[s(se,{name:0,label:e.$q.screen.gt.xs?"Open Requests":"Open"},{default:o(()=>[e.openRequestsForProject.length>0?(n(),f(ne,{key:0,color:"accent",floating:"",transparent:""},{default:o(()=>[S(i(e.openRequestsForProject.length),1)]),_:1})):p("",!0)]),_:1},8,["label"]),e.$q.screen.gt.sm?(n(),f(se,{key:0,name:1,label:e.$q.screen.gt.xs?"Pending Requests":"Pending"},{default:o(()=>[e.pendingRequestsForProject.length>0?(n(),f(ne,{key:0,color:"accent",floating:"",transparent:""},{default:o(()=>[S(i(e.pendingRequestsForProject.length),1)]),_:1})):p("",!0)]),_:1},8,["label"])):p("",!0),e.$can("read","nameRequests")?(n(),f(se,{key:1,name:2,label:e.$q.screen.gt.xs?"Named Requests":"Named"},{default:o(()=>[e.nameRequestsForProject.length>0?(n(),f(ne,{key:0,color:"accent",floating:"",transparent:""},{default:o(()=>[S(i(e.nameRequestsForProject.length),1)]),_:1})):p("",!0)]),_:1},8,["label"])):p("",!0),e.$q.screen.gt.sm?(n(),f(se,{key:2,name:3,label:e.$q.screen.gt.xs?"Completed Requests":"Completed"},null,8,["label"])):p("",!0)]),_:1},8,["modelValue","dense"]),s(We),!e.showNew&&e.$q.screen.gt.sm?(n(),f($,{key:0,dense:"",color:"accent",icon:"add",label:e.$q.screen.lt.md?"Add New":"Add New Request",onClick:l[2]||(l[2]=m=>e.showNew=!0)},null,8,["label"])):p("",!0)]),_:1}),s(He,{modelValue:e.tab,"onUpdate:modelValue":l[3]||(l[3]=m=>e.tab=m),animated:""},{default:o(()=>[s(oe,{name:0},{default:o(()=>[s(a,{onAddSomeNames:e.addSomeNames,onRemoveName:e.deleteName},null,8,["onAddSomeNames","onRemoveName"])]),_:1}),s(oe,{name:1},{default:o(()=>[s(r,{onAddSomeNames:e.addSomeNames,onRemoveName:e.deleteName},null,8,["onAddSomeNames","onRemoveName"])]),_:1}),s(oe,{name:2},{default:o(()=>[s(d,{onRemoveName:e.deleteName},null,8,["onRemoveName"])]),_:1}),s(oe,{name:3},{default:o(()=>[s(T)]),_:1})]),_:1},8,["modelValue"])],512),[[Z,!e.showNew]])]),_:1}),s(pe,{duration:100},{default:o(()=>[X(t("div",null,[s(H,null,{default:o(()=>[s(le,{onSubmit:ae(e.submitRequest,["prevent"])},{default:o(()=>[s(Y,null,{default:o(()=>[t("div",Go,[t("div",Ko,[s(B,{class:"q-mb-sm",dense:"","label-slot":"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.reason,"onUpdate:modelValue":l[4]||(l[4]=m=>e.reason=m),options:e.reasons,"option-label":"value","display-value":e.reason?e.reason.value:"","bottom-slots":"",error:!!e.formErrors.reason},{error:o(()=>[t("div",Xo,i(e.formErrors.reason),1)]),label:o(()=>[Zo]),after:o(()=>[s($,{size:"xs",color:"accent",round:"",icon:"question_mark"},{default:o(()=>[s(be,{anchor:"top middle",self:"center middle",class:"bg-primary text-white"},{default:o(()=>[t("div",null,[t("div",xo,i(e.reason?e.reason.description:""),1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","display-value","error"]),s(B,{class:"q-mb-sm",dense:"","label-slot":"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.restriction,"onUpdate:modelValue":l[5]||(l[5]=m=>e.restriction=m),options:e.restrictions,"option-label":"value","display-value":e.restriction?e.restriction.value:"","bottom-slots":"",error:!!e.formErrors.restriction},{error:o(()=>[t("div",ea,i(e.formErrors.restriction),1)]),label:o(()=>[ta]),after:o(()=>[s($,{size:"xs",color:"accent",round:"",icon:"question_mark"},{default:o(()=>[s(be,{anchor:"top middle",self:"center middle",class:"bg-primary text-white"},{default:o(()=>[t("div",null,[t("div",sa,i(e.restriction?e.restriction.description:""),1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","display-value","error"]),s(B,{class:"q-mb-sm",dense:"",label:"Select Job Number","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.jobNumber,"onUpdate:modelValue":l[6]||(l[6]=m=>e.jobNumber=m),options:e.jobNumbers,"option-label":"11","display-value":`${e.jobNumber?e.jobNumber[11]:""}`,"bottom-slots":"",error:!!e.formErrors.jobNumber},{error:o(()=>[t("div",oa,i(e.formErrors.jobNumber),1)]),_:1},8,["modelValue","options","display-value","error"]),s(B,{class:"q-mb-sm",dense:"",label:"Select Contact","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.contact,"onUpdate:modelValue":l[7]||(l[7]=m=>e.contact=m),options:e.contacts,"option-label":"17","display-value":`${e.contact?e.contact[17]:""}`,"bottom-slots":"",error:!!e.formErrors.contact},{error:o(()=>[t("div",aa,i(e.formErrors.contact),1)]),_:1},8,["modelValue","options","display-value","error"]),s(B,{class:"q-mb-sm",dense:"",label:"Select Meeting Location","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.location,"onUpdate:modelValue":l[8]||(l[8]=m=>e.location=m),options:e.locations,"option-label":"6","display-value":`${e.location?e.location[6]:""}`,"bottom-slots":"",error:!!e.formErrors.location},{error:o(()=>[t("div",la,i(e.formErrors.location),1)]),_:1},8,["modelValue","options","display-value","error"]),s(B,{class:"q-mb-sm",dense:"",label:"Per Diem","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.perdiem,"onUpdate:modelValue":l[9]||(l[9]=m=>e.perdiem=m),options:e.perdiems,"option-label":"20","display-value":`${e.perdiem?e.perdiem[20]:""}`,"bottom-slots":"",error:!!e.formErrors.perdiem},{error:o(()=>[t("div",ra,i(e.formErrors.perdiem),1)]),_:1},8,["modelValue","options","display-value","error"]),s(M,{dense:"",type:"date",modelValue:e.dateNeeded,"onUpdate:modelValue":l[10]||(l[10]=m=>e.dateNeeded=m),"bottom-slots":"",error:!!e.formErrors.dateNeeded,label:"Date Needed","stack-label":""},{error:o(()=>[t("div",na,i(e.formErrors.dateNeeded),1)]),_:1},8,["modelValue","error"])]),t("div",ia,[e.$q.screen.lt.md?(n(),f(qe,{key:0,color:"primary"})):p("",!0),s(k,{clearForm:!e.showNew},null,8,["clearForm"]),t("div",da,[s(W,{dense:"",rows:e.getClassifications,"row-key":"id",columns:e.columns,"table-header-class":"bg-secondary","no-data-label":"At least one classification is required."},{"no-data":o(({message:m})=>[t("div",ma,[s(ee,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),t("span",null,i(m),1)])]),header:o(m=>[s(_,{class:"bg-dark text-white",props:m},{default:o(()=>[(n(!0),c(R,null,V(m.cols,g=>(n(),f(P,{key:g.name,props:m},{default:o(()=>[S(i(g.label),1)]),_:2},1032,["props"]))),128)),s(P,{"auto-width":""})]),_:2},1032,["props"])]),body:o(m=>[s(_,{props:m},{default:o(()=>[(n(!0),c(R,null,V(m.cols,g=>(n(),f(v,{key:g.name,props:m},{default:o(()=>[S(i(g.value),1)]),_:2},1032,["props"]))),128)),s(v,{"auto-width":""},{default:o(()=>[s($,{size:"xs",round:"",color:"primary",onClick:g=>e.removeClassification(m.row),icon:"delete"},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),e.names.length>0&&e.$can("read","nameRequests")?(n(),c("div",ua,[s(W,{dense:"",rows:e.names,"row-key":"id",columns:e.nameColumns,"table-header-class":"bg-secondary","no-data-label":"No names added."},{"no-data":o(({message:m})=>[t("div",ca,[s(ee,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),t("span",null,i(m),1)])]),header:o(m=>[s(_,{class:"bg-dark text-white",props:m},{default:o(()=>[(n(!0),c(R,null,V(m.cols,g=>(n(),f(P,{key:g.name,props:m},{default:o(()=>[S(i(g.label),1)]),_:2},1032,["props"]))),128)),s(P,{"auto-width":""})]),_:2},1032,["props"])]),body:o(m=>[s(_,{props:m},{default:o(()=>[(n(!0),c(R,null,V(m.cols,g=>(n(),f(v,{key:g.name,props:m},{default:o(()=>[S(i(g.value),1)]),_:2},1032,["props"]))),128)),s(v,{"auto-width":""},{default:o(()=>[s($,{size:"xs",round:"",color:"primary",onClick:g=>e.removeName(m.row),icon:"delete"},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns"])])):p("",!0)])])]),_:1}),s(me,{align:"right"},{default:o(()=>[s($,{color:"dark",label:"Cancel",onClick:e.cancelNew},null,8,["onClick"]),s($,{disabled:!e.getClassifications.length>0,color:"primary",label:"Submit",type:"submit"},null,8,["disabled"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})],512),[[Z,e.showNew]])]),_:1})]),s(Ie,{modelValue:e.showAddSomeNames,"onUpdate:modelValue":l[12]||(l[12]=m=>e.showAddSomeNames=m),persistent:""},{default:o(()=>[s(F,{job:e.jobForNewName,onCloseNames:l[11]||(l[11]=m=>e.showAddSomeNames=!1),onNewNameAdded:e.newNameAdded},null,8,["job","onNewNameAdded"])]),_:1},8,["modelValue"])])}var pa=L(Ho,[["render",fa]]);const ba={name:"Requests",components:{RequestPage:pa},setup(){return{}}};function ha(e,l,u,b,q,h){const a=D("request-page");return n(),f(Le,{style:{"max-width":"100vw"}},{default:o(()=>[s(a)]),_:1})}var Ha=L(ba,[["render",ha]]);export{Ha as default};
