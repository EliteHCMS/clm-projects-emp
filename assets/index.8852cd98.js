import{bV as B,bX as k,r as n,w as q,aV as I,c as x,B as $,C as N,d as a,bt as l,cW as P,E as c,cV as T,cX as Y,aa as p,bS as O,H as z,ae as A,bY as h,az as E}from"./index.8838c464.js";import{Q as M}from"./QSpace.e7ca0a79.js";import{Q as U}from"./QTooltip.72214d5e.js";import{Q as X}from"./QTd.1bc00af2.js";import{u as G}from"./use-quasar.ed4be5d9.js";import{e as H}from"./export-file.dc78ba05.js";import{c as L}from"./app.42c36b1f.js";import{dayjs as W}from"./dayjs.106d80ab.js";import{_ as F}from"./projectSelector.5f0831d7.js";import{_ as J}from"./aTable.aadceb25.js";import"./position-engine.cba8bd09.js";import"./selection.26380b58.js";import"./_commonjsHelpers.a26ce4be.js";import"./localForage.ca6e9d39.js";import"./index.04bc0a32.js";import"./i18n.c69e89dd.js";import"./QSelect.78b00ca7.js";import"./QChip.5ba75959.js";import"./QMenu.b8edc490.js";import"./rtl.b51694b1.js";import"./QTable.2b553278.js";import"./QList.43880dff.js";import"./QMarkupTable.8c4a6d35.js";import"./use-fullscreen.abb80350.js";const K={class:"q-pa-md"},Z={class:"row items-center"},ee={class:"col-12 col-md-3 q-px-sm"},te={class:"col-12 col-md-5 q-px-sm"},ye={__name:"index",setup(ae){const d=G(),V=B(),f=L(),{fetchRoster:v,fetchAllRosters:_}=f,{getRoster:Q,getLoadingState:S,getSelectedProject:r}=k(f),b=n("Roster"),C=n("rosters"),m=n(""),D=n({sortBy:"13",descending:!1,rowsPerPage:150});r.value?v({selectedId:r.value}):_({can:"read"}),q(r,()=>{r.value?v({selectedId:r.value}):_({can:"read"})});const y=n(new Date),R=setInterval(()=>{y.value=new Date},1e3);I(()=>{clearInterval(R)});const u=x(()=>[{name:"id",align:"left",label:"ID",field:"3",sortable:!1},{name:"name",align:"left",label:"Name",field:"298",sortable:!0},{name:"avgDRO",align:"center",label:"AVG DRO",field:"208",sortable:!0},{name:"openRequests",align:"center",label:"Open Request",field:"31",sortable:!0},{name:"action",align:"center",label:"",sortable:!1}]),i=x(()=>Q.value(r.value).filter(o=>!0).sort((o,s)=>o[298].localeCompare(s[298]))),j=o=>{V.push({name:"view-project",params:{id:o[3]}})},g=(o,s,t)=>{let e=s!==void 0?s(o,t):o;return e=e==null?"":String(e),e=e.split('"').join('""'),`"${e}"`},w=()=>{const o=[u.value.map(t=>g(t.label))].concat(i.value.map(t=>u.value.map(e=>g(typeof e.field=="function"?e.field(t):t[e.field===void 0?e.name:e.field],e.format,t)).join(","))).join(`\r
`);H(`${b.value} ${W().format("MM.DD.YYYY")}.csv`,o,"text/csv")!==!0&&d.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})};return(o,s)=>($(),N("div",K,[a(T,{flat:"",class:"q-pt-none"},{default:l(()=>[a(P,null,{default:l(()=>[c("div",Z,[c("div",ee,[a(F,{can:"read",styleSelection:!0})])])]),_:1})]),_:1}),a(J,{rows:i.value,columns:u.value,pagination:D.value,filter:m.value,title:b.value,separator:"vertical","row-key":"3",loading:p(S)(C.value),downloadButton:!0,onDownload:w},{top:l(()=>[c("div",te,[a(Y,{dense:p(d).screen.lt.md,modelValue:m.value,"onUpdate:modelValue":s[0]||(s[0]=t=>m.value=t),label:"Search...",clearable:""},{prepend:l(()=>[a(O,{name:"search"})]),_:1},8,["dense","modelValue"])]),a(M),c("div",{class:z(["text-dark text-caption text-italic",p(d).screen.lt.md?"offset-xs-5":""])},"(Total: "+A(i.value.length)+")",3),a(h,{flat:"",round:"",color:"primary",icon:"download",disable:i.value.length<1,onClick:w},{default:l(()=>[a(U,{class:"bg-accent text-black shadow-4",offset:[10,10]},{default:l(()=>[E(" Download ")]),_:1})]),_:1},8,["disable"])]),"body-cell-action":l(t=>[a(X,{props:t},{default:l(()=>[a(h,{color:"primary",label:"View Project",onClick:e=>j(t.row),size:".75rem"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination","filter","title","loading"])]))}};export{ye as default};
