var bn=Object.defineProperty,xn=Object.defineProperties;var wn=Object.getOwnPropertyDescriptors;var Kr=Object.getOwnPropertySymbols;var An=Object.prototype.hasOwnProperty,Sn=Object.prototype.propertyIsEnumerable;var jt=(t,e,r)=>e in t?bn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,F=(t,e)=>{for(var r in e||(e={}))An.call(e,r)&&jt(t,r,e[r]);if(Kr)for(var r of Kr(e))Sn.call(e,r)&&jt(t,r,e[r]);return t},B=(t,e)=>xn(t,wn(e));var R=(t,e,r)=>(jt(t,typeof e!="symbol"?e+"":e,r),r);import{m as ee,l as k,P as _,f as _s,n as Jt,p as On,q as In,s as kn,t as Ms,u as Cn,v as L,x as Ls,y as $n,z as Tn}from"./index.5e954c71.js";import{c as Pn,a as We,g as Rn}from"./_commonjsHelpers.a26ce4be.js";import{dayjs as p}from"./dayjs.73f0a33b.js";import{r as mr,a as gr}from"./index.7dbe61ef.js";import{stateDB as Q,localforage as x}from"./localForage.411e436b.js";import{i as Ye}from"./i18n.41ab3751.js";import{api as jn}from"./api.840f2934.js";var Us={exports:{}};(function(t){/**
 * @license bcrypt.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/bcrypt.js for details
 */(function(e,r){typeof Pn=="function"&&!0&&t&&t.exports?t.exports=r():(e.dcodeIO=e.dcodeIO||{}).bcrypt=r()})(We,function(){var e={},r=null;function s(v){if(t&&t.exports)try{return require("crypto").randomBytes(v)}catch{}try{var m;return(self.crypto||self.msCrypto).getRandomValues(m=new Uint32Array(v)),Array.prototype.slice.call(m)}catch{}if(!r)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return r(v)}var i=!1;try{s(1),i=!0}catch{}r=null,e.setRandomFallback=function(v){r=v},e.genSaltSync=function(v,m){if(v=v||C,typeof v!="number")throw Error("Illegal arguments: "+typeof v+", "+typeof m);v<4?v=4:v>31&&(v=31);var h=[];return h.push("$2a$"),v<10&&h.push("0"),h.push(v.toString()),h.push("$"),h.push(y(s(O),O)),h.join("")},e.genSalt=function(v,m,h){if(typeof m=="function"&&(h=m,m=void 0),typeof v=="function"&&(h=v,v=void 0),typeof v=="undefined")v=C;else if(typeof v!="number")throw Error("illegal arguments: "+typeof v);function d(f){a(function(){try{f(null,e.genSaltSync(v))}catch(b){f(b)}})}if(h){if(typeof h!="function")throw Error("Illegal callback: "+typeof h);d(h)}else return new Promise(function(f,b){d(function(S,$){if(S){b(S);return}f($)})})},e.hashSync=function(v,m){if(typeof m=="undefined"&&(m=C),typeof m=="number"&&(m=e.genSaltSync(m)),typeof v!="string"||typeof m!="string")throw Error("Illegal arguments: "+typeof v+", "+typeof m);return ue(v,m)},e.hash=function(v,m,h,d){function f(b){typeof v=="string"&&typeof m=="number"?e.genSalt(m,function(S,$){ue(v,$,b,d)}):typeof v=="string"&&typeof m=="string"?ue(v,m,b,d):a(b.bind(this,Error("Illegal arguments: "+typeof v+", "+typeof m)))}if(h){if(typeof h!="function")throw Error("Illegal callback: "+typeof h);f(h)}else return new Promise(function(b,S){f(function($,I){if($){S($);return}b(I)})})};function n(v,m){for(var h=0,d=0,f=0,b=v.length;f<b;++f)v.charCodeAt(f)===m.charCodeAt(f)?++h:++d;return h<0?!1:d===0}e.compareSync=function(v,m){if(typeof v!="string"||typeof m!="string")throw Error("Illegal arguments: "+typeof v+", "+typeof m);return m.length!==60?!1:n(e.hashSync(v,m.substr(0,m.length-31)),m)},e.compare=function(v,m,h,d){function f(b){if(typeof v!="string"||typeof m!="string"){a(b.bind(this,Error("Illegal arguments: "+typeof v+", "+typeof m)));return}if(m.length!==60){a(b.bind(this,null,!1));return}e.hash(v,m.substr(0,29),function(S,$){S?b(S):b(null,n($,m))},d)}if(h){if(typeof h!="function")throw Error("Illegal callback: "+typeof h);f(h)}else return new Promise(function(b,S){f(function($,I){if($){S($);return}b(I)})})},e.getRounds=function(v){if(typeof v!="string")throw Error("Illegal arguments: "+typeof v);return parseInt(v.split("$")[2],10)},e.getSalt=function(v){if(typeof v!="string")throw Error("Illegal arguments: "+typeof v);if(v.length!==60)throw Error("Illegal hash length: "+v.length+" != 60");return v.substring(0,29)};var a=typeof process!="undefined"&&process&&typeof process.nextTick=="function"?typeof setImmediate=="function"?setImmediate:process.nextTick:setTimeout;function o(v){var m=[],h=0;return w.encodeUTF16toUTF8(function(){return h>=v.length?null:v.charCodeAt(h++)},function(d){m.push(d)}),m}var c="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),l=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1],u=String.fromCharCode;function y(v,m){var h=0,d=[],f,b;if(m<=0||m>v.length)throw Error("Illegal len: "+m);for(;h<m;){if(f=v[h++]&255,d.push(c[f>>2&63]),f=(f&3)<<4,h>=m){d.push(c[f&63]);break}if(b=v[h++]&255,f|=b>>4&15,d.push(c[f&63]),f=(b&15)<<2,h>=m){d.push(c[f&63]);break}b=v[h++]&255,f|=b>>6&3,d.push(c[f&63]),d.push(c[b&63])}return d.join("")}function g(v,m){var h=0,d=v.length,f=0,b=[],S,$,I,E,N,M;if(m<=0)throw Error("Illegal len: "+m);for(;h<d-1&&f<m&&(M=v.charCodeAt(h++),S=M<l.length?l[M]:-1,M=v.charCodeAt(h++),$=M<l.length?l[M]:-1,!(S==-1||$==-1||(N=S<<2>>>0,N|=($&48)>>4,b.push(u(N)),++f>=m||h>=d)||(M=v.charCodeAt(h++),I=M<l.length?l[M]:-1,I==-1)||(N=($&15)<<4>>>0,N|=(I&60)>>2,b.push(u(N)),++f>=m||h>=d)));)M=v.charCodeAt(h++),E=M<l.length?l[M]:-1,N=(I&3)<<6>>>0,N|=E,b.push(u(N)),++f;var oe=[];for(h=0;h<f;h++)oe.push(b[h].charCodeAt(0));return oe}var w=function(){var v={};return v.MAX_CODEPOINT=1114111,v.encodeUTF8=function(m,h){var d=null;for(typeof m=="number"&&(d=m,m=function(){return null});d!==null||(d=m())!==null;)d<128?h(d&127):d<2048?(h(d>>6&31|192),h(d&63|128)):d<65536?(h(d>>12&15|224),h(d>>6&63|128),h(d&63|128)):(h(d>>18&7|240),h(d>>12&63|128),h(d>>6&63|128),h(d&63|128)),d=null},v.decodeUTF8=function(m,h){for(var d,f,b,S,$=function(I){I=I.slice(0,I.indexOf(null));var E=Error(I.toString());throw E.name="TruncatedError",E.bytes=I,E};(d=m())!==null;)if((d&128)===0)h(d);else if((d&224)===192)(f=m())===null&&$([d,f]),h((d&31)<<6|f&63);else if((d&240)===224)((f=m())===null||(b=m())===null)&&$([d,f,b]),h((d&15)<<12|(f&63)<<6|b&63);else if((d&248)===240)((f=m())===null||(b=m())===null||(S=m())===null)&&$([d,f,b,S]),h((d&7)<<18|(f&63)<<12|(b&63)<<6|S&63);else throw RangeError("Illegal starting byte: "+d)},v.UTF16toUTF8=function(m,h){for(var d,f=null;(d=f!==null?f:m())!==null;){if(d>=55296&&d<=57343&&(f=m())!==null&&f>=56320&&f<=57343){h((d-55296)*1024+f-56320+65536),f=null;continue}h(d)}f!==null&&h(f)},v.UTF8toUTF16=function(m,h){var d=null;for(typeof m=="number"&&(d=m,m=function(){return null});d!==null||(d=m())!==null;)d<=65535?h(d):(d-=65536,h((d>>10)+55296),h(d%1024+56320)),d=null},v.encodeUTF16toUTF8=function(m,h){v.UTF16toUTF8(m,function(d){v.encodeUTF8(d,h)})},v.decodeUTF8toUTF16=function(m,h){v.decodeUTF8(m,function(d){v.UTF8toUTF16(d,h)})},v.calculateCodePoint=function(m){return m<128?1:m<2048?2:m<65536?3:4},v.calculateUTF8=function(m){for(var h,d=0;(h=m())!==null;)d+=v.calculateCodePoint(h);return d},v.calculateUTF16asUTF8=function(m){var h=0,d=0;return v.UTF16toUTF8(m,function(f){++h,d+=v.calculateCodePoint(f)}),[h,d]},v}();Date.now=Date.now||function(){return+new Date};var O=16,C=10,D=16,P=100,te=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],ie=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],he=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function ne(v,m,h,d){var f,b=v[m],S=v[m+1];return b^=h[0],f=d[b>>>24],f+=d[256|b>>16&255],f^=d[512|b>>8&255],f+=d[768|b&255],S^=f^h[1],f=d[S>>>24],f+=d[256|S>>16&255],f^=d[512|S>>8&255],f+=d[768|S&255],b^=f^h[2],f=d[b>>>24],f+=d[256|b>>16&255],f^=d[512|b>>8&255],f+=d[768|b&255],S^=f^h[3],f=d[S>>>24],f+=d[256|S>>16&255],f^=d[512|S>>8&255],f+=d[768|S&255],b^=f^h[4],f=d[b>>>24],f+=d[256|b>>16&255],f^=d[512|b>>8&255],f+=d[768|b&255],S^=f^h[5],f=d[S>>>24],f+=d[256|S>>16&255],f^=d[512|S>>8&255],f+=d[768|S&255],b^=f^h[6],f=d[b>>>24],f+=d[256|b>>16&255],f^=d[512|b>>8&255],f+=d[768|b&255],S^=f^h[7],f=d[S>>>24],f+=d[256|S>>16&255],f^=d[512|S>>8&255],f+=d[768|S&255],b^=f^h[8],f=d[b>>>24],f+=d[256|b>>16&255],f^=d[512|b>>8&255],f+=d[768|b&255],S^=f^h[9],f=d[S>>>24],f+=d[256|S>>16&255],f^=d[512|S>>8&255],f+=d[768|S&255],b^=f^h[10],f=d[b>>>24],f+=d[256|b>>16&255],f^=d[512|b>>8&255],f+=d[768|b&255],S^=f^h[11],f=d[S>>>24],f+=d[256|S>>16&255],f^=d[512|S>>8&255],f+=d[768|S&255],b^=f^h[12],f=d[b>>>24],f+=d[256|b>>16&255],f^=d[512|b>>8&255],f+=d[768|b&255],S^=f^h[13],f=d[S>>>24],f+=d[256|S>>16&255],f^=d[512|S>>8&255],f+=d[768|S&255],b^=f^h[14],f=d[b>>>24],f+=d[256|b>>16&255],f^=d[512|b>>8&255],f+=d[768|b&255],S^=f^h[15],f=d[S>>>24],f+=d[256|S>>16&255],f^=d[512|S>>8&255],f+=d[768|S&255],b^=f^h[16],v[m]=S^h[D+1],v[m+1]=b,v}function re(v,m){for(var h=0,d=0;h<4;++h)d=d<<8|v[m]&255,m=(m+1)%v.length;return{key:d,offp:m}}function le(v,m,h){for(var d=0,f=[0,0],b=m.length,S=h.length,$,I=0;I<b;I++)$=re(v,d),d=$.offp,m[I]=m[I]^$.key;for(I=0;I<b;I+=2)f=ne(f,0,m,h),m[I]=f[0],m[I+1]=f[1];for(I=0;I<S;I+=2)f=ne(f,0,m,h),h[I]=f[0],h[I+1]=f[1]}function Oe(v,m,h,d){for(var f=0,b=[0,0],S=h.length,$=d.length,I,E=0;E<S;E++)I=re(m,f),f=I.offp,h[E]=h[E]^I.key;for(f=0,E=0;E<S;E+=2)I=re(v,f),f=I.offp,b[0]^=I.key,I=re(v,f),f=I.offp,b[1]^=I.key,b=ne(b,0,h,d),h[E]=b[0],h[E+1]=b[1];for(E=0;E<$;E+=2)I=re(v,f),f=I.offp,b[0]^=I.key,I=re(v,f),f=I.offp,b[1]^=I.key,b=ne(b,0,h,d),d[E]=b[0],d[E+1]=b[1]}function ae(v,m,h,d,f){var b=he.slice(),S=b.length,$;if(h<4||h>31)if($=Error("Illegal number of rounds (4-31): "+h),d){a(d.bind(this,$));return}else throw $;if(m.length!==O)if($=Error("Illegal salt length: "+m.length+" != "+O),d){a(d.bind(this,$));return}else throw $;h=1<<h>>>0;var I,E,N=0,M;Int32Array?(I=new Int32Array(te),E=new Int32Array(ie)):(I=te.slice(),E=ie.slice()),Oe(m,v,I,E);function oe(){if(f&&f(N/h),N<h)for(var Te=Date.now();N<h&&(N=N+1,le(v,I,E),le(m,I,E),!(Date.now()-Te>P)););else{for(N=0;N<64;N++)for(M=0;M<S>>1;M++)ne(b,M<<1,I,E);var z=[];for(N=0;N<S;N++)z.push((b[N]>>24&255)>>>0),z.push((b[N]>>16&255)>>>0),z.push((b[N]>>8&255)>>>0),z.push((b[N]&255)>>>0);if(d){d(null,z);return}else return z}d&&a(oe)}if(typeof d!="undefined")oe();else for(var Ke;;)if(typeof(Ke=oe())!="undefined")return Ke||[]}function ue(v,m,h,d){var f;if(typeof v!="string"||typeof m!="string")if(f=Error("Invalid string / salt: Not a string"),h){a(h.bind(this,f));return}else throw f;var b,S;if(m.charAt(0)!=="$"||m.charAt(1)!=="2")if(f=Error("Invalid salt version: "+m.substring(0,2)),h){a(h.bind(this,f));return}else throw f;if(m.charAt(2)==="$")b=String.fromCharCode(0),S=3;else{if(b=m.charAt(2),b!=="a"&&b!=="b"&&b!=="y"||m.charAt(3)!=="$")if(f=Error("Invalid salt revision: "+m.substring(2,4)),h){a(h.bind(this,f));return}else throw f;S=4}if(m.charAt(S+2)>"$")if(f=Error("Missing salt rounds"),h){a(h.bind(this,f));return}else throw f;var $=parseInt(m.substring(S,S+1),10)*10,I=parseInt(m.substring(S+1,S+2),10),E=$+I,N=m.substring(S+3,S+25);v+=b>="a"?"\0":"";var M=o(v),oe=g(N,O);function Ke(Te){var z=[];return z.push("$2"),b>="a"&&z.push(b),z.push("$"),E<10&&z.push("0"),z.push(E.toString()),z.push("$"),z.push(y(oe,oe.length)),z.push(y(Te,he.length*4-1)),z.join("")}if(typeof h=="undefined")return Ke(ae(M,oe,E));ae(M,oe,E,function(Te,z){Te?h(Te,null):h(null,Ke(z))},d)}return e.encodeBase64=y,e.decodeBase64=g,e})})(Us);var Ve=Us.exports,Bs={get dev(){return!1},baseURL:"https://clm-api.elitehcms.com",apiDevURL:"https://clm-api.elitehcms.com",socketDevURL:"wss://clm-api.elitehcms.com",token:"clm-jwt",tokenExpiration:"24h"};function Dn(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function Je(){return(Je=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t}).apply(this,arguments)}function vr(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var Hs=function(){function t(s,i){this.operator=s,this.value=i,Object.defineProperty(this,"t",{writable:!0})}var e,r;return t.prototype.addNote=function(s){this.t=this.t||[],this.t.push(s)},e=t,(r=[{key:"notes",get:function(){return this.t}}])&&Dn(e.prototype,r),t}(),br=function(t){function e(){return t.apply(this,arguments)||this}return vr(e,t),e}(Hs),wt=function(t){function e(r,s){if(!Array.isArray(s))throw new Error('"'+r+'" operator expects to receive an array of conditions');return t.call(this,r,s)||this}return vr(e,t),e}(br),st="__itself__",At=function(t){function e(r,s,i){var n;return(n=t.call(this,r,i)||this).field=s,n}return vr(e,t),e}(Hs),zs=new br("__null__",null),Gt=Object.prototype.hasOwnProperty.call.bind(Object.prototype.hasOwnProperty);function En(t,e){return e instanceof wt&&e.operator===t}function Ks(t,e){return e.length===1?e[0]:new wt(t,function r(s,i,n){for(var a=n||[],o=0,c=i.length;o<c;o++){var l=i[o];En(s,l)?r(s,l.value,a):a.push(l)}return a}(t,e))}var Fn=function(t){return t},Ys=function(){return Object.create(null)},Qs=Object.defineProperty(Ys(),"__@type@__",{value:"ignore value"});function Nn(t,e,r){if(r===void 0&&(r=!1),!t||t&&t.constructor!==Object)return!1;for(var s in t)if(Gt(t,s)&&Gt(e,s)&&(!r||t[s]!==Qs))return!0;return!1}function qn(t){var e=[];for(var r in t)Gt(t,r)&&t[r]!==Qs&&e.push(r);return e}function Dt(t,e){e!==zs&&t.push(e)}var Xs=function(t){return Ks("and",t)},Ws={compound:function(t,e,r){var s=(Array.isArray(e)?e:[e]).map(function(i){return r.parse(i)});return new wt(t.name,s)},field:function(t,e,r){return new At(t.name,r.field,e)},document:function(t,e){return new br(t.name,e)}},Vs=function(){function t(r,s){var i=this;s===void 0&&(s=Ys()),this.i=void 0,this.o=void 0,this.u=void 0,this.s=void 0,this.h=void 0,this.parse=this.parse.bind(this),this.s={operatorToConditionName:s.operatorToConditionName||Fn,defaultOperatorName:s.defaultOperatorName||"eq",mergeFinalConditions:s.mergeFinalConditions||Xs},this.i=Object.keys(r).reduce(function(n,a){return n[a]=Je({name:i.s.operatorToConditionName(a)},r[a]),n},{}),this.o=Je({},s.fieldContext,{field:"",query:{},parse:this.parse,hasOperators:function(n){return Nn(n,i.i,s.useIgnoreValue)}}),this.u=Je({},s.documentContext,{parse:this.parse,query:{}}),this.h=s.useIgnoreValue?qn:Object.keys}var e=t.prototype;return e.setParse=function(r){this.parse=r,this.o.parse=r,this.u.parse=r},e.parseField=function(r,s,i,n){var a=this.i[s];if(!a)throw new Error('Unsupported operator "'+s+'"');if(a.type!=="field")throw new Error("Unexpected "+a.type+' operator "'+s+'" at field level');return this.o.field=r,this.o.query=n,this.parseInstruction(a,i,this.o)},e.parseInstruction=function(r,s,i){return typeof r.validate=="function"&&r.validate(r,s),(r.parse||Ws[r.type])(r,s,i)},e.parseFieldOperators=function(r,s){for(var i=[],n=this.h(s),a=0,o=n.length;a<o;a++){var c=n[a];if(!this.i[c])throw new Error('Field query for "'+r+'" may contain only operators or a plain object as a value');Dt(i,this.parseField(r,c,s[c],s))}return i},e.parse=function(r){var s=[],i=this.h(r);this.u.query=r;for(var n=0,a=i.length;n<a;n++){var o=i[n],c=r[o],l=this.i[o];if(l){if(l.type!=="document"&&l.type!=="compound")throw new Error('Cannot use parsing instruction for operator "'+o+'" in "document" context as it is supposed to be used in  "'+l.type+'" context');Dt(s,this.parseInstruction(l,c,this.u))}else this.o.hasOperators(c)?s.push.apply(s,this.parseFieldOperators(o,c)):Dt(s,this.parseField(o,this.s.defaultOperatorName,c,r))}return this.s.mergeFinalConditions(s)},t}();function Et(t,e){var r=t[e];if(typeof r!="function")throw new Error('Unable to interpret "'+e+'" condition. Did you forget to register interpreter for it?');return r}function _n(t){return t.operator}function Mn(t,e){var r,s=e,i=s&&s.getInterpreterName||_n;switch(s?s.numberOfArguments:0){case 1:r=function(a){var o=i(a,s);return Et(t,o)(a,n)};break;case 3:r=function(a,o,c){var l=i(a,s);return Et(t,l)(a,o,c,n)};break;default:r=function(a,o){var c=i(a,s);return Et(t,c)(a,o,n)}}var n=Je({},s,{interpret:r});return n.interpret}function Ln(t,e){return function(r){for(var s=arguments.length,i=new Array(s>1?s-1:0),n=1;n<s;n++)i[n-1]=arguments[n];var a=t.apply(void 0,[r].concat(i)),o=e.bind(null,a);return o.ast=a,o}}Vs.prototype.parseInstruction;function Js(t,e){if(!Array.isArray(e))throw new Error('"'+t.name+'" expects value to be an array')}function Gs(t,e){if(Js(t,e),!e.length)throw new Error('"'+t.name+'" expects to have at least one element in array')}var xr=function(t){return function(e,r){if(typeof r!==t)throw new Error('"'+e.name+'" expects value to be a "'+t+'"')}},Zs={type:"compound",validate:Gs,parse:function(t,e,r){var s=r.parse,i=e.map(function(n){return s(n)});return Ks(t.name,i)}},Un=Zs,Bn={type:"compound",validate:Gs},Hn={type:"field",validate:function(t,e){if(!(e&&(e instanceof RegExp||e.constructor===Object)))throw new Error('"'+t.name+'" expects to receive either regular expression or object of field operators')},parse:function(t,e,r){var s=e instanceof RegExp?new At("regex",r.field,e):r.parse(e,r);return new wt(t.name,[s])}},ei={type:"field",validate:function(t,e){if(!e||e.constructor!==Object)throw new Error('"'+t.name+'" expects to receive an object with nested query or field level operators')},parse:function(t,e,r){var s=r.parse,i=r.field,n=(0,r.hasOperators)(e)?s(e,{field:st}):s(e);return new At(t.name,i,n)}},ti={type:"field",validate:xr("number")},St={type:"field",validate:Js},ri=St,si=St,zn={type:"field",validate:function(t,e){if(!Array.isArray(e)||e.length!==2)throw new Error('"'+t.name+'" expects an array with 2 numeric elements')}},ii={type:"field",validate:xr("boolean")},wr={type:"field",validate:function(t,e){if(!(typeof e=="string"||typeof e=="number"||e instanceof Date))throw new Error('"'+t.name+'" expects value to be comparable (i.e., string, number or date)')}},Ot=wr,ni=Ot,ai=Ot,Ar={type:"field"},oi=Ar,ci={type:"field",validate:function(t,e){if(!(e instanceof RegExp)&&typeof e!="string")throw new Error('"'+t.name+'" expects value to be a regular expression or a string that represents regular expression')},parse:function(t,e,r){var s=typeof e=="string"?new RegExp(e,r.query.$options||""):e;return new At(t.name,r.field,s)}},li={type:"field",parse:function(){return zs}},Kn={type:"document",validate:xr("function")},Yn=Object.freeze({__proto__:null,$and:Zs,$or:Un,$nor:Bn,$not:Hn,$elemMatch:ei,$size:ti,$in:St,$nin:ri,$all:si,$mod:zn,$exists:ii,$gte:wr,$gt:Ot,$lt:ni,$lte:ai,$eq:Ar,$ne:oi,$regex:ci,$options:li,$where:Kn}),Qn=function(t){var e,r;function s(i){return t.call(this,i,{defaultOperatorName:"$eq",operatorToConditionName:function(n){return n.slice(1)}})||this}return r=t,(e=s).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,s.prototype.parse=function(i,n){return n&&n.field?Xs(this.parseFieldOperators(n.field,i)):t.prototype.parse.call(this,i)},s}(Vs),Zt=Yn;function Sr(t,e,r){for(var s=0,i=t.length;s<i;s++)if(r(t[s],e)===0)return!0;return!1}function Or(t,e){return Array.isArray(t)&&Number.isNaN(Number(e))}function Yr(t,e,r){if(!Or(t,e))return r(t,e);for(var s=[],i=0;i<t.length;i++){var n=r(t[i],e);n!==void 0&&(s=s.concat(n))}return s}function Ce(t){return function(e,r,s){var i=s.get(r,e.field);return Array.isArray(i)?i.some(function(n){return t(e,n,s)}):t(e,i,s)}}function Ir(){return(Ir=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t}).apply(this,arguments)}var Xn=function(t,e){return t[e]};function ui(t,e,r){var s=e.lastIndexOf(".");return s===-1?[t,e]:[r(t,e.slice(0,s)),e.slice(s+1)]}function Wn(t,e,r){if(r===void 0&&(r=Xn),e===st)return t;if(!t)throw new Error('Unable to get field "'+e+'" out of '+String(t)+".");return function(s,i,n){if(i.indexOf(".")===-1)return Yr(s,i,n);for(var a=i.split("."),o=s,c=0,l=a.length;c<l;c++)if(!(o=Yr(o,a[c],n))||typeof o!="object")return o;return o}(t,e,r)}function fi(t,e){return t===e?0:t>e?1:-1}function di(t,e){return e===void 0&&(e={}),Mn(t,Ir({get:Wn,compare:fi},e))}var pi=function(t,e,r){var s=r.interpret;return t.value.some(function(i){return s(i,e)})},Vn=function(t,e,r){return!pi(t,e,r)},hi=function(t,e,r){var s=r.interpret;return t.value.every(function(i){return s(i,e)})},Jn=function(t,e,r){return!(0,r.interpret)(t.value[0],e)},kr=function(t,e,r){var s=r.compare,i=(0,r.get)(e,t.field);return Array.isArray(i)&&!Array.isArray(t.value)?Sr(i,t.value,s):s(i,t.value)===0},yi=function(t,e,r){return!kr(t,e,r)},mi=Ce(function(t,e,r){var s=r.compare(e,t.value);return s===0||s===-1}),gi=Ce(function(t,e,r){return r.compare(e,t.value)===-1}),vi=Ce(function(t,e,r){return r.compare(e,t.value)===1}),bi=Ce(function(t,e,r){var s=r.compare(e,t.value);return s===0||s===1}),xi=function(t,e,r){var s=r.get;if(t.field===st)return e!==void 0;var i=ui(e,t.field,s),n=i[0],a=i[1],o=function(c){return!!c&&c.hasOwnProperty(a)===t.value};return Or(n,a)?n.some(o):o(n)},Gn=Ce(function(t,e){return typeof e=="number"&&e%t.value[0]===t.value[1]}),wi=function(t,e,r){var s=r.get,i=ui(e,t.field,s),n=i[0],a=i[1],o=function(c){var l=s(c,a);return Array.isArray(l)&&l.length===t.value};return t.field!==st&&Or(n,a)?n.some(o):o(n)},Ai=Ce(function(t,e){return typeof e=="string"&&t.value.test(e)}),ht=Ce(function(t,e,r){var s=r.compare;return Sr(t.value,e,s)}),Si=function(t,e,r){return!ht(t,e,r)},Oi=function(t,e,r){var s=r.compare,i=(0,r.get)(e,t.field);return Array.isArray(i)&&t.value.every(function(n){return Sr(i,n,s)})},Ii=function(t,e,r){var s=r.interpret,i=(0,r.get)(e,t.field);return Array.isArray(i)&&i.some(function(n){return s(t.value,n)})},Zn=function(t,e){return t.value.call(e)},Cr=Ir({},Object.freeze({__proto__:null,or:pi,nor:Vn,and:hi,not:Jn,eq:kr,ne:yi,lte:mi,lt:gi,gt:vi,gte:bi,exists:xi,mod:Gn,size:wi,regex:Ai,within:ht,nin:Si,all:Oi,elemMatch:Ii,where:Zn}),{in:ht});di(Cr);function Ge(){return(Ge=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t}).apply(this,arguments)}function Qr(t){return t instanceof Date?t.getTime():t&&typeof t.toJSON=="function"?t.toJSON():t}var ea=function(t,e){return fi(Qr(t),Qr(e))};function $r(t,e,r){var s=new Qn(t),i=di(e,Ge({compare:ea},r));if(r&&r.forPrimitives){var n={field:st},a=s.parse;s.setParse(function(o){return a(o,n)})}return Ln(s.parse,i)}$r(Zt,Cr);$r(["$and","$or"].reduce(function(t,e){return t[e]=Ge({},t[e],{type:"field"}),t},Ge({},Zt,{$nor:Ge({},Zt.$nor,{type:"field",parse:Ws.compound})})),Cr,{forPrimitives:!0});function Xr(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function ki(t,e,r){return e&&Xr(t.prototype,e),r&&Xr(t,r),t}function er(){return er=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},er.apply(this,arguments)}function Tr(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,tr(t,e)}function tr(t,e){return tr=Object.setPrototypeOf||function(s,i){return s.__proto__=i,s},tr(t,e)}function ta(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rr(t){return Array.isArray(t)?t:[t]}var Ci=Object.hasOwn||Object.prototype.hasOwnProperty.call.bind(Object.prototype.hasOwnProperty),De="__caslSubjectType__";function py(t,e){if(e){if(!Ci(e,De))Object.defineProperty(e,De,{value:t});else if(t!==e[De])throw new Error("Trying to cast object to subject type "+t+" but previously it was casted to "+e[De])}return e}var sr=function(e){var r=typeof e;return r==="string"||r==="function"},$i=function(e){return e.modelName||e.name},ra=function(e){return typeof e=="string"?e:$i(e)};function sa(t){return Ci(t,De)?t[De]:$i(t.constructor)}function Wr(t,e,r){for(var s=r;s<e.length;s++)t.push(e[s])}function Vr(t,e){if(!t||!t.length)return e||[];if(!e||!e.length)return t||[];for(var r=0,s=0,i=[];r<t.length&&s<e.length;)t[r].priority<e[s].priority?(i.push(t[r]),r++):(i.push(e[s]),s++);return Wr(i,t,r),Wr(i,e,s),i}function nt(t,e,r){var s=t.get(e);return s||(s=r(),t.set(e,s)),s}var ia=function(e){return e};function na(t,e){if(Array.isArray(t.fields)&&!t.fields.length)throw new Error("`rawRule.fields` cannot be an empty array. https://bit.ly/390miLa");if(t.fields&&!e.fieldMatcher)throw new Error('You need to pass "fieldMatcher" option in order to restrict access by fields');if(t.conditions&&!e.conditionsMatcher)throw new Error('You need to pass "conditionsMatcher" option in order to restrict access by conditions')}var aa=function(){function t(r,s,i){i===void 0&&(i=0),na(r,s),this.action=s.resolveAction(r.action),this.subject=r.subject,this.inverted=!!r.inverted,this.conditions=r.conditions,this.reason=r.reason,this.fields=r.fields?rr(r.fields):void 0,this.priority=i,this.t=s}var e=t.prototype;return e.i=function(){return this.conditions&&!this.u&&(this.u=this.t.conditionsMatcher(this.conditions)),this.u},e.matchesConditions=function(s){if(!this.conditions)return!0;if(!s||sr(s))return!this.inverted;var i=this.i();return i(s)},e.matchesField=function(s){return this.fields?s?(this.fields&&!this.o&&(this.o=this.t.fieldMatcher(this.fields)),this.o(s)):!this.inverted:!0},ki(t,[{key:"ast",get:function(){var s=this.i();return s?s.ast:void 0}}]),t}();function oa(t,e){var r={value:t,prev:e,next:null};return e&&(e.next=r),r}function ca(t){t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next),t.next=t.prev=null}var la=function(e){return{value:e.value,prev:e.prev,next:e.next}},Jr=function(){return{rules:[],merged:!1}},Gr=function(){return new Map},ua=function(e,r){!e.h&&r.fields&&(e.h=!0)},fa=function(){function t(r,s){r===void 0&&(r=[]),s===void 0&&(s={}),this.h=!1,this.v=new Map,this.l={conditionsMatcher:s.conditionsMatcher,fieldMatcher:s.fieldMatcher,resolveAction:s.resolveAction||ia},this.p=s.anyAction||"manage",this.g=s.anySubjectType||"all",this.A=s.detectSubjectType||sa,this.j=r,this.$=this.M(r)}var e=t.prototype;return e.detectSubjectType=function(s){return sr(s)?s:s?this.A(s):this.g},e.update=function(s){var i={rules:s,ability:this,target:this};return this.m("update",i),this.j=s,this.$=this.M(s),this.m("updated",i),this},e.M=function(s){for(var i=new Map,n=s.length-1;n>=0;n--){var a=s.length-n-1,o=new aa(s[n],this.l,a),c=rr(o.action),l=rr(o.subject||this.g);ua(this,o);for(var u=0;u<l.length;u++)for(var y=nt(i,l[u],Gr),g=0;g<c.length;g++)nt(y,c[g],Jr).rules.push(o)}return i},e.possibleRulesFor=function(s,i){if(i===void 0&&(i=this.g),!sr(i))throw new Error('"possibleRulesFor" accepts only subject types (i.e., string or class) as the 2nd parameter');var n=nt(this.$,i,Gr),a=nt(n,s,Jr);if(a.merged)return a.rules;var o=s!==this.p&&n.has(this.p)?n.get(this.p).rules:void 0,c=Vr(a.rules,o);return i!==this.g&&(c=Vr(c,this.possibleRulesFor(s,this.g))),a.rules=c,a.merged=!0,c},e.rulesFor=function(s,i,n){var a=this.possibleRulesFor(s,i);if(n&&typeof n!="string")throw new Error("The 3rd, `field` parameter is expected to be a string. See https://stalniy.github.io/casl/en/api/casl-ability#can-of-pure-ability for details");return this.h?a.filter(function(o){return o.matchesField(n)}):a},e.on=function(s,i){var n=this,a=this.v.get(s)||null,o=oa(i,a);return this.v.set(s,o),function(){var c=n.v.get(s);!o.next&&!o.prev&&c===o?n.v.delete(s):o===c&&n.v.set(s,o.prev),ca(o)}},e.m=function(s,i){for(var n=this.v.get(s)||null;n!==null;){var a=n.prev?la(n.prev):null;n.value(i),n=a}},ki(t,[{key:"rules",get:function(){return this.j}}]),t}(),da=function(t){Tr(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.can=function(i,n,a){var o=this.relevantRuleFor(i,n,a);return!!o&&!o.inverted},r.relevantRuleFor=function(i,n,a){for(var o=this.detectSubjectType(n),c=this.rulesFor(i,o,a),l=0,u=c.length;l<u;l++)if(c[l].matchesConditions(n))return c[l];return null},r.cannot=function(i,n,a){return!this.can(i,n,a)},e}(fa),pa={$eq:Ar,$ne:oi,$lt:ni,$lte:ai,$gt:Ot,$gte:wr,$in:St,$nin:ri,$all:si,$size:ti,$regex:ci,$options:li,$elemMatch:ei,$exists:ii},ha={eq:kr,ne:yi,lt:gi,lte:mi,gt:vi,gte:bi,in:ht,nin:Si,all:Oi,size:wi,regex:Ai,elemMatch:Ii,exists:xi,and:hi},ya=$r(pa,ha),ma=/[-/\\^$+?.()|[\]{}]/g,ga=/\.?\*+\.?/g,va=/\*+/,ba=/\./g;function xa(t,e,r){var s=r[0]==="*"||t[0]==="."&&t[t.length-1]==="."?"+":"*",i=t.indexOf("**")===-1?"[^.]":".",n=t.replace(ba,"\\$&").replace(va,i+s);return e+t.length===r.length?"(?:"+n+")?":n}function wa(t,e,r){return t==="."&&(r[e-1]==="*"||r[e+1]==="*")?t:"\\"+t}function Aa(t){var e=t.map(function(s){return s.replace(ma,wa).replace(ga,xa)}),r=e.length>1?"(?:"+e.join("|")+")":e[0];return new RegExp("^"+r+"$")}var Sa=function(e){var r;return function(s){return typeof r=="undefined"&&(r=e.every(function(i){return i.indexOf("*")===-1})?null:Aa(e)),r===null?e.indexOf(s)!==-1:r.test(s)}},Oa=function(t){Tr(e,t);function e(r,s){return r===void 0&&(r=[]),s===void 0&&(s={}),t.call(this,r,er({conditionsMatcher:ya,fieldMatcher:Sa},s))||this}return e}(da),Ia=function(e){return'Cannot execute "'+e.action+'" on "'+e.subjectType+'"'},Ti=function(e){this.message=e};Ti.prototype=Object.create(Error.prototype);var ka=function(t){Tr(e,t),e.setDefaultMessage=function(i){this._=typeof i=="string"?function(){return i}:i},e.from=function(i){return new this(i)};function e(s){var i;return i=t.call(this,"")||this,i.ability=s,typeof Error.captureStackTrace=="function"&&(i.name="ForbiddenError",Error.captureStackTrace(ta(i),i.constructor)),i}var r=e.prototype;return r.setMessage=function(i){return this.message=i,this},r.throwUnlessCan=function(i,n,a){var o=this.unlessCan(i,n,a);if(o)throw o},r.unlessCan=function(i,n,a){var o=this.ability.relevantRuleFor(i,n,a);if(!(o&&!o.inverted)){this.action=i,this.subject=n,this.subjectType=ra(this.ability.detectSubjectType(n)),this.field=a;var c=o?o.reason:"";return this.message=this.message||c||this.constructor._(this),this}},e}(Ti);ka._=Ia;Object.freeze({__proto__:null});var ir=[{action:"read",subject:"auth"},{action:"read",subject:"open"}];const Ca=new Oa(ir);var Ee=Ca;const Re=ee("dataStore",{state:()=>({queryBy:"office",selectedOffice:null,selectedProject:null,selfCheckIns:{isLoading:!1},profiles:{isLoading:!1},scheduledInterviews:{isLoading:!1},inProcessInterviews:{isLoading:!1},inProcess:{isLoading:!1},pending:{isLoading:!1},deployments:{isLoading:!1},openRequest:{isLoading:!1},pendingRequest:{isLoading:!1},closedRequest:{isLoading:!1},openClassifications:{isLoading:!1},pendingClassifications:{isLoading:!1},closedClassifications:{isLoading:!1},nameRequest:{isLoading:!1},projects:{isLoading:!1},pendingProjects:{isLoading:!1},releases:{isLoading:!1},jobPost:{isLoading:!1},onlineApplications:{isLoading:!1},requestedTimeStamps:{},forms:{isLoading:!1}}),getters:{getSelfCheckIns:t=>e=>{if(e)return t.selfCheckIns[e]?t.selfCheckIns[e]:[];{let r=[];return Object.keys(t.selfCheckIns).forEach(s=>{s!=="isLoading"&&(r=r.concat(t.selfCheckIns[s]))}),r}},getProfiles:t=>e=>{if(e)return t.profiles[e]?t.profiles[e]:[];{let r=[];return Object.keys(t.profiles).forEach(s=>{s!=="isLoading"&&(r=r.concat(t.profiles[s]))}),r}},getScheduledInterviews:t=>e=>{if(e)return t.scheduledInterviews[e]?t.scheduledInterviews[e]:[];{let r=[];return Object.keys(t.scheduledInterviews).forEach(s=>{s!=="isLoading"&&(r=r.concat(t.scheduledInterviews[s]))}),r}},getInProcessInterviews:t=>e=>{if(e)return t.inProcessInterviews[e]?t.inProcessInterviews[e]:[];{let r=[];return Object.keys(t.inProcessInterviews).forEach(s=>{s!=="isLoading"&&(r=r.concat(t.inProcessInterviews[s]))}),r}},getInProcess:t=>e=>{if(e)return t.inProcess[e]?t.inProcess[e]:[];{let r=[];return Object.keys(t.inProcess).forEach(s=>{s!=="isLoading"&&(r=r.concat(t.inProcess[s]))}),r}},getPending:t=>e=>{if(e)return t.pending[e]?t.pending[e]:[];{let r=[];return Object.keys(t.pending).forEach(s=>{s!=="isLoading"&&(r=r.concat(t.pending[s]))}),r}},getDeployments:t=>e=>{if(e)return t.deployments[e]?t.deployments[e]:[];{let r=[];return Object.keys(t.deployments).forEach(s=>{s!=="isLoading"&&(r=r.concat(t.deployments[s]))}),r}},getProjects:t=>({selectedId:e,can:r,userType:s})=>{if(!e&&!r){let i=[];return Object.keys(t.projects).forEach(n=>{n!=="isLoading"&&(i=i.concat(t.projects[n]))}),i}else if(!e&&r&&s==="QuickBase User"){const{userOffices:i}=T();let n=[];return i(r).forEach(a=>{n=n.concat(t.projects[a[8]])}),n}else if(e&&r&&s==="QuickBase User"){const{getOffice:i}=T(),n=i(e);return r==="read"&&n&&n[39]!==!0?[]:(r==="create"||r==="update")&&n&&n[40]!==!0?[]:r==="manage"&&n&&n[41]!==!0?[]:t.projects[e]?t.projects[e]:[]}else if(!e&&r&&s==="Project User"){let i=[];return Object.keys(t.projects).forEach(n=>{n!=="isLoading"&&(i=i.concat(t.projects[n]))}),i}else return t.projects[e]?t.projects[e]:[]},getPendingProjects:t=>e=>{if(e)return t.pendingProjects[e]?t.pendingProjects[e]:[];{let r=[];return Object.keys(t.pendingProjects).forEach(s=>{s!=="isLoading"&&(r=r.concat(t.pendingProjects[s]))}),r}},getRequestedTimeStamps(t){return t.requestedTimeStamps},getSelectedOffice(t){return t.selectedOffice},getSelectedProject(t){return t.selectedProject},getReleases:t=>e=>{if(e)return t.releases[e]?t.releases[e]:[];{let r=[];return Object.keys(t.releases).forEach(s=>{s!=="isLoading"&&(r=r.concat(t.releases[s]))}),r}},getJobPost:t=>e=>{if(e)return t.jobPost[e]?t.jobPost[e]:[];{let r=[];return Object.keys(t.jobPost).forEach(s=>{s!=="isLoading"&&(r=r.concat(t.jobPost[s]))}),r}},getOnlineApplications:t=>e=>{if(e)return t.onlineApplications[e]?t.onlineApplications[e]:[];{let r=[];return Object.keys(t.onlineApplications).forEach(s=>{s!=="isLoading"&&(r=r.concat(t.onlineApplications[s]))}),r}},getLoadingState:t=>e=>t[`${e}`].isLoading||!1,getForms:t=>e=>{if(e)return t.forms[e]?t.forms[e]:[];{let r=[];return Object.keys(t.forms).forEach(s=>{s!=="isLoading"&&(r=r.concat(t.forms[s]))}),r}}},actions:{setQueryBy(t){this.queryBy=t},setSelectedOffice(t,e){this.selectedOffice=t},setSelectedProject(t,e){this.selectedProject=t},setTimeStamp({name:t,timeStamp:e,selectedId:r},s){if(this.requestedTimeStamps[r]?this.requestedTimeStamps[r][t]=e:this.requestedTimeStamps[r]={[t]:e},s){const i=JSON.parse(JSON.stringify(this.requestedTimeStamps));Q.setItem("requestedTimeStamps",i)}},setTimeStampState(t){this.requestedTimeStamps=t},async fetchSelfCheckIns(t){this.selfCheckIns.isLoading=!0;const e=this.getRequestedTimeStamps[t.selectedId]||{};let r=!0;const s=[{9:{value:t.selectedId},7:{value:"Self Check-Ins"}}];if(e.selfCheckIns&&(e.selfCheckIns.isBefore(p().subtract(1,"minute"))?r=!0:r=t.refresh?t.refresh:!1),r){this.setTimeStamp({selectedId:t.selectedId,name:"selfCheckIns",timeStamp:p()},!0);const{data:i}=await A.fetchFromRecruitingApp({fields:s});return this.setSelfCheckIns({selectedId:t.selectedId,data:i},!0),this.selfCheckIns.isLoading=!1,{data:i}}else return this.selfCheckIns.isLoading=!1,{data:[]}},async fetchAllSelfCheckIns(t){const{userOffices:e}=T(),r=[];return e(t?t.can:null).forEach(i=>{let n=this.fetchSelfCheckIns(B(F({},t),{selectedId:i[8]}));r.push(n)}),await Promise.allSettled(r)},setSelfCheckIns({selectedId:t,data:e},r){this.selfCheckIns[t]=e,r&&Q.setItem(`selfCheckIns_${t}`,e)},async fetchProfiles(t){this.profiles.isLoading=!0;const e=this.getRequestedTimeStamps[t.selectedId]||{};let r=!0;const s=[{9:{value:t.selectedId},7:{value:"Employees"}}];if(e.profiles&&(e.profiles.isBefore(p().subtract(1,"minute"))?r=!0:r=t.refresh?t.refresh:!1),r){this.setTimeStamp({selectedId:t.selectedId,name:"profiles",timeStamp:p()},!0);const{data:i}=await A.fetchFromHiringApp({fields:s});return this.setProfiles({selectedId:t.selectedId,data:i},!0),this.profiles.isLoading=!1,{data:i}}else return this.profiles.isLoading=!1,{data:[]}},async fetchAllProfiles(t){const{userOffices:e}=T(),r=[];return e(t?t.can:null).forEach(i=>{let n=this.fetchProfiles(B(F({},t),{selectedId:i[8]}));r.push(n)}),await Promise.allSettled(r)},setProfiles({selectedId:t,data:e},r){this.profiles[t]=e,r&&Q.setItem(`profiles_${t}`,e)},async fetchScheduledInterviews(t){this.scheduledInterviews.isLoading=!0;const e=this.getRequestedTimeStamps[t.selectedId]||{};let r=!0;const s=[{9:{value:t.selectedId},7:{value:"Scheduled Interviews"}}];if(e.scheduledInterviews&&(e.scheduledInterviews.isBefore(p().subtract(1,"minute"))?r=!0:r=t.refresh?t.refresh:!1),r){this.setTimeStamp({selectedId:t.selectedId,name:"scheduledInterviews",timeStamp:p()},!0);const{data:i}=await A.fetchFromHiringApp({fields:s});return this.setScheduledInterviews({selectedId:t.selectedId,data:i},!0),this.scheduledInterviews.isLoading=!1,{data:i}}else return this.scheduledInterviews.isLoading=!1,{data:[]}},async fetchAllScheduledInterviews(t){const{userOffices:e}=T(),r=[];return e(t?t.can:null).forEach(i=>{let n=this.fetchScheduledInterviews(B(F({},t),{selectedId:i[8]}));r.push(n)}),await Promise.allSettled(r)},setScheduledInterviews({selectedId:t,data:e},r){this.scheduledInterviews[t]=e,r&&Q.setItem(`interviews_${t}`,e)},async fetchInProcessInterviews(t){this.inProcessInterviews.isLoading=!0;const e=this.getRequestedTimeStamps[t.selectedId]||{};let r=!0;const s=[{9:{value:t.selectedId},7:{value:"In Process Interviews"}}];if(e.inProcessInterviews&&(e.inProcessInterviews.isBefore(p().subtract(1,"minute"))?r=!0:r=t.refresh?t.refresh:!1),r){this.setTimeStamp({selectedId:t.selectedId,name:"inProcessInterviews",timeStamp:p()},!0);const{data:i}=await A.fetchFromHiringApp({fields:s});return this.setInProcessInterviews({selectedId:t.selectedId,data:i},!0),this.inProcessInterviews.isLoading=!1,{data:i}}else return this.inProcessInterviews.isLoading=!1,{data:[]}},async fetchAllInProcessInterviews(t){const{userOffices:e}=T(),r=[];return e(t?t.can:null).forEach(i=>{let n=this.fetchInProcessInterviews(B(F({},t),{selectedId:i[8]}));r.push(n)}),await Promise.allSettled(r)},setInProcessInterviews({selectedId:t,data:e},r){this.inProcessInterviews[t]=e,r&&Q.setItem(`interviews_${t}`,e)},async fetchInProcess(t){this.inProcess.isLoading=!0;const e=this.getRequestedTimeStamps[t.selectedId]||{};let r=!0;const s=[{9:{value:t.selectedId},7:{value:"In Processes"}}];if(e.inProcess&&(e.inProcess.isBefore(p().subtract(1,"minute"))?r=!0:r=t.refresh?t.refresh:!1),r){this.setTimeStamp({selectedId:t.selectedId,name:"inProcess",timeStamp:p()},!0);const{data:i}=await A.fetchFromHiringApp({fields:s});return this.setInProcess({selectedId:t.selectedId,data:i},!0),this.inProcess.isLoading=!1,{data:i}}else return this.inProcess.isLoading=!1,{data:[]}},async fetchAllInProcess(t){const{userOffices:e}=T(),r=[];return e(t?t.can:null).forEach(i=>{let n=this.fetchInProcess(B(F({},t),{selectedId:i[8]}));r.push(n)}),await Promise.allSettled(r)},setInProcess({selectedId:t,data:e},r){this.inProcess[t]=e,r&&Q.setItem(`inProcess_${t}`,e)},async fetchPending(t){this.pending.isLoading=!0;const e=this.getRequestedTimeStamps[t.selectedId]||{};let r=!0;const s=[{9:{value:t.selectedId},7:{value:"Dispatches"}}];if(e.pending&&(e.pending.isBefore(p().subtract(1,"minute"))?r=!0:r=t.refresh?t.refresh:!1),r){this.setTimeStamp({selectedId:t.selectedId,name:"pending",timeStamp:p()},!0);const{data:i}=await A.fetchFromHiringApp({fields:s});return this.setPending({selectedId:t.selectedId,data:i},!0),this.pending.isLoading=!1,{data:i}}else return this.pending.isLoading=!1,{data:[]}},async fetchAllPending(t){const{userOffices:e}=T(),r=[];return e(t?t.can:null).forEach(i=>{let n=this.fetchPending(B(F({},t),{selectedId:i[8]}));r.push(n)}),await Promise.allSettled(r)},setPending({selectedId:t,data:e},r){this.pending[t]=e,r&&Q.setItem(`pending_${t}`,e)},async fetchOpenRequest(t){this.openRequest.isLoading=!0;const e=this.getRequestedTimeStamps[t.selectedId]||{};let r=!0;const s=[{9:{value:t.selectedId},7:{value:"Open Request"}}];if(e.openRequest&&(e.openRequest.isBefore(p().subtract(1,"minute"))?r=!0:r=t.refresh?t.refresh:!1),r){this.setTimeStamp({selectedId:t.selectedId,name:"openRequest",timeStamp:p()},!0);const{data:i}=await A.fetchFromProjectsApp({fields:s});return this.setOpenRequest({selectedId:t.selectedId,data:i},!0),this.openRequest.isLoading=!1,{data:i}}else return this.openRequest.isLoading=!1,{data:[]}},async fetchAllOpenRequest(t){const{userOffices:e}=T(),r=[];return e(t?t.can:null).forEach(i=>{let n=this.fetchOpenRequest(B(F({},t),{selectedId:i[8]}));r.push(n)}),await Promise.allSettled(r)},setOpenRequest({selectedId:t,data:e},r){this.openRequest[t]=e,r&&Q.setItem(`openRequest_${t}`,e)},async fetchPendingRequest(t){this.pendingRequest.isLoading=!0;const e=this.getRequestedTimeStamps[t.selectedId]||{};let r=!0;const s=[{9:{value:t.selectedId},7:{value:"Pending Request"}}];if(e.pendingRequest&&(e.pendingRequest.isBefore(p().subtract(1,"minute"))?r=!0:r=t.refresh?t.refresh:!1),r){this.setTimeStamp({selectedId:t.selectedId,name:"pendingRequest",timeStamp:p()},!0);const{data:i}=await A.fetchFromProjectsApp({fields:s});return this.setPendingRequest({selectedId:t.selectedId,data:i},!0),this.pendingRequest.isLoading=!1,{data:i}}else return this.pendingRequest.isLoading=!1,{data:[]}},async fetchAllPendingRequest(t){const{userOffices:e}=T(),r=[];return e(t?t.can:null).forEach(i=>{let n=this.fetchPendingRequest(B(F({},t),{selectedId:i[8]}));r.push(n)}),await Promise.allSettled(r)},setPendingRequest({selectedId:t,data:e},r){this.pendingRequest[t]=e,r&&Q.setItem(`pendingRequest_${t}`,e)},async fetchProjects(t){const{getOffice:e,getUserType:r}=T();this.projects.isLoading=!0;const s=this.getRequestedTimeStamps[t.selectedId]||{};let i=!0,n=1;if(t&&t.can&&r==="QuickBase User"){const o=e(t.selectedId);if(t.can==="read"&&o&&o[39]!==!0)return{data:[]};if((t.can==="create"||t.can==="update")&&o&&o[40]!==!0)return{data:[]};if(t.can==="manage"&&o&&o[41]!==!0)return{data:[]}}t.extendTime&&(n=t.extendTime);const a=[];if(r==="QuickBase User")a.push({9:{value:t.selectedId},7:{value:"Projects"}});else if(r==="Project User"){let o="";t.projects&&(o+=t.projects.map((c,l)=>`{'3'.EX.'${c}'}OR`).join("")),t.facilities&&(o+=t.facilities.map((c,l)=>`{'8'.EX.'${c}'}OR`).join("")),a.push({9:{value:t.selectedId},7:{value:"Projects"},8:{value:`${o?"("+o+")":""}AND{'77'.EX.'17'}AND{'21'.EX.'Complete'}`}})}if(s.projects&&(s.projects.isBefore(p().subtract(n,"minute"))?i=!0:i=t.refresh?t.refresh:!1),i){this.setTimeStamp({selectedId:t.selectedId,name:"projects",timeStamp:p()},!0);const{data:o}=await A.fetchFromProjectsApp({fields:a});return this.setProjects({selectedId:t.selectedId,data:o},!0),this.projects.isLoading=!1,{data:o}}else return this.projects.isLoading=!1,{data:[]}},async fetchAllProjects(t){const{userOffices:e,userProjects:r,getUser:s,getUserType:i,userFacilities:n}=T();if(i==="Project User"){const a=[],o=[],c=[];return r(t?t.can:null).forEach(u=>{a.push(u[9])}),n(t?t.can:null).forEach(u=>{o.push(u[31])}),(a.length>0||o.length>0)&&c.push(this.fetchProjects(B(F({},t),{selectedId:s[3],projects:a,facilities:o}))),await Promise.allSettled(c)}else if(i==="QuickBase User"){const a=[];return e(t?t.can:null).forEach(c=>{let l=this.fetchProjects(B(F({},t),{selectedId:c[8]}));a.push(l)}),await Promise.allSettled(a)}},setProjects({selectedId:t,data:e},r){t&&e&&(this.projects[t]=e),r&&t&&Q.setItem(`projects_${t}`,e)},async fetchPendingProjects(t){this.pendingProjects.isLoading=!0;const e=this.getRequestedTimeStamps[t.selectedId]||{};let r=!0;const s=[{9:{value:t.selectedId},7:{value:"Pending Projects"}}];if(e.pendingProjects&&(e.pendingProjects.isBefore(p().subtract(1,"minute"))?r=!0:r=t.refresh?t.refresh:!1),r){this.setTimeStamp({selectedId:t.selectedId,name:"pendingProjects",timeStamp:p()},!0);const{data:i}=await A.fetchFromProjectsApp({fields:s});return this.setPendingProjects({selectedId:t.selectedId,data:i},!0),this.pendingProjects.isLoading=!1,{data:i}}else return this.pendingProjects.isLoading=!1,{data:[]}},async fetchAllPendingProjects(t){const{userOffices:e}=T(),r=[];return e(t?t.can:null).forEach(i=>{let n=this.fetchPendingProjects(B(F({},t),{selectedId:i[8]}));r.push(n)}),await Promise.allSettled(r)},setPendingProjects({selectedId:t,data:e},r){this.pendingProjects[t]=e,r&&Q.setItem(`pendingProjects_${t}`,e)},async fetchDeployments(t){this.deployments.isLoading=!0;const e=this.getRequestedTimeStamps[t.selectedId]||{};let r=!0;const s=[{9:{value:t.selectedId},7:{value:"Deployments"}}];if(e.deployments&&(e.deployments.isBefore(p().subtract(1,"minute"))?r=!0:r=t.refresh?t.refresh:!1),r){this.setTimeStamp({selectedId:t.selectedId,name:"deployments",timeStamp:p()},!0);const{data:i}=await A.fetchFromHiringApp({fields:s});return this.setDeployments({selectedId:t.selectedId,data:i},!0),this.deployments.isLoading=!1,{data:i}}else return this.deployments.isLoading=!1,{data:[]}},async fetchAllDeployments(t){const{userOffices:e}=T(),r=[];return e(t?t.can:null).forEach(i=>{let n=this.fetchDeployments(B(F({},t),{selectedId:i[8]}));r.push(n)}),await Promise.allSettled(r)},setDeployments({selectedId:t,data:e},r){this.deployments[t]=e,r&&Q.setItem(`deployments_${t}`,e)},async fetchReleases(t){this.releases.isLoading=!0;const e=this.getRequestedTimeStamps[t.selectedId]||{};let r=!0;const s=[{9:{value:t.selectedId},7:{value:"Releases"}}];if(e.releases&&(e.releases.isBefore(p().subtract(1,"minute"))?r=!0:r=t.refresh?t.refresh:!1),r){this.setTimeStamp({selectedId:t.selectedId,name:"releases",timeStamp:p()},!0);const{data:i}=await A.fetchFromHiringApp({fields:s});return this.setReleases({selectedId:t.selectedId,data:i},!0),this.releases.isLoading=!1,{data:i}}else return this.releases.isLoading=!1,{data:[]}},async fetchAllReleases(t){const{userOffices:e}=T(),r=[];return e(t?t.can:null).forEach(i=>{let n=this.fetchReleases(B(F({},t),{selectedId:i[8]}));r.push(n)}),await Promise.allSettled(r)},setReleases({selectedId:t,data:e},r){this.releases[t]=e,r&&Q.setItem(`releases_${t}`,e)},async fetchJobPost(t){this.jobPost.isLoading=!0;const e=this.getRequestedTimeStamps[t.selectedId]||{};let r=!0;const s=[{9:{value:t.selectedId},7:{value:"Job Post"}}];if(e.jobPost&&(e.jobPost.isBefore(p().subtract(1,"minute"))?r=!0:r=t.refresh?t.refresh:!1),r){this.setTimeStamp({selectedId:t.selectedId,name:"jobPost",timeStamp:p()},!0);const{data:i}=await A.fetchFromRecruitingApp({fields:s});return this.setJobPost({selectedId:t.selectedId,data:i},!0),this.jobPost.isLoading=!1,{data:i}}else return this.jobPost.isLoading=!1,{data:[]}},async fetchAllJobPost(t){const{userOffices:e}=T(),r=[];return e(t?t.can:null).forEach(i=>{let n=this.fetchJobPost(B(F({},t),{selectedId:i[8]}));r.push(n)}),await Promise.allSettled(r)},setJobPost({selectedId:t,data:e},r){this.jobPost[t]=e,r&&Q.setItem(`jobPost_${t}`,e)},async fetchOnlineApplications(t){this.onlineApplications.isLoading=!0;const e=this.getRequestedTimeStamps[t.selectedId]||{};let r=!0;const s=[{9:{value:t.selectedId},7:{value:"Online Applications 30 Days"}}];if(e.onlineApplications&&(e.onlineApplications.isBefore(p().subtract(1,"minute"))?r=!0:r=t.refresh?t.refresh:!1),r){this.setTimeStamp({selectedId:t.selectedId,name:"onlineApplications",timeStamp:p()},!0);const{data:i}=await A.fetchFromRecruitingApp({fields:s});return this.setOnlineApplications({selectedId:t.selectedId,data:i},!0),this.onlineApplications.isLoading=!1,{data:i}}else return this.onlineApplications.isLoading=!1,{data:[]}},async fetchAllOnlineApplications(t){const{userOffices:e}=T(),r=[];return e(t?t.can:null).forEach(i=>{let n=this.fetchOnlineApplications(B(F({},t),{selectedId:i[8]}));r.push(n)}),await Promise.allSettled(r)},setOnlineApplications({selectedId:t,data:e},r){this.onlineApplications[t]=e,r&&Q.setItem(`onlineApplications_${t}`,e)},async fetchForms(t){this.forms.isLoading=!0;const e=this.getRequestedTimeStamps[t.selectedId]||{};let r=!0;const s=[{9:{value:t.selectedId},7:{value:"Forms"}}];if(e.forms&&(e.forms.isBefore(p().subtract(1,"minute"))?r=!0:r=t.refresh?t.refresh:!1),r){this.setTimeStamp({selectedId:t.selectedId,name:"forms",timeStamp:p()},!0);const{data:i}=await A.fetchFromStructureApp({fields:s});return this.setForms({selectedId:t.selectedId,data:i},!0),this.forms.isLoading=!1,{data:i}}else return this.forms.isLoading=!1,{data:[]}},async fetchAllForms(t){const{userOffices:e}=T(),r=[];return e(t?t.can:null).forEach(i=>{let n=this.fetchForms(B(F({},t),{selectedId:i[8]}));r.push(n)}),await Promise.allSettled(r)},setForms({selectedId:t,data:e},r){this.forms[t]=e,r&&Q.setItem(`forms_${t}`,e)}}}),T=ee("user",{state:()=>({user:{},access:[],permissions:[],notifications:[],feathersNotification:null,strapiUser:{}}),getters:{getUser:t=>t.user,getUserType:t=>t.user[32],userData:t=>t.user,fullName:t=>`${t.user[35]}${t.user[36]!==""?` ${t.user[36]} `:" "}${t.user[37]}`,userLoggedIn:t=>!!t.user[3],userAccess:t=>t.access,employeeLinkRequired:t=>t.user[84]===!0&&(t.user[85]===!0||t.user[82]===!1||t.user[82]===!0&&(t.user[80]===""||!t.user[80])),verifyRequired:t=>(t.user[32]==="Candidate"||t.user[32]==="Employee"||t.user[32]==="Project User")&&!t.user.verified,phoneNumberRequired:t=>t.user[111]||t.user[8]==="",emailRequired:t=>t.user[112]||t.user[6]==="",passwordRequired:t=>t.user[17]||t.user[7]==="",employeeLinked:t=>t.user[82],employeeProfileRID:t=>t.user[80],createEmployeeProfile:t=>t.user[85],userPermissions:t=>t.permissions,primaryOffice:t=>t.access.find(e=>e[15]===!0&&e[7]==="Office")||null,userOffices:t=>e=>t.access.filter(r=>e?e==="read"?r[7]==="Office"&&(r[39]===!0||r[41]===!0):e==="create"||e==="update"?r[7]==="Office"&&(r[40]===!0||r[41]===!0):e==="manage"?r[7]==="Office"&&r[41]===!0:!1:r[7]==="Office"),userOfficesRead:t=>t.access.filter(e=>e[7]==="Office"&&e[39]===!0),userOfficesCreate:t=>t.access.filter(e=>e[7]==="Office"&&e[40]===!0),userOfficesManage:t=>t.access.filter(e=>e[7]==="Office"&&e[41]===!0),primaryProject:t=>t.access.find(e=>e[15]===!0&&e[7]==="Project")||null,userProjects:t=>e=>t.access.filter(r=>e?e==="read"?r[7]==="Project"&&(r[39]===!0||r[41]===!0):e==="create"||e==="update"?r[7]==="Project"&&(r[40]===!0||r[41]===!0):e==="manage"?r[7]==="Project"&&r[41]===!0:!1:r[7]==="Project"),userFacilities:t=>e=>t.access.filter(r=>e?e==="read"?r[7]==="Facility"&&(r[39]===!0||r[41]===!0):e==="create"||e==="update"?r[7]==="Facility"&&(r[40]===!0||r[41]===!0):e==="manage"?r[7]==="Facility"&&r[41]===!0:!1:r[7]==="Project"),getOffice:t=>e=>e?t.access.find(r=>r[7]==="Office"&&r[8]===e):null},actions:{async fetchUser(t){const e=`{'10'.EX.'Active'}${t.rid?`AND{'3'.EX.'${t.rid}'}`:""}${t.email?`AND{'6'.EX.'${t.email}'}`:""}${t.phoneNumber?`AND{'8'.EX.'${t.phoneNumber}'}`:""}${t.userType?`AND{'32'.EX.'${t.userType}'}`:""}`,r=[{7:{value:"User Clean"},8:{value:e},9:{value:t.rid?t.rid:1},14:{value:76}}],s=await A.fetchFromStructureApp({fields:r}),{user:i,access:n,permissions:a}=s.data;return this.setUser(i,!0),this.setAccess(n,!0),this.setPermissions(a,!0),s},async updateUserData({fields:t}){if(!t)throw"No Fields Provided";t[3]===void 0&&Object.assign(t,{3:{value:this.userData[3]}});const{data:e,metadata:r}=await A.upsertRecordsXML({to:"br4pxrbs6",fieldsToReturn:[3,76],data:[t],formatObject:76});if(r.lineErrors)throw{lineErrors:r.lineErrors[1],error:r.lineErrors};const s=e[0][76],i=Object.assign({},s);return delete i.access,delete i.permissions,this.setUser(i,!0),s},setUser(t,e){const{setQueryBy:r}=Re();this.user=t,t[32]==="QuickBase User"?r("office"):t[32]==="Project User"&&r("project"),e&&x.setItem(k.storageUserKeyName,t)},setStrapiUser(t,e){this.strapiUser=t,e&&x.setItem(k.storageStrapiUserKeyName,t)},setPhoneNumberVerified(t){this.user[50]=t},setVerified(t){this.user.verified=t},setPhoneNumber(t){this.user[8]=t,this.user[111]=!0},setEmail(t){this.user[6]=t,this.user[112]=!0},setIdentityVerified(t){typeof t=="number"?this.user[80]=t:this.user[85]=t},setAccess(t,e){this.access=t,e&&x.setItem(k.storageAccessKeyName,t)},setPermissions(t,e){for(let s=0;s<t.length;s++)if(t[s].conditions){if(t[s].conditions.deny&&!Array.isArray(t[s].conditions.deny)){let i=t[s].conditions.deny.split(",");i.forEach(n=>{n=n.trim()}),t[s].conditions.deny=i;continue}if(t[s].conditions.accept&&!Array.isArray(t[s].conditions.accept)){let i=t[s].conditions.accept.split(",");i.forEach(n=>{n=n.trim()}),t[s].conditions.accept=i;continue}}const r=t.concat(ir);Ee.update(r),this.permissions=r,e&&x.setItem(k.storagePermissionsKeyName,t)},setFeathersNotification(t){this.feathersNotification=t},async logout(){return await A.logout(),Ee.update(ir)}}});class $a{constructor(e,r){R(this,"axiosIns",null);R(this,"appConfig",k);R(this,"config",F({},Bs));R(this,"isAlreadyFetchingAccessToken",!1);R(this,"subscribers",[]);R(this,"socket",null);R(this,"userStore",null);this.axiosIns=e,this.config=F(F({},this.config),r)}loginLocal(e){return this.axiosIns.post("api/auth/local",e).then(r=>r.data).catch(r=>{throw r})}loginQuickbase(e){return this.axiosIns.post("api/auth/quickbase",e).then(r=>r.data).then(r=>{this.setToken(r.jwt),this.setStrapiUser(r.user,!0)}).catch(r=>{throw r})}logout(){this.removeToken()}getToken(){_.get(this.config.token)}setToken(e){_.set(this.config.token,e,{expires:this.config.tokenExpiration,secure:!0,sameSite:"Strict"})}removeToken(){_.remove(this.config.token,{secure:!0,sameSite:"Strict"})}async setStrapiUser(e,r){this.userStore=this.userStore||T(),this.userStore.setStrapiUser(e,r)}getConversations(e){return this.axiosIns.get("api/conversations",e).then(r=>r.data).catch(r=>{throw r})}createConversation(e){return this.axiosIns.post("api/conversations",e).then(r=>r.data).catch(r=>{throw r})}getContacts(e){return this.axiosIns.get("api/contacts",e).then(r=>r.data).catch(r=>{throw r})}createContact(e){return this.axiosIns.post("api/contacts",e).then(r=>r.data).catch(r=>{throw r})}getWorkers(e){return this.axiosIns.post("api/workday/get-workers",e).then(r=>r.data).catch(r=>{throw r})}getApplicants(e){return this.axiosIns.post("api/workday/get-applicants",e).then(r=>r.data).catch(r=>{throw r})}updateQuickbaseWorker(e){return this.axiosIns.post("api/workday/update-quickbase-worker",e).then(r=>r.data).catch(r=>{throw r})}}function Ta(t,e){return{strapi:new $a(t,e)}}var Pa=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),s=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(s)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var n=Object.getOwnPropertySymbols(e);if(n.length!==1||n[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,r);if(a.value!==i||a.enumerable!==!0)return!1}return!0},Zr=typeof Symbol!="undefined"&&Symbol,Ra=Pa,ja=function(){return typeof Zr!="function"||typeof Symbol!="function"||typeof Zr("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Ra()},Da="Function.prototype.bind called on incompatible ",Ft=Array.prototype.slice,Ea=Object.prototype.toString,Fa="[object Function]",Na=function(e){var r=this;if(typeof r!="function"||Ea.call(r)!==Fa)throw new TypeError(Da+r);for(var s=Ft.call(arguments,1),i,n=function(){if(this instanceof i){var u=r.apply(this,s.concat(Ft.call(arguments)));return Object(u)===u?u:this}else return r.apply(e,s.concat(Ft.call(arguments)))},a=Math.max(0,r.length-s.length),o=[],c=0;c<a;c++)o.push("$"+c);if(i=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this,arguments); }")(n),r.prototype){var l=function(){};l.prototype=r.prototype,i.prototype=new l,l.prototype=null}return i},qa=Na,Pr=Function.prototype.bind||qa,_a=Pr,Ma=_a.call(Function.call,Object.prototype.hasOwnProperty),j,rt=SyntaxError,Pi=Function,Fe=TypeError,Nt=function(t){try{return Pi('"use strict"; return ('+t+").constructor;")()}catch{}},ke=Object.getOwnPropertyDescriptor;if(ke)try{ke({},"")}catch{ke=null}var qt=function(){throw new Fe},La=ke?function(){try{return arguments.callee,qt}catch{try{return ke(arguments,"callee").get}catch{return qt}}}():qt,Pe=ja(),ge=Object.getPrototypeOf||function(t){return t.__proto__},je={},Ua=typeof Uint8Array=="undefined"?j:ge(Uint8Array),Ne={"%AggregateError%":typeof AggregateError=="undefined"?j:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?j:ArrayBuffer,"%ArrayIteratorPrototype%":Pe?ge([][Symbol.iterator]()):j,"%AsyncFromSyncIteratorPrototype%":j,"%AsyncFunction%":je,"%AsyncGenerator%":je,"%AsyncGeneratorFunction%":je,"%AsyncIteratorPrototype%":je,"%Atomics%":typeof Atomics=="undefined"?j:Atomics,"%BigInt%":typeof BigInt=="undefined"?j:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?j:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?j:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?j:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?j:FinalizationRegistry,"%Function%":Pi,"%GeneratorFunction%":je,"%Int8Array%":typeof Int8Array=="undefined"?j:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?j:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?j:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Pe?ge(ge([][Symbol.iterator]())):j,"%JSON%":typeof JSON=="object"?JSON:j,"%Map%":typeof Map=="undefined"?j:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!Pe?j:ge(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?j:Promise,"%Proxy%":typeof Proxy=="undefined"?j:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?j:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?j:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!Pe?j:ge(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?j:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Pe?ge(""[Symbol.iterator]()):j,"%Symbol%":Pe?Symbol:j,"%SyntaxError%":rt,"%ThrowTypeError%":La,"%TypedArray%":Ua,"%TypeError%":Fe,"%Uint8Array%":typeof Uint8Array=="undefined"?j:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?j:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?j:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?j:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?j:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?j:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?j:WeakSet},Ba=function t(e){var r;if(e==="%AsyncFunction%")r=Nt("async function () {}");else if(e==="%GeneratorFunction%")r=Nt("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=Nt("async function* () {}");else if(e==="%AsyncGenerator%"){var s=t("%AsyncGeneratorFunction%");s&&(r=s.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&(r=ge(i.prototype))}return Ne[e]=r,r},es={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},It=Pr,yt=Ma,Ha=It.call(Function.call,Array.prototype.concat),za=It.call(Function.apply,Array.prototype.splice),ts=It.call(Function.call,String.prototype.replace),mt=It.call(Function.call,String.prototype.slice),Ka=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ya=/\\(\\)?/g,Qa=function(e){var r=mt(e,0,1),s=mt(e,-1);if(r==="%"&&s!=="%")throw new rt("invalid intrinsic syntax, expected closing `%`");if(s==="%"&&r!=="%")throw new rt("invalid intrinsic syntax, expected opening `%`");var i=[];return ts(e,Ka,function(n,a,o,c){i[i.length]=o?ts(c,Ya,"$1"):a||n}),i},Xa=function(e,r){var s=e,i;if(yt(es,s)&&(i=es[s],s="%"+i[0]+"%"),yt(Ne,s)){var n=Ne[s];if(n===je&&(n=Ba(s)),typeof n=="undefined"&&!r)throw new Fe("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:s,value:n}}throw new rt("intrinsic "+e+" does not exist!")},Rr=function(e,r){if(typeof e!="string"||e.length===0)throw new Fe("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Fe('"allowMissing" argument must be a boolean');var s=Qa(e),i=s.length>0?s[0]:"",n=Xa("%"+i+"%",r),a=n.name,o=n.value,c=!1,l=n.alias;l&&(i=l[0],za(s,Ha([0,1],l)));for(var u=1,y=!0;u<s.length;u+=1){var g=s[u],w=mt(g,0,1),O=mt(g,-1);if((w==='"'||w==="'"||w==="`"||O==='"'||O==="'"||O==="`")&&w!==O)throw new rt("property names with quotes must have matching quotes");if((g==="constructor"||!y)&&(c=!0),i+="."+g,a="%"+i+"%",yt(Ne,a))o=Ne[a];else if(o!=null){if(!(g in o)){if(!r)throw new Fe("base intrinsic for "+e+" exists, but the property is not available.");return}if(ke&&u+1>=s.length){var C=ke(o,g);y=!!C,y&&"get"in C&&!("originalValue"in C.get)?o=C.get:o=o[g]}else y=yt(o,g),o=o[g];y&&!c&&(Ne[a]=o)}}return o},Ri={exports:{}};(function(t){var e=Pr,r=Rr,s=r("%Function.prototype.apply%"),i=r("%Function.prototype.call%"),n=r("%Reflect.apply%",!0)||e.call(i,s),a=r("%Object.getOwnPropertyDescriptor%",!0),o=r("%Object.defineProperty%",!0),c=r("%Math.max%");if(o)try{o({},"a",{value:1})}catch{o=null}t.exports=function(y){var g=n(e,i,arguments);if(a&&o){var w=a(g,"length");w.configurable&&o(g,"length",{value:1+c(0,y.length-(arguments.length-1))})}return g};var l=function(){return n(e,s,arguments)};o?o(t.exports,"apply",{value:l}):t.exports.apply=l})(Ri);var ji=Rr,Di=Ri.exports,Wa=Di(ji("String.prototype.indexOf")),Va=function(e,r){var s=ji(e,!!r);return typeof s=="function"&&Wa(e,".prototype.")>-1?Di(s):s},Ja={},Ga=Object.freeze(Object.defineProperty({__proto__:null,default:Ja},Symbol.toStringTag,{value:"Module"})),Za=Rn(Ga),jr=typeof Map=="function"&&Map.prototype,_t=Object.getOwnPropertyDescriptor&&jr?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,gt=jr&&_t&&typeof _t.get=="function"?_t.get:null,eo=jr&&Map.prototype.forEach,Dr=typeof Set=="function"&&Set.prototype,Mt=Object.getOwnPropertyDescriptor&&Dr?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,vt=Dr&&Mt&&typeof Mt.get=="function"?Mt.get:null,to=Dr&&Set.prototype.forEach,ro=typeof WeakMap=="function"&&WeakMap.prototype,Ze=ro?WeakMap.prototype.has:null,so=typeof WeakSet=="function"&&WeakSet.prototype,et=so?WeakSet.prototype.has:null,io=typeof WeakRef=="function"&&WeakRef.prototype,rs=io?WeakRef.prototype.deref:null,no=Boolean.prototype.valueOf,ao=Object.prototype.toString,oo=Function.prototype.toString,co=String.prototype.match,Er=String.prototype.slice,xe=String.prototype.replace,lo=String.prototype.toUpperCase,ss=String.prototype.toLowerCase,Ei=RegExp.prototype.test,is=Array.prototype.concat,pe=Array.prototype.join,uo=Array.prototype.slice,ns=Math.floor,nr=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Lt=Object.getOwnPropertySymbols,ar=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,qe=typeof Symbol=="function"&&typeof Symbol.iterator=="object",V=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===qe?"object":"symbol")?Symbol.toStringTag:null,Fi=Object.prototype.propertyIsEnumerable,as=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function os(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||Ei.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var s=t<0?-ns(-t):ns(t);if(s!==t){var i=String(s),n=Er.call(e,i.length+1);return xe.call(i,r,"$&_")+"."+xe.call(xe.call(n,/([0-9]{3})/g,"$&_"),/_$/,"")}}return xe.call(e,r,"$&_")}var Ut=Za.custom,Bt=Ut&&qi(Ut)?Ut:null,fo=function t(e,r,s,i){var n=r||{};if(ve(n,"quoteStyle")&&n.quoteStyle!=="single"&&n.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ve(n,"maxStringLength")&&(typeof n.maxStringLength=="number"?n.maxStringLength<0&&n.maxStringLength!==1/0:n.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=ve(n,"customInspect")?n.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ve(n,"indent")&&n.indent!==null&&n.indent!=="	"&&!(parseInt(n.indent,10)===n.indent&&n.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ve(n,"numericSeparator")&&typeof n.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var o=n.numericSeparator;if(typeof e=="undefined")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return Mi(e,n);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var c=String(e);return o?os(e,c):c}if(typeof e=="bigint"){var l=String(e)+"n";return o?os(e,l):l}var u=typeof n.depth=="undefined"?5:n.depth;if(typeof s=="undefined"&&(s=0),s>=u&&u>0&&typeof e=="object")return or(e)?"[Array]":"[Object]";var y=Ro(n,s);if(typeof i=="undefined")i=[];else if(_i(i,e)>=0)return"[Circular]";function g(h,d,f){if(d&&(i=uo.call(i),i.push(d)),f){var b={depth:n.depth};return ve(n,"quoteStyle")&&(b.quoteStyle=n.quoteStyle),t(h,b,s+1,i)}return t(h,n,s+1,i)}if(typeof e=="function"){var w=Ao(e),O=at(e,g);return"[Function"+(w?": "+w:" (anonymous)")+"]"+(O.length>0?" { "+pe.call(O,", ")+" }":"")}if(qi(e)){var C=qe?xe.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):ar.call(e);return typeof e=="object"&&!qe?Qe(C):C}if($o(e)){for(var D="<"+ss.call(String(e.nodeName)),P=e.attributes||[],te=0;te<P.length;te++)D+=" "+P[te].name+"="+Ni(po(P[te].value),"double",n);return D+=">",e.childNodes&&e.childNodes.length&&(D+="..."),D+="</"+ss.call(String(e.nodeName))+">",D}if(or(e)){if(e.length===0)return"[]";var ie=at(e,g);return y&&!Po(ie)?"["+cr(ie,y)+"]":"[ "+pe.call(ie,", ")+" ]"}if(mo(e)){var he=at(e,g);return"cause"in e&&!Fi.call(e,"cause")?"{ ["+String(e)+"] "+pe.call(is.call("[cause]: "+g(e.cause),he),", ")+" }":he.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+pe.call(he,", ")+" }"}if(typeof e=="object"&&a){if(Bt&&typeof e[Bt]=="function")return e[Bt]();if(a!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(So(e)){var ne=[];return eo.call(e,function(h,d){ne.push(g(d,e,!0)+" => "+g(h,e))}),cs("Map",gt.call(e),ne,y)}if(ko(e)){var re=[];return to.call(e,function(h){re.push(g(h,e))}),cs("Set",vt.call(e),re,y)}if(Oo(e))return Ht("WeakMap");if(Co(e))return Ht("WeakSet");if(Io(e))return Ht("WeakRef");if(vo(e))return Qe(g(Number(e)));if(xo(e))return Qe(g(nr.call(e)));if(bo(e))return Qe(no.call(e));if(go(e))return Qe(g(String(e)));if(!ho(e)&&!yo(e)){var le=at(e,g),Oe=as?as(e)===Object.prototype:e instanceof Object||e.constructor===Object,ae=e instanceof Object?"":"null prototype",ue=!Oe&&V&&Object(e)===e&&V in e?Er.call(Se(e),8,-1):ae?"Object":"",v=Oe||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",m=v+(ue||ae?"["+pe.call(is.call([],ue||[],ae||[]),": ")+"] ":"");return le.length===0?m+"{}":y?m+"{"+cr(le,y)+"}":m+"{ "+pe.call(le,", ")+" }"}return String(e)};function Ni(t,e,r){var s=(r.quoteStyle||e)==="double"?'"':"'";return s+t+s}function po(t){return xe.call(String(t),/"/g,"&quot;")}function or(t){return Se(t)==="[object Array]"&&(!V||!(typeof t=="object"&&V in t))}function ho(t){return Se(t)==="[object Date]"&&(!V||!(typeof t=="object"&&V in t))}function yo(t){return Se(t)==="[object RegExp]"&&(!V||!(typeof t=="object"&&V in t))}function mo(t){return Se(t)==="[object Error]"&&(!V||!(typeof t=="object"&&V in t))}function go(t){return Se(t)==="[object String]"&&(!V||!(typeof t=="object"&&V in t))}function vo(t){return Se(t)==="[object Number]"&&(!V||!(typeof t=="object"&&V in t))}function bo(t){return Se(t)==="[object Boolean]"&&(!V||!(typeof t=="object"&&V in t))}function qi(t){if(qe)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!ar)return!1;try{return ar.call(t),!0}catch{}return!1}function xo(t){if(!t||typeof t!="object"||!nr)return!1;try{return nr.call(t),!0}catch{}return!1}var wo=Object.prototype.hasOwnProperty||function(t){return t in this};function ve(t,e){return wo.call(t,e)}function Se(t){return ao.call(t)}function Ao(t){if(t.name)return t.name;var e=co.call(oo.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function _i(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,s=t.length;r<s;r++)if(t[r]===e)return r;return-1}function So(t){if(!gt||!t||typeof t!="object")return!1;try{gt.call(t);try{vt.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function Oo(t){if(!Ze||!t||typeof t!="object")return!1;try{Ze.call(t,Ze);try{et.call(t,et)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function Io(t){if(!rs||!t||typeof t!="object")return!1;try{return rs.call(t),!0}catch{}return!1}function ko(t){if(!vt||!t||typeof t!="object")return!1;try{vt.call(t);try{gt.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function Co(t){if(!et||!t||typeof t!="object")return!1;try{et.call(t,et);try{Ze.call(t,Ze)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function $o(t){return!t||typeof t!="object"?!1:typeof HTMLElement!="undefined"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function Mi(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,s="... "+r+" more character"+(r>1?"s":"");return Mi(Er.call(t,0,e.maxStringLength),e)+s}var i=xe.call(xe.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,To);return Ni(i,"single",e)}function To(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+lo.call(e.toString(16))}function Qe(t){return"Object("+t+")"}function Ht(t){return t+" { ? }"}function cs(t,e,r,s){var i=s?cr(r,s):pe.call(r,", ");return t+" ("+e+") {"+i+"}"}function Po(t){for(var e=0;e<t.length;e++)if(_i(t[e],`
`)>=0)return!1;return!0}function Ro(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=pe.call(Array(t.indent+1)," ");else return null;return{base:r,prev:pe.call(Array(e+1),r)}}function cr(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+pe.call(t,","+r)+`
`+e.prev}function at(t,e){var r=or(t),s=[];if(r){s.length=t.length;for(var i=0;i<t.length;i++)s[i]=ve(t,i)?e(t[i],t):""}var n=typeof Lt=="function"?Lt(t):[],a;if(qe){a={};for(var o=0;o<n.length;o++)a["$"+n[o]]=n[o]}for(var c in t)!ve(t,c)||r&&String(Number(c))===c&&c<t.length||qe&&a["$"+c]instanceof Symbol||(Ei.call(/[^\w$]/,c)?s.push(e(c,t)+": "+e(t[c],t)):s.push(c+": "+e(t[c],t)));if(typeof Lt=="function")for(var l=0;l<n.length;l++)Fi.call(t,n[l])&&s.push("["+e(n[l])+"]: "+e(t[n[l]],t));return s}var Fr=Rr,Me=Va,jo=fo,Do=Fr("%TypeError%"),ot=Fr("%WeakMap%",!0),ct=Fr("%Map%",!0),Eo=Me("WeakMap.prototype.get",!0),Fo=Me("WeakMap.prototype.set",!0),No=Me("WeakMap.prototype.has",!0),qo=Me("Map.prototype.get",!0),_o=Me("Map.prototype.set",!0),Mo=Me("Map.prototype.has",!0),Nr=function(t,e){for(var r=t,s;(s=r.next)!==null;r=s)if(s.key===e)return r.next=s.next,s.next=t.next,t.next=s,s},Lo=function(t,e){var r=Nr(t,e);return r&&r.value},Uo=function(t,e,r){var s=Nr(t,e);s?s.value=r:t.next={key:e,next:t.next,value:r}},Bo=function(t,e){return!!Nr(t,e)},Ho=function(){var e,r,s,i={assert:function(n){if(!i.has(n))throw new Do("Side channel does not contain "+jo(n))},get:function(n){if(ot&&n&&(typeof n=="object"||typeof n=="function")){if(e)return Eo(e,n)}else if(ct){if(r)return qo(r,n)}else if(s)return Lo(s,n)},has:function(n){if(ot&&n&&(typeof n=="object"||typeof n=="function")){if(e)return No(e,n)}else if(ct){if(r)return Mo(r,n)}else if(s)return Bo(s,n);return!1},set:function(n,a){ot&&n&&(typeof n=="object"||typeof n=="function")?(e||(e=new ot),Fo(e,n,a)):ct?(r||(r=new ct),_o(r,n,a)):(s||(s={key:{},next:null}),Uo(s,n,a))}};return i},zo=String.prototype.replace,Ko=/%20/g,zt={RFC1738:"RFC1738",RFC3986:"RFC3986"},qr={default:zt.RFC3986,formatters:{RFC1738:function(t){return zo.call(t,Ko,"+")},RFC3986:function(t){return String(t)}},RFC1738:zt.RFC1738,RFC3986:zt.RFC3986},Yo=qr,Kt=Object.prototype.hasOwnProperty,Ie=Array.isArray,fe=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),Qo=function(e){for(;e.length>1;){var r=e.pop(),s=r.obj[r.prop];if(Ie(s)){for(var i=[],n=0;n<s.length;++n)typeof s[n]!="undefined"&&i.push(s[n]);r.obj[r.prop]=i}}},Li=function(e,r){for(var s=r&&r.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]!="undefined"&&(s[i]=e[i]);return s},Xo=function t(e,r,s){if(!r)return e;if(typeof r!="object"){if(Ie(e))e.push(r);else if(e&&typeof e=="object")(s&&(s.plainObjects||s.allowPrototypes)||!Kt.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var i=e;return Ie(e)&&!Ie(r)&&(i=Li(e,s)),Ie(e)&&Ie(r)?(r.forEach(function(n,a){if(Kt.call(e,a)){var o=e[a];o&&typeof o=="object"&&n&&typeof n=="object"?e[a]=t(o,n,s):e.push(n)}else e[a]=n}),e):Object.keys(r).reduce(function(n,a){var o=r[a];return Kt.call(n,a)?n[a]=t(n[a],o,s):n[a]=o,n},i)},Wo=function(e,r){return Object.keys(r).reduce(function(s,i){return s[i]=r[i],s},e)},Vo=function(t,e,r){var s=t.replace(/\+/g," ");if(r==="iso-8859-1")return s.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(s)}catch{return s}},Jo=function(e,r,s,i,n){if(e.length===0)return e;var a=e;if(typeof e=="symbol"?a=Symbol.prototype.toString.call(e):typeof e!="string"&&(a=String(e)),s==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(u){return"%26%23"+parseInt(u.slice(2),16)+"%3B"});for(var o="",c=0;c<a.length;++c){var l=a.charCodeAt(c);if(l===45||l===46||l===95||l===126||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||n===Yo.RFC1738&&(l===40||l===41)){o+=a.charAt(c);continue}if(l<128){o=o+fe[l];continue}if(l<2048){o=o+(fe[192|l>>6]+fe[128|l&63]);continue}if(l<55296||l>=57344){o=o+(fe[224|l>>12]+fe[128|l>>6&63]+fe[128|l&63]);continue}c+=1,l=65536+((l&1023)<<10|a.charCodeAt(c)&1023),o+=fe[240|l>>18]+fe[128|l>>12&63]+fe[128|l>>6&63]+fe[128|l&63]}return o},Go=function(e){for(var r=[{obj:{o:e},prop:"o"}],s=[],i=0;i<r.length;++i)for(var n=r[i],a=n.obj[n.prop],o=Object.keys(a),c=0;c<o.length;++c){var l=o[c],u=a[l];typeof u=="object"&&u!==null&&s.indexOf(u)===-1&&(r.push({obj:a,prop:l}),s.push(u))}return Qo(r),e},Zo=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},ec=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},tc=function(e,r){return[].concat(e,r)},rc=function(e,r){if(Ie(e)){for(var s=[],i=0;i<e.length;i+=1)s.push(r(e[i]));return s}return r(e)},Ui={arrayToObject:Li,assign:Wo,combine:tc,compact:Go,decode:Vo,encode:Jo,isBuffer:ec,isRegExp:Zo,maybeMap:rc,merge:Xo},Bi=Ho,lr=Ui,tt=qr,sc=Object.prototype.hasOwnProperty,ls={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},me=Array.isArray,ic=String.prototype.split,nc=Array.prototype.push,Hi=function(t,e){nc.apply(t,me(e)?e:[e])},ac=Date.prototype.toISOString,us=tt.default,X={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:lr.encode,encodeValuesOnly:!1,format:us,formatter:tt.formatters[us],indices:!1,serializeDate:function(e){return ac.call(e)},skipNulls:!1,strictNullHandling:!1},oc=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},Yt={},cc=function t(e,r,s,i,n,a,o,c,l,u,y,g,w,O,C,D){for(var P=e,te=D,ie=0,he=!1;(te=te.get(Yt))!==void 0&&!he;){var ne=te.get(e);if(ie+=1,typeof ne!="undefined"){if(ne===ie)throw new RangeError("Cyclic object value");he=!0}typeof te.get(Yt)=="undefined"&&(ie=0)}if(typeof c=="function"?P=c(r,P):P instanceof Date?P=y(P):s==="comma"&&me(P)&&(P=lr.maybeMap(P,function(I){return I instanceof Date?y(I):I})),P===null){if(n)return o&&!O?o(r,X.encoder,C,"key",g):r;P=""}if(oc(P)||lr.isBuffer(P)){if(o){var re=O?r:o(r,X.encoder,C,"key",g);if(s==="comma"&&O){for(var le=ic.call(String(P),","),Oe="",ae=0;ae<le.length;++ae)Oe+=(ae===0?"":",")+w(o(le[ae],X.encoder,C,"value",g));return[w(re)+(i&&me(P)&&le.length===1?"[]":"")+"="+Oe]}return[w(re)+"="+w(o(P,X.encoder,C,"value",g))]}return[w(r)+"="+w(String(P))]}var ue=[];if(typeof P=="undefined")return ue;var v;if(s==="comma"&&me(P))v=[{value:P.length>0?P.join(",")||null:void 0}];else if(me(c))v=c;else{var m=Object.keys(P);v=l?m.sort(l):m}for(var h=i&&me(P)&&P.length===1?r+"[]":r,d=0;d<v.length;++d){var f=v[d],b=typeof f=="object"&&typeof f.value!="undefined"?f.value:P[f];if(!(a&&b===null)){var S=me(P)?typeof s=="function"?s(h,f):h:h+(u?"."+f:"["+f+"]");D.set(e,ie);var $=Bi();$.set(Yt,D),Hi(ue,t(b,S,s,i,n,a,o,c,l,u,y,g,w,O,C,$))}}return ue},lc=function(e){if(!e)return X;if(e.encoder!==null&&typeof e.encoder!="undefined"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||X.charset;if(typeof e.charset!="undefined"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var s=tt.default;if(typeof e.format!="undefined"){if(!sc.call(tt.formatters,e.format))throw new TypeError("Unknown format option provided.");s=e.format}var i=tt.formatters[s],n=X.filter;return(typeof e.filter=="function"||me(e.filter))&&(n=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:X.addQueryPrefix,allowDots:typeof e.allowDots=="undefined"?X.allowDots:!!e.allowDots,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:X.charsetSentinel,delimiter:typeof e.delimiter=="undefined"?X.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:X.encode,encoder:typeof e.encoder=="function"?e.encoder:X.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:X.encodeValuesOnly,filter:n,format:s,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:X.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:X.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:X.strictNullHandling}},uc=function(t,e){var r=t,s=lc(e),i,n;typeof s.filter=="function"?(n=s.filter,r=n("",r)):me(s.filter)&&(n=s.filter,i=n);var a=[];if(typeof r!="object"||r===null)return"";var o;e&&e.arrayFormat in ls?o=e.arrayFormat:e&&"indices"in e?o=e.indices?"indices":"repeat":o="indices";var c=ls[o];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var l=c==="comma"&&e&&e.commaRoundTrip;i||(i=Object.keys(r)),s.sort&&i.sort(s.sort);for(var u=Bi(),y=0;y<i.length;++y){var g=i[y];s.skipNulls&&r[g]===null||Hi(a,cc(r[g],g,c,l,s.strictNullHandling,s.skipNulls,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,u))}var w=a.join(s.delimiter),O=s.addQueryPrefix===!0?"?":"";return s.charsetSentinel&&(s.charset==="iso-8859-1"?O+="utf8=%26%2310003%3B&":O+="utf8=%E2%9C%93&"),w.length>0?O+w:""},_e=Ui,ur=Object.prototype.hasOwnProperty,fc=Array.isArray,K={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:_e.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},dc=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},zi=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},pc="utf8=%26%2310003%3B",hc="utf8=%E2%9C%93",yc=function(e,r){var s={},i=r.ignoreQueryPrefix?e.replace(/^\?/,""):e,n=r.parameterLimit===1/0?void 0:r.parameterLimit,a=i.split(r.delimiter,n),o=-1,c,l=r.charset;if(r.charsetSentinel)for(c=0;c<a.length;++c)a[c].indexOf("utf8=")===0&&(a[c]===hc?l="utf-8":a[c]===pc&&(l="iso-8859-1"),o=c,c=a.length);for(c=0;c<a.length;++c)if(c!==o){var u=a[c],y=u.indexOf("]="),g=y===-1?u.indexOf("="):y+1,w,O;g===-1?(w=r.decoder(u,K.decoder,l,"key"),O=r.strictNullHandling?null:""):(w=r.decoder(u.slice(0,g),K.decoder,l,"key"),O=_e.maybeMap(zi(u.slice(g+1),r),function(C){return r.decoder(C,K.decoder,l,"value")})),O&&r.interpretNumericEntities&&l==="iso-8859-1"&&(O=dc(O)),u.indexOf("[]=")>-1&&(O=fc(O)?[O]:O),ur.call(s,w)?s[w]=_e.combine(s[w],O):s[w]=O}return s},mc=function(t,e,r,s){for(var i=s?e:zi(e,r),n=t.length-1;n>=0;--n){var a,o=t[n];if(o==="[]"&&r.parseArrays)a=[].concat(i);else{a=r.plainObjects?Object.create(null):{};var c=o.charAt(0)==="["&&o.charAt(o.length-1)==="]"?o.slice(1,-1):o,l=parseInt(c,10);!r.parseArrays&&c===""?a={0:i}:!isNaN(l)&&o!==c&&String(l)===c&&l>=0&&r.parseArrays&&l<=r.arrayLimit?(a=[],a[l]=i):c!=="__proto__"&&(a[c]=i)}i=a}return i},gc=function(e,r,s,i){if(!!e){var n=s.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/,o=/(\[[^[\]]*])/g,c=s.depth>0&&a.exec(n),l=c?n.slice(0,c.index):n,u=[];if(l){if(!s.plainObjects&&ur.call(Object.prototype,l)&&!s.allowPrototypes)return;u.push(l)}for(var y=0;s.depth>0&&(c=o.exec(n))!==null&&y<s.depth;){if(y+=1,!s.plainObjects&&ur.call(Object.prototype,c[1].slice(1,-1))&&!s.allowPrototypes)return;u.push(c[1])}return c&&u.push("["+n.slice(c.index)+"]"),mc(u,r,s,i)}},vc=function(e){if(!e)return K;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset!="undefined"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof e.charset=="undefined"?K.charset:e.charset;return{allowDots:typeof e.allowDots=="undefined"?K.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:K.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:K.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:K.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:K.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:K.comma,decoder:typeof e.decoder=="function"?e.decoder:K.decoder,delimiter:typeof e.delimiter=="string"||_e.isRegExp(e.delimiter)?e.delimiter:K.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:K.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:K.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:K.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:K.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:K.strictNullHandling}},bc=function(t,e){var r=vc(e);if(t===""||t===null||typeof t=="undefined")return r.plainObjects?Object.create(null):{};for(var s=typeof t=="string"?yc(t,r):t,i=r.plainObjects?Object.create(null):{},n=Object.keys(s),a=0;a<n.length;++a){var o=n[a],c=gc(o,s[o],r,typeof t=="string");i=_e.merge(i,c,r)}return r.allowSparse===!0?i:_e.compact(i)},xc=uc,wc=bc,Ac=qr,Sc={formats:Ac,parse:wc,stringify:xc};const Oc=mr(gr.create({baseURL:Bs.baseURL,timeout:25e3,headers:{"Content-Type":"application/json"},requestInterceptor:(t,{store:e})=>(t.paramsSerializer=r=>Sc.stringify(r,{arrayFormat:"brackets"}),t)}),{maxRequests:6,perMilliseconds:1e3}),{strapi:_r}=Ta(Oc,{});var Ic=_s(({app:t})=>{t.config.globalProperties.$strapi=_r}),hy=Object.freeze(Object.defineProperty({__proto__:null,default:Ic,strapi:_r},Symbol.toStringTag,{value:"Module"})),Ki={get dev(){return!1},realm:"elitehcms",appDBID:"bp3gargfh",baseURL:"https://api.quickbase.com/v1",loginEndpoint:"https://elitehcms.quickbase.com/db/main?act=API_Authenticate",appToken:"cjibuvub93rvd2dbh4iksbeft4n4",refreshEndpoint:"https://api.quickbase.com/v1/auth/temporary",queryRecords:"https://api.quickbase.com/v1/records/query",insertRecords:"https://api.quickbase.com/v1/records",updateRecords:"https://api.quickbase.com/v1/records",runReport:"https://api.quickbase.com/v1/reports",storageUserKeyName:"clm_emp_user",storageUserTicketKeyName:"clm_emp_ticket",storageIPInfoKeyName:"clm_emp_ip",storagePermissionsKeyName:"clm_emp_permissions",storageAccessKeyName:"clm_emp_access",storageOfficeLocationKeyName:"clm_emp_office",storageEmployeeKeyName:"clm_emp_employee",storageCheckInKeyName:"clm_emp_checkin",storageJobBoardKeyName:"clm_emp_jobboard",cookieExpiration:"1d",kioskExpiration:"14d",officeExpiration:"6h",checkInExpiration:"5m",tokenExpiration:"4m 45s",userToken:"b3rntv_ng3q_0_b3f26wpbjxp4xdhqrxjmdpjmvus",commonParameters:{msInUTC:0,includeRids:1,fmt:"structured",options:"num-5000"},maxLoginAttempts:5,lastAttemptExpMinutes:5,loginAttemptMinutesBeforeLast:2,booleanFields:{br26nivmr:[21]}};function kc(t){const e=Object.assign({noopener:!0},t),r=[];for(const s in e){const i=e[s];i===!0?r.push(s):(In(i)||typeof i=="string"&&i!=="")&&r.push(s+"="+i)}return r.join(",")}function fs(t,e,r){let s=window.open;if(Jt.is.cordova===!0){if(cordova!==void 0&&cordova.InAppBrowser!==void 0&&cordova.InAppBrowser.open!==void 0)s=cordova.InAppBrowser.open;else if(navigator!==void 0&&navigator.app!==void 0)return navigator.app.loadUrl(t,{openExternal:!0})}const i=s(t,"_blank",kc(r));if(i)return Jt.is.desktop&&i.focus(),i;e&&e()}var Cc=(t,e,r)=>{if(Jt.is.ios===!0&&window.SafariViewController!==void 0){window.SafariViewController.isAvailable(s=>{s?window.SafariViewController.show({url:t},On,e):fs(t,e,r)});return}return fs(t,e,r)};const G=ee("hiringCenter",{state:()=>({hiringCenterInfo:null}),getters:{hiringCenter:t=>t.hiringCenterInfo,hiringCenterAvailable:t=>t.hiringCenterInfo!==null},actions:{async fetchHiringCenter(t,e){const r=[{9:{value:t},7:{value:"Hiring Center"}}];if(!this.hiringCenterInfo||e){const{data:s}=await A.fetchFromStructureApp({fields:r});return this.setHiringCenter(s,!0),s}else return this.hiringCenterInfo},setHiringCenter(t,e){this.hiringCenterInfo=t,e&&t?x.setItem(k.storageHiringCenter,t):t||x.removeItem(k.storageHiringCenter)}}});var $c=[{title:"Home",i18n:"home",caption:"Home",icon:"home",to:{name:"home",exact:!0},resource:"dashboard",action:"read",userType:"All"},{title:"Profile",caption:"Information",icon:"assignment_ind",to:{name:"profile",exact:!0},resource:"profile",action:"read",access:{userType:"none",public:!1,private:!1}},{title:"Job Board",caption:"Job Board",icon:"work",to:{name:"jobs",exact:!0},resource:"jobBoardMenu",action:"read",userType:"Candidate",access:{userType:"Candidate",public:!0,private:!1,checkIn:!1}},{title:"Apply",caption:"Apply",icon:"feed",to:{name:"apply",exact:!0},resource:"applyMenu",action:"read",userType:"Candidate",access:{userType:"Candidate",public:!0,private:!0,checkIn:!0}}],Tc=[{title:"Home",caption:"Dashboard",icon:"fa-solid fa-house",to:{name:"home",exact:!0},resource:"dashboard",userType:"Project User"},{title:"Expected Arrivals",caption:"Arrivals",icon:"fa-solid fa-plane-arrival",to:{name:"arrivals",exact:!0},resource:"projectArrivals",userType:"Project User"},{title:"Hire Requests",caption:"Requests",icon:"fa-solid fa-user-plus",to:{name:"requests",exact:!0},resource:"projectRequests",userType:"Project User"},{title:"Pipeline",caption:"Pipeline",icon:"fa-solid fa-bars-progress",to:{name:"pipeline",exact:!0},resource:"projectPipeline",userType:"Project User"},{title:"Employees",caption:"Employees",icon:"fa-solid fa-people-group",to:{name:"employees",exact:!0},resource:"projectEmployees",userType:"Project User"},{title:"Compliance",caption:"Compliance",icon:"fa-solid fa-shield-halved",to:{name:"compliance",exact:!0},resource:"compliance",userType:"Project User"}],Pc=[{title:"Self Check-Ins",caption:"self-check-ins",icon:"list_alt",to:{name:"self-check-ins",exact:!0},resource:"selfCheckIns",userType:"QuickBase User"},{title:"Hiring",caption:"Hiring",icon:"group_add",to:{name:"profiles",exact:!0},resource:"hiring",userType:"QuickBase User"},{title:"Recruiting",caption:"Recruiting",icon:"connect_without_contact",to:{name:"jobPost",exact:!0},resource:"recruiting",userType:"QuickBase User"},{title:"Projects",caption:"Projects",icon:"corporate_fare",to:{name:"projects",exact:!0},resource:"projects",userType:"QuickBase User"},{title:"Releases",caption:"Releases",icon:"receipt",to:{name:"releases",exact:!0},resource:"releases",userType:"QuickBase User"},{title:"Chat",caption:"Chat",icon:"chat",to:{name:"chat",exact:!0},resource:"chat",userType:"QuickBase User"}],Rc=[{title:"Summary",caption:"Summary",icon:"preview",resource:"open",to:{name:"ee-summary",exact:!0}},{title:"Training",caption:"Training",icon:"grading",resource:"open",to:{name:"ee-training",exact:!0}}];const H=ee("app",{state:()=>({title:k.toolbarTitle,lang:null,checkIn:k.pageType==="Candidate"||k.pageType==="Candidate Kiosk",checkInData:{},pageType:k.pageType,userType:k.userType,menu:k.userType==="Candidate"?$c:k.userType==="Project User"?Tc:k.userType==="QuickBase User"?Pc:[],startPage:k.startPage,version:k.version,homeButton:k.homeButton,event:null,kioskActive:!1,country:k.country}),getters:{appVersion:t=>t.version,toolbarTitle:t=>t.title,currentPageType:t=>t.pageType,currentUserType:t=>t.userType,inHiringCenter:t=>t.checkInData[15]?t.checkInData[15]==="Waiting":!1,checkedIn:t=>t.checkInData[15]?t.checkInData[15]==="Waiting":!1,checkedInStatus:t=>t.checkInData[15]||null,onKiosk(){return this.currentPageType==="Candidate Kiosk"},currentLang:t=>t.lang,startPageEnabled:t=>t.startPage,homeButtonEnabled:t=>t.homeButton,activeMenu(){const{hiringCenterAvailable:t}=G();return this.menu.filter(r=>{let s=!0,i=!0;if(Ee.can(r.action||"read",r.resource)){let n=Ee.possibleRulesFor(r.action||"read",r.resource)[0].conditions;return n&&(n.userType&&(s=n.userType===this.currentUserType,s||(i=!1)),n.accept&&(s=n.accept.find(a=>a==="checkedIn"&&this.checkedIn||a==="kiosk"&&this.onKiosk?!0:!!(a==="office"&&t)),s||(i=!1)),n.deny&&(s=n.deny.filter(a=>a==="checkedIn"&&this.checkedIn||a==="kiosk"&&this.onKiosk?!0:!!(a==="office"&&t)).length===0,s||(i=!1))),i}else return!1})},viewEmployeeMenu(){return Rc.filter(e=>{let r=!0,s=!0;if(Ee.can(e.action||"read",e.resource)){let i=Ee.possibleRulesFor(e.action||"read",e.resource)[0].conditions;return i&&i.userType&&(r=i.userType===this.currentUserType,r||(s=!1)),s}else return!1})},currentEvent:t=>t.event,getCountry:t=>t.country},actions:{setCheckInData(t){const{setHiringCenter:e}=G();this.checkInData=t,x.setItem(k.storageCheckInKeyName,t),this.currentPageType==="Candidate"&&t[15]==="Waiting"&&e(t.office,!0)},openWindow(t,e){(e.fullScreen===null||e.fullScreen===void 0)&&(e.fullScreen=!0),e.name==="Full Profile"&&!e.height&&(e.height=775),e.width=e.width?e.width:screen.availWidth&&e.fullScreen?screen.availWidth:1450,e.height=e.height?e.height:screen.availHeight&&e.fullScreen?screen.availHeight:700;const r=window.top.outerHeight/2+window.top.screenY-e.height/2,s=window.top.outerWidth/2+window.top.screenX-e.width/2;`${e.width}`,`${e.height}`,e.fullScreen,Cc(e.url,null,{width:e.width,height:e.height,top:r,left:s,popup:!0,fullscreen:e.fullScreen||!0,menubar:!1,toolbar:!1})},async addTaskToCheckin({task:t,reason:e,active:r}){const s={3:{value:this.checkInData[3]},10:{value:e},27:{value:t}};r&&Object.assign(s,{36:{value:!0}});const{data:i}=await A.upsertRecordsXML({to:"br26nivmr",data:[s],fieldsToReturn:[31],formatObject:31});if(i[0])return this.checkInData=i[0][31],this.checkInData;throw"Something went wrong"},setLang(t){this.lang=t},setEvent(t,e){this.event=t,e&&x.setItem(k.storageEvent,t),t||x.removeItem(k.storageEvent)},setKioskActive(t){this.kioskActive=t},setStartPage(t,e){this.startPage=t,e&&x.setItem(k.storageStartPage,t),t||x.removeItem(k.storageStartPage)},setHomeButton(t,e){this.homeButton=t,e&&x.setItem(k.storageHomeButton,t),t||x.removeItem(k.storageHomeButton)},setCountry(t){this.country=t}}}),lt=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function jc(t){return Ec(t)===0}function Dc(t,e){return e<=6?31:e<=11||jc(t)?30:29}function Ec(t){const e=lt.length;let r=lt[0],s,i,n,a,o;if(t<r||t>=lt[e-1])throw new Error("Invalid Jalaali year "+t);for(o=1;o<e&&(s=lt[o],i=s-r,!(t<s));o+=1)r=s;return a=t-r,i-a<6&&(a=a-i+Fc(i+4,33)*33),n=ds(ds(a+1,33)-1,4),n===-1&&(n=4),n}function Fc(t,e){return~~(t/e)}function ds(t,e){return t-~~(t/e)*e}const Yi=864e5,Nc=36e5,fr=6e4,Qi="YYYY-MM-DDTHH:mm:ss.SSSZ",qc=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,_c=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,Qt={};function Mc(t,e){const r="("+e.days.join("|")+")",s=t+r;if(Qt[s]!==void 0)return Qt[s];const i="("+e.daysShort.join("|")+")",n="("+e.months.join("|")+")",a="("+e.monthsShort.join("|")+")",o={};let c=0;const l=t.replace(_c,y=>{switch(c++,y){case"YY":return o.YY=c,"(-?\\d{1,2})";case"YYYY":return o.YYYY=c,"(-?\\d{1,4})";case"M":return o.M=c,"(\\d{1,2})";case"MM":return o.M=c,"(\\d{2})";case"MMM":return o.MMM=c,a;case"MMMM":return o.MMMM=c,n;case"D":return o.D=c,"(\\d{1,2})";case"Do":return o.D=c++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return o.D=c,"(\\d{2})";case"H":return o.H=c,"(\\d{1,2})";case"HH":return o.H=c,"(\\d{2})";case"h":return o.h=c,"(\\d{1,2})";case"hh":return o.h=c,"(\\d{2})";case"m":return o.m=c,"(\\d{1,2})";case"mm":return o.m=c,"(\\d{2})";case"s":return o.s=c,"(\\d{1,2})";case"ss":return o.s=c,"(\\d{2})";case"S":return o.S=c,"(\\d{1})";case"SS":return o.S=c,"(\\d{2})";case"SSS":return o.S=c,"(\\d{3})";case"A":return o.A=c,"(AM|PM)";case"a":return o.a=c,"(am|pm)";case"aa":return o.aa=c,"(a\\.m\\.|p\\.m\\.)";case"ddd":return i;case"dddd":return r;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return o.Z=c,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return o.ZZ=c,"(Z|[+-]\\d{2}\\d{2})";case"X":return o.X=c,"(-?\\d+)";case"x":return o.x=c,"(-?\\d{4,})";default:return c--,y[0]==="["&&(y=y.substring(1,y.length-1)),y.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),u={map:o,regex:new RegExp("^"+l)};return Qt[s]=u,u}function Xi(t,e){return t!==void 0?t:e!==void 0?e.date:Cn.date}function ps(t,e=""){const r=t>0?"-":"+",s=Math.abs(t),i=Math.floor(s/60),n=s%60;return r+L(i)+e+L(n)}function Lc(t,e,r){let s=t.getFullYear(),i=t.getMonth();const n=t.getDate();return e.year!==void 0&&(s+=r*e.year,delete e.year),e.month!==void 0&&(i+=r*e.month,delete e.month),t.setDate(1),t.setMonth(2),t.setFullYear(s),t.setMonth(i),t.setDate(Math.min(n,Lr(t))),e.date!==void 0&&(t.setDate(t.getDate()+r*e.date),delete e.date),t}function Uc(t,e,r){const s=e.year!==void 0?e.year:t[`get${r}FullYear`](),i=e.month!==void 0?e.month-1:t[`get${r}Month`](),n=new Date(s,i+1,0).getDate(),a=Math.min(n,e.date!==void 0?e.date:t[`get${r}Date`]());return t[`set${r}Date`](1),t[`set${r}Month`](2),t[`set${r}FullYear`](s),t[`set${r}Month`](i),t[`set${r}Date`](a),delete e.year,delete e.month,delete e.date,t}function Mr(t,e,r){const s=Wi(e),i=new Date(t),n=s.year!==void 0||s.month!==void 0||s.date!==void 0?Lc(i,s,r):i;for(const a in s){const o=kn(a);n[`set${o}`](n[`get${o}`]()+r*s[a])}return n}function Wi(t){const e=F({},t);return t.years!==void 0&&(e.year=t.years,delete e.years),t.months!==void 0&&(e.month=t.months,delete e.months),t.days!==void 0&&(e.date=t.days,delete e.days),t.day!==void 0&&(e.date=t.day,delete e.day),t.hour!==void 0&&(e.hours=t.hour,delete e.hour),t.minute!==void 0&&(e.minutes=t.minute,delete e.minute),t.second!==void 0&&(e.seconds=t.second,delete e.second),t.millisecond!==void 0&&(e.milliseconds=t.millisecond,delete e.millisecond),e}function Vi(t,e,r){const s=Wi(e),i=r===!0?"UTC":"",n=new Date(t),a=s.year!==void 0||s.month!==void 0||s.date!==void 0?Uc(n,s,i):n;for(const o in s){const c=o.charAt(0).toUpperCase()+o.slice(1);a[`set${i}${c}`](s[o])}return a}function Bc(t,e,r){const s=Hc(t,e,r),i=new Date(s.year,s.month===null?null:s.month-1,s.day===null?1:s.day,s.hour,s.minute,s.second,s.millisecond),n=i.getTimezoneOffset();return s.timezoneOffset===null||s.timezoneOffset===n?i:Mr(i,{minutes:s.timezoneOffset-n},1)}function Hc(t,e,r,s,i){const n={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(i!==void 0&&Object.assign(n,i),t==null||t===""||typeof t!="string")return n;e===void 0&&(e=Qi);const a=Xi(r,Ms.props),o=a.months,c=a.monthsShort,{regex:l,map:u}=Mc(e,a),y=t.match(l);if(y===null)return n;let g="";if(u.X!==void 0||u.x!==void 0){const w=parseInt(y[u.X!==void 0?u.X:u.x],10);if(isNaN(w)===!0||w<0)return n;const O=new Date(w*(u.X!==void 0?1e3:1));n.year=O.getFullYear(),n.month=O.getMonth()+1,n.day=O.getDate(),n.hour=O.getHours(),n.minute=O.getMinutes(),n.second=O.getSeconds(),n.millisecond=O.getMilliseconds()}else{if(u.YYYY!==void 0)n.year=parseInt(y[u.YYYY],10);else if(u.YY!==void 0){const w=parseInt(y[u.YY],10);n.year=w<0?w:2e3+w}if(u.M!==void 0){if(n.month=parseInt(y[u.M],10),n.month<1||n.month>12)return n}else u.MMM!==void 0?n.month=c.indexOf(y[u.MMM])+1:u.MMMM!==void 0&&(n.month=o.indexOf(y[u.MMMM])+1);if(u.D!==void 0){if(n.day=parseInt(y[u.D],10),n.year===null||n.month===null||n.day<1)return n;const w=s!=="persian"?new Date(n.year,n.month,0).getDate():Dc(n.year,n.month);if(n.day>w)return n}u.H!==void 0?n.hour=parseInt(y[u.H],10)%24:u.h!==void 0&&(n.hour=parseInt(y[u.h],10)%12,(u.A&&y[u.A]==="PM"||u.a&&y[u.a]==="pm"||u.aa&&y[u.aa]==="p.m.")&&(n.hour+=12),n.hour=n.hour%24),u.m!==void 0&&(n.minute=parseInt(y[u.m],10)%60),u.s!==void 0&&(n.second=parseInt(y[u.s],10)%60),u.S!==void 0&&(n.millisecond=parseInt(y[u.S],10)*10**(3-y[u.S].length)),(u.Z!==void 0||u.ZZ!==void 0)&&(g=u.Z!==void 0?y[u.Z].replace(":",""):y[u.ZZ],n.timezoneOffset=(g[0]==="+"?-1:1)*(60*g.slice(1,3)+1*g.slice(3,5)))}return n.dateHash=L(n.year,6)+"/"+L(n.month)+"/"+L(n.day),n.timeHash=L(n.hour)+":"+L(n.minute)+":"+L(n.second)+g,n}function zc(t){return typeof t=="number"?!0:isNaN(Date.parse(t))===!1}function Kc(t,e){return Vi(new Date,t,e)}function Yc(t){const e=new Date(t).getDay();return e===0?7:e}function dr(t){const e=new Date(t.getFullYear(),t.getMonth(),t.getDate());e.setDate(e.getDate()-(e.getDay()+6)%7+3);const r=new Date(e.getFullYear(),0,4);r.setDate(r.getDate()-(r.getDay()+6)%7+3);const s=e.getTimezoneOffset()-r.getTimezoneOffset();e.setHours(e.getHours()-s);const i=(e-r)/(Yi*7);return 1+Math.floor(i)}function Qc(t){return t.getFullYear()*1e4+t.getMonth()*100+t.getDate()}function Xt(t,e){const r=new Date(t);return e===!0?Qc(r):r.getTime()}function Xc(t,e,r,s={}){const i=Xt(e,s.onlyDate),n=Xt(r,s.onlyDate),a=Xt(t,s.onlyDate);return(a>i||s.inclusiveFrom===!0&&a===i)&&(a<n||s.inclusiveTo===!0&&a===n)}function Wc(t,e){return Mr(t,e,1)}function Vc(t,e){return Mr(t,e,-1)}function de(t,e,r){const s=new Date(t),i=`set${r===!0?"UTC":""}`;switch(e){case"year":case"years":s[`${i}Month`](0);case"month":case"months":s[`${i}Date`](1);case"day":case"days":case"date":s[`${i}Hours`](0);case"hour":case"hours":s[`${i}Minutes`](0);case"minute":case"minutes":s[`${i}Seconds`](0);case"second":case"seconds":s[`${i}Milliseconds`](0)}return s}function Jc(t,e,r){const s=new Date(t),i=`set${r===!0?"UTC":""}`;switch(e){case"year":case"years":s[`${i}Month`](11);case"month":case"months":s[`${i}Date`](Lr(s));case"day":case"days":case"date":s[`${i}Hours`](23);case"hour":case"hours":s[`${i}Minutes`](59);case"minute":case"minutes":s[`${i}Seconds`](59);case"second":case"seconds":s[`${i}Milliseconds`](999)}return s}function Gc(t){let e=new Date(t);return Array.prototype.slice.call(arguments,1).forEach(r=>{e=Math.max(e,new Date(r))}),e}function Zc(t){let e=new Date(t);return Array.prototype.slice.call(arguments,1).forEach(r=>{e=Math.min(e,new Date(r))}),e}function ut(t,e,r){return(t.getTime()-t.getTimezoneOffset()*fr-(e.getTime()-e.getTimezoneOffset()*fr))/r}function Ji(t,e,r="days"){const s=new Date(t),i=new Date(e);switch(r){case"years":case"year":return s.getFullYear()-i.getFullYear();case"months":case"month":return(s.getFullYear()-i.getFullYear())*12+s.getMonth()-i.getMonth();case"days":case"day":case"date":return ut(de(s,"day"),de(i,"day"),Yi);case"hours":case"hour":return ut(de(s,"hour"),de(i,"hour"),Nc);case"minutes":case"minute":return ut(de(s,"minute"),de(i,"minute"),fr);case"seconds":case"second":return ut(de(s,"second"),de(i,"second"),1e3)}}function pr(t){return Ji(t,de(t,"year"),"days")+1}function el(t){return Ls(t)===!0?"date":typeof t=="number"?"number":"string"}function tl(t,e,r){const s=new Date(t);if(e){const i=new Date(e);if(s<i)return i}if(r){const i=new Date(r);if(s>i)return i}return s}function rl(t,e,r){const s=new Date(t),i=new Date(e);if(r===void 0)return s.getTime()===i.getTime();switch(r){case"second":case"seconds":if(s.getSeconds()!==i.getSeconds())return!1;case"minute":case"minutes":if(s.getMinutes()!==i.getMinutes())return!1;case"hour":case"hours":if(s.getHours()!==i.getHours())return!1;case"day":case"days":case"date":if(s.getDate()!==i.getDate())return!1;case"month":case"months":if(s.getMonth()!==i.getMonth())return!1;case"year":case"years":if(s.getFullYear()!==i.getFullYear())return!1;break;default:throw new Error(`date isSameDate unknown unit ${r}`)}return!0}function Lr(t){return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()}function hs(t){if(t>=11&&t<=13)return`${t}th`;switch(t%10){case 1:return`${t}st`;case 2:return`${t}nd`;case 3:return`${t}rd`}return`${t}th`}const ys={YY(t,e,r){const s=this.YYYY(t,e,r)%100;return s>=0?L(s):"-"+L(Math.abs(s))},YYYY(t,e,r){return r!=null?r:t.getFullYear()},M(t){return t.getMonth()+1},MM(t){return L(t.getMonth()+1)},MMM(t,e){return e.monthsShort[t.getMonth()]},MMMM(t,e){return e.months[t.getMonth()]},Q(t){return Math.ceil((t.getMonth()+1)/3)},Qo(t){return hs(this.Q(t))},D(t){return t.getDate()},Do(t){return hs(t.getDate())},DD(t){return L(t.getDate())},DDD(t){return pr(t)},DDDD(t){return L(pr(t),3)},d(t){return t.getDay()},dd(t,e){return this.dddd(t,e).slice(0,2)},ddd(t,e){return e.daysShort[t.getDay()]},dddd(t,e){return e.days[t.getDay()]},E(t){return t.getDay()||7},w(t){return dr(t)},ww(t){return L(dr(t))},H(t){return t.getHours()},HH(t){return L(t.getHours())},h(t){const e=t.getHours();return e===0?12:e>12?e%12:e},hh(t){return L(this.h(t))},m(t){return t.getMinutes()},mm(t){return L(t.getMinutes())},s(t){return t.getSeconds()},ss(t){return L(t.getSeconds())},S(t){return Math.floor(t.getMilliseconds()/100)},SS(t){return L(Math.floor(t.getMilliseconds()/10))},SSS(t){return L(t.getMilliseconds(),3)},A(t){return this.H(t)<12?"AM":"PM"},a(t){return this.H(t)<12?"am":"pm"},aa(t){return this.H(t)<12?"a.m.":"p.m."},Z(t,e,r,s){const i=s==null?t.getTimezoneOffset():s;return ps(i,":")},ZZ(t,e,r,s){const i=s==null?t.getTimezoneOffset():s;return ps(i)},X(t){return Math.floor(t.getTime()/1e3)},x(t){return t.getTime()}};function sl(t,e,r,s,i){if(t!==0&&!t||t===1/0||t===-1/0)return;const n=new Date(t);if(isNaN(n))return;e===void 0&&(e=Qi);const a=Xi(r,Ms.props);return e.replace(qc,(o,c)=>o in ys?ys[o](n,a,s,i):c===void 0?o:c.split("\\]").join("]"))}function il(t){return Ls(t)===!0?new Date(t.getTime()):t}var J={isValid:zc,extractDate:Bc,buildDate:Kc,getDayOfWeek:Yc,getWeekOfYear:dr,isBetweenDates:Xc,addToDate:Wc,subtractFromDate:Vc,adjustDate:Vi,startOfDate:de,endOfDate:Jc,getMaxDate:Gc,getMinDate:Zc,getDateDiff:Ji,getDayOfYear:pr,inferDateFormat:el,getDateBetween:tl,isSameDate:rl,daysInMonth:Lr,formatDate:sl,clone:il};const Gi=ee("boardAppStore",{state:()=>({boardApp:{},requestJobs:null,requestedTimestamp:null}),getters:{getBoardApp:t=>t.boardApp,profileData(){const{profileData:t}=Ae();return t},jobsForBoard(){if(this.requestJobs){const{employeeData:t}=U(),e=this.requestJobs;return t[3]||(e.forEach(r=>{Object.assign(r,{recommended:r[68]===t[53]&&r[69]===t[51]});const s=t[537].find(i=>i[10]===r[3]);s!==void 0&&Object.assign(r,{applied:!0,appliedOn:s[1].$d!==void 0?J.formatDate(s[1].$d,"MM-DD-YYYY"):s[1].date})}),e.sort((r,s)=>r.recommended===s.recommended?s[1].isAfter(r[1]):r.recommended?-1:1)),e}else return[]},timeRequested(){return this.requestedTimestamp}},actions:{async getRequestJobs(){const t=[{14:{value:224},9:{value:1},8:{value:"{'17'.EX.'Open'}AND{'182'.EX.'false'}AND{'175'.EX.'true'}"},7:{value:"Table Query"},6:{value:"bpzpyqcu4"}}],{data:e}=await A.fetchFromProjectsApp({fields:t});if(e.length>0)return this.setRequestJobs(e,!0),this.requestedTimestamp=p(),e;throw"No jobs"},async applyOnBoard({job:t}){const{employeeData:e}=U(),{data:r}=await A.upsertRecordsXML({to:"bsfq6uktu",data:[{6:{value:e[3]},8:{value:t[56]},10:{value:t[3]},12:{value:t[61]}}],fieldsToReturn:[19],formatObject:19});if(console.log(r),r[0])return r[0][19];throw"Cannot apply"},storeBoardApp(t){this.boardApp=t},setRequestJobs(t,e){const r=t.sort((s,i)=>i[1].isAfter(s[1]));this.requestJobs=r,e&&x.setItem(k.storageJobBoardKeyName,r)}}}),Wt=[{link:"https://beis-newhire.sabacloud.com/Saba/Web_wdk/NA3P1PRD0029/index/prelogin.rdf",linkName:"BSLN",img:"https://static-na3p1.sabacloud.com/assets/s/s13cvy4thve9/common/img/favicon.ico"},{link:"https://hrx.talx.com/ec/#/login/13917?divisionid=42",linkName:"HireExpress",img:"https://hrx.talx.com/ec/favicon.ico"}],Y=ee("kiosk",{state:()=>({kiosk:null,access:null,permissions:null,bookmarks:Wt,bookMarksOnly:!1}),getters:{getBookMarksOnly:t=>t.bookMarksOnly,getBookmarks:t=>t.bookmarks,kioskAccount:t=>t.kiosk,kioskAvailable:t=>t.kiosk!==null,kioskHiringCenter:t=>t.kiosk?t.kiosk[37]:null,hasAffirmative:t=>t.kiosk?t.kiosk.voluntaryForms.affirmative:!1,hasVets:t=>t.kiosk?t.kiosk.voluntaryForms.vets:!1,hasDisability:t=>t.kiosk?!!t.kiosk.voluntaryForms.disability:!1,goToVoluntary:t=>t.hasAffirmative||t.hasVets||t.hasDisability,availableTests:t=>t.kiosk&&t.kiosk.tests?t.kiosk.tests:[],hasTests:t=>t.kiosk&&t.kiosk.tests?t.kiosk.tests.length>0:!1,testForCraft:t=>{const{currentLang:e}=H(),{craftId:r}=Ae();let s=1;return e==="en-US"?s=1:e==="es"&&(s=2),t.kiosk&&t.kiosk.tests&&t.kiosk.tests.find(i=>i[15]===r&&i[16]===s)||!1}},actions:{async fetchKioskAccount(t,e){const r=`{'11'.EX.'${t.email}'}AND{'6'.EX.'Active'}`,s=[{7:{value:"Kiosks"},8:{value:r},9:{value:1},14:{value:30}}];if(!this.kiosk||e){const{data:i}=await A.fetchFromStructureApp({fields:s});if(i.length>0){const n=Object.assign({},i[0][37]);delete n.kiosk,i[0][37]=n,this.setKioskAccount(i[0],!0),t.ticket&&A.setKioskTicket(t.ticket),i[0][45]===!0&&this.setBookmarksOnly(!0,!0),i[0].bookmarks&&this.setBookmarks(i[0].bookmarks,!0)}return i}else return[this.kiosk]},async loginKiosk(t){const e=`{'10'.EX.'Active'}AND{'6'.EX.'${t.email}'}AND{'32'.EX.'Kiosk Profile'}`,r=[{7:{value:"User Request"},8:{value:e},9:{value:1},14:{value:77}}],{data:s}=await A.fetchFromStructureApp({fields:r}),i=[{6:{value:"login"}}];let n=await A.getIpInfo();if(n&&n.query)i[0][8]={value:n.ip?n.ip:"N/A"},i[0][10]={value:n.userAgent?n.userAgent:"N/A"},i[0][27]={value:n.continent?n.continent:"N/A"},i[0][28]={value:n.continentCode?n.continentCode:"N/A"},i[0][29]={value:n.country?n.country:"N/A"},i[0][30]={value:n.countryCode},i[0][31]={value:n.region?n.region:"N/A"},i[0][32]={value:n.regionName?n.regionName:"N/A"},i[0][33]={value:n.city?n.city:"N/A"},i[0][34]={value:n.district?n.district:"N/A"},i[0][38]={value:n.zip?n.zip:"N/A"},i[0][36]={value:n.lat?n.lat:"N/A"},i[0][37]={value:n.lon?n.lon:"N/A"},i[0][38]={value:n.timezone?n.timezone:"N/A"},i[0][39]={value:n.offset?n.offset:"N/A"},i[0][40]={value:n.isp?n.isp:"N/A"},i[0][41]={value:n.org?n.org:"N/A"},i[0][42]={value:n.as?n.as:"N/A"},i[0][43]={value:n.asname?n.asname:"N/A"},i[0][44]={value:n.mobile?n.mobile:!1},i[0][45]={value:n.proxy?n.proxy:!1},i[0][46]={value:n.hosting?n.hosting:!1},i[0][46]={value:n.hosting?n.hosting:"N/A"},i[0][47]={value:n.query?n.query:"N/A"};else{try{n=await A.fetchIpInfo()}catch{n=null}n&&n.query&&(i[0][8]={value:n.ip?n.ip:"N/A"},i[0][10]={value:n.userAgent?n.userAgent:"N/A"},i[0][27]={value:n.continent?n.continent:"N/A"},i[0][28]={value:n.continentCode?n.continentCode:"N/A"},i[0][29]={value:n.country?n.country:"N/A"},i[0][30]={value:n.countryCode},i[0][31]={value:n.region?n.region:"N/A"},i[0][32]={value:n.regionName?n.regionName:"N/A"},i[0][33]={value:n.city?n.city:"N/A"},i[0][34]={value:n.district?n.district:"N/A"},i[0][38]={value:n.zip?n.zip:"N/A"},i[0][36]={value:n.lat?n.lat:"N/A"},i[0][37]={value:n.lon?n.lon:"N/A"},i[0][38]={value:n.timezone?n.timezone:"N/A"},i[0][39]={value:n.offset?n.offset:"N/A"},i[0][40]={value:n.isp?n.isp:"N/A"},i[0][41]={value:n.org?n.org:"N/A"},i[0][42]={value:n.as?n.as:"N/A"},i[0][43]={value:n.asname?n.asname:"N/A"},i[0][44]={value:n.mobile?n.mobile:!1},i[0][45]={value:n.proxy?n.proxy:!1},i[0][46]={value:n.hosting?n.hosting:!1},i[0][47]={value:n.query?n.query:"N/A"})}if(s.length===1){const a=s[0];if(i[0][12]={value:a[3]},a[32]==="Kiosk Profile"){if(await Ve.compare(t.password,a[7]))return i[0][7]={value:"Successful"},await A.addLoginAttempt(i),this.fetchKioskAccountV2(a);throw i[0][7]={value:"Invalid Password"},{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}}else throw i[0][7]={value:"Invalid Login"},A.addLoginAttempt(i),{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}}else throw i[0][7]={value:"Invalid Login"},A.addLoginAttempt(i),{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}},async fetchKioskAccountV2(t,e){const r=`{'10'.EX.'Active'}AND{'6'.EX.'${t[6]}'}AND{'32'.EX.'Kiosk Profile'}`,s=[{7:{value:"User"},8:{value:r},9:{value:t[3]},14:{value:76}}],i=await A.fetchFromStructureApp({fields:s}),{user:n,access:a,permissions:o}=i.data;if(a.length>0){const c=[];a.forEach(l=>{l[7]==="Bookmark"&&c.push(l)}),this.setBookmarks(c,!0)}return n[113]===!0&&this.setBookmarksOnly(!0,!0),n[102]&&A.setKioskTicket(n[102]),console.log("fetchKioskV2:",n,a,o),n},setKioskAccount(t,e){const{setKioskActive:r}=H(),{setHiringCenter:s}=G();if(this.kiosk=t,r(!!t),e&&t)x.setItem(k.storageKioskAccount,t),r(!0),this.setLastKioskFetch();else if(!t){x.removeItem(k.storageKioskAccount),r(!1),this.removeLastKioskFetch(),s(null,e);return}if(t&&t[37]){const i=Object.assign({},t[37]);s(i,e)}},setBookmarks(t,e){let r=t||[];return r=Wt.concat(r),this.bookmarks=r,e&&t&&x.setItem(k.storageBookmarks,JSON.parse(JSON.stringify(r))),!0},setLastKioskFetch(){x.setItem(k.storageLastKioskFetch,p())},removeLastKioskFetch(){x.removeItem(k.storageLastKioskFetch)},setBookmarksFromStorage(t,e){return this.bookmarks=t,!0},setBookmarksOnly(t,e){this.bookMarksOnly=t,e&&x.setItem(k.storageBookmarksOnly,t),t||x.removeItem(k.storageBookmarksOnly)},removeBookmarks(){this.setBookmarksOnly(!1),this.kioskAvailable&&this.getBookMarksOnly&&this.setKioskAccount(null,!1),this.bookmarks=Wt,this.bookMarksOnly=!1,x.removeItem(k.storageBookmarks),x.removeItem(k.storageBookmarksOnly)}}}),Ae=ee("profile",{state:()=>({profile:{6:{field:"Related Employee"},15:{field:"Related Hiring Center"},19:{field:"Related Job"},23:{field:"First"},24:{field:"Middle"},25:{field:"Last"},26:{field:"Suffix"},27:{field:"Phone"},28:{field:"Email"},32:{field:"Street1"},33:{field:"Street2"},34:{field:"City"},35:{field:"State"},36:{field:"Zip"},37:{field:"Country"},38:{field:"Preferred Name"},40:{field:"Related Craft"},42:{field:"Related Experience Option"},44:{field:"Related Employment Status"},46:{field:"Related Contact Method"},49:{field:"Related Kiosk Session"},67:{field:"Related Available Language"}},voluntaryForms:{affirmative:{6:{field:"Related Kiosk Profile"},12:{field:"Related Hiring Center"},16:{field:"Related Affirmative Option (Gender)"},18:{field:"Related Job"},20:{field:"Related Affirmative Option (Ethnicity)"},22:{field:"Related Affirmative Option (Race)"},25:{field:"Related Kiosk Session"},24:{field:"Completion Timestamp"}},veterans:{6:{field:"Related Kiosk Profile"},8:{field:"Related Veteran Status Form"},10:{field:"Related Hiring Center"},16:{field:"Initials"},18:{field:"Related Kiosk Session"},17:{field:"Completion Timestamp"}},disability:{6:{field:"Completion Timestamp"},7:{field:"Name Entered"},8:{field:"Date Entered"},9:{field:"Related Kiosk Profile"},10:{field:"Related Disability Form"},15:{field:"Related Disability Form Option"},17:{field:"Related Hiring Center"},19:{field:"Related Job"},21:{field:"Related Kiosk Session"}},children:{vets:{field:"Veteran Form Selections",value:[]}}},step:0,loading:!0,completed:!1,jobBoardApplication:{},vetsSelections:null,vetsForm:null,craft:null,levelStartTest:null}),getters:{personalInfoNeeded(){const{employeeData:t}=U();return!(t[3]&&t[20]!==""&&t[22]!==""&&t[41]!==""&&t[43]!==""&&t[44]!==""&&t[45]!==""&&t[46]!=="")},onJobBoard(){const{getBoardApp:t}=Gi();return!(!t[3]||t[3]===void 0)},profileData:t=>t.profile,profileComplete:t=>t.completed,loadingState:t=>t.loading,proceedToTest(){const{onKiosk:t}=H(),{testForCraft:e}=Y(),{employeeData:r}=U();return r.needsTest&&r.needsTest?t&&!!e:!1},selectedPreferencesOnProfile(){return{craft:this.profile[40],language:this.profile[67]}},experienceLevelOnProfile(){return this.profile[42].value?this.profile[42].value:null},submitProfileData(){const{employeeData:t}=U(),{hiringCenter:e}=G(),r={},s=[3];for(const[i,n]of Object.entries(this.profile))n.value!==void 0&&n.value!==null&&(Object.assign(r,{[i]:{value:n.value}}),s.push(parseInt(i)));return r[6]===void 0?(Object.assign(r,{6:{value:t[3]}}),s.push(6)):r[6].value=t[3],r[15]===void 0?(Object.assign(r,{15:{value:e?e[3]:""}}),s.push(15)):r[15].value=e?e[3]:"",r[77]&&delete r[77],s.push(77),{to:"bp3gci48x",data:[r],fieldsToReturn:s}},submitDisabilityData(){const{employeeData:t}=U(),{hiringCenter:e}=G(),r={},s=[];for(const[i,n]of Object.entries(this.voluntaryForms.disability))n.value!==void 0&&n.value!==null&&(Object.assign(r,{[i]:{value:n.value}}),s.push(parseInt(i)));return r[17]===void 0?(Object.assign(r,{17:{value:e?e[3]:""}}),s.push(17)):r[17].value=e?e[3]:"",this.onJobBoard?r[24]===void 0?(Object.assign(r,{24:{value:this.jobBoardApplication[3]?this.jobBoardApplication[3]:""}}),s.push(24)):r[24].value=this.jobBoardApplication[3]?this.jobBoardApplication[3]:"":r[9]===void 0?(Object.assign(r,{9:{value:this.profile[3]?this.profile[3].value:""}}),s.push(9)):r[9].value=this.profile[3]?this.profile[3].value:"",r[22]===void 0?(Object.assign(r,{22:{value:t[3]?t[3]:""}}),s.push(22)):r[22].value=t[3]?t[3]:"",{to:"bqaiuve9q",data:[r],fieldsToReturn:s}},submitAffirmativeData(){const{employeeData:t}=U(),{hiringCenter:e}=G(),r={},s=[];for(const[i,n]of Object.entries(this.voluntaryForms.affirmative))n.value!==void 0&&n.value!==null&&(Object.assign(r,{[i]:{value:n.value}}),s.push(parseInt(i)));return r[12]===void 0?(Object.assign(r,{12:{value:e?e[3]:""}}),s.push(12)):r[12].value=e?e[3]:"",this.onJobBoard?r[38]===void 0?(Object.assign(r,{38:{value:this.jobBoardApplication[3]?this.jobBoardApplication[3]:""}}),s.push(38)):r[38].value=this.jobBoardApplication[3]?this.jobBoardApplication[3]:"":r[6]===void 0?(Object.assign(r,{6:{value:this.profile[3]?this.profile[3].value:""}}),s.push(6)):r[6].value=this.profile[3]?this.profile[3].value:"",r[35]===void 0?(Object.assign(r,{35:{value:t[3]?t[3]:""}}),s.push(35)):r[35].value=t[3]?t[3]:"",s.push(33),s.push(17),{to:"bp3gcmump",data:[r],fieldsToReturn:s}},async submitVeteransData(){const{employeeData:t}=U(),{hiringCenter:e}=G(),r={},s=[];if(this.vetsForm){for(const[i,n]of Object.entries(this.voluntaryForms.veterans))n.value!==void 0&&n.value!==null?(Object.assign(r,{[i]:{value:n.value}}),s.push(parseInt(i))):this.vetsForm[i]&&this.vetsForm[i].value&&(Object.assign(r,{[i]:{value:this.vetsForm[i].value}}),s.push(parseInt(i)));return r[10]===void 0?(Object.assign(r,{10:{value:e?e[3]:""}}),s.push(10)):r[10].value=e?e[3]:"",this.onJobBoard?r[20]===void 0?(Object.assign(r,{20:{value:this.jobBoardApplication[3]?this.jobBoardApplication[3]:""}}),s.push(20)):r[20].value=this.jobBoardApplication[3]?this.jobBoardApplication[3]:"":r[6]===void 0?(Object.assign(r,{6:{value:this.profile[3]?this.profile[3].value:""}}),s.push(6)):r[6].value=this.profile[3]?this.profile[3].value:"",r[19]===void 0?(Object.assign(r,{19:{value:t[3]?t[3]:""}}),s.push(19)):r[19].value=t[3]?t[3]:"",s.includes(3)||s.push(3),{to:"bqamq3kr4",data:[r],fieldsToReturn:s}}else return{}},vetsFormSelections(){const t=this.vetsSelections?this.vetsSelections:[],e=[];return t.length>0&&t.forEach(r=>{const s={};for(const[i,n]of Object.entries(r))n.value!==void 0&&n.value!==null&&Object.assign(s,{[i]:{value:n.value}});s[6]===void 0?Object.assign(s,{6:{value:this.voluntaryForms.veterans[3]?this.voluntaryForms.veterans[3].value:""}}):s[6].value=this.voluntaryForms.veterans[3]?this.voluntaryForms.veterans[3].value:"",this.onJobBoard||(s[10]===void 0?Object.assign(s,{10:{value:this.profile[19]?this.profile[19].value:""}}):s[10].value=this.profile[19]?this.profile[19].value:""),e.push(s)}),{to:"bqamrfpj9",data:e,fieldsToReturn:[1,2,3,8,9]}},startLevelForTest:t=>t.levelStartTest,craftId:t=>t.craft},actions:{async submitProfileToQB(){const{updateEmployeeData:t}=U(),{onKiosk:e}=H(),{testForCraft:r}=Y(),{hiringCenter:s}=G();if(this.onJobBoard)return(await t({fields:{16:{value:s[3]},20:{value:this.profile[23].value===void 0?"":this.profile[23].value},21:{value:this.profile[24].value===void 0?"":this.profile[24].value},22:{value:this.profile[25].value===void 0?"":this.profile[25].value},23:{value:this.profile[26].value===void 0?"":this.profile[26].value},41:{value:this.profile[32].value===void 0?"":this.profile[32].value},42:{value:this.profile[33].value===void 0?"":this.profile[33].value},43:{value:this.profile[34].value===void 0?"":this.profile[34].value},44:{value:this.profile[35].value===void 0?"":this.profile[35].value},45:{value:this.profile[36].value===void 0?"":this.profile[36].value},46:{value:this.profile[37].value===void 0?"":this.profile[37].value},51:{value:this.profile[40].value===void 0?"":this.profile[40].value},53:{value:this.profile[42].value===void 0?"":this.profile[42].value},55:{value:this.profile[44].value===void 0?"":this.profile[44].value},57:{value:this.profile[46].value===void 0?"":this.profile[46].value}}})).needsTest&&r?(t({fields:{122:{value:7}}}),this.storeLocalForage(),this.submitProfileData):(this.storeLocalForage(),this.submitProfileData);{const{data:i}=await A.upsertRecordsXML(this.submitProfileData);if(i[0]){const n=i[0];!this.profile[3]||this.profile[3].value===void 0?Object.assign(this.profile,{3:{value:i[0][3]}}):this.profile[3].value=i[0][3],!this.profile[77]||this.profile[77].value===void 0?Object.assign(this.profile,{77:{value:i[0][77]}}):this.profile[77].value=i[0][77];const a={16:{value:s[3]},20:{value:n[23]===void 0?"":n[23]},21:{value:n[24]===void 0?"":n[24]},22:{value:n[25]===void 0?"":n[25]},23:{value:n[26]===void 0?"":n[26]},41:{value:n[32]===void 0?"":n[32]},42:{value:n[33]===void 0?"":n[33]},43:{value:n[34]===void 0?"":n[34]},44:{value:n[35]===void 0?"":n[35]},45:{value:n[36]===void 0?"":n[36]},46:{value:n[37]===void 0?"":n[37]},51:{value:n[40]===void 0?"":n[40]},53:{value:n[42]===void 0?"":n[42]},55:{value:n[44]===void 0?"":n[44]},57:{value:n[46]===void 0?"":n[46]}},o=await t({fields:a});return o[119]!==void 0&&(this.profile[77].value=o[119]==="Yes"?"No":"Yes"),this.storeLocalForage(),o.needsTest&&r&&!e&&await t({fields:{122:{value:7}}}),n}else throw"Something went wrong"}},async submitDisabilityToQB(){const{updateEmployeeFromApp:t}=U(),{data:e}=await A.upsertRecordsXML(this.submitDisabilityData);if(e[0])Object.assign(this.voluntaryForms.disability,{3:{value:e[0][3]}}),t({action:"push",values:this.voluntaryForms.disability,key:"disability"});else throw"Something went wrong";return this.submitDisabilityData},async submitAffirmativeToQB(){const{updateEmployeeData:t}=U(),{data:e}=await A.upsertRecordsXML(this.submitAffirmativeData);if(e[0]){Object.assign(this.voluntaryForms.affirmative,{3:{value:e[0][3]}});const r={406:{value:e[0][33]},380:{value:e[0][17]}};t({fields:r})}else throw"Something went wrong";return this.submitAffirmativeData},async submitVeteransToQB(){const{updateEmployeeFromApp:t}=U(),e=await this.submitVeteransData,{data:r}=await A.upsertRecordsXML(e);if(r[0]){if(this.voluntaryForms.veterans[3]===void 0?Object.assign(this.voluntaryForms.veterans,{3:{value:r[0][3]}}):this.voluntaryForms.veterans[3].value=r[0][3],(await A.upsertRecordsXML(this.vetsFormSelections)).data.length>0)return Object.assign(this.voluntaryForms.veterans,{selections:r}),t({action:"push",values:this.voluntaryForms.veterans,key:"vets"}),!0;throw"Cannot save vets form selections"}else throw"Cannot save veterans"},async updateProfile(t){if(this.completed=t.completed===void 0?!1:t.completed,this.step=t.next?t.next:0,t.values&&Object.entries(t.values).length>0)for(const[e,r]of Object.entries(t.values))r&&(this.profile[e]!==void 0?(this.profile[e].value=r.value?r.value:r||"",this.profile[e].label=r.label?r.label:""):Object.assign(this.profile,{[e]:{value:!r.value||r.value===void 0?!r||r===void 0?"":r:r.value,label:!r.label||r.label===void 0?"":r.label}}));return this.storeLocalForage(),this.submitProfileData},async updateVoluntaryForm(t){this.step=t.next?t.next:0;const e=this.voluntaryForms[t.type];if(t.values&&Object.entries(t.values).length>0){for(const[r,s]of Object.entries(t.values))e[r]!==void 0?Array.isArray(e[r].value)?s.value&&Array.isArray(s.value)?s.value.forEach(i=>{e[r].value.push(i)}):s&&Array.isArray(s)?s.forEach(i=>{e[r].value.push(i)}):e[r].value.push(s.value?s.value:s||""):(e[r].value=s.value?s.value:s||"",e[r].label=s.label?s.label:""):Object.assign(e,{[r]:{value:s.value?s.value:s||"",label:s.label?s.label:""}});return!0}else throw"Missing data"},async updateVetsForm({next:t,values:e,selections:r}){return this.step=t||0,this.vetsForm=e,this.vetsSelections=r,!0},async updateVetsSelections(t){this.vetsSelections=t},updateStep(t){this.step=t},dataLoaded(t){this.loading=t===void 0?!1:t},toggleLoader(t){this.loading=t},setLevelStartTest(t){this.levelStartTest=t},setCraft(t){this.craft=t},resetProfile(){this.profile={6:{field:"Related Employee"},15:{field:"Related Hiring Center"},19:{field:"Related Job"},23:{field:"First"},24:{field:"Middle"},25:{field:"Last"},26:{field:"Suffix"},27:{field:"Phone"},28:{field:"Email"},32:{field:"Street1"},33:{field:"Street2"},34:{field:"City"},35:{field:"State"},36:{field:"Zip"},37:{field:"Country"},38:{field:"Preferred Name"},40:{field:"Related Craft"},42:{field:"Related Experience Option"},44:{field:"Related Employment Status"},46:{field:"Related Contact Method"},49:{field:"Related Kiosk Session"},67:{field:"Related Available Language"}},this.step=0,this.voluntaryForms={affirmative:{6:{field:"Related Kiosk Profile"},12:{field:"Related Hiring Center"},16:{field:"Related Affirmative Option (Gender)"},18:{field:"Related Job"},20:{field:"Related Affirmative Option (Ethnicity)"},22:{field:"Related Affirmative Option (Race)"},25:{field:"Related Kiosk Session"},24:{field:"Completion Timestamp"}},veterans:{6:{field:"Related Kiosk Profile"},8:{field:"Related Veteran Status Form"},10:{field:"Related Hiring Center"},16:{field:"Initials"},18:{field:"Related Kiosk Session"},17:{field:"Completion Timestamp"}},disability:{6:{field:"Completion Timestamp"},7:{field:"Name Entered"},8:{field:"Date Entered"},9:{field:"Related Kiosk Profile"},10:{field:"Related Disability Form"},15:{field:"Related Disability Form Option"},17:{field:"Related Hiring Center"},19:{field:"Related Job"},21:{field:"Related Kiosk Session"}},children:{vets:{field:"Veteran Form Selections",value:[]}}}},setProfile(t,e){this.profile=t,e&&x.setItem(k.storageProfile,t)},setProfileStep(t,e){this.step=t,e&&x.setItem(k.storageProfileStep,t)},setVoluntaryForms(t,e){this.voluntaryForms=t,e&&x.setItem(k.storageProfileVoluntaryForms,t)},storeLocalForage(){const t=JSON.parse(JSON.stringify(this.profile)),e=JSON.parse(JSON.stringify(this.voluntaryForms));x.setItem(k.storageProfile,t),x.setItem(k.storageProfileStep,this.step),x.setItem(k.storageProfileVoluntaryForms,e)}}}),U=ee("employee",{state:()=>({devEmployee:{3:46},employee:{},emergencyContacts:[],history:[],training:[{3:2,6:"Security Passport",7:1,8:"Identification Credentials",11:"",20:"IDs",21:1},{3:1,6:"TWIC Card",7:1,8:"Identification Credentials",11:"",20:"IDs",21:1}],jobBoardApplications:[]}),getters:{noTasks(){return!this.checkInActive&&this.employeeData.complete&&this.voluntaryFormsComplete&&!this.showInProcess&&!this.employeeData.needsTest},employeeActive(){return this.employeeData[408]==="Active"},checkInActive(){const{checkedIn:t,checkInData:e}=H();return this.showInProcess||this.employeeData[79]===6||e[36]?!1:!!(this.employeeData[408]==="Active"&&t)},voluntaryFormsSubmitted(){return this.employee[3]?{disability:this.employee.disability.length>0?this.employee.disability.sort((t,e)=>t[3]>e[3]?-1:1)[0]:null,affirmative:this.employee.affirmative.length>0?this.employee.affirmative.sort((t,e)=>t[3]>e[3]?-1:1)[0]:null,vets:this.employee.vets.length>0?this.employee.vets.filter(t=>t.selections.length>0).sort((t,e)=>t[3]>e[3]?-1:1)[0]:null}:null},voluntaryFormsComplete(){return!(!this.voluntaryFormsSubmitted||!this.voluntaryFormsSubmitted.disability||!this.voluntaryFormsSubmitted.affirmative||!this.voluntaryFormsSubmitted.vets)},applicationsSubmitted:t=>t.jobBoardApplications,showInProcess(){return this.employee[519]?this.employee[519]===1:!1},showEmployment(){return this.employee[408]?this.employee[408]==="Active":!1},employeeData:t=>t.employee,employeeAvailable(){return!!this.employee[3]},offerData(){return this.employee[1516]&&!Array.isArray(this.employee[1516].offer)?this.employee[1516].offer:null},processingData(){return this.employee[1516]&&!Array.isArray(this.employee[1516].processing)?this.employee[1516].processing:null},savedEmergencyContacts(){return this.emergencyContacts},savedHistory(){const t=[];return this.employee[513]&&this.employee[513].forEach(e=>{const r=e[12]&&e[12].includes("-")?e[12].split("-"):null,s=e[13]&&e[13].includes("-")?e[13].split("-"):null,i=r?J.buildDate({year:r[2],date:r[1],month:r[0]}):e[12],n=s?J.buildDate({year:s[2],date:s[1],month:s[0]}):e[13];e[12]=J.formatDate(i,"MM/DD/YYYY"),e[13]=J.formatDate(n,"MM/DD/YYYY"),Object.assign(e,{company:{value:e[6],label:e[7]}}),Object.assign(e,{craft:{value:e[15],label:e[16]}}),t.push(e)}),t},savedTraining(){return this.training},getEmployee:t=>t.employee,socialRequired:t=>{const{getCountry:e}=H();return e==="CA"?!t.employee[3]||t.employee[564]===""||!t.employee[564]:!t.employee[3]||t.employee[109]===""||!t.employee[109]}},actions:{addMatrixToEmployee({data:t}){Object.assign(this.employee,{[t.key]:t.value})},async updateEmployeeData({fields:t}){if(!t)throw"No Fields Provided";t[3]===void 0&&Object.assign(t,{3:{value:this.employeeData[3]}});const{data:e}=await A.upsertRecordsXML({to:"bp3gb7ng2",fieldsToReturn:[500],data:[t],formatObject:500}),r=e[0][500];return this.setEmployee(r,!0),r},setEmployee(t,e){const{setCraft:r,setLevelStartTest:s}=Ae();t[507]&&(this.emergencyContacts=t[507]),t.craft&&r(t.craft),t[53]&&s(t[53]),this.employee=t,e&&x.setItem(k.storageEmployeeKeyName,t)},async removeContact(t){await A.upsertRecordsXML({to:"bruxz7dsh",data:[{3:{value:t},17:{value:!0},18:{value:new Date}}],fieldsToReturn:[3,14],formatObject:14}),this.employee[507]=this.employee[507].filter(e=>e[3]!==t)},async addContact(t){const{data:e}=await A.upsertRecordsXML({to:"bruxz7dsh",data:[{6:{value:t[6]},7:{value:t[7]},8:{value:t[16]},10:{value:this.employee[3]},11:{value:t[11]}}],fieldsToReturn:[3,14],formatObject:14});if(!e.length>0)throw"Cannot save contact";t=e[0][14],this.employee[507].push(t)},async updateContact(t){const{data:e}=await A.upsertRecordsXML({to:"bruxz7dsh",data:[{3:{value:t[3]},6:{value:t[6]},7:{value:t[7]},8:{value:t[16]},11:{value:t[11]}}],fieldsToReturn:[3,14],formatObject:14});this.employee[507].forEach((r,s)=>{r[3]===t[3]&&(this.employee[507][s]=e[0][14])})},async addHistory(t){const e={6:{value:t.company.value},10:{value:t[10]},11:{value:t[11]},12:{value:t[12]},13:{value:t[13]},15:{value:t.craft.value},34:{value:this.employeeData[3]}};this.employeeData[234]>0&&Object.assign(e,{8:{value:this.employeeData[234]}});const{data:r}=await A.upsertRecordsXML({to:"bpzpy6pj7",data:[e],fieldsToReturn:[3]});if(!r.length>0)throw"Cannot save experience";t[3]=r[0][3],t[12]=J.formatDate(J.addToDate(t[12],{days:1}),"MM/DD/YYYY"),t[13]=J.formatDate(J.addToDate(t[13],{days:1}),"MM/DD/YYYY"),this.employee[513]&&Array.isArray(this.employee[513])?this.employee[513].push(t):this.employee[513]=[t]},async updateHistory(t){const{data:e}=await A.upsertRecordsXML({to:"bpzpy6pj7",data:[{3:{value:t[3]},6:{value:t.company.value},10:{value:t[10]},11:{value:t[11]},12:{value:t[12]},13:{value:t[13]},15:{value:t.craft.value},34:{value:this.employeeData[3]}}],fieldsToReturn:[3]});if(!e.length>0)throw"Cannot save history";t[12]=J.formatDate(J.addToDate(t[12],{days:1}),"MM/DD/YYYY"),t[13]=J.formatDate(J.addToDate(t[13],{days:1}),"MM/DD/YYYY"),this.employee[513].forEach((r,s)=>{r[3]===t[3]&&(this.employee[513][s]=t)})},async removeHistory(t){const{data:e}=await A.upsertRecordsXML({to:"bpzpy6pj7",data:[{3:{value:t},32:{value:!0},33:{value:new Date}}],fieldsToReturn:[3]});if(!e.length>0)throw"Cannot save history";this.employee[513]=this.employee[513].filter(r=>r[3]!==e[0][3])},addTraining(t){this.training.push(t)},updateTraining(t){this.training.forEach((e,r)=>{e[3]===t[3]&&(this.training[r]=t)})},removeTraining(t){this.training=this.training.filter(e=>e[3]!==t)},async applyOnBoard(t){const{data:e}=await A.upsertRecordsXML({to:"bsfq6uktu",data:[{6:{value:this.employeeData[3]},8:{value:t[56]},10:{value:t[3]},12:{value:t[61]}}],fieldsToReturn:[19],formatObject:19});if(e[0])return this.employee[537].push(e[0][19]),e;throw"Cannot apply"},async acceptDeployment(t){const{data:e}=await A.upsertRecordsXML({to:"bsf2qqd63",data:[{8:{value:this.employeeData[3]},9:{value:t},6:{value:new Date},7:{value:"accept"}}],fieldsToReturn:[11],formatObject:11});if(e[0])return this.employee[1516].processing=e[0][11],e;throw"Cannot accept"},updateEmployeeFromApp({action:t,values:e,key:r}){t==="push"?this.employee[r]===void 0?Object.assign(this.employee,{[r]:e}):this.employee[r].push(e):t==="replace"&&(this.employee[r]===void 0?Object.assign(this.employee,{[r]:e}):this.employee[r]=e)}}});class nl{formatName(e){if(typeof e!="string")return"";const r=e.trim().split(" ");if(r.length===1){if(e=e.toLowerCase(),e==="de"||e==="dela"||e==="del"||e==="las"||e==="y"||e==="la")return e;try{e=e.charAt(0).toUpperCase()+e.slice(1)}catch{e=e.charAt(0)+e.slice(1)}if(e.startsWith("Mc"))try{e=e.slice(0,2)+e.charAt(2).toUpperCase()+e.slice(3)}catch{e=e.slice(0,2)+e.charAt(2)+e.slice(3)}if(e.includes("'")){const s=e.indexOf("'");try{e=e.slice(0,s+1)+e.charAt(s+1).toUpperCase()+e.slice(s+2)}catch{e=e.slice(0,s+1)+e.charAt(s+1)+(e.slice(s+2)?e.slice(s+2):"")}}if(e.includes("-")){const s=e.indexOf("-");try{e=e.slice(0,s+1)+e.charAt(s+1).toUpperCase()+e.slice(s+2)}catch{e=e.slice(0,s+1)+e.charAt(s+1)+(e.slice(s+2)?e.slice(s+2):"")}}return e}else{for(let s=r.length-1;s>=0;s--)if(r[s]===""){r.splice(s);continue}else{try{r[s]=r[s].toLowerCase()}catch{return r[s]}if(r[s]==="de"||r[s]==="dela"||r[s]==="del"||r[s]==="la"||r[s]==="las"||r[s]==="y")if(s===0&&r[s]==="la"){try{r[s]=r[s].charAt(0).toUpperCase()+r[s].slice(1)}catch{r[s]=r[s].charAt(0)+r[s].slice(1)}continue}else continue;else{try{r[s]=r[s].charAt(0).toUpperCase()+r[s].slice(1)}catch{r[s]=r[s].charAt(0)+r[s].slice(1)}if(r[s].startsWith("Mc"))try{r[s]=r[s].slice(0,2)+r[s][2].toUpperCase()+r[s].slice(3)}catch{r[s]=r[s].slice(0,2)+r[s][2]+r[s].slice(3)}if(r[s].includes("'")){const i=r[s].indexOf("'");try{r[s]=r[s].slice(0,i+1)+r[s][i+1].toUpperCase()+(r[s].slice(i+2)?r[s].slice(i+2):"")}catch{r[s]=r[s].slice(0,i+1)+(r[s][i+1]?r[s][i+1]:"")+(r[s].slice(i+2)?r[s].slice(i+2):"")}}if(r[s].includes("-")){const i=r[s].indexOf("-");try{r[s]=r[s].slice(0,i+1)+r[s][i+1].toUpperCase()+r[s].slice(i+2)}catch{r[s]=r[s].slice(0,i+1)+(r[s][i+1]?r[s][i+1]:"")+(r[s].slice(i+2)?r[s].slice(i+2):"")}}}}return r.join(" ")}}calculateDuration(e){return J.getDateDiff(e.end,e.start,e.unit)}formatPhone(e){const s=(""+e).replace(/\D/g,"").match(/^(\d{3})(\d{3})(\d{4})$/);return s?`(${s[1]}) ${s[2]}-${s[3]}`:null}async converter(e){let r;return e&&Array.isArray(e)?(r=[],e.forEach(s=>{const i=JSON.parse(s);r.push(i)})):r=JSON.parse(e),r}async decode(e){if(e){const r=document.createElement("div");return r.innerHTML=e,r.childNodes[0].nodeValue}else return""}fileToBase64(e){return new Promise(r=>{const s=new FileReader;s.onload=function(i){r(i.target.result.split(",")[1])},s.readAsDataURL(e)})}}function al(){return{helpers:new nl}}const{helpers:ms}=al(),ol=25,yy=ee("assessment",{state:()=>({step:0,loading:!0,tools:[],testData:{allQuestions:[],selectedQuestions:[],completedQuestions:[],nextQuestions:null,testStatus:"In Progress",currentScope:0,loadIteration:0,qb:{testRecord:{3:{field:"Record ID#",value:24712},6:{field:"Related Kiosk Profile"},13:{field:"Related Hiring Center"},15:{field:"Related Employee"},17:{field:"Related Craft"},23:{field:"Related Available Language"},34:{field:"Test Completion Timestamp"},37:{field:"Test Status"},testQuestions:[{6:{field:"Related Test"},7:{field:"Related All Test Question"},11:{field:"Status"},questionResponse:[{6:{field:"Related Test Question"},8:{field:"Related Question Alternative"}}]}]}}},testId:null,qb:null,questions:[],answers:[],toolListId:null,toolChecklists:[]}),getters:{questionsLoaded(){return this.testData.allQuestions.length>0},nextQuestions(){return this.testData.nextQuestions?this.testData.nextQuestions:null},completedOnIteration(){return this.testData.completedQuestions.filter(t=>t.iteration===this.testData.loadIteration)},algo(){const t=this.testData.completedQuestions.filter(e=>e.selection[14]===1&&e.iteration===this.testData.loadIteration);return t!==void 0?t:[]},ratio(){return isNaN(this.algo.length/this.completedOnIteration.length)?0:(this.algo.length/this.completedOnIteration.length).toFixed(2)},nextScope(){return this.completedOnIteration.length>0?this.ratio>.6?this.testData.currentScope<6?this.testData.currentScope+1:this.testData.currentScope:this.ratio===.6?this.testData.currentScope:this.testData.currentScope>2?this.testData.currentScope-1:this.testData.currentScope:this.testData.currentScope},nextIteration(){return this.testData.loadIteration+1},timeToStop(){const t=this.testData.completedQuestions.filter(r=>r[23]>this.testData.currentScope).length,e=this.testData.completedQuestions.filter(r=>r[23]<this.testData.currentScope).length;return t>0&&e>0&&this.testData.completedQuestions.length>=ol},toolChecklistData(){const{testForCraft:t}=Y(),{hiringCenter:e}=G(),{employeeData:r}=U(),s={6:{value:this.testId?this.testId:0},11:{value:e?e[3]:0},15:{value:r[3]?r[3]:0},20:{value:t[15]?t[15]:0},22:{value:t[16]?t[16]:0}};return{to:"bp3gcpk2w",data:[s],fieldsToReturn:[3]}},toolsData(){const t=[];return this.tools.length>0&&this.tools.forEach(e=>{const r={6:{value:this.toolListId?this.toolListId:0},7:{value:e.value}};t.push(r)}),{to:"bp928wac2",data:t,fieldsToReturn:[3]}},availableToolChecklists:t=>t.toolChecklists,toolsForCraft(){const{testForCraft:t}=Y();if(t){const e=this.availableToolChecklists.find(r=>r[6]===t[3]);return e!==void 0?e[11]:[]}else return[]},toolListInstructions(){const{testForCraft:t}=Y();if(t){const e=this.availableToolChecklists.find(r=>r[6]===t[3]);return e!==void 0?e[13]:null}else return null},toolListName(){const{testForCraft:t}=Y();if(t){const e=this.availableToolChecklists.find(r=>r[6]===t[3]);return e!==void 0?e[8]:null}else return null}},actions:{async startAssessment(){const{profile:t}=Ae(),{testForCraft:e}=Y(),{hiringCenter:r}=G(),{employeeData:s,updateEmployeeData:i}=U(),n={13:{value:r[3]},15:{value:s[3]},17:{value:e[15]},23:{value:e[16]},51:{value:e[3]}};t[3]!==void 0&&Object.assign(n,{6:{value:t[3].value}});const{data:a}=await A.upsertRecordsXML({to:"bp3gckirf",data:[n],fieldsToReturn:[3]});if(a[0])return this.testId=a[0][3],i({fields:{122:{value:8}}}),a[0];throw"Something went wrong"},async finishAssessment(){const{metadata:t}=await A.upsertRecordsXML({to:"bp3gckirf",data:[{3:{value:this.testId},34:{value:new Date},37:{value:"Complete"}}],mergeFieldId:3,fieldsToReturn:[3]});if(t.updatedRecordIds[0]){const{data:e}=await A.upsertRecordsXML({to:"bp9np6ckn",data:this.questions,fieldsToReturn:[3,7]});if(!e.length>0)throw"Cannot save questions";{const r=[];e.forEach(i=>{const n=this.answers.findIndex(a=>a.link===i[7]);if(n>-1){const a={6:{value:i[3]},8:{value:this.answers[n][8]}};r.push(a)}});const{metadata:s}=await A.upsertRecordsXML({to:"bp9np9vk7",data:r,fieldsToReturn:[3]});if(!s.createdRecordIds.length===this.answers.length)throw"Something went wrong";return{success:!0}}}else throw"Cannot finish assessment"},async startToolChecklist(){const{data:t}=await A.upsertRecordsXML(this.toolChecklistData);if(t[0])return this.toolListId=t[0][3],t[0];throw"Cannot start checklist"},async finishToolChecklist(){const{metadata:t}=await A.upsertRecordsXML({to:"bp3gcpk2w",data:[{3:{value:this.toolListId},18:{value:new Date},17:{value:"Complete"}}],mergeFieldId:3,fieldsToReturn:[3]});if(t.updatedRecordIds[0]){const{data:e}=await A.upsertRecordsXML(this.toolsData);if(e.length>0)return!0;throw"Cannot save tools"}else throw"Cannot finish tool checklist"},async submitToQB(){const{profile:t}=Ae(),{testForCraft:e}=Y(),{hiringCenter:r}=G(),{devEmployee:s}=U();this.testData.qb.testRecord[6].value=t[3].value,this.testData.qb.testRecord[13].value=r[3],this.testData.qb.testRecord[15].value=s[3],this.testData.qb.testRecord[17].value=e[15],this.testData.qb.testRecord[23].value=e[16],this.testData.qb.testRecord[34].value=Date.now(),this.testData.qb.testRecord[37].value="Complete";const i=[];return this.testData.completedQuestions.forEach(n=>{const a={6:{value:this.testData.qb.testRecord[3].value},7:{value:n[8]},11:{value:"Complete"},questionResponse:[{6:{value:0},8:{value:n.selection[3]}}]};i.push(a)}),this.testData.qb.testRecord.testQuestions=i,this.testData.qb.testRecord},async updateAssessment(t){return this.step=t.next,t.type==="tools"&&(this.tools=t.values),!0},updateStep(t){this.step=t},dataLoaded(){this.loading=!1},async getAllQuestions(){const{testForCraft:t}=Y();if(this.questionsLoaded)return!0;if(t)try{const{data:e}=await A.fetchFromStructureApp({fields:[{6:{value:"bqamed7sr"},7:{value:"Table Query"},8:{value:`{'6'.EX.'${t[9]}'}`},9:{value:1},14:{value:17}}]});if(e)return e.forEach(async r=>{r[20]&&(r.hasImage=!0,r.imageData={src:r[22],alt:r[21]}),r[19].forEach(s=>{s.value=s[3],s.label=s[6]})}),this.testData.allQuestions=e,!0;throw"Something went wrong"}catch(e){console.log(e);const{data:r}=await A.doQuery({from:"bqamed7sr",where:`{'6'.EX.'${t[9]}'}`,select:[3,6,8,9,10,11,12,13,14,18,19,20,21,22,23,24],sortBy:[{fieldId:11,order:"ASC"}]});if(r)return r.forEach(async s=>{s[20]==="Yes"&&(s.hasImage=!0,s.imageData={src:s[22],alt:s[21]}),s[19]=await ms.converter(s[19]),s[24]=await ms.converter(s[24]),s[19].forEach(i=>{i.value=i[3],i.label=i[6]})}),this.testData.allQuestions=r,!0;throw"Something went wrong"}else throw"No test for craft"},async loadQuestionGroup(t,e){if(t!==void 0){const r=this.testData.allQuestions.filter(s=>s[23]===t);if(r.length>0)return r.length>5&&(r.length=5),r.forEach(s=>{s.response=null;const i=this.testData.allQuestions.findIndex(n=>n[3]===s[3]);i>-1&&this.testData.allQuestions.splice(i,1)}),this.testData.nextQuestions=r,this.testData.currentScope=t,this.testData.loadIteration=e,r;throw"There are no questions"}},async completeQuestion(t){const e=t.response,r=t[19].find(n=>n.value===e);if(r!==void 0)t.selection=r;else throw"No selection";t.iteration=this.testData.loadIteration,t.storedData={};const s={6:{value:this.testId},7:{value:t[8]},11:{value:"Complete"}};this.questions.push(s);const i={6:null,8:t.selection[3],link:t[8]};return this.answers.push(i),this.testData.completedQuestions.push(t),this.testData.nextQuestions=this.testData.nextQuestions.filter(n=>n[3]!==t[3]),{data:{nextQuestions:this.timeToStop?[]:this.testData.nextQuestions,scope:this.nextScope,iteration:this.nextIteration}}},async fetchCraftToolsFromStorage(){const t=await x.getItem(k.storageToolCheckList);if(t){for(let e=0;e<t.length;e++){const r=Object.keys(t[e]);for(let s=0;s<r.length;s++){typeof t[e][r[s]]=="object"&&t[e][r[s]]!==null&&Object.prototype.hasOwnProperty.call(t[e][r[s]],"$d")&&(t[e][r[s]]=p(t[e][r[s]].$d));try{t[e][r[s]].endsWith(".000Z")&&(t[e][r[s]]=p(t[e][r[s]]))}catch{}}}this.setCraftTools(t,!1)}else return!1},async fetchCraftTools(t){await this.fetchCraftToolsFromStorage();const e=[{6:{value:"bqamh3rpi"},7:{value:"Table Query"},8:{value:"{'10'.EX.'Active'}"},9:{value:1},14:{value:12}}];if(this.toolChecklists.length===0||t){const{data:r}=await A.fetchFromStructureApp({fields:e});return this.setCraftTools(r,!0),r}else return this.toolChecklists},setCraftTools(t,e){this.toolChecklists=t,e&&x.setItem(k.storageToolCheckList,t)}}}),se=ee("application",{state:()=>({formOptions:{crafts:[],experience:[],companies:[],credentials:[],relationships:[],employment:[],contactMethods:[]},voluntaryFormOptions:{affirmative:[],veterans:[],disability:{pages:[],options:[],form:{}}},formOptionsLoading:!1,voluntaryFormsLoading:!1,evergreenJobs:[]}),getters:{craftOptions:t=>t.formOptions.crafts,experienceOptions:t=>t.formOptions.experience,companyOptions:t=>t.formOptions.companies,credentialOptions:t=>t.formOptions.credentials,relationshipOptions:t=>t.formOptions.relationships,employmentOptions:t=>t.formOptions.employment,contactMethodOptions:t=>t.formOptions.contactMethods,affirmativeOptions:t=>t.voluntaryFormOptions.affirmative,veteranOptions:t=>t.voluntaryFormOptions.veterans,disabilityOptions:t=>t.voluntaryFormOptions.disability.options,disabilityPages:t=>t.voluntaryFormOptions.disability.pages,disabilityForm:t=>t.voluntaryFormOptions.disability.form,evergreenJobOptions:t=>t.evergreenJobs,formOptionsLoadingState:t=>t.formOptionsLoading,voluntaryLoadingState:t=>t.voluntaryFormsLoading,credentialGroups(){const t=[];return this.formOptions.credentials.forEach(e=>{const r={value:e[7],label:e[8],acronym:e[20],number:e[21]};t.find(i=>i.value===r.value)||t.push(r)}),t.sort((e,r)=>e.number>r.number?1:e.number<r.number?-1:0)},compiledCredentials(){const t=[];return this.credentialGroups.forEach(e=>{const r=e.value;e.list=[],this.formOptions.credentials.forEach(s=>{s[7]===r&&e.list.push(s)}),t.push(e)}),t}},actions:{async fetchFormOptions(){this.formOptionsLoading=!0;const t=[this.fetchExperienceOptions(),this.fetchContactMethodOptions(),this.fetchEmploymentOptions(),this.fetchCompanyOptions(),this.fetchCraftOptions(),this.fetchRelationshipOptions(),this.fetchEverGreenJobs()],e=await Promise.allSettled(t);return this.formOptionsLoading=!1,e},async fetchVoluntaryForms(){this.voluntaryFormsLoading=!0;const t=[this.fetchAffirmativeOptions(!0),this.fetchVeteranStatusOptions(),this.fetchDisabilityPages()],e=await Promise.allSettled(t);return this.voluntaryFormsLoading=!1,e},async fetchExperienceOptions(t){const e=[{7:{value:"Experience Options"},9:{value:1},14:{value:44}}];if(this.formOptions.experience.length===0||t){const{data:r}=await A.fetchFromRecruitingApp({fields:e});return this.setExperienceOptions(r,!0),r}else return this.formOptions.experience},setExperienceOptions(t,e){this.formOptions.experience=t,e&&x.setItem(k.storageExperienceOptions,t)},async fetchContactMethodOptions(t){const e=[{7:{value:"Contact Methods"},9:{value:1},14:{value:15}}];if(this.formOptions.contactMethods.length===0||t){const{data:r}=await A.fetchFromRecruitingApp({fields:e});return this.setContactMethods(r,!0),r}else return this.formOptions.contactMethods},setContactMethods(t,e){this.formOptions.contactMethods=t,e&&x.setItem(k.storageContactMethods,t)},async fetchEmploymentOptions(t){const e=[{7:{value:"Employment Options"},9:{value:1},14:{value:15}}];if(this.formOptions.employment.length===0||t){const{data:r}=await A.fetchFromRecruitingApp({fields:e});return this.setEmploymentOptions(r,!0),r}else return this.formOptions.employment},setEmploymentOptions(t,e){this.formOptions.employment=t,e&&x.setItem(k.storageEmploymentOptions,t)},async fetchCompanyOptions(t){const e=[{7:{value:"Company Options"},9:{value:1},14:{value:15}}];if(this.formOptions.companies.length===0||t){const{data:r}=await A.fetchFromStructureApp({fields:e});return this.setCompanyOptions(r,!0),r}else return this.formOptions.companies},setCompanyOptions(t,e){this.formOptions.companies=t,e&&x.setItem(k.storageCompanyOptions,t)},async fetchCraftOptions(t){const e=[{6:{value:"bp2pcb379"},7:{value:"Table Query"},8:{value:"{'12'.EX.'Yes'}"},9:{value:1},14:{value:59}}];if(this.formOptions.crafts.length===0||t){const{data:r}=await A.fetchFromStructureApp({fields:e});return this.setCraftOptions(r,!0),r}else return this.formOptions.crafts},setCraftOptions(t,e){this.formOptions.crafts=t,e&&x.setItem(k.storageCraftOptions,t)},async fetchRelationshipOptions(t){const e=[{6:{value:"brux2ptjd"},7:{value:"Table Query"},8:{value:"{'3'.GT.0}"},9:{value:1},14:{value:15}}];if(this.formOptions.relationships.length===0||t){const{data:r}=await A.fetchFromHiringApp({fields:e});return this.setRelationshipOptions(r,!0),r}else return this.formOptions.relationships},setRelationshipOptions(t,e){this.formOptions.relationships=t,e&&x.setItem(k.storageRelationshipOptions,t)},async fetchCredentialOptions(t){const e=[{6:{value:"bp2cdv2rd"},7:{value:"Table Query"},8:{value:"{'3'.GT.0}"},9:{value:1},14:{value:22}}];if(this.formOptions.credentials.length===0||t){const{data:r}=await A.fetchFromCredentialsAndTrainingApp({fields:e});return this.setCredentialOptions(r,!0),r}else return this.formOptions.credentials},setCredentialOptions(t,e){this.formOptions.credentials=t,e&&x.setItem(k.storageCredentialOptions,t)},async fetchAffirmativeOptions(t){const e=[{6:{value:"bqamkyebu"},7:{value:"Table Query"},8:{value:"{'7'.EX.'Active'}"},9:{value:1},14:{value:18}}];if(this.voluntaryFormOptions.affirmative.length===0||t){const{data:r}=await A.fetchFromCredentialsAndTrainingApp({fields:e});return r.forEach(s=>{s.val=s.value,s.value=s[3]}),this.setAffirmativeOptions(r,!0),r}else return this.voluntaryFormOptions.affirmative},setAffirmativeOptions(t,e){this.voluntaryFormOptions.affirmative=t,e&&x.setItem(k.storageAffirmativeOptions,t)},async fetchVeteranStatusOptions(t){const e=[{6:{value:"bqampwqag"},7:{value:"Table Query"},8:{value:"{'8'.EX.'Active'}"},9:{value:1},14:{value:14}}];if(this.voluntaryFormOptions.veterans.length===0||t){const{data:r}=await A.fetchFromCredentialsAndTrainingApp({fields:e});return this.setVeteranStatusOptions(r,!0),r}else return this.voluntaryFormOptions.veterans},setVeteranStatusOptions(t,e){this.voluntaryFormOptions.veterans=t,e&&x.setItem(k.storageVeteranStatusOptions,t)},async fetchDisabilityPages(t){const{hasDisability:e,kioskAccount:r}=Y();if(e){const s=[{6:{value:"bp96dpdmp"},7:{value:"Table Query"},8:{value:`{26.EX.${r.voluntaryForms.disability[9]}}AND{'46'.EX.'Active'}`},9:{value:1},14:{value:59}}],i=Object.assign({},r.voluntaryForms.disability);if(i.controlNumber=i[11],i.expiration=i[13],i.formId=i[12],i.rid=i[9],i.title=i[10],i.pages=this.voluntaryFormOptions.disability.pages,this.voluntaryFormOptions.disability.pages.length===0||t){const{data:n}=await A.fetchFromCredentialsAndTrainingApp({fields:s});return this.setDisabilityPages(n,!0),i.pages=n,this.setDisabilityForm(i,!0),n}else return this.voluntaryFormOptions.disability.pages}else return!1},setDisabilityPages(t,e){this.voluntaryFormOptions.disability.pages=t,e&&x.setItem(k.storageDisabilityPages,t)},setDisabilityForm(t,e){this.voluntaryFormOptions.disability.form=t,e&&x.setItem(k.storageDisabilityForm,t)},async fetchEverGreenJobs(t){const e=[{6:{value:"bpzpqe2q5"},7:{value:"Jobs"},8:{value:"{'60'.EX.'Yes'}AND{'71'.XEX.'Pending'}"},9:{value:1},14:{value:94}}];if(this.evergreenJobs.length===0||t){const{data:r}=await A.fetchFromStructureApp({fields:e});return this.setEverGreenJobs(r,!0),r}else return this.evergreenJobs},setEverGreenJobs(t,e){this.evergreenJobs=t,e&&x.setItem(k.storageEverGreenJobs,t)}}});var dt={get dev(){return!1},get baseURL(){return this.dev?this.productionURL:this.productionURL},get token(){return this.dev?this.prodToken:this.prodToken},productionURL:"https://api.disa.com/api",devURL:"https://apisandbox.disa.com/api",tokenType:"Basic",prodToken:"YnJhbmRzYWZ3YXlhcGk6WFhUSkxXNFMy",devToken:"QnJhbmRzYWZ3YXlhcGk6V0RYQ1YxTEM2"};class cl{constructor(e,r){R(this,"axiosIns",null);R(this,"config",F({},dt));R(this,"isAlreadyFetchingAccessToken",!1);R(this,"subscribers",[]);this.axiosIns=e,this.config=F(F({},this.config),r)}onAccessTokenFetched(e){this.subscribers=this.subscribers.filter(r=>r(e))}addSubscriber(e){this.subscribers.push(e)}async status(e,r,s){const i=[],n=[],a=[];let o={};r[10].forEach(w=>{const O=w.trim().replace("  "," ");a.push({name:O,label:`${O} Status`,status:"N/A",dateLabel:`Last ${O} Test`,date:"N/A",type:"DrugScreen"})}),(r[36]||r[10].includes("Background Only"))&&a.push({name:"Background",label:"Background Status",status:"Inactive",dateLabel:"Background Expiration Date",date:"N/A",type:"Background"});const c=[this.justChecking({ownerId:e.ownerId,socialSecurityNumbers:[e.ssn]},s),this.employeeStatus({employeeIdentifiers:{ssn:e.ssn}},s)],l=await Promise.allSettled(c),u=l[0].value.results;let y=[];if(l[1].status==="rejected")if(!e.firstName||!e.lastName||!e.phoneNumber)y=[];else{const w={employeeIdentifiers:{ssn:e.ssn,externalEmployeeId:gs(e.externalEmployeeId)?e.externalEmployeeId:""},firstName:e.firstName,lastName:e.lastName,phoneNumber:e.phoneNumber.replace(/[^0-9]/g,""),emailAddress:gs(e.email)?e.email:""};await this.createEmployee(w,s);try{y=await this.employeeStatus({employeeIdentifiers:{ssn:e.ssn}},s)}catch{y=[]}}else y=l[1].value;return u.length>0&&(o=u[0],o.dateChecked=p(),o.ownerStatus="Inactive",n.push({name:"Last Urine Test",date:p(o.lastUrineTest).isValid()?p(o.lastUrineTest).format("MM/DD/YYYY"):"N/A"}),n.push({name:"Last Hair Test",date:p(o.lastHairTest).isValid()?p(o.lastHairTest).format("MM/DD/YYYY"):"N/A"})),a.forEach(w=>{const O=y.find(C=>{const D=C.policyId.split("-")[1].trim().split("Consortium Policy")[0].trim();return D===w.name?C:(w.name==="DCCHT w/ Randoms"||w.name==="DCCHT w/  Randoms")&&(D==="DCCHT w/Randoms"||D==="DCCHT w/ Randoms")?w:""});w.name==="Background"&&(o.backgrounds==="Active"&&(w.status="Active"),w.date=p(o.backgroundsExpDate).isValid()?p(o.backgroundsExpDate).format("MM/DD/YYYY"):"N/A"),w.name==="NASAP"&&(o.nasapStatus==="Active"&&(w.status="Active"),w.date=p(o.lastNASAPTest).isValid()?p(o.lastNASAPTest).format("MM/DD/YYYY"):"N/A"),w.name.startsWith("DCCHA")&&(w.dateLabel="Last Urine Test",w.date=p(o.lastUrineTest).isValid()?p(o.lastUrineTest).format("MM/DD/YYYY"):"N/A"),w.name.startsWith("DCCHT")&&(w.dateLabel="Last Hair Test",w.date=p(o.lastHairTest).isValid()?p(o.lastHairTest).format("MM/DD/YYYY"):"N/A"),w.name==="DCCOF"&&(n.push({name:"Last Oral Fluid Test",date:p(o.lastOralFluidTest).isValid()?p(o.lastOralFluidTest).format("MM/DD/YYYY"):"N/A"}),w.date=p(o.lastOralFluidTest).isValid()?p(o.lastOralFluidTest).format("MM/DD/YYYY"):"N/A"),O&&(w=F(F({},w),O),w.status=O.policyStatus),i.push(w)}),i.find(w=>w.status==="Inactive"||w.status==="Inactive Retest"||w.status==="INACTIVE"||w.status==="Inactive Pending"||w.status==="")||o.dccStatus!=="ACTIVE"?o.ownerStatus="Inactive":o.ownerStatus="Active",{disaStatus:o,policies:i,testDates:n}}async justChecking(e){return this.axiosIns({method:"post",url:"/justChecking",data:e,withCredentials:!0}).then(r=>r.data).catch(r=>{throw r})}employeeStatus(e,r){return this.axiosIns.post("/employee/status",e,{headers:{Authorization:`Basic ${r}`}}).then(s=>s.data).catch(s=>{throw s})}policies(e){return this.axiosIns.get("/drugTest/policy",{headers:{Authorization:`Basic ${e}`}}).then(r=>r.data).catch(r=>{throw r})}testPurposes(e){return this.axiosIns.get("/drugTest/testPurpose",{headers:{Authorization:`Basic ${e}`}}).then(r=>r.data).catch(r=>{throw r})}clientLocations(e){return this.axiosIns.get("/client/locations",{headers:{Authorization:`Basic ${e}`}}).then(r=>r.data).catch(r=>{throw r})}collectionSites(e,r){let s="/drugTest/collectionSite";return e.collectionSiteId?s=`/drugTest/collectionSite/${e.collectionSiteId}`:e.zipCode&&e.radius?s=`/drugTest/collectionSite/zipCode/${e.zipCode}/radius/${e.radius}`:e.zipCode?s=`/drugTest/collectionSite/zipCode/${e.zipCode}`:e.countryCode&&e.stateProvinceCode&&e.cityName?s=`/drugTest/collectionSite/country/${e.countryCode}/stateProvince/${e.stateProvinceCode}/city/${e.cityName}`:e.countryCode&&e.stateProvinceCode&&(s=`/drugTest/collectionSite/country/${e.countryCode}/stateProvince/${e.stateProvinceCode}`),this.axiosIns.get(s,{headers:{Authorization:`Basic ${r}`}}).then(i=>i.data).catch(i=>{throw i})}orderECCF(e,r){return this.axiosIns.post("/drugTest/eccf/order",e,{headers:{Authorization:`Basic ${r}`}}).then(s=>s.data).catch(s=>{throw s})}validateECCF(e,r){return this.axiosIns.post("/drugTest/eccf/validate",e,{headers:{Authorization:`Basic ${r}`}}).then(s=>s.data).catch(s=>{throw s})}getECCFOrder(e,r){if(!e.authorizationNumber)throw"Authorization Number Required!";let s=`/drugTest/eccf/order/${e.authorizationNumber}`;return e.policyId&&e.authorizationNumber&&(s=`/drugTest/eccf/order/${e.authorizationNumber}/policy/${e.policyId}`),this.axiosIns.get(s,{headers:{Authorization:`Basic ${r}`}}).then(i=>i.data).catch(i=>{throw i})}getECCFOrderStatus(e,r){if(!e.authorizationNumber)throw"Authorization Number Required!";let s=`/drugTest/eccf/order/${e.authorizationNumber}/status`;return e.policyId&&e.authorizationNumber&&(s=`/drugTest/eccf/order/${e.authorizationNumber}/policy/${e.policyId}/status`),this.axiosIns.get(s,{headers:{Authorization:`Basic ${r}`}}).then(i=>i.data).catch(i=>{throw i})}}const gs=t=>!(typeof t=="undefined"||t===null||t==="");function ll(t,e){return{disa:new cl(t,e)}}const ul=mr(gr.create({baseURL:dt.baseURL,timeout:5e4,headers:{"Content-Type":"application/json",Authorization:`${dt.tokenType} ${dt.token}`}}),{maxRequests:6,perMilliseconds:1e3}),{disa:fl}=ll(ul,{}),pt=ee("hiring",{state:()=>({deployments:[],dispatches:[],inprocesses:[],assignments:[],flaggedAssignments:[],newEmployee:{}}),getters:{userAccess(){const{userAccess:t}=W();return t||[]},deploymentsForProject(){const{active:t}=W();return this.modifiedDeployment.length>0?this.modifiedDeployment.filter(e=>e.map.pid===t[3]):[]},alreadyArrived(){const{active:t}=W();return this.modifiedDeployment.filter(e=>e[20]==="Complete"&&e.map.pid===t[3])},deploymentQuery(){let t="";return this.userAccess.forEach((e,r)=>{t+=`{'134'.EX.'${e[3]}'}${r<this.userAccess.length-1?"OR":""}`}),`(${t})AND({'33'.OAF.'today'}OR{'33'.IR.'last 10 d'})AND({'20'.EX.'In Process'}OR{'20'.EX.'Complete'})AND{'128'.EX.'Yes'}AND({'27'.EX.'6'}OR{'27'.EX.'7'})`},dispatchQuery(){let t="";return this.userAccess.forEach((e,r)=>{t+=`{'94'.EX.'${e[3]}'}${r<this.userAccess.length-1?"OR":""}`}),`(${t})AND{'17'.EX.'In Process'}`},inProcessQuery(){let t="";return this.userAccess.forEach((e,r)=>{t+=`{'108'.EX.'${e[3]}'}${r<this.userAccess.length-1?"OR":""}`}),`(${t})AND{'37'.EX.'In Process'}`},assignmentQuery(){let t="";return this.userAccess.forEach((e,r)=>{t+=`{'74'.EX.'${e[3]}'}${r<this.userAccess.length-1?"OR":""}`}),`(${t})AND{'21'.EX.'In Process'}AND{'102'.EX.'Active'}`},pipelineForProject(){const{active:t}=W();return this.modifiedInProcess.concat(this.modifiedDispatch).concat(this.modifiedDeployment).filter(r=>r.map.pid===t[3])},assignmentsForProject(){const{active:t}=W();return this.modifiedAssignments.filter(e=>e.map.pid===t[3])},modifiedInProcess(){const t=[];return this.inprocesses.forEach(e=>{const r={pid:e[108],name:e[39],phone:e[14],status:"In Process",offerDate:e[197].$d,fullJob:e[106],craft:e[175],job:e[120],start:null,jobNumber:e[44],workdayId:e[216]};Object.assign(e,{map:r}),t.push(e)}),t},modifiedDeployment(){const t=[];return this.deployments.forEach(e=>{const r={pid:e[134],name:e[31],phone:e[42],status:"Deployed",offerDate:e[144]===void 0?"":e[144].$d,fullJob:e[45],craft:e[132],job:e[60],start:e[33],jobNumber:e[85],workdayId:e[152],contact:e[186]};Object.assign(e,{map:r}),t.push(e)}),t},modifiedDispatch(){const t=[];return this.dispatches.forEach(e=>{const r={pid:e[157],name:e[25],phone:e[14],status:"In Process",offerDate:e[165].$d,fullJob:e[45],craft:e[141],job:e[76],start:null,jobNumber:e[63],workdayId:e[178]};Object.assign(e,{map:r}),t.push(e)}),t},modifiedAssignments(){const t=[];return this.assignments.forEach(e=>{const r={pid:e[74],name:e[75],phone:e[76],status:"Arrived",offerDate:e[79].$d,fullJob:e[20],craft:e[68],job:e[33],start:e[1].$d,jobNumber:e[105],workdayId:e[104]};Object.assign(e,{map:r}),t.push(e)}),t},getFlaggedAssignments(){return this.assignmentsForProject.filter(t=>t[112])},getNewEmployee:t=>t.newEmployee},actions:{refreshAssignment({assignment:t}){const e=this.assignments.findIndex(r=>r[3]===t[3]);e>-1&&(this.assignments[e]=t)},async checkDisa({project:t,roster:e}){const r=[];e.forEach(i=>{i.employee[188].length===9&&r.push(i.employee[188])});const s={ownerId:t[322],socialSecurityNumbers:r};try{const n=(await fl.justChecking(s)).results;console.log(n);const a=[];n.forEach(c=>{c.dateChecked=p(),t[321][36]&&c.dccStatus==="ACTIVE"||c.dccStatus==="ACTIVE"?c.ownerStatus="Active":c.ownerStatus="Inactive";const l=c.socialSecurityNumber.slice(c.socialSecurityNumber.length-4),u=c.name.toLowerCase().trim(),y=e.filter(g=>g.employee[188].slice(g.employee[188].length-4)===l?g:null);if(y.length===1){const g={6:{value:y[0].employee[3]},7:{value:y[0].offer[3]},10:{value:JSON.stringify(c)}};a.push(g)}else if(y.length>1){const g=y.find(w=>{const O=w.employee[20].toLowerCase().trim().split(),C=w.employee[22].toLowerCase().trim().split();return u.includes(O)||u.includes(C)?w:null});if(g){const w={6:{value:g.employee[3]},7:{value:g.offer[3]},10:{value:JSON.stringify(c)}};a.push(w)}}else console.log(c)});const{data:o}=await A.upsertRecordsXML({to:"bsfjg3kz9",data:a,fieldsToReturn:[15],formatObject:15});if(!o.length>0)throw"Something went wrong";o.forEach(c=>{const l=this.assignments.findIndex(u=>u.employee[3]===c[15][6]);l>-1?this.assignments[l].employee[556]=c[15]:console.log("no employee found")})}catch(i){throw console.log(i),"Something went wrong"}},async checkHiringData(){const{getUser:t}=T();if(t[11]===11)return await this.getDeployments();if(t[11]===5)return await this.getHiringData()},async getHiringData(){const t=await this.getDeployments();return this.getDispatches(),this.getInProcesses(),this.getAssignments(),t},async getInProcesses(){if(this.inprocesses.length===0){const{data:t}=await A.fetchFromHiringApp({fields:[{6:{value:"bp3gawbee"},7:{value:"Table Query"},8:{value:this.inProcessQuery},9:{value:1},14:{value:239}}]});return this.inprocesses=t,t}else return this.inprocesses},async getDispatches(){if(this.dispatches.length===0){const{data:t}=await A.fetchFromHiringApp({fields:[{6:{value:"bp3gaxedv"},7:{value:"Table Query"},8:{value:this.dispatchQuery},9:{value:1},14:{value:193}}]});return this.dispatches=t,t}else return this.dispatches},async getDeployments(){if(this.deployments.length===0){const{data:t}=await A.fetchFromHiringApp({fields:[{6:{value:"bp3gaymc3"},7:{value:"Table Query"},8:{value:this.deploymentQuery},9:{value:1},14:{value:201}}]});return this.deployments=t,t}else return this.dispatches},async getAssignments(){if(this.assignments.length===0){const{data:t}=await A.fetchFromHiringApp({fields:[{6:{value:"bp3gazpqj"},7:{value:"Table Query"},8:{value:this.assignmentQuery},9:{value:1},14:{value:132}}]});return console.log(t),this.assignments=t,t}else return this.assignments},async updateArrival({row:t,added:e}){const r=t,s=this.deployments.find(i=>i[3]===r[3]?i:!1);s&&(e?(await this.addAssignment(s),await this.editEmployee({id:s.employee[3],status:7}),this.editDeployment(s[3],"Complete")):(await this.cancelAssignment(s),await this.editEmployee({id:s.employee[3],status:6}),this.editDeployment(s[3],"In Process")))},async editEmployee({id:t,status:e}){const{data:r}=await A.upsertRecordsXML({to:"bp3gb7ng2",data:[{3:{value:t},79:{value:e}}],fieldsToReturn:[3]});if(r[0]===void 0)throw"Something went wrong";return r[0]},async editDeployment(t,e){const{data:r}=await A.upsertRecordsXML({to:"bp3gaymc3",data:[{3:{value:t},20:{value:e},22:{value:new Date}}],fieldsToReturn:[201],formatObject:201});if(r[0]!==void 0){const s=this.deployments.findIndex(i=>i[3]===r[0][201][3]);s>-1&&(this.deployments[s]=r[0][201])}},async addAssignment(t){const{data:e}=await A.upsertRecordsXML({to:"bp3gazpqj",data:[{6:{value:t[3]},13:{value:t[15]},18:{value:t.employee[3]},60:{value:""}}],fieldsToReturn:[108],formatObject:108});if(e[0]===void 0)throw"There was an error";return this.assignments.push(e[0][108]),e[0]},async cancelAssignment(t){const{data:e}=await A.upsertRecordsXML({to:"bp3gazpqj",data:[{3:{value:t.assignment[0][3]},22:{value:new Date},21:{value:"Canceled"},19:{value:""},60:{value:""}}],fieldsToReturn:[108],formatObject:108});if(e[0]===void 0)throw"There was an error";{const r=this.assignments.findIndex(s=>s[3]===e[0][108][3]);r>-1&&this.assignments.splice(r,1)}return e[0]},async flagAssignment({record:t,status:e}){const{data:r}=await A.upsertRecordsXML({to:"bp3gazpqj",data:[{3:{value:t[3]},112:{value:e}}],fieldsToReturn:[108],formatObject:108});if(r[0]===void 0)throw"There was an error";{const s=this.assignments.findIndex(i=>i[3]===r[0][108][3]);s>-1&&(this.assignments[s]=r[0][108])}return r[0]},updateNewEmployee({info:t}){for(const[e,r]of Object.entries(t))this.newEmployee[e]===void 0?Object.assign(this.newEmployee,{[e]:{value:r}}):this.newEmployee[e]=r}}}),vs=ee("request",{state:()=>({requests:[],newRequest:{},addedClassifications:[],addedNames:[]}),getters:{getClassifications(){return this.addedClassifications},getNames(){const t=[];return this.addedClassifications.forEach(e=>{e.names.forEach(r=>{t.push(r)})}),t},activeProject(){const{active:t}=W();return t},requestOptions(){return{contacts:[...new Map(this.activeProject.contacts.map(t=>[t[18],t])).values()],crafts:this.activeProject.crafts,jobNumbers:this.activeProject.jobNumbers,locations:this.activeProject.locations,perdiem:this.activeProject.perdiem}},siteContacts(){return[...new Map(this.activeProject.contacts.map(t=>[t[18],t])).values()]},requestQuery(){const{userAccess:t}=T();let e="";return t.forEach((r,s)=>{e+=`{'6'.EX.'${r[9]}'}${s<t.length-1?"OR":""}`}),`(${e})AND{'14'.XEX.'Canceled'}AND{'147'.XEX.'6'}`},modifiedOpenRequests(){const{active:t}=W(),{modifiedInProcess:e,modifiedDispatch:r,modifiedDeployment:s,modifiedAssignments:i}=pt(),n=[];return t.openRequests.forEach(a=>{a.classes.forEach(c=>{Object.assign(c,{duration:c[17]==="Closed"?p.duration(p(c[50].$d).diff(p(c[29].$d))).humanize():p(c[50].$d).fromNow(),aboveAvg:c[23]>c.avgRate,aboveAmount:c[23]>c.avgRate?`$ ${(c[23]-c.avgRate).toFixed(2)} above average`:"",balance:c[18]-c.offers.filter(l=>l[21]==="Accepted").length,offers:c.offers,offersCount:c.offers.length,accepted:c.offers.filter(l=>l[21]==="Accepted"),rejected:c.offers.filter(l=>l[21]==="Rejected"),rescinded:c.offers.filter(l=>l[21]==="Rescinded"),need:c[18],title:`${c[43]} ${c[12]}`})});const o={openDate:a[82],closedDate:a[86],id:a[3],pid:a[6],office:a[103],jobNumber:a[27],offers:a.offers,offersCount:a.offers.length,accepted:a.offers.filter(c=>c[21]==="Accepted"),rejected:a.offers.filter(c=>c[21]==="Rejected"),rescinded:a.offers.filter(c=>c[21]==="Rescinded"),deployNumber:a[243],balance:a.classes.reduce((c,l)=>c+l[18],0)-a.offers.filter(c=>c[21]==="Accepted").length,need:a.classes.reduce((c,l)=>c+l[18],0),inprocesses:e.filter(c=>c[138]===a[3]),dispatches:r.filter(c=>c[95]===a[3]),deployments:s.filter(c=>c[80]===a[3]),assignments:i.filter(c=>c[109]===a[3]),status:a[14],hot:a[121],duration:p(a[82].$d).fromNow()};Object.assign(a,{map:o}),n.push(a)}),n},modifiedClosedRequests(){const{active:t}=W(),{modifiedInProcess:e,modifiedDispatch:r,modifiedDeployment:s,modifiedAssignments:i}=pt(),n=[];return t.closedRequests.forEach(a=>{a.classes.forEach(c=>{Object.assign(c,{duration:p.duration(p(c[50].$d).diff(p(c[29].$d))).humanize(),balance:c[18]-c.offers.filter(l=>l[21]==="Accepted").length,offers:c.offers,offersCount:c.offers.length,accepted:c.offers.filter(l=>l[21]==="Accepted"),rejected:c.offers.filter(l=>l[21]==="Rejected"),rescinded:c.offers.filter(l=>l[21]==="Rescinded"),need:c[18],title:`${c[43]} ${c[12]}`})});const o={created:p(a[82].$d).fromNow(),openDate:a[82],closedDate:a[86],id:a[3],pid:a[6],office:a[103],jobNumber:a[27],need:a.classes.reduce((c,l)=>c+l[18],0),offers:a.offers,offersCount:a.offers.length,accepted:a.offers.filter(c=>c[21]==="Accepted"),rejected:a.offers.filter(c=>c[21]==="Rejected"),rescinded:a.offers.filter(c=>c[21]==="Rescinded"),deployNumber:a[243],balance:a.classes.reduce((c,l)=>c+l[18],0)-a.offers.filter(c=>c[21]==="Accepted").length,inprocesses:e.filter(c=>c[138]===a[3]),dispatches:r.filter(c=>c[95]===a[3]),deployments:s.filter(c=>c[80]===a[3]),assignments:i.filter(c=>c[109]===a[3]),status:a[14],hot:a[121],duration:p.duration(p(a[82].$d).diff(p(a[86].$d))).humanize(),durationRaw:p.duration(p(a[82].$d).diff(p(a[86].$d))).as("milliseconds")};Object.assign(a,{map:o}),n.push(a)}),n},modifiedPendingRequests(){const{active:t}=W(),{modifiedInProcess:e,modifiedDispatch:r,modifiedDeployment:s,modifiedAssignments:i}=pt(),n=[];return t.pendingRequests.forEach(a=>{a.classes.forEach(c=>{Object.assign(c,{duration:p.duration(p(c[50].$d).diff(p(c[29].$d))).humanize(),balance:c[18]-c.offers.filter(l=>l[21]==="Accepted").length,offers:c.offers,offersCount:c.offers.length,accepted:c.offers.filter(l=>l[21]==="Accepted"),rejected:c.offers.filter(l=>l[21]==="Rejected"),rescinded:c.offers.filter(l=>l[21]==="Rescinded"),need:c[18],title:`${c[43]} ${c[12]}`})});const o={created:p(a[82].$d).fromNow(),openDate:a[82],closedDate:a[86],id:a[3],pid:a[6],office:a[103],jobNumber:a[27],need:a.classes.reduce((c,l)=>c+l[18],0),offers:a.offers,offersCount:a.offers.length,accepted:a.offers.filter(c=>c[21]==="Accepted"),rejected:a.offers.filter(c=>c[21]==="Rejected"),rescinded:a.offers.filter(c=>c[21]==="Rescinded"),deployNumber:a[243],balance:a.classes.reduce((c,l)=>c+l[18],0)-a.offers.filter(c=>c[21]==="Accepted").length,inprocesses:e.filter(c=>c[138]===a[3]),dispatches:r.filter(c=>c[95]===a[3]),deployments:s.filter(c=>c[80]===a[3]),assignments:i.filter(c=>c[109]===a[3]),status:a[14],hot:a[121],duration:p.duration(p(a[82].$d).diff(p(a[86].$d))).humanize(),durationRaw:p.duration(p(a[82].$d).diff(p(a[86].$d))).as("milliseconds")};Object.assign(a,{map:o}),n.push(a)}),n.sort((a,o)=>a[1].$d>o[1].$d?-1:1)},openRequestsForProject(){return this.modifiedOpenRequests.length>0?this.modifiedOpenRequests:[]},closedRequestsForProject(){return this.modifiedClosedRequests.length>0?this.modifiedClosedRequests:[]},pendingRequestsForProject(){return this.modifiedPendingRequests.length>0?this.modifiedPendingRequests:[]},openRequestsForProjectSummary(){const t=[];this.openRequestsForProject.forEach(s=>{s.classes.forEach(i=>{t.push(i)})});const{length:e}=t,r=t.reduce((s,i)=>s+i[23]/e,0);return{requestCount:this.openRequestsForProject.length,classCount:this.openRequestsForProject.reduce((s,i)=>s+i.classes.length,0),need:this.openRequestsForProject.reduce((s,i)=>s+i.map.need,0),offers:this.openRequestsForProject.reduce((s,i)=>s+i.map.offersCount,0),balance:this.openRequestsForProject.reduce((s,i)=>s+i.map.balance,0),avgRate:r.toFixed(2)}},closedRequestsForProjectSummary(){const t=[];this.closedRequestsForProject.forEach(s=>{s.classes.forEach(i=>{t.push(i)})});const{length:e}=t,r=t.reduce((s,i)=>s+i[23]/e,0);return{requestCount:this.closedRequestsForProject.length,classCount:this.closedRequestsForProject.reduce((s,i)=>s+i.classes.length,0),need:this.closedRequestsForProject.reduce((s,i)=>s+i.map.need,0),offers:this.closedRequestsForProject.reduce((s,i)=>s+i.map.offersCount,0),balance:this.closedRequestsForProject.reduce((s,i)=>s+i.map.balance,0),avgRate:r.toFixed(2),avgDuration:p.duration(this.closedRequestsForProject.reduce((s,i)=>s+i.map.durationRaw/this.closedRequestsForProject.length,0)).humanize()}},pendingRequestsForProjectSummary(){const t=[];this.pendingRequestsForProject.forEach(s=>{s.classes.forEach(i=>{t.push(i)})});const{length:e}=t,r=t.reduce((s,i)=>s+i[23]/e,0);return{requestCount:this.pendingRequestsForProject.length,classCount:this.pendingRequestsForProject.reduce((s,i)=>s+i.classes.length,0),need:this.pendingRequestsForProject.reduce((s,i)=>s+i.map.need,0),offers:this.pendingRequestsForProject.reduce((s,i)=>s+i.map.offersCount,0),balance:this.pendingRequestsForProject.reduce((s,i)=>s+i.map.balance,0),avgRate:r.toFixed(2)}},nameRequestsForProject(){const t=[],e=this.openRequestsForProject.concat(this.pendingRequestsForProject),r=[];return e.forEach(s=>{s.classes.forEach(i=>{r.push(i)})}),r.forEach(s=>{s.names.forEach(i=>{Object.assign(i,{expand:!1}),t.push(i)})}),t}},actions:{pushClassification(t){this.addedClassifications.push(t)},spliceClassification({item:t}){const e=this.addedClassifications.findIndex(r=>r.id===t.id);e>-1&&this.addedClassifications.splice(e,1)},pushName(t){const e=this.addedClassifications.findIndex(r=>r.id===t.classification.id);this.addedClassifications[e].names===void 0?Object.assign(this.addedClassifications[e],{names:[t]}):this.addedClassifications[e].names.push(t),console.log(this.addedClassifications),console.log(this.getNames)},spliceName({item:t}){const e=this.addedNames.findIndex(r=>r.id===t.id);e>-1&&this.addedNames.splice(e,1)},async storeRequest({request:t}){const{checkForMatch:e}=W(),r=await e({request:t}),{addPendingRequest:s}=W(),{getUser:i}=T();this.newRequest=t;const n={6:{value:this.activeProject[3]},14:{value:"Pending"},92:{value:this.activeProject[12]},9:{value:t.jobNumber[3]},31:{value:t.location[3]},60:{value:t.contact[3]},64:{value:J.formatDate(t.dateNeeded,"MM-DD-YYYY")},68:{value:t.perdiem!==void 0?"Yes":"No"},82:{value:new Date},272:{value:i[3]},147:{value:2},281:{value:!0},280:{value:r?r[3]:""},282:{value:t.restriction.value},284:{value:t.reason.value}};t.perdiem&&t.perdiem[3]!==void 0&&Object.assign(n,{65:{value:t.perdiem[3]}});const{data:a}=await A.upsertRecordsXML({to:"bpzpyjbuy",data:[n],fieldsToReturn:[266],formatObject:266});if(a.length>0){this.newRequest=a[0][266];const o=[],c=[];return this.addedClassifications.forEach(u=>{const y={6:{value:this.newRequest[3]},9:{value:u.job[3]},17:{value:"Pending"},18:{value:u.qty},23:{value:u.rate},238:{value:u.id}};o.push(y),u.names.length>0&&u.names.forEach(g=>{c.push(g)})}),(await this.upsertClassifications({fields:o,names:c})).forEach(u=>{this.newRequest.classes.push(u[220])}),s(this.newRequest),!0}else return!1},async addToRequest({request:t}){const{mergePendingRequest:e}=W();this.newRequest=t;const r=[],s=[];return this.addedClassifications.forEach(n=>{const a=t.classes.find(c=>c[9]===n.job[3]&&c[23]===parseFloat(n.rate)),o=a===void 0?{6:{value:this.newRequest[3]},9:{value:n.job[3]},17:{value:"Pending"},18:{value:parseInt(n.qty)<n.names.length?n.names.length:n.qty},23:{value:n.rate},238:{value:n.id}}:{3:{value:a[3]},18:{value:parseInt(n.qty)<n.names.length?n.names.length+a[18]:parseInt(n.qty)+a[18]},238:{value:n.id}};r.push(o),n.names.length>0&&n.names.forEach(c=>{s.push(c)})}),(await this.upsertClassifications({fields:r,names:s})).forEach(n=>{const a=!this.newRequest.classes||this.newRequest.classes.length===0?-1:this.newRequest.classes.findIndex(o=>o[3]===n[220][3]);a<0?this.newRequest.classes.push(n[220]):this.newRequest.classes[a]=n[220]}),e(this.newRequest),t},async upsertClassifications({fields:t,names:e}){const{getUser:r}=T(),{data:s}=await A.upsertRecordsXML({to:"bpzpyqcu4",data:t,fieldsToReturn:[220],formatObject:220});if(s.length>0)if(e.length>0){const i=[];e.forEach(a=>{const o={6:{value:a.firstName},7:{value:a.lastName},8:{value:a.phone},19:{value:p().tz("America/Chicago")},16:{value:a.ssn},10:{value:"Has Not Arrived"},14:{value:`${r[35]} ${r[37]}`}},c=s.find(l=>l[220][238]===a.classification.id);c!==void 0&&Object.assign(o,{17:{value:c[220][3]}}),i.push(o)});const n=await A.upsertRecordsXML({to:"bsg4yb4wa",data:i,fieldsToReturn:[15],formatObject:15});if(n.data.length>0)return n.data.forEach(a=>{const o=s.findIndex(c=>c[220][3]===a[15][17]);s[o][220].names===void 0?Object.assign(s[o][220],{names:[a[15]]}):s[o][220].names.push(a[15])}),s;throw"Something went wrong"}else return s;else throw"Something went wrong"},resetRequest(){this.newRequest={},this.addedClassifications=[],this.addedNames=[]},async submitCancelRequest({request:t}){const{removeRequest:e}=W(),{getUser:r}=T(),s=[];if(t.classes.forEach(n=>{const a={3:{value:n[3]},17:{value:"Cancelled"},51:{value:new Date},128:{value:6}};s.push(a)}),s.length>0)try{await A.upsertRecordsXML({to:"bpzpyqcu4",data:s,fieldsToReturn:[220],formatObject:220})}catch{throw"There was a problem. Try again later."}const{data:i}=await A.upsertRecordsXML({to:"bpzpyjbuy",data:[{3:{value:t[3]},14:{value:"Cancelled"},84:{value:new Date},147:{value:6},276:{value:r[3]},277:{value:`${r[35]} ${r[37]}`}}],fieldsToReturn:[266],formatObject:266});if(i.length>0)return e({request:i[0][266]}),!0;throw"There was a problem. Try again later."},async submitCancelClassification({item:t}){const{removeClassification:e}=W(),r=[{3:{value:t[3]},17:{value:"Cancelled"},51:{value:new Date},128:{value:6}}],{data:s}=await A.upsertRecordsXML({to:"bpzpyqcu4",data:r,fieldsToReturn:[220],formatObject:220});if(s.length>0){if(s[0][220][243]>0)return e({classification:s[0][220]}),"Classification removed!";{const i={3:s[0][220][6],classes:[]};return await this.submitCancelRequest({request:i}),"Classification removed and request canceled!"}}else throw"There was a problem. Try again later."},async upsertName({name:t,action:e}){const{getUser:r}=T(),{refreshClassification:s}=W(),i=e==="create"?{6:{value:t.firstName},7:{value:t.lastName},8:{value:t.phone},17:{value:t.classification[3]},19:{value:p().tz("America/Chicago")},16:{value:t.ssn},10:{value:"Has Not Arrived"},14:{value:`${r[35]} ${r[37]}`}}:{3:{value:t[3]},11:{value:!0},12:{value:p().tz("America/Chicago")},13:{value:`${r[35]} ${r[37]}`}},{data:n}=await A.upsertRecordsXML({to:"bsg4yb4wa",data:[i],fieldsToReturn:[20],formatObject:20});if(n[0]!==void 0)return s({classification:n[0][20]}),n[0][20]}}}),{capitalize:bs}=$n,W=ee("projects",{state:()=>({projects:[],requests:[],activeProject:{},matrixColumns:[]}),getters:{active(){return this.activeProject[3]!==void 0?this.activeProject:this.projects.length>0?this.projects[0]:{openRequests:[],closedRequests:[]}},userAccess(){return this.projects.length>0?this.projects:null},projectCrafts(){return this.active.crafts!==void 0?this.active.crafts.sort((t,e)=>t.order>e.order?1:-1):null},usersForProject(){return this.active.users!==void 0?this.active.users:[]},availableMatrixColumns(){const t=this.active?this.active.matrix:[],e=[];return this.matrixColumns.forEach(r=>{t.findIndex(i=>i[18]===r[12])<0&&e.push(r)}),e.forEach(r=>{const s=r[6].split(" ");let i="";s.forEach((n,a)=>{i+=a>0?` ${bs(n)}`:bs(n)}),r[6]=i}),e.length>0?[...new Map(e.map(r=>[r[6],r])).values()]:[]}},actions:{addNewMatrixColumn({project:t,data:e}){const r=this.projects.findIndex(s=>s[3]===t[3]);r>-1&&this.projects[r].matrix.push(e)},async getMatrixColumns(){if(this.matrixColumns.length===0){const{data:t}=await A.fetchFromProjectsApp({fields:[{14:{value:9},9:{value:1},8:{value:"{'13'.EX.false}"},7:{value:"Table Query"},6:{value:"bsjdig6gn"}}]});return this.matrixColumns=t,this.availableMatrixColumns}else return this.availableMatrixColumns},refreshClassification({classification:t}){const e=this.projects.findIndex(r=>r[3]===t[7]);if(t[131]==="Pending"){const r=this.projects[e].pendingRequests.findIndex(i=>i[3]===t[6]),s=this.projects[e].pendingRequests[r].classes.findIndex(i=>i[3]===t[3]);this.projects[e].pendingRequests[r].classes[s]=t}else if(t[131]==="Open"){const r=this.projects[e].openRequests.findIndex(i=>i[3]===t[6]),s=this.projects[e].openRequests[r].classes.findIndex(i=>i[3]===t[3]);this.projects[e].openRequests[r].classes[s]=t}},addUser({user:t}){this.projects.find(r=>r[3]===this.active[3]).users.push(t)},updateActive({project:t}){this.activeProject=t},async getProjectsData(){const{userAccess:t}=T();return t.forEach(e=>{if(e[7]==="Project"){const r=e.project?e.project:{};(r[3]===void 0?0:this.projects.findIndex(i=>i[3]===r[3]))<0&&this.projects.push(r)}else e[7]==="Facility"&&e.facility.projects.forEach(s=>{this.projects.findIndex(n=>n[3]===s[3])<0&&this.projects.push(s)})}),this.projects},addPendingRequest(t){const e=this.projects.findIndex(r=>r[3]===t[6]);if(e>-1){this.projects[e].pendingRequests.unshift(t);const{resetRequest:r}=vs();r()}},mergePendingRequest(t){console.log(t),Object.assign(t,{updated:!0});const e=this.projects.findIndex(r=>r[3]===t[6]);if(e>-1){const r=this.projects[e].pendingRequests.findIndex(i=>i[3]===t[3]);r>-1&&(this.projects[e].pendingRequests[r]=t,setTimeout(()=>{this.projects[e].pendingRequests[r].updated=!1},1e4));const{resetRequest:s}=vs();s()}},removeRequest({request:t}){const e=this.projects.findIndex(r=>r[3]===t[6]);if(e>-1){const r=this.projects[e].pendingRequests.findIndex(s=>s[3]===t[3]);r>-1&&this.projects[e].pendingRequests.splice(r,1)}},removeClassification({classification:t}){const e=this.projects.findIndex(r=>r[3]===t[7]);if(e>-1){const r=this.projects[e].pendingRequests.findIndex(s=>s[3]===t[6]);if(r>-1){const s=this.projects[e].pendingRequests[r].classes.findIndex(i=>i[3]===t[3]);s>-1&&this.projects[e].pendingRequests[r].classes.splice(s,1)}}},udpateProjectCrafts({craft:t}){const e=this.projects.findIndex(r=>r[3]===t[7]);if(e>-1){const r=this.projects[e].crafts.findIndex(s=>s[3]===t[3]);r>-1&&(this.projects[e].crafts[r]=t)}},async checkForMatch({request:t}){let e;return t.perdiem===void 0?e=this.active.openRequests.filter(r=>r[9]===t.jobNumber[3]&&r[31]===t.location[3]&&r[60]===t.contact[3]):e=this.active.openRequests.filter(r=>r[9]===t.jobNumber[3]&&r[31]===t.location[3]&&r[60]===t.contact[3]&&r[65]===t.perdiem[3]),e.length>0?(e.sort((r,s)=>r[1].$d<s[1].$d?1:-1),e[0]):null}}});function dl(){this.__data__=[],this.size=0}var pl=dl;function hl(t,e){return t===e||t!==t&&e!==e}var kt=hl,yl=kt;function ml(t,e){for(var r=t.length;r--;)if(yl(t[r][0],e))return r;return-1}var Ct=ml,gl=Ct,vl=Array.prototype,bl=vl.splice;function xl(t){var e=this.__data__,r=gl(e,t);if(r<0)return!1;var s=e.length-1;return r==s?e.pop():bl.call(e,r,1),--this.size,!0}var wl=xl,Al=Ct;function Sl(t){var e=this.__data__,r=Al(e,t);return r<0?void 0:e[r][1]}var Ol=Sl,Il=Ct;function kl(t){return Il(this.__data__,t)>-1}var Cl=kl,$l=Ct;function Tl(t,e){var r=this.__data__,s=$l(r,t);return s<0?(++this.size,r.push([t,e])):r[s][1]=e,this}var Pl=Tl,Rl=pl,jl=wl,Dl=Ol,El=Cl,Fl=Pl;function Le(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var s=t[e];this.set(s[0],s[1])}}Le.prototype.clear=Rl;Le.prototype.delete=jl;Le.prototype.get=Dl;Le.prototype.has=El;Le.prototype.set=Fl;var $t=Le,Nl=$t;function ql(){this.__data__=new Nl,this.size=0}var _l=ql;function Ml(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var Ll=Ml;function Ul(t){return this.__data__.get(t)}var Bl=Ul;function Hl(t){return this.__data__.has(t)}var zl=Hl,Kl=typeof We=="object"&&We&&We.Object===Object&&We,Zi=Kl,Yl=Zi,Ql=typeof self=="object"&&self&&self.Object===Object&&self,Xl=Yl||Ql||Function("return this")(),Ue=Xl,Wl=Ue,Vl=Wl.Symbol,en=Vl,xs=en,tn=Object.prototype,Jl=tn.hasOwnProperty,Gl=tn.toString,Xe=xs?xs.toStringTag:void 0;function Zl(t){var e=Jl.call(t,Xe),r=t[Xe];try{t[Xe]=void 0;var s=!0}catch{}var i=Gl.call(t);return s&&(e?t[Xe]=r:delete t[Xe]),i}var eu=Zl,tu=Object.prototype,ru=tu.toString;function su(t){return ru.call(t)}var iu=su,ws=en,nu=eu,au=iu,ou="[object Null]",cu="[object Undefined]",As=ws?ws.toStringTag:void 0;function lu(t){return t==null?t===void 0?cu:ou:As&&As in Object(t)?nu(t):au(t)}var Tt=lu;function uu(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var $e=uu,fu=Tt,du=$e,pu="[object AsyncFunction]",hu="[object Function]",yu="[object GeneratorFunction]",mu="[object Proxy]";function gu(t){if(!du(t))return!1;var e=fu(t);return e==hu||e==yu||e==pu||e==mu}var Ur=gu,vu=Ue,bu=vu["__core-js_shared__"],xu=bu,Vt=xu,Ss=function(){var t=/[^.]+$/.exec(Vt&&Vt.keys&&Vt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function wu(t){return!!Ss&&Ss in t}var Au=wu,Su=Function.prototype,Ou=Su.toString;function Iu(t){if(t!=null){try{return Ou.call(t)}catch{}try{return t+""}catch{}}return""}var ku=Iu,Cu=Ur,$u=Au,Tu=$e,Pu=ku,Ru=/[\\^$.*+?()[\]{}|]/g,ju=/^\[object .+?Constructor\]$/,Du=Function.prototype,Eu=Object.prototype,Fu=Du.toString,Nu=Eu.hasOwnProperty,qu=RegExp("^"+Fu.call(Nu).replace(Ru,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function _u(t){if(!Tu(t)||$u(t))return!1;var e=Cu(t)?qu:ju;return e.test(Pu(t))}var Mu=_u;function Lu(t,e){return t==null?void 0:t[e]}var Uu=Lu,Bu=Mu,Hu=Uu;function zu(t,e){var r=Hu(t,e);return Bu(r)?r:void 0}var Br=zu,Ku=Br,Yu=Ue,Qu=Ku(Yu,"Map"),rn=Qu,Xu=Br,Wu=Xu(Object,"create"),Pt=Wu,Os=Pt;function Vu(){this.__data__=Os?Os(null):{},this.size=0}var Ju=Vu;function Gu(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Zu=Gu,ef=Pt,tf="__lodash_hash_undefined__",rf=Object.prototype,sf=rf.hasOwnProperty;function nf(t){var e=this.__data__;if(ef){var r=e[t];return r===tf?void 0:r}return sf.call(e,t)?e[t]:void 0}var af=nf,of=Pt,cf=Object.prototype,lf=cf.hasOwnProperty;function uf(t){var e=this.__data__;return of?e[t]!==void 0:lf.call(e,t)}var ff=uf,df=Pt,pf="__lodash_hash_undefined__";function hf(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=df&&e===void 0?pf:e,this}var yf=hf,mf=Ju,gf=Zu,vf=af,bf=ff,xf=yf;function Be(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var s=t[e];this.set(s[0],s[1])}}Be.prototype.clear=mf;Be.prototype.delete=gf;Be.prototype.get=vf;Be.prototype.has=bf;Be.prototype.set=xf;var wf=Be,Is=wf,Af=$t,Sf=rn;function Of(){this.size=0,this.__data__={hash:new Is,map:new(Sf||Af),string:new Is}}var If=Of;function kf(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var Cf=kf,$f=Cf;function Tf(t,e){var r=t.__data__;return $f(e)?r[typeof e=="string"?"string":"hash"]:r.map}var Rt=Tf,Pf=Rt;function Rf(t){var e=Pf(this,t).delete(t);return this.size-=e?1:0,e}var jf=Rf,Df=Rt;function Ef(t){return Df(this,t).get(t)}var Ff=Ef,Nf=Rt;function qf(t){return Nf(this,t).has(t)}var _f=qf,Mf=Rt;function Lf(t,e){var r=Mf(this,t),s=r.size;return r.set(t,e),this.size+=r.size==s?0:1,this}var Uf=Lf,Bf=If,Hf=jf,zf=Ff,Kf=_f,Yf=Uf;function He(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var s=t[e];this.set(s[0],s[1])}}He.prototype.clear=Bf;He.prototype.delete=Hf;He.prototype.get=zf;He.prototype.has=Kf;He.prototype.set=Yf;var Qf=He,Xf=$t,Wf=rn,Vf=Qf,Jf=200;function Gf(t,e){var r=this.__data__;if(r instanceof Xf){var s=r.__data__;if(!Wf||s.length<Jf-1)return s.push([t,e]),this.size=++r.size,this;r=this.__data__=new Vf(s)}return r.set(t,e),this.size=r.size,this}var Zf=Gf,ed=$t,td=_l,rd=Ll,sd=Bl,id=zl,nd=Zf;function ze(t){var e=this.__data__=new ed(t);this.size=e.size}ze.prototype.clear=td;ze.prototype.delete=rd;ze.prototype.get=sd;ze.prototype.has=id;ze.prototype.set=nd;var ad=ze,od=Br,cd=function(){try{var t=od(Object,"defineProperty");return t({},"",{}),t}catch{}}(),sn=cd,ks=sn;function ld(t,e,r){e=="__proto__"&&ks?ks(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var Hr=ld,ud=Hr,fd=kt;function dd(t,e,r){(r!==void 0&&!fd(t[e],r)||r===void 0&&!(e in t))&&ud(t,e,r)}var nn=dd;function pd(t){return function(e,r,s){for(var i=-1,n=Object(e),a=s(e),o=a.length;o--;){var c=a[t?o:++i];if(r(n[c],c,n)===!1)break}return e}}var hd=pd,yd=hd,md=yd(),gd=md,hr={exports:{}};(function(t,e){var r=Ue,s=e&&!e.nodeType&&e,i=s&&!0&&t&&!t.nodeType&&t,n=i&&i.exports===s,a=n?r.Buffer:void 0,o=a?a.allocUnsafe:void 0;function c(l,u){if(u)return l.slice();var y=l.length,g=o?o(y):new l.constructor(y);return l.copy(g),g}t.exports=c})(hr,hr.exports);var vd=Ue,bd=vd.Uint8Array,xd=bd,Cs=xd;function wd(t){var e=new t.constructor(t.byteLength);return new Cs(e).set(new Cs(t)),e}var Ad=wd,Sd=Ad;function Od(t,e){var r=e?Sd(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var Id=Od;function kd(t,e){var r=-1,s=t.length;for(e||(e=Array(s));++r<s;)e[r]=t[r];return e}var Cd=kd,$d=$e,$s=Object.create,Td=function(){function t(){}return function(e){if(!$d(e))return{};if($s)return $s(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Pd=Td;function Rd(t,e){return function(r){return t(e(r))}}var jd=Rd,Dd=jd,Ed=Dd(Object.getPrototypeOf,Object),an=Ed,Fd=Object.prototype;function Nd(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Fd;return t===r}var on=Nd,qd=Pd,_d=an,Md=on;function Ld(t){return typeof t.constructor=="function"&&!Md(t)?qd(_d(t)):{}}var Ud=Ld;function Bd(t){return t!=null&&typeof t=="object"}var it=Bd,Hd=Tt,zd=it,Kd="[object Arguments]";function Yd(t){return zd(t)&&Hd(t)==Kd}var Qd=Yd,Ts=Qd,Xd=it,cn=Object.prototype,Wd=cn.hasOwnProperty,Vd=cn.propertyIsEnumerable,Jd=Ts(function(){return arguments}())?Ts:function(t){return Xd(t)&&Wd.call(t,"callee")&&!Vd.call(t,"callee")},ln=Jd,Gd=Array.isArray,un=Gd,Zd=9007199254740991;function ep(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Zd}var fn=ep,tp=Ur,rp=fn;function sp(t){return t!=null&&rp(t.length)&&!tp(t)}var zr=sp,ip=zr,np=it;function ap(t){return np(t)&&ip(t)}var op=ap,bt={exports:{}};function cp(){return!1}var lp=cp;(function(t,e){var r=Ue,s=lp,i=e&&!e.nodeType&&e,n=i&&!0&&t&&!t.nodeType&&t,a=n&&n.exports===i,o=a?r.Buffer:void 0,c=o?o.isBuffer:void 0,l=c||s;t.exports=l})(bt,bt.exports);var up=Tt,fp=an,dp=it,pp="[object Object]",hp=Function.prototype,yp=Object.prototype,dn=hp.toString,mp=yp.hasOwnProperty,gp=dn.call(Object);function vp(t){if(!dp(t)||up(t)!=pp)return!1;var e=fp(t);if(e===null)return!0;var r=mp.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&dn.call(r)==gp}var bp=vp,xp=Tt,wp=fn,Ap=it,Sp="[object Arguments]",Op="[object Array]",Ip="[object Boolean]",kp="[object Date]",Cp="[object Error]",$p="[object Function]",Tp="[object Map]",Pp="[object Number]",Rp="[object Object]",jp="[object RegExp]",Dp="[object Set]",Ep="[object String]",Fp="[object WeakMap]",Np="[object ArrayBuffer]",qp="[object DataView]",_p="[object Float32Array]",Mp="[object Float64Array]",Lp="[object Int8Array]",Up="[object Int16Array]",Bp="[object Int32Array]",Hp="[object Uint8Array]",zp="[object Uint8ClampedArray]",Kp="[object Uint16Array]",Yp="[object Uint32Array]",q={};q[_p]=q[Mp]=q[Lp]=q[Up]=q[Bp]=q[Hp]=q[zp]=q[Kp]=q[Yp]=!0;q[Sp]=q[Op]=q[Np]=q[Ip]=q[qp]=q[kp]=q[Cp]=q[$p]=q[Tp]=q[Pp]=q[Rp]=q[jp]=q[Dp]=q[Ep]=q[Fp]=!1;function Qp(t){return Ap(t)&&wp(t.length)&&!!q[xp(t)]}var Xp=Qp;function Wp(t){return function(e){return t(e)}}var Vp=Wp,yr={exports:{}};(function(t,e){var r=Zi,s=e&&!e.nodeType&&e,i=s&&!0&&t&&!t.nodeType&&t,n=i&&i.exports===s,a=n&&r.process,o=function(){try{var c=i&&i.require&&i.require("util").types;return c||a&&a.binding&&a.binding("util")}catch{}}();t.exports=o})(yr,yr.exports);var Jp=Xp,Gp=Vp,Ps=yr.exports,Rs=Ps&&Ps.isTypedArray,Zp=Rs?Gp(Rs):Jp,pn=Zp;function eh(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var hn=eh,th=Hr,rh=kt,sh=Object.prototype,ih=sh.hasOwnProperty;function nh(t,e,r){var s=t[e];(!(ih.call(t,e)&&rh(s,r))||r===void 0&&!(e in t))&&th(t,e,r)}var ah=nh,oh=ah,ch=Hr;function lh(t,e,r,s){var i=!r;r||(r={});for(var n=-1,a=e.length;++n<a;){var o=e[n],c=s?s(r[o],t[o],o,r,t):void 0;c===void 0&&(c=t[o]),i?ch(r,o,c):oh(r,o,c)}return r}var uh=lh;function fh(t,e){for(var r=-1,s=Array(t);++r<t;)s[r]=e(r);return s}var dh=fh,ph=9007199254740991,hh=/^(?:0|[1-9]\d*)$/;function yh(t,e){var r=typeof t;return e=e==null?ph:e,!!e&&(r=="number"||r!="symbol"&&hh.test(t))&&t>-1&&t%1==0&&t<e}var yn=yh,mh=dh,gh=ln,vh=un,bh=bt.exports,xh=yn,wh=pn,Ah=Object.prototype,Sh=Ah.hasOwnProperty;function Oh(t,e){var r=vh(t),s=!r&&gh(t),i=!r&&!s&&bh(t),n=!r&&!s&&!i&&wh(t),a=r||s||i||n,o=a?mh(t.length,String):[],c=o.length;for(var l in t)(e||Sh.call(t,l))&&!(a&&(l=="length"||i&&(l=="offset"||l=="parent")||n&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||xh(l,c)))&&o.push(l);return o}var Ih=Oh;function kh(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var Ch=kh,$h=$e,Th=on,Ph=Ch,Rh=Object.prototype,jh=Rh.hasOwnProperty;function Dh(t){if(!$h(t))return Ph(t);var e=Th(t),r=[];for(var s in t)s=="constructor"&&(e||!jh.call(t,s))||r.push(s);return r}var Eh=Dh,Fh=Ih,Nh=Eh,qh=zr;function _h(t){return qh(t)?Fh(t,!0):Nh(t)}var mn=_h,Mh=uh,Lh=mn;function Uh(t){return Mh(t,Lh(t))}var Bh=Uh,js=nn,Hh=hr.exports,zh=Id,Kh=Cd,Yh=Ud,Ds=ln,Es=un,Qh=op,Xh=bt.exports,Wh=Ur,Vh=$e,Jh=bp,Gh=pn,Fs=hn,Zh=Bh;function e0(t,e,r,s,i,n,a){var o=Fs(t,r),c=Fs(e,r),l=a.get(c);if(l){js(t,r,l);return}var u=n?n(o,c,r+"",t,e,a):void 0,y=u===void 0;if(y){var g=Es(c),w=!g&&Xh(c),O=!g&&!w&&Gh(c);u=c,g||w||O?Es(o)?u=o:Qh(o)?u=Kh(o):w?(y=!1,u=Hh(c,!0)):O?(y=!1,u=zh(c,!0)):u=[]:Jh(c)||Ds(c)?(u=o,Ds(o)?u=Zh(o):(!Vh(o)||Wh(o))&&(u=Yh(c))):y=!1}y&&(a.set(c,u),i(u,c,s,n,a),a.delete(c)),js(t,r,u)}var t0=e0,r0=ad,s0=nn,i0=gd,n0=t0,a0=$e,o0=mn,c0=hn;function gn(t,e,r,s,i){t!==e&&i0(e,function(n,a){if(i||(i=new r0),a0(n))n0(t,e,a,r,gn,s,i);else{var o=s?s(c0(t,a),n,a+"",t,e,i):void 0;o===void 0&&(o=n),s0(t,a,o)}},o0)}var l0=gn;function u0(t){return t}var vn=u0;function f0(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var d0=f0,p0=d0,Ns=Math.max;function h0(t,e,r){return e=Ns(e===void 0?t.length-1:e,0),function(){for(var s=arguments,i=-1,n=Ns(s.length-e,0),a=Array(n);++i<n;)a[i]=s[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=s[i];return o[e]=r(a),p0(t,this,o)}}var y0=h0;function m0(t){return function(){return t}}var g0=m0,v0=g0,qs=sn,b0=vn,x0=qs?function(t,e){return qs(t,"toString",{configurable:!0,enumerable:!1,value:v0(e),writable:!0})}:b0,w0=x0,A0=800,S0=16,O0=Date.now;function I0(t){var e=0,r=0;return function(){var s=O0(),i=S0-(s-r);if(r=s,i>0){if(++e>=A0)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var k0=I0,C0=w0,$0=k0,T0=$0(C0),P0=T0,R0=vn,j0=y0,D0=P0;function E0(t,e){return D0(j0(t,e,R0),t+"")}var F0=E0,N0=kt,q0=zr,_0=yn,M0=$e;function L0(t,e,r){if(!M0(r))return!1;var s=typeof e;return(s=="number"?q0(r)&&_0(e,r.length):s=="string"&&e in r)?N0(r[e],t):!1}var U0=L0,B0=F0,H0=U0;function z0(t){return B0(function(e,r){var s=-1,i=r.length,n=i>1?r[i-1]:void 0,a=i>2?r[2]:void 0;for(n=t.length>3&&typeof n=="function"?(i--,n):void 0,a&&H0(r[0],r[1],a)&&(n=i<3?void 0:n,i=1),e=Object(e);++s<i;){var o=r[s];o&&t(e,o,s,n)}return e})}var K0=z0,Y0=l0,Q0=K0,X0=Q0(function(t,e,r){Y0(t,e,r)}),W0=X0;const V0=async t=>{const{meta:e,record:r}=t,{action:s,type:i}=e,{userData:n,getUserType:a}=T(),o=n;delete o.access,delete o.permissions;const c=[{6:{value:s},7:{value:i},10:{value:JSON.stringify(r)},11:{value:a},12:{value:n[3]}}];A.upsertRecordsXML({to:"bsvafpumu",data:c,fieldsToReturn:[3]})};class J0{constructor(e,r){R(this,"axiosIns",null);R(this,"config",F({},Ki));R(this,"appConfig",k);R(this,"isAlreadyFetchingAccessToken",{});R(this,"subscribers",[]);R(this,"rateLimit",null);R(this,"rateLimitRemaining",null);R(this,"rateLimitReset",null);R(this,"router",null);R(this,"loginAttempts",{invalidLogins:0,login:null,exp:null,currentTime:null});R(this,"appStore",null);R(this,"userStore",null);R(this,"employeeStore",null);R(this,"jobBoardStore",null);R(this,"profileStore",null);R(this,"assessmentStore",null);R(this,"applicationStore",null);R(this,"kioskStore",null);R(this,"hiringCenterStore",null);R(this,"projectsStore",null);R(this,"hiringStore",null);R(this,"dataStore",null);R(this,"serverAPI",jn);if(this.axiosIns=e,this.config=F(F({},this.config),r),this.axiosIns.interceptors.request.use(async s=>new Promise(i=>{const{url:n,data:a}=s;let o=null;if(n.includes("act=API_Authenticate")||n.includes("a=API_GetUserInfo")||n.includes("a=API_DoQuery")||n.includes("a=API_AddRecord")||n.includes("?a=API_EditRecord")){if(n.includes("a=API_DoQuery")){o=n.split("/db/")[1].split("?")[0];const c={6:{value:`${this.appConfig.pageType}-${this.appConfig.pageId}`},7:{value:"DoQuery"},8:{value:o}};this.addLogRecord({data:[c]})}i(s)}else if(n.includes("auth/temporary"))this.config.realm&&(s.headers["QB-Realm-Hostname"]=`${this.config.realm}.quickbase.com`),this.config.appToken&&(s.headers["QB-App-Token"]=this.config.appToken),s.headers["Request-Count"]?s.headers["Request-Count"]+=1:s.headers["Request-Count"]=1,i(s);else{if(this.config.realm&&(s.headers["QB-Realm-Hostname"]=`${this.config.realm}.quickbase.com`),this.config.appToken&&(s.headers["QB-App-Token"]=this.config.appToken),s.headers["Request-Count"]?s.headers["Request-Count"]+=1:s.headers["Request-Count"]=1,n==="https://api.quickbase.com/v1/records/query"){o=a.from;const l={6:{value:`${this.appConfig.pageType}-${this.appConfig.pageId}`},7:{value:"Rest Query"},8:{value:o}};this.addLogRecord({data:[l]})}else if(n==="https://api.quickbase.com/v1/records")o=a.to;else if(n.startsWith("https://api.quickbase.com/v1/reports")){const l=new URL(n);o=new URLSearchParams(l.search).get("tableId"),o=a.from;const y={6:{value:`${this.appConfig.pageType}-${this.appConfig.pageId}`},7:{value:"Rest Report"},8:{value:o}};this.addLogRecord({data:[y]})}else n.startsWith("https://api.quickbase.com/v1/files")&&(o=n.split("/files/")[1].split("/")[0]);const c=this;if(!o){const l=JSON.parse(a);o=l.from?l.from:l.to}this.getToken(o).then(l=>{const u=l;if(u)s.headers.Authorization=u,i(s);else if(!c.isAlreadyFetchingAccessToken[`${o}`])c.isAlreadyFetchingAccessToken[`${o}`]=!0,c.refreshToken(o).then(y=>{const{data:g}=y;c.isAlreadyFetchingAccessToken[`${o}`]=!1,c.setToken(g.temporaryAuthorization,o).then(()=>{c.onAccessTokenFetched(g.temporaryAuthorization),s.headers.Authorization=`QB-TEMP-TOKEN ${g.temporaryAuthorization}`,i(s)})});else{const y=u;async function g(){c.getToken(o).then(w=>{const O=w;if(O===y){setTimeout(g,50);return}s.headers.Authorization=O,i(s)})}g()}})}}),s=>Promise.reject(s)),this.axiosIns.interceptors.response.use(s=>{if(s&&s.headers){const{headers:i}=s;i&&(this.rateLimit=i["x-ratelimit-limit"]?i["x-ratelimit-limit"]:null,this.rateLimitRemaining=i["x-ratelimit-remaining"]?i["x-ratelimit-remaining"]:null,this.rateLimitReset=i["x-ratelimit-reset"]?i["x-ratelimit-reset"]:null)}return s},s=>new Promise((i,n)=>{const{config:a,response:o}=s;console.log(s);const{headers:c}=o;c&&(this.rateLimit=c["x-ratelimit-limit"]?c["x-ratelimit-limit"]:null,this.rateLimitRemaining=c["x-ratelimit-remaining"]?c["x-ratelimit-remaining"]:null,this.rateLimitReset=c["x-ratelimit-reset"]?c["x-ratelimit-reset"]:null);const l=a,{url:u,data:y}=l;let g=this.config.appDBID;const w=y?JSON.parse(y):null;if(u==="https://api.quickbase.com/v1/records/query"?g=w.from:u==="https://api.quickbase.com/v1/records"&&(g=w.to),o&&o.status===401){const O=new Promise(C=>{this.addSubscriber(D=>{l.headers.Authorization=D,C(this.axiosIns(l))})});this.isAlreadyFetchingAccessToken[`${g}`]||(this.isAlreadyFetchingAccessToken[`${g}`]=!0,this.refreshToken(g).then(C=>{this.isAlreadyFetchingAccessToken[`${g}`]=!1,this.setToken(C.data.temporaryAuthorization,g),this.onAccessTokenFetched(C.data.temporaryAuthorization)})),i(O)}else if(o&&o.status===429){const O=this,C=new Promise(D=>{setTimeout(()=>{D(this.axiosIns(l))},O.rateLimitReset)});l.headers["Request-Count"]&&l.headers["Request-Count"]>4?n(s):i(C)}else if(o&&o.status===400){const{data:O}=o;if(O.description==="You are not currently signed into the realm.")window.close(),n(s);else if(O.description==="Required header 'Authorization' not specified"){this.isAlreadyFetchingAccessToken[`${g}`]||(this.isAlreadyFetchingAccessToken[`${g}`]=!0,this.refreshToken(g).then(D=>{this.isAlreadyFetchingAccessToken[`${g}`]=!1,this.setToken(D.data.temporaryAuthorization,g),this.onAccessTokenFetched(D.data.temporaryAuthorization)}));const C=new Promise(D=>{this.addSubscriber(P=>{l.headers.Authorization=P,D(this.axiosIns(l))})});i(C)}else if(O.description==="Invalid Authorization"){this.isAlreadyFetchingAccessToken[`${g}`]||(this.isAlreadyFetchingAccessToken[`${g}`]=!0,this.refreshToken(g).then(D=>{this.isAlreadyFetchingAccessToken[`${g}`]=!1,this.setToken(D.data.temporaryAuthorization,g),this.onAccessTokenFetched(D.data.temporaryAuthorization)}));const C=new Promise(D=>{this.addSubscriber(P=>{l.headers.Authorization=P,D(this.axiosIns(l))})});i(C)}}n(s)})),this.serverAPI.feathersClient){const s=this;this.serverAPI.feathersClient.service("notifications").on("created",function(i){s.processServerNotifications(i)})}}processServerNotifications(e){e.type==="user-notification"?e.task==="reload-user"?this.reloadUserInfo({reAuthenticate:!0}):e.task==="reload-page"?window.location.reload(!0):e.task==="logout"&&this.logout():e.type==="office-notification"&&(e.task==="reload-page"?window.location.reload(!0):this.userStore.setFeathersNotification(e))}onAccessTokenFetched(e){this.subscribers=this.subscribers.filter(r=>r(e))}addSubscriber(e){this.subscribers.push(e)}async getToken(e){return this.config.dev&&this.config.userToken?`QB-USER-TOKEN ${this.config.userToken}`:_.has(`${e}`)?`QB-TEMP-TOKEN ${_.get(`${e}`)}`:null}refreshToken(e){return this.axiosIns.get(`${this.config.refreshEndpoint}/${e}`,{withCredentials:!0})}async setToken(e,r){const s=r||this.config.appDBID;_.set(`${s}`,e,{expires:this.config.tokenExpiration,secure:!0,sameSite:"Strict"})}async setIpInfo(e){x.setItem(this.appConfig.storageIPInfoKeyName,e),e.countryCode!==this.appConfig.country&&this.appConfig.pageId!==26&&this.setCountry(e.countryCode)}async setCountry(e){this.appStore=this.appStore||H(),this.appStore.setCountry(e)}async getIpInfo(){return await x.getItem(this.appConfig.storageIPInfoKeyName)}setUserTicket(e,r){_.set(this.appConfig.storageUserTicketKeyName,e,{expires:r||this.config.cookieExpiration,secure:!0,sameSite:"Strict"})}getUserTicket(){return _.get(this.appConfig.storageUserTicketKeyName)}setKioskTicket(e,r){_.set(this.appConfig.storageKioskAccountTicket,e,{expires:r||this.config.kioskExpiration,secure:!0,sameSite:"Strict"})}getKioskTicket(){return _.get(this.appConfig.storageKioskAccountTicket)}removeKioskTicket(){_.remove(this.appConfig.storageKioskAccountTicket,{secure:!0,sameSite:"Strict"})}setOfficeLocation(e){this.hiringCenterStore=this.hiringCenterStore||G(),this.appConfig.pageType!=="Candidate Kiosk"&&this.hiringCenterStore.fetchHiringCenter(e.rid,!0),_.set(this.appConfig.storageOfficeLocationKeyName,e,{expires:this.config.officeExpiration,secure:!0,sameSite:"Strict"})}setCheckIn(e){console.log(e),_.set(this.appConfig.storageCheckInKeyName,e,{expires:this.config.checkInExpiration,secure:!0,sameSite:"Strict"})}removeCheckIn(){_.remove(this.appConfig.storageCheckInKeyName,{secure:!0,sameSite:"Strict"})}getCheckIn(){return _.get(this.appConfig.storageCheckInKeyName)}getOfficeLocation(){return _.get(this.appConfig.storageOfficeLocationKeyName)}removeOfficeLocation(){_.remove(this.appConfig.storageOfficeLocationKeyName,{secure:!0,sameSite:"Strict"})}async setUserInfo(e,r){this.userStore.setUser(e,r)}async setStrapiUser(e,r){this.userStore.setStrapiUser(e,r)}async setUserAccess(e,r){this.userStore.setAccess(e,r)}async setUserPermissions(e,r){this.userStore.setPermissions(e,r)}async getUserInfo(){return await x.getItem(this.appConfig.storageUserKeyName)}async getUserAccess(){return await x.getItem(this.appConfig.storageAccessKeyName)}async getUserPermissions(){return await x.getItem(this.appConfig.storagePermissionsKeyName)}async setEmployee(e,r){this.employeeStore.setEmployee(e,r)}async setJobBoard(e,r){this.jobBoardStore.setRequestJobs(e,r)}async getUserTypeFromStore(){return this.appStore.currentUserType}async getEmployeeFromStore(){return this.employeeStore.getEmployee}async getSocialRequired(e){return(this.appConfig.pageType==="Candidate Kiosk"||this.appConfig.pageType==="Candidate")&&e?(this.employeeStore=this.employeeStore||U(),this.employeeStore.socialRequired):!1}async getUserFromStore(e){return e?(this.userStore=this.userStore||T(),this.userStore.getUser):!1}async getLoggedInFromStore(){return this.userStore.isLoggedIn}async verifyRequired(e){return e?(this.userStore=this.userStore||T(),this.userStore.verifyRequired):!1}async phoneNumberRequired(e){return e?(this.userStore=this.userStore||T(),this.userStore.phoneNumberRequired):!1}async setEvent(e,r){this.appStore=this.appStore||H(),this.appStore.setEvent(e,r)}async getEvent(e){return this.appStore=this.appStore||H(),e?this.appStore.currentEvent:null}async emailRequired(e){return e?(this.userStore=this.userStore||T(),this.userStore.emailRequired):!1}async setPhoneNumberVerified(e){this.userStore.setPhoneNumberVerified(e)}async setVerified(e){this.userStore.setVerified(e)}async employeeLinkRequired(e){return e?(this.userStore=this.userStore||T(),this.userStore.employeeLinkRequired):!1}async bookmarksValid(){return this.kioskStore=this.kioskStore||Y(),!!(this.kioskStore.getBookmarks&&this.kioskStore.getBookmarks.length>0)}async getKioskAccount(){return this.kioskStore?this.kioskStore.kioskAccount:null}async logoutKiosk(e){if(this.kioskStore=this.kioskStore||Y(),e)this.removeKioskTicket(),this.kioskStore.setKioskAccount(null,!1),this.clearBookmarks();else if(!this.kioskStore.kioskAvailable)this.clearBookmarks();else if(this.kioskStore.getBookMarksOnly&&this.kioskStore.kioskAccount[45]===!0)this.removeKioskTicket(),this.kioskStore.setKioskAccount(null,!1),this.clearBookmarks();else return!0}async clearBookmarks(){this.kioskStore=this.kioskStore||Y(),this.kioskStore.removeBookmarks()}async bookMarksOnly(){return this.kioskStore=this.kioskStore||Y(),this.kioskStore.getBookMarksOnly}async startPageEnabled(){return this.appStore=this.appStore||H(),this.appStore.startPageEnabled}async setIdentityVerified(e){this.userStore.setIdentityVerified(e)}async setPhoneNumber(e){this.userStore.setPhoneNumber(e)}async setEmail(e){this.userStore.setEmail(e)}async isUserLoggedIn(){const e=this.getUserInfo(),r=this.getUserAccess(),s=this.getUserPermissions(),i=this.getUserTicket(),n=await e,a=await r,o=await s;return!!(n&&a&&o&&i||i)}async reloadUserInfo(e){const r=await this.getUserInfo();if(this.userStore=this.userStore||T(),e.reAuthenticate&&r)return await this.fetchAndSetUserData({phoneNumber:r[8],userType:r[32],rid:r[3],reAuthenticate:e.reAuthenticate}),this.updateStore();if(!r&&this.appConfig.pageType==="QuickBase User"){const{data:s}=await this.getNativeQuickbaseUser({qbUser:!0});if(s.login==="Anonymous")return this.userStore.logout();const i=`{'10'.EX.'Active'}AND{'6'.EX.'${s.email}'}AND{'32'.EX.'QuickBase User'}`,n=[{7:{value:"User Request"},8:{value:i},9:{value:1},14:{value:77}}],{data:a}=await this.fetchFromStructureApp({fields:n});return a[0]&&a[0][10]==="Active"?(await this.fetchAndSetUserData({email:a[0][6],rid:a[0][3],userType:a[0][32],reAuthenticate:e.reAuthenticate}),this.updateStore()):a[0]&&a[0][10]!=="Active"?this.userStore.logout():this.createQBUser({qbUser:s,login:!0})}else return this.updateStore()}async createQBUser(e){const r=e.qbUser||null;if(!r&&e.login)return this.userStore.logout();if(!r)return e;const s=[{7:{value:"Hiring Center User"},9:{value:1},16:{value:r.email}}],{data:i}=await this.fetchFromStructureApp({fields:s});if(typeof i=="object"&&!Array.isArray(i)&&i!==null&&i.user&&typeof i.user=="object")try{const n=new Date,a=await Ve.genSalt(10),o=Ve.hashSync("welcome",a),c=i.user,l=i.accessiblePayGroups,u=i.accessibleHiringCenters,y=r.email.match(/^([^@]*)@/)[1],g=[{6:{value:r.email},7:{value:o},10:{value:"Active"},11:{value:4},17:{value:!1},32:{value:"QuickBase User"},35:{value:r.firstName},37:{value:r.lastName},23:{value:0},24:{value:0},25:{value:n},26:{value:n},33:{value:y},49:{value:!!r.isVerified},65:{value:c[13]},70:{value:c[251]},100:{value:"en-US"},110:{value:r.id}}],w=[],{data:O}=await this.upsertRecordsXML({to:"br4pxrbs6",fieldsToReturn:[76],data:g,formatObject:76});return O.length===0?this.userStore.logout():(l.forEach(C=>{const D={6:{value:O[0][76][3]},7:{value:"Pay Group"},13:{value:C[10]},20:{value:!0},21:{value:!0},22:{value:!0}};w.push(D)}),u.forEach(C=>{const D={6:{value:O[0][76][3]},7:{value:"Office"},8:{value:C[10]},20:{value:!0},21:{value:!0},22:{value:!0}};w.push(D)}),await this.upsertRecordsXML({to:"br598isx6",fieldsToReturn:[3],data:w,formatObject:24}),await this.fetchAndSetUserData({email:O[0][76][6],rid:O[0][76][3],userType:O[0][76][32],reAuthenticate:e.reAuthenticate}))}catch{return this.userStore.logout()}else return this.userStore.logout()}async updateUserData(e){const r=await this.getUserInfo();if(this.appStore=this.appStore||H(),r)return this.userStore=this.userStore||T(),await this.userStore.updateUserData(e)}async updateEmployeeData(e){const r=await this.getUserInfo();if(this.appStore=this.appStore||H(),(this.appStore.pageType==="Candidate"||this.appStore.pageType==="Candidate Kiosk")&&r)return this.employeeStore=this.employeeStore||U(),await this.employeeStore.updateEmployeeData(e)}async updateStore(e){const r=await x.keys();for(let s=0;s<r.length;s++){if(r[s]===this.appConfig.storageUserKeyName){const i=await x.getItem(r[s]);Object.keys(i).forEach(n=>{if(typeof i[n]=="object"&&i[n]!==null&&Object.prototype.hasOwnProperty.call(i[n],"$d")){i[n]=p(i[n].$d);return}try{i[n].endsWith(".000Z")&&(i[n]=p(i[n]))}catch{}}),await this.setUserInfo(i,!1)}if(r[s]===this.appConfig.storageStrapiUserKeyName){const i=await x.getItem(r[s]);Object.keys(i).forEach(n=>{if(typeof i[n]=="object"&&i[n]!==null&&Object.prototype.hasOwnProperty.call(i[n],"$d")){i[n]=p(i[n].$d);return}try{i[n].endsWith(".000Z")&&(i[n]=p(i[n]))}catch{}}),await this.setStrapiUser(i,!1)}if(r[s]===this.appConfig.storageAccessKeyName){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}await this.setUserAccess(i,!1)}if(r[s]===this.appConfig.storagePermissionsKeyName){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}await this.setUserPermissions(i,!1)}if(r[s]===this.appConfig.storageEmployeeKeyName){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}await this.setEmployee(i,!1)}if(r[s]===this.appConfig.storageJobBoardKeyName){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.jobBoardStore=this.jobBoardStore||Gi(),await this.setJobBoard(i,!1)}if(r[s]===this.appConfig.storageExperienceOptions){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setExperienceOptions(i,!1)}if(r[s]===this.appConfig.storageContactMethods){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setContactMethods(i,!1)}if(r[s]===this.appConfig.storageEmploymentOptions){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setEmploymentOptions(i,!1)}if(r[s]===this.appConfig.storageCompanyOptions){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setCompanyOptions(i,!1)}if(r[s]===this.appConfig.storageCraftOptions){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setCraftOptions(i,!1)}if(r[s]===this.appConfig.storageRelationshipOptions){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setRelationshipOptions(i,!1)}if(r[s]===this.appConfig.storageCredentialOptions){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setCredentialOptions(i,!1)}if(r[s]===this.appConfig.storageAffirmativeOptions){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setAffirmativeOptions(i,!1)}if(r[s]===this.appConfig.storageVeteranStatusOptions){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setVeteranStatusOptions(i,!1)}if(r[s]===this.appConfig.storageDisabilityPages){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setDisabilityPages(i,!1)}if(r[s]===this.appConfig.storageDisabilityForm){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setDisabilityForm(i,!1)}if(r[s]===this.appConfig.storageEverGreenJobs){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.applicationStore=this.applicationStore||se(),await this.applicationStore.setEverGreenJobs(i,!1)}if(r[s]===this.appConfig.storageProfile){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.profileStore=this.profileStore||Ae(),await this.profileStore.setProfile(i,!1)}if(r[s]===this.appConfig.storageProfileStep){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.profileStore=this.profileStore||Ae(),await this.profileStore.setProfileStep(i,!1)}if(r[s]===this.appConfig.storageProfileVoluntaryForms){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.profileStore=this.profileStore||Ae(),await this.profileStore.setVoluntaryForms(i,!1)}if(r[s]===this.appConfig.storageKioskAccount){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.kioskStore=this.kioskStore||Y(),await this.kioskStore.setKioskAccount(i,!1)}if(r[s]===this.appConfig.storageBookmarks){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.kioskStore=this.kioskStore||Y(),await this.kioskStore.setBookmarksFromStorage(i)}if(r[s]===this.appConfig.storageBookmarksOnly){const i=await x.getItem(r[s]);this.kioskStore=this.kioskStore||Y(),await this.kioskStore.setBookmarksOnly(i,!1)}if(r[s]===this.appConfig.storageHiringCenter&&this.appConfig.pageType==="Candidate"){const i=await x.getItem(r[s]);if(i){for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.hiringCenterStore=this.hiringCenterStore||G(),await this.hiringCenterStore.setHiringCenter(i,!1)}}if(this.appConfig.pageType==="QuickBase User"){if(r[s].startsWith(this.appConfig.storageSelfCheckIns)){const i=r[s].split("_")[4],n=await x.getItem(r[s]);if(n){for(let a=0;a<n.length;a++){const o=Object.keys(n[a]);for(let c=0;c<o.length;c++){typeof n[a][o[c]]=="object"&&n[a][o[c]]!==null&&Object.prototype.hasOwnProperty.call(n[a][o[c]],"$d")&&(n[a][o[c]]=p(n[a][o[c]].$d));try{n[a][o[c]].endsWith(".000Z")&&(n[a][o[c]]=p(n[a][o[c]]))}catch{}}}this.dataStore=this.dataStore||Re(),await this.dataStore.setSelfCheckIns({officeId:i,data:n},!1)}}if(r[s].startsWith(this.appConfig.storageProcessTimeStamps)){const i=await x.getItem(r[s]);if(i){const n=Object.keys(i);for(let a=0;a<n.length;a++){const o=Object.keys(i[n[a]]);for(let c=0;c<o.length;c++){typeof i[n[a]][o[c]]=="object"&&i[n[a]][o[c]]!==null&&Object.prototype.hasOwnProperty.call(i[n[a]][o[c]],"$d")&&(i[n[a]][o[c]]=p(i[n[a]][o[c]].$d));try{i[n[a]][o[c]]&&(i[n[a]][o[c]]=p(i[n[a]][o[c]]))}catch{}}}this.dataStore=this.dataStore||Re(),await this.dataStore.setTimeStampState(i)}}if(r[s].startsWith(this.appConfig.storageProjects)){const i=r[s].split("_")[3],n=await x.getItem(r[s]);if(n){for(let a=0;a<n.length;a++){const o=Object.keys(n[a]);for(let c=0;c<o.length;c++){typeof n[a][o[c]]=="object"&&n[a][o[c]]!==null&&Object.prototype.hasOwnProperty.call(n[a][o[c]],"$d")&&(n[a][o[c]]=p(n[a][o[c]].$d));try{n[a][o[c]].endsWith(".000Z")&&(n[a][o[c]]=p(n[a][o[c]]))}catch{}}}this.dataStore=this.dataStore||Re(),await this.dataStore.setProjects({officeId:i,data:n},!1)}}if(r[s].startsWith(this.appConfig.storagePendingProjects)){const i=r[s].split("_")[4],n=await x.getItem(r[s]);if(n){for(let a=0;a<n.length;a++){const o=Object.keys(n[a]);for(let c=0;c<o.length;c++){typeof n[a][o[c]]=="object"&&n[a][o[c]]!==null&&Object.prototype.hasOwnProperty.call(n[a][o[c]],"$d")&&(n[a][o[c]]=p(n[a][o[c]].$d));try{n[a][o[c]].endsWith(".000Z")&&(n[a][o[c]]=p(n[a][o[c]]))}catch{}}}this.dataStore=this.dataStore||Re(),await this.dataStore.setPendingProjects({officeId:i,data:n},!1)}}}if(r[s]===this.appConfig.storageEvent){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.appStore=this.appStore||H(),await this.appStore.setEvent(i,!1)}if(r[s]===this.appConfig.storageStartPage){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.appStore=this.appStore||H(),await this.appStore.setStartPage(i,!1)}if(r[s]===this.appConfig.storageHomeButton){const i=await x.getItem(r[s]);for(let n=0;n<i.length;n++){const a=Object.keys(i[n]);for(let o=0;o<a.length;o++){typeof i[n][a[o]]=="object"&&i[n][a[o]]!==null&&Object.prototype.hasOwnProperty.call(i[n][a[o]],"$d")&&(i[n][a[o]]=p(i[n][a[o]].$d));try{i[n][a[o]].endsWith(".000Z")&&(i[n][a[o]]=p(i[n][a[o]]))}catch{}}}this.appStore=this.appStore||H(),await this.appStore.setHomeButton(i,!1)}}return!0}async login(e){let r=null;e.redirectPath&&(r=e.redirectPath,delete e.redirectPath);const s=`{'10'.EX.'Active'}${e.email?`AND{'6'.EX.'${e.email}'}`:""}${e.phoneNumber?`AND{'8'.EX.'${e.phoneNumber}'}`:""}${e.userType?`AND{'32'.EX.'${e.userType}'}`:""}`,i=[{7:{value:"User Request"},8:{value:s},9:{value:1},14:{value:77}}],n=e.email?e.email:e.phoneNumber,a=p();if(this.loginAttempts.invalidLogins>=this.config.maxLoginAttempts&&n===this.loginAttempts.login)if(a.isBefore(this.loginAttempts.exp)){const u=a.to(this.loginAttempts.exp,!0);throw{response:{data:{errtext:"Too many failed Login Attempts",errdetail:`Please wait ${u} before attempting to try again.`}}}}else this.loginAttempts={invalidLogins:0,login:null,exp:null,currentTime:null};else this.loginAttempts.exp&&a.isAfter(this.loginAttempts.exp)&&(this.loginAttempts={invalidLogins:0,login:null,exp:null,currentTime:null});const{data:o}=await this.fetchFromStructureApp({fields:i}),c=[{6:{value:"login"}}];let l=await this.getIpInfo();if(l&&l.query)c[0][8]={value:l.ip?l.ip:"N/A"},c[0][10]={value:l.userAgent?l.userAgent:"N/A"},c[0][27]={value:l.continent?l.continent:"N/A"},c[0][28]={value:l.continentCode?l.continentCode:"N/A"},c[0][29]={value:l.country?l.country:"N/A"},c[0][30]={value:l.countryCode},c[0][31]={value:l.region?l.region:"N/A"},c[0][32]={value:l.regionName?l.regionName:"N/A"},c[0][33]={value:l.city?l.city:"N/A"},c[0][34]={value:l.district?l.district:"N/A"},c[0][38]={value:l.zip?l.zip:"N/A"},c[0][36]={value:l.lat?l.lat:"N/A"},c[0][37]={value:l.lon?l.lon:"N/A"},c[0][38]={value:l.timezone?l.timezone:"N/A"},c[0][39]={value:l.offset?l.offset:"N/A"},c[0][40]={value:l.isp?l.isp:"N/A"},c[0][41]={value:l.org?l.org:"N/A"},c[0][42]={value:l.as?l.as:"N/A"},c[0][43]={value:l.asname?l.asname:"N/A"},c[0][44]={value:l.mobile?l.mobile:!1},c[0][45]={value:l.proxy?l.proxy:!1},c[0][46]={value:l.hosting?l.hosting:!1},c[0][46]={value:l.hosting?l.hosting:"N/A"},c[0][47]={value:l.query?l.query:"N/A"};else{try{l=await this.fetchIpInfo()}catch{l=null}l&&l.query&&(c[0][8]={value:l.ip?l.ip:"N/A"},c[0][10]={value:l.userAgent?l.userAgent:"N/A"},c[0][27]={value:l.continent?l.continent:"N/A"},c[0][28]={value:l.continentCode?l.continentCode:"N/A"},c[0][29]={value:l.country?l.country:"N/A"},c[0][30]={value:l.countryCode},c[0][31]={value:l.region?l.region:"N/A"},c[0][32]={value:l.regionName?l.regionName:"N/A"},c[0][33]={value:l.city?l.city:"N/A"},c[0][34]={value:l.district?l.district:"N/A"},c[0][38]={value:l.zip?l.zip:"N/A"},c[0][36]={value:l.lat?l.lat:"N/A"},c[0][37]={value:l.lon?l.lon:"N/A"},c[0][38]={value:l.timezone?l.timezone:"N/A"},c[0][39]={value:l.offset?l.offset:"N/A"},c[0][40]={value:l.isp?l.isp:"N/A"},c[0][41]={value:l.org?l.org:"N/A"},c[0][42]={value:l.as?l.as:"N/A"},c[0][43]={value:l.asname?l.asname:"N/A"},c[0][44]={value:l.mobile?l.mobile:!1},c[0][45]={value:l.proxy?l.proxy:!1},c[0][46]={value:l.hosting?l.hosting:!1},c[0][47]={value:l.query?l.query:"N/A"})}if(o.length===1){const u=o[0];if(c[0][12]={value:u[3]},u[63]===!0&&a.isBefore(u[60])){this.loginAttempts={invalidLogins:u[59],login:n,exp:u[60],currentTime:null};const y=a.to(this.loginAttempts.exp,!0);throw{response:{data:{errtext:"Too many failed Login Attempts",errdetail:`Please wait ${y} before attempting to try again.`}}}}if(u[32]==="QuickBase User"){const y={qdbapi:{username:e.email,password:e.password,hours:e.hours||72}};if(!e.email)throw c[0][7]={value:"Invalid Login"},this.addLoginAttempt(c),{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}};return this.axiosIns({method:"post",url:this.config.loginEndpoint,headers:{"QUICKBASE-ACTION":"API_Authenticate","Content-Type":"application/xml"},data:ce(y),withCredentials:!0}).then(g=>{const w=ye(new window.DOMParser().parseFromString(g.data,"text/xml"));if(w.email=e.email,w.errcode!==0)throw g.data=w,c[0][7]={value:"Invalid Login"},this.addLoginAttempt(c),{response:g};if(w.userid==="1.ckbs"||w.userid.startsWith("1."))throw g.data=w,c[0][7]={value:"Invalid Login"},this.addLoginAttempt(c),{response:g};return delete w.action,delete w.errcode,delete w.errtext,g.data=w,c[0][7]={value:"Successful"},this.addLoginAttempt(c),this.setUserTicket(g.data.ticket),this.fetchAndSetUserData(B(F({},g.data),{redirect:!0,redirectPath:r,rid:u[3],userType:e.userType}))}).catch(g=>{throw c[0][7]={value:"Invalid Password"},this.addLoginAttempt(c),g})}else if(u[32]==="Candidate"){if(await Ve.compare(e.password,u[7]))return c[0][7]={value:"Successful"},await this.addLoginAttempt(c,!0),this.fetchAndSetUserData({redirect:!0,redirectPath:r,rid:u[3],userType:e.userType});throw c[0][7]={value:"Invalid Password"},{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}}else if(u[32]==="Project User"){if(await Ve.compare(e.password,u[7]))return c[0][7]={value:"Successful"},await this.addLoginAttempt(c,!0),this.fetchAndSetUserData({redirect:!0,redirectPath:r,rid:u[3],userType:e.userType});throw c[0][7]={value:"Invalid Password"},this.addLoginAttempt(c),{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}}else throw c[0][7]={value:"Invalid Login"},this.addLoginAttempt(c),{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}}else throw c[0][7]={value:"Invalid Login"},this.addLoginAttempt(c),{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}}}async checkIfUserExist(e){const r=`{'10'.EX.'Active'}${e.email?`AND{'6'.EX.'${e.email}'}`:""}${e.phoneNumber?`AND{'8'.EX.'${e.phoneNumber}'}`:""}${e.userType?`AND{'32'.EX.'${e.userType}'}`:""}`,s=[{7:{value:"User Request"},8:{value:r},9:{value:1},14:{value:77}}],{data:i}=await this.fetchFromStructureApp({fields:s});return i.length>0}async fetchAndSetUserData(e){this.userStore=this.userStore||T();const{data:r}=await this.userStore.fetchUser(e);if(!r.user)throw{response:{data:{errtext:"Unknown username/password",errdetail:"Sorry! Something's wrong with your sign-in info. Try again."}}};const s=r.user,i=this.getOfficeLocation(),n=this.getCheckIn();if(this.userType=s[32],s[32]==="QuickBase User"?(e.reAuthenticate&&this.nativeQuickbaseReAuthenticate({}),this.dataStore=this.dataStore||Re(),this.dataStore.getSelectedOffice||this.dataStore.setSelectedOffice(r.access.find(a=>a[15]===!0&&a[7]==="Office")),this.loginFeathers({email:s[6],id:s[3]}).catch(async a=>{console.log(a)})):s[32]==="Candidate"?(this.employeeStore=this.employeeStore||U(),we(s[102])&&await this.setUserTicket(s[102],s[104].toDate())):s[32]==="Project User"&&(we(s[102])&&await this.setUserTicket(s[102],s[104].toDate()),r.access.length>0&&(this.projectsStore=this.projectsStore||W(),this.hiringStore=this.hiringStore||pt(),await this.projectsStore.getProjectsData())),s[82]===!0&&s.empRID&&s[32]==="Candidate"){const a=[{9:{value:s[80]},7:{value:"Employee"}}],{data:o}=await this.fetchFromHiringApp({fields:a});if(this.employeeStore=this.employeeStore||U(),this.employeeStore.setEmployee(o.employee,!0),!o.employee.lang||o.employee.lang===0){let c=1;Ye.global.locale.value==="en-US"?c=1:Ye.global.locale.value==="es"&&(c=2);const l={339:{value:c}};this.updateEmployeeData({fields:l})}}if(s[100]===""){this.userStore.$patch(o=>o.user[100]=Ye.global.locale.value);const a=[{3:{value:s[3]},26:{value:"now"},100:{value:Ye.global.locale.value}}];this.upsertRecordsXML({to:"br4pxrbs6",fieldsToReturn:[76],data:a,formatObject:76})}else this.appStore=this.appStore||H(),Ye.global.locale.value=s[100],this.appStore.setLang(s[100]);if(we(s[86])&&s[32]==="Candidate"){const a=[{9:{value:s[86]},7:{value:"Self Check-In"}}],{data:o}=await this.fetchFromRecruitingApp({fields:a});o&&(o[13].isToday()&&o[15]==="Called"&&i&&n?this.checkInUser():o[13].isToday()?(this.appStore=this.appStore||H(),this.appStore.setCheckInData(o)):i&&n?this.checkInUser():(this.appStore=this.appStore||H(),this.appStore.setCheckInData({})))}else i&&n&&s[32]==="Candidate"&&this.checkInUser();return s}loginFeathers(e){return this.serverAPI.login({strategy:"local-quickbase",email:e.email,quickbaseId:e.id,token:this.getUserTicket()}).catch(r=>{throw r})}feathersReAuthenticate(){return this.serverAPI.reAuthenticate()}feathersAuthenticated(){return this.serverAPI.authenticated()}async nativeQuickbaseLogin(e){const r={qdbapi:{username:e.email,password:e.password,hours:e.hours||720}};return this.axiosIns({method:"post",url:this.config.loginEndpoint,headers:{"QUICKBASE-ACTION":"API_Authenticate","Content-Type":"application/xml"},data:ce(r),withCredentials:!0}).then(s=>{const i=ye(new window.DOMParser().parseFromString(s.data,"text/xml"));if(i.email=e.email,i.errcode!==0)throw s.data=i,{response:s};if(i.userid==="1.ckbs"||i.userid.startsWith("1."))throw s.data=i,{response:s};return s.data=i,s.data}).catch(s=>{throw s})}async nativeQuickbaseReAuthenticate(e){let r=this.getUserTicket();if(e.kiosk&&(r=this.getKioskTicket()),!r)return null;const s={qdbapi:{ticket:r,hours:e.hours||336}};return this.axiosIns({method:"post",url:this.config.loginEndpoint,headers:{"QUICKBASE-ACTION":"API_Authenticate","Content-Type":"application/xml"},data:ce(s),withCredentials:!0}).then(i=>{const n=ye(new window.DOMParser().parseFromString(i.data,"text/xml"));if(n.errcode!==0)throw i.data=n,{response:i};if(n.userid==="1.ckbs"||n.userid.startsWith("1."))throw i.data=n,{response:i};return i.data=n,e.kiosk?this.setKioskTicket(i.data.ticket):this.setUserTicket(i.data.ticket),i.data}).catch(i=>{throw i})}async checkInUser(e){e=e||{};const r=await this.getUserInfo(),s=this.getOfficeLocation(),i=await this.getIpInfo();if(this.userStore=this.userStore||T(),this.appStore=this.appStore||H(),this.employeeStore=this.employeeStore||U(),!r||!s)return;if(this.appStore.checkedIn){console.log("already checked in",this.appStore.checkedIn),this.removeCheckIn();return}const n=[{6:{value:r[9]?r[9].phoneNumber:r[8].replace(/[^0-9]/g,"")},7:{value:r[35]},8:{value:r[37]},9:{value:s.rid},10:{value:e.reason?e.reason:"Applying"},11:{value:e.position?e.position:""},13:{value:"now"},16:{value:r[80]},21:{value:!0},24:{value:i?JSON.stringify(i):""}}];try{const{data:a}=await this.upsertRecordsXML({to:"br26nivmr",fieldsToReturn:[3,31],data:n,formatObject:31});this.removeCheckIn(),this.appStore.setCheckInData(a[0][31]);const o=[{3:{value:r[3]},26:{value:"now"},86:{value:a[0][3]}}],{data:c}=await this.upsertRecordsXML({to:"br4pxrbs6",fieldsToReturn:[76],data:o,formatObject:76}),l=c[0][76];if(this.userStore.userLoggedIn){const u=Object.assign({},l);delete u.access,delete u.permissions,this.setUserPermissions(l.permissions,!0),this.setUserAccess(l.access,!0),await this.setUserInfo(u,!0)}return l}catch(a){console.log(a)}}async deActivateAccount(e){const r=`{'10'.EX.'Active'}${e.email?`AND{'6'.EX.'${e.email}'}`:""}${e.phoneNumber?`AND{'8'.EX.'${e.phoneNumber}'}`:""}${e.userType?`AND{'32'.EX.'${e.userType}'}`:""}`,s=[{7:{value:"User Request"},8:{value:r},9:{value:1},14:{value:77}}],{data:i}=await this.fetchFromStructureApp({fields:s});if(i.length>0){const a=[{3:{value:i[0][3]},10:{value:"Inactive"},50:{value:!1},17:{value:!1}}];return await this.upsertRecordsFormat({to:"br4pxrbs6",fieldsToReturn:[76],data:a}),!0}return i}async resetPassword(e){const r=e.firstName.split(" "),s=e.lastName.split(" ");let i=`AND{'35'.CT.'${e.firstName}'}`,n=`AND{'37'.CT.'${e.lastName}'}`;r.length>1&&(r.forEach((y,g)=>{g===0?i=`({'35'.CT.'${y}'}`:i+=`OR{'35'.CT.'${y}'}`}),i+=")"),s.length>1&&(s.forEach((y,g)=>{g===0?n=`AND({'37'.CT.'${y}'}`:n+=`OR{'37'.CT.'${y}'}`}),n+=")");const a=`{'10'.EX.'Active'}${e.email?`AND{'6'.EX.'${e.email}'}`:""}${e.phoneNumber?`AND{'8'.EX.'${e.phoneNumber}'}`:""}${e.userType?`AND{'32'.EX.'${e.userType}'}`:""}${i}${n}`,o=[{7:{value:"User Request"},8:{value:a},9:{value:1},14:{value:77}}],c=await this.fetchFromStructureApp({fields:o}),l=c.data,u=new Date;if(l.length>0){const g=[{3:{value:l[0][3]},26:{value:u},17:{value:!0}}];return await this.upsertRecordsXML({to:"br4pxrbs6",fieldsToReturn:[76],formatObject:76,data:g})}return c}async findAndUpdateUser(e){const r=e.firstName?e.firstName.split(" "):[],s=e.lastName?e.lastName.split(" "):[];let i=e.firstName?`AND{'35'.CT.'${e.firstName}'}`:"",n=e.firstName?`AND{'37'.CT.'${e.lastName}'}`:"";r.length>1&&(r.forEach((u,y)=>{y===0?i=`({'35'.CT.'${u}'}`:i+=`OR{'35'.CT.'${u}'}`}),i+=")"),s.length>1&&(s.forEach((u,y)=>{y===0?n=`AND({'37'.CT.'${u}'}`:n+=`OR{'37'.CT.'${u}'}`}),n+=")");const a=`{'10'.EX.'Active'}${e.email?`AND{'6'.EX.'${e.email}'}`:""}${e.phoneNumber?`AND{'8'.EX.'${e.phoneNumber}'}`:""}${e.userType?`AND{'32'.EX.'${e.userType}'}`:""}${i}${n}`,o=[{7:{value:"User Request"},8:{value:a},9:{value:1},14:{value:77}}],c=await this.fetchFromStructureApp({fields:o}),l=c.data;if(l.length>0){const u=l[0];let y=JSON.parse(JSON.stringify(e.fields[0]));return y=await W0({3:{value:u[3]}},y),await this.upsertRecordsXML({to:"br4pxrbs6",fieldsToReturn:[76],formatObject:76,data:[y]})}return c}async clearLocalForage(){let e=[x.removeItem(this.appConfig.storageUserKeyName),x.removeItem(this.appConfig.storageUserTicketKeyName),x.removeItem(this.appConfig.storagePermissionsKeyName),x.removeItem(this.appConfig.storageAccessKeyName),x.removeItem(this.appConfig.storageOfficeLocationKeyName),x.removeItem(this.appConfig.storageEmployeeKeyName),x.removeItem(this.appConfig.storageCheckInKeyName),x.removeItem(this.appConfig.storageJobBoardKeyName),x.removeItem(this.appConfig.storageProfile),x.removeItem(this.appConfig.storageProfileStep),x.removeItem(this.appConfig.storageProfileVoluntaryForms),x.removeItem(this.appConfig.storageHiringCenter),Q.clear()];return this.appConfig.pageType!=="Candidate Kiosk"&&(e=e.concat([x.removeItem(this.appConfig.storageExperienceOptions),x.removeItem(this.appConfig.storageContactMethods),x.removeItem(this.appConfig.storageEmploymentOptions),x.removeItem(this.appConfig.storageCompanyOptions),x.removeItem(this.appConfig.storageCraftOptions),x.removeItem(this.appConfig.storageRelationshipOptions),x.removeItem(this.appConfig.storageCredentialOptions),x.removeItem(this.appConfig.storageAffirmativeOptions),x.removeItem(this.appConfig.storageVeteranStatusOptions),x.removeItem(this.appConfig.storageDisabilityPages),x.removeItem(this.appConfig.storageDisabilityForm),x.removeItem(this.appConfig.storageEverGreenJobs),x.removeItem(this.appConfig.storageToolCheckList)])),await Promise.allSettled(e)}async storeLogout(){return this.userStore=this.userStore||T(),this.userStore.logout()}async logout(e){const r=Tn(),s=[this.clearLocalForage(),this.removeOfficeLocation()];_r.logout();const i=r._s[Symbol.iterator]();for(const n of i)if(this.appConfig.pageType==="Candidate"||this.appConfig.pageType==="Candidate Kiosk"){if(n[0]==="employee"){s.push(n[1].$reset());continue}if(n[0]==="boardAppStore"){s.push(n[1].$reset());continue}if(n[0]==="profile"){s.push(n[1].$reset());continue}if(n[0]==="assessment"){s.push(n[1].$reset());continue}if(n[0]==="hiringCenter"){s.push(n[1].$reset());continue}}else{s.push(n[1].$reset());continue}return _.remove(this.appConfig.storageUserTicketKeyName,{secure:!0,sameSite:"Strict"}),await Promise.allSettled(s),!0}async upsertRecordsFormat(...e){const r=e[0].formatObject||null;e[0].formatObject&&delete e[0].formatObject;const s=await this.axiosIns.post(this.config.insertRecords,...e).then(async i=>{let{data:n}=i.data;const a=n.map(async c=>{Object.keys(c).map(async u=>{c[u]=await c[u].value})});return n=await Promise.all(a),i.data});return r&&s.data.length>0&&s.data.forEach(i=>{Array.isArray(r)?r.forEach(n=>{Z(n)&&i[n]&&(i[n]=ft(i[n]))}):Z(r)&&(i[r]=ft(i[r])),i[1]&&(i[1]=p(i[1]).tz("America/Chicago")),i[2]&&(i[2]=p(i[2]).tz("America/Chicago"))}),s}async addRecordNoUser(e){const r={qdbapi:{msInUTC:1}};return this.config.appToken&&(r.qdbapi.apptoken=this.config.appToken),e.fields&&(r.qdbapi.fields=e.fields),r.qdbapi.usertoken=this.config.userToken,this.axiosIns({method:"post",url:`https://elitehcms.quickbase.com/db/${e.to}?a=API_AddRecord`,headers:{"QUICKBASE-ACTION":"API_AddRecord","Content-Type":"application/xml"},data:ce(r)}).then(i=>{const n=ye(new window.DOMParser().parseFromString(i.data,"text/xml"));return i.data=n,i.data})}async upsertRecordsXML(e,r){if(e.data.length>1){const s=[];for(let a=0;a<e.data.length;a++){const o=Object.assign({},e);o.data=[e.data[a]],s.push(this.upsertRecordXML(o,r))}const i=await Promise.all(s),n={data:[],metadata:{createdRecordIds:[],totalNumberOfRecordsProcessed:0,unchangedRecordIds:[],updatedRecordIds:[]}};return i.forEach((a,o)=>{a.data[0]&&n.data.push(a.data[0]),n.metadata.createdRecordIds=n.metadata.createdRecordIds.concat(a.metadata.createdRecordIds),n.metadata.unchangedRecordIds=n.metadata.unchangedRecordIds.concat(a.metadata.unchangedRecordIds),n.metadata.updatedRecordIds=n.metadata.updatedRecordIds.concat(a.metadata.updatedRecordIds),n.metadata.totalNumberOfRecordsProcessed+=a.metadata.totalNumberOfRecordsProcessed,a.metadata.lineErrors&&(n.metadata.lineErrors||(n.metadata.lineErrors={}),n.metadata.lineErrors[o+1]=a.metadata.lineErrors[1])}),n}else return this.upsertRecordXML(e,r)}async upsertRecordXML(e,r){const s={qdbapi:{msInUTC:1}},i=e.formatObject||null,n=e.booleanFields?e.booleanFields.concat(this.config.booleanFields[`${e.to}`]||[]):this.config.booleanFields[`${e.to}`]||[];let a="";e.data[0][3]?(a="API_EditRecord",s.qdbapi.rid=e.data[0][3].value,delete e.data[0][3]):a="API_AddRecord",this.config.appToken&&(s.qdbapi.apptoken=this.config.appToken),e.data&&(s.qdbapi.fields=e.data),e.fieldsToReturn&&(s.qdbapi.clist=e.fieldsToReturn.join("."));const o=await this.getUserTicket();if(o)s.qdbapi.ticket=o;else if(this.config.userToken&&this.config.dev)s.qdbapi.usertoken=this.config.userToken;else if(e.to==="br54phpqz"&&this.appConfig.pageType==="Candidate Kiosk"){const l=this.getKioskTicket();l&&(s.qdbapi.ticket=l)}return this.axiosIns({method:"post",url:`https://elitehcms.quickbase.com/db/${e.to}?a=${a}`,headers:{"QUICKBASE-ACTION":`${a}`,"Content-Type":"application/xml"},data:xt(s)}).then(l=>{let u=ye(new window.DOMParser().parseFromString(l.data,"text/xml"));if(u.metadata=B(F({createdRecordIds:[]},u.errcode!==0&&{lineErrors:{}}),{totalNumberOfRecordsProcessed:0,unchangedRecordIds:[],updatedRecordIds:[]}),u.errcode!==0?(u.data=[],u.metadata.lineErrors[1]=[u.errdetail]):(u.data=[ey(new window.DOMParser().parseFromString(l.data,"text/xml"))],i&&(Array.isArray(i)?i.forEach(y=>{Z(y)&&u.data[0][y]&&(u.data[0][y]=ft(u.data[0][y]))}):Z(i)&&u.data[0][i]&&u.data[0][i]&&(u.data[0][i]=ft(u.data[0][i]))),n.length>0&&n.forEach(y=>{u.data[0][y]&&(u.data[0][y]=u.data[0][y]===1)}),u.data[0][1]&&(u.data[0][1]=p(u.data[0][1]).tz("America/Chicago")),u.data[0][2]&&(u.data[0][2]=p(u.data[0][2]).tz("America/Chicago"))),u.data[0]&&u.rid&&(u.metadata.totalNumberOfRecordsProcessed=1,u.num_fields_changed===0&&(u.metadata.unchangedRecordIds=[u.rid]),a==="API_EditRecord"&&u.num_fields_changed>0?u.metadata.updatedRecordIds=[u.rid]:a==="API_AddRecord"&&(u.metadata.createdRecordIds=[u.rid])),delete u.action,delete u.errcode,delete u.errdetail,delete u.errtext,delete u.num_fields_changed,delete u.rid,delete u.update_id,delete u.record,l.data=u,r){const{data:y}=l.data;let g;r.action==="read"?g=y[0][12]:g=y[0],V0({meta:r,record:g})}return l.data})}async addRecordXML(e){const r={qdbapi:{msInUTC:1}};this.config.appToken&&(r.qdbapi.apptoken=this.config.appToken),e.fields&&(r.qdbapi.fields=e.fields),e.list&&(r.qdbapi.clist=e.list.join("."));const s=await this.getUserTicket();return s?r.qdbapi.ticket=s:this.config.userToken&&this.config.dev&&(r.qdbapi.usertoken=this.config.userToken),this.axiosIns({method:"post",url:`https://elitehcms.quickbase.com/db/${e.to}?a=API_AddRecord`,headers:{"QUICKBASE-ACTION":"API_AddRecord","Content-Type":"application/xml"},data:ce(r)}).then(n=>{const a=ye(new window.DOMParser().parseFromString(n.data,"text/xml"));return n.data=a,n.data})}async editRecordXML(e){const r={qdbapi:{msInUTC:1}};if(e.rid)r.qdbapi.rid=e.rid;else throw"You must supply rid!";this.config.appToken&&(r.qdbapi.apptoken=this.config.appToken),e.fields&&(r.qdbapi.fields=e.fields),e.list&&(r.qdbapi.clist=e.list.join("."));const s=await this.getUserTicket();return s?r.qdbapi.ticket=s:this.config.userToken&&this.config.dev&&(r.qdbapi.usertoken=this.config.userToken),this.axiosIns({method:"post",url:`https://elitehcms.quickbase.com/db/${e.to}?a=API_EditRecord`,headers:{"QUICKBASE-ACTION":"API_EditRecord","Content-Type":"application/xml"},data:ce(r)}).then(n=>{const a=ye(new window.DOMParser().parseFromString(n.data,"text/xml"));return n.data=a,n.data})}async addLogRecord(e){const r={qdbapi:{}};return r.qdbapi.apptoken="dx47ve3djh2kcybbetrvscuqa2gk",e.data&&(r.qdbapi.fields=e.data),e.list&&(r.qdbapi.clist=e.list.join(".")),r.qdbapi.usertoken="b596fu_ng3q_0_dxyp9j657g8xdbgiftajcj56p7s",fetch("https://elitehcms.quickbase.com/db/bsh2qrysj?a=API_AddRecord",{method:"POST",credentials:"omit",headers:{"Content-Type":"application/xml"},body:xt(r)}).then(n=>n.text()).then(n=>n).catch(n=>{throw n})}async fetchFromProjectsApp(e,r){const s=await this.upsertRecordsXML({to:"bsazqhchc",fieldsToReturn:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],formatObject:12,data:e.fields},r);return s.data=s.data[0][12],s}async fetchFromStructureApp(e,r){const s=await this.upsertRecordsXML({to:"br9srnufv",fieldsToReturn:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],formatObject:12,data:e.fields},r);return s.data=s.data[0][12],s}async fetchFromHiringApp(e,r){const s=await this.upsertRecordsXML({to:"br9vuzuj7",fieldsToReturn:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],formatObject:12,data:e.fields},r);return s.data=s.data[0][12],s}async fetchFromRecruitingApp(e,r){const s=await this.upsertRecordsXML({to:"br9j45fg5",fieldsToReturn:[1,2,3,4,5,6,7,8,9,10,11,12,13,14],formatObject:12,data:e.fields},r);return s.data=s.data[0][12],s}async fetchFromCredentialsAndTrainingApp(e,r){const s=await this.upsertRecordsXML({to:"bsgydhtiq",fieldsToReturn:[1,2,3,4,5,6,7,8,9,10,11,12,13,14],formatObject:12,data:e.fields},r);return s.data=s.data[0][12],s}async softDeleteEmployee(e){const r=new Date,s=[{3:{value:e},109:{value:""},25:{value:""},28:{value:""},16:{value:""},26:{value:""},34:{value:""},509:{value:!0},510:{value:r}}],{data:i}=await this.upsertRecordsFormat({to:"bp3gb7ng2",fieldsToReturn:[3,500],data:s,formatObject:500});return i[3]}fetchIpInfo(){return fetch("https://api-v1.elitehcms.com/ipInfo").then(e=>e.json()).then(e=>(this.setIpInfo(e),e))}async addLoginAttempt(e,r){try{let c=null;_.has("clm-qb-id")?c=_.get("clm-qb-id"):(c=new DeviceUUID().get(),_.set("clm-qb-id",c,{expires:"365d",secure:!0,sameSite:"Strict"})),e[0][24]={value:c}}catch(c){console.log(c)}const s=e[0][6]?e[0][6].value:"",i=e[0][7]?e[0][7].value:"",n=p(),a=n.add(this.config.lastAttemptExpMinutes,"minute");i[7]==="Invalid Login"||i[7]==="Invalid Password"?s[6]===this.loginAttempts.login?(this.loginAttempts.invalidLogins+=1,this.loginAttempts.exp=a,this.loginAttempts.currentTime=n,e[0][15]={value:this.loginAttempts.invalidLogins},e[0][16]={value:a.valueOf()}):(this.loginAttempts.invalidLogins=1,this.loginAttempts.exp=a,this.loginAttempts.currentTime=n,this.loginAttempts.login=s[6],e[0][15]={value:this.loginAttempts.invalidLogins},e[0][16]={value:a.valueOf()}):i[7]==="Successful"&&(this.loginAttempts={invalidLogins:0,login:null,exp:null,currentTime:null}),e[0][25]={value:this.appConfig.pageId},e[0][26]={value:this.appConfig.appId};const{data:o}=await this.upsertRecordsXML({to:"br54phpqz",data:e,formatObject:22,fieldsToReturn:[3,22]});if(r&&o.length===1&!!o[0][22])return this.setUserTicket(o[0][22][20],o[0][22][23].toDate())}async getFileAttachmentUrl(e){let r;const s=await this.getUserTicket();return s?r=`${e}&ticket=${s}`:this.config.userToken&&this.config.dev&&(r=`${e}&usertoken=${this.config.userToken}`),r}async doQuery(e){const r={qdbapi:F({},this.config.commonParameters)};e.queryTotalRecords=we(e.queryTotalRecords)?e.queryTotalRecords:!1,e.select&&(r.qdbapi.clist=e.select.join(".")),e.where&&(r.qdbapi.query=e.where);let s=null;if(e.sortBy)for(let c=0;c<e.sortBy.length;c++)c===0?(r.qdbapi.slist=`${e.sortBy[c].fieldId?`${e.sortBy[c].fieldId}.`:""}`,s=`${e.sortBy[c].order==="ASC"?"sortorder-A.":"sortorder-D."}`):(r.qdbapi.slist+=`${e.sortBy[c].fieldId?`${e.sortBy[c].fieldId}.`:""}`,s+=`${e.sortBy[c].order==="ASC"?"sortorder-A.":"sortorder-D."}`);e.options&&(r.qdbapi.options=`${e.options.top?`num-${e.options.top}.`:""}${s||""}${e.options.skip&&e.options.skip>0?`skp-${e.options.skip}`:""}`),this.config.appToken&&(r.qdbapi.apptoken=this.config.appToken);const i=await this.getUserTicket();i&&!e.refresh?r.qdbapi.ticket=i:this.config.userToken&&this.config.dev&&(r.qdbapi.usertoken=this.config.userToken);const n=this.axiosIns({method:"post",url:`https://elitehcms.quickbase.com/db/${e.from}?a=API_DoQuery`,headers:{"QUICKBASE-ACTION":"API_DoQuery","Content-Type":"application/xml"},data:ce(r)}).then(c=>{const l={};l.data=Z0(new window.DOMParser().parseFromString(c.data,"text/xml")),l.fields=ty(new window.DOMParser().parseFromString(c.data,"text/xml"));const u=[];return l.fields.forEach(y=>{y.type==="checkbox"&&u.push(y.id)}),l.data.forEach(y=>{for(const[g,w]of Object.entries(y))u.includes(g)&&(y[`${g}`]=w===1)}),l.metadata=F({totalRecords:l.data.length,numRecords:l.data.length,numFields:e.select?e.select.length:0,skip:e.options&&e.options.skip?e.options.skip:0},e.options&&e.options.top?{top:e.options.top}:{}),c.data=l,c.data});let a=null;e.queryTotalRecords&&(a=this.axiosIns({method:"post",url:`https://elitehcms.quickbase.com/db/${e.from}?a=API_DoQueryCount`,headers:{"QUICKBASE-ACTION":"API_DoQueryCount","Content-Type":"application/xml"},data:ce(r)}).then(c=>{const l=ye(new window.DOMParser().parseFromString(c.data,"text/xml"));return c.data=l,c.data}));const o=await n;if(e.queryTotalRecords){const c=await a;o.metadata.totalRecords=c.numMatches}return o}async checkKioskStatus(e){this.kioskStore=this.kioskStore||Y(),this.hiringCenterStore=this.hiringCenterStore||G();let r=await x.getItem(this.appConfig.storageLastKioskFetch);const s=this.getKioskTicket();let i=!1;if(r&&r.$d&&!e&&(r=p(r.$d),e=r.isBefore(p().subtract(2,"day")),i=e),!s)return!1;if(r)if(e||!this.kioskStore.kioskAvailable||!this.hiringCenterStore.hiringCenterAvailable){const{data:n}=await this.getNativeQuickbaseUser({kiosk:!0});if(n.login==="Anonymous")return!1;{const a=await this.kioskStore.fetchKioskAccount(n,!0);return s&&i&&this.nativeQuickbaseReAuthenticate({kiosk:!0}),a.length!==0}}else{if(this.kioskStore.kioskAvailable&&this.hiringCenterStore.hiringCenterAvailable&&"45"in this.kioskStore.kioskAccount&&"bookmarks"in this.kioskStore.kioskAccount&&(!e||this.config.dev))return!0;if(this.kioskStore.kioskAvailable&&this.hiringCenterStore.hiringCenterAvailable&&(!e||this.config.dev)){const{data:n}=await this.getNativeQuickbaseUser({kiosk:!0});if(n.login==="Anonymous")return!1;{const a=await this.kioskStore.fetchKioskAccount(n,!0);return s&&this.nativeQuickbaseReAuthenticate({kiosk:!0}),a.length!==0}}else return!1}else{const{data:n}=await this.getNativeQuickbaseUser({kiosk:!0});if(n.login==="Anonymous")return!1;{const a=await this.kioskStore.fetchKioskAccount(n,!1);return s&&i&&this.nativeQuickbaseReAuthenticate({kiosk:!0}),a.length!==0}}}async getNativeQuickbaseUser(e){const r={qdbapi:{}};if(e.qbUser){const n=await this.getUserTicket();r.qdbapi.ticket=n}if(this.config.dev&&e.kiosk){const n=this.getKioskTicket();r.qdbapi.ticket=n}return await this.axiosIns({method:"post",url:"https://elitehcms.quickbase.com/db/main?a=API_GetUserInfo",headers:{"QUICKBASE-ACTION":"API_GetUserInfo","Content-Type":"application/xml"},data:ce(r)}).then(n=>{const a={};return a.data=G0(new window.DOMParser().parseFromString(n.data,"text/xml")),a.data.errcode&&(a.data.email="",a.data.externalAuth=0,a.data.firstName="",a.data.id="1.ckbs",a.data.isVerified=0,a.data.lastName="",a.data.login="Anonymous",a.data.screenName="Anonymous"),n.data=a,n.data})}async downloadBase64(e){const{tableId:r,recordId:s,fieldId:i,versionNumber:n=1}=e;return this.axiosIns.get(`https://api.quickbase.com/v1/files/${r}/${s}/${i}/${n}`).then(a=>a.data)}}const we=t=>!(typeof t=="undefined"||t===null||t===""),Z=t=>!isNaN(parseFloat(t))&&isFinite(t),ce=t=>{let e="";for(const r in t){if(e+=t[r]instanceof Array?"":`<${r}>`,t[r]instanceof Array)if(r==="fields")for(let s=0;s<t[r].length;s++)if(Object.keys(t[r][s]).length===2&&t[r][s].filename){let i=null;for(const n in t[r][s])Z(n)&&(i=n);e+=`<field fid="${i}" filename="${t[r][s].filename}">${t[r][s][`${i}`]}</field>`}else for(const i in t[r][s])e+=`<field fid="${i}">${t[r][s][i].replaceAll("&","&#38;").replaceAll("<","&#60;").replaceAll(">","&#62;")}</field>`;else for(const s in t[r])e+=`<${r}>`,e+=ce(t[r][s]),e+=`</${r}>`;else typeof t[r]=="object"?e+=ce(t[r]):e+=t[r];e+=t[r]instanceof Array?"":`</${r}>`}return e=e.replace(/<\/?[0-9]{1,}>/g,""),e},xt=t=>{let e="";for(const r in t){if(e+=t[r]instanceof Array?"":`<${r}>`,t[r]instanceof Array)if(r==="fields")for(let s=0;s<t[r].length;s++)if(Object.keys(t[r][s]).length===2&&t[r][s].filename){let i=null;for(const n in t[r][s])Z(n)&&(i=n);e+=`<field fid="${i}" filename="${t[r][s].filename}">${t[r][s][`${i}`].value}</field>`}else for(const i in t[r][s])if(Object.keys(t[r][s][i]).length===2&&(t[r][s][i].filename||t[r][s][i].fileName)){let n=t[r][s][i].filename||t[r][s][i].fileName;e+=`<field fid="${i}" filename="${n}">${t[r][s][i].value}</field>`}else try{e+=`<field fid="${i}">${t[r][s][i].value.replaceAll("&","&#38;").replaceAll("<","&#60;").replaceAll(">","&#62;")}</field>`}catch{e+=`<field fid="${i}">${t[r][s][i].value}</field>`}else for(const s in t[r])e+=`<${r}>`,e+=xt(t[r][s]),e+=`</${r}>`;else typeof t[r]=="object"?e+=xt(t[r]):e+=t[r];e+=t[r]instanceof Array?"":`</${r}>`}return e=e.replace(/<\/?[0-9]{1,}>/g,""),e},ye=t=>{const e=t.querySelector("qdbapi").children,r={};for(let s=0;s<e.length;s++)e[s].tagName!=="table"&&(r[`${e[s].tagName}`]=Z(e[s].innerHTML)?parseInt(e[s].innerHTML):e[s].innerHTML);return r},G0=t=>{const e=t.querySelector("qdbapi user");if(!e)return ye(t);const r={id:Z(e.id)?parseInt(e.id):e.id};for(let s=0;s<e.children.length;s++)r[`${e.children[s].tagName}`]=Z(e.children[s].innerHTML)?parseInt(e.children[s].innerHTML):e.children[s].innerHTML;return r},Z0=t=>{const e=t.querySelector("qdbapi table records"),r=[];for(let s=0;s<e.children.length;s++){const i={};for(let n=0;n<e.children[s].children.length;n++)e.children[s].children[n].id&&(i[`${e.children[s].children[n].id}`]=Z(e.children[s].children[n].innerHTML)?parseInt(e.children[s].children[n].innerHTML):e.children[s].children[n].innerHTML);r.push(i)}return r},ey=t=>{const e=t.querySelector("qdbapi record"),r={};for(let s=0;s<e.children.length;s++)e.children[s].id&&(r[`${e.children[s].id}`]=Z(e.children[s].innerHTML)?parseInt(e.children[s].innerHTML):e.children[s].innerHTML);return r},ty=t=>{const e=t.querySelector("qdbapi table fields"),r=[];for(let s=0;s<e.children.length;s++){let i=e.children[s].attributes.field_type.value,n=e.children[s].firstElementChild.nodeName==="label"?e.children[s].firstElementChild.innerHTML:null;if(!n){for(let o=0;o<e.children[s].children.length;o++)if(e.children[s].children[o].nodeName==="label"){n=e.children[s].children[o].innerHTML;break}}i==="float"&&(i="numeric");const a={id:e.children[s].id,label:n,type:i};r.push(a)}return r},be=(t,e)=>(Array.isArray(t)?t.forEach(r=>{Object.keys(r).forEach(s=>{r[s]&&(r[s]=be(r[s],s))})}):!Z(e)&&typeof t=="object"&&!Array.isArray(t)&&t!==null?Object.keys(t).forEach(r=>{t[r]&&(t[r]=be(t[r],r))}):we(t.date)&&we(t.time)&&t.time!=="::"?(t=`${t.date} ${t.time}`,t=p(t,"MM-DD-YYYY H:m:s").tz("America/Chicago")):we(t.date)?(t=`${t.date}`,t=p(t,"MM-DD-YYYY").tz("America/Chicago")):we(t.time)&&t.time!=="::"?(t=`${t.time}`,t=p(t,"H:m:s").tz("America/Chicago")):typeof t=="object"&&!Array.isArray(t)&&t!==null&&Object.keys(t).forEach(r=>{t[r]&&(t[r]=be(t[r],r))}),t),ft=t=>{try{let e=JSON.parse(t);return Array.isArray(e)?e.forEach(r=>{Object.keys(r).forEach(s=>{r[s]&&(r[s]=be(r[s],s))})}):typeof e=="object"&&!Array.isArray(e)&&e!==null&&Object.keys(e).forEach(r=>{Array.isArray(e[r])?e[r].forEach(s=>{Object.keys(s).forEach(i=>{Z(i)&&s[i]?s[i]=be(s[i],i):s[i]&&typeof s[i]=="object"&&!Array.isArray(s[i])&&s[i]!==null&&Object.keys(s[i]).forEach(n=>{s[i][n]&&(s[i][n]=be(s[i][n],n))})})}):typeof e[r]=="object"&&!Array.isArray(e[r])&&e[r]!==null&&(Z(r)?e[r]=be(e[r],r):Object.keys(e[r]).forEach(s=>{e[r][s]&&(e[r][s]=be(e[r][s],s))}))}),e}catch(e){return console.log(e),console.log("error parsing:",t),[]}};function ry(t,e){return{quickbase:new J0(t,e)}}const sy=mr(gr.create({baseURL:Ki.baseURL,timeout:25e3,headers:{"Content-Type":"application/json"}}),{maxRequests:6,perMilliseconds:1e3}),{quickbase:A}=ry(sy,{});var iy=_s(({app:t})=>{t.config.globalProperties.$quickbase=A}),my=Object.freeze(Object.defineProperty({__proto__:null,default:iy,quickbase:A},Symbol.toStringTag,{value:"Module"}));export{pn as A,$e as B,vn as C,Hr as D,ms as E,U as F,G,J as H,Re as I,Ve as J,Ae as K,se as L,yy as M,W as N,pt as O,fl as P,Gi as Q,hy as R,py as S,my as T,Tt as _,Ee as a,H as b,Y as c,un as d,Qf as e,en as f,ln as g,yn as h,it as i,fn as j,jd as k,on as l,Ih as m,zr as n,gd as o,xd as p,A as q,kt as r,da as s,Br as t,T as u,Ue as v,rn as w,ku as x,ad as y,bt as z};
