import{Q as Y}from"./QSpace.23cc8b64.js";import{a as y,Q as s}from"./QSelect.3b1ae8e4.js";import{c1 as ee,r as m,w as le,aK as te,c as x,z as f,A as g,d as e,bh as t,c2 as A,C as r,bY as w,a9 as ae,aA as oe,bW as c,d5 as ne,c3 as M,cx as se,a6 as i,bX as ue,aa as d,E as z,c6 as de,b$ as ie,at as u,an as _,am as T}from"./index.b1be7a27.js";import{Q as re}from"./QList.bdd84a86.js";import{Q as I}from"./QTd.cd07434b.js";import{u as ce}from"./use-quasar.32f188d9.js";import{e as me}from"./export-file.6b95af49.js";import{R as fe}from"./quickbase.5dabc90e.js";import{_ as _e}from"./officeHeader.860568be.js";import{_ as ve}from"./aTable.1555ab0c.js";import{dayjs as N}from"./dayjs.a4eb83b7.js";import"./QChip.083f5fc2.js";import"./QMenu.afcc94a5.js";import"./position-engine.3b2ab28c.js";import"./selection.ae194bbe.js";import"./rtl.a367ced8.js";import"./_commonjsHelpers.dfee5925.js";import"./localForage.44bfdce0.js";import"./index.7dbe61ef.js";import"./i18n.5effcec9.js";import"./api.37dc23fd.js";import"./QTable.7ca2d817.js";import"./QMarkupTable.d384f776.js";import"./use-fullscreen.9f1d00e4.js";const pe={class:"q-pa-md"},he={class:"row items-center"},be={class:"col-12 col-md-3 q-px-sm"},ge={class:"col-12 col-md-3 q-px-sm"},we={class:"col-12 col-md-5 q-px-sm"},ke={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},Ce=r("br",null,null,-1),ye=u("Time Checked-In"),xe=r("br",null,null,-1),Ie=u("\xA0"),Se=r("br",null,null,-1),Ve=u("Phone Number"),Qe=u("Reason"),Ae={key:0},Te=u("\xA0"),Ne={key:0},Be=u("Task"),De=u("Time Checked-Out"),Ue=r("br",null,null,-1),$e=u("\xA0"),Oe=r("br",null,null,-1),Pe={key:0},qe={key:0},We={key:1},ml={__name:"index",setup(je){const p=ce(),B=fe(),{fetchSelfCheckIns:D,fetchAllSelfCheckIns:U}=B,{getSelfCheckIns:K,getSelectedOffice:k,getLoadingState:E}=ee(B),h=m(k.value?k.value[8]:null),S=m("Self Check-Ins"),H=m("selfCheckIns"),V=m(""),$=m({sortBy:"13",descending:!1,rowsPerPage:150});h.value?D({selectedId:h.value}):U({can:"read"}),le(k,()=>{h.value=k.value?k.value[8]:null,h.value?D({selectedId:h.value}):U({can:"read"})});const O=m(new Date),X=setInterval(()=>{O.value=new Date},1e3);te(()=>{clearInterval(X)});const v=m("Waiting"),F=m(["Waiting","Called"]),G=m(["Waiting","Called","All"]),C=m([]),P=m([{label:"Kiosk",value:"Kiosk"},{label:"In Process",value:"In Process"},{label:"Deployment",value:"Deployment"},{label:"No Task Assigned",value:""}]),Q=x(()=>[{name:"timeCheckIn",align:"left",label:"Time Checked-In",field:"13",sortable:!1},{name:"name",align:"left",label:"Name",field:"17",sortable:!1},{name:"phoneNumber",align:"center",label:"Phone Number",field:"6",sortable:!1},{name:"reason",align:"center",label:"Reason",field:"10",sortable:!1},{name:"status",align:"center",label:"Status",field:"15",sortable:!1},{name:"task",align:"center",label:"Task",field:"27",sortable:!1},...v.value==="Called"||v.value==="All"?[{name:"timeCheckedOut",align:"center",label:"Time Checked Out",field:"14",sortable:!1}]:[]]),b=x(()=>K.value(h.value).filter(o=>{let n=!0,l=!0;return v.value&&(v.value==="All"?n=!0:n=o[15]===v.value,n||(l=!1)),C.value&&C.value.length!==0&&(n=C.value.some(a=>o[27]===a.value),n||(l=!1)),l}).sort((o,n)=>$.value.descending?o[13].isBefore(n[13]):o[13].isAfter(n[13]))),q=x(()=>b.value.map(o=>N(O.value).to(o[13]))),W=x(()=>b.value.map(o=>o[14]?N(o[13]).to(o[14],!0):"N/A")),j=o=>{console.log(o)},L=(o,n,l)=>{let a=n!==void 0?n(o,l):o;return a=a==null?"":String(a),a=a.split('"').join('""'),`"${a}"`},R=()=>{const o=[Q.value.map(l=>L(l.label))].concat(b.value.map(l=>Q.value.map(a=>L(typeof a.field=="function"?a.field(l):l[a.field===void 0?a.name:a.field],a.format,l)).join(","))).join(`\r
`);me(`${S.value} ${N().format("MM.DD.YYYY")}.csv`,o,"text/csv")!==!0&&p.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})};return(o,n)=>(f(),g("div",pe,[e(_e,{title:S.value,styleSelection:!0},null,8,["title"]),e(M,{flat:""},{default:t(()=>[e(A,null,{default:t(()=>[r("div",he,[e(Y),r("div",be,[e(y,{label:"Select Status",modelValue:v.value,"onUpdate:modelValue":n[0]||(n[0]=l=>v.value=l),options:G.value},null,8,["modelValue","options"])]),r("div",ge,[e(y,{label:"Select Task",modelValue:C.value,"onUpdate:modelValue":n[1]||(n[1]=l=>C.value=l),options:P.value,multiple:"","use-chips":"",clearable:""},{option:t(({itemProps:l,opt:a,selected:J,toggleOption:Z})=>[e(w,ae(oe(l)),{default:t(()=>[e(c,null,{default:t(()=>[e(s,{innerHTML:a.label},null,8,["innerHTML"])]),_:2},1024),e(c,{side:""},{default:t(()=>[e(ne,{"model-value":J,"onUpdate:modelValue":Le=>Z(a)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"])])])]),_:1})]),_:1}),e(ve,{rows:i(b),columns:i(Q),pagination:$.value,filter:V.value,title:S.value,separator:"vertical","row-key":"3",grid:!i(p).screen.gt.sm,loading:i(E)(H.value),downloadButton:!0,onDownload:R},{top:t(()=>[r("div",we,[e(se,{dense:i(p).screen.lt.md,modelValue:V.value,"onUpdate:modelValue":n[2]||(n[2]=l=>V.value=l),label:"Search...",clearable:""},{prepend:t(()=>[e(ue,{name:"search"})]),_:1},8,["dense","modelValue"])]),e(Y),r("div",{class:z(["text-dark text-caption text-italic",i(p).screen.lt.sm?"offset-xs-5":""])},"(Total: "+d(i(b).length)+")",3),e(de,{dense:i(p).screen.lt.md,class:z(["q-ml-sm",i(p).screen.lt.sm?"full-width":""]),color:"primary",label:"Download",disable:i(b).length<1,onClick:R},null,8,["dense","class","disable"])]),item:t(l=>[r("div",ke,[e(M,null,{default:t(()=>[e(A,{class:"text-center"},{default:t(()=>[r("strong",null,d(l.row[17]),1),Ce,r("span",null,d(l.row[15]),1)]),_:2},1024),e(ie),e(A,{class:"flex flex-center"},{default:t(()=>[e(re,{dense:""},{default:t(()=>[e(w,null,{default:t(()=>[e(c,null,{default:t(()=>[e(s,null,{default:t(()=>[ye]),_:1}),xe,e(s,null,{default:t(()=>[Ie]),_:1})]),_:1}),e(c,{side:""},{default:t(()=>[e(s,{caption:""},{default:t(()=>[u(d(l.row[13].format("h:mm:ss A")),1)]),_:2},1024),Se,e(s,{caption:""},{default:t(()=>[u(d(i(q)[l.rowIndex]),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(w,null,{default:t(()=>[e(c,null,{default:t(()=>[e(s,null,{default:t(()=>[Ve]),_:1})]),_:1}),e(c,{side:""},{default:t(()=>[e(s,{caption:""},{default:t(()=>[u(d(l.row[20]),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(w,null,{default:t(()=>[e(c,null,{default:t(()=>[e(s,null,{default:t(()=>[Qe]),_:1}),l.row[10]==="Applying"?(f(),g("br",Ae)):_("",!0),l.row[10]==="Applying"?(f(),T(s,{key:1},{default:t(()=>[Te]),_:1})):_("",!0)]),_:2},1024),e(c,{side:""},{default:t(()=>[e(s,{caption:""},{default:t(()=>[u(d(l.row[10]),1)]),_:2},1024),l.row[10]==="Applying"?(f(),g("br",Ne)):_("",!0),l.row[10]==="Applying"?(f(),T(s,{key:1,caption:""},{default:t(()=>[u(d(l.row[11]),1)]),_:2},1024)):_("",!0)]),_:2},1024)]),_:2},1024),e(w,null,{default:t(()=>[e(c,null,{default:t(()=>[e(s,null,{default:t(()=>[Be]),_:1})]),_:1}),e(c,{side:""},{default:t(()=>[e(s,{caption:""},{default:t(()=>[u(d(l.row[20]),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),l.row[15]==="Called"?(f(),T(w,{key:0},{default:t(()=>[e(c,null,{default:t(()=>[e(s,null,{default:t(()=>[De]),_:1}),Ue,e(s,null,{default:t(()=>[$e]),_:1})]),_:1}),e(c,{side:""},{default:t(()=>[e(s,{caption:""},{default:t(()=>[u(d(l.row[14].format("h:mm:ss A")),1)]),_:2},1024),Oe,e(s,{caption:""},{default:t(()=>[u("Wait: "+d(i(W)[l.rowIndex]),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)):_("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),"body-cell-timeCheckIn":t(l=>[e(I,{props:l},{default:t(()=>[r("div",null,d(l.value.format("h:mm:ss A")),1),l.row[15]==="Waiting"?(f(),g("div",Pe,d(i(q)[l.rowIndex]),1)):_("",!0)]),_:2},1032,["props"])]),"body-cell-status":t(l=>[e(I,{props:l},{default:t(()=>[e(y,{dense:"",filled:"","model-value":l.value,"onUpdate:modelValue":a=>j(l),options:F.value},null,8,["model-value","onUpdate:modelValue","options"])]),_:2},1032,["props"])]),"body-cell-task":t(l=>[e(I,{props:l},{default:t(()=>[e(y,{dense:"",filled:"","model-value":l.value,"onUpdate:modelValue":a=>j(l),options:P.value},null,8,["model-value","onUpdate:modelValue","options"])]),_:2},1032,["props"])]),"body-cell-timeCheckedOut":t(l=>[e(I,{props:l},{default:t(()=>[l.row[15]==="Called"?(f(),g("div",qe,d(l.value.format("h:mm:ss A")),1)):_("",!0),l.row[15]==="Called"?(f(),g("div",We," Wait: "+d(i(W)[l.rowIndex]),1)):_("",!0)]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination","filter","title","grid","loading"])]))}};export{ml as default};
