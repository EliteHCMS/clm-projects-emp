var te=Object.defineProperty,ae=Object.defineProperties;var oe=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var W=(e,a,o)=>a in e?te(e,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[a]=o,v=(e,a)=>{for(var o in a||(a={}))ne.call(a,o)&&W(e,o,a[o]);if(z)for(var o of z(a))le.call(a,o)&&W(e,o,a[o]);return e},y=(e,a)=>ae(e,oe(a));import{Q as Y}from"./QSpace.0367a28d.js";import{bP as K,c as w,h as _,bQ as X,dg as Z,bW as se,r as p,cV as re,dh as ie,w as H,o as ue,bI as L,bO as Q,g as de,cI as ce,bN as fe,aL as me,A as M,B as N,d as n,bi as l,cw as be,D as x,G as E,a7 as m,ab as P,cz as ve,cx as ge,au as A,bJ as G,bH as $}from"./index.7f467912.js";import{Q as U}from"./QTooltip.97ca5e89.js";import{Q as F}from"./QTd.bb5e00f4.js";import{Q as J}from"./QItemLabel.6ffcf1f7.js";import{Q as pe}from"./QList.86507577.js";import{Q as we}from"./QMenu.ee595e6f.js";import{u as he}from"./use-quasar.bf22106c.js";import{e as _e}from"./export-file.eb604dd4.js";import{I as Be,b as Se}from"./quickbase.159c15f2.js";import{dayjs as ye}from"./dayjs.0f1a0bc9.js";import{_ as xe}from"./hiringTabs.856d1cf1.js";import{_ as Ce,a as qe}from"./aTable.0127ba32.js";import"./position-engine.7d860d3d.js";import"./selection.8b006c7f.js";import"./_commonjsHelpers.a26ce4be.js";import"./index.7dbe61ef.js";import"./localForage.24410b96.js";import"./i18n.5ecfa174.js";import"./api.54911380.js";import"./QBadge.0722d15c.js";import"./QRouteTab.87035d0e.js";import"./QTabs.af5e4e56.js";import"./QResizeObserver.d592ab8a.js";import"./rtl.cf9bbe47.js";import"./QSelect.a345da3a.js";import"./QChip.6a7808a8.js";import"./QTable.b8d71263.js";import"./QMarkupTable.ff93cfc4.js";import"./use-fullscreen.e9ab5bdb.js";var Qe=K({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:a}){const o=w(()=>{const u=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(d=>e[d]===!0).map(d=>`q-btn-group--${d}`).join(" ");return`q-btn-group row no-wrap${u.length>0?" "+u:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>_("div",{class:o.value},X(a.default))}});const De=Object.keys(Z),ke=e=>De.reduce((a,o)=>{const u=e[o];return u!==void 0&&(a[o]=u),a},{});var Ve=K({name:"QBtnDropdown",props:y(v(v({},Z),se),{modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String}),emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:a,emit:o}){const{proxy:u}=de(),d=p(e.modelValue),c=p(null),D=re(),b=w(()=>{const t={"aria-expanded":d.value===!0?"true":"false","aria-haspopup":"true","aria-controls":D,"aria-label":e.toggleAriaLabel||u.$q.lang.label[d.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(t["aria-disabled"]="true"),t}),k=w(()=>"q-btn-dropdown__arrow"+(d.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),h=w(()=>ie(e)),B=w(()=>ke(e));H(()=>e.modelValue,t=>{c.value!==null&&c.value[t?"show":"hide"]()}),H(()=>e.split,g);function V(t){d.value=!0,o("beforeShow",t)}function C(t){o("show",t),o("update:modelValue",!0)}function I(t){d.value=!1,o("beforeHide",t)}function q(t){o("hide",t),o("update:modelValue",!1)}function T(t){o("click",t)}function j(t){ce(t),g(),o("click",t)}function O(t){c.value!==null&&c.value.toggle(t)}function S(t){c.value!==null&&c.value.show(t)}function g(t){c.value!==null&&c.value.hide(t)}return Object.assign(u,{show:S,hide:g,toggle:O}),ue(()=>{e.modelValue===!0&&S()}),()=>{const t=[_(L,{class:k.value,name:e.dropdownIcon||u.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&t.push(_(we,{ref:c,id:D,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:V,onShow:C,onBeforeHide:I,onHide:q},a.default)),e.split===!1?_(Q,y(v(v({class:"q-btn-dropdown q-btn-dropdown--simple"},B.value),b.value),{disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:T}),{default:()=>X(a.label,[]).concat(t),loading:a.loading}):_(Qe,y(v({class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square},h.value),{glossy:e.glossy,stretch:e.stretch}),()=>[_(Q,y(v({class:"q-btn-dropdown--current"},B.value),{disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:j}),{default:a.label,loading:a.loading}),_(Q,y(v(v({class:"q-btn-dropdown__arrow-container q-anchor--skip"},b.value),h.value),{disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple}),()=>t)])}}});const Ie={class:"q-pa-md"},Pe={class:"row items-center"},Ae={class:"col-12 col-md-5 q-px-sm"},$e={class:"col-12 col-md-3 q-px-sm"},Le={class:"col-12 col-md-5 q-px-sm"},Te={key:0},je={key:1},vt={__name:"index",setup(e){const a=he(),o=Be(),{openWindow:u}=Se(),{fetchProfiles:d,fetchAllProfiles:c}=o,{getProfiles:D,getSelectedOffice:b,getLoadingState:k}=fe(o),h=p(b.value?b.value[8]:null),B=p("Profiles"),V=p("profiles"),C=p(""),I=p({sortBy:"1",descending:!1,rowsPerPage:150}),q=r=>{h.value?d({selectedId:h.value,refresh:r}):c({can:"read",refresh:r})};q(!0),H(b,()=>{h.value=b.value?b.value[8]:null,q()});const T=p(new Date),j=setInterval(()=>{T.value=new Date},1e3);me(()=>{clearInterval(j)});const O=w(()=>["index","submissionTime","name","phoneNumber","craft","latestScore","employmentStatus","action",...b.value?[]:["office"]]),S=w(()=>[{name:"index",align:"left",label:"#",sortable:!1},{name:"submissionTime",align:"left",label:"Time",field:"78",sortable:!1},{name:"name",align:"left",label:"Name",field:"24",sortable:!1},{name:"phoneNumber",align:"center",label:"Phone Number",field:"25",sortable:!1},{name:"craft",align:"center",label:"Craft",field:"52",sortable:!1},{name:"latestScore",align:"center",label:"Latest Score",field:"155",sortable:!1},{name:"employmentStatus",align:"center",label:"Employment Status",field:"56",sortable:!1},{name:"office",align:"center",label:"Office",field:"191",sortable:!1},{name:"action",align:"center",label:"",sortable:!1}]),g=w(()=>D.value(h.value).filter(r=>!0).sort((r,f)=>I.value.descending?r[1].isBefore(f[1]):r[1].isAfter(f[1]))),t=(r,f,s)=>{let i=f!==void 0?f(r,s):r;return i=i==null?"":String(i),i=i.split('"').join('""'),`"${i}"`},ee=r=>{console.log(r),u(null,{url:`https://elitehcms.quickbase.com/db/bpzpy6n3x?a=dbpage&pageID=2&ee=${r[3]}`,name:"View Profile"})},R=()=>{const r=[S.value.map(s=>t(s.label))].concat(g.value.map(s=>S.value.map(i=>t(typeof i.field=="function"?i.field(s):s[i.field===void 0?i.name:i.field],i.format,s)).join(","))).join(`\r
`);_e(`${B.value} ${ye().format("MM.DD.YYYY")}.csv`,r,"text/csv")!==!0&&a.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})};return(r,f)=>(M(),N("div",Ie,[n(xe),n(ve,{flat:"",class:"q-pt-none"},{default:l(()=>[n(be,null,{default:l(()=>[x("div",Pe,[x("div",Ae,[x("div",{class:E(["text-dark",m(a).screen.lt.md?"text-body1":"text-h5"])},P(B.value),3)]),n(Y),x("div",$e,[n(Ce,{styleSelection:!0})])])]),_:1})]),_:1}),n(qe,{rows:m(g),columns:m(S),pagination:I.value,filter:C.value,title:B.value,separator:"vertical","row-key":"3",loading:m(k)(V.value),"visible-columns":m(O),downloadButton:!0,onDownload:R},{top:l(()=>[x("div",Le,[n(ge,{dense:m(a).screen.lt.md,modelValue:C.value,"onUpdate:modelValue":f[0]||(f[0]=s=>C.value=s),label:"Search...",clearable:""},{prepend:l(()=>[n(L,{name:"search"})]),_:1},8,["dense","modelValue"])]),n(Y),x("div",{class:E(["text-dark text-caption text-italic",m(a).screen.lt.md?"offset-xs-5":""])},"(Total: "+P(m(g).length)+")",3),n(Q,{flat:"",round:"",color:"primary",icon:"download",disable:m(g).length<1,onClick:R},{default:l(()=>[n(U,{class:"bg-accent text-black shadow-4",offset:[10,10]},{default:l(()=>[A(" Download ")]),_:1})]),_:1},8,["disable"]),n(Q,{flat:"",round:"",color:"primary",icon:"refresh",onClick:f[1]||(f[1]=s=>q(!0)),loading:m(k)(V.value)},{default:l(()=>[n(U,{class:"bg-accent text-black shadow-4",offset:[10,10]},{default:l(()=>[A(" Refresh ")]),_:1})]),_:1},8,["loading"])]),"body-cell-submissionTime":l(s=>[n(F,{props:s},{default:l(()=>[r.$dayjs(s.value).isValid()?(M(),N("div",Te,P(s.value.format("L LT")),1)):(M(),N("div",je,P(s.row[1].format("L LT")),1))]),_:2},1032,["props"])]),"body-cell-action":l(s=>[n(F,{props:s},{default:l(()=>[n(Ve,{color:"primary",label:"View Profile","menu-anchor":"bottom right"},{default:l(()=>[n(pe,{class:"text-primary",separator:"",bordered:""},{default:l(()=>[n(G,{clickable:"",onClick:i=>ee(s.row)},{default:l(()=>[n($,{avatar:""},{default:l(()=>[n(L,{name:"person"})]),_:1}),n($,null,{default:l(()=>[n(J,null,{default:l(()=>[A("CLM View Profile")]),_:1})]),_:1})]),_:2},1032,["onClick"]),n(G,{clickable:"",to:{name:"ee-hiring",params:{id:s.row[3]}}},{default:l(()=>[n($,{avatar:""},{default:l(()=>[n(L,{name:"badge"})]),_:1}),n($,null,{default:l(()=>[n(J,null,{default:l(()=>[A("Full Employee")]),_:1})]),_:1})]),_:2},1032,["to"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination","filter","title","loading","visible-columns"])]))}};export{vt as default};
