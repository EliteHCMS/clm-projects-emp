import{Q as Y}from"./QImg.d809cf38.js";import{_ as Z,bU as ee,r as g,c as E,w,b6 as ae,B as o,ar as C,bs as l,a9 as s,C as d,d as t,as as n,E as q,cV as y,ad as m,bP as te,bO as se,cW as U,b as V,bR as R,aw as le,bX as H,G as re,cX as oe,ay as Q,cU as ne}from"./index.2e7fe8e8.js";import{Q as ue}from"./QForm.8dd8e189.js";import{Q as ie}from"./QPage.b37a2af4.js";import{u as me}from"./use-quasar.40d4c05b.js";import{u as M}from"./vee-validate.esm.f0f46958.js";import{u as de}from"./i18n.2ffb039e.js";import{b as pe,q as ce}from"./app.1914f476.js";import{p as ve}from"./VueTelInput.6d26c085.js";import{_ as fe}from"./languageSelector.1f51c99c.js";import{c as P}from"./array.59f93f43.js";import{c as ge}from"./carousel.ed3f70f7.js";import{h as be}from"./HelpDeskTicket.bf503ae0.js";import"./_commonjsHelpers.a26ce4be.js";import"./dayjs.d259e186.js";import"./localForage.efbf8f90.js";import"./api.15b844fb.js";import"./index.04bc0a32.js";import"./QSelect.63d8c041.js";import"./QChip.1e62c9f1.js";import"./QMenu.aa89615f.js";import"./position-engine.fae1bc72.js";import"./selection.87b1e79a.js";import"./rtl.b51694b1.js";import"./use-panel.3430e8b4.js";import"./touch.3df10340.js";import"./use-fullscreen.a6d76165.js";import"./QTooltip.b95091fe.js";import"./QFile.bfe37d9f.js";import"./QSpinnerGears.64096e00.js";const ye={key:0,class:"col-md-7 col-lg-8 col-lx-8"},he={class:"col-xs-12 col-sm-12 col-md-5 col-lg-4 col-lx-4 row justify-center items-center"},xe={key:0,class:"text-dark"},ke={key:1,class:"text-dark"},Ne={key:0,class:"row q-col-gutter-xs"},$e={class:"text-grey-6",tabindex:"4"},_e={key:0,class:"text-grey-6",tabindex:"5"},we={key:1,class:"text-grey-6"},Ce={class:"row justify-center"},qe={__name:"forgotPassword",setup(Ve){const T=me(),j=ee(),{t:h}=de(),{currentUserType:x}=pe(),p=g(!1),c=g(!1),B=g(10),u=g("username"),i=g("phoneNumber"),b=g(null),I=g(!1),K=E(()=>p.value||i.value==="phoneNumber"?P().email(`${h("validEmailIsRequired")}`).nullable():P().email(`${h("validEmailIsRequired")}`).required()),z=E(()=>{if(c.value||i.value==="email")return P().nullable();{const e=new RegExp("^[0-9]{"+B.value+"}","g");return P().matches(e,{excludeEmptyString:!0,message:`${h("validPhoneIsRequired")}`}).required()}}),{value:k,errorMessage:D,meta:W}=M("firstName"),{value:N,errorMessage:A,meta:X}=M("lastName"),{errorMessage:S,value:v}=M("email",K),{errorMessage:$,value:f}=M("phone",z);x==="QuickBase User"&&j.push("/"),w(S,e=>{e||v.value===""?c.value=!1:c.value=!0}),w(v,e=>{(!e||e==="")&&(c.value=!1)}),w($,e=>{e||f.value===""?p.value=!1:p.value=!0}),w(f,e=>{(!e||e==="")&&(p.value=!1)});const G=e=>{b.value=e},O=e=>{B.value=e},L=E(()=>!(p.value||c.value)),F=async()=>{const e={userType:x,firstName:k.value,lastName:N.value,email:c.value?v.value:null,phoneNumber:p.value?`+${b.value?b.value.dialCode:"1"}${f.value}`:null},{data:a}=await ce.resetPassword(e);if(a.length===0)T.notify({position:"top-right",type:"negative",message:`${h("noUserFoundWithInformation")}`});else{const _=a[0][76];j.push({name:"code-confirmation",query:{...b.value&&p.value&&{p:`${b.value?b.value.dialCode:"1"}${f.value}`},...c.value&&{e:`${v.value}`},rid:_[3],ac:!0,send:!0}})}},J=e=>{u.value==="username"&&!L.value?F():e.preventDefault()};return(e,a)=>{const _=ae("router-link");return o(),C(ie,{class:"window-height window-width row"},{default:l(()=>[s(T).screen.lt.md?n("",!0):(o(),d("div",ye,[t(ge)])),q("div",he,[t(ne,{class:"auth-card",flat:""},{default:l(()=>[t(y,{style:{"padding-left":"30px","padding-right":"30px"}},{default:l(()=>[t(Y,{src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo.svg",fit:"scale-down",class:"auth-logo full-width"})]),_:1}),t(y,{class:"text-center auth-description"},{default:l(()=>[i.value==="email"&&u.value==="username"?(o(),d("p",xe,m(e.$t("enterEmailSendCode")),1)):n("",!0),i.value==="phoneNumber"&&u.value==="username"?(o(),d("p",ke,m(e.$t("enterPhoneSendCode")),1)):n("",!0)]),_:1}),t(y,null,{default:l(()=>[t(ue,{class:"q-px-sm q-pt-sm",onSubmit:a[7]||(a[7]=te(()=>{},["prevent"])),onKeyup:se(J,["enter"])},{default:l(()=>[u.value==="username"?(o(),d("div",Ne,[t(U,{class:"col-xs-12 col-sm-6 q-pb-lg",clearable:"",outlined:"",modelValue:s(k),"onUpdate:modelValue":a[0]||(a[0]=r=>V(k)?k.value=r:null),type:"text",autocomplete:"given-name",label:e.$t("firstName"),tabindex:"1",name:"firstName",error:!!(s(D)&&s(W).validated),"error-message":s(D)},{prepend:l(()=>[t(R,{name:"person"})]),_:1},8,["modelValue","label","error","error-message"]),t(U,{class:"col-xs-12 col-sm-6",clearable:"",outlined:"",modelValue:s(N),"onUpdate:modelValue":a[1]||(a[1]=r=>V(N)?N.value=r:null),type:"text",autocomplete:"family-name",label:e.$t("lastName"),tabindex:"2",name:"lastName",error:!!(s(A)&&s(X).validated),"error-message":s(A)},{prepend:l(()=>[t(R,{name:"person_outline"})]),_:1},8,["modelValue","label","error","error-message"])])):n("",!0),i.value==="email"&&u.value==="username"?(o(),C(U,{key:1,style:{"padding-bottom":"0px"},clearable:"",outlined:"",modelValue:s(v),"onUpdate:modelValue":a[3]||(a[3]=r=>V(v)?v.value=r:null),type:"email",label:e.$t("email"),tabindex:"3",error:!!s(S),"error-message":s(S),readonly:u.value!=="username"},le({prepend:l(()=>[t(R,{name:"email"})]),_:2},[u.value!=="username"?{name:"append",fn:l(()=>[t(H,{round:"",dense:"",flat:"",icon:"edit",onClick:a[2]||(a[2]=r=>{u.value="username"})})]),key:"0"}:void 0]),1032,["modelValue","label","error","error-message","readonly"])):n("",!0),i.value==="phoneNumber"&&u.value==="username"?(o(),C(ve,{key:2,outlined:"",modelValue:s(f),"onUpdate:modelValue":a[4]||(a[4]=r=>V(f)?f.value=r:null),label:e.$t("phoneNumber"),tabindex:"3",onMaxLengthChanged:O,style:re(s($)?"padding-bottom: 20px;":"padding-bottom: 0px;"),error:!!s($),"error-message":s($),onCountryChanged:G},null,8,["modelValue","label","style","error","error-message"])):n("",!0),t(y,{class:"text-right q-pa-none"},{default:l(()=>[i.value==="email"?(o(),d("a",{key:0,onClick:a[5]||(a[5]=r=>i.value="phoneNumber"),class:"text-grey-6",href:"javascript:void(0);",tabindex:"4"},m(e.$t("usePhoneNumber")),1)):n("",!0),i.value==="phoneNumber"?(o(),d("a",{key:1,onClick:a[6]||(a[6]=r=>i.value="email"),class:"text-grey-6",href:"javascript:void(0);",tabindex:"4"},m(e.$t("useEmail")),1)):n("",!0)]),_:1})]),_:1},8,["onKeyup"])]),_:1}),t(oe,{class:"q-px-lg"},{default:l(()=>[u.value==="username"?(o(),C(H,{key:0,unelevated:"",size:"lg",color:"primary",class:"full-width text-white",label:e.$t("resetPassword"),tabindex:"3",disabled:L.value,onClick:F},null,8,["label","disabled"])):n("",!0)]),_:1}),t(y,{class:"text-center q-pa-sm"},{default:l(()=>[q("p",$e,[t(_,{to:"/login",class:"text-grey-6"},{default:l(()=>[Q(m(e.$t("returnToLogin")),1)]),_:1})]),s(x)==="Candidate"?(o(),d("p",_e,[Q(m(e.$t("needAnAccountQuestion"))+" ",1),t(_,{to:"/register",class:"text-grey-6"},{default:l(()=>[Q(m(e.$t("register")),1)]),_:1})])):n("",!0),s(x)!=="Candidate"?(o(),d("p",we,[Q(m(e.$t("needHelpQuestion"))+" ",1),q("a",{class:"text-grey-6",href:"javascript:void(0);",onClick:a[8]||(a[8]=r=>I.value=!0),tabindex:"6"},m(e.$t("addHelpDeskTicket")),1)])):n("",!0)]),_:1}),t(y,{class:"q-pl-lg q-pa-sm"},{default:l(()=>[q("div",Ce,[t(fe,{dense:"",borderless:""})])]),_:1})]),_:1})]),t(be,{modelValue:I.value,"onUpdate:modelValue":a[9]||(a[9]=r=>I.value=r)},null,8,["modelValue"])]),_:1})}}};var ra=Z(qe,[["__scopeId","data-v-de1c7ee6"]]);export{ra as default};
