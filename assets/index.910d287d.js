import{Q as S,b as y,a as L}from"./QTabPanels.ee532ed9.js";import{Q as z}from"./QTabs.7dd7732b.js";import{Q as U}from"./QSpace.2dff4fd8.js";import{k as R,r as w,bN as C,c as b,_ as h,aZ as p,A as $,B as D,d as o,bi as r,cw as Q,D as q,cz as P,bM as M,w as E,y as I,bL as K,an as g,ao as N,bO as X}from"./index.e59a70b7.js";import{Q as Z}from"./QToolbar.40eed50b.js";import{Q as G}from"./QPage.33cc8e67.js";import{u as k}from"./use-quasar.fd84a131.js";import{u as T}from"./dataStore.ebf099da.js";import{I as V,u as H,q as J}from"./quickbase.c0a4ee71.js";import{R as O}from"./requestData.ff7be8d5.js";import{_ as A}from"./projectSelector.a598e260.js";import{dayjs as W}from"./dayjs.126d3740.js";import{N as Y}from"./nameRequestData.974354d5.js";import"./use-panel.5705677a.js";import"./touch.60582172.js";import"./selection.0080c2a7.js";import"./QResizeObserver.c28d91c5.js";import"./rtl.cf9bbe47.js";import"./localForage.cd6b7cb1.js";import"./_commonjsHelpers.a26ce4be.js";import"./useQuerySaver.e863619d.js";import"./index.7dbe61ef.js";import"./i18n.c7f06f48.js";import"./api.5c8ce8a2.js";import"./QTable.c7ddd61b.js";import"./QList.29ca1ca1.js";import"./QMarkupTable.98a62c1b.js";import"./QSelect.c16b42ed.js";import"./QChip.564776f1.js";import"./QItemLabel.ca6bf70a.js";import"./QMenu.bb86617b.js";import"./position-engine.98e2e208.js";import"./use-fullscreen.c591edf4.js";import"./QTr.3f645555.js";import"./QTd.86b04813.js";import"./NameRequestGetEmployee.115d45d2.js";import"./QTooltip.7c1c04ce.js";import"./workday.3eac6f89.js";import"./syncEmployeeWithWorkday.973910ee.js";import"./workdayAPI.5ef96c4d.js";import"./dataStore.11b538de.js";const x=R({props:{},components:{RequestDataTable:O,projectSelector:A},setup(e){const t=k(),l=V(),d=w(null),{getSelectedProject:u}=C(l),{getOpenRequest:c,fetchAllOpenRequest:s}=T(),a=b(()=>u.value?u.value[3]:null),m=b(()=>c(a.value).sort((n,f)=>n[1].$d<f[1].$d?1:-1));async function i(n){t.loading.show(),await s({refresh:n}),t.loading.hide()}return i(!1),{openRequests:m,projectFilter:d,loadData:i}}}),ee={class:"row items-center"},te={class:"col-12 col-md-4"};function oe(e,t,l,d,u,c){const s=p("projectSelector"),a=p("request-data-table");return $(),D("div",null,[o(P,{flat:""},{default:r(()=>[o(Q,null,{default:r(()=>[q("div",ee,[q("div",te,[o(s,{dense:""})])])]),_:1})]),_:1}),o(a,{requests:e.openRequests,status:"Open",onRefreshData:t[0]||(t[0]=m=>e.loadData(!0))},null,8,["requests"])])}var se=h(x,[["render",oe]]);const ae=R({props:{},components:{RequestDataTable:O,projectSelector:A},setup(e){const t=k(),l=M(),d=V(),u=w(null),{getSelectedProject:c}=C(d),{getPendingRequest:s,fetchAllPendingRequest:a}=T(),m=b(()=>c.value?c.value[3]:null),i=b(()=>s(m.value).sort((f,j)=>f[1].$d<j[1].$d?1:-1));async function n(f){t.loading.show(),await a({refresh:f}),t.loading.hide()}return E(()=>l.from,f=>{f.name==="new-request"&&(console.log("reloading"),a({refresh:!0}))}),n(!1),{pendingRequests:i,projectFilter:u,loadData:n}}}),ne={class:"row items-center"},re={class:"col-12 col-md-4"};function le(e,t,l,d,u,c){const s=p("projectSelector"),a=p("request-data-table");return $(),D("div",null,[o(P,{flat:""},{default:r(()=>[o(Q,null,{default:r(()=>[q("div",ne,[q("div",re,[o(s,{dense:""})])])]),_:1})]),_:1}),o(a,{requests:e.pendingRequests,status:"Pending",onRefreshData:t[0]||(t[0]=m=>e.loadData(!0))},null,8,["requests"])])}var ue=h(ae,[["render",le]]);const ce=R({props:{},components:{RequestDataTable:O,projectSelector:A},setup(e){const t=k(),l=V(),d=w(null),{getSelectedProject:u}=C(l),{getClosedRequest:c,fetchAllClosedRequest:s}=T(),a=b(()=>u.value?u.value[3]:null),m=b(()=>c(a.value).sort((n,f)=>n[1].$d<f[1].$d?1:-1));async function i(n){t.loading.show(),await s({refresh:n}),t.loading.hide()}return i(),{closedRequests:m,projectFilter:d,loadData:i}}}),de={class:"row items-center"},me={class:"col-12 col-md-4"};function pe(e,t,l,d,u,c){const s=p("projectSelector"),a=p("request-data-table");return $(),D("div",null,[o(P,{flat:""},{default:r(()=>[o(Q,null,{default:r(()=>[q("div",de,[q("div",me,[o(s,{dense:""})])])]),_:1})]),_:1}),o(a,{requests:e.closedRequests,status:"Completed",onRefreshData:t[0]||(t[0]=m=>e.loadData(!0))},null,8,["requests"])])}var ie=h(ce,[["render",pe]]);const fe=R({props:{},components:{NameRequestDataTable:Y,projectSelector:A},setup(e){const t=k(),l=V(),{capitalize:d}=I,u=w(null),{userData:c}=H(),{getSelectedProject:s}=C(l),{getNameRequest:a,fetchAllNameRequest:m,removeData:i}=T(),n=b(()=>s.value?s.value[3]:null),f=b(()=>a(n.value).sort((_,v)=>_[1].$d<v[1].$d?1:-1));async function j(_){t.loading.show(),await m({refresh:_}),t.loading.hide()}function F(_){return`${d(_[6].toLowerCase())} ${d(_[7].toLowerCase())}`}async function B(_){t.dialog({title:"Confirm",message:`Are you sure you want to remove ${F(_)} from request# ${_[18]}?`,cancel:!0,persistent:!0}).onOk(async()=>{try{const{data:v}=await J.upsertRecordsXML({to:"bsg4yb4wa",data:[{3:{value:_[3]},11:{value:!0},12:{value:W().tz("America/Chicago")},13:{value:`${c[35]} ${c[37]}`}}],fieldsToReturn:[15],formatObject:15});i({type:"nameRequest",key:v[0][15][38],item:v[0][15],storageKey:"storageNameRequest"})}catch(v){t.notify({type:"negative",message:"Cannot remove name request"}),console.log(v)}})}return j(),{nameRequests:f,projectFilter:u,removeName:B,loadData:j}}}),_e={class:"row items-center"},$e={class:"col-12 col-md-4"};function qe(e,t,l,d,u,c){const s=p("projectSelector"),a=p("name-request-data-table");return $(),D("div",null,[o(P,{flat:""},{default:r(()=>[o(Q,null,{default:r(()=>[q("div",_e,[q("div",$e,[o(s,{dense:""})])])]),_:1})]),_:1}),o(a,{requests:e.nameRequests,status:"Named",onRemoveName:e.removeName,onRefreshData:t[0]||(t[0]=m=>e.loadData(!0))},null,8,["requests","onRemoveName"])])}var be=h(fe,[["render",qe]]);const ve=R({name:"Requests",components:{OpenTab:se,PendingTab:ue,CompleteTab:ie,NamesTab:be},setup(){const e=K(),t=w(0);function l(){e.push({name:"new-request"})}return{tab:t,addNewRequest:l}}}),ge={class:"q-pa-md"};function Re(e,t,l,d,u,c){const s=p("open-tab"),a=p("pending-tab"),m=p("names-tab"),i=p("complete-tab");return $(),g(G,{style:{"max-width":"100vw"}},{default:r(()=>[q("div",ge,[o(Z,{class:"bg-info text-white shadow-2 rounded-borders"},{default:r(()=>[o(z,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=n=>e.tab=n),"bg-color":"none","indicator-color":"accent",dense:e.$q.screen.lt.md},{default:r(()=>[o(S,{name:0,label:e.$q.screen.gt.xs?"Open Requests":"Open"},null,8,["label"]),e.$q.screen.gt.sm?($(),g(S,{key:0,name:1,label:e.$q.screen.gt.xs?"Pending Requests":"Pending"},null,8,["label"])):N("",!0),e.$can("read","nameRequests")?($(),g(S,{key:1,name:2,label:e.$q.screen.gt.xs?"Named Requests":"Named"},null,8,["label"])):N("",!0),e.$q.screen.gt.sm?($(),g(S,{key:2,name:3,label:e.$q.screen.gt.xs?"Completed Requests":"Completed"},null,8,["label"])):N("",!0)]),_:1},8,["modelValue","dense"]),o(U),e.$q.screen.gt.sm?($(),g(X,{key:0,dense:"",color:"accent",icon:"add",label:e.$q.screen.lt.md?"Add New":"Add New Request",onClick:e.addNewRequest},null,8,["label","onClick"])):N("",!0)]),_:1}),o(L,{modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=n=>e.tab=n),animated:""},{default:r(()=>[o(y,{name:0},{default:r(()=>[o(s)]),_:1}),o(y,{name:1},{default:r(()=>[o(a)]),_:1}),o(y,{name:2},{default:r(()=>[o(m)]),_:1}),o(y,{name:3},{default:r(()=>[o(i)]),_:1})]),_:1},8,["modelValue"])])]),_:1})}var ct=h(ve,[["render",Re]]);export{ct as default};
