import{l as S,r as v,c as h,_ as F,A as u,B as f,d as t,bi as r,D as g,ab as w,bO as d,ao as p,cx as L,bF as Q}from"./index.7f467912.js";import{Q as B}from"./QSelect.a345da3a.js";import{Q as q}from"./QForm.9215ce8a.js";import{a as A,u as D}from"./vee-validate.esm.3e9599dd.js";import{a as M}from"./array.56d01c64.js";const U=S({emits:["closeEdit"],components:{},props:{config:Object},setup(e,{emit:o}){const s=v(null),i=v(null),c=v(!1),y=async()=>{const{type:n,initialValue:a}=e.config;if(n==="options"){const{getter:b}=e.config;i.value=await b(),s.value=i.value,m.value=a(s.value)}else m.value=a},l=h(()=>M({entry:e.config.formRules})),{meta:k,errors:$,handleSubmit:C}=A({validationSchema:l}),{value:m}=D("entry"),E=(n,a)=>{const{filter:b}=e.config;n===""&&a(()=>{s.value=i.value}),a(()=>{const O=n.toLowerCase();s.value=b(i.value,O)})},V=n=>{c.value=!1,i.value.push(n),s.value.push(n),m.value=n},N=C(async n=>{const{setter:a}=e.config;await a(n.entry),o("closeEdit")});return y(),{rawOptions:i,options:s,entry:m,formErrors:$,formMeta:k,submit:N,filterOptions:E,addNew:c,newOptionAdded:V}}}),j={key:0,class:"q-pr-xl"},I={class:"text-caption"},R={key:0,class:"text-center bg-info"},z={key:0,class:"text-center bg-info"},G={key:1,class:"q-pr-xl"},H={class:"text-caption"};function J(e,o,s,i,c,y){return u(),f("div",null,[t(q,{onSubmit:Q(e.submit,["prevent"])},{default:r(()=>[e.config.type==="options"?(u(),f("div",j,[t(B,{class:"q-mb-sm",dense:"",label:`Select a ${e.config.fieldLabel}`,"transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.entry,"onUpdate:modelValue":o[3]||(o[3]=l=>e.entry=l),options:e.options,"option-label":e.config.optionLabel,"display-value":`${e.entry?e.entry[e.config.displayValue]:""}`,"bottom-slots":"",error:!!e.formErrors.entry,"stack-label":"","use-input":"","input-debounce":"0",onFilter:e.filterOptions,clearable:"",loading:!e.rawOptions,disable:!e.rawOptions},{error:r(()=>[g("div",I,w(e.formErrors.entry),1)]),after:r(()=>[t(d,{type:"submit",color:"info",icon:"done",dense:"",onClick:e.submit},null,8,["onClick"]),t(d,{color:"dark",icon:"close",dense:"",onClick:o[0]||(o[0]=l=>e.$emit("closeEdit"))})]),"after-options":r(()=>[e.config.allowNew&&e.options&&e.options.length>0?(u(),f("div",R,[t(d,{flat:"",color:"white",label:`Add a New ${e.config.fieldLabel}`,onClick:o[1]||(o[1]=l=>e.addNew=!0)},null,8,["label"])])):p("",!0)]),"no-option":r(()=>[e.config.allowNew?(u(),f("div",z,[t(d,{flat:"",color:"white",label:`Add a New ${e.config.fieldLabel}`,onClick:o[2]||(o[2]=l=>e.addNew=!0)},null,8,["label"])])):p("",!0)]),_:1},8,["label","modelValue","options","option-label","display-value","error","onFilter","loading","disable"])])):p("",!0),e.config.type==="input"?(u(),f("div",G,[t(L,{class:"q-mb-sm",dense:"",label:e.config.fieldLabel,modelValue:e.entry,"onUpdate:modelValue":o[5]||(o[5]=l=>e.entry=l),"bottom-slots":"",error:!!e.formErrors.entry,"stack-label":""},{error:r(()=>[g("div",H,w(e.formErrors.entry),1)]),after:r(()=>[t(d,{type:"submit",color:"info",icon:"done",dense:"",onClick:e.submit},null,8,["onClick"]),t(d,{color:"dark",icon:"close",dense:"",onClick:o[4]||(o[4]=l=>e.$emit("closeEdit"))})]),_:1},8,["label","modelValue","error"])])):p("",!0)]),_:1},8,["onSubmit"])])}var Y=F(U,[["render",J]]);export{Y as E};
