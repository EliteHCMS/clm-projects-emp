import{Q as $,b as Q,a as O}from"./QTabPanels.dca0f98d.js";import{Q as S}from"./QTabs.663fbc0e.js";import{Q as U}from"./QToolbar.f7ec93c9.js";import{Q as k}from"./QPage.4a1eacda.js";import{R as q,E as P}from"./roster.9a6d05dd.js";import{Q as g}from"./QSelect.08716fd1.js";import{k as A,r as b,c as f,_ as F,aZ as y,A as h,B as j,d as t,bi as n,cw as M,D as v,ao as N,cx as _,cz as R,an as z}from"./index.df995f5f.js";import{u as L}from"./use-quasar.e1d67d94.js";import{u as I}from"./dataStore.e1ab6f28.js";import{u as Z}from"./quickbase.95274e2f.js";import{dayjs as i}from"./dayjs.2c96dcd3.js";import"./use-panel.c6f94346.js";import"./touch.60582172.js";import"./selection.15ff2c8a.js";import"./QResizeObserver.b8913258.js";import"./rtl.cf9bbe47.js";import"./QTable.ec6bcda4.js";import"./QList.e037d225.js";import"./QMarkupTable.3028b02a.js";import"./use-fullscreen.ea1c9687.js";import"./QTr.6646e9f9.js";import"./QTd.4973894f.js";import"./QInnerLoading.bdf3df47.js";import"./export-file.eb604dd4.js";import"./QChip.20ea4134.js";import"./QItemLabel.937e07e9.js";import"./QMenu.de16f5ac.js";import"./position-engine.ed057110.js";import"./localForage.3844ce44.js";import"./_commonjsHelpers.dfee5925.js";import"./index.7dbe61ef.js";import"./i18n.bd13b955.js";import"./api.c05f3e59.js";const G=A({props:{},components:{RosterTable:q},setup(e){const o=L(),p=b(null),w=b(""),m=b(null),d=b(null),{userProjects:u}=Z(),{getAssignments:r,fetchAllAssignments:c}=I(),C=f(()=>p.value?p.value[9]:null),D=f(()=>u()),V=f(()=>{const a=i().subtract(14,"day");return r(C.value).sort((l,E)=>l[1].$d<E[1].$d?1:-1).filter(l=>!l[112]&&l.latest&&l[102]==="Active"&&i(l[1].$d).isSameOrAfter(a)&&i(l[1].$d).isSameOrBefore(i()))}),T=f(()=>{let a=[];return V.value.forEach(s=>{s[75].toLowerCase().includes(w.value.toLowerCase())&&a.push(s)}),a=m.value?a.filter(s=>i(s[1].$d).tz("America/Chicago").format("MM/DD/YYYY")===i(m.value).tz("America/Chicago").format("MM/DD/YYYY")):a,a=d.value?a.filter(s=>s[68]===d.value):a,a.sort((s,l)=>s.employee[22]>l.employee[22]?1:-1)}),Y=f(()=>[...new Map(V.value.map(a=>[a[68],a[68]])).values()]);async function B(){o.loading.show(),await c(),o.loading.hide()}return B(),{allAssignments:V,projectOptions:D,projectFilter:p,search:w,startDateFilter:m,craftFilter:d,craftOptions:Y,rows:T}}}),H={class:"row items-center"},J={key:0,class:"col-12 col-md-3"},K={class:"col-12 col-md-3 q-px-sm"},W={class:"col-12 col-md-3 q-px-sm"},X={class:"col-12 col-md-3 q-px-sm"};function x(e,o,p,w,m,d){const u=y("roster-table");return h(),j("div",null,[t(R,{flat:""},{default:n(()=>[t(M,null,{default:n(()=>[v("div",H,[e.projectOptions.length>1?(h(),j("div",J,[t(g,{dense:"",label:"Filter By Project","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.projectFilter,"onUpdate:modelValue":o[0]||(o[0]=r=>e.projectFilter=r),options:e.projectOptions,"option-value":"9","option-label":"12","display-value":e.projectFilter?e.projectFilter[12]:"","use-chips":""},null,8,["modelValue","options","display-value"])])):N("",!0),v("div",K,[t(_,{dense:"",modelValue:e.search,"onUpdate:modelValue":o[1]||(o[1]=r=>e.search=r),label:"Search"},null,8,["modelValue"])]),v("div",W,[t(_,{dense:"",modelValue:e.startDateFilter,"onUpdate:modelValue":o[2]||(o[2]=r=>e.startDateFilter=r),label:"Arrival Date",type:"date","stack-label":""},null,8,["modelValue"])]),v("div",X,[t(g,{dense:"",label:"Craft","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.craftFilter,"onUpdate:modelValue":o[3]||(o[3]=r=>e.craftFilter=r),options:e.craftOptions,"use-chips":""},null,8,["modelValue","options"])])])]),_:1})]),_:1}),t(u,{rows:e.rows},null,8,["rows"])])}var ee=F(G,[["render",x]]);const oe=A({name:"Employees",components:{RosterTab:P,NewArrivalsTab:ee},setup(){return{tab:b(0)}}}),te={class:"q-pa-md"};function ae(e,o,p,w,m,d){const u=y("roster-tab"),r=y("new-arrivals-tab");return h(),z(k,{style:{"max-width":"100vw"}},{default:n(()=>[v("div",te,[t(U,{class:"bg-info text-white shadow-2 rounded-borders"},{default:n(()=>[t(S,{modelValue:e.tab,"onUpdate:modelValue":o[0]||(o[0]=c=>e.tab=c),"bg-color":"none","indicator-color":"accent",align:"justify",dense:""},{default:n(()=>[t($,{name:0,label:e.$q.screen.gt.xs?"All Employees":"Employees"},null,8,["label"]),t($,{name:1,label:"New Arrivals"})]),_:1},8,["modelValue"])]),_:1}),t(O,{modelValue:e.tab,"onUpdate:modelValue":o[1]||(o[1]=c=>e.tab=c),animated:""},{default:n(()=>[t(Q,{name:0},{default:n(()=>[t(u)]),_:1}),t(Q,{name:1},{default:n(()=>[t(r)]),_:1})]),_:1},8,["modelValue"])])]),_:1})}var ke=F(oe,[["render",ae]]);export{ke as default};
