import{Q as se,a as ne}from"./QHeader.1e872acd.js";import{bP as K,i as oe,bR as O,bS as re,r as q,cp as ie,c as _,w as Q,aL as te,ch as ue,h as v,g as ae,d8 as de,aJ as ce,aN as fe,o as ve,bT as me,bQ as ge,cm as he,dh as z,cn as j,di as G,aI as be,cg as E,c7 as xe,ce as _e,A as b,B as p,d as o,bi as n,F as U,aY as W,au as C,ab as V,dj as N,G as P,an as L,bO as J,ao as Z,bk as R,bH as H,bJ as A,bI as X,bK as ye,D as we,cx as qe,cZ as Y}from"./index.c6a6bd52.js";import{Q as ke}from"./QToolbar.824153e3.js";import{Q as ee}from"./QList.4c591b4f.js";import{Q as $}from"./QItemLabel.65c1af13.js";import{a as Ce,Q as Qe}from"./QDrawer.d09d7e19.js";import{a as Se,Q as He}from"./QLayout.305762e1.js";import{Q as pe}from"./QResizeObserver.1f940c7c.js";import"./TouchPan.2f13ade1.js";import"./touch.60582172.js";import"./selection.a9e47549.js";var Me=K({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:c,emit:g}){const{proxy:{$q:f}}=ae(),t=oe(re,O);if(t===O)return console.error("QFooter needs to be child of QLayout"),O;const u=q(parseInt(e.heightHint,10)),i=q(!0),s=q(ie.value===!0||t.isContainer.value===!0?0:window.innerHeight),r=_(()=>e.reveal===!0||t.view.value.indexOf("F")>-1||f.platform.is.ios&&t.isContainer.value===!0),x=_(()=>t.isContainer.value===!0?t.containerHeight.value:s.value),a=_(()=>{if(e.modelValue!==!0)return 0;if(r.value===!0)return i.value===!0?u.value:0;const l=t.scroll.value.position+x.value+u.value-t.height.value;return l>0?l:0}),m=_(()=>e.modelValue!==!0||r.value===!0&&i.value!==!0),k=_(()=>e.modelValue===!0&&m.value===!0&&e.reveal===!0),y=_(()=>"q-footer q-layout__section--marginal "+(r.value===!0?"fixed":"absolute")+"-bottom"+(e.bordered===!0?" q-footer--bordered":"")+(m.value===!0?" q-footer--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus"+(r.value!==!0?" hidden":""):"")),M=_(()=>{const l=t.rows.value.bottom,h={};return l[0]==="l"&&t.left.space===!0&&(h[f.lang.rtl===!0?"right":"left"]=`${t.left.size}px`),l[2]==="r"&&t.right.space===!0&&(h[f.lang.rtl===!0?"left":"right"]=`${t.right.size}px`),h});function w(l,h){t.update("footer",l,h)}function S(l,h){l.value!==h&&(l.value=h)}function I({height:l}){S(u,l),w("size",l)}function B(){if(e.reveal!==!0)return;const{direction:l,position:h,inflectionPoint:D}=t.scroll.value;S(i,l==="up"||h-D<100||t.height.value-x.value-h-u.value<300)}function F(l){k.value===!0&&S(i,!0),g("focusin",l)}Q(()=>e.modelValue,l=>{w("space",l),S(i,!0),t.animate()}),Q(a,l=>{w("offset",l)}),Q(()=>e.reveal,l=>{l===!1&&S(i,e.modelValue)}),Q(i,l=>{t.animate(),g("reveal",l)}),Q([u,t.scroll,t.height],B),Q(()=>f.screen.height,l=>{t.isContainer.value!==!0&&S(s,l)});const d={};return t.instances.footer=d,e.modelValue===!0&&w("size",u.value),w("space",e.modelValue),w("offset",a.value),te(()=>{t.instances.footer===d&&(t.instances.footer=void 0,w("size",0),w("offset",0),w("space",!1))}),()=>{const l=ue(c.default,[v(pe,{debounce:0,onResize:I})]);return e.elevated===!0&&l.push(v("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),v("footer",{class:y.value,style:M.value,onFocusin:F},l)}}}),Le=K({name:"QChatMessage",props:{sent:Boolean,label:String,bgColor:String,textColor:String,name:String,avatar:String,text:Array,stamp:String,size:String,labelHtml:Boolean,nameHtml:Boolean,textHtml:Boolean,stampHtml:Boolean},setup(e,{slots:c}){const g=_(()=>e.sent===!0?"sent":"received"),f=_(()=>`q-message-text-content q-message-text-content--${g.value}`+(e.textColor!==void 0?` text-${e.textColor}`:"")),t=_(()=>`q-message-text q-message-text--${g.value}`+(e.bgColor!==void 0?` text-${e.bgColor}`:"")),u=_(()=>"q-message-container row items-end no-wrap"+(e.sent===!0?" reverse":"")),i=_(()=>e.size!==void 0?`col-${e.size}`:""),s=_(()=>({msg:e.textHtml===!0?"innerHTML":"textContent",stamp:e.stampHtml===!0?"innerHTML":"textContent",name:e.nameHtml===!0?"innerHTML":"textContent",label:e.labelHtml===!0?"innerHTML":"textContent"}));function r(a){return c.stamp!==void 0?[a,v("div",{class:"q-message-stamp"},c.stamp())]:e.stamp?[a,v("div",{class:"q-message-stamp",[s.value.stamp]:e.stamp})]:[a]}function x(a,m){const k=m===!0?a.length>1?y=>y:y=>v("div",[y]):y=>v("div",{[s.value.msg]:y});return a.map((y,M)=>v("div",{key:M,class:t.value},[v("div",{class:f.value},r(k(y)))]))}return()=>{const a=[];c.avatar!==void 0?a.push(c.avatar()):e.avatar!==void 0&&a.push(v("img",{class:`q-message-avatar q-message-avatar--${g.value}`,src:e.avatar,"aria-hidden":"true"}));const m=[];c.name!==void 0?m.push(v("div",{class:`q-message-name q-message-name--${g.value}`},c.name())):e.name!==void 0&&m.push(v("div",{class:`q-message-name q-message-name--${g.value}`,[s.value.name]:e.name})),c.default!==void 0?m.push(x(de(c.default()),!0)):e.text!==void 0&&m.push(x(e.text)),a.push(v("div",{class:i.value},m));const k=[];return c.label!==void 0?k.push(v("div",{class:"q-message-label"},c.label())):e.label!==void 0&&k.push(v("div",{class:"q-message-label",[s.value.label]:e.label})),k.push(v("div",{class:u.value},a)),v("div",{class:`q-message q-message-${g.value}`},k)}}});const{passive:T}=he;var Te=K({name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:{default:void 0},initialIndex:Number,disable:Boolean,reverse:Boolean},emits:["load"],setup(e,{slots:c,emit:g}){const f=q(!1),t=q(!0),u=q(null);let i=e.initialIndex||0,s,r;const x=_(()=>"q-infinite-scroll__loading"+(f.value===!0?"":" invisible"));function a(){if(e.disable===!0||f.value===!0||t.value===!1)return;const d=z(s),l=j(s),h=G(s);e.reverse===!1?Math.round(l+h+e.offset)>=Math.round(d)&&m():Math.round(l)<=e.offset&&m()}function m(){if(e.disable===!0||f.value===!0||t.value===!1)return;i++,f.value=!0;const d=z(s);g("load",i,l=>{t.value===!0&&(f.value=!1,be(()=>{if(e.reverse===!0){const h=z(s),D=j(s),le=h-d;E(s,D+le)}l===!0?M():u.value&&u.value.closest("body")&&r()}))})}function k(){i=0}function y(){t.value===!1&&(t.value=!0,s.addEventListener("scroll",r,T)),a()}function M(){t.value===!0&&(t.value=!1,f.value=!1,s.removeEventListener("scroll",r,T),r!==void 0&&r.cancel!==void 0&&r.cancel())}function w(){if(s&&t.value===!0&&s.removeEventListener("scroll",r,T),s=xe(u.value,e.scrollTarget),t.value===!0){if(s.addEventListener("scroll",r,T),e.reverse===!0){const d=z(s),l=G(s);E(s,d-l)}a()}}function S(d){i=d}function I(d){d=parseInt(d,10);const l=r;r=d<=0?a:_e(a,isNaN(d)===!0?100:d),s&&t.value===!0&&(l!==void 0&&s.removeEventListener("scroll",l,T),s.addEventListener("scroll",r,T))}Q(()=>e.disable,d=>{d===!0?M():y()}),Q(()=>e.reverse,d=>{f.value===!1&&t.value===!0&&a()}),Q(()=>e.scrollTarget,w),Q(()=>e.debounce,I);let B=!1;ce(()=>{B!==!1&&s&&E(s,B)}),fe(()=>{B=s?j(s):!1}),te(()=>{t.value===!0&&s.removeEventListener("scroll",r,T)}),ve(()=>{I(e.debounce),w()});const F=ae();return Object.assign(F.proxy,{poll:()=>{r!==void 0&&r()},trigger:m,stop:M,reset:k,resume:y,setIndex:S}),()=>{const d=me(c.default,[]);return e.disable!==!0&&t.value===!0&&d[e.reverse===!1?"push":"unshift"](v("div",{class:x.value},ge(c.loading))),v("div",{class:"q-infinite-scroll",ref:u},d)}}});const Ve={class:"q-pa-md row justify-center"},Be={__name:"chatLog",props:{contact:{type:Object,default:()=>({})}},setup(e){const c=e,g=q([{text:["Hello does this work?"],sent:!0,name:"Jose",timestamp:"5 Minutes ago"},{text:["Yes it sort of works?"],sent:!1,name:"John Doe",timestamp:"4 Minutes ago"}]),f=()=>{console.log(c),console.log("load more messages")};return(t,u)=>(b(),p("div",Ve,[o(Te,{reverse:"",style:{width:"100%"},onLoad:f},{default:n(()=>[(b(!0),p(U,null,W(g.value,(i,s)=>(b(),p("div",{key:s},[o(Le,{text:i.text,sent:i.sent,name:i.sent?i.name:e.contact.name,"text-color":i.sent?"white":"","bg-color":i.sent?"primary":"amber"},{stamp:n(()=>[C(V(i.timestamp),1)]),avatar:n(()=>[o(N,{class:P(["q-message-avatar",{"q-message-avatar--sent":i.sent,"q-message-avatar--received":!i.sent}]),color:i.sent?"primary":"amber"},{default:n(()=>[C("J")]),_:2},1032,["class","color"])]),_:2},1032,["text","sent","name","text-color","bg-color"])]))),128))]),_:1})]))}},$e={class:"q-pa-md",style:{height:"92vh"}},Ie={key:0},ze=["src"],Ne={key:1,class:"q-pa-md row justify-center text-h5"},We={__name:"index",setup(e){const c=q([{id:1,name:"(832) 123-1234",letter:null,unread:!0,lastMessageTime:"1 Min ago",lastMessage:"Hello?"},{id:2,name:"Jane Smith",letter:"JS",lastMessageTime:"1 Min ago",lastMessage:"Yes it sort of works?"},{id:3,name:"Will Smith",letter:"W",lastMessageTime:"1 Min ago",lastMessage:"Yes it sort of works?"},{id:4,name:"John Doe",letter:"S",lastMessageTime:"1 Min ago",lastMessage:"Yes it sort of works?"}]),g=q([{id:5,name:"Brunhilde Panswick",email:"bpanswick4@csmonitor.com",avatar:"avatar2.jpg"},{id:6,name:"Winfield Stapforth",email:"wstapforth5@pcworld.com",avatar:"avatar6.jpg"}]),f=q(!0),t=q(""),u=q(null),i=r=>{u.value?u.value.email===r.email?(u.value=null,r.unread=!1):(u.value=r,r&&(r.unread=!1)):(u.value=r,r.unread=!1)},s=()=>{u.value=null,console.log("add contact")};return(r,x)=>(b(),p("div",$e,[o(He,{view:"lHh Lpr lFf",container:"",style:{height:"100%"},class:"shadow-2 rounded-borders bg-grey-3"},{default:n(()=>[u.value?(b(),L(ne,{key:0,bordered:"",class:"bg-white text-black",style:{height:"57px"}},{default:n(()=>[o(ke,null,{default:n(()=>[o(se,null,{default:n(()=>[C(V(u.value.name),1)]),_:1}),o(J,{dense:"",flat:"",round:"",icon:"more_vert"})]),_:1})]),_:1})):Z("",!0),o(Ce,{"show-if-above":"",modelValue:f.value,"onUpdate:modelValue":x[1]||(x[1]=a=>f.value=a),side:"left",width:350,bordered:""},{default:n(()=>[o(Qe,{class:"fit"},{default:n(()=>[o(ee,{separator:""},{default:n(()=>[R((b(),L(A,{clickable:"",onClick:x[0]||(x[0]=a=>s())},{default:n(()=>[o(H,{avatar:"",top:""},{default:n(()=>[o(N,{icon:"add",color:"grey","text-color":"white"})]),_:1}),o(H,null,{default:n(()=>[C("New Message")]),_:1})]),_:1})),[[Y]])]),_:1}),o(ee,{bordered:""},{default:n(()=>[(b(!0),p(U,null,W(c.value,a=>R((b(),L(A,{key:a.id,clickable:"",onClick:m=>i(a)},{default:n(()=>[o(H,{avatar:""},{default:n(()=>[o(N,{color:"primary","text-color":"white"},{default:n(()=>[a.letter?(b(),p("span",Ie,V(a.letter),1)):(b(),L(X,{key:1,name:"person"}))]),_:2},1024)]),_:2},1024),o(H,null,{default:n(()=>[o($,{lines:"1",class:P({"text-bold":a.unread})},{default:n(()=>[C(V(a.name),1)]),_:2},1032,["class"]),o($,{caption:"",lines:"2",class:P({"text-bold":a.unread,"text-black":a.unread})},{default:n(()=>[C(V(a.lastMessage),1)]),_:2},1032,["class"])]),_:2},1024),o(H,{side:"",top:"",class:P({"text-bold":a.unread,"text-black":a.unread})},{default:n(()=>[C(" 1 min ago ")]),_:2},1032,["class"])]),_:2},1032,["onClick"])),[[Y]])),128)),o(ye),o($,{header:""},{default:n(()=>[C("Offline")]),_:1}),(b(!0),p(U,null,W(g.value,a=>R((b(),L(A,{key:a.id,class:"q-mb-sm",clickable:"",onClick:m=>i(a)},{default:n(()=>[o(H,{avatar:""},{default:n(()=>[o(N,null,{default:n(()=>[we("img",{src:`https://cdn.quasar.dev/img/${a.avatar}`},null,8,ze)]),_:2},1024)]),_:2},1024),o(H,null,{default:n(()=>[o($,null,{default:n(()=>[C(V(a.name),1)]),_:2},1024),o($,{caption:"",lines:"1"},{default:n(()=>[C(V(a.email),1)]),_:2},1024)]),_:2},1024),o(H,{side:""},{default:n(()=>[o(X,{name:"chat_bubble",color:"grey"})]),_:1})]),_:2},1032,["onClick"])),[[Y]])),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(Se,null,{default:n(()=>[u.value?(b(),L(Be,{key:0,contact:u.value},null,8,["contact"])):(b(),p("div",Ne,"Select a message"))]),_:1}),u.value?(b(),L(Me,{key:1,class:"bg-white"},{default:n(()=>[o(qe,{autogrow:"",modelValue:t.value,"onUpdate:modelValue":x[2]||(x[2]=a=>t.value=a),placeholder:"Type a message",rounded:"",dense:"",standout:"",class:"q-py-sm"},{before:n(()=>[o(J,{round:"",dense:"",flat:"",icon:"attach_file"})]),after:n(()=>[o(J,{round:"",dense:"",flat:"",icon:"send"})]),_:1},8,["modelValue"])]),_:1})):Z("",!0)]),_:1})]))}};export{We as default};
