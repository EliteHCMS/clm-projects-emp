import{l as S,r as v,c as h,_ as F,B as u,C as f,d as l,bt as r,E as g,ae as w,bY as d,at as p,cX as L,bQ as Q}from"./index.960d5b34.js";import{a as B}from"./QSelect.ce23f885.js";import{Q as q}from"./QForm.f3e65354.js";import{a as A,u as D}from"./vee-validate.esm.d4095220.js";import{a as M}from"./array.164cfe36.js";const U=S({emits:["closeEdit"],components:{},props:{config:Object},setup(e,{emit:o}){const s=v(null),i=v(null),c=v(!1),y=async()=>{const{type:n,initialValue:a}=e.config;if(n==="options"){const{getter:b}=e.config;i.value=await b(),s.value=i.value,m.value=a(s.value)}else m.value=a},t=h(()=>M({entry:e.config.formRules})),{meta:k,errors:$,handleSubmit:C}=A({validationSchema:t}),{value:m}=D("entry"),E=(n,a)=>{const{filter:b}=e.config;n===""&&a(()=>{s.value=i.value}),a(()=>{const O=n.toLowerCase();s.value=b(i.value,O)})},V=n=>{c.value=!1,i.value.push(n),s.value.push(n),m.value=n},N=C(async n=>{const{setter:a}=e.config;await a(n.entry),o("closeEdit")});return y(),{rawOptions:i,options:s,entry:m,formErrors:$,formMeta:k,submit:N,filterOptions:E,addNew:c,newOptionAdded:V}}}),j={key:0,class:"q-pr-xl"},I={class:"text-caption"},R={key:0,class:"text-center bg-info"},X={key:0,class:"text-center bg-info"},Y={key:1,class:"q-pr-xl"},z={class:"text-caption"};function G(e,o,s,i,c,y){return u(),f("div",null,[l(q,{onSubmit:Q(e.submit,["prevent"])},{default:r(()=>[e.config.type==="options"?(u(),f("div",j,[l(B,{class:"q-mb-sm",dense:"",label:`Select a ${e.config.fieldLabel}`,"transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.entry,"onUpdate:modelValue":o[3]||(o[3]=t=>e.entry=t),options:e.options,"option-label":e.config.optionLabel,"display-value":`${e.entry?e.entry[e.config.displayValue]:""}`,"bottom-slots":"",error:!!e.formErrors.entry,"stack-label":"","use-input":"","input-debounce":"0",onFilter:e.filterOptions,clearable:"",loading:!e.rawOptions,disable:!e.rawOptions},{error:r(()=>[g("div",I,w(e.formErrors.entry),1)]),after:r(()=>[l(d,{type:"submit",color:"info",icon:"done",dense:"",onClick:e.submit},null,8,["onClick"]),l(d,{color:"dark",icon:"close",dense:"",onClick:o[0]||(o[0]=t=>e.$emit("closeEdit"))})]),"after-options":r(()=>[e.config.allowNew&&e.options&&e.options.length>0?(u(),f("div",R,[l(d,{flat:"",color:"white",label:`Add a New ${e.config.fieldLabel}`,onClick:o[1]||(o[1]=t=>e.addNew=!0)},null,8,["label"])])):p("",!0)]),"no-option":r(()=>[e.config.allowNew?(u(),f("div",X,[l(d,{flat:"",color:"white",label:`Add a New ${e.config.fieldLabel}`,onClick:o[2]||(o[2]=t=>e.addNew=!0)},null,8,["label"])])):p("",!0)]),_:1},8,["label","modelValue","options","option-label","display-value","error","onFilter","loading","disable"])])):p("",!0),e.config.type==="input"?(u(),f("div",Y,[l(L,{class:"q-mb-sm",dense:"",label:e.config.fieldLabel,modelValue:e.entry,"onUpdate:modelValue":o[5]||(o[5]=t=>e.entry=t),"bottom-slots":"",error:!!e.formErrors.entry,"stack-label":""},{error:r(()=>[g("div",z,w(e.formErrors.entry),1)]),after:r(()=>[l(d,{type:"submit",color:"info",icon:"done",dense:"",onClick:e.submit},null,8,["onClick"]),l(d,{color:"dark",icon:"close",dense:"",onClick:o[4]||(o[4]=t=>e.$emit("closeEdit"))})]),_:1},8,["label","modelValue","error"])])):p("",!0)]),_:1},8,["onSubmit"])])}var W=F(U,[["render",G]]);export{W as E};
