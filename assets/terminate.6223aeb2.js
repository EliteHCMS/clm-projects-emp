import{l as je,r as b,bU as be,bT as ye,bV as Be,c as g,w as Q,_ as Te,A as V,B as A,d as l,br as n,cS as oe,cT as le,D as s,ac as U,bR as H,bP as N,ax as W,cU as pe,bW as K,F as ce,b4 as Le,bS as ve,ar as ge,dA as u,cV as Pe,bO as _e,aq as fe}from"./index.ed1cd1a8.js";import{Q as He}from"./QPage.4d3a0dd4.js";import{u as Ve}from"./use-quasar.0680e35f.js";import{u as I}from"./useQuerySaver.d29ff9ee.js";import{g as We,q}from"./app.58c96d85.js";import{u as he}from"./dataStore.112f1173.js";import{a as M,Q as Me}from"./QSelect.d18b0263.js";import{Q as Xe}from"./QFile.4902dd1c.js";import{Q as Ye}from"./QList.1713c134.js";import{Q as Ke}from"./QForm.a26f0b73.js";import{a as ze,u as f}from"./vee-validate.esm.9e016e91.js";import{a as z,b as Ge,c as te,e as G}from"./array.59f93f43.js";import{dayjs as ae}from"./dayjs.d6c6127f.js";import{b as Je}from"./submitRelease.cb861086.js";import{b as Ze,a as xe}from"./helpers.870cbecc.js";import{u as et}from"./dataStore.fa4960b2.js";import"./_commonjsHelpers.a26ce4be.js";import"./localForage.830ce567.js";import"./api.e0fdf09c.js";import"./index.04bc0a32.js";import"./i18n.9212c305.js";import"./QChip.8da1fa28.js";import"./QMenu.d23a604a.js";import"./position-engine.df0f0bff.js";import"./selection.e39b2fce.js";import"./rtl.b51694b1.js";const tt=je({emits:["releaseSubmitted"],props:{record:Object,employee:Object},setup(e,{emit:a}){const R=b(!1),E=b(!1),y=b(null),h=b(!1),t=b([]),w=b([]),S=Ve(),F=be(),C=ye(),O=We(),{getTermReasons:$,setTermReasons:X}=he(),{getAssignments:k,fetchAssignments:p}=et(),{fetchProjectUsers:D}=O,{getProjectUsers:J}=Be(O),Z=g(()=>["Without Reservation","With Some Reservation","Would Not Recommend"]),j=g(()=>k(e.record[74]).length>0?k(e.record[74]).filter(o=>o[3]!==e.record[3]).sort((o,r)=>o[75]>r[75]?1:-1):[]),i=g(()=>[...j.value,...w.value]),d=g(()=>J.value(e.record[74])),c=b(i.value);Q(d,o=>{o&&o.length>0&&Ne()});const B=g(()=>z({selection:z().required().nullable().label("Reason"),effective:Ge().required().label("Last Day On Site"),category:te().nullable(),attendance:G().required().label("Attendance"),capability:G().required().label("Capability"),attitude:G().required().label("Attitude"),promotable:G().required().label("Promotability"),comments:te().nullable().label("Comments"),equipment:z().required().nullable().label("Equipment Returned"),supervisor:z().nullable().label("Supervisor").required(),recommendation:te().nullable().label("Recommendation").required()})),{errors:we,handleSubmit:qe,handleReset:x}=ze({validationSchema:B,initialValues:{}}),{value:T}=f("selection"),{value:L}=f("effective"),{value:P}=f("category"),{value:ee}=f("attachments"),{value:se}=f("capability"),{value:ne}=f("attendance"),{value:ie}=f("attitude"),{value:re}=f("promotable"),{value:Se}=f("comments"),{value:de}=f("equipment"),{value:Ae}=f("supervisor"),{value:Ue}=f("recommendation"),_=g(()=>{const o=$();return P.value?o.filter(r=>r[6]===P.value).sort((r,m)=>r[12]>m[12]?1:-1):o.sort((r,m)=>r[12]>m[12]?1:-1)});F.query&&F.query.reason==="no-show"&&(P.value="Voluntary",_.value.length>0&&(h.value=!0,T.value=_.value.find(o=>o[3]===6)),L.value=ae().format("YYYY-MM-DD"),de.value={value:!0,label:"None Issued"},se.value="0",ne.value="0",ie.value="0",re.value="0"),Q(_,(o,r)=>{F.query&&F.query.reason==="no-show"&&h.value===!1&&(h.value=!0,T.value=_.value.find(m=>m[3]===6))}),Q(P,(o,r)=>{T.value=null});const Re=qe(async o=>{if(E.value&&t.value.length===0)S.dialog({title:"Alert",message:"Supporting documents are required for this reason!"});else{const r={capability:o.capability,attendance:o.attendance,attitude:o.attitude,promotable:o.promotable,comments:o.comments?o.comments.replace(/(\r\n|\n|\r)/gm," "):null};S.dialog({title:"Confirm",message:"Are you sure you want to release this employee?",cancel:!0,persistent:!0}).onOk(async()=>{try{R.value=!0;const{release:m,employee:v,assignment:Y}=await Je({employee:e.employee,assignment:e.record,values:o,effectiveNow:!ue.value,attachments:t.value,ratings:r,supervisor:o.supervisor});a("releaseSubmitted",{release:m,employee:v,assignment:Y,effectiveNow:!ue.value}),x()}catch{R.value=!1,S.notify({type:"negative",message:"Cannot submit release."})}})}}),Ee=()=>{S.dialog({title:"Confirm",message:"Are you sure you want to cancel?",cancel:!0,persistent:!0}).onOk(()=>{x(),C.go(-1)})};Q(T,(o,r)=>{o&&o[19]?(E.value=!0,ee.value=!0):(ee.value=!1,E.value=!1)});const Ce=g(()=>{const o=$();return[...new Map(o.map(r=>[r[6],r[6]])).values()]}),ue=g(()=>L.value&&L.value!==""?ae().isBefore(ae(L.value)):!1),De=o=>new Promise((r,m)=>{const v=new FileReader;v.readAsDataURL(o),v.onload=()=>r(v.result.replace(/^data:.+;base64,/,"")),v.onerror=Y=>m(Y)});Q(y,o=>{o&&me()});const me=()=>{y.value&&y.value.forEach(async o=>{const r={6:{value:await De(o),filename:o.name},7:{value:o.name}};t.value.push(r),y.value=null})},Fe=o=>{t.value.splice(o,1)},$e=async()=>{if(D({selectedId:e.record[74]}),$().length===0){const{data:o}=await q.fetchFromHiringApp({fields:[I({type:"termReasons",query:"{'11'.EX.'true'}"})]});X({reasons:o})}p({projectId:e.record[74]})},ke=async o=>{const r=await Ze(o[6].value);xe(r,o[6].filename)},Ne=async()=>{d.value.forEach(async o=>{if(o[65]&&o[63]&&o[63]!=="")j.value.find(m=>m[18]===o[65])||w.value.push({18:o[65],3:null,75:o[66],104:o[63]});else if(o[63]&&o[63]!==""){const r=[{9:{value:o[63]},7:{value:"Table Query"},8:{value:`{378.EX.'${o[63]}'}OR{26.EX.'${o[10]}'}`},14:{value:549},6:{value:"bp3gb7ng2"}}],{data:m}=await q.fetchFromHiringApp({fields:r});if(m&&m.length===1){const v=m[0][378]!==""?m[0][378]:o[63];j.value.find(Oe=>Oe[18]===m[0][3])||w.value.push({18:m[0][3],3:null,75:o[66].trim(),104:v});const Ie={3:{value:o[6]},80:{value:m[0][3]},70:{value:v}};await q.upsertRecordsXML({to:"br4pxrbs6",data:[Ie],fieldsToReturn:[3]})}}})},Qe=(o,r)=>{if(o===""){r(()=>{c.value=i.value});return}r(()=>{const m=o.toLowerCase();c.value=i.value.filter(v=>v[75].toLowerCase().indexOf(m)>-1||v[104].toLowerCase().indexOf(m)>-1)})};return $e(),{props:e,options:_,primaryReasons:Ce,category:P,selection:T,effective:L,attachments:ee,capability:se,attendance:ne,attitude:ie,promotable:re,comments:Se,equipment:de,supervisor:Ae,attachmentsRequired:E,fileAttachment:y,attachedFiles:t,recommendation:Ue,recommendationOptions:Z,submit:Re,formErrors:we,handleReset:x,cancelRelease:Ee,showFiles:me,deleteFile:Fe,getAssignments:k,disableSubmit:R,downloadFile:ke,supervisorOptions:c,projectUsers:d,filterFn:Qe}}}),at={class:"row"},ot={class:"col-12 col-md-4 q-px-sm"},lt=s("div",{class:"text-caption"},"Is this release voluntary or involuntary?",-1),st={class:"text-caption"},nt={class:"col-12 col-md-4 q-pl-xs q-pr-sm"},it=s("div",{class:"text-caption"},"What is the reason for this release?",-1),rt={class:"text-caption"},dt={class:"row"},ut={class:"col-12 col-md-4 q-pl-xs q-pr-sm"},mt=s("div",{class:"text-caption"},"When is the employee's last day on site?",-1),pt={class:"text-caption"},ct={class:"col-12 col-md-4 q-pl-xs q-pr-sm"},vt=s("div",{class:"text-caption"},"Has all Company Equipment been returned?",-1),ft={class:"text-caption"},bt={class:"row items-top justify-between q-mt-sm"},yt={class:"col-4 q-pl-xs q-pr-sm"},gt={key:0,class:"text-body2 text-negative text-italic"},Vt={key:0},ht={key:1},wt={key:1,class:"text-body2 text-dark text-italic"},qt=s("span",null,"**Supporting documents are optional for this reason.",-1),St=[qt],At={key:0,class:"col-6 q-pl-xs q-pr-sm"},Ut=s("div",{class:"text-body1 text-info q-mb-sm"},"Attached Documents",-1),Rt=["onClick"],Et={class:"row q-my-md"},Ct={class:"col-12"},Dt=s("div",{class:"q-pa-sm"},[s("div",{class:"text-h6 text-bold"},"CAAP Rating"),s("div",{class:"text-body1 text-dark text-italic"},"Capability, Attendance, Attitude, and Promotability"),s("div",{class:"text-body2 text-accent q-mt-sm"},"Select how much you agree with each of the following statements.")],-1),Ft={class:"q-pb-sm"},$t=s("div",{class:"text-body2 text-info text-bold q-mb-sm"},"This employee is capable of performing their assigned job.",-1),kt={class:"q-pb-sm"},Nt=s("div",{class:"text-body2 text-info text-bold q-mb-sm"},"This employee regularly shows up to work on time.",-1),Qt={class:"q-pb-sm"},It=s("div",{class:"text-body2 text-info text-bold q-mb-sm"},"This employee has a good attitude.",-1),Ot={class:"q-pb-sm"},jt=s("div",{class:"text-body2 text-info text-bold q-mb-sm"},"I am confident that this employee can be promoted in the future.",-1),Bt={class:"row q-mt-md"},Tt={class:"col-12 col-md-5"},Lt=s("div",{class:"text-body2 text-weight-bold text-info"}," Who conducted this evaluation? ",-1),Pt={class:"text-caption"},_t={class:"row q-mt-md"},Ht={class:"col-12 col-md-5"},Wt=s("div",{class:"text-body2 text-weight-bold text-info"}," Supervisor Recommendation for Rehire ",-1),Mt={class:"text-caption"},Xt={class:"row q-py-sm"},Yt={class:"col-12"};function Kt(e,a,R,E,y,h){return V(),A("div",null,[l(Ke,{onSubmit:_e(e.submit,["prevent"])},{default:n(()=>[l(oe,null,{default:n(()=>[l(le,null,{default:n(()=>[s("div",at,[s("div",ot,[lt,l(M,{dense:"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.category,"onUpdate:modelValue":a[0]||(a[0]=t=>e.category=t),options:e.primaryReasons},{error:n(()=>[s("div",st,U(e.formErrors.selection),1)]),"no-option":n(()=>[l(H,null,{default:n(()=>[l(N,{class:"text-grey"},{default:n(()=>[W(" No Options Available ")]),_:1})]),_:1})]),_:1},8,["modelValue","options"])]),s("div",nt,[it,l(M,{dense:"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.selection,"onUpdate:modelValue":a[1]||(a[1]=t=>e.selection=t),options:e.options,"option-label":"12","display-value":`${e.selection?e.selection[12]:""}`,"bottom-slots":"",error:!!e.formErrors.selection,disable:!e.category},{error:n(()=>[s("div",rt,U(e.formErrors.selection),1)]),"no-option":n(()=>[l(H,null,{default:n(()=>[l(N,{class:"text-grey"},{default:n(()=>[W(" No Options Available ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","display-value","error","disable"])])]),s("div",dt,[s("div",ut,[mt,l(pe,{dense:"",type:"date",modelValue:e.effective,"onUpdate:modelValue":a[2]||(a[2]=t=>e.effective=t),error:!!e.formErrors.effective,"bottom-slots":""},{error:n(()=>[s("div",pt,U(e.formErrors.effective),1)]),_:1},8,["modelValue","error"])]),s("div",ct,[vt,l(M,{dense:"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.equipment,"onUpdate:modelValue":a[3]||(a[3]=t=>e.equipment=t),options:[{value:!0,label:"Yes"},{value:!1,label:"No"},{value:!0,label:"None Issued"}],"bottom-slots":"",error:!!e.formErrors.equipment},{error:n(()=>[s("div",ft,U(e.formErrors.equipment),1)]),_:1},8,["modelValue","error"])])]),s("div",bt,[s("div",yt,[l(Xe,{dense:"","bottom-slots":"",modelValue:e.fileAttachment,"onUpdate:modelValue":a[4]||(a[4]=t=>e.fileAttachment=t),multiple:"",append:"",label:"Attach Supporting Documents"},{append:n(()=>[l(K,{dense:"",color:"info",round:"",flat:"",icon:"attach_file"})]),_:1},8,["modelValue"]),e.attachmentsRequired?(V(),A("div",gt,[W("!! "),e.selection[12].toLowerCase().includes("attendance")?(V(),A("span",Vt,"Supporting attendance records must be attached.")):(V(),A("span",ht,"Supporting documents are required for this reason."))])):(V(),A("div",wt,St))]),e.attachedFiles.length>0?(V(),A("div",At,[Ut,l(Ye,{dense:""},{default:n(()=>[(V(!0),A(ce,null,Le(e.attachedFiles,(t,w)=>(V(),A(ce,{key:t},[l(H,null,{default:n(()=>[l(N,null,{default:n(()=>[l(Me,null,{default:n(()=>[s("a",{href:"javascript:void(0);",onClick:S=>e.downloadFile(t)},U(w+1)+". "+U(t[6].filename),9,Rt)]),_:2},1024)]),_:2},1024),l(N,{side:""},{default:n(()=>[l(K,{color:"accent",round:"",flat:"",class:"cursor-pointer",icon:"delete",size:"md",onClick:S=>e.deleteFile(w)},null,8,["onClick"])]),_:2},1024)]),_:2},1024),l(ve)],64))),128))]),_:1})])):ge("",!0)])]),_:1})]),_:1}),l(ve),s("div",Et,[s("div",Ct,[Dt,l(oe,null,{default:n(()=>[l(le,null,{default:n(()=>[s("div",null,[s("div",Ft,[$t,l(u,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":a[5]||(a[5]=t=>e.capability=t),val:"1",label:"Strongly Disagree"},null,8,["modelValue"]),l(u,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":a[6]||(a[6]=t=>e.capability=t),val:"2",label:"Disagree"},null,8,["modelValue"]),l(u,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":a[7]||(a[7]=t=>e.capability=t),val:"3",label:"Neutral"},null,8,["modelValue"]),l(u,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":a[8]||(a[8]=t=>e.capability=t),val:"4",label:"Agree"},null,8,["modelValue"]),l(u,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":a[9]||(a[9]=t=>e.capability=t),val:"5",label:"Strongly Agree"},null,8,["modelValue"]),l(u,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":a[10]||(a[10]=t=>e.capability=t),val:"0",label:"I Do Not Know"},null,8,["modelValue"])]),s("div",kt,[Nt,l(u,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":a[11]||(a[11]=t=>e.attendance=t),val:"1",label:"Strongly Disagree"},null,8,["modelValue"]),l(u,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":a[12]||(a[12]=t=>e.attendance=t),val:"2",label:"Disagree"},null,8,["modelValue"]),l(u,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":a[13]||(a[13]=t=>e.attendance=t),val:"3",label:"Neutral"},null,8,["modelValue"]),l(u,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":a[14]||(a[14]=t=>e.attendance=t),val:"4",label:"Agree"},null,8,["modelValue"]),l(u,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":a[15]||(a[15]=t=>e.attendance=t),val:"5",label:"Strongly Agree"},null,8,["modelValue"]),l(u,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":a[16]||(a[16]=t=>e.attendance=t),val:"0",label:"I Do Not Know"},null,8,["modelValue"])]),s("div",Qt,[It,l(u,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":a[17]||(a[17]=t=>e.attitude=t),val:"1",label:"Strongly Disagree"},null,8,["modelValue"]),l(u,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":a[18]||(a[18]=t=>e.attitude=t),val:"2",label:"Disagree"},null,8,["modelValue"]),l(u,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":a[19]||(a[19]=t=>e.attitude=t),val:"3",label:"Neutral"},null,8,["modelValue"]),l(u,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":a[20]||(a[20]=t=>e.attitude=t),val:"4",label:"Agree"},null,8,["modelValue"]),l(u,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":a[21]||(a[21]=t=>e.attitude=t),val:"5",label:"Strongly Agree"},null,8,["modelValue"]),l(u,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":a[22]||(a[22]=t=>e.attitude=t),val:"0",label:"I Do Not Know"},null,8,["modelValue"])]),s("div",Ot,[jt,l(u,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":a[23]||(a[23]=t=>e.promotable=t),val:"1",label:"Strongly Disagree"},null,8,["modelValue"]),l(u,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":a[24]||(a[24]=t=>e.promotable=t),val:"2",label:"Disagree"},null,8,["modelValue"]),l(u,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":a[25]||(a[25]=t=>e.promotable=t),val:"3",label:"Neutral"},null,8,["modelValue"]),l(u,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":a[26]||(a[26]=t=>e.promotable=t),val:"4",label:"Agree"},null,8,["modelValue"]),l(u,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":a[27]||(a[27]=t=>e.promotable=t),val:"5",label:"Strongly Agree"},null,8,["modelValue"]),l(u,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":a[28]||(a[28]=t=>e.promotable=t),val:"0",label:"I Do Not Know"},null,8,["modelValue"])])]),s("div",Bt,[s("div",Tt,[Lt,l(M,{"use-input":"",dense:"","input-debounce":"0",clearable:"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.supervisor,"onUpdate:modelValue":a[29]||(a[29]=t=>e.supervisor=t),options:e.supervisorOptions,"option-label":t=>`${t[75]} - ${t[104]}`,"display-value":`${e.supervisor?e.supervisor[75]:""}`,onFilter:e.filterFn,"bottom-slots":"",error:!!e.formErrors.supervisor,hint:"Ex: Employee's Supervisor"},{error:n(()=>[s("div",Pt,U(e.formErrors.supervisor),1)]),"no-option":n(()=>[l(H,null,{default:n(()=>[l(N,{class:"text-grey"},{default:n(()=>[W(" No Options Available ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","option-label","display-value","onFilter","error"])])]),s("div",_t,[s("div",Ht,[Wt,l(M,{dense:"",clearable:"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.recommendation,"onUpdate:modelValue":a[30]||(a[30]=t=>e.recommendation=t),options:e.recommendationOptions,"bottom-slots":"",error:!!e.formErrors.recommendation},{error:n(()=>[s("div",Mt,U(e.formErrors.recommendation),1)]),"no-option":n(()=>[l(H,null,{default:n(()=>[l(N,{class:"text-grey"},{default:n(()=>[W(" No Options Available ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","error"])])])]),_:1})]),_:1})])]),s("div",Xt,[s("div",Yt,[l(pe,{filled:"",type:"textarea",modelValue:e.comments,"onUpdate:modelValue":a[31]||(a[31]=t=>e.comments=t),label:"Comments"},null,8,["modelValue"])])]),l(Pe,{align:"right"},{default:n(()=>[l(K,{disable:e.disableSubmit,color:"info",label:"Submit",type:"submit"},null,8,["disable"]),l(K,{color:"secondary",label:"Cancel",onClick:e.cancelRelease},null,8,["onClick"])]),_:1})]),_:1},8,["onSubmit"])])}var zt=Te(tt,[["render",Kt]]);const Gt={class:"q-pa-sm"},Jt={class:"row"},Zt={class:"col-12"},xt=s("div",{class:"text-h6 text-weight-bold q-mb-md"},"Please complete the following to submit this release.",-1),Ra={__name:"terminate",setup(e){b(0);const a=be(),R=ye(),E=Ve(),y=b("employee"),h=b(null),t=b(null),w=b(0);y.value=a.query.reason==="no-show"?"arrivals":"employee",y.value==="no-show"&&(h.value=a.query.aid,t.value=a.query.did);const{getEmployee:S,getAssignmentsByEmployee:F,setAssignmentsByEmployee:C,setEmployees:O,setReleases:$,setReleasesByAssignment:X,setReleasesByEmployee:k}=he(),p=g(()=>S(a.params.id)),D=g(()=>p.value?F(a.params.id):null),J=async()=>{if(!D.value&&p.value[577]&&p.value[577]>0){const{data:i}=await q.fetchFromHiringApp({fields:[I({type:"assignments",query:"",id:p.value[577]})]});C({id:p.value[3],data:i})}else if(p.value[577]&&p.value[577]>0)await q.fetchFromHiringApp({fields:[I({type:"assignments",query:"",id:p.value[577]})]});else if(!D.value&&h.value&&h.value>0){const{data:i}=await q.fetchFromHiringApp({fields:[I({type:"assignments",query:"",id:h.value})]});C({id:p.value[3],data:i})}else if(!D.value&&p.value[608]&&p.value[608]>0){const{data:i}=await q.fetchFromHiringApp({fields:[I({type:"assignments",query:"",id:p.value[608]})]});C({id:p.value[3],data:i})}else{const i=I({type:"assignments",query:"",id:p.value[577]});i[8]={value:`{3.EX.${a.query.aid}}`};const{data:d}=await q.fetchFromHiringApp({fields:[i]});C({id:p.value[3],data:d})}};Q(p,(i,d)=>{i&&w.value===0&&(J(),w.value++)});const Z=async({employee:i,release:d,assignment:c,effectiveNow:B})=>{y.value==="arrivals"&&a.query.did&&await j(a.query.did,d),E.notify({type:"positive",message:"Release successfully submitted."}),B?(i[581]=d[3],$({id:d[3],data:d}),O({id:i[3],data:i}),C({id:i[3],assignment:c}),X({id:c[3],data:d}),k({id:i[3],data:d})):(i[581]=d[3],O({id:i[3],data:i}),$({id:d[3],data:d}),X({id:c[3],data:d}),k({id:i[3],data:d})),y.value==="arrivals"?R.replace({name:"arrivals"}):R.replace({name:"view-ee-release",params:{id:i[3],release:d[3]}})};async function j(i,d){try{let c=7;d[33]==="Terminate_Employee_Voluntary_Never_Started_Working"?c=7:(d[33]==="Terminate_Employee_Involuntary_Lack_of_Work_End_of_Contract_Project"||d[33]==="Terminate_Employee_Involuntary_Project_Cancelled_Before_Employee_Started")&&(c=8);const{data:B}=await q.upsertRecordsXML({to:"bp3gaymc3",data:[{3:{value:i},20:{value:"DNC"},61:{value:c},63:{value:d[33]},74:{value:new Date}}],fieldsToReturn:[204],formatObject:204});return B[0][204]}catch(c){throw{message:"Cannot edit deployment",error:c}}}return(i,d)=>(V(),fe(He,{style:{"max-width":"100vw"}},{default:n(()=>[s("div",Gt,[s("div",Jt,[s("div",Zt,[l(oe,{flat:""},{default:n(()=>[D.value?(V(),fe(le,{key:0},{default:n(()=>[xt,l(zt,{record:D.value,employee:p.value,onReleaseSubmitted:Z},null,8,["record","employee"])]),_:1})):ge("",!0)]),_:1})])])])]),_:1}))}};export{Ra as default};
