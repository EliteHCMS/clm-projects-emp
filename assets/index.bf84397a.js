var Ye=Object.defineProperty,We=Object.defineProperties;var Ze=Object.getOwnPropertyDescriptors;var ge=Object.getOwnPropertySymbols;var _e=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable;var ve=(e,t,s)=>t in e?Ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,F=(e,t)=>{for(var s in t||(t={}))_e.call(t,s)&&ve(e,s,t[s]);if(ge)for(var s of ge(t))xe.call(t,s)&&ve(e,s,t[s]);return e},V=(e,t)=>We(e,Ze(t));import{m as qe,l as I,k as _,r as $,a4 as je,w as O,_ as U,A as S,an as J,bi as l,D as d,ab as w,d as i,bJ as we,bH as $e,au as Ce,B as z,bI as ue,ao as H,cx as Y,c as Z,aZ as Q,cz as X,cw as K,cy as de,bO as M,bF as fe,bL as et,bK as tt,G as st}from"./index.38805863.js";import{Q as ot}from"./QPage.01b0c28c.js";import{u as Pe}from"./use-quasar.89332f4e.js";import{u as P,q as T}from"./quickbase.7d900951.js";import{localforage as N}from"./localForage.af601597.js";import{dayjs as h}from"./dayjs.44b7d839.js";import{Q as W}from"./QSelect.880b9553.js";import{Q as ye}from"./QTooltip.9da812c0.js";import{Q as me}from"./QForm.761b9110.js";import{a as k,e as Se,b as pe,u as q,c as se,f as rt}from"./array.5be2c861.js";import{a as nt,b as it}from"./useQuerySaver.26dfad14.js";import{Q as Ie,G as at}from"./NameRequestGetEmployee.372f8cc3.js";import{Q as oe}from"./QTd.67e96c6b.js";import{a as Ne}from"./QTable.01ac401f.js";import"./_commonjsHelpers.a26ce4be.js";import"./index.7dbe61ef.js";import"./i18n.a3b5dc5f.js";import"./api.cf59cd7e.js";import"./QChip.8fb44a31.js";import"./QItemLabel.e72aa125.js";import"./QMenu.fc102b89.js";import"./position-engine.237479d6.js";import"./selection.c2e0124c.js";import"./rtl.cf9bbe47.js";import"./workday.654eb891.js";import"./syncEmployeeWithWorkday.444df2d1.js";import"./workdayAPI.1d6d8f80.js";import"./dataStore.a3d2c04d.js";import"./QList.8a1e5eb5.js";import"./QMarkupTable.2efad729.js";import"./use-fullscreen.86310391.js";const he=qe("newRequestDataStore",{state:()=>({selectedProject:null,humanizedData:{},humanizedClassificationData:[],dbData:{},dbClassificationData:[],jobNumbers:{},siteContacts:{},meetingLocations:{},perDiemSpecs:{},projectCrafts:{},projectCraftClassifications:{},requestedTimeStamps:{}}),getters:{getStoredData:e=>({type:t,key:s})=>!t||!s?[]:!e.requestedTimeStamps[s]||!e.requestedTimeStamps[s][t]||e.requestedTimeStamps[s][t].isBefore(h().subtract(10,"minute"))?[]:e[t][s],getHumanizedData:e=>e.humanizedData,getDbData:e=>e.dbData,getHumanizedClassificationData:e=>e.humanizedClassificationData,getDbClassificationData:e=>e.dbClassificationData,getRequestedTimeStamps(e){return e.requestedTimeStamps}},actions:{setselectedProject(e){this.selectedProject=e},setTimeStamp({name:e,timeStamp:t,Id:s},o){if(this.requestedTimeStamps[s]?this.requestedTimeStamps[s][e]=t:this.requestedTimeStamps[s]={[e]:t},o){const r=JSON.parse(JSON.stringify(this.requestedTimeStamps));N.setItem(`${I.storageProcessTimeStamps}`,r)}},setNewRequestData({humanized:e,database:t}){for(const[s,o]of Object.entries(e))Object.assign(this.humanizedData,{[s]:o});for(const[s,o]of Object.entries(t))Object.assign(this.dbData,{[s]:o})},setNewRequestClassificationData({humanized:e,database:t}){this.humanizedClassificationData=e,this.dbClassificationData=t},setStorageData({type:e,key:t,data:s,timestamp:o}){this.setTimeStamp({name:e,Id:t,timeStamp:o}),this[e][t]=s},setTimeStampState(e){this.requestedTimeStamps=e},async removeData({type:e,key:t,item:s,storageKey:o}){const r=this[e][t].findIndex(a=>a[3]===s[3]);r>-1&&this[e][t].splice(r,1);const n=this[e][t];N.removeItem(`${I[o]}_${t}`),N.getItem(`${I[o]}_${t}`)||N.setItem(`${I[o]}_${t}`,n)}}}),lt=qe("dataStore2",{state:()=>({selectedOffice:null,selfCheckIns:{},profiles:{},scheduledInterviews:{},inProcessInterviews:{},inProcess:{},pending:{},deployments:{},projects:{},openRequest:{},pendingRequest:{},closedRequest:{},openClassifications:{},pendingClassifications:{},closedClassifications:{},nameRequest:{},pendingProjects:{},requestedTimeStamps:{}}),getters:{getSelfCheckIns:e=>t=>{if(t)return e.selfCheckIns[t]?e.selfCheckIns[t]:[];{let s=[];return Object.keys(e.selfCheckIns).forEach(o=>{s=s.concat(e.selfCheckIns[o])}),s}},getProfiles:e=>t=>{if(t)return e.profiles[t]?e.profiles[t]:[];{let s=[];return Object.keys(e.profiles).forEach(o=>{s=s.concat(e.profiles[o])}),s}},getScheduledInterviews:e=>t=>{if(t)return e.scheduledInterviews[t]?e.scheduledInterviews[t]:[];{let s=[];return Object.keys(e.scheduledInterviews).forEach(o=>{s=s.concat(e.scheduledInterviews[o])}),s}},getInProcessInterviews:e=>t=>{if(t)return e.inProcessInterviews[t]?e.inProcessInterviews[t]:[];{let s=[];return Object.keys(e.inProcessInterviews).forEach(o=>{s=s.concat(e.inProcessInterviews[o])}),s}},getInProcess:e=>t=>{if(t)return e.inProcess[t]?e.inProcess[t]:[];{let s=[];return Object.keys(e.inProcess).forEach(o=>{s=s.concat(e.inProcess[o])}),s}},getPending:e=>t=>{if(t)return e.pending[t]?e.pending[t]:[];{let s=[];return Object.keys(e.pending).forEach(o=>{s=s.concat(e.pending[o])}),s}},getDeployments:e=>t=>{if(t)return e.deployments[t]?e.deployments[t]:[];{let s=[];return Object.keys(e.deployments).forEach(o=>{s=s.concat(e.deployments[o])}),s}},getProjects:e=>(t,s)=>{if(!s&&!t){let o=[];return Object.keys(e.projects).forEach(r=>{o=o.concat(e.projects[r])}),o}else if(!s&&t){const{userOffices:o}=P();let r=[];return o(t).forEach(n=>{r=r.concat(e.projects[n[8]])}),r}else if(s&&t){const{getOffice:o}=P(),r=o(s);return t==="read"&&r&&r[39]!==!0?[]:(t==="create"||t==="update")&&r&&r[40]!==!0?[]:t==="manage"&&r&&r[41]!==!0?[]:e.projects[s]?e.projects[s]:[]}else return e.projects[s]?e.projects[s]:[]},getPendingProjects:e=>t=>{if(t)return e.pendingProjects[t]?e.pendingProjects[t]:[];{let s=[];return Object.keys(e.pendingProjects).forEach(o=>{s=s.concat(e.pendingProjects[o])}),s}},getRequestedTimeStamps(e){return e.requestedTimeStamps},getSelectedOffice(e){return e.selectedOffice}},actions:{setSelectedOffice(e,t){this.selectedOffice=e},setTimeStamp({name:e,timeStamp:t,officeId:s},o){if(this.requestedTimeStamps[s]?this.requestedTimeStamps[s][e]=t:this.requestedTimeStamps[s]={[e]:t},o){const r=JSON.parse(JSON.stringify(this.requestedTimeStamps));N.setItem(`${I.storageProcessTimeStamps}`,r)}},setTimeStampState(e){this.requestedTimeStamps=e},async fetchSelfCheckIns(e){const t=this.getRequestedTimeStamps[e.officeId]||{};let s=!0;const o=[{9:{value:e.officeId},7:{value:"Self Check-Ins"}}];if(t.selfCheckIns&&(t.selfCheckIns.isBefore(h().subtract(1,"minute"))?s=!0:s=e.refresh?e.refresh:!1),s){this.setTimeStamp({officeId:e.officeId,name:"selfCheckIns",timeStamp:h()},!0);const{data:r}=await T.fetchFromRecruitingApp({fields:o});return this.setSelfCheckIns({officeId:e.officeId,data:r},!0),{data:r}}else return{data:[]}},async fetchAllSelfCheckIns(e){const{userOffices:t}=P(),s=[];return t(e?e.access:null).forEach(r=>{let n=this.fetchSelfCheckIns(V(F({},e),{officeId:r[8]}));s.push(n)}),await Promise.allSettled(s)},setSelfCheckIns({officeId:e,data:t},s){this.selfCheckIns[e]=t,s&&N.setItem(`${I.storageSelfCheckIns}_${e}`,t)},async fetchProfiles(e){const t=this.getRequestedTimeStamps[e.officeId]||{};let s=!0;const o=[{9:{value:e.officeId},7:{value:"Profiles"}}];if(t.profiles&&(t.profiles.isBefore(h().subtract(1,"minute"))?s=!0:s=e.refresh?e.refresh:!1),s){this.setTimeStamp({officeId:e.officeId,name:"profiles",timeStamp:h()},!0);const{data:r}=await T.fetchFromHiringApp({fields:o});return this.setProfiles({officeId:e.officeId,data:r},!0),{data:r}}else return{data:[]}},async fetchAllProfiles(e){const{userOffices:t}=P(),s=[];return t(e?e.access:null).forEach(r=>{let n=this.fetchProfiles(V(F({},e),{officeId:r[8]}));s.push(n)}),await Promise.allSettled(s)},setProfiles({officeId:e,data:t},s){this.profiles[e]=t,s&&N.setItem(`${I.storageProfiles}_${e}`,t)},async fetchScheduledInterviews(e){const t=this.getRequestedTimeStamps[e.officeId]||{};let s=!0;const o=[{9:{value:e.officeId},7:{value:"Scheduled Interviews"}}];if(t.scheduledInterviews&&(t.scheduledInterviews.isBefore(h().subtract(1,"minute"))?s=!0:s=e.refresh?e.refresh:!1),s){this.setTimeStamp({officeId:e.officeId,name:"scheduledInterviews",timeStamp:h()},!0);const{data:r}=await T.fetchFromHiringApp({fields:o});return this.setScheduledInterviews({officeId:e.officeId,data:r},!0),{data:r}}else return{data:[]}},async fetchAllScheduledInterviews(e){const{userOffices:t}=P(),s=[];return t(e?e.access:null).forEach(r=>{let n=this.fetchScheduledInterviews(V(F({},e),{officeId:r[8]}));s.push(n)}),await Promise.allSettled(s)},setScheduledInterviews({officeId:e,data:t},s){this.scheduledInterviews[e]=t,s&&N.setItem(`${I.storageScheduledInterviews}_${e}`,t)},async fetchInProcessInterviews(e){const t=this.getRequestedTimeStamps[e.officeId]||{};let s=!0;const o=[{9:{value:e.officeId},7:{value:"In Process Interviews"}}];if(t.inProcessInterviews&&(t.inProcessInterviews.isBefore(h().subtract(1,"minute"))?s=!0:s=e.refresh?e.refresh:!1),s){this.setTimeStamp({officeId:e.officeId,name:"inProcessInterviews",timeStamp:h()},!0);const{data:r}=await T.fetchFromHiringApp({fields:o});return this.setInProcessInterviews({officeId:e.officeId,data:r},!0),{data:r}}else return{data:[]}},async fetchAllInProcessInterviews(e){const{userOffices:t}=P(),s=[];return t(e?e.access:null).forEach(r=>{let n=this.fetchInProcessInterviews(V(F({},e),{officeId:r[8]}));s.push(n)}),await Promise.allSettled(s)},setInProcessInterviews({officeId:e,data:t},s){this.inProcessInterviews[e]=t,s&&N.setItem(`${I.storageInProcessInterviews}_${e}`,t)},async fetchInProcess(e){const t=this.getRequestedTimeStamps[e.officeId]||{};let s=!0;const o=[{9:{value:e.officeId},7:{value:"In Processes"}}];if(t.inProcess&&(t.inProcess.isBefore(h().subtract(1,"minute"))?s=!0:s=e.refresh?e.refresh:!1),s){this.setTimeStamp({officeId:e.officeId,name:"inProcess",timeStamp:h()},!0);const{data:r}=await T.fetchFromHiringApp({fields:o});return this.setInProcess({officeId:e.officeId,data:r},!0),{data:r}}else return{data:[]}},async fetchAllInProcess(e){const{userOffices:t}=P(),s=[];return t(e?e.access:null).forEach(r=>{let n=this.fetchInProcess(V(F({},e),{officeId:r[8]}));s.push(n)}),await Promise.allSettled(s)},setInProcess({officeId:e,data:t},s){this.inProcess[e]=t,s&&N.setItem(`${I.storageInProcess}_${e}`,t)},async fetchPending(e){const t=this.getRequestedTimeStamps[e.officeId]||{};let s=!0;const o=[{9:{value:e.officeId},7:{value:"Dispatches"}}];if(t.pending&&(t.pending.isBefore(h().subtract(1,"minute"))?s=!0:s=e.refresh?e.refresh:!1),s){this.setTimeStamp({officeId:e.officeId,name:"pending",timeStamp:h()},!0);const{data:r}=await T.fetchFromHiringApp({fields:o});return this.setPending({officeId:e.officeId,data:r},!0),{data:r}}else return{data:[]}},async fetchAllPending(e){const{userOffices:t}=P(),s=[];return t(e?e.access:null).forEach(r=>{let n=this.fetchPending(V(F({},e),{officeId:r[8]}));s.push(n)}),await Promise.allSettled(s)},setPending({officeId:e,data:t},s){this.pending[e]=t,s&&N.setItem(`${I.storagePending}_${e}`,t)},async fetchOpenRequest(e){const t=this.getRequestedTimeStamps[e.officeId]||{};let s=!0;const o=[{9:{value:e.officeId},7:{value:"Open Request"}}];if(t.openRequest&&(t.openRequest.isBefore(h().subtract(1,"minute"))?s=!0:s=e.refresh?e.refresh:!1),s){this.setTimeStamp({officeId:e.officeId,name:"openRequest",timeStamp:h()},!0);const{data:r}=await T.fetchFromProjectsApp({fields:o});return this.setOpenRequest({officeId:e.officeId,data:r},!0),{data:r}}else return{data:[]}},async fetchAllOpenRequest(e){const{userOffices:t}=P(),s=[];return t(e?e.access:null).forEach(r=>{let n=this.fetchOpenRequest(V(F({},e),{officeId:r[8]}));s.push(n)}),await Promise.allSettled(s)},setOpenRequest({officeId:e,data:t},s){this.openRequest[e]=t,s&&N.setItem(`${I.storageOpenRequest}_${e}`,t)},async fetchPendingRequest(e){const t=this.getRequestedTimeStamps[e.officeId]||{};let s=!0;const o=[{9:{value:e.officeId},7:{value:"Pending Request"}}];if(t.pendingRequest&&(t.pendingRequest.isBefore(h().subtract(1,"minute"))?s=!0:s=e.refresh?e.refresh:!1),s){this.setTimeStamp({officeId:e.officeId,name:"pendingRequest",timeStamp:h()},!0);const{data:r}=await T.fetchFromProjectsApp({fields:o});return this.setPendingRequest({officeId:e.officeId,data:r},!0),{data:r}}else return{data:[]}},async fetchAllPendingRequest(e){const{userOffices:t}=P(),s=[];return t(e?e.access:null).forEach(r=>{let n=this.fetchPendingRequest(V(F({},e),{officeId:r[8]}));s.push(n)}),await Promise.allSettled(s)},setPendingRequest({officeId:e,data:t},s){this.pendingRequest[e]=t,s&&N.setItem(`${I.storagePendingRequest}_${e}`,t)},async fetchProjects(e){const{getOffice:t}=P(),s=this.getRequestedTimeStamps[e.officeId]||{};let o=!0;if(e&&e.access){const n=t(e.officeId);if(e.access==="read"&&n&&n[39]!==!0)return{data:[]};if((e.access==="create"||e.access==="update")&&n&&n[40]!==!0)return{data:[]};if(e.access==="manage"&&n&&n[41]!==!0)return{data:[]}}const r=[{9:{value:e.officeId},7:{value:"Projects"}}];if(s.projects&&(s.projects.isBefore(h().subtract(1,"minute"))?o=!0:o=e.refresh?e.refresh:!1),o){this.setTimeStamp({officeId:e.officeId,name:"projects",timeStamp:h()},!0);const{data:n}=await T.fetchFromProjectsApp({fields:r});return this.setProjects({officeId:e.officeId,data:n},!0),{data:n}}else return{data:[]}},async fetchAllProjects(e){const{userOffices:t}=P(),s=[];return t(e?e.access:null).forEach(r=>{let n=this.fetchProjects(V(F({},e),{officeId:r[8]}));s.push(n)}),await Promise.allSettled(s)},setProjects({officeId:e,data:t},s){e&&t&&(this.projects[e]=t),s&&e&&N.setItem(`${I.storageProjects}_${e}`,t)},async fetchPendingProjects(e){const t=this.getRequestedTimeStamps[e.officeId]||{};let s=!0;const o=[{9:{value:e.officeId},7:{value:"Pending Projects"}}];if(t.pendingProjects&&(t.pendingProjects.isBefore(h().subtract(1,"minute"))?s=!0:s=e.refresh?e.refresh:!1),s){this.setTimeStamp({officeId:e.officeId,name:"pendingProjects",timeStamp:h()},!0);const{data:r}=await T.fetchFromProjectsApp({fields:o});return this.setPendingProjects({officeId:e.officeId,data:r},!0),{data:r}}else return{data:[]}},async fetchAllPendingProjects(e){const{userOffices:t}=P(),s=[];return t(e?e.access:null).forEach(r=>{let n=this.fetchPendingProjects(V(F({},e),{officeId:r[8]}));s.push(n)}),await Promise.allSettled(s)},setPendingProjects({officeId:e,data:t},s){this.pendingProjects[e]=t,s&&N.setItem(`${I.storagePendingProjects}_${e}`,t)}}}),ct=_({emits:["selectionChanged","optionsLoaded"],props:{type:String,project:Object,loadedOptions:Array,error:Boolean,errorMessage:String,label:String,optionLabel:String,optionDisplayKey:Number,query:String,dense:Boolean,dataKey:Number,sortFid:Number,currentSelection:Object,refreshable:Boolean},setup(e,{emit:t}){const s=$(null),o=$(null),r=je(e,"currentSelection");async function n(a,u,y){if(e.loadedOptions&&e.loadedOptions.length>0)s.value=e.loadedOptions,u();else{const{data:b}=await T.fetchFromProjectsApp({fields:[nt({type:e.type,query:e.query})]});s.value=b,u(),t("optionsLoaded",{data:{type:e.type,key:e.dataKey?e.dataKey:e.project[3],data:b,timestamp:h()}})}}return O(o,(a,u)=>{t("selectionChanged",a)}),O(r,(a,u)=>{e.refreshable&&(!a[3]||a[3]===void 0)&&(o.value=null)}),{props:e,options:s,selection:o,fetchDataOptions:n}}}),ut={class:"text-caption"};function dt(e,t,s,o,r,n){return S(),J(W,{dense:e.props.dense,label:e.props.label,"transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.selection,"onUpdate:modelValue":t[0]||(t[0]=a=>e.selection=a),options:e.options?e.props.sortFid?e.options.sort((a,u)=>a[e.props.sortFid]>u[e.props.sortFid]?1:-1):e.options:[],"option-label":e.props.optionLabel,"display-value":`${e.selection?e.selection[e.props.optionDisplayKey]:""}`,"bottom-slots":"",error:e.props.error,onFilter:e.fetchDataOptions},{error:l(()=>[d("div",ut,w(e.props.errorMessage),1)]),"no-option":l(()=>[i(we,null,{default:l(()=>[i($e,{class:"text-grey"},{default:l(()=>[Ce(" No Options Available ")]),_:1})]),_:1})]),_:1},8,["dense","label","modelValue","options","option-label","display-value","error","onFilter"])}var Oe=U(ct,[["render",dt]]);const ft=_({emits:["selectionChanged","optionsLoaded"],props:{type:String,project:Object,loadedOptions:Array,error:Boolean,errorMessage:String,label:String,optionLabel:String,optionDisplayKey:Number,query:String,dense:Boolean,dataKey:Number,sortFid:Number,currentSelection:Object,refreshable:Boolean},setup(e,{emit:t}){const s=$(null),o=$(null),r=je(e,"currentSelection");async function n(a,u,y){if(s.value!==null)u();else if(e.loadedOptions&&e.loadedOptions.length>0)s.value=e.loadedOptions,u();else{const{data:b}=await T.fetchFromStructureApp({fields:[it({type:e.type,query:e.query})]});s.value=b,u(),t("optionsLoaded",{data:{type:e.type,key:e.dataKey?e.dataKey:e.project[3],data:b,timestamp:h()}})}}return O(o,(a,u)=>{t("selectionChanged",a)}),O(r,(a,u)=>{e.refreshable&&(!a[3]||a[3]===void 0)&&(o.value=null)}),{props:e,options:s,selection:o,fetchDataOptions:n}}}),mt={class:"text-caption"};function pt(e,t,s,o,r,n){return S(),J(W,{class:"q-mb-sm",dense:e.props.dense,label:e.props.label,"transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.selection,"onUpdate:modelValue":t[0]||(t[0]=a=>e.selection=a),options:e.options?e.props.sortFid?e.options.sort((a,u)=>a[e.props.sortFid]>u[e.props.sortFid]?1:-1):e.options:[],"option-label":e.props.optionLabel,"display-value":`${e.selection?e.selection[e.props.optionDisplayKey]:""}`,"bottom-slots":"",error:e.props.error,onFilter:e.fetchDataOptions},{error:l(()=>[d("div",mt,w(e.props.errorMessage),1)]),"no-option":l(()=>[i(we,null,{default:l(()=>[i($e,{class:"text-grey"},{default:l(()=>[Ce(" No Options Available ")]),_:1})]),_:1})]),_:1},8,["dense","label","modelValue","options","option-label","display-value","error","onFilter"])}var ht=U(ft,[["render",pt]]);const bt=_({emits:["rateChanged"],props:{job:Object,current:Number,error:Boolean,errorMessage:String},setup(e,{emit:t}){const s=$(null);return(()=>{e.job&&e.job.hasfixedRate&&e.job.fixedRate&&(s.value=e.job.fixedRate)})(),O(s,(r,n)=>{r&&t("rateChanged",r)}),O(()=>e.current,()=>{(e.current===""||!e.current)&&(s.value=null)}),O(()=>e.job,()=>{e.job&&e.job.hasFixedRate&&e.job.fixedRate&&(s.value=e.job.fixedRate)}),{props:e,rate:s}}}),gt={key:0,class:"text-right"};function vt(e,t,s,o,r,n){return S(),J(Y,{dense:"",step:"any",type:"number",modelValue:e.rate,"onUpdate:modelValue":t[0]||(t[0]=a=>e.rate=a),modelModifiers:{number:!0},prefix:"$",disable:!e.props.job||e.props.job.hasFixedRate&&!e.$can("manage","rates"),label:"Rate",error:e.props.error},{append:l(()=>[e.props.job&&e.props.job.hasFixedRate&&!e.$can("manage","rates")?(S(),z("div",gt,[i(ue,{name:"lock",size:"sm"})])):H("",!0)]),_:1},8,["modelValue","disable","error"])}var yt=U(bt,[["render",vt]]);const St=_({emits:["formChanged","classificationAdded"],components:{QSelectProjectOptions:Oe,PayRateField:yt},props:{project:Object},setup(e,{emit:t}){const s=$(!1),{getStoredData:o,setStorageData:r}=he(),n=k({craft:k().required().nullable().label("Craft"),classification:k().required().nullable().label("Classification"),rate:Se().required().nullable().label("Rate"),qty:Se().required().nullable().label("Quantity")}),{errors:a,handleSubmit:u,resetForm:y,isSubmitting:b}=pe({validationSchema:n}),{value:m}=q("craft"),{value:D}=q("classification"),{value:g}=q("rate"),{value:C}=q("qty"),G=u(async p=>{const B=p.classification;Object.assign(B,{qty:p.qty,rate:p.rate}),t("classificationAdded",{data:B}),y({values:{craft:null,classification:null,rate:null,qty:null}})});function E(p){m.value=p,t("formChanged",{data:{type:"craft",value:p}})}O(D,(p,B)=>{t("formChanged",{data:{type:"classification",value:p}})}),O(g,(p,B)=>{t("formChanged",{data:{type:"rate",value:p}})}),O(C,(p,B)=>{t("formChanged",{data:{type:"quantity",value:p}})});function j({data:p}){r({type:p.type,key:p.key,data:p.data,timestamp:p.timestamp})}const R=Z(()=>{const p=m.value?m.value.classifications:[];return p.length>0?p.sort((B,re)=>B[32]>re[32]?-1:1):p});function x(p){g.value=p||null}return{props:e,getStoredData:o,sendDataToStore:j,formErrors:a,loading:s,isSubmitting:b,submit:G,resetForm:y,craftChanged:E,craft:m,classificationOptions:R,classification:D,rate:g,qty:C,rateChanged:x}}}),qt=d("div",{class:"text-primary text-h6 q-mb-md"},"Classifications Needed",-1),jt={class:"row justify-between"},wt={class:"col-12 col-md-3 q-pr-sm"},$t={class:"col-12 col-md-3 q-pr-sm"},Ct={class:"col-12 col-md-2 q-pr-sm"},Pt={class:"col-12 col-md-2 q-pr-sm"},It={class:"col-12 col-md-2 text-right"};function Nt(e,t,s,o,r,n){const a=Q("q-select-project-options"),u=Q("pay-rate-field");return S(),z("div",null,[qt,i(me,{onSubmit:fe(e.submit,["prevent"])},{default:l(()=>[i(X,{flat:""},{default:l(()=>[i(K,{class:"q-pa-none"},{default:l(()=>[d("div",jt,[d("div",wt,[i(a,{dense:!0,label:"Select Craft",type:"projectCrafts",optionLabel:"10",optionDisplayKey:10,project:e.props.project,dataKey:e.props.project[3],error:!!e.formErrors.craft,errorMessage:e.formErrors.craft,loadedOptions:e.getStoredData({type:"projectCrafts",key:e.props.project?e.props.project[3]:null})||[],query:`{'7'.EX.'${e.props.project[3]}'}AND{'6'.EX.'Active'}`,sortFid:20,onOptionsLoaded:e.sendDataToStore,onSelectionChanged:e.craftChanged,currentSelection:e.craft?e.craft:{},refreshable:!0},null,8,["project","dataKey","error","errorMessage","loadedOptions","query","onOptionsLoaded","onSelectionChanged","currentSelection"])]),d("div",$t,[i(W,{dense:"",label:"Classification","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.classification,"onUpdate:modelValue":t[0]||(t[0]=y=>e.classification=y),options:e.classificationOptions,"option-label":"18","display-value":`${e.classification?e.classification[18]:""}`,error:!!e.formErrors.classification,clearable:"",disable:!e.craft},null,8,["modelValue","options","display-value","error","disable"])]),d("div",Ct,[i(u,{error:!!e.formErrors.rate,errorMessage:e.formErrors.rate,current:e.rate,job:e.classification,onRateChanged:e.rateChanged},null,8,["error","errorMessage","current","job","onRateChanged"])]),d("div",Pt,[i(Y,{dense:"",type:"number",label:"Qty",modelValue:e.qty,"onUpdate:modelValue":t[1]||(t[1]=y=>e.qty=y),modelModifiers:{number:!0},error:!!e.formErrors.qty,disable:!e.classification},null,8,["modelValue","error","disable"])]),d("div",It,[i(de,{class:"q-pt-none",align:"right"},{default:l(()=>[i(M,{dense:"",label:"Reset",color:"dark",onClick:e.resetForm},null,8,["onClick"]),i(M,{dense:"",loading:e.isSubmitting,disable:e.isSubmitting,color:"info",label:"Save",type:"submit"},{loading:l(()=>[i(Ie)]),_:1},8,["loading","disable"])]),_:1})])])]),_:1})]),_:1})]),_:1},8,["onSubmit"])])}var Ot=U(St,[["render",Nt]]);const Dt={emits:["removeClassification"],props:{data:Array},setup(e,{emit:t}){return{props:e,columns:[{name:0,label:"Craft",align:"left",field:o=>o[21],format:o=>`${o}`,sortable:!0},{name:1,label:"Classification",align:"left",field:o=>o[18],format:o=>`${o}`,sortable:!0,required:!0},{name:2,label:"Pay Rate",align:"right",field:o=>o.rate,format:o=>`$ ${parseFloat(o).toFixed(2)}`},{name:3,label:"Quantity",align:"right",field:o=>o.qty,format:o=>`${parseFloat(o)}`},{name:4,label:"",align:"center",field:""}]}}},Et={class:"full-width row flex-center text-primary q-gutter-sm q-py-xs"};function Rt(e,t,s,o,r,n){return S(),z("div",null,[i(Ne,{dense:"",columns:o.columns,rows:o.props.data,"row-key":a=>a[3],pagination:{rowsPerPage:10},"table-header-class":"bg-dark text-white","no-data-label":"You are required to add at least one classification!","hide-pagination":!0},{"body-cell-4":l(a=>[i(oe,{class:"text-center","auto-width":""},{default:l(()=>[i(M,{class:"q-pa-none q-ma-none",flat:"",color:"primary",round:"",dense:"",onClick:u=>e.$emit("removeClassification",a.row),icon:"delete_forever"},null,8,["onClick"])]),_:2},1024)]),"no-data":l(({message:a})=>[d("div",Et,[i(ue,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),d("span",null,w(a),1)])]),_:1},8,["columns","rows","row-key"])])}var Tt=U(Dt,[["render",Rt]]);const At=_({emits:["nameAdded","closeNames"],components:{},props:{project:Object,classifications:Array,type:Object},setup(e,{emit:t}){const s=$(!1),o=$(10);$(null);const r=Z(()=>{const E=new RegExp("^[0-9]{"+o.value+"}","g");return k({job:k().required("Classification is required"),firstName:se().required().label("First Name"),lastName:se().required().label("Last Name"),phoneNumber:se().matches(E,{excludeEmptyString:!0,message:"Number Only!"}).required().label("Phone Number"),ssn:se().matches(/^\d+$/,{excludeEmptyString:!0,message:"Numbers Only!"}).required().label("Last 4 of SSN")})}),{errors:n,handleSubmit:a,resetForm:u,isSubmitting:y}=pe({validationSchema:r,initialValues:{job:e.classifications.length===1?e.classifications[0]:null}}),{value:b}=q("job"),{value:m}=q("firstName"),{value:D}=q("lastName"),{value:g}=q("phoneNumber"),{value:C}=q("ssn"),G=a(async E=>{const j={classification:E.job,firstName:E.firstName,lastName:E.lastName,phone:E.phoneNumber,ssn:E.ssn};t("nameAdded",j),u()});return{props:e,formErrors:n,loading:s,submit:G,job:b,firstName:m,lastName:D,phoneNumber:g,ssn:C,resetForm:u,isSubmitting:y}}}),kt=d("div",{class:"text-primary text-h6 q-mb-md"},"Names Requested",-1),Ft={class:"row"},Vt={class:"col-12 col-md-2 q-pr-sm"},Lt={class:"text-caption"},Qt={class:"col-12 col-md-2 q-pr-sm"},Mt={class:"text-caption"},Bt={class:"col-12 col-md-2 q-pr-sm"},Kt={class:"text-caption"},zt={class:"col-12 col-md-2 q-pr-sm"},Ut={class:"text-caption"},Ht={class:"col-12 col-md-4 q-pr-xs"},Xt={class:"text-caption"};function Jt(e,t,s,o,r,n){return S(),z("div",null,[kt,i(me,{onSubmit:fe(e.submit,["prevent"])},{default:l(()=>[d("div",Ft,[d("div",Vt,[i(Y,{dense:"",label:"First Name",modelValue:e.firstName,"onUpdate:modelValue":t[0]||(t[0]=a=>e.firstName=a),error:!!e.formErrors.firstName,"bottom-slots":""},{error:l(()=>[d("div",Lt,w(e.formErrors.firstName),1)]),_:1},8,["modelValue","error"])]),d("div",Qt,[i(Y,{dense:"",label:"Last Name",modelValue:e.lastName,"onUpdate:modelValue":t[1]||(t[1]=a=>e.lastName=a),error:!!e.formErrors.lastName,"bottom-slots":""},{error:l(()=>[d("div",Mt,w(e.formErrors.lastName),1)]),_:1},8,["modelValue","error"])]),d("div",Bt,[i(Y,{dense:"",label:"Phone Number",modelValue:e.phoneNumber,"onUpdate:modelValue":t[2]||(t[2]=a=>e.phoneNumber=a),error:!!e.formErrors.phoneNumber,"bottom-slots":""},{error:l(()=>[d("div",Kt,w(e.formErrors.phoneNumber),1)]),_:1},8,["modelValue","error"])]),d("div",zt,[i(Y,{maxlength:"4",dense:"",label:"SSN Last 4",modelValue:e.ssn,"onUpdate:modelValue":t[3]||(t[3]=a=>e.ssn=a),error:!!e.formErrors.ssn,"bottom-slots":""},{error:l(()=>[d("div",Ut,w(e.formErrors.ssn),1)]),_:1},8,["modelValue","error"])]),d("div",Ht,[i(W,{dense:"",label:"Classification","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.job,"onUpdate:modelValue":t[4]||(t[4]=a=>e.job=a),options:e.props.classifications,"option-label":a=>a?`${a[21]} ${a[18]}`:"","display-value":e.job?`${e.job[21]} ${e.job[18]}`:"","bottom-slots":"",error:!!e.formErrors.job},{error:l(()=>[d("div",Xt,w(e.formErrors.job),1)]),_:1},8,["modelValue","options","option-label","display-value","error"])])]),i(de,{class:"q-pt-none",align:"right"},{default:l(()=>[i(M,{dense:"",label:"Reset",color:"dark",onClick:e.resetForm},null,8,["onClick"]),i(M,{dense:"",loading:e.isSubmitting,disable:e.isSubmitting,color:"info",label:"Save",type:"submit"},{loading:l(()=>[i(Ie)]),_:1},8,["loading","disable"])]),_:1})]),_:1},8,["onSubmit"])])}var Gt=U(At,[["render",Jt]]);const Yt={emits:["removeName","viewEmployee"],props:{data:Array},components:{GetEmployee:at},setup(e,{emit:t}){const s=[{name:0,label:"",align:"left",field:""},{name:1,label:"Name",align:"left",field:n=>n.firstName,format:(n,a)=>`${n} ${a.lastName}`,sortable:!0},{name:2,label:"Phone",align:"left",field:n=>n.phone,format:n=>`${r(n)}`,sortable:!0,required:!0},{name:3,label:"Last 4",align:"left",field:n=>n.ssn,format:n=>`${n}`,sortable:!0},{name:4,label:"Classification",align:"left",field:n=>n.classification[18],format:n=>`${n}`,sortable:!0,required:!0},{name:6,label:"",align:"center",field:""}],o=n=>{t("viewEmployee",n)},r=n=>{const u=(""+n).replace(/\D/g,"").match(/^(\d{3})(\d{3})(\d{4})$/);return u?`(${u[1]}) ${u[2]}-${u[3]}`:null};return{props:e,columns:s,viewEmployee:o,formatPhone:r}}},Wt={class:"full-width row flex-center text-primary q-gutter-sm q-py-xs"};function Zt(e,t,s,o,r,n){const a=Q("get-employee");return S(),z("div",null,[i(Ne,{dense:"",columns:o.columns,rows:o.props.data,"row-key":u=>u.ssn,pagination:{rowsPerPage:10},"table-header-class":"bg-dark text-white","no-data-label":"No Names Added","hide-pagination":!0},{"header-cell-0":l(()=>[i(oe,{"auto-width":""})]),"body-cell-0":l(u=>[i(oe,{class:"text-center","auto-width":""},{default:l(()=>[i(a,{data:u.row,onViewEmployee:o.viewEmployee,type:"employee",query:`{'27'.EX.'${u.row.phone}'}AND{'551'.EX.'${u.row.ssn}'}`},null,8,["data","onViewEmployee","query"])]),_:2},1024)]),"body-cell-6":l(u=>[i(oe,{class:"text-center","auto-width":""},{default:l(()=>[i(M,{class:"q-pa-none q-ma-none",flat:"",color:"primary",round:"",dense:"",onClick:y=>e.$emit("removeName",u.row),icon:"delete_forever"},null,8,["onClick"])]),_:2},1024)]),"no-data":l(({message:u})=>[d("div",Wt,[i(ue,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),d("span",null,w(u),1)])]),_:1},8,["columns","rows","row-key"])])}var _t=U(Yt,[["render",Zt]]);const xt=_({props:{projects:Array},components:{QSelectProjectOptions:Oe,QSelectStructureOptions:ht,ClassificationsForm:Ot,ClassificationsTable:Tt,NamesForm:Gt,NamesTable:_t},setup(e,{emit:t}){const s=Pe(),o=et(),r=$(!1),n=$(0),a=$({}),{userData:u}=P(),{getStoredData:y,setStorageData:b}=he(),m=$([]),D=$([]),g=[{value:"Name Request Only",description:"The hiring center will only hire the names you provide.",warning:"If you DO NOT provide enough names or if the people you request do not show up, the hiring center WILL NOT assist with filling this request."},{value:"Open",description:"The hiring center will fill positions by recruiting and selecting the most qualified candidates available.",warning:"You will NOT be able to add names to this request."},{value:"Mixed",description:"The hiring center will hire all of the names that you provide and fill remaining positions by recruiting and selecting the most qualified candidates available."}],C=[{value:"Backfill",description:"This request is to fill positions that are open because of an employee leaving the job site."},{value:"Increase in Manpower",description:"This request is to fill positions that are new because of an increased need in manpower. This may be due to a change in the scope of an existing contract, an additional contract awarded, etc."}],G=k({projectSelection:k().required().nullable().label("Project"),dateNeeded:rt().required().nullable().label("Date Needed"),restriction:k().required().label("Request Type"),reason:k().required().label("Request Reason"),jobNumber:k().required().nullable().label("Job Number"),meetingLocation:k().required().nullable().label("Meeting Location"),siteContact:k().required().nullable().label("Site Contact")}),{errors:E,handleSubmit:j,isSubmitting:R,handleReset:x}=pe({validationSchema:G,initialValues:{restriction:g[1],reason:C[0]}}),{value:p}=q("projectSelection"),{value:B}=q("dateNeeded"),{value:re}=q("restriction"),{value:De}=q("reason"),{value:ne}=q("jobNumber"),{value:ie}=q("meetingLocation"),{value:ae}=q("siteContact"),{value:le}=q("perDiem"),ce=async({to:c,fields:f,fid:v})=>{try{const{data:A}=await T.upsertRecordsXML({to:c,data:[f],fieldsToReturn:[v],formatObject:v});return A[0][v]}catch(A){throw{error:A,message:"Cannot add database record."}}},Ee=async({to:c,fields:f,fid:v,raw:A})=>{const L=await ce({to:c,fields:f,fid:v}),ee=[];return A.names&&A.names.length>0?(A.names.forEach(te=>{const Je={6:{value:te.firstName},7:{value:te.lastName},8:{value:te.phone},19:{value:h().tz("America/Chicago")},16:{value:te.ssn},10:{value:"Has Not Arrived"},14:{value:`${u[35]} ${u[37]}`},17:{value:L[3]}};let Ge=ce({to:"bsg4yb4wa",fields:Je,fid:15});ee.push(Ge)}),await Promise.all(ee)):L},Re=j(async c=>{if(r.value=!0,m.value.length===0)s.notify({type:"negative",message:"You are required to add at least one classification!",position:"right"});else{s.loading.show();const f={64:{value:c.dateNeeded},282:{value:c.restriction.value},284:{value:c.reason.value},31:{value:c.meetingLocation[3]},9:{value:c.jobNumber[3]},60:{value:c.siteContact[3]},92:{value:c.projectSelection[12]},6:{value:c.projectSelection[3]},272:{value:u[3]},281:{value:u[32]==="Project User"},14:{value:"Pending"},147:{value:2},82:{value:h().tz("America/Chicago")},68:{value:c.perDiem?"Yes":"No"}};c.perDiem&&Object.assign(f,{65:{value:c.perDiem[3]}});const v=await ce({to:"bpzpyjbuy",fields:f,fid:266}),A=[];m.value.forEach(async L=>{const ee={6:{value:v[3]},9:{value:L[3]},17:{value:"Pending"},18:{value:L.qty},23:{value:L.rate},238:{value:L.id}};let be=await Ee({to:"bpzpyqcu4",fields:ee,fid:220,raw:L});A.push(be)});try{await Promise.all(A),o.replace({name:"requests"}),s.loading.hide(),s.notify({type:"positive",message:"Request submitted successfully!"})}catch(L){console.log(L)}}});function Te(c){ne.value=c}function Ae(c){ae.value=c}function ke(c){ie.value=c}function Fe(c){le.value=c}function Ve({data:c}){b({type:c.type,key:c.key,data:c.data,timestamp:c.timestamp})}const Le=()=>{e.projects.length===1&&(p.value=e.projects[0])};O(()=>e.projects,()=>{e.projects.length===1&&(p.value=e.projects[0])}),O(p,(c,f)=>{f&&c!==f&&(ne.value=null,ae.value=null,ie.value=null,le.value=null)});const Qe=()=>{s.dialog({title:"Confirm",message:"Are you sure you want to cancel? All of your progress will be lost.",cancel:!0,persistent:!0}).onOk(()=>{o.go(-1),x()})};function Me({data:c}){const f=m.value.findIndex(v=>v[3]===c[3]);f>-1&&m.value[f].rate===c.rate?m.value[f].qty=m.value[f].qty+c.qty:m.value.push(c)}function Be({data:c}){a.value[c.type]=c.value}function Ke(c){s.dialog({title:"Confirm",message:"Are you sure you want to remove this classification?",cancel:!0,persistent:!0}).onOk(()=>{const f=m.value.findIndex(v=>v[3]===c[3]);f>-1&&m.value.splice(f,1)})}function ze(c){D.value.push(c);const f=m.value.findIndex(v=>v[3]===c.classification[3]);f>-1&&(m.value[f].names?m.value[f].names.push(c):m.value[f].names=[c],m.value[f].qty<D.value.length&&(m.value[f].qty=D.value.length))}function Ue(c){s.dialog({title:"Confirm",message:"Are you sure you want to remove this name?",cancel:!0,persistent:!0}).onOk(()=>{const f=m.value.findIndex(v=>v[3]===c.classification[3]);f>-1&&m.value[f].names.findIndex(A=>A.ssn===c.ssn)>-1&&m.value[f].names.splice(f,1)})}const He=c=>{s.notify({type:"negative",message:"Feature is not ready yet."})},Xe=Z(()=>{const c=[];return m.value.forEach(f=>{f.names&&f.names.forEach(v=>{c.push(v)})}),c});return Le(),{props:e,formErrors:E,loading:r,isSubmitting:R,submit:Re,cancelNew:Qe,sendDataToStore:Ve,getStoredData:y,step:n,reasons:C,restrictions:g,projectSelection:p,jobNumberChanged:Te,jobNumber:ne,locationChanged:ke,contactChanged:Ae,perDiemChanged:Fe,meetingLocation:ie,siteContact:ae,perDiem:le,dateNeeded:B,restriction:re,reason:De,classificationAdded:Me,classificationsData:m,classificationFormChanged:Be,removeClassification:Ke,namesData:D,removeName:Ue,nameAdded:ze,viewEmployee:He,namesOnClassifications:Xe}}}),es=d("div",{class:"text-dark text-h5"},"New Hire Request",-1),ts=d("div",{class:"text-secondary text-italic text-body2"},"Enter the following information to submit a new Hire Request.",-1),ss={class:"row"},os={class:"col-12 col-md-5 q-pr-sm"},rs=d("div",{class:"text-primary text-h6 q-mb-md"},"General Information",-1),ns={class:"text-caption"},is={key:1},as={class:"text-caption"},ls=d("div",null,[d("span",null,"Request Reason")],-1),cs={class:"text-caption"},us={class:"text-caption"},ds=d("div",null,[d("span",null,"Request Type")],-1),fs={class:"text-caption"},ms={key:0,class:"text-caption text-accent"},ps={class:"text-caption"},hs={key:0,class:"col-12 col-md-7 q-pr-sm"};function bs(e,t,s,o,r,n){const a=Q("q-select-project-options"),u=Q("q-select-structure-options"),y=Q("classifications-form"),b=Q("classifications-table"),m=Q("names-form"),D=Q("names-table");return S(),z("div",null,[i(me,{onSubmit:fe(e.submit,["prevent"])},{default:l(()=>[i(X,{flat:""},{default:l(()=>[i(K,{class:"q-pl-none q-pt-sm"},{default:l(()=>[es,ts]),_:1}),i(tt),i(K,{class:"q-px-none"},{default:l(()=>[d("div",ss,[d("div",os,[i(X,null,{default:l(()=>[i(K,null,{default:l(()=>[rs,e.props.projects.length>1?(S(),J(W,{key:0,dense:"",label:"Which Project is this Request for?","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.projectSelection,"onUpdate:modelValue":t[0]||(t[0]=g=>e.projectSelection=g),options:e.props.projects,"option-value":"3","option-label":"20","display-value":e.projectSelection?e.projectSelection[20]:"",error:!!e.formErrors.projectSelection,"bottom-slots":""},{error:l(()=>[d("div",ns,w(e.formErrors.projectSelection),1)]),_:1},8,["modelValue","options","display-value","error"])):H("",!0),e.projectSelection?(S(),z("div",is,[i(W,{class:"q-mb-sm",dense:"","label-slot":"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.reason,"onUpdate:modelValue":t[1]||(t[1]=g=>e.reason=g),options:e.reasons,"option-label":"value","display-value":e.reason?e.reason.value:"","bottom-slots":"",error:!!e.formErrors.reason},{error:l(()=>[d("div",as,w(e.formErrors.reason),1)]),label:l(()=>[ls]),after:l(()=>[i(M,{size:"xs",color:"accent",round:"",icon:"question_mark"},{default:l(()=>[i(ye,{anchor:"top middle",self:"center middle",class:"bg-primary text-white"},{default:l(()=>[d("div",null,[d("div",cs,w(e.reason?e.reason.description:""),1)])]),_:1})]),_:1})]),_:1},8,["modelValue","options","display-value","error"]),i(W,{class:st(e.restriction&&e.restriction.warning?"q-mb-xl":"q-mb-sm"),dense:"","label-slot":"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.restriction,"onUpdate:modelValue":t[2]||(t[2]=g=>e.restriction=g),options:e.restrictions,"option-label":"value","display-value":e.restriction?e.restriction.value:"","bottom-slots":"",error:!!e.formErrors.restriction},{error:l(()=>[d("div",us,w(e.formErrors.restriction),1)]),label:l(()=>[ds]),after:l(()=>[i(M,{size:"xs",color:"accent",round:"",icon:"question_mark"},{default:l(()=>[i(ye,{anchor:"top middle",self:"center middle",class:"bg-primary text-white"},{default:l(()=>[d("div",null,[d("div",fs,w(e.restriction?e.restriction.description:""),1)])]),_:1})]),_:1})]),hint:l(()=>[e.restriction?(S(),z("div",ms,w(e.restriction.warning||""),1)):H("",!0)]),_:1},8,["class","modelValue","options","display-value","error"]),i(a,{dense:"",label:"Select Job Number",type:"jobNumbers",optionLabel:"11",optionDisplayKey:11,project:e.projectSelection,dataKey:e.projectSelection[3],error:!!e.formErrors.jobNumber,errorMessage:e.formErrors.jobNumber,loadedOptions:e.getStoredData({type:"jobNumbers",key:e.projectSelection?e.projectSelection[3]:null})||[],query:`{'6'.EX.'${e.projectSelection[3]}'}AND{'29'.EX.'Active'}`,onOptionsLoaded:e.sendDataToStore,onSelectionChanged:e.jobNumberChanged,currentSelection:e.jobNumber?e.jobNumber:{},refreshable:!0},null,8,["project","dataKey","error","errorMessage","loadedOptions","query","onOptionsLoaded","onSelectionChanged","currentSelection"]),i(a,{dense:"",label:"Select Contact",type:"siteContacts",optionLabel:"17",optionDisplayKey:17,project:e.projectSelection,dataKey:e.projectSelection[3],error:!!e.formErrors.siteContact,errorMessage:e.formErrors.siteContact,loadedOptions:e.getStoredData({type:"siteContacts",key:e.projectSelection?e.projectSelection[3]:null})||[],query:`{'7'.EX.'${e.projectSelection[3]}'}AND{'6'.EX.'Active'}`,onOptionsLoaded:e.sendDataToStore,onSelectionChanged:e.contactChanged,currentSelection:e.siteContact?e.siteContact:{},refreshable:!0},null,8,["project","dataKey","error","errorMessage","loadedOptions","query","onOptionsLoaded","onSelectionChanged","currentSelection"]),i(u,{dense:!0,label:"Select Meeting Location",type:"meetingLocations",optionLabel:"6",optionDisplayKey:6,noOptionsMessage:"No Locations Available",project:e.projectSelection,dataKey:e.projectSelection[3],formError:!!e.formErrors.meetingLocation,errorMessage:e.formErrors.meetingLocation,loadedOptions:e.getStoredData({type:"meetingLocations",key:e.projectSelection?e.projectSelection[3]:null})||[],objectFid:22,dbid:"bp5d2twyj",query:`{'15'.EX.'${e.projectSelection[8]}'}AND{'14'.EX.'Active'}`,onOptionsLoaded:e.sendDataToStore,onSelectionChanged:e.locationChanged,currentSelection:e.meetingLocation?e.meetingLocation:{},refreshable:!0},null,8,["project","dataKey","formError","errorMessage","loadedOptions","query","onOptionsLoaded","onSelectionChanged","currentSelection"]),e.projectSelection&&e.projectSelection[351]?(S(),J(a,{key:0,dense:!0,label:"Per Diem",type:"perDiemSpecs",optionLabel:"20",optionDisplayKey:20,project:e.projectSelection,dataKey:e.projectSelection[3],error:!!e.formErrors.perDiem,errorMessage:e.formErrors.perDiem,loadedOptions:e.getStoredData({type:"perDiemSpecs",key:e.projectSelection?e.projectSelection[3]:null})||[],query:`{'12'.EX.'${e.projectSelection[3]}'}AND{'38'.EX.'Active'}`,onOptionsLoaded:e.sendDataToStore,onSelectionChanged:e.perDiemChanged,currentSelection:e.perDiem?e.perDiem:{},refreshable:!0},null,8,["project","dataKey","error","errorMessage","loadedOptions","query","onOptionsLoaded","onSelectionChanged","currentSelection"])):H("",!0),i(Y,{dense:"",type:"date",modelValue:e.dateNeeded,"onUpdate:modelValue":t[3]||(t[3]=g=>e.dateNeeded=g),"bottom-slots":"",error:!!e.formErrors.dateNeeded,label:"Date Needed","stack-label":""},{error:l(()=>[d("div",ps,w(e.formErrors.dateNeeded),1)]),_:1},8,["modelValue","error"])])):H("",!0)]),_:1})]),_:1})]),e.projectSelection?(S(),z("div",hs,[i(X,null,{default:l(()=>[i(K,null,{default:l(()=>[i(y,{project:e.projectSelection,onClassificationAdded:e.classificationAdded,onFormChanged:e.classificationFormChanged},null,8,["project","onClassificationAdded","onFormChanged"]),i(X,{flat:""},{default:l(()=>[i(K,{class:"q-px-none"},{default:l(()=>[i(b,{data:e.classificationsData,onRemoveClassification:e.removeClassification},null,8,["data","onRemoveClassification"])]),_:1})]),_:1})]),_:1})]),_:1}),e.classificationsData.length>0&&e.restriction.value!=="Open"?(S(),J(X,{key:0,class:"q-mt-md"},{default:l(()=>[i(K,null,{default:l(()=>[i(m,{classifications:e.classificationsData,project:e.projectSelection,type:e.restriction,onNameAdded:e.nameAdded},null,8,["classifications","project","type","onNameAdded"]),i(X,{flat:""},{default:l(()=>[i(K,{class:"q-px-none"},{default:l(()=>[i(D,{data:e.namesOnClassifications,onRemoveName:e.removeName,onViewEmployee:e.viewEmployee},null,8,["data","onRemoveName","onViewEmployee"])]),_:1})]),_:1})]),_:1})]),_:1})):H("",!0)])):H("",!0)])]),_:1}),e.projectSelection?(S(),J(de,{key:0,align:"right"},{default:l(()=>[i(M,{color:"dark",label:"Cancel",onClick:e.cancelNew},null,8,["onClick"]),i(M,{color:"primary",label:"Submit",type:"submit"})]),_:1})):H("",!0)]),_:1})]),_:1},8,["onSubmit"])])}var gs=U(xt,[["render",bs]]);const vs={name:"New Request",components:{HireRequestForm:gs},setup(){const e=Pe(),{userOffices:t,userProjects:s}=P(),{getProjects:o,fetchAllProjects:r}=lt(),{setNewRequestData:n,getDbData:a,getHumanizedData:u,getHumanizedClassificationData:y}=he(),b=$(0),m=$(!1),D=Z(()=>t()),g=Z(()=>s()),C=Z(()=>{const j=[];return g.value.forEach(R=>{j.push(R.project)}),o().forEach(R=>{j.push(R)}),[...new Map(j.map(R=>[R[3],R])).values()]});async function G(){if(e.loading.show(),D.value.length>0)await r();else if(C.value.length===1){const j={6:{value:C.value[0][3]},92:{value:C.value[0][12]}},R={project:C.value[0]};n({humanized:R,database:j}),b.value=1}e.loading.hide()}function E(){(b.value>1||C.value.length>1)&&(b.value=b.value-1)}return G(),O(C,(j,R)=>{if(j.length===1){b.value=1;const x={6:{value:j[0][3]},92:{value:j[0][12]}},p={project:j[0]};n({humanized:p,database:x})}}),O(b,()=>{console.log(u),console.log(y)}),{allProjects:C,step:b,goBack:E,getDbData:a,showCart:m}}},ys={class:"q-pa-sm"};function Ss(e,t,s,o,r,n){const a=Q("hire-request-form");return S(),J(ot,{style:{"max-width":"100vw"}},{default:l(()=>[d("div",ys,[i(X,null,{default:l(()=>[i(K,null,{default:l(()=>[i(a,{projects:o.allProjects},null,8,["projects"])]),_:1})]),_:1})])]),_:1})}var xs=U(vs,[["render",Ss]]);export{xs as default};
