import{l as D,bT as N,_ as T,A as o,aq as c,br as a,d as t,cF as H,D as r,ac as u,B as p,ar as y,cH as P,bW as $,cE as O,r as k,c as M,G as b,ax as I,bU as G,w as J,b5 as C,bQ as U,bt as K,F as X,b4 as Y,H as Z}from"./index.e8fb2253.js";import{Q as x,a as W}from"./QHeader.be6bf03f.js";import{Q as ee}from"./QMenu.b4300bfa.js";import{Q as B}from"./QToolbar.30b493d3.js";import{Q as te}from"./QImg.377710c3.js";import{Q as oe}from"./QList.d18fd6ea.js";import{Q as se,a as ae}from"./QDrawer.9c313da4.js";import{Q as re,a as ne}from"./QLayout.25004f62.js";import{C as le}from"./ClosePopup.0353f9a9.js";import{u as ie}from"./use-quasar.0aa2fc3d.js";import{u as me}from"./useQuerySaver.d29ff9ee.js";import{u as ce,b as ue,q as pe}from"./app.00bf1e10.js";import{l as de}from"./socketListener.99eb96bd.js";import{u as E}from"./dataStore.0af02e2e.js";import{_ as ye}from"./version.8b2d13c9.js";import{M as fe}from"./MenuNav.8d4e02da.js";import{_ as ge}from"./languageSelector.ac25040f.js";import"./workday.a5450778.js";import"./dayjs.d1250a8a.js";import"./workdayAPI.2e48c893.js";import{Q as ve}from"./QSpinnerBall.689bead7.js";import{a as ke}from"./syncEmployeeWithWorkday.e74b71ed.js";import"./QResizeObserver.e0fe0d9d.js";import"./position-engine.d748a9db.js";import"./selection.1f477e95.js";import"./TouchPan.a9bf8065.js";import"./touch.70a9dd44.js";import"./_commonjsHelpers.a26ce4be.js";import"./localForage.8666a90b.js";import"./api.e92e8aaa.js";import"./index.04bc0a32.js";import"./i18n.2814a62c.js";import"./QSelect.c4b0a406.js";import"./QChip.178232ad.js";import"./rtl.b51694b1.js";import"./QBadge.421039c9.js";import"./MenuSubLink.93d89105.js";import"./QSlideTransition.970aeafa.js";const we=D({props:{employee:Object,mini:Boolean},setup(e){const s=N();return E(),{props:e,goToTermination:()=>{s.push({name:"ee-termination"})}}}}),he={class:"text-h5 text-white q-mb-sm"},be={key:0,class:"text-body1 text-white q-mb-sm"},$e={class:"text-body1 text-white"};function qe(e,s,w,f,l,n){return o(),c(O,{class:"bg-accent q-my-lg q-pt-none",flat:"",square:""},{default:a(()=>[t(H,{class:"text-center q-pb-xs"},{default:a(()=>[r("div",he,u(e.employee[24]),1),e.employee[378]!==""?(o(),p("div",be,"ID: "+u(e.employee[378]),1)):y("",!0),r("div",$e,u(e.employee[25]),1)]),_:1}),e.$can("manage","employees")?(o(),c(P,{key:0,class:"q-pb-xs",align:"center"},{default:a(()=>[e.$route.name!=="ee-termination"&&e.$route.name!=="view-ee-release"&&!e.employee[581]&&e.employee[408]==="Active"&&e.employee[79]===7?(o(),c($,{key:0,label:"Release",color:"primary",dense:"",onClick:e.goToTermination},null,8,["onClick"])):y("",!0)]),_:1})):y("",!0)]),_:1})}var Ce=T(we,[["render",qe]]);const Se=D({name:"Last Workday Sync",props:{employee:Object},setup(e){const s=k(!0),{setWorkdayData:w,updateViewedEmployees:f,getEmployee:l}=E(),n=async m=>{s.value=!0;const{clm:h,sync:d}=await ke({clm:e.employee},m);d&&(w({id:h[3],data:d}),f({id:h[3],dataset:"workday",data:d})),s.value=!1},i=M(()=>l(e.employee[3])&&l(e.employee[3]).workday?l(e.employee[3]).workday:null),g=M(()=>{if(i.value){const{employmentData:m}=i.value;return m&&m.workerStatus&&m.workerStatus.active?"Active":"Terminated"}else return"N/A"});return n(!1),{syncing:s,checkWorkday:n,workday:i,workerStatus:g}}}),_e={key:1};function Qe(e,s,w,f,l,n){return o(),p("div",null,[e.syncing?(o(),p("div",{key:0,class:b(["text-dark q-mr-sm",e.$q.screen.gt.lg?"text-body2":"text-caption"])},[I(" Checking Workday Now... "),t(ve,{class:"q-ml-sm",color:"primary",size:e.$q.screen.gt.lg?"3em":"2em"},null,8,["size"])],2)):y("",!0),e.workday&&!e.syncing?(o(),p("div",_e,[e.workday[22]?(o(),p("div",{key:0,class:b(["text-primary",e.$q.screen.gt.lg?"text-body2":"text-caption"])},"No Data in Workday",2)):(o(),p("div",{key:1,class:b(e.$q.screen.gt.lg?"text-body2":"text-caption")},[r("span",{class:b(["text-dark q-mr-sm",e.$q.screen.gt.lg?"text-body2":"text-caption"])},"Worker Status:",2),r("span",{class:b(["text-primary text-weight-bold",e.$q.screen.gt.lg?"text-body2":"text-caption"])},u(e.workerStatus),3)],2)),r("div",null,[r("span",{class:b(["text-dark q-mr-sm",e.$q.screen.gt.lg?"text-body2":"text-caption"])},"Last Check in Workday:",2),r("span",{class:b(["text-weight-light text-secondary text-italic",e.$q.screen.gt.lg?"text-body2":"text-caption"])},u(e.$dayjs(e.workday[1].$d).fromNow()),3),t($,{color:"accent",label:"Check Now",flat:"",icon:"refresh",size:"sm",onClick:s[0]||(s[0]=i=>e.checkWorkday(!0))})])])):y("",!0)])}var Me=T(Se,[["render",Qe]]);const De=D({name:"View Employee",components:{MenuNav:fe,version:ye,languageSelector:ge,BasicEmployeeCard:Ce,LastWorkdaySync:Me},setup(){const{notificationService:e}=de,s=k(null),w=k(!1),f=ie(),l=k(!1),n=k(!1),i=k(!1),g=k(!1),m=N(),h=G(),d=ce(),{getUserType:_}=d,{toolbarTitle:v,viewEmployeeMenu:V}=ue(),{setEmployees:L,getEmployee:A,updateViewedEmployees:z}=E(),Q=M(()=>A(h.params.id)),j=async()=>{const{state:q}=m.options.history;if(s.value=q.back,!Q.value){f.loading.show();const{data:S}=await pe.fetchFromHiringApp({fields:[me({type:"employee",query:"",id:h.params.id})]},{action:"read",type:"employee"});L({id:S[3],data:S}),f.loading.hide()}},F=async()=>{d.logout().then(()=>{m.replace({name:"login"})})};return j(),J(Q,(q,S)=>{}),_==="QuickBase User"&&e&&e.on("created",({officeId:q,title:S,details:R})=>{S==="quasarEmployeeUpdated"&&q&&z(R)}),{tab:k("mails"),fab:w,userStore:d,leftDrawerOpen:l,rightDrawerOpen:i,miniState:n,miniHover:g,miniMouseOver(){n.value===!0&&(g.value=!1)},miniMouseOut(){n.value===!0&&(g.value=!0)},toggleLeftDrawer(){f.screen.gt.sm?(n.value=!n.value,n.value===!0&&(g.value=!0)):l.value=!l.value},toggleRightDrawer(){i.value=!i.value},drawerClick(q){n.value&&(n.value=!1,q.stopPropagation())},logout:F,toolbarTitle:v,viewEmployeeMenu:V,employee:Q,getUserType:_,opener:s,closeWindow(){window.close()}}}}),Te={key:0,class:"q-mr-sm q-ml-sm",src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo-white.png",alt:"BrandSafway Logo",height:"25"},Ee={key:0},Ue={key:1},We={class:"q-gutter-sm row items-center no-wrap"},Be={class:"row no-wrap q-pa-md"},Ne={class:"column items-center"},He={class:"text-subtitle1 q-mt-md q-mb-xs"},Oe={class:"row items-start"},Ve={class:"col-8"},Le={class:"col-4 text-right"};function Ae(e,s,w,f,l,n){const i=C("languageSelector"),g=C("basic-employee-card"),m=C("MenuNav"),h=C("last-workday-sync"),d=C("router-view"),_=C("version");return o(),c(ne,{view:"hHh lpR fFf"},{default:a(()=>[t(x,{elevated:""},{default:a(()=>[t(B,{style:{height:"62px"}},{default:a(()=>[t($,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),e.$q.screen.gt.sm?(o(),p("img",Te)):y("",!0),t(W,null,{default:a(()=>[e.$q.screen.lt.sm?(o(),p("span",Ee)):(o(),p("span",Ue,u(e.toolbarTitle),1))]),_:1}),r("div",We,[t(i,{dense:"",borderless:"",class:"lang-white"}),t($,{flat:"",dense:"",color:"white"},{default:a(()=>[r("div",null,u(e.userStore.getUser[35])+" "+u(e.userStore.getUser[37]),1),t(U,{right:"",size:"2.2em",name:"account_circle"}),t(ee,null,{default:a(()=>[r("div",Be,[r("div",Ne,[t(U,{right:"",size:"72px",name:"account_circle",class:"q-mr-md"}),r("div",He,u(e.userStore.getUser[35])+" "+u(e.userStore.getUser[37]),1),K(t($,{color:"primary",label:e.$t("logout"),push:"",size:"sm",onClick:e.logout},null,8,["label","onClick"]),[[le]])])])]),_:1})]),_:1})])]),_:1})]),_:1}),t(se,{modelValue:e.leftDrawerOpen,"onUpdate:modelValue":s[0]||(s[0]=v=>e.leftDrawerOpen=v),side:"left","show-if-above":"",bordered:"",mini:e.miniState&&e.miniHover,onMouseover:e.miniMouseOver,onMouseout:e.miniMouseOut,onClickCapture:e.drawerClick,class:"text-primary bg-accent print-hide"},{default:a(()=>[t(ae,{class:"fit"},{default:a(()=>[e.$q.screen.lt.sm?(o(),c(B,{key:0,class:"bg-white",style:{height:"64px"}},{default:a(()=>[t(W,{class:"items-center"},{default:a(()=>[t(te,{src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo.svg",style:{"max-width":"245px"},fit:"center",class:"q-ml-md"})]),_:1})]),_:1})):y("",!0),e.employee?(o(),c(g,{key:1,employee:e.employee,mini:e.miniState},null,8,["employee","mini"])):y("",!0),t(oe,{class:"q-mt-sm"},{default:a(()=>[(o(!0),p(X,null,Y(e.viewEmployeeMenu,v=>(o(),c(m,Z({key:v.title},v,{mini:e.miniState}),null,16,["mini"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue","mini","onMouseover","onMouseout","onClickCapture"]),t(re,null,{default:a(()=>[t(O,{class:"print-hide",flat:""},{default:a(()=>[t(H,{class:"q-pb-xs q-pt-sm"},{default:a(()=>[r("div",Oe,[r("div",Ve,[e.employee?(o(),c(h,{key:0,employee:e.employee},null,8,["employee"])):y("",!0)]),r("div",Le,[e.$q.screen.gt.sm?(o(),c($,{key:0,icon:"close",label:"Close",color:"dark",onClick:s[1]||(s[1]=v=>e.getUserType==="QuickBase User"?e.closeWindow():e.$router.go(-1))})):(o(),c($,{key:1,icon:"close",round:"",color:"dark",onClick:s[2]||(s[2]=v=>e.getUserType==="QuickBase User"?e.closeWindow():e.$router.go(-1))}))])])]),_:1})]),_:1}),t(d)]),_:1}),t(_)]),_:1})}var St=T(De,[["render",Ae]]);export{St as default};
