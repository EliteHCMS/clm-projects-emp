import{Q as k}from"./QSelect.a8f07c31.js";import{a5 as T,bN as D,r as u,c as Q,w as m,A as w,an as x,as as C,aY as R,bi as S,C as $,aa as A,aB as N,a7 as o,D as V,ab as z,H}from"./index.61fe6e1c.js";import{I as L,u as O}from"./quickbase.7f66a5fd.js";const Y={class:"text-primary"},G={__name:"projectSelector",props:{can:{type:String,default:"read"},styleSelection:{type:Boolean,default:!1}},setup(g){const P=g,{styleSelection:h}=T(P),i=L(),{getUserType:s,getUser:j}=O(),{setSelectedProject:y,fetchProjects:b,fetchAllProjects:U}=i,{getProjects:_,getSelectedProject:t,getSelectedOffice:l}=D(i),d=u(l.value?l.value[8]:null),B=u(t.value?t.value[3]:null),r=u(s==="Project User"?j[3]:d),a=Q(()=>_.value({userType:s,selectedId:r.value,can:"read"}).filter(e=>!0).sort((e,p)=>e[298].localeCompare(p[298]))),c=e=>{y(e)};a.value.length===1&&c(a.value[0]);const n=()=>{r.value&&s==="QuickBase User"?b({selectedId:r.value,extendTime:60}):U({can:"read",extendTime:60}).then(()=>{a.value.length===1&&c(a.value[0])})};return s==="QuickBase User"&&m(l,()=>{d.value=l.value?l.value[8]:null,n()}),s==="Project User"&&(a.value.length===0&&n(),m(t,()=>{B.value=t.value?t.value[3]:null,n()})),(e,p)=>(w(),x(k,H({"model-value":o(t),options:o(a)},e.$attrs,{"onUpdate:modelValue":c,label:o(t)?"Project":"Select Project","option-label":"298","option-value":"3",clearable:o(a).length>1}),C({_:2},[R(e.$slots,(f,v)=>({name:v,fn:S(I=>[$(e.$slots,v,A(N(I)))])})),o(h)?{name:"selected-item",fn:S(f=>[V("span",Y,z(f.opt[298]),1)]),key:"0"}:void 0]),1040,["model-value","options","label","clearable"]))}};export{G as _};
