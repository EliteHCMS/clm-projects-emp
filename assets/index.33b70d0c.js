import{l as I,r as N,c as y,_ as T,A as c,an as h,bi as l,d as a,cw as v,D as e,ab as o,bK as g,bO as E,au as O,ao as x,B as q,F as V,aY as B,cz as C,bk as ee,bJ as se,bH as z,bI as te,cZ as oe,cy as ae,bF as qe,bM as ge,bL as we,w as De,aZ as L,y as xe}from"./index.bf0c7c2b.js";import{Q as ke}from"./QPage.2ae93e6c.js";import{u as le}from"./use-quasar.9f74feb6.js";import{u as A}from"./useQuerySaver.ae1b8d62.js";import{u as H,q as P}from"./quickbase.d58ce3ab.js";import{dayjs as w}from"./dayjs.58d8c02b.js";import"./workday.29f6965c.js";import"./workdayAPI.baf7b55b.js";import{f as Ce,t as K,r as Ye}from"./submitRelease.889fd78b.js";import{a as Z,b as Re,u as Se}from"./checkTermStatus.371d2471.js";import{u as Q}from"./dataStore.064a43a7.js";import{Q as ne}from"./QTooltip.d565ce3f.js";import{Q as Me}from"./QInnerLoading.21f82426.js";import{o as ie,d as de}from"./helpers.f93f1a91.js";import{a as G}from"./syncEmployeeWithWorkday.84351ff9.js";import{d as U}from"./decode.593c6ccc.js";import{Q as j}from"./QRating.595418f6.js";import{Q as ce}from"./QList.11fcb9c9.js";import{Q as Te}from"./QSelect.cdcc5b09.js";import{Q as Le}from"./QForm.b24c5aff.js";import{a as Ie,u as Ee}from"./vee-validate.esm.3c6e7928.js";import{a as X}from"./array.a979db32.js";import"./_commonjsHelpers.a26ce4be.js";import"./index.7dbe61ef.js";import"./localForage.8eea1ffc.js";import"./api.06a5dbca.js";import"./i18n.50f8cb71.js";import"./dataStore.0d3934b7.js";import"./position-engine.698f4c6e.js";import"./selection.c939f5d3.js";import"./QChip.5a3b0c23.js";import"./QItemLabel.58a8a2bf.js";import"./QMenu.493f5181.js";import"./rtl.cf9bbe47.js";const Ne=I({props:{employee:Object,assignment:Object,release:Object},setup(s){const{getUserType:d}=H(),{updateViewedReleases:r,getReleases:t}=Q(),f=N(!0),$=N(!0),i=y(()=>t(s.release[3])),_=y(()=>i.value&&i.value.employee?i.value.employee:null),k=y(()=>i.value&&i.value.assignment?i.value.assignment:null),S=y(()=>{if(!_.value||!_.value.workday)return[];{const{personalData:u}=_.value.workday;if(u){const{customIds:M}=u.identificationData?u.identificationData:{customIds:[]};return M}else return[]}}),p=async()=>{if(_.value){const{sync:u}=await G({clm:_.value});r({id:s.release[3],dataset:"employee",nested:!0,subset:"workday",data:u}),f.value=!1}else{const{data:u}=await P.fetchFromHiringApp({fields:[A({type:"employee",id:s.release[25]})]}),{sync:M}=await G({clm:u});await r({id:s.release[3],dataset:"employee",data:u}),r({id:s.release[3],dataset:"employee",nested:!0,subset:"workday",data:M}),f.value=!1}if(k.value)$.value=!1;else{const{data:u}=await P.fetchFromHiringApp({fields:[A({type:"rawAssignments",id:s.release[28]})]});r({id:s.release[3],dataset:"assignment",data:u}),$.value=!1}},Y=u=>{if(!!u)return u[145].$d?w(u[145].$d).format("MM/DD/YYYY"):w(u[1].$d).format("MM/DD/YYYY")},b=({id:u,idType:M})=>M.includes("J&amp;E")?`${u.slice(1,4)} / ${u.slice(-5)}`:u;return p(),{dayjs:w,openWindow:ie,getUserType:d,employeeData:_,assignmentData:k,eeLoading:f,assignLoading:$,getArrivalDate:Y,employeeCustomIds:S,decodeHTML:U,processCustomID:b}}}),Pe=e("div",{class:"text-primary text-h6 text-bold"},"Employee Information",-1),Qe={class:"row q-py-sm"},je={class:"col-12 col-sm-3"},ze=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Name")],-1),Ae={class:"text-body2 q-pl-md"},Oe={class:"col-12 col-sm-3"},Ve=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Last 4 Digits of SS#")],-1),Be={class:"text-body2 q-pl-md"},Ue={class:"col-12 col-sm-3"},Fe=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Phone")],-1),He={class:"text-body2 q-pl-md"},We={class:"row q-py-sm"},Je={class:"col-12 col-sm-3"},Ke={class:"text-body2"},Ze=e("span",{class:"text-bold q-mr-md"},"Workday Employee ID",-1),Ge={class:"text-body2 q-pl-md"},Xe={class:"text-body2"},es={class:"text-bold q-mr-md"},ss={class:"text-body2 q-pl-md"},ts={class:"row q-py-sm"},os={class:"col-12 col-sm-3"},as=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Arrival Date")],-1),ls={class:"text-body2 q-pl-md"},ns={class:"col-12 col-sm-3"},is=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Last Hire Date")],-1),ds={class:"text-body2 q-pl-md"},cs={class:"col-12 col-sm-3"},rs=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Last Day Worked")],-1),ms={class:"text-body2 q-pl-md"},ps={class:"col-12 col-sm-3"},us=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Effective Date")],-1),_s={class:"text-body2 q-pl-md"},vs={class:"row q-py-sm"},ys={class:"col-12 col-sm-4"},hs=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Job Site/ Location")],-1),fs={class:"text-body2 q-pl-md"},bs={class:"col-12 col-sm-4"},$s=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Job Title")],-1),qs={class:"text-body2 q-pl-md"},gs={class:"col-12 col-sm-4"},ws=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Pay Rate")],-1),Ds={class:"text-body2 q-pl-md"};function xs(s,d,r,t,f,$){return c(),h(C,null,{default:l(()=>[a(v,{class:"text-center q-py-sm"},{default:l(()=>[Pe]),_:1}),!s.eeLoading&&!s.assignLoading?(c(),h(v,{key:0,class:"q-py-none"},{default:l(()=>[e("div",Qe,[e("div",je,[ze,e("div",Ae,[e("span",null,o(s.employeeData[22])+", "+o(s.employeeData[20]),1)])]),e("div",Oe,[Ve,e("div",Be,[e("span",null,o(s.employeeData[188].substring(s.employeeData[188].length-4)),1)])]),e("div",Ue,[Fe,e("div",He,[e("span",null,o(s.employeeData[25]),1)])])]),a(g),e("div",We,[e("div",Je,[e("div",Ke,[Ze,s.getUserType==="QuickBase User"?(c(),h(E,{key:0,dense:"",size:"sm",flat:"",icon:"open_in_new",color:"info",onClick:d[0]||(d[0]=i=>s.openWindow({url:s.employeeData[451]}))},{default:l(()=>[a(ne,null,{default:l(()=>[O("Open in Workday")]),_:1})]),_:1})):x("",!0)]),e("div",Ge,[e("span",null,o(s.employeeData[378]),1)])]),(c(!0),q(V,null,B(s.employeeCustomIds,(i,_)=>(c(),q("div",{key:_,class:"col-12 col-sm-3"},[e("div",Xe,[e("span",es,o(s.decodeHTML(i.idType)),1)]),e("div",ss,[e("span",null,o(s.processCustomID(i)),1)])]))),128))]),a(g),e("div",ts,[e("div",os,[as,e("div",ls,[e("span",null,o(s.getArrivalDate(s.assignmentData)),1)])]),e("div",ns,[is,e("div",ds,[e("span",null,o(s.dayjs(s.employeeData[397].$d).format("MM/DD/YYYY")),1)])]),e("div",cs,[rs,e("div",ms,[e("span",null,o(s.dayjs(s.release[36].$d).format("MM/DD/YYYY")),1)])]),e("div",ps,[us,e("div",_s,[e("span",null,o(s.dayjs(s.release[36].$d).format("MM/DD/YYYY")),1)])])]),a(g),e("div",vs,[e("div",ys,[hs,e("div",fs,[e("span",null,o(s.assignmentData[141]),1)])]),e("div",bs,[$s,e("div",qs,[e("span",null,o(s.assignmentData[20]),1)])]),e("div",gs,[ws,e("div",Ds,[e("span",null,"$ "+o(s.assignmentData[116].toFixed(2)),1)])])])]),_:1})):(c(),h(v,{key:1,class:"q-my-lg"},{default:l(()=>[a(Me,{color:"primary",showing:""})]),_:1}))]),_:1})}var ks=T(Ne,[["render",xs]]);const Cs=I({props:{data:Object},setup(s){return{evaluation:y(()=>s.data),convertScore:t=>({1:"Strongly Disagreed",2:"Disagreed",3:"Neutral",4:"Agreed",5:"Strongly Agreed",0:"Did Not Know"})[t]}}}),Ys=e("div",{class:"text-primary text-h6 text-bold"},"Employee Performance Evaluation",-1),Rs={class:"row q-py-sm"},Ss={class:"col-12 col-sm-6 col-md-3"},Ms=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Has good attendance")],-1),Ts={class:"text-body2 q-pl-md"},Ls={class:"q-mr-md"},Is={class:"col-12 col-sm-6 col-md-3"},Es=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Has a good attitude")],-1),Ns={class:"text-body2 q-pl-md"},Ps={class:"q-mr-md"},Qs={class:"col-12 col-sm-6 col-md-3"},js=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Can do their job")],-1),zs={class:"text-body2 q-pl-md"},As={class:"q-mr-md"},Os={class:"col-12 col-sm-6 col-md-3"},Vs=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Can be promoted in the future")],-1),Bs={class:"text-body2 q-pl-md"},Us={class:"q-mr-md"};function Fs(s,d,r,t,f,$){return c(),h(C,null,{default:l(()=>[a(v,{class:"text-center q-py-sm"},{default:l(()=>[Ys]),_:1}),a(v,{class:"q-py-none"},{default:l(()=>[e("div",Rs,[e("div",Ss,[Ms,e("div",Ts,[e("span",Ls,o(s.convertScore(s.evaluation.attendance)),1),a(j,{modelValue:s.evaluation.attendance,"onUpdate:modelValue":d[0]||(d[0]=i=>s.evaluation.attendance=i),max:"5",size:"sm",color:"accent",icon:"star_border","icon-selected":"star","icon-half":"star_half","no-dimming":"",readonly:""},null,8,["modelValue"])])]),e("div",Is,[Es,e("div",Ns,[e("span",Ps,o(s.convertScore(s.evaluation.attitude)),1),a(j,{modelValue:s.evaluation.attitude,"onUpdate:modelValue":d[1]||(d[1]=i=>s.evaluation.attitude=i),max:"5",size:"sm",color:"accent",icon:"star_border","icon-selected":"star","icon-half":"star_half","no-dimming":"",readonly:""},null,8,["modelValue"])])]),e("div",Qs,[js,e("div",zs,[e("span",As,o(s.convertScore(s.evaluation.capable)),1),a(j,{modelValue:s.evaluation.capable,"onUpdate:modelValue":d[2]||(d[2]=i=>s.evaluation.capable=i),max:"5",size:"sm",color:"accent",icon:"star_border","icon-selected":"star","icon-half":"star_half","no-dimming":"",readonly:""},null,8,["modelValue"])])]),e("div",Os,[Vs,e("div",Bs,[e("span",Us,o(s.convertScore(s.evaluation.promotion)),1),a(j,{modelValue:s.evaluation.promotion,"onUpdate:modelValue":d[3]||(d[3]=i=>s.evaluation.promotion=i),max:"5",size:"sm",color:"accent",icon:"star_border","icon-selected":"star","icon-half":"star_half","no-dimming":"",readonly:""},null,8,["modelValue"])])])])]),_:1})]),_:1})}var Hs=T(Cs,[["render",Fs]]);const Ws=I({props:{release:Object,employee:Object},setup(s){const{getReleases:d}=Q(),r=y(()=>d(s.release[3])&&d(s.release[3]).employee?d(s.release[3]).employee:null);return{deductNeeded:y(()=>r.value&&!s.release[72]&&w.duration(w(s.release[36].$d).diff(w(s.employee[397].$d))).asDays()<30?"Yes":"No"),downloadFile:de,decodeHTML:U}}}),Js=e("div",{class:"text-primary text-h6 text-bold"},"Departure Information",-1),Ks={class:"row"},Zs={class:"col-12 col-sm-9"},Gs={class:"row q-py-sm"},Xs={class:"col-12 col-sm-6 col-md-6"},et={class:"text-body2"},st=e("span",{class:"text-bold q-mr-md"},"Return Company Equipment and/or PPE",-1),tt={class:"col-12 col-sm-6 col-md-6"},ot={class:"text-body2"},at=e("span",{class:"text-bold q-mr-md"},"Payroll Deduction Needed",-1),lt={class:"row q-py-sm"},nt={class:"col-12"},it={class:"text-body2"},dt=e("span",{class:"text-bold q-mr-md"},"Reason",-1),ct=e("div",{class:"row q-py-sm"},[e("div",{class:"col-12"},[e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Recommendation for Rehire / Reassignment"),e("span",null,"Need to add this to form")])])],-1),rt={class:"row q-py-sm"},mt={class:"col-12"},pt=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Comments")],-1),ut={class:"text-body2 text-italic q-pl-md"},_t={class:"col-12 col-sm-3 q-pl-sm"},vt=e("div",{class:"text-body2 text-bold text-center q-mb-sm"},"Supporting Documents",-1),yt={key:1,class:"text-body2 text-italic text-center"},ht=e("span",null,"No Supporting Documents",-1),ft=[ht];function bt(s,d,r,t,f,$){return c(),h(C,null,{default:l(()=>[a(v,{class:"text-center q-py-sm"},{default:l(()=>[Js]),_:1}),a(v,{class:"q-py-none"},{default:l(()=>[e("div",Ks,[e("div",Zs,[e("div",Gs,[e("div",Xs,[e("div",et,[st,e("span",null,o(s.release[72]?"Yes":"No"),1)])]),e("div",tt,[e("div",ot,[at,e("span",null,o(s.deductNeeded),1)])])]),a(g),e("div",lt,[e("div",nt,[e("div",it,[dt,e("span",null,o(s.release[32]),1)])])]),a(g),ct,a(g),e("div",rt,[e("div",mt,[pt,e("div",ut,[e("span",null,o(s.release[60]===""?"No Comments":s.decodeHTML(s.release[60])),1)])])])]),e("div",_t,[vt,s.release[70].length>0?(c(),h(ce,{key:0},{default:l(()=>[(c(!0),q(V,null,B(s.release[70],(i,_)=>ee((c(),h(se,{key:_,clickable:"",class:"text-body2",onClick:k=>s.downloadFile({tableId:"bsstsai5d",recordId:i[3],fieldId:6,versionNumber:1,name:i[7]})},{default:l(()=>[a(z,null,{default:l(()=>[O(o(_+1)+". "+o(i[7]),1)]),_:2},1024),a(z,{avatar:""},{default:l(()=>[a(te,{color:"info",name:"file_download"})]),_:1})]),_:2},1032,["onClick"])),[[oe]])),128))]),_:1})):(c(),q("div",yt,ft))])])]),_:1})]),_:1})}var $t=T(Ws,[["render",bt]]);const qt=I({props:{employee:Object,assignment:Object,release:Object},setup(s){const{getUserType:d}=H(),{updateViewedReleases:r,getReleases:t}=Q(),f=N(!0),$=N(!0),i=y(()=>t(s.release[3])),_=y(()=>i.value&&i.value.employee?i.value.employee:null),k=y(()=>i.value&&i.value.assignment?i.value.assignment:null),S=y(()=>{if(!_.value||!_.value.workday)return[];{const{personalData:b}=_.value.workday;if(b){const{customIds:u}=b.identificationData?b.identificationData:{customIds:[]};return u}else return[]}});return{dayjs:w,openWindow:ie,getUserType:d,employeeData:_,assignmentData:k,eeLoading:f,assignLoading:$,getArrivalDate:b=>b[145].$d?w(b[145].$d).format("MM/DD/YYYY"):w(b[1].$d).format("MM/DD/YYYY"),employeeCustomIds:S,processCustomID:({id:b,idType:u})=>u.includes("J&amp;E")?`${b.slice(1,4)} / ${b.slice(-5)}`:b,decodeHTML:U}}}),gt=e("div",{class:"text-body1 text-bold"},"Employee Information",-1),wt={class:"row q-py-sm"},Dt={class:"col-3"},xt=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Name")],-1),kt={class:"text-caption q-pl-md"},Ct={class:"col-3"},Yt=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Last 4 Digits of SS#")],-1),Rt={class:"text-caption q-pl-md"},St={class:"col-3"},Mt=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Phone")],-1),Tt={class:"text-caption q-pl-md"},Lt={class:"row q-py-sm"},It={class:"col-3"},Et={class:"text-caption"},Nt=e("span",{class:"text-bold q-mr-md"},"Workday Employee ID",-1),Pt={class:"text-caption q-pl-md"},Qt={class:"text-caption"},jt={class:"text-bold q-mr-md"},zt={class:"text-caption q-pl-md"},At={class:"row q-py-sm"},Ot={class:"col-3"},Vt=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Arrival Date")],-1),Bt={class:"text-caption q-pl-md"},Ut={class:"col-3"},Ft=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Last Hire Date")],-1),Ht={class:"text-caption q-pl-md"},Wt={class:"col-3"},Jt=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Last Day Worked")],-1),Kt={class:"text-caption q-pl-md"},Zt={class:"col-3"},Gt=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Effective Date")],-1),Xt={class:"text-caption q-pl-md"},eo={class:"row q-py-sm"},so={class:"col-4"},to=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Job Site/ Location")],-1),oo={class:"text-caption q-pl-md"},ao={class:"col-4"},lo=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Job Title")],-1),no={class:"text-caption q-pl-md"},io={class:"col-2"},co=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Pay Rate")],-1),ro={class:"text-caption q-pl-md"};function mo(s,d,r,t,f,$){return c(),h(C,{flat:""},{default:l(()=>[a(v,{class:"q-py-sm"},{default:l(()=>[gt]),_:1}),a(v,{class:"q-py-none"},{default:l(()=>[e("div",wt,[e("div",Dt,[xt,e("div",kt,[e("span",null,o(s.employeeData[22])+", "+o(s.employeeData[20]),1)])]),e("div",Ct,[Yt,e("div",Rt,[e("span",null,o(s.employeeData[188].substring(s.employeeData[188].length-4)),1)])]),e("div",St,[Mt,e("div",Tt,[e("span",null,o(s.employeeData[25]),1)])])]),a(g),e("div",Lt,[e("div",It,[e("div",Et,[Nt,s.getUserType==="QuickBase User"?(c(),h(E,{key:0,dense:"",size:"sm",flat:"",icon:"open_in_new",color:"info",onClick:d[0]||(d[0]=i=>s.openWindow({url:s.employeeData[451]}))},{default:l(()=>[a(ne,null,{default:l(()=>[O("Open in Workday")]),_:1})]),_:1})):x("",!0)]),e("div",Pt,[e("span",null,o(s.employeeData[378]),1)])]),(c(!0),q(V,null,B(s.employeeCustomIds,(i,_)=>(c(),q("div",{key:_,class:"col-3"},[e("div",Qt,[e("span",jt,o(s.decodeHTML(i.idType)),1)]),e("div",zt,[e("span",null,o(s.processCustomID(i)),1)])]))),128))]),a(g),e("div",At,[e("div",Ot,[Vt,e("div",Bt,[e("span",null,o(s.getArrivalDate(s.assignmentData)),1)])]),e("div",Ut,[Ft,e("div",Ht,[e("span",null,o(s.dayjs(s.employeeData[397].$d).format("MM/DD/YYYY")),1)])]),e("div",Wt,[Jt,e("div",Kt,[e("span",null,o(s.dayjs(s.release[36].$d).format("MM/DD/YYYY")),1)])]),e("div",Zt,[Gt,e("div",Xt,[e("span",null,o(s.dayjs(s.release[36].$d).format("MM/DD/YYYY")),1)])])]),a(g),e("div",eo,[e("div",so,[to,e("div",oo,[e("span",null,o(s.assignmentData[141]),1)])]),e("div",ao,[lo,e("div",no,[e("span",null,o(s.assignmentData[20]),1)])]),e("div",io,[co,e("div",ro,[e("span",null,"$ "+o(s.assignmentData[116].toFixed(2)),1)])])])]),_:1})]),_:1})}var po=T(qt,[["render",mo]]);const uo=I({props:{data:Object},setup(s){return{evaluation:y(()=>s.data),convertScore:t=>({1:"Strongly Disagreed",2:"Disagreed",3:"Neutral",4:"Agreed",5:"Strongly Agreed",0:"Did Not Know"})[t]}}}),_o=e("div",{class:"text-body1 text-bold"},"Employee Performance Evaluation",-1),vo={class:"row q-py-sm"},yo={class:"col-3"},ho=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Has good attendance")],-1),fo={class:"text-caption q-pl-md"},bo={class:"q-mr-md"},$o={class:"col-3"},qo=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Has a good attitude")],-1),go={class:"text-caption q-pl-md"},wo={class:"q-mr-md"},Do={class:"col-3"},xo=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Can do their job")],-1),ko={class:"text-caption q-pl-md"},Co={class:"q-mr-md"},Yo={class:"col-3"},Ro=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Can be promoted in the future")],-1),So={class:"text-caption q-pl-md"},Mo={class:"q-mr-md"};function To(s,d,r,t,f,$){return c(),h(C,{flat:"",class:"q-my-none q-py-none"},{default:l(()=>[a(v,{class:"q-py-sm"},{default:l(()=>[_o]),_:1}),a(v,{class:"q-py-none"},{default:l(()=>[e("div",vo,[e("div",yo,[ho,e("div",fo,[e("span",bo,o(s.evaluation.attendance)+" / 5 - "+o(s.convertScore(s.evaluation.attendance)),1)])]),e("div",$o,[qo,e("div",go,[e("span",wo,o(s.evaluation.attitude)+" / 5 - "+o(s.convertScore(s.evaluation.attitude)),1)])]),e("div",Do,[xo,e("div",ko,[e("span",Co,o(s.evaluation.capable)+" / 5 - "+o(s.convertScore(s.evaluation.capable)),1)])]),e("div",Yo,[Ro,e("div",So,[e("span",Mo,o(s.evaluation.promotion)+" / 5 - "+o(s.convertScore(s.evaluation.promotion)),1)])])])]),_:1})]),_:1})}var Lo=T(uo,[["render",To]]);const Io=I({props:{release:Object,employee:Object},setup(s){const{getReleases:d}=Q(),r=y(()=>d(s.release[3])&&d(s.release[3]).employee?d(s.release[3]).employee:null);return{deductNeeded:y(()=>r.value&&!s.release[72]&&w.duration(w(s.release[36].$d).diff(w(s.employee[397].$d))).asDays()<30?"Yes":"No"),downloadFile:de,decodeHTML:U}}}),Eo=e("div",{class:"text-body1 text-bold"},"Departure Information",-1),No={class:"row"},Po={class:"col-9"},Qo={class:"row q-py-sm"},jo={class:"col-6"},zo={class:"text-caption"},Ao=e("span",{class:"text-bold q-mr-md"},"Return Company Equipment and/or PPE",-1),Oo={class:"col-6"},Vo={class:"text-caption"},Bo=e("span",{class:"text-bold q-mr-md"},"Payroll Deduction Needed",-1),Uo={class:"row q-py-sm"},Fo={class:"col-12"},Ho={class:"text-caption"},Wo=e("span",{class:"text-bold q-mr-md"},"Reason",-1),Jo=e("div",{class:"row q-py-sm"},[e("div",{class:"col-12"},[e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Recommendation for Rehire / Reassignment"),e("span",null,"Need to add this to form")])])],-1),Ko={class:"row q-py-sm"},Zo={class:"col-12"},Go=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Comments")],-1),Xo={class:"text-caption text-italic q-pl-md"},ea={class:"col-3 q-pl-sm"},sa=e("div",{class:"text-caption text-bold text-center q-mb-sm"},"Supporting Documents",-1),ta={key:1,class:"text-caption text-italic text-center"},oa=e("span",null,"No Supporting Documents",-1),aa=[oa];function la(s,d,r,t,f,$){return c(),h(C,{flat:""},{default:l(()=>[a(v,{class:"q-py-sm"},{default:l(()=>[Eo]),_:1}),a(v,{class:"q-py-none"},{default:l(()=>[e("div",No,[e("div",Po,[e("div",Qo,[e("div",jo,[e("div",zo,[Ao,e("span",null,o(s.release[72]?"Yes":"No"),1)])]),e("div",Oo,[e("div",Vo,[Bo,e("span",null,o(s.deductNeeded),1)])])]),a(g),e("div",Uo,[e("div",Fo,[e("div",Ho,[Wo,e("span",null,o(s.release[32]),1)])])]),a(g),Jo,a(g),e("div",Ko,[e("div",Zo,[Go,e("div",Xo,[e("span",null,o(s.release[60]===""?"No Comments":s.decodeHTML(s.release[60])),1)])])])]),e("div",ea,[sa,s.release[70].length>0?(c(),h(ce,{key:0},{default:l(()=>[(c(!0),q(V,null,B(s.release[70],(i,_)=>ee((c(),h(se,{key:_,clickable:"",class:"text-caption",onClick:k=>s.downloadFile({tableId:"bsstsai5d",recordId:i[3],fieldId:6,versionNumber:1,name:i[7]})},{default:l(()=>[a(z,null,{default:l(()=>[O(o(_+1)+". "+o(i[7]),1)]),_:2},1024),a(z,{avatar:""},{default:l(()=>[a(te,{color:"info",name:"file_download"})]),_:1})]),_:2},1032,["onClick"])),[[oe]])),128))]),_:1})):(c(),q("div",ta,aa))])])]),_:1})]),_:1})}var na=T(Io,[["render",la]]);const ia=I({emits:["releaseReviewed"],props:{release:Object},setup(s,{emit:d}){const r=le(),t=X({selection:X().required().label("Disposition")}),{meta:f,errors:$,handleSubmit:i,handleReset:_}=Ie({validationSchema:t}),{value:k}=Ee("selection"),S=i(async p=>{console.log(p),r.dialog({title:"Confirm",message:`Are you sure you want to ${p.selection.value} this employee?`,cancel:!0,persistent:!0}).onOk(async()=>{try{r.loading.show();const{release:Y,employee:b}=await Ce({release:s.release,disp:p.selection});d("releaseReviewed",{release:Y,employee:b}),window.postMessage("reloadDepartures"),_()}catch{r.loading.hide(),r.notify({type:"negative",message:"Cannot update release."})}})});return{formErrors:$,formMeta:f,submit:S,selection:k}}}),da=e("div",{class:"text-body2 text-weight-bold"},"How would you like to proceed with this employee?",-1),ca={class:"text-caption"};function ra(s,d,r,t,f,$){return c(),q("div",null,[a(Le,{onSubmit:qe(s.submit,["prevent"])},{default:l(()=>[a(C,null,{default:l(()=>[a(v,{class:"q-pb-xs"},{default:l(()=>[da,a(Te,{class:"q-mb-sm",dense:"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:s.selection,"onUpdate:modelValue":d[0]||(d[0]=i=>s.selection=i),options:[{label:"Reassign this Employee",value:"Reassign"},{label:"Terminate this Employee",value:"Terminate"}],"bottom-slots":"",error:!!s.formErrors.selection},{error:l(()=>[e("div",ca,o(s.formErrors.selection),1)]),_:1},8,["modelValue","error"])]),_:1}),a(ae,{class:"q-pt-xs",align:"right"},{default:l(()=>[a(E,{color:"primary",label:"Submit",type:"submit"})]),_:1})]),_:1})]),_:1},8,["onSubmit"])])}var ma=T(ia,[["render",ra]]);const pa={name:"View Release",directives:{},components:{EmployeeInformation:ks,Evaluation:Hs,DepartureInformation:$t,PrintDepartureInformation:na,PrintEmployeeInformation:po,PrintEvaluation:Lo,ReviewForm:ma},setup(){const s=N(!1),d=N(!1),r=le(),t=ge();we();const{capitalize:f}=xe,{getUserType:$,userData:i}=H(),{getReleases:_,setReleases:k,updateViewedReleases:S}=Q(),p=y(()=>_(t.params.release)),Y=y(()=>p.value&&p.value.employee?p.value.employee:null),b=y(()=>p.value&&p.value.assignment?p.value.assignment:null),u=y(()=>p.value[59]&&p.value[59][0]?p.value[59][0]:null),M=y(()=>{const{data:n}=u.value?u.value:{data:null};return n}),W=y(()=>p.value?p.value[38]:null),re=y(()=>u.value&&u.value[44]?u.value[44]:null),me=y(()=>p.value?p.value[75]:null),pe=y(()=>p.value?p.value[76]:null),ue=async()=>{const n=await Z({release:p.value});if(!n.terminated||!n.lastTerm)r.dialog({title:"Alert",message:"Please complete the termination in Workday first."});else{const{data:m}=await K({release:n,entryMoment:n.termEntryDate.$d,workdayData:n.lastTerm});R({data:m,notify:!0})}},_e=({release:n,employee:m})=>{if(n[43]==="Reassign"){const D=`https://elitehcms.quickbase.com/db/bpzpy6n3x?a=dbpage&pageID=2&ee=${m[3]}`;window.location.href=D}else R({data:n,notify:!0,employee:m})},ve=()=>{window.close()},ye=async()=>{if(!_(t.params.release)){r.loading.show();const{data:n}=await P.fetchFromHiringApp({fields:[A({type:"releases",query:"",id:t.params.release})]});k({id:n[3],data:n}),r.loading.hide(),$==="QuickBase User"&&he({data:n})}},he=async({data:n})=>{if(n[87]==="Active"&&n[95]&&n[42]!=="Complete"){const{reassigned:m,timestamp:D}=await Re({release:n});m&&be({release:n,timestamp:D})}else if(n[73]==="Processed"){if(n.workdayTerm)return;const{release:m}=await F({release:n});R({data:m})}else if(n[79]!=="Complete"&&n[36].$d&&!w().isBefore(w(n[36].$d))){const{completed:m}=await fe({release:n}),{release:D}=await F({release:m});D.terminated?J({release:D}):R({data:D})}else{const{release:m}=await F({release:n});m.terminated?J({release:m}):R({data:m})}},F=async({release:n})=>{if(n[87]!=="Terminated")return n.terminated=!1,{release:n};{const m=await Z({release:n});if(m.terminated&&m.lastTerm)if(m[73]==="Processed"){const{data:D}=await P.upsertRecordsXML({to:"bp3ga39ut",data:[{3:{value:m[3]},106:{value:JSON.stringify(m.lastTerm)}}],fieldsToReturn:[80],formatObject:80});return{release:D[0][80]}}else return{release:m};else return{release:m}}},fe=async({release:n})=>{await Ye({id:n[28]});const{data:m}=await P.fetchFromHiringApp({fields:[A({type:"releases",query:"",id:n[3]})]});return{completed:m}},J=async({release:n})=>{r.dialog({title:"Confirm",message:"It looks like this termination has already been processed in Workday. Would you like to update this employee in CLM now?",persistent:!0,cancel:!0}).onOk(async()=>{const{data:m}=await K({release:n,entryMoment:n.termEntryDate.$d,workdayData:n.lastTerm});R({data:m,notify:!0})}).onCancel(()=>{R({data:n})})},be=async({release:n,timestamp:m})=>{r.dialog({title:"Confirm",message:"It looks like this employee has been reassigned. Would you like to update this release in CLM now?",persistent:!0,cancel:!0}).onOk(async()=>{const D=await Se({release:n,disposition:"Reassign",ts:m,updatedBy:i});R({data:D,notify:!0})}).onCancel(()=>{R({data:n})})},R=({data:n,notify:m,employee:D})=>{r.loading.isActive&&r.loading.hide(),p.value.employee?n.employee=p.value.employee:D&&(n.employee=D),p.value.assignment&&(n.assignment=p.value.assignment),k({id:n[3],data:n}),m&&r.notify({type:"positive",message:"Employee updated in CLM"})},$e=()=>{s.value=!0};return De(s,(n,m)=>{s.value&&setTimeout(()=>{print(),setTimeout(()=>{s.value=!1},500)},200)}),ye(),{release:p,employee:Y,assignment:b,evaluation:M,evaluator:re,reviewer:me,processor:pe,getUserType:$,fab:d,dayjs:w,submitter:W,capitalize:f,showPrint:s,printPage:$e,releaseReviewed:_e,completeTermination:ue,closeWindow:ve}}},ua={class:"q-px-sm q-pb-xl"},_a={class:"row q-py-sm"},va={class:"col-12 col-sm-3"},ya=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Submitted By")],-1),ha={class:"text-body2 q-pl-md"},fa={class:"col-12 col-sm-3"},ba=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Evaluated By")],-1),$a={class:"text-body2 q-pl-md"},qa={key:0},ga={key:1},wa={key:0,class:"col-12 col-sm-3"},Da=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Reviewed By")],-1),xa={class:"text-body2 q-pl-md"},ka={key:1,class:"col-3"},Ca=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Processed By")],-1),Ya={class:"text-body2 q-pl-md"},Ra=e("div",{class:"text-primary text-h6 text-bold"},"Termination Workday Data",-1),Sa={class:"row q-py-sm"},Ma={class:"col-12 col-sm-3"},Ta=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Entry Date")],-1),La={class:"text-body2 q-pl-md"},Ia={class:"col-12 col-sm-3"},Ea=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Effective Date")],-1),Na={class:"text-body2 q-pl-md"},Pa={class:"row"},Qa={class:"col-12 col-md-6"},ja={class:"row q-py-sm"},za={class:"col-3"},Aa=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Submitted By")],-1),Oa={class:"text-body2 q-pl-md"},Va={class:"col-3"},Ba=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Evaluated By")],-1),Ua={class:"text-body2 q-pl-md"},Fa={key:0},Ha={key:1},Wa={key:0,class:"col-3"},Ja=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Reviewed By")],-1),Ka={class:"text-body2 q-pl-md"},Za={key:1,class:"col-3"},Ga=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Processed By")],-1),Xa={class:"text-body2 q-pl-md"};function el(s,d,r,t,f,$){const i=L("employee-information"),_=L("evaluation"),k=L("departure-information"),S=L("review-form"),p=L("print-employee-information"),Y=L("print-evaluation"),b=L("print-departure-information");return c(),h(ke,{style:{"max-width":"100vw"}},{default:l(()=>[e("div",ua,[t.release&&!t.showPrint?(c(),h(C,{key:0,flat:"",class:"text-dark"},{default:l(()=>[s.$route.name==="view-release"?(c(),h(ae,{key:0,class:"q-pb-xs print-hide",align:"right"},{default:l(()=>[t.release[42]==="Reviewed"&&t.release[43]==="Terminate"&&t.getUserType==="QuickBase User"?(c(),h(E,{key:0,icon:"done",label:"Termination Processed",color:"positive",onClick:t.completeTermination},null,8,["onClick"])):x("",!0),a(E,{icon:"print",label:"Print",color:"info",onClick:t.printPage},null,8,["onClick"]),a(E,{icon:"close",label:"Close",color:"dark",onClick:d[0]||(d[0]=u=>t.getUserType==="QuickBase User"?t.closeWindow():s.$router.replace({name:"employees"}))})]),_:1})):x("",!0),a(v,{class:"q-py-xs"},{default:l(()=>[a(i,{assignment:t.assignment,employee:t.employee,release:t.release},null,8,["assignment","employee","release"])]),_:1}),t.evaluation?(c(),h(v,{key:1,class:"q-py-xs"},{default:l(()=>[a(_,{data:t.evaluation},null,8,["data"])]),_:1})):x("",!0),a(v,{class:"q-py-xs"},{default:l(()=>[a(k,{employee:t.employee,release:t.release},null,8,["employee","release"])]),_:1}),a(v,{class:"q-py-xs"},{default:l(()=>[a(C,null,{default:l(()=>[a(v,{class:"q-py-none"},{default:l(()=>[e("div",_a,[e("div",va,[ya,e("div",ha,[e("span",null,o(t.submitter[37])+", "+o(t.submitter[35]),1)])]),e("div",fa,[ba,e("div",$a,[t.evaluator?(c(),q("span",qa,o(t.capitalize(t.evaluator[22].toLowerCase()))+", "+o(t.capitalize(t.evaluator[20].toLowerCase())),1)):(c(),q("span",ga,"Not Specified"))])]),t.reviewer?(c(),q("div",wa,[Da,e("div",xa,[e("span",null,o(t.capitalize(t.reviewer[37].toLowerCase()))+", "+o(t.capitalize(t.reviewer[35].toLowerCase())),1)])])):x("",!0),t.processor?(c(),q("div",ka,[Ca,e("div",Ya,[e("span",null,o(t.capitalize(t.processor[37].toLowerCase()))+", "+o(t.capitalize(t.processor[35].toLowerCase())),1)])])):x("",!0)])]),_:1})]),_:1})]),_:1}),t.release.workdayTerm?(c(),h(v,{key:2,class:"q-py-xs"},{default:l(()=>[a(C,null,{default:l(()=>[a(v,{class:"text-center q-py-sm"},{default:l(()=>[Ra]),_:1}),a(v,{class:"q-py-none"},{default:l(()=>[e("div",Sa,[e("div",Ma,[Ta,e("div",La,[e("span",null,o(s.$dayjs(t.release.workdayTerm.logEntryMoment).format("MM/DD/YYYY hh:mm:ss a z")),1)])]),e("div",Ia,[Ea,e("div",Na,[e("span",null,o(s.$dayjs(t.release.workdayTerm.logEffectiveMoment).format("MM/DD/YYYY hh:mm:ss a z")),1)])])])]),_:1})]),_:1})]),_:1})):x("",!0),t.release[42]==="Pending"&&t.getUserType==="QuickBase User"?(c(),h(v,{key:3,class:"q-py-sm"},{default:l(()=>[e("div",Pa,[e("div",Qa,[a(S,{release:t.release,onReleaseReviewed:t.releaseReviewed},null,8,["release","onReleaseReviewed"])])])]),_:1})):x("",!0)]),_:1})):x("",!0),t.release&&t.showPrint?(c(),h(C,{key:1,id:"printArea",flat:"",class:"text-body2"},{default:l(()=>[a(v,{class:"q-py-xs"},{default:l(()=>[a(p,{assignment:t.assignment,employee:t.employee,release:t.release},null,8,["assignment","employee","release"])]),_:1}),a(g),t.evaluation?(c(),h(v,{key:0,class:"q-py-xs"},{default:l(()=>[a(Y,{data:t.evaluation},null,8,["data"])]),_:1})):x("",!0),a(g),a(v,{class:"q-py-xs"},{default:l(()=>[a(b,{employee:t.employee,release:t.release},null,8,["employee","release"])]),_:1}),a(g),a(v,{class:"q-pb-sm"},{default:l(()=>[a(C,{flat:""},{default:l(()=>[a(v,{class:"q-py-none"},{default:l(()=>[e("div",ja,[e("div",za,[Aa,e("div",Oa,[e("span",null,o(t.submitter[37])+", "+o(t.submitter[35]),1)])]),e("div",Va,[Ba,e("div",Ua,[t.evaluator?(c(),q("span",Fa,o(t.capitalize(t.evaluator[22].toLowerCase()))+", "+o(t.capitalize(t.evaluator[20].toLowerCase())),1)):(c(),q("span",Ha,"Not Specified"))])]),t.reviewer?(c(),q("div",Wa,[Ja,e("div",Ka,[e("span",null,o(t.capitalize(t.reviewer[37].toLowerCase()))+", "+o(t.capitalize(t.reviewer[35].toLowerCase())),1)])])):x("",!0),t.processor?(c(),q("div",Za,[Ga,e("div",Xa,[e("span",null,o(t.capitalize(t.processor[37].toLowerCase()))+", "+o(t.capitalize(t.processor[35].toLowerCase())),1)])])):x("",!0)])]),_:1})]),_:1})]),_:1})]),_:1})):x("",!0)])]),_:1})}var El=T(pa,[["render",el]]);export{El as default};
