import{l as S,r as v,c as h,_ as F,A as u,B as f,d as t,br as a,D as g,ac as w,bW as d,ar as p,cF as L,bO as B}from"./index.4017ca31.js";import{a as Q}from"./QSelect.f649ca34.js";import{Q as q}from"./QForm.09001e6a.js";import{a as A,u as D}from"./vee-validate.esm.12a7079e.js";import{a as M}from"./array.46b57c33.js";const U=S({emits:["closeEdit"],components:{},props:{config:Object},setup(e,{emit:o}){const s=v(null),i=v(null),c=v(!1),y=async()=>{const{type:n,initialValue:r}=e.config;if(n==="options"){const{getter:b}=e.config;i.value=await b(),s.value=i.value,m.value=r(s.value)}else m.value=r},l=h(()=>M({entry:e.config.formRules})),{meta:k,errors:$,handleSubmit:C}=A({validationSchema:l}),{value:m}=D("entry"),E=(n,r)=>{const{filter:b}=e.config;n===""&&r(()=>{s.value=i.value}),r(()=>{const O=n.toLowerCase();s.value=b(i.value,O)})},V=n=>{c.value=!1,i.value.push(n),s.value.push(n),m.value=n},N=C(async n=>{const{setter:r}=e.config;await r(n.entry),o("closeEdit")});return y(),{rawOptions:i,options:s,entry:m,formErrors:$,formMeta:k,submit:N,filterOptions:E,addNew:c,newOptionAdded:V}}}),j={key:0,class:"q-pr-xl"},I={class:"text-caption"},R={key:0,class:"text-center bg-info"},W={key:0,class:"text-center bg-info"},z={key:1,class:"q-pr-xl"},G={class:"text-caption"};function H(e,o,s,i,c,y){return u(),f("div",null,[t(q,{onSubmit:B(e.submit,["prevent"])},{default:a(()=>[e.config.type==="options"?(u(),f("div",j,[t(Q,{class:"q-mb-sm",dense:"",label:`Select a ${e.config.fieldLabel}`,"transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.entry,"onUpdate:modelValue":o[3]||(o[3]=l=>e.entry=l),options:e.options,"option-label":e.config.optionLabel,"display-value":`${e.entry?e.entry[e.config.displayValue]:""}`,"bottom-slots":"",error:!!e.formErrors.entry,"stack-label":"","use-input":"","input-debounce":"0",onFilter:e.filterOptions,clearable:"",loading:!e.rawOptions,disable:!e.rawOptions},{error:a(()=>[g("div",I,w(e.formErrors.entry),1)]),after:a(()=>[t(d,{type:"submit",color:"info",icon:"done",dense:"",onClick:e.submit},null,8,["onClick"]),t(d,{color:"dark",icon:"close",dense:"",onClick:o[0]||(o[0]=l=>e.$emit("closeEdit"))})]),"after-options":a(()=>[e.config.allowNew&&e.options&&e.options.length>0?(u(),f("div",R,[t(d,{flat:"",color:"white",label:`Add a New ${e.config.fieldLabel}`,onClick:o[1]||(o[1]=l=>e.addNew=!0)},null,8,["label"])])):p("",!0)]),"no-option":a(()=>[e.config.allowNew?(u(),f("div",W,[t(d,{flat:"",color:"white",label:`Add a New ${e.config.fieldLabel}`,onClick:o[2]||(o[2]=l=>e.addNew=!0)},null,8,["label"])])):p("",!0)]),_:1},8,["label","modelValue","options","option-label","display-value","error","onFilter","loading","disable"])])):p("",!0),e.config.type==="input"?(u(),f("div",z,[t(L,{class:"q-mb-sm",dense:"",label:e.config.fieldLabel,modelValue:e.entry,"onUpdate:modelValue":o[5]||(o[5]=l=>e.entry=l),"bottom-slots":"",error:!!e.formErrors.entry,"stack-label":""},{error:a(()=>[g("div",G,w(e.formErrors.entry),1)]),after:a(()=>[t(d,{type:"submit",color:"info",icon:"done",dense:"",onClick:e.submit},null,8,["onClick"]),t(d,{color:"dark",icon:"close",dense:"",onClick:o[4]||(o[4]=l=>e.$emit("closeEdit"))})]),_:1},8,["label","modelValue","error"])])):p("",!0)]),_:1},8,["onSubmit"])])}var Y=F(U,[["render",H]]);export{Y as E};
