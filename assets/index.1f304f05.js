import{Q as S,a as U,b as N}from"./QTabPanels.4a7fb865.js";import{Q as L}from"./QTabs.1d898405.js";import{Q as z}from"./QSpace.aa9aab46.js";import{l as g,r as w,bV as C,c as b,_ as j,b5 as _,A as v,B as D,d as o,br as l,cT as Q,D as $,cS as T,bU as E,w as K,y as M,bT as W,aq as y,ar as O,bW as X}from"./index.dbae30bb.js";import{Q as G}from"./QToolbar.5a029f12.js";import{Q as H}from"./QPage.c94e329b.js";import{u as P}from"./use-quasar.4af20f9f.js";import{u as V}from"./dataStore.57ce49f9.js";import{I as k,u as J,q as Y}from"./app.ec713cf3.js";import{R as F,a as Z}from"./requestDataAlt.6914b54e.js";import{_ as A}from"./projectSelector.ca6efaca.js";import{dayjs as x}from"./dayjs.c8159a49.js";import{N as ee}from"./nameRequestData.9b5f99d9.js";import"./use-panel.4fc4d59f.js";import"./touch.70a9dd44.js";import"./selection.6f966ca8.js";import"./QResizeObserver.87ba1c4e.js";import"./rtl.b51694b1.js";import"./localForage.d59848b7.js";import"./_commonjsHelpers.a26ce4be.js";import"./useQuerySaver.d29ff9ee.js";import"./api.0b402b2c.js";import"./index.04bc0a32.js";import"./i18n.3b5a80ec.js";import"./QTd.c1549e34.js";import"./QTable.a4288514.js";import"./QList.be5fb962.js";import"./QMarkupTable.ce5d83dc.js";import"./QSelect.5872e32d.js";import"./QChip.1fd9b058.js";import"./QMenu.fa26a79f.js";import"./position-engine.4c646f66.js";import"./use-fullscreen.cd71f547.js";import"./QTooltip.31f2a4b1.js";import"./workday.d2daefd5.js";import"./syncEmployeeWithWorkday.2a2652fa.js";import"./workdayAPI.5e988549.js";import"./dataStore.debf7de5.js";const te=g({props:{},components:{RequestDataTable:F,projectSelector:A},setup(e){const t=P(),u=k(),i=w(null),{getSelectedProject:c}=C(u),{getOpenRequest:d,fetchOpenRequest:a,fetchAllOpenRequest:s}=V(),n=b(()=>c.value?c.value[3]:null),p=b(()=>d(n.value).sort((r,f)=>r[1].$d<f[1].$d?1:-1));async function m(r){t.loading.show(),n.value?await a({projectId:n.value,refresh:r}):await s({refresh:r}),t.loading.hide()}return m(!1),{openRequests:p,projectFilter:i,loadData:m}}}),oe={class:"row items-center"},ae={class:"col-12 col-md-4"};function se(e,t,u,i,c,d){const a=_("projectSelector"),s=_("request-data-table");return v(),D("div",null,[o(T,{flat:""},{default:l(()=>[o(Q,null,{default:l(()=>[$("div",oe,[$("div",ae,[o(a,{dense:""})])])]),_:1})]),_:1}),o(s,{requests:e.openRequests,status:"Open",onRefreshData:t[0]||(t[0]=n=>e.loadData(!0))},null,8,["requests"])])}var ne=j(te,[["render",se]]);const re=g({props:{},components:{RequestDataTable:F,projectSelector:A},setup(e){const t=P(),u=E(),i=k(),c=w(null),{getSelectedProject:d}=C(i),{getPendingRequest:a,fetchPendingRequest:s,fetchAllPendingRequest:n}=V(),p=b(()=>d.value?d.value[3]:null),m=b(()=>a(p.value).sort((f,h)=>f[1].$d<h[1].$d?1:-1));async function r(f){t.loading.show(),p.value?await s({projectId:p.value,refresh:f}):await n({refresh:f}),t.loading.hide()}return K(()=>u.from,f=>{f.name==="new-request"&&(p.value?s({projectId:p.value,refresh:!0}):n({refresh:!0}))}),r(!1),{pendingRequests:m,projectFilter:c,loadData:r}}}),le={class:"row items-center"},ue={class:"col-12 col-md-4"};function ce(e,t,u,i,c,d){const a=_("projectSelector"),s=_("request-data-table");return v(),D("div",null,[o(T,{flat:""},{default:l(()=>[o(Q,null,{default:l(()=>[$("div",le,[$("div",ue,[o(a,{dense:""})])])]),_:1})]),_:1}),o(s,{requests:e.pendingRequests,status:"Pending",onRefreshData:t[0]||(t[0]=n=>e.loadData(!0))},null,8,["requests"])])}var de=j(re,[["render",ce]]);const ie=g({props:{},components:{RequestDataTableAlt:Z,projectSelector:A},setup(e){const t=P(),u=k(),i=w(null),{getSelectedProject:c}=C(u),{getClosedRequest:d,fetchClosedRequest:a,fetchAllClosedRequest:s}=V(),n=b(()=>c.value?c.value[3]:null),p=b(()=>d(n.value).sort((r,f)=>r[1].$d<f[1].$d?1:-1));async function m(r){t.loading.show(),n.value?await a({projectId:n.value,refresh:r}):await s({refresh:r}),t.loading.hide()}return m(),{closedRequests:p,projectFilter:i,loadData:m}}}),pe={class:"row items-center"},me={class:"col-12 col-md-4"};function fe(e,t,u,i,c,d){const a=_("projectSelector"),s=_("request-data-table-alt");return v(),D("div",null,[o(T,{flat:""},{default:l(()=>[o(Q,null,{default:l(()=>[$("div",pe,[$("div",me,[o(a,{dense:""})])])]),_:1})]),_:1}),o(s,{requests:e.closedRequests,status:"Completed",onRefreshData:t[0]||(t[0]=n=>e.loadData(!0))},null,8,["requests"])])}var _e=j(ie,[["render",fe]]);const qe=g({props:{},components:{NameRequestDataTable:ee,projectSelector:A},setup(e){const t=P(),u=k(),{capitalize:i}=M,c=w(null),{userData:d}=J(),{getSelectedProject:a}=C(u),{getNameRequest:s,fetchAllNameRequest:n,removeData:p,fetchNameRequest:m}=V(),r=b(()=>a.value?a.value[3]:null),f=b(()=>s(r.value).sort((q,R)=>q[1].$d<R[1].$d?1:-1));async function h(q){t.loading.show(),r.value?await m({projectId:r.value,refresh:q}):await n({refresh:q}),t.loading.hide()}function B(q){return`${i(q[6].toLowerCase())} ${i(q[7].toLowerCase())}`}async function I(q){t.dialog({title:"Confirm",message:`Are you sure you want to remove ${B(q)} from request# ${q[18]}?`,cancel:!0,persistent:!0}).onOk(async()=>{try{const{data:R}=await Y.upsertRecordsXML({to:"bsg4yb4wa",data:[{3:{value:q[3]},11:{value:!0},12:{value:x().tz("America/Chicago")},13:{value:`${d[35]} ${d[37]}`}}],fieldsToReturn:[15],formatObject:15});p({type:"nameRequest",key:R[0][15][38],item:R[0][15],storageKey:"storageNameRequest"})}catch(R){t.notify({type:"negative",message:"Cannot remove name request"}),console.log(R)}})}return h(),{nameRequests:f,projectFilter:c,removeName:I,loadData:h}}}),$e={class:"row items-center"},ve={class:"col-12 col-md-4"};function be(e,t,u,i,c,d){const a=_("projectSelector"),s=_("name-request-data-table");return v(),D("div",null,[o(T,{flat:""},{default:l(()=>[o(Q,null,{default:l(()=>[$("div",$e,[$("div",ve,[o(a,{dense:""})])])]),_:1})]),_:1}),o(s,{requests:e.nameRequests,status:"Named",onRemoveName:e.removeName,onRefreshData:t[0]||(t[0]=n=>e.loadData(!0))},null,8,["requests","onRemoveName"])])}var Re=j(qe,[["render",be]]);const ge=g({name:"Requests",components:{OpenTab:ne,PendingTab:de,CompleteTab:_e,NamesTab:Re},setup(){const e=W(),t=w(0);function u(){e.push({name:"new-request"})}return{tab:t,addNewRequest:u}}}),we={class:"q-pa-md"};function je(e,t,u,i,c,d){const a=_("open-tab"),s=_("pending-tab"),n=_("names-tab"),p=_("complete-tab");return v(),y(H,{style:{"max-width":"100vw"}},{default:l(()=>[$("div",we,[o(G,{class:"bg-info text-white shadow-2 rounded-borders"},{default:l(()=>[o(L,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=m=>e.tab=m),"bg-color":"none","indicator-color":"accent",dense:e.$q.screen.lt.md},{default:l(()=>[o(S,{name:0,label:e.$q.screen.gt.xs?"Open Requests":"Open"},null,8,["label"]),e.$q.screen.gt.sm?(v(),y(S,{key:0,name:1,label:e.$q.screen.gt.xs?"Pending Requests":"Pending"},null,8,["label"])):O("",!0),e.$can("read","nameRequests")?(v(),y(S,{key:1,name:2,label:e.$q.screen.gt.xs?"Named Requests":"Named"},null,8,["label"])):O("",!0),e.$q.screen.gt.sm?(v(),y(S,{key:2,name:3,label:e.$q.screen.gt.xs?"Completed Requests":"Completed"},null,8,["label"])):O("",!0)]),_:1},8,["modelValue","dense"]),o(z),o(X,{dense:"",color:"accent",icon:"add",label:e.$q.screen.lt.md?"Add New":"Add New Request",onClick:e.addNewRequest},null,8,["label","onClick"])]),_:1}),o(U,{modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=m=>e.tab=m),animated:""},{default:l(()=>[o(N,{name:0},{default:l(()=>[o(a)]),_:1}),o(N,{name:1},{default:l(()=>[o(s)]),_:1}),o(N,{name:2},{default:l(()=>[o(n)]),_:1}),o(N,{name:3},{default:l(()=>[o(p)]),_:1})]),_:1},8,["modelValue"])])]),_:1})}var ut=j(ge,[["render",je]]);export{ut as default};
