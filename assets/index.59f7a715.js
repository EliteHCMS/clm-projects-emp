import{_ as A,r as g,bX as L,c as n,b7 as y,B as Q,as as B,bt as i,E as a,d as r,cV as E,cW as x,az as T,ae as k,cX as N}from"./index.8838c464.js";import{Q as F}from"./QPage.49220ad5.js";import{u as X}from"./use-quasar.ed4be5d9.js";import{c as $}from"./app.42c36b1f.js";import"./dayjs.106d80ab.js";import{u as z}from"./dataStore.3ad5bd5e.js";import{P as U}from"./projectPipeline.b8321cfc.js";import{_ as W}from"./projectSelector.5f0831d7.js";import"./_commonjsHelpers.a26ce4be.js";import"./localForage.ca6e9d39.js";import"./index.04bc0a32.js";import"./i18n.c69e89dd.js";import"./QInnerLoading.ca28e90a.js";import"./QTable.2b553278.js";import"./QList.43880dff.js";import"./QMarkupTable.8c4a6d35.js";import"./QSelect.78b00ca7.js";import"./QChip.5ba75959.js";import"./QMenu.b8edc490.js";import"./position-engine.cba8bd09.js";import"./selection.26380b58.js";import"./rtl.b51694b1.js";import"./use-fullscreen.abb80350.js";import"./QTr.1a2ec5e9.js";import"./QTd.1bc00af2.js";import"./export-file.dc78ba05.js";const G={name:"Pipeline",components:{ProjectPipelineTable:U,projectSelector:W},setup(){const p=X(),l=$(),h=g(null),o=g(""),{getSelectedProject:d}=L(l),{fetchAllDeployments:v,fetchDeployments:u,fetchAllInProcess:m,fetchInProcess:c,fetchAllPending:j,fetchPending:q,getDeployments:P,getInProcess:D,getPending:b}=z(),s=n(()=>d.value?d.value[3]:null),C=n(()=>P(s.value).filter(e=>e[20]==="Complete")),S=n(()=>{const e=[];return P(s.value).forEach(t=>{t[31].toLowerCase().includes(o.value.toLowerCase())&&e.push(t)}),e}),I=n(()=>{const e=[];return b(s.value).forEach(t=>{t[25].toLowerCase().includes(o.value.toLowerCase())&&e.push(t)}),e}),R=n(()=>{const e=[];return D(s.value).forEach(t=>{t[39].toLowerCase().includes(o.value.toLowerCase())&&e.push(t)}),e}),V=n(()=>R.value.concat(I.value.concat(S.value)));async function w(e){if(p.loading.show(),s.value){const t=u({projectId:s.value,refresh:e}),f=c({projectId:s.value,refresh:e}),_=q({projectId:s.value,refresh:e});await t,await f,await _}else{const t=v({refresh:e}),f=m({refresh:e}),_=j({refresh:e});await t,await f,await _}p.loading.hide()}return w(),{projectFilter:h,arrived:C,allPipeline:V,search:o,loadData:w}}},H={class:"q-pt-sm"},J={class:"text-h5 text-dark"},K={class:"text-body2 text-italic q-ml-sm"},M=a("div",{class:"text-subtitle2 text-accent"},"The following people are currently in process or deployed for your job site(s).",-1),O={class:"row items-center"},Y={class:"col-12 col-md-3 q-px-sm"},Z={class:"col-12 col-md-3 q-px-sm"};function ee(p,l,h,o,d,v){const u=y("projectSelector"),m=y("project-pipeline-table");return Q(),B(F,{style:{"max-width":"100vw"}},{default:i(()=>[a("div",H,[r(E,{flat:""},{default:i(()=>[r(x,{class:"q-pb-none"},{default:i(()=>[a("div",J,[T(" Staffing Pipeline "),a("span",K,"("+k(o.allPipeline.length)+" total)",1)]),M]),_:1}),r(x,null,{default:i(()=>[a("div",O,[a("div",Y,[r(u,{dense:""})]),a("div",Z,[r(N,{dense:"",modelValue:o.search,"onUpdate:modelValue":l[0]||(l[0]=c=>o.search=c),label:"Search"},null,8,["modelValue"])])])]),_:1})]),_:1}),r(m,{rows:o.allPipeline,onRefreshData:l[1]||(l[1]=c=>o.loadData(!0))},null,8,["rows"])])]),_:1})}var Ce=A(G,[["render",ee]]);export{Ce as default};
