import{Q as O}from"./QTd.4b54dba6.js";import{Q as N}from"./QTable.fc5ec28f.js";import{a4 as T,c1 as b,aK as w,z as C,am as Q,G as x,a6 as n,r as v,w as A,c as S,A as D,d as h,bh as _,C as k,aa as I}from"./index.8711df70.js";import{u as P,r as y}from"./quickbase.499e5b9c.js";import{a as R}from"./QSelect.2e2ba622.js";import{dayjs as U}from"./dayjs.fe5cdf43.js";import"./QList.0e2d550a.js";import"./QMarkupTable.a214d35f.js";import"./use-fullscreen.19506750.js";import"./_commonjsHelpers.dfee5925.js";import"./localForage.b0ae5bd2.js";import"./index.7dbe61ef.js";import"./i18n.f26f17a0.js";import"./api.5f4dd7d3.js";import"./QChip.f7fb64b8.js";import"./QMenu.cd0660d8.js";import"./position-engine.869d590d.js";import"./selection.4fc0dc18.js";import"./rtl.65b79c69.js";const V={__name:"officeSelector",props:{can:{type:String,default:null}},setup(g){const r=g,{can:c}=T(r),i=P(),f=y(),{userOffices:a,primaryOffice:e}=b(i),{setSelectedOffice:t}=f,{getSelectedOffice:o}=b(f);w(()=>{t(e.value)}),o.value||t(e.value);const m=s=>{t(s)};return(s,u)=>(C(),Q(R,x({"model-value":n(o),options:n(a)(n(c))},s.$attrs,{"onUpdate:modelValue":m,label:"Office","option-label":"11","option-value":"8",clearable:""}),null,16,["model-value","options"]))}},$={class:"q-pa-md"},oe={__name:"index",setup(g){const r=y(),{fetchSelfCheckIns:c,fetchAllSelfCheckIns:i}=r,{getSelfCheckIns:f,getSelectedOffice:a}=b(r),e=v(a.value?a.value[8]:null),t=v({sortBy:"13",descending:!1,rowsPerPage:100});e.value?(c({officeId:e.value}),fetch({action:"Self Check-Ins"})):i(),A(a,()=>{e.value=a.value?a.value[8]:null,e.value?c({officeId:e.value}):i()});const o=v(new Date),m=setInterval(()=>{o.value=new Date},1e3);w(()=>{clearInterval(m)});const s=[{name:"timeCheckIn",align:"left",label:"Time Check-In",field:"13",sortable:!1},{name:"name",align:"left",label:"Name",field:"17",sortable:!1},{name:"phoneNumber",align:"center",label:"Phone Number",field:"6",sortable:!1},{name:"reason",align:"center",label:"Reason",field:"10",sortable:!1},{name:"status",align:"center",label:"Status",field:"15",sortable:!1},{name:"task",align:"center",label:"Task",field:"27",sortable:!1}],u=S(()=>f.value(e.value).sort((l,p)=>t.value.descending?l[13].isBefore(p[13]):l[13].isAfter(p[13]))),B=S(()=>u.value.map(l=>U(o.value).to(l[13])));return(l,p)=>(C(),D("div",$,[h(V,{can:"read"}),h(N,{dense:l.$q.screen.lt.md,title:"Self Check Ins",rows:n(u),columns:s,pagination:t.value,"row-key":"3"},{"body-cell-timeCheckIn":_(d=>[h(O,{props:d},{default:_(()=>[k("div",null,I(d.value.format("h:mm:ss A")),1),k("div",null,I(n(B)[d.rowIndex]),1)]),_:2},1032,["props"])]),_:1},8,["dense","rows","pagination"])]))}};export{oe as default};
