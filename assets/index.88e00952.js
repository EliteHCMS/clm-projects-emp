import{bX as He,r as w,c as I,w as C,aR as Qt,aV as Bt,aT as $t,o as St,b$ as Vt,h as k,bY as Rt,cJ as Ht,dm as me,cK as Se,dn as Ue,aQ as X,cE as Pe,ce as jt,cp as Ft,g as je,i as Ut,bZ as xe,b_ as zt,cM as Wt,cA as Kt,dj as Yt,a8 as G,N as Gt,W as Xt,b as Pt,Z as Zt,l as Jt,Y as ye,bV as qe,A as x,B as F,aq as A,br as g,D as Te,d as b,ck as ea,F as Ie,b4 as De,ax as j,ac as Y,dd as Ae,G as pe,bQ as ke,ar as V,bU as ta,bT as aa,cS as ze,bW as re,E as We,bN as Ne,bt as ee,bR as le,bP as K,dc as Ke,cy as oa,cT as Ye,cU as Ce,cV as na}from"./index.bf17245a.js";import{Q as ra,a as Ge}from"./QHeader.5e4d8b94.js";import{Q as Ee}from"./QList.1fa31e8e.js";import{Q as la}from"./QMenu.47f93fbb.js";import{Q as sa}from"./QToolbar.5993aab7.js";import{Q as Xe}from"./QSelect.971d139a.js";import{Q as ua,a as ia}from"./QDrawer.e4e7911d.js";import{Q as ca,a as da}from"./QLayout.a8125af3.js";import{Q as fa}from"./QResizeObserver.b01a3b2e.js";import{C as ue}from"./ClosePopup.a7e78858.js";import{u as va}from"./use-quasar.6672c883.js";import{Q as ma}from"./QImg.3ba5b666.js";import{c as xt,i as J,u as pa}from"./app.b3693110.js";import{p as ya}from"./VueTelInput.e74c521e.js";import{c as ha}from"./array.59f93f43.js";import{u as ga}from"./i18n.39aebddb.js";import{u as _a}from"./vee-validate.esm.6b0e4880.js";import{_ as ba}from"./officeSelector.9b4b7021.js";import"./position-engine.dab84a66.js";import"./selection.e291aa76.js";import"./QChip.e46b489a.js";import"./rtl.b51694b1.js";import"./TouchPan.c196f137.js";import"./touch.3df10340.js";import"./_commonjsHelpers.a26ce4be.js";import"./dayjs.c0ffe39c.js";import"./localForage.c61a1bee.js";import"./api.97653fa6.js";import"./index.04bc0a32.js";const{passive:te}=Ht;var Nt=He({name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:{default:void 0},initialIndex:Number,disable:Boolean,reverse:Boolean},emits:["load"],setup(e,{slots:t,emit:a}){const o=w(!1),n=w(!0),r=w(null),s=w(null);let i=e.initialIndex||0,c,d;const u=I(()=>"q-infinite-scroll__loading"+(o.value===!0?"":" invisible"));function v(){if(e.disable===!0||o.value===!0||n.value===!1)return;const S=me(c),T=Se(c),H=Ue(c);e.reverse===!1?Math.round(T+H+e.offset)>=Math.round(S)&&l():Math.round(T)<=e.offset&&l()}function l(){if(e.disable===!0||o.value===!0||n.value===!1)return;i++,o.value=!0;const S=me(c);a("load",i,T=>{n.value===!0&&(o.value=!1,X(()=>{if(e.reverse===!0){const H=me(c),z=Se(c),ce=H-S;Pe(c,z+ce)}T===!0?P():r.value&&r.value.closest("body")&&d()}))})}function f(){i=0}function h(){n.value===!1&&(n.value=!0,c.addEventListener("scroll",d,te)),v()}function P(){n.value===!0&&(n.value=!1,o.value=!1,c.removeEventListener("scroll",d,te),d!==void 0&&d.cancel!==void 0&&d.cancel())}function $(){if(c&&n.value===!0&&c.removeEventListener("scroll",d,te),c=jt(r.value,e.scrollTarget),n.value===!0){if(c.addEventListener("scroll",d,te),e.reverse===!0){const S=me(c),T=Ue(c);Pe(c,S-T)}v()}}function E(S){i=S}function L(S){S=parseInt(S,10);const T=d;d=S<=0?v:Ft(v,isNaN(S)===!0?100:S),c&&n.value===!0&&(T!==void 0&&c.removeEventListener("scroll",T,te),c.addEventListener("scroll",d,te))}function D(S){if(N.value===!0){if(s.value===null){S!==!0&&X(()=>{D(!0)});return}const T=`${o.value===!0?"un":""}pauseAnimations`;Array.from(s.value.getElementsByTagName("svg")).forEach(H=>{H[T]()})}}const N=I(()=>e.disable!==!0&&n.value===!0);C([o,N],()=>{D()}),C(()=>e.disable,S=>{S===!0?P():h()}),C(()=>e.reverse,()=>{o.value===!1&&n.value===!0&&v()}),C(()=>e.scrollTarget,$),C(()=>e.debounce,L);let _=!1;Qt(()=>{_!==!1&&c&&Pe(c,_)}),Bt(()=>{_=c?Se(c):!1}),$t(()=>{n.value===!0&&c.removeEventListener("scroll",d,te)}),St(()=>{L(e.debounce),$(),o.value===!1&&D()});const q=je();return Object.assign(q.proxy,{poll:()=>{d!==void 0&&d()},trigger:l,stop:P,reset:f,resume:h,setIndex:E}),()=>{const S=Vt(t.default,[]);return N.value===!0&&S[e.reverse===!1?"push":"unshift"](k("div",{ref:s,class:u.value},Rt(t.loading))),k("div",{class:"q-infinite-scroll",ref:r},S)}}}),wa=He({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:t,emit:a}){const{proxy:{$q:o}}=je(),n=Ut(zt,xe);if(n===xe)return console.error("QFooter needs to be child of QLayout"),xe;const r=w(parseInt(e.heightHint,10)),s=w(!0),i=w(Wt.value===!0||n.isContainer.value===!0?0:window.innerHeight),c=I(()=>e.reveal===!0||n.view.value.indexOf("F")>-1||o.platform.is.ios&&n.isContainer.value===!0),d=I(()=>n.isContainer.value===!0?n.containerHeight.value:i.value),u=I(()=>{if(e.modelValue!==!0)return 0;if(c.value===!0)return s.value===!0?r.value:0;const _=n.scroll.value.position+d.value+r.value-n.height.value;return _>0?_:0}),v=I(()=>e.modelValue!==!0||c.value===!0&&s.value!==!0),l=I(()=>e.modelValue===!0&&v.value===!0&&e.reveal===!0),f=I(()=>"q-footer q-layout__section--marginal "+(c.value===!0?"fixed":"absolute")+"-bottom"+(e.bordered===!0?" q-footer--bordered":"")+(v.value===!0?" q-footer--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus"+(c.value!==!0?" hidden":""):"")),h=I(()=>{const _=n.rows.value.bottom,q={};return _[0]==="l"&&n.left.space===!0&&(q[o.lang.rtl===!0?"right":"left"]=`${n.left.size}px`),_[2]==="r"&&n.right.space===!0&&(q[o.lang.rtl===!0?"left":"right"]=`${n.right.size}px`),q});function P(_,q){n.update("footer",_,q)}function $(_,q){_.value!==q&&(_.value=q)}function E({height:_}){$(r,_),P("size",_)}function L(){if(e.reveal!==!0)return;const{direction:_,position:q,inflectionPoint:S}=n.scroll.value;$(s,_==="up"||q-S<100||n.height.value-d.value-q-r.value<300)}function D(_){l.value===!0&&$(s,!0),a("focusin",_)}C(()=>e.modelValue,_=>{P("space",_),$(s,!0),n.animate()}),C(u,_=>{P("offset",_)}),C(()=>e.reveal,_=>{_===!1&&$(s,e.modelValue)}),C(s,_=>{n.animate(),a("reveal",_)}),C([r,n.scroll,n.height],L),C(()=>o.screen.height,_=>{n.isContainer.value!==!0&&$(i,_)});const N={};return n.instances.footer=N,e.modelValue===!0&&P("size",r.value),P("space",e.modelValue),P("offset",u.value),$t(()=>{n.instances.footer===N&&(n.instances.footer=void 0,P("size",0),P("offset",0),P("space",!1))}),()=>{const _=Kt(t.default,[k(fa,{debounce:0,onResize:E})]);return e.elevated===!0&&_.push(k("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),k("footer",{class:f.value,style:h.value,onFocusin:D},_)}}}),Oa=He({name:"QChatMessage",props:{sent:Boolean,label:String,bgColor:String,textColor:String,name:String,avatar:String,text:Array,stamp:String,size:String,labelHtml:Boolean,nameHtml:Boolean,textHtml:Boolean,stampHtml:Boolean},setup(e,{slots:t}){const a=I(()=>e.sent===!0?"sent":"received"),o=I(()=>`q-message-text-content q-message-text-content--${a.value}`+(e.textColor!==void 0?` text-${e.textColor}`:"")),n=I(()=>`q-message-text q-message-text--${a.value}`+(e.bgColor!==void 0?` text-${e.bgColor}`:"")),r=I(()=>"q-message-container row items-end no-wrap"+(e.sent===!0?" reverse":"")),s=I(()=>e.size!==void 0?`col-${e.size}`:""),i=I(()=>({msg:e.textHtml===!0?"innerHTML":"textContent",stamp:e.stampHtml===!0?"innerHTML":"textContent",name:e.nameHtml===!0?"innerHTML":"textContent",label:e.labelHtml===!0?"innerHTML":"textContent"}));function c(u){return t.stamp!==void 0?[u,k("div",{class:"q-message-stamp"},t.stamp())]:e.stamp?[u,k("div",{class:"q-message-stamp",[i.value.stamp]:e.stamp})]:[u]}function d(u,v){const l=v===!0?u.length>1?f=>f:f=>k("div",[f]):f=>k("div",{[i.value.msg]:f});return u.map((f,h)=>k("div",{key:h,class:n.value},[k("div",{class:o.value},c(l(f)))]))}return()=>{const u=[];t.avatar!==void 0?u.push(t.avatar()):e.avatar!==void 0&&u.push(k("img",{class:`q-message-avatar q-message-avatar--${a.value}`,src:e.avatar,"aria-hidden":"true"}));const v=[];t.name!==void 0?v.push(k("div",{class:`q-message-name q-message-name--${a.value}`},t.name())):e.name!==void 0&&v.push(k("div",{class:`q-message-name q-message-name--${a.value}`,[i.value.name]:e.name})),t.default!==void 0?v.push(d(Yt(t.default()),!0)):e.text!==void 0&&v.push(d(e.text)),u.push(k("div",{class:s.value},v));const l=[];return t.label!==void 0?l.push(k("div",{class:"q-message-label"},t.label())):e.label!==void 0&&l.push(k("div",{class:"q-message-label",[i.value.label]:e.label})),l.push(k("div",{class:r.value},u)),k("div",{class:`q-message q-message-${a.value}`},l)}}}),Ze;const ie=typeof window!="undefined",$a=e=>typeof e=="function",Sa=e=>typeof e=="string",U=()=>{},Me=ie&&((Ze=window==null?void 0:window.navigator)==null?void 0:Ze.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Q(e){return typeof e=="function"?e():G(e)}function Ct(e,t){function a(...o){return new Promise((n,r)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(n).catch(r)})}return a}function Pa(e,t={}){let a,o,n=U;const r=i=>{clearTimeout(i),n(),n=U};return i=>{const c=Q(e),d=Q(t.maxWait);return a&&r(a),c<=0||d!==void 0&&d<=0?(o&&(r(o),o=null),Promise.resolve(i())):new Promise((u,v)=>{n=t.rejectOnCancel?v:u,d&&!o&&(o=setTimeout(()=>{a&&r(a),o=null,u(i())},d)),a=setTimeout(()=>{o&&r(o),o=null,u(i())},c)})}}function xa(e,t=!0,a=!0,o=!1){let n=0,r,s=!0,i=U,c;const d=()=>{r&&(clearTimeout(r),r=void 0,i(),i=U)};return v=>{const l=Q(e),f=Date.now()-n,h=()=>c=v();return d(),l<=0?(n=Date.now(),h()):(f>l&&(a||!s)?(n=Date.now(),h()):t&&(c=new Promise((P,$)=>{i=o?$:P,r=setTimeout(()=>{n=Date.now(),s=!0,P(h()),d()},Math.max(0,l-f))})),!a&&!r&&(r=setTimeout(()=>s=!0,l)),s=!1,c)}}const Z={mounted:"mounted",updated:"updated",unmounted:"unmounted"};function Na(e){return e}function ae(e){return Gt()?(Xt(e),!0):!1}function Ca(e,t=200,a={}){return Ct(Pa(t,a),e)}function Ea(e,t=200,a=!1,o=!0,n=!1){return Ct(xa(t,a,o,n),e)}function qa(e){return typeof e=="function"?I(e):w(e)}function Ta(e,t=!0){je()?St(e):t?e():X(e)}function Ia(e,t=1e3,a={}){const{immediate:o=!0,immediateCallback:n=!1}=a;let r=null;const s=w(!1);function i(){r&&(clearInterval(r),r=null)}function c(){s.value=!1,i()}function d(){const u=Q(t);u<=0||(s.value=!0,n&&e(),i(),r=setInterval(e,u))}if(o&&ie&&d(),Pt(t)||$a(t)){const u=C(t,()=>{s.value&&ie&&d()});ae(u)}return ae(c),{isActive:s,pause:c,resume:d}}const Da=ie?window:void 0,Le=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Qe="__vueuse_ssr_handlers__";Le[Qe]=Le[Qe]||{};Le[Qe];function Aa(e,t={}){const{immediate:a=!0,window:o=Da}=t,n=w(!1);let r=0,s=null;function i(u){if(!n.value||!o)return;const v=u-r;e({delta:v,timestamp:u}),r=u,s=o.requestAnimationFrame(i)}function c(){!n.value&&o&&(n.value=!0,s=o.requestAnimationFrame(i))}function d(){n.value=!1,s!=null&&o&&(o.cancelAnimationFrame(s),s=null)}return a&&c(),ae(d),{isActive:Zt(n),pause:d,resume:c}}var ka=Object.defineProperty,Je=Object.getOwnPropertySymbols,Ma=Object.prototype.hasOwnProperty,La=Object.prototype.propertyIsEnumerable,et=(e,t,a)=>t in e?ka(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Qa=(e,t)=>{for(var a in t||(t={}))Ma.call(t,a)&&et(e,a,t[a]);if(Je)for(var a of Je(t))La.call(t,a)&&et(e,a,t[a]);return e};function Ba(e={}){const{controls:t=!1,interval:a="requestAnimationFrame"}=e,o=w(new Date),n=()=>o.value=new Date,r=a==="requestAnimationFrame"?Aa(n,{immediate:!0}):Ia(n,a,{immediate:!0});return t?Qa({now:o},r):o}var tt;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(tt||(tt={}));var Va=Object.defineProperty,he=Object.getOwnPropertySymbols,Et=Object.prototype.hasOwnProperty,qt=Object.prototype.propertyIsEnumerable,at=(e,t,a)=>t in e?Va(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Ra=(e,t)=>{for(var a in t||(t={}))Et.call(t,a)&&at(e,a,t[a]);if(he)for(var a of he(t))qt.call(t,a)&&at(e,a,t[a]);return e},Ha=(e,t)=>{var a={};for(var o in e)Et.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(e!=null&&he)for(var o of he(e))t.indexOf(o)<0&&qt.call(e,o)&&(a[o]=e[o]);return a};const ja=[{max:6e4,value:1e3,name:"second"},{max:276e4,value:6e4,name:"minute"},{max:72e6,value:36e5,name:"hour"},{max:5184e5,value:864e5,name:"day"},{max:24192e5,value:6048e5,name:"week"},{max:28512e6,value:2592e6,name:"month"},{max:1/0,value:31536e6,name:"year"}],Fa={justNow:"just now",past:e=>e.match(/\d/)?`${e} ago`:e,future:e=>e.match(/\d/)?`in ${e}`:e,month:(e,t)=>e===1?t?"last month":"next month":`${e} month${e>1?"s":""}`,year:(e,t)=>e===1?t?"last year":"next year":`${e} year${e>1?"s":""}`,day:(e,t)=>e===1?t?"yesterday":"tomorrow":`${e} day${e>1?"s":""}`,week:(e,t)=>e===1?t?"last week":"next week":`${e} week${e>1?"s":""}`,hour:e=>`${e} hour${e>1?"s":""}`,minute:e=>`${e} minute${e>1?"s":""}`,second:e=>`${e} second${e>1?"s":""}`,invalid:""},Ua=e=>e.toISOString().slice(0,10);function za(e,t={}){const{controls:a=!1,updateInterval:o=3e4}=t,n=Ba({interval:o,controls:!0}),{now:r}=n,s=Ha(n,["now"]),i=I(()=>Wa(new Date(Q(e)),t,G(r.value)));return a?Ra({timeAgo:i},s):i}function Wa(e,t={},a=Date.now()){var o;const{max:n,messages:r=Fa,fullDateFormatter:s=Ua,units:i=ja,showSecond:c=!1,rounding:d="round"}=t,u=typeof d=="number"?$=>+$.toFixed(d):Math[d],v=+a-+e,l=Math.abs(v);function f($,E){return u(Math.abs($)/E.value)}function h($,E){const L=f($,E),D=$>0,N=P(E.name,L,D);return P(D?"past":"future",N,D)}function P($,E,L){const D=r[$];return typeof D=="function"?D(E,L):D.replace("{0}",E.toString())}if(l<6e4&&!c)return r.justNow;if(typeof n=="number"&&l>n)return s(new Date(e));if(typeof n=="string"){const $=(o=i.find(E=>E.name===n))==null?void 0:o.max;if($&&l>$)return s(new Date(e))}for(const[$,E]of i.entries()){if(f(v,E)<=0&&i[$-1])return h(v,i[$-1]);if(l<E.max)return h(v,E)}return r.invalid}var Ka=Object.defineProperty,ot=Object.getOwnPropertySymbols,Ya=Object.prototype.hasOwnProperty,Ga=Object.prototype.propertyIsEnumerable,nt=(e,t,a)=>t in e?Ka(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Xa=(e,t)=>{for(var a in t||(t={}))Ya.call(t,a)&&nt(e,a,t[a]);if(ot)for(var a of ot(t))Ga.call(t,a)&&nt(e,a,t[a]);return e};const Za={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};Xa({linear:Na},Za);function B(e){var t;const a=Q(e);return(t=a==null?void 0:a.$el)!=null?t:a}const oe=ie?window:void 0;function R(...e){let t,a,o,n;if(Sa(e[0])||Array.isArray(e[0])?([a,o,n]=e,t=oe):[t,a,o,n]=e,!t)return U;Array.isArray(a)||(a=[a]),Array.isArray(o)||(o=[o]);const r=[],s=()=>{r.forEach(u=>u()),r.length=0},i=(u,v,l,f)=>(u.addEventListener(v,l,f),()=>u.removeEventListener(v,l,f)),c=C(()=>[B(t),Q(n)],([u,v])=>{s(),u&&r.push(...a.flatMap(l=>o.map(f=>i(u,l,f,v))))},{immediate:!0,flush:"post"}),d=()=>{c(),s()};return ae(d),d}let rt=!1;function lt(e,t,a={}){const{window:o=oe,ignore:n=[],capture:r=!0,detectIframe:s=!1}=a;if(!o)return;Me&&!rt&&(rt=!0,Array.from(o.document.body.children).forEach(l=>l.addEventListener("click",U)));let i=!0;const c=l=>n.some(f=>{if(typeof f=="string")return Array.from(o.document.querySelectorAll(f)).some(h=>h===l.target||l.composedPath().includes(h));{const h=B(f);return h&&(l.target===h||l.composedPath().includes(h))}}),u=[R(o,"click",l=>{const f=B(e);if(!(!f||f===l.target||l.composedPath().includes(f))){if(l.detail===0&&(i=!c(l)),!i){i=!0;return}t(l)}},{passive:!0,capture:r}),R(o,"pointerdown",l=>{const f=B(e);f&&(i=!l.composedPath().includes(f)&&!c(l))},{passive:!0}),s&&R(o,"blur",l=>{var f;const h=B(e);((f=o.document.activeElement)==null?void 0:f.tagName)==="IFRAME"&&!(h!=null&&h.contains(o.document.activeElement))&&t(l)})].filter(Boolean);return()=>u.forEach(l=>l())}Z.mounted+"",Z.unmounted+"";const Ja=e=>typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0;function st(...e){let t,a,o={};e.length===3?(t=e[0],a=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,a=e[0],o=e[1]):(t=e[0],a=e[1]):(t=!0,a=e[0]);const{target:n=oe,eventName:r="keydown",passive:s=!1}=o,i=Ja(t);return R(n,r,d=>{i(d)&&a(d)},s)}var eo=Object.defineProperty,ut=Object.getOwnPropertySymbols,to=Object.prototype.hasOwnProperty,ao=Object.prototype.propertyIsEnumerable,it=(e,t,a)=>t in e?eo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,oo=(e,t)=>{for(var a in t||(t={}))to.call(t,a)&&it(e,a,t[a]);if(ut)for(var a of ut(t))ao.call(t,a)&&it(e,a,t[a]);return e};Z.mounted+"";const no=500;function ct(e,t,a){var o,n;const r=I(()=>B(e));let s;function i(){s&&(clearTimeout(s),s=void 0)}function c(u){var v,l,f,h;((v=a==null?void 0:a.modifiers)==null?void 0:v.self)&&u.target!==r.value||(i(),(l=a==null?void 0:a.modifiers)!=null&&l.prevent&&u.preventDefault(),(f=a==null?void 0:a.modifiers)!=null&&f.stop&&u.stopPropagation(),s=setTimeout(()=>t(u),(h=a==null?void 0:a.delay)!=null?h:no))}const d={capture:(o=a==null?void 0:a.modifiers)==null?void 0:o.capture,once:(n=a==null?void 0:a.modifiers)==null?void 0:n.once};R(r,"pointerdown",c,d),R(r,"pointerup",i,d),R(r,"pointerleave",i,d)}Z.mounted+"";const Be=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Ve="__vueuse_ssr_handlers__";Be[Ve]=Be[Ve]||{};Be[Ve];function Tt(e,t=!1){const a=w(),o=()=>a.value=Boolean(e());return o(),Ta(o,t),a}function ro(e,t={}){const a=t?t.delayEnter:0,o=t?t.delayLeave:0,n=w(!1);let r;const s=i=>{const c=i?a:o;r&&(clearTimeout(r),r=void 0),c?r=setTimeout(()=>n.value=i,c):n.value=i};return window&&(R(e,"mouseenter",()=>s(!0),{passive:!0}),R(e,"mouseleave",()=>s(!1),{passive:!0})),n}Z.mounted+"";var dt=Object.getOwnPropertySymbols,lo=Object.prototype.hasOwnProperty,so=Object.prototype.propertyIsEnumerable,uo=(e,t)=>{var a={};for(var o in e)lo.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(e!=null&&dt)for(var o of dt(e))t.indexOf(o)<0&&so.call(e,o)&&(a[o]=e[o]);return a};function io(e,t,a={}){const o=a,{window:n=oe}=o,r=uo(o,["window"]);let s;const i=Tt(()=>n&&"ResizeObserver"in n),c=()=>{s&&(s.disconnect(),s=void 0)},d=C(()=>B(e),v=>{c(),i.value&&n&&v&&(s=new ResizeObserver(t),s.observe(v,r))},{immediate:!0,flush:"post"}),u=()=>{c(),d()};return ae(u),{isSupported:i,stop:u}}function co(e,t={width:0,height:0},a={}){const{window:o=oe,box:n="content-box"}=a,r=I(()=>{var c,d;return(d=(c=B(e))==null?void 0:c.namespaceURI)==null?void 0:d.includes("svg")}),s=w(t.width),i=w(t.height);return io(e,([c])=>{const d=n==="border-box"?c.borderBoxSize:n==="content-box"?c.contentBoxSize:c.devicePixelContentBoxSize;if(o&&r.value){const u=B(e);if(u){const v=o.getComputedStyle(u);s.value=parseFloat(v.width),i.value=parseFloat(v.height)}}else if(d){const u=Array.isArray(d)?d:[d];s.value=u.reduce((v,{inlineSize:l})=>v+l,0),i.value=u.reduce((v,{blockSize:l})=>v+l,0)}else s.value=c.contentRect.width,i.value=c.contentRect.height},a),C(()=>B(e),c=>{s.value=c?t.width:0,i.value=c?t.height:0}),{width:s,height:i}}Z.mounted+"";function ft(e,{window:t=oe,scrollTarget:a}={}){const o=w(!1),n=()=>{if(!t)return;const r=t.document,s=B(e);if(!s)o.value=!1;else{const i=s.getBoundingClientRect();o.value=i.top<=(t.innerHeight||r.documentElement.clientHeight)&&i.left<=(t.innerWidth||r.documentElement.clientWidth)&&i.bottom>=0&&i.right>=0}};return C(()=>B(e),()=>n(),{immediate:!0,flush:"post"}),t&&R(a||t,"scroll",n,{capture:!1,passive:!0}),o}Z.mounted+"";const vt=1;function Re(e,t={}){const{throttle:a=0,idle:o=200,onStop:n=U,onScroll:r=U,offset:s={left:0,right:0,top:0,bottom:0},eventListenerOptions:i={capture:!1,passive:!0},behavior:c="auto"}=t,d=w(0),u=w(0),v=I({get(){return d.value},set(N){f(N,void 0)}}),l=I({get(){return u.value},set(N){f(void 0,N)}});function f(N,_){var q,S,T;const H=Q(e);!H||(T=H instanceof Document?document.body:H)==null||T.scrollTo({top:(q=Q(_))!=null?q:l.value,left:(S=Q(N))!=null?S:v.value,behavior:Q(c)})}const h=w(!1),P=ye({left:!0,right:!1,top:!0,bottom:!1}),$=ye({left:!1,right:!1,top:!1,bottom:!1}),E=N=>{!h.value||(h.value=!1,$.left=!1,$.right=!1,$.top=!1,$.bottom=!1,n(N))},L=Ca(E,a+o),D=N=>{const _=N.target===document?N.target.documentElement:N.target,q=_.scrollLeft;$.left=q<d.value,$.right=q>u.value,P.left=q<=0+(s.left||0),P.right=q+_.clientWidth>=_.scrollWidth-(s.right||0)-vt,d.value=q;let S=_.scrollTop;N.target===document&&!S&&(S=document.body.scrollTop),$.top=S<u.value,$.bottom=S>u.value,P.top=S<=0+(s.top||0),P.bottom=S+_.clientHeight>=_.scrollHeight-(s.bottom||0)-vt,u.value=S,h.value=!0,L(N),r(N)};return R(e,"scroll",a?Ea(D,a,!0,!1):D,i),R(e,"scrollend",E,i),{x:v,y:l,isScrolling:h,arrivedState:P,directions:$}}var fo=Object.defineProperty,vo=Object.defineProperties,mo=Object.getOwnPropertyDescriptors,mt=Object.getOwnPropertySymbols,po=Object.prototype.hasOwnProperty,yo=Object.prototype.propertyIsEnumerable,pt=(e,t,a)=>t in e?fo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,yt=(e,t)=>{for(var a in t||(t={}))po.call(t,a)&&pt(e,a,t[a]);if(mt)for(var a of mt(t))yo.call(t,a)&&pt(e,a,t[a]);return e},ho=(e,t)=>vo(e,mo(t));function ht(e,t,a={}){var o,n;const r=(o=a.direction)!=null?o:"bottom",s=ye(Re(e,ho(yt({},a),{offset:yt({[r]:(n=a.distance)!=null?n:0},a.offset)})));C(()=>s.arrivedState[r],async i=>{var c,d;if(i){const u=Q(e),v={height:(c=u==null?void 0:u.scrollHeight)!=null?c:0,width:(d=u==null?void 0:u.scrollWidth)!=null?d:0};await t(s),a.preserveScrollPosition&&u&&X(()=>{u.scrollTo({top:u.scrollHeight-v.height,left:u.scrollWidth-v.width})})}})}Z.mounted+"";function gt(e,t,a={}){const{root:o,rootMargin:n="0px",threshold:r=.1,window:s=oe}=a,i=Tt(()=>s&&"IntersectionObserver"in s);let c=U;const d=i.value?C(()=>({el:B(e),root:B(o)}),({el:v,root:l})=>{if(c(),!v)return;const f=new IntersectionObserver(t,{root:l,rootMargin:n,threshold:r});f.observe(v),c=()=>{f.disconnect(),c=U}},{immediate:!0,flush:"post"}):U,u=()=>{c(),d()};return ae(u),{isSupported:i,stop:u}}Z.mounted+"";var go=Object.defineProperty,_o=Object.defineProperties,bo=Object.getOwnPropertyDescriptors,_t=Object.getOwnPropertySymbols,wo=Object.prototype.hasOwnProperty,Oo=Object.prototype.propertyIsEnumerable,bt=(e,t,a)=>t in e?go(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,$o=(e,t)=>{for(var a in t||(t={}))wo.call(t,a)&&bt(e,a,t[a]);if(_t)for(var a of _t(t))Oo.call(t,a)&&bt(e,a,t[a]);return e},So=(e,t)=>_o(e,bo(t));Z.mounted+"";function It(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientHeight<e.scrollHeight||t.overflowY==="auto"&&e.clientWidth<e.scrollWidth)return!0;{const a=e.parentNode;return!a||a.tagName==="BODY"?!1:It(a)}}function Po(e){const t=e||window.event,a=t.target;return It(a)?!1:t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)}function xo(e,t=!1){const a=w(t);let o=null,n;C(qa(e),i=>{if(i){const c=i;n=c.style.overflow,a.value&&(c.style.overflow="hidden")}},{immediate:!0});const r=()=>{const i=Q(e);!i||a.value||(Me&&(o=R(i,"touchmove",c=>{Po(c)},{passive:!1})),i.style.overflow="hidden",a.value=!0)},s=()=>{const i=Q(e);!i||!a.value||(Me&&(o==null||o()),i.style.overflow=n,a.value=!1)};return ae(s),I({get(){return a.value},set(i){i?r():s()}})}const No=()=>{let e=!1;const t=w(!1);return(a,o)=>{if(t.value=o.value,e)return;e=!0;const n=xo(a,o.value);C(t,r=>n.value=r)}};No();var Co=Object.defineProperty,Eo=Object.defineProperties,qo=Object.getOwnPropertyDescriptors,wt=Object.getOwnPropertySymbols,To=Object.prototype.hasOwnProperty,Io=Object.prototype.propertyIsEnumerable,Ot=(e,t,a)=>t in e?Co(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Do=(e,t)=>{for(var a in t||(t={}))To.call(t,a)&&Ot(e,a,t[a]);if(wt)for(var a of wt(t))Io.call(t,a)&&Ot(e,a,t[a]);return e},Ao=(e,t)=>Eo(e,qo(t));const Dt=Jt({name:"UseTimeAgo",props:["time","updateInterval","max","fullDateFormatter","messages","showSecond"],setup(e,{slots:t}){const a=ye(za(()=>e.time,Ao(Do({},e),{controls:!0})));return()=>{if(t.default)return t.default(a)}}}),ko={class:"q-pa-md row justify-center"},Mo={class:"row justify-center q-my-md"},Lo={key:0},Qo={__name:"chatLog",props:{conversation:{type:Object,default:()=>({})}},setup(e){const t=e,a=xt(),{getMessageNotification:o}=qe(a),n=w(null),r=w([]),s=w(20),i=u=>{const v=[...r.value,...u].sort((h,P)=>new Date(h.createdAt)-new Date(P.createdAt)),l=[],f=new Map;for(const h of v)f.has(h.id)||(f.set(h.id,!0),l.push(h));t.conversation.id==="new"?r.value=[]:r.value=l},c=(u,v)=>J.getMessages({filters:{conversation:{id:u}},populate:{createdByUser:!0,contact:!0,conversation:{filters:{id:u}}},sort:"createdAt:desc",pagination:{page:v,pageSize:s.value}}).then(l=>{const f=l.data.length===0||l.data.length<s.value;return(!f||l.data.length>0)&&i(l.data),f}),d=async(u,v)=>{t.conversation.id==="new"||t.conversation.id==="placeHolder"||t.conversation.id==="no"?v(!0):c(t.conversation.id,u).then(l=>{v(l)})};return C(()=>t.conversation,async(u,v)=>{u.id!==v.id&&(r.value=[])}),C(o,()=>{o.value.conversation&&o.value.conversation.id===t.conversation.id?(i([o.value]),o.value.direction==="inbound"&&J.readConversation(t.conversation.id),X(()=>{const u=document.querySelector("#conversation-layout div.scroll");u.scrollTop=u.scrollHeight})):console.log(o.value)}),(u,v)=>(x(),F("div",ko,[(x(),A(Nt,{style:{width:"100%"},reverse:"",onLoad:d,ref_key:"messageScroll",ref:n,key:e.conversation.id},{loading:g(()=>[Te("div",Mo,[b(ea,{color:"primary",name:"dots",size:"40px"})])]),default:g(()=>[(x(!0),F(Ie,null,De(r.value,(l,f)=>(x(),F("div",{key:f},[b(Oa,{sent:l.direction==="outbound-api",name:l.direction==="inbound"?f>0&&r.value[f-1].direction==="inbound"&&r.value[f-1].conversation.name===r.value[f].conversation.name?"":e.conversation.name:l.createdByUser?l.createdByUser.firstName?f>0&&r.value[f-1].direction==="outbound-api"&&r.value[f-1].createdByUser&&`${r.value[f-1].createdByUser.firstName||""} ${r.value[f-1].createdByUser.lastName||""}`==`${l.createdByUser.firstName} ${l.createdByUser.lastName}`?"":`${l.createdByUser.firstName} ${l.createdByUser.lastName}`:f>0&&r.value[f-1].direction==="outbound-api"&&`${r.value[f-1].createdByUser&&r.value[f-1].createdByUser.username||""}`==`${l.createdByUser.username||""}`?"":`${l.createdByUser.username||""}`:"System Admin","text-color":l.direction==="outbound-api"?"white":"","bg-color":l.direction==="outbound-api"?"primary":"amber"},{stamp:g(()=>[b(G(Dt),{time:l.createdAt},{default:g(({timeAgo:h})=>[j(Y(h),1)]),_:2},1032,["time"])]),avatar:g(()=>[b(Ae,{class:pe(["q-message-avatar",{"q-message-avatar--sent":l.direction==="outbound-api","q-message-avatar--received":l.direction==="inbound"}]),color:l.direction==="outbound-api"?"primary":"amber"},{default:g(()=>[b(ke,{name:"person"})]),_:2},1032,["class","color"])]),default:g(()=>[Te("div",null,[j(Y(l.body)+" ",1),l.numMedia>0?(x(),F("div",Lo,[(x(!0),F(Ie,null,De(l.mediaUrl,(h,P)=>(x(),A(ma,{src:h,fit:"contain","spinner-color":"white",style:{height:"150px","max-width":"300px",width:"100%"},key:P},null,8,["src"]))),128))])):V("",!0)])]),_:2},1032,["sent","name","text-color","bg-color"])]))),128))]),_:1}))]))}},Bo={class:"q-pa-md",style:{height:"92vh"}},Vo={key:0,class:"text-caption"},Ro={key:0},Ho={key:1,class:"q-pa-md row justify-center text-h5"},jo={class:"text-h6"},Fo={key:0,class:"text-caption"},wn={__name:"index",setup(e){va();const t=ta(),a=aa(),o=xt(),n=pa(),{userOffices:r}=qe(n),{fetchConversations:s,setConversation:i,setSelectedOffice:c}=o,{getConversations:d,getSelectedOffice:u}=qe(o),{t:v}=ga(),l=w(null),f=w(null),h=w(null),P=w(50),$=w(null),E=w(!1),L=w(""),D=w(""),N=w(""),_=w(10),q=I(()=>{const m=new RegExp("^[0-9]{"+_.value+"}","g");return ha().matches(m,{excludeEmptyString:!0,message:`${v("validPhoneIsRequired")}`}).nullable()}),{errorMessage:S,value:T}=_a("phone",q);w([]);const H={background:"#D3D3D3"},z=w(!1),ce=async(m,p)=>{if(!z.value&&!ge.value){z.value=!0;let y=!1;m===1&&(y=!0,se()),s(m,P.value,y).then(M=>{z.value=!1,p(M)})}},ne=w(!0),Fe=w(null),ge=w(!1),de=w(""),O=w(null),At=async m=>{await J.unReadConversation(m.id),se()},_e=m=>{se(),O.value=m,L.value=m.name,D.value=m.contacts[0].firstName,N.value=m.contacts[0].lastName,T.value="",l.value=null,f.value=null,h.value=null,m.unread&&(J.readConversation(m.id),m.unread=!1)};C(u,(m,p)=>{se(),s(1,P.value,!0).then(()=>{z.value=!1})});const fe=async()=>{const m={data:{phoneNumber:T.value,type:"phoneNumber",...f.value&&{firstName:f.value},...h.value&&{lastName:h.value}}},p=await J.createContact(m),y={...p.data};if(delete y.conversations,p.data.valid===!0&&u.value&&u.value[48]&&p.data.conversations.length>0){const M=p.data.conversations.find(W=>W.twilio_messaging_service.sid===u.value[48]);if(M)M.contacts=[y],_e(M);else{const W=new Date;let ve=`${p.data.firstName} ${p.data.lastName}`;p.data.firstName||(ve=p.data.nationalFormat),O.value={id:"placeHolder",createdAt:W,lastMessage:{},lastMessageDateTime:W,contacts:[y],name:ve,readBy:[],twilioEnabled:!0,twilio_messaging_service:{sid:u.value[48]},type:"Direct",unread:!1,updatedAt:W},T.value="",l.value=null,f.value=null,h.value=null}}else if(p.data.valid===!0&&u.value&&u.value[48]){const M=new Date;let W=`${p.data.firstName} ${p.data.lastName}`;p.data.firstName||(W=p.data.nationalFormat),O.value={id:"placeHolder",createdAt:M,lastMessage:{},lastMessageDateTime:M,contacts:[y],name:W,readBy:[],twilioEnabled:!0,twilio_messaging_service:{sid:u.value[48]},type:"Direct",unread:!1,updatedAt:M},T.value="",l.value=""}},be=()=>{const m=new Date;O.value={id:"new",createdAt:m,lastMessage:{},lastMessageDateTime:m,name:"",readBy:[],twilioEnabled:!0,twilio_messaging_service:{},type:"Direct",unread:!1,archive:!1,updatedAt:m},Fe.value===!1&&ne.value===!0&&(ne.value=!1),X(()=>{document.querySelector("#phoneNumber").focus()})},se=async()=>{const m=new Date;return O.value={id:"no",createdAt:m,lastMessage:{},lastMessageDateTime:m,name:"Select a conversation",readBy:[],twilioEnabled:!0,twilio_messaging_service:{},type:"Direct",unread:!1,archive:!1,updatedAt:m},!0},kt=m=>{m.contacts[0].valid===!0&&m.twilio_messaging_service?J.sendMessage({data:{body:de.value,to:m.contacts[0].phoneNumber,messagingServiceSid:m.twilio_messaging_service.sid,direction:"outbound-api",twilioMessage:!0}}).then(()=>{de.value="",m.id==="placeHolder"?ce(1,()=>{const p=d.value.find(y=>y.contacts[0].phoneNumber===m.contacts[0].phoneNumber);p?_e(p):console.log("no conversation found after sending message")}):m.archive===!0&&Oe(!1)}):console.log("not valid phone number")},we=async()=>{const m=`${D.value} ${N.value}`,p={data:{name:m}},y={data:{firstName:D.value,lastName:N.value}};if(O.value){O.value.name=m;const M=J.updateContact(O.value.contacts[0].id,y),W=J.updateConversation(O.value.id,p),ve=await M,$e=await W;return $e.data.contacts=[ve.data],i({data:$e.data}),$e}},Oe=async m=>{const p={data:{archive:m}};if(O.value){O.value.archive=m;const M=await J.updateConversation(O.value.id,p);return m===!0?(z.value=!0,await se(),s(1,P.value,!0).then(()=>{z.value=!1})):(z.value=!0,s(1,P.value,!0).then(()=>{z.value=!1})),M}},Mt=m=>{_.value=m},Lt=m=>{ge.value=!0,Fe.value=m,setTimeout(()=>{ge.value=!1},1e3)};if(t.query.phoneNumber||t.query.office_id){t.query.office_id&&X(()=>{const p=r.value("read").find(y=>Number(y[8])===Number(t.query.office_id));p&&c(p)}),t.query.firstName&&(f.value=t.query.firstName),t.query.lastName&&(h.value=t.query.lastName),t.query.phoneNumber&&(l.value=t.query.phoneNumber.replace(/\D+/g,""),be(),T.value=l.value.substr(l.value.length-10),X(()=>{fe()}));const m=Object.assign({},t.query);delete m.phoneNumber,delete m.office_id,delete m.firstName,delete m.lastName,a.replace({query:m})}return C(()=>t.query,()=>{if(t.query.phoneNumber||t.query.office_id){t.query.office_id&&X(()=>{const p=r.value("read").find(y=>Number(y[8])===Number(t.query.office_id));p&&c(p)}),t.query.firstName&&(f.value=t.query.firstName),t.query.lastName&&(h.value=t.query.lastName),t.query.phoneNumber&&(l.value=t.query.phoneNumber.replace(/\D+/g,""),be(),T.value=l.value.substr(l.value.length-10),X(()=>{fe()}));const m=Object.assign({},t.query);delete m.phoneNumber,delete m.office_id,delete m.firstName,delete m.lastName,a.replace({query:m})}}),(m,p)=>(x(),F("div",Bo,[b(ze,{flat:""}),b(da,{view:"lHh Lpr lFf",container:"",style:{height:"100%"},class:"shadow-2 rounded-borders bg-grey-3",id:"conversation-layout"},{default:g(()=>[O.value?(x(),A(ra,{key:0,bordered:"",class:"bg-white text-black",style:{height:"57px"}},{default:g(()=>[b(sa,null,{default:g(()=>[b(re,{dense:"",flat:"",round:"",icon:"menu",onClick:p[0]||(p[0]=y=>ne.value=!ne.value)}),!O.value||O.value.id==="new"?(x(),A(Ge,{key:0},{default:g(()=>[b(ya,{for:"phoneNumber",modelValue:G(T),"onUpdate:modelValue":p[1]||(p[1]=y=>Pt(T)?T.value=y:null),label:m.$t("phoneNumber"),tabindex:"0",onMaxLengthChanged:Mt,style:We(G(S)?"padding-bottom: 20px; max-width: 250px;":"padding-bottom: 0px; max-width: 250px;"),error:!!G(S),"error-message":G(S),readonly:!1,editIcon:!1,onAddClicked:fe,onKeyup:Ne(fe,["enter"])},null,8,["modelValue","label","style","error","error-message","onKeyup"])]),_:1})):(x(),A(Ge,{key:1},{default:g(()=>[j(Y(O.value.name)+" ",1),O.value.contacts&&O.value.contacts[0]?(x(),F("span",Vo,Y(O.value.contacts[0].nationalFormat),1)):V("",!0),O.value.contacts&&O.value.contacts[0]?(x(),A(re,{key:1,color:"accent",flat:"",dense:"",round:"",icon:"edit",size:"sm",onClick:p[2]||(p[2]=y=>E.value=!0)})):V("",!0)]),_:1})),b(re,{dense:"",flat:"",round:"",icon:"more_vert"},{default:g(()=>[b(la,null,{default:g(()=>[O.value.contacts&&O.value.contacts[0]?(x(),A(Ee,{key:0,style:{"min-width":"100px"}},{default:g(()=>[ee((x(),A(le,{clickable:""},{default:g(()=>[b(K,{onClick:p[3]||(p[3]=y=>E.value=!0)},{default:g(()=>[j("Edit")]),_:1})]),_:1})),[[ue]]),O.value.unread===!1?ee((x(),A(le,{key:0,clickable:""},{default:g(()=>[b(K,{onClick:p[4]||(p[4]=y=>At(O.value))},{default:g(()=>[j("Mark Un-Read")]),_:1})]),_:1})),[[ue]]):V("",!0),ee((x(),A(le,{clickable:""},{default:g(()=>[O.value.archive===!1?(x(),A(K,{key:0,onClick:p[5]||(p[5]=y=>Oe(!0))},{default:g(()=>[j("Archive")]),_:1})):V("",!0),O.value.archive===!0?(x(),A(K,{key:1,onClick:p[6]||(p[6]=y=>Oe(!1))},{default:g(()=>[j("Unarchive")]),_:1})):V("",!0)]),_:1})),[[ue]])]),_:1})):V("",!0)]),_:1})]),_:1})]),_:1})]),_:1})):V("",!0),b(ua,{"show-if-above":"",modelValue:ne.value,"onUpdate:modelValue":p[8]||(p[8]=y=>ne.value=y),side:"left",width:350,bordered:"",onOnLayout:Lt},{default:g(()=>[b(ia,{class:"fit",id:"scroll-id"},{default:g(()=>[b(Ee,{separator:""},{default:g(()=>[G(u)?ee((x(),A(le,{key:0,clickable:"",onClick:p[7]||(p[7]=y=>be())},{default:g(()=>[b(K,{avatar:"",top:""},{default:g(()=>[b(Ae,{icon:"add",color:"grey","text-color":"white"})]),_:1}),b(K,null,{default:g(()=>[j("New Message")]),_:1})]),_:1})),[[Ke]]):V("",!0),b(le,null,{default:g(()=>[b(K,null,{default:g(()=>[b(ba,{styleSelection:!0})]),_:1})]),_:1})]),_:1}),b(Ee,{bordered:""},{default:g(()=>[b(Nt,{style:{width:"350px"},onLoad:ce,ref_key:"conversationScroll",ref:$},{default:g(()=>[(x(!0),F(Ie,null,De(G(d),y=>ee((x(),A(le,{key:y.id,clickable:"",onClick:M=>_e(y),style:We(O.value&&O.value.id===y.id?H:null)},{default:g(()=>[b(K,{avatar:""},{default:g(()=>[b(Ae,{color:"primary","text-color":"white"},{default:g(()=>[y.letter?(x(),F("span",Ro,Y(y.letter),1)):(x(),A(ke,{key:1,name:"person"}))]),_:2},1024)]),_:2},1024),b(K,null,{default:g(()=>[b(Xe,{lines:"1",class:pe({"text-bold":y.unread})},{default:g(()=>[j(Y(y.name),1)]),_:2},1032,["class"]),b(Xe,{caption:"",lines:"2",class:pe({"text-bold":y.unread,"text-black":y.unread})},{default:g(()=>[y.lastMessage&&y.lastMessage.body?(x(),A(ke,{key:0,size:"xs",name:y.lastMessage.direction==="inbound"?"call_received":"call_made",color:y.lastMessage.direction==="inbound"?"green":"red"},null,8,["name","color"])):V("",!0),j(" "+Y(y.lastMessage&&y.lastMessage.body),1)]),_:2},1032,["class"])]),_:2},1024),b(K,{side:"",top:"",class:pe({"text-bold":y.unread,"text-black":y.unread})},{default:g(()=>[y.lastMessageDateTime?(x(),A(G(Dt),{key:0,time:new Date(y.lastMessageDateTime)},{default:g(({timeAgo:M})=>[j(Y(M),1)]),_:2},1032,["time"])):V("",!0)]),_:2},1032,["class"])]),_:2},1032,["onClick","style"])),[[Ke]])),128))]),_:1},512)]),_:1})]),_:1})]),_:1},8,["modelValue"]),b(ca,null,{default:g(()=>[O.value?(x(),A(Qo,{key:0,conversation:O.value},null,8,["conversation"])):(x(),F("div",Ho,"Select a conversation"))]),_:1}),b(oa,{modelValue:E.value,"onUpdate:modelValue":p[11]||(p[11]=y=>E.value=y),persistent:""},{default:g(()=>[b(ze,{style:{"min-width":"350px"}},{default:g(()=>[b(Ye,null,{default:g(()=>[Te("div",jo,Y(L.value),1),O.value.contacts&&O.value.contacts[0]?(x(),F("span",Fo,Y(O.value.contacts[0].nationalFormat),1)):V("",!0)]),_:1}),b(Ye,{class:"q-pt-none"},{default:g(()=>[b(Ce,{modelValue:D.value,"onUpdate:modelValue":p[9]||(p[9]=y=>D.value=y),label:"First Name",autofocus:"",onKeyup:Ne(we,["enter"])},null,8,["modelValue","onKeyup"]),b(Ce,{modelValue:N.value,"onUpdate:modelValue":p[10]||(p[10]=y=>N.value=y),label:"Last Name",autofocus:"",onKeyup:Ne(we,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),b(na,{align:"right",class:"text-primary"},{default:g(()=>[ee(b(re,{flat:"",label:"Cancel"},null,512),[[ue]]),ee(b(re,{flat:"",label:"Update",onClick:we},null,512),[[ue]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),O.value&&O.value.id!=="no"?(x(),A(wa,{key:1,class:"bg-white"},{default:g(()=>[b(Ce,{autogrow:"",modelValue:de.value,"onUpdate:modelValue":p[13]||(p[13]=y=>de.value=y),placeholder:"Type a message",rounded:"",dense:"",standout:"",class:"q-py-sm",disable:O.value.id==="new"},{after:g(()=>[b(re,{round:"",dense:"",flat:"",icon:"send",onClick:p[12]||(p[12]=y=>kt(O.value)),disabled:!O.value||O.value.id==="new"},null,8,["disabled"])]),_:1},8,["modelValue","disable"])]),_:1})):V("",!0)]),_:1})]))}};export{wn as default};
