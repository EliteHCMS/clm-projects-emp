var j=Object.defineProperty,P=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var q=(e,t,o)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,h=(e,t)=>{for(var o in t||(t={}))z.call(t,o)&&q(e,o,t[o]);if(H)for(var o of H(t))D.call(t,o)&&q(e,o,t[o]);return e},b=(e,t)=>P(e,Q(t));import{bP as N,cW as E,cN as K,cX as O,dm as T,r as W,c as m,aM as X,h as S,ch as G,bI as J,g as Y,dn as Z,cd as p,cb as L}from"./index.c09bc2a4.js";import{a as ee}from"./index.7dbe61ef.js";import{q as ne}from"./quickbase.3c094681.js";var ce=N({name:"QRating",props:b(h(h({},E),K),{modelValue:{type:Number,required:!0},max:{type:[String,Number],default:5},icon:[String,Array],iconHalf:[String,Array],iconSelected:[String,Array],iconAriaLabel:[String,Array],color:[String,Array],colorHalf:[String,Array],colorSelected:[String,Array],noReset:Boolean,noDimming:Boolean,readonly:Boolean,disable:Boolean}),emits:["update:modelValue"],setup(e,{slots:t,emit:o}){const{proxy:{$q:g}}=Y(),u=O(e),V=T(e),M=Z(V),r=W(0);let f={};const v=m(()=>e.readonly!==!0&&e.disable!==!0),_=m(()=>`q-rating row inline items-center q-rating--${v.value===!0?"":"non-"}editable`+(e.noDimming===!0?" q-rating--no-dimming":"")+(e.disable===!0?" disabled":"")+(e.color!==void 0&&Array.isArray(e.color)===!1?` text-${e.color}`:"")),R=m(()=>{const l=Array.isArray(e.icon)===!0?e.icon.length:0,n=Array.isArray(e.iconSelected)===!0?e.iconSelected.length:0,c=Array.isArray(e.iconHalf)===!0?e.iconHalf.length:0,d=Array.isArray(e.color)===!0?e.color.length:0,s=Array.isArray(e.colorSelected)===!0?e.colorSelected.length:0,a=Array.isArray(e.colorHalf)===!0?e.colorHalf.length:0;return{iconLen:l,icon:l>0?e.icon[l-1]:e.icon,selIconLen:n,selIcon:n>0?e.iconSelected[n-1]:e.iconSelected,halfIconLen:c,halfIcon:c>0?e.iconHalf[n-1]:e.iconHalf,colorLen:d,color:d>0?e.color[d-1]:e.color,selColorLen:s,selColor:s>0?e.colorSelected[s-1]:e.colorSelected,halfColorLen:a,halfColor:a>0?e.colorHalf[a-1]:e.colorHalf}}),k=m(()=>{if(typeof e.iconAriaLabel=="string"){const l=e.iconAriaLabel.length>0?`${e.iconAriaLabel} `:"";return n=>`${l}${n}`}if(Array.isArray(e.iconAriaLabel)===!0){const l=e.iconAriaLabel.length;if(l>0)return n=>e.iconAriaLabel[Math.min(n,l)-1]}return(l,n)=>`${n} ${l}`}),w=m(()=>{const l=[],n=R.value,c=Math.ceil(e.modelValue),d=v.value===!0?0:null,s=e.iconHalf===void 0||c===e.modelValue?-1:c;for(let a=1;a<=e.max;a++){const i=r.value===0&&e.modelValue>=a||r.value>0&&r.value>=a,y=s===a&&r.value<a,A=r.value>0&&(y===!0?c:e.modelValue)>=a&&r.value<a,C=y===!0?a<=n.halfColorLen?e.colorHalf[a-1]:n.halfColor:n.selColor!==void 0&&i===!0?a<=n.selColorLen?e.colorSelected[a-1]:n.selColor:a<=n.colorLen?e.color[a-1]:n.color,B=(y===!0?a<=n.halfIconLen?e.iconHalf[a-1]:n.halfIcon:n.selIcon!==void 0&&(i===!0||A===!0)?a<=n.selIconLen?e.iconSelected[a-1]:n.selIcon:a<=n.iconLen?e.icon[a-1]:n.icon)||g.iconSet.rating.icon;l.push({name:(y===!0?a<=n.halfIconLen?e.iconHalf[a-1]:n.halfIcon:n.selIcon!==void 0&&(i===!0||A===!0)?a<=n.selIconLen?e.iconSelected[a-1]:n.selIcon:a<=n.iconLen?e.icon[a-1]:n.icon)||g.iconSet.rating.icon,attrs:{tabindex:d,role:"radio","aria-checked":e.modelValue===a?"true":"false","aria-label":k.value(a,B)},iconClass:"q-rating__icon"+(i===!0||y===!0?" q-rating__icon--active":"")+(A===!0?" q-rating__icon--exselected":"")+(r.value===a?" q-rating__icon--hovered":"")+(C!==void 0?` text-${C}`:"")})}return l}),F=m(()=>{const l={role:"radiogroup"};return e.disable===!0&&(l["aria-disabled"]="true"),e.readonly===!0&&(l["aria-readonly"]="true"),l});function I(l){if(v.value===!0){const n=p(parseInt(l,10),1,parseInt(e.max,10)),c=e.noReset!==!0&&e.modelValue===n?0:n;c!==e.modelValue&&o("update:modelValue",c),r.value=0}}function $(l){v.value===!0&&(r.value=l)}function U(l,n){switch(l.keyCode){case 13:case 32:return I(n),L(l);case 37:case 40:return f[`rt${n-1}`]&&f[`rt${n-1}`].$el.focus(),L(l);case 39:case 38:return f[`rt${n+1}`]&&f[`rt${n+1}`].$el.focus(),L(l)}}function x(){r.value=0}return X(()=>{f={}}),()=>{const l=[];return w.value.forEach(({iconClass:n,name:c,attrs:d},s)=>{const a=s+1;l.push(S("div",b(h({key:a,ref:i=>{f[`rt${a}`]=i},class:"q-rating__icon-container flex flex-center"},d),{onClick(){I(a)},onMouseover(){$(a)},onMouseout:x,onFocus(){$(a)},onBlur:x,onKeyup(i){U(i,a)}}),G(t[`tip-${a}`],[S(J,{class:n,name:c})])))}),e.name!==void 0&&e.disable!==!0&&M(l,"push"),S("div",h({class:_.value,style:u.value},F.value),l)}}});const re=async e=>{console.log(e);const t=await ne.getFileAttachmentUrl(e);console.log(t),ee.get(t).then(o=>o.blob()).then(o=>{const g=URL.createObjectURL(o),u=document.createElement("a");u.href=g,u.download=t.replace(/^.*[\\/]/,""),document.body.appendChild(u),u.click(),URL.revokeObjectURL(g),u.remove()})};export{ce as Q,re as d};
