import{l as j,r as E,c as y,_ as P,A as c,aq as f,br as n,d as a,cT as v,D as e,ac as o,bS as C,bW as Q,ax as V,ar as k,B as D,F as W,b4 as J,cS as Y,w as se,bt as ie,bR as de,bP as O,bQ as ce,dc as re,bT as me,cV as ue,bO as xe,bU as ke,b5 as L,y as Re}from"./index.a8594182.js";import{Q as Ce}from"./QPage.ea1eb714.js";import{u as te}from"./use-quasar.150e9d23.js";import{u as H}from"./useQuerySaver.d29ff9ee.js";import{u as U,q as B}from"./app.0d6b5a44.js";import{dayjs as S}from"./dayjs.3e9de836.js";import{s as Se,f as Ae,r as Te,t as ee,a as Ye}from"./submitRelease.c88a3226.js";import{a as ae,b as Ie,u as Ee}from"./checkTermStatus.c9ec1cfd.js";import{u as F}from"./dataStore.7f5d81df.js";import{Q as pe}from"./QTooltip.6dd84b87.js";import{Q as Ne}from"./QInnerLoading.df76b9b1.js";import{o as _e,d as ve}from"./helpers.e8cd56d5.js";import{a as le}from"./syncEmployeeWithWorkday.d453495a.js";import{d as K}from"./decode.3998c82c.js";import{Q as z}from"./QRating.2839197d.js";import{Q as Me}from"./QFile.1a0c4a2a.js";import{Q as ye}from"./QList.40f773a0.js";import{Q as Pe}from"./QImg.83c0fbc4.js";import{a as Le}from"./QSelect.61afed81.js";import{Q as Qe}from"./QForm.fc4076cc.js";import{a as je,u as Be}from"./vee-validate.esm.04690319.js";import{a as ne}from"./array.59f93f43.js";import"./_commonjsHelpers.a26ce4be.js";import"./localForage.cae5c4e5.js";import"./api.e0860994.js";import"./index.04bc0a32.js";import"./i18n.039f44c6.js";import"./dataStore.c4565561.js";import"./workdayAPI.67516c4a.js";import"./position-engine.50d2ebdf.js";import"./selection.f3574640.js";import"./workday.691c8ddf.js";import"./QChip.1005a1e4.js";import"./QMenu.7aeeb4c0.js";import"./rtl.b51694b1.js";const Ve=j({props:{employee:Object,assignment:Object,release:Object},setup(s){const{getUserType:d}=U(),{updateViewedReleases:u,getReleases:t}=F(),h=E(!0),b=E(!0),i=y(()=>t(s.release[3])),r=y(()=>i.value&&i.value.employee?i.value.employee:null),x=y(()=>i.value&&i.value.assignment?i.value.assignment:null),R=y(()=>{if(!r.value||!r.value.workday)return[];{const{personalData:m}=r.value.workday;if(m){const{customIds:A}=m.identificationData?m.identificationData:{customIds:[]};return A}else return[]}}),_=async()=>{if(r.value){const{sync:m}=await le({clm:r.value});u({id:s.release[3],dataset:"employee",nested:!0,subset:"workday",data:m}),h.value=!1}else{const{data:m}=await B.fetchFromHiringApp({fields:[H({type:"employee",id:s.release[25]})]});if(m[207]===!1){const{sync:A}=await le({clm:m});await u({id:s.release[3],dataset:"employee",data:m}),u({id:s.release[3],dataset:"employee",nested:!0,subset:"workday",data:A})}else await u({id:s.release[3],dataset:"employee",data:m});h.value=!1}if(x.value)b.value=!1;else{const{data:m}=await B.fetchFromHiringApp({fields:[H({type:"rawAssignments",id:s.release[28]})]});u({id:s.release[3],dataset:"assignment",data:m}),b.value=!1}},I=m=>{if(!!m)return m[145].$d?S(m[145].$d).format("MM/DD/YYYY"):null},q=({id:m,idType:A})=>A.includes("J&amp;E")?`${m.slice(1,4)} / ${m.slice(-5)}`:m;return _(),{dayjs:S,openWindow:_e,getUserType:d,employeeData:r,assignmentData:x,eeLoading:h,assignLoading:b,getArrivalDate:I,employeeCustomIds:R,decodeHTML:K,processCustomID:q}}}),Ue=e("div",{class:"text-primary text-h6 text-bold"},"Employee Information",-1),Fe={class:"row q-py-sm"},ze={class:"col-12 col-sm-3"},Oe=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Name")],-1),He={class:"text-body2 q-pl-md"},We={class:"col-12 col-sm-3"},Je=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Last 4 Digits of SS#")],-1),Ke={class:"text-body2 q-pl-md"},Ge={class:"col-12 col-sm-3"},Xe=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Phone")],-1),Ze={class:"text-body2 q-pl-md"},es={class:"row q-py-sm"},ss={class:"col-12 col-sm-3"},ts={class:"text-body2"},os=e("span",{class:"text-bold q-mr-md"},"Workday Employee ID",-1),as={class:"text-body2 q-pl-md"},ls={class:"text-body2"},ns={class:"text-bold q-mr-md"},is={class:"text-body2 q-pl-md"},ds={class:"row q-py-sm"},cs={class:"col-12 col-sm-3"},rs=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Arrival Date")],-1),ms={class:"text-body2 q-pl-md"},us={class:"col-12 col-sm-3"},ps=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Last Hire Date")],-1),_s={class:"text-body2 q-pl-md"},vs={class:"col-12 col-sm-3"},ys=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Last Day Worked")],-1),fs={class:"text-body2 q-pl-md"},hs={class:"col-12 col-sm-3"},bs=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Effective Date")],-1),$s={class:"text-body2 q-pl-md"},qs={class:"row q-py-sm"},gs={class:"col-12 col-sm-4"},ws=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Job Site/ Location")],-1),Ds={class:"text-body2 q-pl-md"},xs={class:"col-12 col-sm-4"},ks=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Job Title")],-1),Rs={class:"text-body2 q-pl-md"},Cs={class:"col-12 col-sm-4"},Ss=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Pay Rate")],-1),As={class:"text-body2 q-pl-md"};function Ts(s,d,u,t,h,b){return c(),f(Y,null,{default:n(()=>[a(v,{class:"text-center q-py-sm"},{default:n(()=>[Ue]),_:1}),!s.eeLoading&&!s.assignLoading?(c(),f(v,{key:0,class:"q-py-none"},{default:n(()=>[e("div",Fe,[e("div",ze,[Oe,e("div",He,[e("span",null,o(s.employeeData[22])+", "+o(s.employeeData[20]),1)])]),e("div",We,[Je,e("div",Ke,[e("span",null,o(s.employeeData[188].substring(s.employeeData[188].length-4)),1)])]),e("div",Ge,[Xe,e("div",Ze,[e("span",null,o(s.employeeData[25]),1)])])]),a(C),e("div",es,[e("div",ss,[e("div",ts,[os,s.getUserType==="QuickBase User"&&s.employeeData[378]?(c(),f(Q,{key:0,dense:"",size:"sm",flat:"",icon:"open_in_new",color:"info",onClick:d[0]||(d[0]=i=>s.openWindow({url:s.employeeData[451]}))},{default:n(()=>[a(pe,null,{default:n(()=>[V("Open in Workday")]),_:1})]),_:1})):k("",!0)]),e("div",as,[e("span",null,o(s.employeeData[378]),1)])]),(c(!0),D(W,null,J(s.employeeCustomIds,(i,r)=>(c(),D("div",{key:r,class:"col-12 col-sm-3"},[e("div",ls,[e("span",ns,o(s.decodeHTML(i.idType)),1)]),e("div",is,[e("span",null,o(s.processCustomID(i)),1)])]))),128))]),a(C),e("div",ds,[e("div",cs,[rs,e("div",ms,[e("span",null,o(s.getArrivalDate(s.assignmentData)||"N/A"),1)])]),e("div",us,[ps,e("div",_s,[e("span",null,o(s.dayjs(s.employeeData[397].$d).format("MM/DD/YYYY")),1)])]),e("div",vs,[ys,e("div",fs,[e("span",null,o(s.dayjs(s.release[123].$d).format("MM/DD/YYYY")),1)])]),e("div",hs,[bs,e("div",$s,[e("span",null,o(s.dayjs(s.release[36].$d).format("MM/DD/YYYY")),1)])])]),a(C),e("div",qs,[e("div",gs,[ws,e("div",Ds,[e("span",null,o(s.release[57]),1)])]),e("div",xs,[ks,e("div",Rs,[e("span",null,o(s.assignmentData[20]),1)])]),e("div",Cs,[Ss,e("div",As,[e("span",null,o(s.assignmentData[116]?`$ ${s.assignmentData[116].toFixed(2)}`:"N/A"),1)])])])]),_:1})):(c(),f(v,{key:1,class:"q-my-lg"},{default:n(()=>[a(Ne,{color:"primary",showing:""})]),_:1}))]),_:1})}var Ys=P(Ve,[["render",Ts]]);const Is=j({props:{data:Object},setup(s){return{evaluation:y(()=>s.data),convertScore:t=>({1:"Strongly Disagreed",2:"Disagreed",3:"Neutral",4:"Agreed",5:"Strongly Agreed",0:"Did Not Know"})[t]}}}),Es=e("div",{class:"text-primary text-h6 text-bold"},"Employee Performance Evaluation",-1),Ns={class:"row q-py-sm"},Ms={class:"col-12 col-sm-6 col-md-3"},Ps=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Has good attendance")],-1),Ls={class:"text-body2 q-pl-md"},Qs={class:"q-mr-md"},js={class:"col-12 col-sm-6 col-md-3"},Bs=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Has a good attitude")],-1),Vs={class:"text-body2 q-pl-md"},Us={class:"q-mr-md"},Fs={class:"col-12 col-sm-6 col-md-3"},zs=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Can do their job")],-1),Os={class:"text-body2 q-pl-md"},Hs={class:"q-mr-md"},Ws={class:"col-12 col-sm-6 col-md-3"},Js=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Can be promoted in the future")],-1),Ks={class:"text-body2 q-pl-md"},Gs={class:"q-mr-md"};function Xs(s,d,u,t,h,b){return c(),f(Y,null,{default:n(()=>[a(v,{class:"text-center q-py-sm"},{default:n(()=>[Es]),_:1}),a(v,{class:"q-py-none"},{default:n(()=>[e("div",Ns,[e("div",Ms,[Ps,e("div",Ls,[e("span",Qs,o(s.convertScore(s.evaluation.attendance)),1),a(z,{modelValue:s.evaluation.attendance,"onUpdate:modelValue":d[0]||(d[0]=i=>s.evaluation.attendance=i),max:"5",size:"sm",color:"accent",icon:"star_border","icon-selected":"star","icon-half":"star_half","no-dimming":"",readonly:""},null,8,["modelValue"])])]),e("div",js,[Bs,e("div",Vs,[e("span",Us,o(s.convertScore(s.evaluation.attitude)),1),a(z,{modelValue:s.evaluation.attitude,"onUpdate:modelValue":d[1]||(d[1]=i=>s.evaluation.attitude=i),max:"5",size:"sm",color:"accent",icon:"star_border","icon-selected":"star","icon-half":"star_half","no-dimming":"",readonly:""},null,8,["modelValue"])])]),e("div",Fs,[zs,e("div",Os,[e("span",Hs,o(s.convertScore(s.evaluation.capable)),1),a(z,{modelValue:s.evaluation.capable,"onUpdate:modelValue":d[2]||(d[2]=i=>s.evaluation.capable=i),max:"5",size:"sm",color:"accent",icon:"star_border","icon-selected":"star","icon-half":"star_half","no-dimming":"",readonly:""},null,8,["modelValue"])])]),e("div",Ws,[Js,e("div",Ks,[e("span",Gs,o(s.convertScore(s.evaluation.promotion)),1),a(z,{modelValue:s.evaluation.promotion,"onUpdate:modelValue":d[3]||(d[3]=i=>s.evaluation.promotion=i),max:"5",size:"sm",color:"accent",icon:"star_border","icon-selected":"star","icon-half":"star_half","no-dimming":"",readonly:""},null,8,["modelValue"])])])])]),_:1})]),_:1})}var Zs=P(Is,[["render",Xs]]);const et=j({props:{release:Object,employee:Object},setup(s){const d=te(),{userData:u,getUserType:t}=U(),{getReleases:h,updateReleaseAttachments:b}=F(),i=E(s.release[70]),r=E(null),x=E(null),R=E([]),_=y(()=>h(s.release[3])&&h(s.release[3]).employee?h(s.release[3]).employee:null),I=y(()=>_.value&&!s.release[72]&&S.duration(S(s.release[36].$d).diff(S(s.employee[397].$d))).asDays()<30?"Yes":"No"),q=()=>{x.value.$el.click()};se(r,$=>{$&&m()});const m=async()=>{const $=u;if($.access&&delete $.access,$.permissions&&delete $.permissions,r.value)for await(const w of r.value){const T={6:{value:await A(w),filename:w.name},7:{value:w.name}};R.value.push(T),r.value=null}if(R.value.length>0)try{const{docs:w}=await Se({release:s.release,attachments:R.value,user:$}),T=w.map(M=>M[12]);await b({id:s.release[3],data:T}),i.value=[...i.value,...T],r.value=null,R.value=[],d.notify({type:"positive",message:`Successfully added ${R.value.length} attachment(s)!`})}catch(w){console.log(w),r.value=null,R.value=[],d.notify({type:"negative",message:"Error adding attachment!"})}},A=$=>new Promise((w,T)=>{const M=new FileReader;M.readAsDataURL($),M.onload=()=>w(M.result.replace(/^data:.+;base64,/,"")),M.onerror=G=>T(G)});return{deductNeeded:I,downloadFile:ve,decodeHTML:K,fileAttachment:r,fileInput:x,openFileInput:q,currentAttachments:i}}}),st=e("div",{class:"text-primary text-h6 text-bold"},"Release Information",-1),tt={class:"row"},ot={class:"col-12 col-sm-9"},at={class:"row q-py-sm"},lt={class:"col-12 col-sm-6 col-md-6"},nt={class:"text-body2"},it=e("span",{class:"text-bold q-mr-md"},"Return Company Equipment and/or PPE",-1),dt={class:"col-12 col-sm-6 col-md-6"},ct={class:"text-body2"},rt=e("span",{class:"text-bold q-mr-md"},"Payroll Deduction Needed",-1),mt={class:"row q-py-sm"},ut={class:"col-12"},pt={class:"text-body2"},_t=e("span",{class:"text-bold q-mr-md"},"Reason",-1),vt={class:"row q-py-sm"},yt={class:"col-12"},ft={class:"text-body2"},ht=e("span",{class:"text-bold q-mr-md"},"Recommendation for Rehire / Reassignment",-1),bt={class:"row q-py-sm"},$t={class:"col-12"},qt=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Comments")],-1),gt={class:"text-body2 text-italic q-pl-md"},wt={class:"col-12 col-sm-3 q-pl-sm"},Dt={class:"text-body2 text-bold text-center q-mb-sm"},xt={key:1,class:"text-body2 text-italic text-center"},kt=e("span",null,"No Supporting Documents",-1),Rt=[kt];function Ct(s,d,u,t,h,b){return c(),f(Y,null,{default:n(()=>[a(v,{class:"text-center q-py-sm"},{default:n(()=>[st]),_:1}),a(v,{class:"q-py-none"},{default:n(()=>[e("div",tt,[e("div",ot,[e("div",at,[e("div",lt,[e("div",nt,[it,e("span",null,o(s.release[72]?"Yes":"No"),1)])]),e("div",dt,[e("div",ct,[rt,e("span",null,o(s.deductNeeded),1)])])]),a(C),e("div",mt,[e("div",ut,[e("div",pt,[_t,e("span",null,o(s.release[31])+" - "+o(s.release[32]),1)])])]),a(C),e("div",vt,[e("div",yt,[e("div",ft,[ht,e("span",null,o(s.release[12]),1)])])]),a(C),e("div",bt,[e("div",$t,[qt,e("div",gt,[e("span",null,o(s.release[60]===""?"No Comments":s.decodeHTML(s.release[60])),1)])])])]),e("div",wt,[e("div",Dt,[V("Supporting Documents "),s.$can("manage","releases")?(c(),f(Q,{key:0,color:"accent",round:"",flat:"",class:"cursor-pointer",icon:"add",size:"md",onClick:s.openFileInput},null,8,["onClick"])):k("",!0)]),a(Me,{ref:"fileInput",style:{display:"none"},dense:"","bottom-slots":"",modelValue:s.fileAttachment,"onUpdate:modelValue":d[0]||(d[0]=i=>s.fileAttachment=i),multiple:"",append:"",label:""},null,8,["modelValue"]),s.currentAttachments.length>0?(c(),f(ye,{key:0},{default:n(()=>[(c(!0),D(W,null,J(s.currentAttachments,(i,r)=>ie((c(),f(de,{key:r,clickable:"",class:"text-body2",onClick:x=>s.downloadFile({tableId:"bsstsai5d",recordId:i[3],fieldId:6,versionNumber:1,name:i[7]})},{default:n(()=>[a(O,null,{default:n(()=>[V(o(r+1)+". "+o(i[7]),1)]),_:2},1024),a(O,{avatar:""},{default:n(()=>[a(ce,{color:"info",name:"file_download"})]),_:1})]),_:2},1032,["onClick"])),[[re]])),128))]),_:1})):(c(),D("div",xt,Rt))])])]),_:1})]),_:1})}var St=P(et,[["render",Ct]]);const At=j({props:{employee:Object,assignment:Object,release:Object},setup(s){const{getUserType:d}=U(),{updateViewedReleases:u,getReleases:t}=F(),h=E(!0),b=E(!0),i=y(()=>t(s.release[3])),r=y(()=>i.value&&i.value.employee?i.value.employee:null),x=y(()=>i.value&&i.value.assignment?i.value.assignment:null),R=y(()=>{if(!r.value||!r.value.workday)return[];{const{personalData:q}=r.value.workday;if(q){const{customIds:m}=q.identificationData?q.identificationData:{customIds:[]};return m}else return[]}});return{dayjs:S,openWindow:_e,getUserType:d,employeeData:r,assignmentData:x,eeLoading:h,assignLoading:b,getArrivalDate:q=>q[145].$d?S(q[145].$d).format("MM/DD/YYYY"):null,employeeCustomIds:R,processCustomID:({id:q,idType:m})=>m.includes("J&amp;E")?`${q.slice(1,4)} / ${q.slice(-5)}`:q,decodeHTML:K}}}),Tt=e("div",{class:"text-body1 text-bold"},"Employee Information",-1),Yt={class:"row q-py-sm"},It={class:"col-3"},Et=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Name")],-1),Nt={class:"text-caption q-pl-md"},Mt={class:"col-3"},Pt=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Last 4 Digits of SS#")],-1),Lt={class:"text-caption q-pl-md"},Qt={class:"col-3"},jt=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Phone")],-1),Bt={class:"text-caption q-pl-md"},Vt={class:"row q-py-sm"},Ut={class:"col-3"},Ft={class:"text-caption"},zt=e("span",{class:"text-bold q-mr-md"},"Workday Employee ID",-1),Ot={class:"text-caption q-pl-md"},Ht={class:"text-caption"},Wt={class:"text-bold q-mr-md"},Jt={class:"text-caption q-pl-md"},Kt={class:"row q-py-sm"},Gt={class:"col-3"},Xt=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Arrival Date")],-1),Zt={class:"text-caption q-pl-md"},eo={class:"col-3"},so=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Last Hire Date")],-1),to={class:"text-caption q-pl-md"},oo={class:"col-3"},ao=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Last Day Worked")],-1),lo={class:"text-caption q-pl-md"},no={class:"col-3"},io=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Effective Date")],-1),co={class:"text-caption q-pl-md"},ro={class:"row q-py-sm"},mo={class:"col-4"},uo=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Job Site/ Location")],-1),po={class:"text-caption q-pl-md"},_o={class:"col-4"},vo=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Job Title")],-1),yo={class:"text-caption q-pl-md"},fo={class:"col-2"},ho=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Pay Rate")],-1),bo={class:"text-caption q-pl-md"};function $o(s,d,u,t,h,b){return c(),f(Y,{flat:""},{default:n(()=>[a(v,{class:"q-pa-none"},{default:n(()=>[a(Pe,{src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo.svg",alt:"BrandSafway Logo",fit:"scale-down"})]),_:1}),a(v,{class:"q-py-sm"},{default:n(()=>[Tt]),_:1}),a(v,{class:"q-py-none"},{default:n(()=>[e("div",Yt,[e("div",It,[Et,e("div",Nt,[e("span",null,o(s.employeeData[22])+", "+o(s.employeeData[20]),1)])]),e("div",Mt,[Pt,e("div",Lt,[e("span",null,o(s.employeeData[188].substring(s.employeeData[188].length-4)),1)])]),e("div",Qt,[jt,e("div",Bt,[e("span",null,o(s.employeeData[25]),1)])])]),a(C),e("div",Vt,[e("div",Ut,[e("div",Ft,[zt,s.getUserType==="QuickBase User"?(c(),f(Q,{key:0,dense:"",size:"sm",flat:"",icon:"open_in_new",color:"info",onClick:d[0]||(d[0]=i=>s.openWindow({url:s.employeeData[451]}))},{default:n(()=>[a(pe,null,{default:n(()=>[V("Open in Workday")]),_:1})]),_:1})):k("",!0)]),e("div",Ot,[e("span",null,o(s.employeeData[378]),1)])]),(c(!0),D(W,null,J(s.employeeCustomIds,(i,r)=>(c(),D("div",{key:r,class:"col-3"},[e("div",Ht,[e("span",Wt,o(s.decodeHTML(i.idType)),1)]),e("div",Jt,[e("span",null,o(s.processCustomID(i)),1)])]))),128))]),a(C),e("div",Kt,[e("div",Gt,[Xt,e("div",Zt,[e("span",null,o(s.getArrivalDate(s.assignmentData)||"N/A"),1)])]),e("div",eo,[so,e("div",to,[e("span",null,o(s.dayjs(s.employeeData[397].$d).format("MM/DD/YYYY")),1)])]),e("div",oo,[ao,e("div",lo,[e("span",null,o(s.dayjs(s.release[123].$d).format("MM/DD/YYYY")),1)])]),e("div",no,[io,e("div",co,[e("span",null,o(s.dayjs(s.release[36].$d).format("MM/DD/YYYY")),1)])])]),a(C),e("div",ro,[e("div",mo,[uo,e("div",po,[e("span",null,o(s.release[57]),1)])]),e("div",_o,[vo,e("div",yo,[e("span",null,o(s.assignmentData[20]),1)])]),e("div",fo,[ho,e("div",bo,[e("span",null,o(s.assignmentData[116]?`$ ${s.assignmentData[116].toFixed(2)}`:"N/A"),1)])])])]),_:1})]),_:1})}var qo=P(At,[["render",$o]]);const go=j({props:{data:Object},setup(s){return{evaluation:y(()=>s.data),convertScore:t=>({1:"Strongly Disagreed",2:"Disagreed",3:"Neutral",4:"Agreed",5:"Strongly Agreed",0:"Did Not Know"})[t]}}}),wo=e("div",{class:"text-body1 text-bold"},"Employee Performance Evaluation",-1),Do={class:"row q-py-sm"},xo={class:"col-3"},ko=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Has good attendance")],-1),Ro={class:"text-caption q-pl-md"},Co={class:"q-mr-md"},So={class:"col-3"},Ao=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Has a good attitude")],-1),To={class:"text-caption q-pl-md"},Yo={class:"q-mr-md"},Io={class:"col-3"},Eo=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Can do their job")],-1),No={class:"text-caption q-pl-md"},Mo={class:"q-mr-md"},Po={class:"col-3"},Lo=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Can be promoted in the future")],-1),Qo={class:"text-caption q-pl-md"},jo={class:"q-mr-md"};function Bo(s,d,u,t,h,b){return c(),f(Y,{flat:"",class:"q-my-none q-py-none"},{default:n(()=>[a(v,{class:"q-py-sm"},{default:n(()=>[wo]),_:1}),a(v,{class:"q-py-none"},{default:n(()=>[e("div",Do,[e("div",xo,[ko,e("div",Ro,[e("span",Co,o(s.evaluation.attendance)+" / 5 - "+o(s.convertScore(s.evaluation.attendance)),1)])]),e("div",So,[Ao,e("div",To,[e("span",Yo,o(s.evaluation.attitude)+" / 5 - "+o(s.convertScore(s.evaluation.attitude)),1)])]),e("div",Io,[Eo,e("div",No,[e("span",Mo,o(s.evaluation.capable)+" / 5 - "+o(s.convertScore(s.evaluation.capable)),1)])]),e("div",Po,[Lo,e("div",Qo,[e("span",jo,o(s.evaluation.promotion)+" / 5 - "+o(s.convertScore(s.evaluation.promotion)),1)])])])]),_:1})]),_:1})}var Vo=P(go,[["render",Bo]]);const Uo=j({props:{release:Object,employee:Object},setup(s){const{getReleases:d}=F(),u=y(()=>d(s.release[3])&&d(s.release[3]).employee?d(s.release[3]).employee:null);return{deductNeeded:y(()=>u.value&&!s.release[72]&&S.duration(S(s.release[36].$d).diff(S(s.employee[397].$d))).asDays()<30?"Yes":"No"),downloadFile:ve,decodeHTML:K}}}),Fo=e("div",{class:"text-body1 text-bold"},"Release Information",-1),zo={class:"row"},Oo={class:"col-9"},Ho={class:"row q-py-sm"},Wo={class:"col-6"},Jo={class:"text-caption"},Ko=e("span",{class:"text-bold q-mr-md"},"Return Company Equipment and/or PPE",-1),Go={class:"col-6"},Xo={class:"text-caption"},Zo=e("span",{class:"text-bold q-mr-md"},"Payroll Deduction Needed",-1),ea={class:"row q-py-sm"},sa={class:"col-12"},ta={class:"text-caption"},oa=e("span",{class:"text-bold q-mr-md"},"Reason",-1),aa={class:"row q-py-sm"},la={class:"col-12"},na={class:"text-caption"},ia=e("span",{class:"text-bold q-mr-md"},"Recommendation for Rehire / Reassignment",-1),da={class:"row q-py-sm"},ca={class:"col-12"},ra=e("div",{class:"text-caption"},[e("span",{class:"text-bold q-mr-md"},"Comments")],-1),ma={class:"text-caption text-italic q-pl-md"},ua={class:"col-3 q-pl-sm"},pa=e("div",{class:"text-caption text-bold text-center q-mb-sm"},"Supporting Documents",-1),_a={key:1,class:"text-caption text-italic text-center"},va=e("span",null,"No Supporting Documents",-1),ya=[va];function fa(s,d,u,t,h,b){return c(),f(Y,{flat:""},{default:n(()=>[a(v,{class:"q-py-sm"},{default:n(()=>[Fo]),_:1}),a(v,{class:"q-py-none"},{default:n(()=>[e("div",zo,[e("div",Oo,[e("div",Ho,[e("div",Wo,[e("div",Jo,[Ko,e("span",null,o(s.release[72]?"Yes":"No"),1)])]),e("div",Go,[e("div",Xo,[Zo,e("span",null,o(s.deductNeeded),1)])])]),a(C),e("div",ea,[e("div",sa,[e("div",ta,[oa,e("span",null,o(s.release[32]),1)])])]),a(C),e("div",aa,[e("div",la,[e("div",na,[ia,e("span",null,o(s.release[12]),1)])])]),a(C),e("div",da,[e("div",ca,[ra,e("div",ma,[e("span",null,o(s.release[60]===""?"No Comments":s.decodeHTML(s.release[60])),1)])])])]),e("div",ua,[pa,s.release[70].length>0?(c(),f(ye,{key:0},{default:n(()=>[(c(!0),D(W,null,J(s.release[70],(i,r)=>ie((c(),f(de,{key:r,clickable:"",class:"text-caption",onClick:x=>s.downloadFile({tableId:"bsstsai5d",recordId:i[3],fieldId:6,versionNumber:1,name:i[7]})},{default:n(()=>[a(O,null,{default:n(()=>[V(o(r+1)+". "+o(i[7]),1)]),_:2},1024),a(O,{avatar:""},{default:n(()=>[a(ce,{color:"info",name:"file_download"})]),_:1})]),_:2},1032,["onClick"])),[[re]])),128))]),_:1})):(c(),D("div",_a,ya))])])]),_:1})]),_:1})}var ha=P(Uo,[["render",fa]]);const ba=j({emits:["releaseReviewed"],props:{release:Object},setup(s,{emit:d}){const u=te(),t=me(),{getUserType:h}=U(),b=E(!1),i=y(()=>(h==="Project User","How would you like to proceed with this employee?")),r=y(()=>h==="Project User"?[{label:"Rescind Release (Add Back to Roster)",value:"Rescind"}]:[{label:"Reassign this Employee",value:"Reassign"},{label:"Terminate this Employee",value:"Terminate"},{label:"Rescind Release (Add Back to Roster)",value:"Rescind"}]),x=ne({selection:ne().required("Required field if taking action on this release.").label("Disposition").nullable()}),{meta:R,errors:_,handleSubmit:I,handleReset:q}=je({validationSchema:x}),{value:m}=Be("selection");se(m,$=>{$?b.value=!0:b.value=!1});const A=I(async $=>{u.dialog({title:"Confirm",message:`Are you sure you want to ${$.selection.value} this ${$.selection.value==="Rescind"?"release":"employee"}?`,cancel:!0,persistent:!0}).onOk(async()=>{try{if(u.loading.show(),$.selection.value==="Reassign"||$.selection.value==="Terminate"){const{release:w,employee:T}=await Ae({release:s.release,disp:$.selection});d("releaseReviewed",{release:w,employee:T}),window.postMessage("reloadDepartures"),q()}else if($.selection.value==="Rescind"){const{release:w,employee:T}=await Te({release:s.release,disp:$.selection});d("releaseReviewed",{release:w,employee:T}),t.replace({name:"employees",query:{refresh:!0}}),q()}}catch(w){console.log(w),u.loading.hide(),u.notify({type:"negative",message:"Cannot update release."})}})});return{formErrors:_,formMeta:R,submit:A,selection:m,options:r,question:i,visibleButton:b}}}),$a={class:"text-body2 text-weight-bold"},qa={class:"text-caption"};function ga(s,d,u,t,h,b){return c(),D("div",null,[a(Qe,{onSubmit:xe(s.submit,["prevent"])},{default:n(()=>[a(Y,null,{default:n(()=>[a(v,{class:"q-pb-xs"},{default:n(()=>[e("div",$a,o(s.question),1),a(Le,{class:"q-mb-sm",dense:"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:s.selection,"onUpdate:modelValue":d[0]||(d[0]=i=>s.selection=i),options:s.options,"bottom-slots":"",clearable:"",error:!!s.formErrors.selection},{error:n(()=>[e("div",qa,o(s.formErrors.selection),1)]),_:1},8,["modelValue","options","error"])]),_:1}),s.visibleButton?(c(),f(ue,{key:0,class:"q-pt-xs",align:"right"},{default:n(()=>[a(Q,{color:"primary",label:"Submit",type:"submit"})]),_:1})):k("",!0)]),_:1})]),_:1},8,["onSubmit"])])}var wa=P(ba,[["render",ga]]);const Da={name:"View Release",directives:{},components:{EmployeeInformation:Ys,Evaluation:Zs,DepartureInformation:St,PrintDepartureInformation:ha,PrintEmployeeInformation:qo,PrintEvaluation:Vo,ReviewForm:wa},setup(){const s=E(!1),d=E(!1),u=te(),t=ke();me();const{capitalize:h}=Re,{getUserType:b,userData:i}=U(),{getReleases:r,setReleases:x,updateViewedReleases:R}=F(),_=y(()=>r(t.params.release)),I=y(()=>_.value&&_.value.employee?_.value.employee:null),q=y(()=>_.value&&_.value.assignment?_.value.assignment:null),m=y(()=>_.value[59]&&_.value[59][0]?_.value[59][0]:null),A=y(()=>{const{data:l}=m.value?m.value:{data:null};return l}),$=y(()=>_.value?_.value[38]:null),w=y(()=>m.value&&m.value[44]?m.value[44]:null),T=y(()=>_.value?_.value[75]:null),M=y(()=>_.value?_.value[76]:null),G=l=>l&&l[1]&&l[1].$d?S(l[1].$d).format("MM/DD/YYYY"):null,fe=async()=>{const l=await ae({release:_.value});let p={referenceId:"N/A",logDescription:"N/A",logEffectiveMoment:"N/A",logEntryMoment:"N/A",eventType:"N/A",organizationReferenceID:"N/A",positionID:"N/A",employeeID:l[50],logType:"N/A"},g=_.value[36].$d;if(l.lastTerm&&(p=l.lastTerm),l.termEntryDate&&(g=l.termEntryDate.$d),I.value[397].isSameOrAfter(_.value[36])&&(!l.terminated||!l.lastTerm)){const{data:Z}=await ee({release:l,entryMoment:g,workdayData:p});N({data:Z,notify:!0})}else if(!l.terminated||!l.lastTerm)u.dialog({title:"Alert",message:"Please complete the termination in Workday first."});else{const{data:Z}=await ee({release:l,entryMoment:g,workdayData:p});N({data:Z,notify:!0})}},he=({release:l,employee:p})=>{if(l[43]==="Reassign"){const g=`https://elitehcms.quickbase.com/db/bs7qsu6wh?a=dbpage&pageID=6&ee=${p[3]}`;window.location.href=g}else N({data:l,notify:!0,employee:p})},be=()=>{window.close()},$e=async()=>{if(!r(t.params.release)){u.loading.show();const{data:l}=await B.fetchFromHiringApp({fields:[H({type:"releases",query:"",id:t.params.release})]});x({id:l[3],data:l}),u.loading.hide(),b==="QuickBase User"&&qe({data:l})}},qe=async({data:l})=>{if(l[87]==="Active"&&l[95]&&l[42]!=="Complete"){const{reassigned:p,timestamp:g}=await Ie({release:l});p&&we({release:l,timestamp:g})}else if(l[73]==="Processed"){if(l.workdayTerm)return;const{release:p}=await X({release:l});N({data:p})}else if(l[79]!=="Complete"&&l[36].$d&&!S().isBefore(S(l[36].$d))){const{completed:p}=await ge({release:l}),{release:g}=await X({release:p});g.terminated?oe({release:g}):N({data:g})}else{const{release:p}=await X({release:l});p.terminated?oe({release:p}):N({data:p})}},X=async({release:l})=>{if(l[87]!=="Terminated")return l.terminated=!1,{release:l};{const p=await ae({release:l});if(p.terminated&&p.lastTerm)if(p[73]==="Processed"){const{data:g}=await B.upsertRecordsXML({to:"bp3ga39ut",data:[{3:{value:p[3]},106:{value:JSON.stringify(p.lastTerm)}}],fieldsToReturn:[80],formatObject:80});return{release:g[0][80]}}else return{release:p};else return{release:p}}},ge=async({release:l})=>{await Ye({id:l[28]});const{data:p}=await B.fetchFromHiringApp({fields:[H({type:"releases",query:"",id:l[3]})]});return{completed:p}},oe=async({release:l})=>{u.dialog({title:"Confirm",message:"It looks like this termination has already been processed in Workday. Would you like to update this employee in CEM now?",persistent:!0,cancel:!0}).onOk(async()=>{const{data:p}=await ee({release:l,entryMoment:l.termEntryDate.$d,workdayData:l.lastTerm});N({data:p,notify:!0})}).onCancel(()=>{N({data:l})})},we=async({release:l,timestamp:p})=>{u.dialog({title:"Confirm",message:"It looks like this employee has been reassigned. Would you like to update this release in CEM now?",persistent:!0,cancel:!0}).onOk(async()=>{const g=await Ee({release:l,disposition:"Reassign",ts:p,updatedBy:i});N({data:g,notify:!0})}).onCancel(()=>{N({data:l})})},N=({data:l,notify:p,employee:g})=>{u.loading.isActive&&u.loading.hide(),_.value.employee?l.employee=_.value.employee:g&&(l.employee=g),_.value.assignment&&(l.assignment=_.value.assignment),x({id:l[3],data:l}),p&&u.notify({type:"positive",message:"Employee updated in CEM"})},De=()=>{s.value=!0};return se(s,(l,p)=>{s.value&&setTimeout(()=>{print(),setTimeout(()=>{s.value=!1},500)},200)}),$e(),{release:_,employee:I,assignment:q,evaluation:A,evaluator:w,reviewer:T,processor:M,getSubmittedDate:G,getUserType:b,fab:d,dayjs:S,submitter:$,capitalize:h,showPrint:s,printPage:De,releaseReviewed:he,completeTermination:fe,closeWindow:be}}},xa={class:"q-px-sm q-pb-xl"},ka={class:"row q-py-sm"},Ra={class:"col-12 col-sm-3"},Ca=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Submitted By")],-1),Sa={class:"text-body2 q-pl-md"},Aa={class:"col-12 col-sm-3"},Ta=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Evaluated By")],-1),Ya={class:"text-body2 q-pl-md"},Ia={key:0},Ea={key:1},Na={key:0,class:"col-12 col-sm-3"},Ma=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Reviewed By")],-1),Pa={class:"text-body2 q-pl-md"},La={key:1,class:"col-3"},Qa=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Processed By")],-1),ja={class:"text-body2 q-pl-md"},Ba=e("div",{class:"text-primary text-h6 text-bold"},"Termination Workday Data",-1),Va={class:"row q-py-sm"},Ua={class:"col-12 col-sm-3"},Fa=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Entry Date")],-1),za={class:"text-body2 q-pl-md"},Oa={class:"col-12 col-sm-3"},Ha=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Effective Date")],-1),Wa={class:"text-body2 q-pl-md"},Ja={class:"row"},Ka={class:"col-12 col-md-6"},Ga={class:"row q-py-sm"},Xa={class:"col-3"},Za=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Submitted By")],-1),el={class:"text-body2 q-pl-md"},sl={class:"col-3"},tl=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Submitted Date")],-1),ol={class:"text-body2 q-pl-md"},al={class:"col-3"},ll=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Evaluated By")],-1),nl={class:"text-body2 q-pl-md"},il={key:0},dl={key:1},cl={key:0,class:"col-3"},rl=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Reviewed By")],-1),ml={class:"text-body2 q-pl-md"},ul={key:1,class:"col-3"},pl=e("div",{class:"text-body2"},[e("span",{class:"text-bold q-mr-md"},"Processed By")],-1),_l={class:"text-body2 q-pl-md"};function vl(s,d,u,t,h,b){const i=L("employee-information"),r=L("evaluation"),x=L("departure-information"),R=L("review-form"),_=L("print-employee-information"),I=L("print-evaluation"),q=L("print-departure-information");return c(),f(Ce,{style:{"max-width":"100vw"}},{default:n(()=>[e("div",xa,[t.release&&!t.showPrint?(c(),f(Y,{key:0,flat:"",class:"text-dark"},{default:n(()=>[s.$route.name==="view-release"?(c(),f(ue,{key:0,class:"q-pb-xs print-hide",align:"right"},{default:n(()=>[t.release[42]==="Reviewed"&&t.release[43]==="Terminate"&&t.getUserType==="QuickBase User"?(c(),f(Q,{key:0,icon:"done",label:"Termination Processed",color:"positive",onClick:t.completeTermination},null,8,["onClick"])):k("",!0),a(Q,{icon:"print",label:"Print",color:"info",onClick:t.printPage},null,8,["onClick"]),a(Q,{icon:"close",label:"Close",color:"dark",onClick:d[0]||(d[0]=m=>t.getUserType==="QuickBase User"?t.closeWindow():s.$router.replace({name:"employees",query:{refresh:!0}}))})]),_:1})):k("",!0),a(v,{class:"q-py-xs"},{default:n(()=>[a(i,{assignment:t.assignment,employee:t.employee,release:t.release},null,8,["assignment","employee","release"])]),_:1}),t.evaluation?(c(),f(v,{key:1,class:"q-py-xs"},{default:n(()=>[a(r,{data:t.evaluation},null,8,["data"])]),_:1})):k("",!0),a(v,{class:"q-py-xs"},{default:n(()=>[a(x,{employee:t.employee,release:t.release},null,8,["employee","release"])]),_:1}),a(v,{class:"q-py-xs"},{default:n(()=>[a(Y,null,{default:n(()=>[a(v,{class:"q-py-none"},{default:n(()=>[e("div",ka,[e("div",Ra,[Ca,e("div",Sa,[e("span",null,o(t.submitter[37])+", "+o(t.submitter[35])+" - "+o(t.submitter[6]),1)])]),e("div",Aa,[Ta,e("div",Ya,[t.evaluator?(c(),D("span",Ia,o(t.capitalize(t.evaluator[22].toLowerCase()))+", "+o(t.capitalize(t.evaluator[20].toLowerCase())),1)):(c(),D("span",Ea,"Not Specified"))])]),t.reviewer?(c(),D("div",Na,[Ma,e("div",Pa,[e("span",null,o(t.capitalize(t.reviewer[37].toLowerCase()))+", "+o(t.capitalize(t.reviewer[35].toLowerCase())),1)])])):k("",!0),t.processor?(c(),D("div",La,[Qa,e("div",ja,[e("span",null,o(t.capitalize(t.processor[37].toLowerCase()))+", "+o(t.capitalize(t.processor[35].toLowerCase())),1)])])):k("",!0)])]),_:1})]),_:1})]),_:1}),t.release.workdayTerm?(c(),f(v,{key:2,class:"q-py-xs"},{default:n(()=>[a(Y,null,{default:n(()=>[a(v,{class:"text-center q-py-sm"},{default:n(()=>[Ba]),_:1}),a(v,{class:"q-py-none"},{default:n(()=>[e("div",Va,[e("div",Ua,[Fa,e("div",za,[e("span",null,o(s.$dayjs(t.release.workdayTerm.logEntryMoment).format("MM/DD/YYYY hh:mm:ss a z")),1)])]),e("div",Oa,[Ha,e("div",Wa,[e("span",null,o(s.$dayjs(t.release.workdayTerm.logEffectiveMoment).format("MM/DD/YYYY hh:mm:ss a z")),1)])])])]),_:1})]),_:1})]),_:1})):k("",!0),t.release[42]==="Pending"&&s.$can("manage","releases")?(c(),f(v,{key:3,class:"q-py-sm"},{default:n(()=>[e("div",Ja,[e("div",Ka,[a(R,{release:t.release,onReleaseReviewed:t.releaseReviewed},null,8,["release","onReleaseReviewed"])])])]),_:1})):k("",!0)]),_:1})):k("",!0),t.release&&t.showPrint?(c(),f(Y,{key:1,id:"printArea",flat:"",class:"text-body2"},{default:n(()=>[a(v,{class:"q-py-xs"},{default:n(()=>[a(_,{assignment:t.assignment,employee:t.employee,release:t.release},null,8,["assignment","employee","release"])]),_:1}),a(C),t.evaluation?(c(),f(v,{key:0,class:"q-py-xs"},{default:n(()=>[a(I,{data:t.evaluation},null,8,["data"])]),_:1})):k("",!0),a(C),a(v,{class:"q-py-xs"},{default:n(()=>[a(q,{employee:t.employee,release:t.release},null,8,["employee","release"])]),_:1}),a(C),a(v,{class:"q-pb-sm"},{default:n(()=>[a(Y,{flat:""},{default:n(()=>[a(v,{class:"q-py-none"},{default:n(()=>[e("div",Ga,[e("div",Xa,[Za,e("div",el,[e("span",null,o(t.submitter[37])+", "+o(t.submitter[35]),1)])]),e("div",sl,[tl,e("div",ol,[e("span",null,o(t.getSubmittedDate(t.release)||""),1)])]),e("div",al,[ll,e("div",nl,[t.evaluator?(c(),D("span",il,o(t.capitalize(t.evaluator[22].toLowerCase()))+", "+o(t.capitalize(t.evaluator[20].toLowerCase())),1)):(c(),D("span",dl,"Not Specified"))])]),t.reviewer?(c(),D("div",cl,[rl,e("div",ml,[e("span",null,o(t.capitalize(t.reviewer[37].toLowerCase()))+", "+o(t.capitalize(t.reviewer[35].toLowerCase())),1)])])):k("",!0),t.processor?(c(),D("div",ul,[pl,e("div",_l,[e("span",null,o(t.capitalize(t.processor[37].toLowerCase()))+", "+o(t.capitalize(t.processor[35].toLowerCase())),1)])])):k("",!0)])]),_:1})]),_:1})]),_:1})]),_:1})):k("",!0)])]),_:1})}var Xl=P(Da,[["render",vl]]);export{Xl as default};
