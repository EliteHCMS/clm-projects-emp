var ke=Object.defineProperty,Ne=Object.defineProperties;var $e=Object.getOwnPropertyDescriptors;var ie=Object.getOwnPropertySymbols;var Oe=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable;var re=(e,t,i)=>t in e?ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,B=(e,t)=>{for(var i in t||(t={}))Oe.call(t,i)&&re(e,i,t[i]);if(ie)for(var i of ie(t))je.call(t,i)&&re(e,i,t[i]);return e},G=(e,t)=>Ne(e,$e(t));import{r as M,c as S,g as ye,cI as Ee,cb as ge,cF as Qe,h as L,bP as ze,cJ as Ie,cN as Te,cK as Pe,cM as Be,cO as Le,dp as Me,cP as ue,dq as Ke,d4 as Xe,cL as He,cB as Je,l as We,k as Ve,bL as he,w as Se,_ as qe,A as j,B as Q,d as l,bi as b,D as u,ab as H,bJ as te,bH as Z,au as ae,cx as de,bK as me,bO as x,F as ce,aY as Ye,ao as we,cz as Fe,cw as Ce,dr as v,cy as Ge,bF as Ze,bM as xe,aZ as _e,an as pe}from"./index.c09bc2a4.js";import{Q as et}from"./QPage.55f2abc8.js";import{u as Ae}from"./use-quasar.e0cdf7ef.js";import{u as Re}from"./useQuerySaver.e863619d.js";import{u as tt,q as z}from"./quickbase.3c094681.js";import{u as De}from"./dataStore.d5a29dad.js";import{Q as le}from"./QSelect.c52b58d3.js";import{Q as at}from"./QChip.9fb9a4d7.js";import{Q as lt}from"./QItemLabel.3dafae5d.js";import{Q as ot}from"./QList.be97f1ab.js";import{Q as nt}from"./QForm.1e612a67.js";import{a as oe,f as st,c as fe,e as _,b as it,u as O}from"./array.b3d67d73.js";import{dayjs as ne}from"./dayjs.b00e5e8b.js";import{u as rt}from"./dataStore.22bea712.js";import"./_commonjsHelpers.a26ce4be.js";import"./index.7dbe61ef.js";import"./localForage.ff6a6a7e.js";import"./i18n.6b16a0d1.js";import"./api.8270b409.js";import"./QMenu.f586b24f.js";import"./position-engine.a348f403.js";import"./selection.6b3a67ea.js";import"./rtl.cf9bbe47.js";function J(e,t,i,c){const s=[];return e.forEach(d=>{c(d)===!0?s.push(d):t.push({failedPropValidation:i,file:d})}),s}function ee(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),ge(e)}const ut={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},dt=["rejected"];function mt({editable:e,dnd:t,getFileInput:i,addFilesToQueue:c}){const{props:s,emit:d,proxy:a}=ye(),q=M(null),h=S(()=>s.accept!==void 0?s.accept.split(",").map(n=>(n=n.trim(),n==="*"?"*/":(n.endsWith("/*")&&(n=n.slice(0,n.length-1)),n.toUpperCase()))):null),U=S(()=>parseInt(s.maxFiles,10)),A=S(()=>parseInt(s.maxTotalSize,10));function V(n){if(e.value)if(n!==Object(n)&&(n={target:null}),n.target!==null&&n.target.matches('input[type="file"]')===!0)n.clientX===0&&n.clientY===0&&Ee(n);else{const D=i();D&&D!==n.target&&D.click(n)}}function C(n){e.value&&n&&c(null,n)}function k(n,D,I,T){let m=Array.from(D||n.target.files);const R=[],$=()=>{R.length>0&&d("rejected",R)};if(s.accept!==void 0&&h.value.indexOf("*/")===-1&&(m=J(m,R,"accept",f=>h.value.some(w=>f.type.toUpperCase().startsWith(w)||f.name.toUpperCase().endsWith(w))),m.length===0))return $();if(s.maxFileSize!==void 0){const f=parseInt(s.maxFileSize,10);if(m=J(m,R,"max-file-size",w=>w.size<=f),m.length===0)return $()}if(s.multiple!==!0&&m.length>0&&(m=[m[0]]),m.forEach(f=>{f.__key=f.webkitRelativePath+f.lastModified+f.name+f.size}),T===!0){const f=I.map(w=>w.__key);m=J(m,R,"duplicate",w=>f.includes(w.__key)===!1)}if(m.length===0)return $();if(s.maxTotalSize!==void 0){let f=T===!0?I.reduce((w,K)=>w+K.size,0):0;if(m=J(m,R,"max-total-size",w=>(f+=w.size,f<=A.value)),m.length===0)return $()}if(typeof s.filter=="function"){const f=s.filter(m);m=J(m,R,"filter",w=>f.includes(w))}if(s.maxFiles!==void 0){let f=T===!0?I.length:0;if(m=J(m,R,"max-files",()=>(f++,f<=U.value)),m.length===0)return $()}if($(),m.length>0)return m}function N(n){ee(n),t.value!==!0&&(t.value=!0)}function r(n){ge(n),(n.relatedTarget!==null||Qe.is.safari!==!0?n.relatedTarget!==q.value:document.elementsFromPoint(n.clientX,n.clientY).includes(q.value)===!1)===!0&&(t.value=!1)}function y(n){ee(n);const D=n.dataTransfer.files;D.length>0&&c(null,D),t.value=!1}function E(n){if(t.value===!0)return L("div",{ref:q,class:`q-${n}__dnd absolute-full`,onDragenter:ee,onDragover:ee,onDragleave:r,onDrop:y})}return Object.assign(a,{pickFiles:V,addFiles:C}),{pickFiles:V,addFiles:C,onDragover:N,onDragleave:r,processFiles:k,getDndNode:E,maxFilesNumber:U,maxTotalSizeNumber:A}}var ct=ze({name:"QFile",inheritAttrs:!1,props:G(B(B(B({},Ie),Te),ut),{modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]}),emits:[...Pe,...dt],setup(e,{slots:t,emit:i,attrs:c}){const{proxy:s}=ye(),d=Be(),a=M(null),q=M(!1),h=Le(e),{pickFiles:U,onDragover:A,onDragleave:V,processFiles:C,getDndNode:k}=mt({editable:d.editable,dnd:q,getFileInput:W,addFilesToQueue:Y}),N=Me(e),r=S(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),y=S(()=>ue(r.value)),E=S(()=>r.value.map(o=>o.name).join(", ")),n=S(()=>Ke(r.value.reduce((o,g)=>o+g.size,0))),D=S(()=>({totalSize:n.value,filesNumber:r.value.length,maxFiles:e.maxFiles})),I=S(()=>G(B({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:h.value},c),{id:d.targetUid.value,disabled:d.editable.value!==!0})),T=S(()=>"q-file q-field--auto-height"+(q.value===!0?" q-file--dnd":"")),m=S(()=>e.multiple===!0&&e.append===!0);function R(o){const g=r.value.slice();g.splice(o,1),f(g)}function $(o){const g=r.value.findIndex(o);g>-1&&R(g)}function f(o){i("update:modelValue",e.multiple===!0?o:o[0])}function w(o){o.keyCode===13&&Je(o)}function K(o){(o.keyCode===13||o.keyCode===32)&&U(o)}function W(){return a.value}function Y(o,g){const F=C(o,g,r.value,m.value),P=W();P!=null&&(P.value=""),F!==void 0&&((e.multiple===!0?e.modelValue&&F.every(Ue=>r.value.includes(Ue)):e.modelValue===F[0])||f(m.value===!0?r.value.concat(F):F))}function X(){return[L("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function se(){if(t.file!==void 0)return r.value.length===0?X():r.value.map((g,F)=>t.file({index:F,file:g,ref:this}));if(t.selected!==void 0)return r.value.length===0?X():t.selected({files:r.value,ref:this});if(e.useChips===!0)return r.value.length===0?X():r.value.map((g,F)=>L(at,{key:"file-"+F,removable:d.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{R(F)}},()=>L("span",{class:"ellipsis",textContent:g.name})));const o=e.displayValue!==void 0?e.displayValue:E.value;return o.length>0?[L("div",{class:e.inputClass,style:e.inputStyle,textContent:o})]:X()}function p(){const o=G(B(B({ref:a},I.value),N.value),{class:"q-field__input fit absolute-full cursor-pointer",onChange:Y});return e.multiple===!0&&(o.multiple=!0),L("input",o)}return Object.assign(d,{fieldClass:T,emitValue:f,hasValue:y,inputRef:a,innerValue:r,floatingLabel:S(()=>y.value===!0||ue(e.displayValue)),computedCounter:S(()=>{if(e.counterLabel!==void 0)return e.counterLabel(D.value);const o=e.maxFiles;return`${r.value.length}${o!==void 0?" / "+o:""} (${n.value})`}),getControlChild:()=>k("file"),getControl:()=>{const o={ref:d.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return d.editable.value===!0&&Object.assign(o,{onDragover:A,onDragleave:V,onKeydown:w,onKeyup:K}),L("div",o,[p()].concat(se()))}}),Object.assign(s,{removeAtIndex:R,removeFile:$,getNativeElement:()=>a.value}),Xe(s,"nativeEl",()=>a.value),He(d)}});const pt=async({employee:e,assignment:t,effectiveNow:i,values:c,attachments:s,ratings:d})=>{console.log(s);const{userData:a,getUserType:q}=tt(),h=a;h.access&&delete h.access,h.permissions&&delete h.permissions;const U=[{25:{value:e[3]},28:{value:t[3]},30:{value:c.selection[10]},35:{value:t[142]},36:{value:c.effective},38:{value:JSON.stringify(h)},39:{value:q!=="QuickBase User"},60:{value:d.comments?d.comments:""},72:{value:c.equipment.value}}];if(i){const{ee:A,assign:V}=await ft({assignment:t}),{data:C}=await z.upsertRecordsXML({to:"bp3ga39ut",data:U,fieldsToReturn:[37],formatObject:37},{action:"create",type:"release"}),{release:k}=await ve({release:C[0][37][3],employee:C[0][37][25],ratings:d,user:h});if(s.length>0){const{docs:N}=await be({release:k,attachments:s,user:h});return{release:k,employee:A,assignment:V,attachments:N}}else return{release:k,employee:A,assignment:V,attachments:[]}}else{const{data:A}=await z.upsertRecordsXML({to:"bp3ga39ut",data:U,fieldsToReturn:[37],formatObject:37},{action:"create",type:"release"}),{release:V}=await ve({release:A[0][37][3],employee:A[0][37][25],ratings:d,user:h});if(s.length>0){const{docs:C}=await be({release:V,attachments:s,user:h});return{release:V,employee:e,assignment:t,attachments:C}}else return{release:V,employee:e,assignment:t,attachments:[]}}},ve=async({release:e,employee:t,ratings:i,user:c})=>{const{data:s}=await z.upsertRecordsXML({to:"bqzkbcxup",data:[{6:{value:i.attendance},8:{value:i.attitude},10:{value:i.capability},12:{value:i.promotable},14:{value:i.comments?i.comments:""},16:{value:t},34:{value:e},36:{value:JSON.stringify(c)}}],fieldsToReturn:[35],formatObject:35});return{release:s[0][35]}},be=async({release:e,attachments:t,user:i})=>{const c=[];t.forEach(d=>{Object.assign(d,{8:{value:JSON.stringify(i)},9:{value:e[3]},10:{value:e[25]}}),c.push(d)});const{data:s}=await z.upsertRecordsXML({to:"bsstsai5d",data:c,fieldsToReturn:[12],formatObject:12});return{docs:s}},ft=async({assignment:e})=>{const{removeData:t}=rt(),i=[{3:{value:e[3]},21:{value:"Complete"},22:{value:ne().tz("America/Chicago")}}],{data:c}=await z.upsertRecordsXML({to:"bp3gazpqj",data:i,fieldsToReturn:[110],formatObject:110});return t({type:"assignments",key:c[0][110][74],item:c[0][110],storageKey:We.storageAssignments}),{ee:await vt(e[18]),assign:c[0][110]}},vt=async e=>{const t=[{3:{value:e},79:{value:19}}],{data:i}=await z.upsertRecordsXML({to:"bp3gb7ng2",data:t,fieldsToReturn:[549],formatObject:549});return i[0][549]},bt=Ve({emits:["releaseSubmitted"],props:{record:Object,employee:Object},setup(e,{emit:t}){const i=M(!1),c=M(null),s=M([]),d=Ae(),a=he(),{getTermReasons:q,setTermReasons:h}=De(),U=S(()=>oe({selection:oe().required().nullable().label("Reason"),effective:st().required().label("Last Day On Site"),category:fe().nullable(),attendance:_().required().label("Attendance"),capability:_().required().label("Capability"),attitude:_().required().label("Attitude"),promotable:_().required().label("Promotability"),comments:fe().nullable().label("Comments"),equipment:oe().required().nullable().label("Equipment Returned")})),{errors:A,handleSubmit:V,handleReset:C}=it({validationSchema:U,initialValues:{}}),{value:k}=O("selection"),{value:N}=O("effective"),{value:r}=O("category"),{value:y}=O("attachments"),{value:E}=O("capability"),{value:n}=O("attendance"),{value:D}=O("attitude"),{value:I}=O("promotable"),{value:T}=O("comments"),{value:m}=O("equipment"),R=S(()=>{const p=q();return r.value?p.filter(o=>o[6]===r.value).sort((o,g)=>o[12]>g[12]?1:-1):p.sort((o,g)=>o[12]>g[12]?1:-1)}),$=V(async p=>{if(console.log(p),console.log(s.value),i.value&&s.value.length===0)d.dialog({title:"Alert",message:"Supporting documents are required for this reason!"});else{const o={capability:p.capability,attendance:p.attendance,attitude:p.attitude,promotable:p.promotable,comments:p.comments};d.dialog({title:"Confirm",message:"Are you sure you want to release this employee?",cancel:!0,persistent:!0}).onOk(async()=>{try{const{release:g,employee:F,assignment:P}=await pt({employee:e.employee,assignment:e.record,values:p,effectiveNow:!K.value,attachments:s.value,ratings:o});t("releaseSubmitted",{release:g,employee:F,assignment:P,effectiveNow:!K.value}),C()}catch{d.notify({type:"negative",message:"Cannot submit release."})}})}}),f=()=>{d.dialog({title:"Confirm",message:"Are you sure you want to cancel?",cancel:!0,persistent:!0}).onOk(()=>{C(),a.go(-1)})};Se(k,(p,o)=>{p&&p[19]?(i.value=!0,y.value=!0,console.log(y.value)):(y.value=!1,i.value=!1)});const w=S(()=>{const p=q();return[...new Map(p.map(o=>[o[6],o[6]])).values()]}),K=S(()=>N.value&&N.value!==""?ne().isBefore(ne(N.value)):!1),W=p=>new Promise((o,g)=>{const F=new FileReader;F.readAsDataURL(p),F.onload=()=>o(F.result.replace(/^data:.+;base64,/,"")),F.onerror=P=>g(P)}),Y=()=>{c.value&&c.value.forEach(async p=>{const o={6:{value:await W(p),filename:p.name},7:{value:p.name}};s.value.push(o),c.value=null}),console.log(s.value)},X=p=>{console.log(s.value[p]),s.value.splice(p,1)};return(async()=>{if(q().length===0){const{data:p}=await z.fetchFromHiringApp({fields:[Re({type:"termReasons",query:"{'11'.EX.'true'}"})]});h({reasons:p})}})(),{props:e,options:R,primaryReasons:w,category:r,selection:k,effective:N,attachments:y,capability:E,attendance:n,attitude:D,promotable:I,comments:T,equipment:m,attachmentsRequired:i,fileAttachment:c,attachedFiles:s,submit:$,formErrors:A,handleReset:C,cancelRelease:f,showFiles:Y,deleteFile:X}}}),yt={class:"row"},gt={class:"col-3 q-px-sm"},Vt=u("div",{class:"text-caption"},"Is this release voluntary or involuntary?",-1),ht={class:"text-caption"},St={class:"col-4 q-pl-xs q-pr-sm"},qt=u("div",{class:"text-caption"},"What is the reason for this release?",-1),wt={class:"text-caption"},Ft={class:"col-3 q-pl-xs q-pr-sm"},Ct=u("div",{class:"text-caption"},"When is the employee's last day on site?",-1),At={class:"text-caption"},Rt={class:"row"},Dt={class:"col-4 q-pl-xs q-pr-sm"},Ut=u("div",{class:"text-caption"},"Has all Company Equipment been returned?",-1),kt={class:"text-caption"},Nt={class:"row items-top justify-between q-mt-md"},$t={class:"col-4 q-pl-xs q-pr-sm"},Ot={key:0,class:"text-body2 text-negative q-mb-md"},jt={key:0},Et={key:1},Qt={key:1,class:"text-body2 text-accent q-mb-md"},zt=u("span",null,"Supporting documents are optional for this reason.",-1),It=[zt],Tt={key:0,class:"col-6 q-pl-xs q-pr-sm"},Pt=u("div",{class:"text-body1 text-info q-mb-sm"},"Attached Documents",-1),Bt={class:"row q-mb-md"},Lt={class:"col-12"},Mt=u("div",{class:"q-pa-sm"},[u("div",{class:"text-h6 text-primary text-bold"},"CAAP Rating"),u("div",{class:"text-subtitle1 text-accent text-italic"},"Capability, Attendance, Attitude, and Promotability"),u("div",{class:"text-body1 text-dark q-mt-sm"},"Select how much you agree with each of the following statements.")],-1),Kt={class:"q-pb-sm"},Xt=u("div",{class:"text-body2 text-info text-bold q-mb-sm"},"This employee is capable of performing their assigned job.",-1),Ht={class:"q-pb-sm"},Jt=u("div",{class:"text-body2 text-info text-bold q-mb-sm"},"This employee regularly shows up to work on time.",-1),Wt={class:"q-pb-sm"},Yt=u("div",{class:"text-body2 text-info text-bold q-mb-sm"},"This employee has a good attitude.",-1),Gt={class:"q-pb-sm"},Zt=u("div",{class:"text-body2 text-info text-bold q-mb-sm"},"I am confident that this employee can be promoted in the future.",-1),xt={class:"row q-py-sm"},_t={class:"col-12"};function ea(e,t,i,c,s,d){return j(),Q("div",null,[l(nt,{onSubmit:Ze(e.submit,["prevent"])},{default:b(()=>[u("div",yt,[u("div",gt,[Vt,l(le,{dense:"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.category,"onUpdate:modelValue":t[0]||(t[0]=a=>e.category=a),options:e.primaryReasons},{error:b(()=>[u("div",ht,H(e.formErrors.selection),1)]),"no-option":b(()=>[l(te,null,{default:b(()=>[l(Z,{class:"text-grey"},{default:b(()=>[ae(" No Options Available ")]),_:1})]),_:1})]),_:1},8,["modelValue","options"])]),u("div",St,[qt,l(le,{dense:"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.selection,"onUpdate:modelValue":t[1]||(t[1]=a=>e.selection=a),options:e.options,"option-label":"12","display-value":`${e.selection?e.selection[12]:""}`,"bottom-slots":"",error:!!e.formErrors.selection,disable:!e.category},{error:b(()=>[u("div",wt,H(e.formErrors.selection),1)]),"no-option":b(()=>[l(te,null,{default:b(()=>[l(Z,{class:"text-grey"},{default:b(()=>[ae(" No Options Available ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","display-value","error","disable"])]),u("div",Ft,[Ct,l(de,{dense:"",type:"date",modelValue:e.effective,"onUpdate:modelValue":t[2]||(t[2]=a=>e.effective=a),error:!!e.formErrors.effective,"bottom-slots":""},{error:b(()=>[u("div",At,H(e.formErrors.effective),1)]),_:1},8,["modelValue","error"])])]),u("div",Rt,[u("div",Dt,[Ut,l(le,{dense:"","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.equipment,"onUpdate:modelValue":t[3]||(t[3]=a=>e.equipment=a),options:[{value:!0,label:"Yes"},{value:!1,label:"No"},{value:!0,label:"None Issued"}],"bottom-slots":"",error:!!e.formErrors.equipment},{error:b(()=>[u("div",kt,H(e.formErrors.equipment),1)]),_:1},8,["modelValue","error"])])]),l(me),u("div",Nt,[u("div",$t,[e.attachmentsRequired?(j(),Q("div",Ot,[e.selection[12].toLowerCase().includes("attendance")?(j(),Q("span",jt,"Supporting attendance records must be attached.")):(j(),Q("span",Et,"Supporting documents are required for this reason."))])):(j(),Q("div",Qt,It)),l(ct,{dense:"","bottom-slots":"",modelValue:e.fileAttachment,"onUpdate:modelValue":t[4]||(t[4]=a=>e.fileAttachment=a),multiple:"",append:"",label:"Attach Supporting Documents"},{after:b(()=>[l(x,{dense:"",color:"info",round:"",flat:"",icon:"cloud_upload",onClick:e.showFiles},null,8,["onClick"])]),_:1},8,["modelValue"])]),e.attachedFiles.length>0?(j(),Q("div",Tt,[Pt,l(ot,{dense:""},{default:b(()=>[(j(!0),Q(ce,null,Ye(e.attachedFiles,(a,q)=>(j(),Q(ce,{key:a},[l(te,null,{default:b(()=>[l(Z,null,{default:b(()=>[l(lt,null,{default:b(()=>[ae(H(q+1)+". "+H(a[6].filename),1)]),_:2},1024)]),_:2},1024),l(Z,{side:""},{default:b(()=>[l(x,{color:"accent",round:"",flat:"",class:"cursor-pointer",icon:"delete",size:"md",onClick:h=>e.deleteFile(q)},null,8,["onClick"])]),_:2},1024)]),_:2},1024),l(me)],64))),128))]),_:1})])):we("",!0)]),u("div",Bt,[u("div",Lt,[Mt,l(Fe,null,{default:b(()=>[l(Ce,null,{default:b(()=>[u("div",null,[u("div",Kt,[Xt,l(v,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[5]||(t[5]=a=>e.capability=a),val:"1",label:"Strongly Disagree"},null,8,["modelValue"]),l(v,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[6]||(t[6]=a=>e.capability=a),val:"2",label:"Disagree"},null,8,["modelValue"]),l(v,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[7]||(t[7]=a=>e.capability=a),val:"3",label:"Neutral"},null,8,["modelValue"]),l(v,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[8]||(t[8]=a=>e.capability=a),val:"4",label:"Agree"},null,8,["modelValue"]),l(v,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[9]||(t[9]=a=>e.capability=a),val:"5",label:"Strongly Agree"},null,8,["modelValue"]),l(v,{name:"capability",modelValue:e.capability,"onUpdate:modelValue":t[10]||(t[10]=a=>e.capability=a),val:"0",label:"I Do Not Know"},null,8,["modelValue"])]),u("div",Ht,[Jt,l(v,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[11]||(t[11]=a=>e.attendance=a),val:"1",label:"Strongly Disagree"},null,8,["modelValue"]),l(v,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[12]||(t[12]=a=>e.attendance=a),val:"2",label:"Disagree"},null,8,["modelValue"]),l(v,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[13]||(t[13]=a=>e.attendance=a),val:"3",label:"Neutral"},null,8,["modelValue"]),l(v,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[14]||(t[14]=a=>e.attendance=a),val:"4",label:"Agree"},null,8,["modelValue"]),l(v,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[15]||(t[15]=a=>e.attendance=a),val:"5",label:"Strongly Agree"},null,8,["modelValue"]),l(v,{name:"attendance",modelValue:e.attendance,"onUpdate:modelValue":t[16]||(t[16]=a=>e.attendance=a),val:"0",label:"I Do Not Know"},null,8,["modelValue"])]),u("div",Wt,[Yt,l(v,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[17]||(t[17]=a=>e.attitude=a),val:"1",label:"Strongly Disagree"},null,8,["modelValue"]),l(v,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[18]||(t[18]=a=>e.attitude=a),val:"2",label:"Disagree"},null,8,["modelValue"]),l(v,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[19]||(t[19]=a=>e.attitude=a),val:"3",label:"Neutral"},null,8,["modelValue"]),l(v,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[20]||(t[20]=a=>e.attitude=a),val:"4",label:"Agree"},null,8,["modelValue"]),l(v,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[21]||(t[21]=a=>e.attitude=a),val:"5",label:"Strongly Agree"},null,8,["modelValue"]),l(v,{name:"attitude",modelValue:e.attitude,"onUpdate:modelValue":t[22]||(t[22]=a=>e.attitude=a),val:"0",label:"I Do Not Know"},null,8,["modelValue"])]),u("div",Gt,[Zt,l(v,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[23]||(t[23]=a=>e.promotable=a),val:"1",label:"Strongly Disagree"},null,8,["modelValue"]),l(v,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[24]||(t[24]=a=>e.promotable=a),val:"2",label:"Disagree"},null,8,["modelValue"]),l(v,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[25]||(t[25]=a=>e.promotable=a),val:"3",label:"Neutral"},null,8,["modelValue"]),l(v,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[26]||(t[26]=a=>e.promotable=a),val:"4",label:"Agree"},null,8,["modelValue"]),l(v,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[27]||(t[27]=a=>e.promotable=a),val:"5",label:"Strongly Agree"},null,8,["modelValue"]),l(v,{name:"promotable",modelValue:e.promotable,"onUpdate:modelValue":t[28]||(t[28]=a=>e.promotable=a),val:"0",label:"I Do Not Know"},null,8,["modelValue"])])])]),_:1})]),_:1})])]),u("div",xt,[u("div",_t,[l(de,{filled:"",type:"textarea",modelValue:e.comments,"onUpdate:modelValue":t[29]||(t[29]=a=>e.comments=a),label:"Comments"},null,8,["modelValue"])])]),l(Ge,{align:"right"},{default:b(()=>[l(x,{color:"info",label:"Submit",type:"submit"}),l(x,{color:"secondary",label:"Cancel",onClick:e.cancelRelease},null,8,["onClick"])]),_:1})]),_:1},8,["onSubmit"])])}var ta=qe(bt,[["render",ea]]);const aa=Ve({components:{ReleaseForm:ta},setup(){const e=M(0),t=xe(),i=he(),c=Ae(),{getEmployee:s,getAssignmentsByEmployee:d,setAssignmentsByEmployee:a,setEmployees:q,setReleases:h,setReleasesByAssignment:U,setReleasesByEmployee:A}=De(),V=S(()=>s(t.params.id)),C=S(()=>V.value?d(V.value[3]):null),k=async()=>{if(!C.value&&V.value[577]){const{data:r}=await z.fetchFromHiringApp({fields:[Re({type:"assignments",query:"",id:V.value[577]})]});console.log(r),a({id:V.value[3],data:r})}};return Se(V,(r,y)=>{r&&k()}),{employee:V,assignment:C,releaseSubmitted:({employee:r,release:y,assignment:E,effectiveNow:n})=>{c.notify({type:"positive",message:"Release successfully submitted."}),n?(r[581]=y[3],h({id:y[3],data:y}),q({id:r[3],data:r}),a({id:r[3],assignment:E}),U({id:E[3],data:y}),A({id:r[3],data:y})):(r[581]=y[3],q({id:r[3],data:r}),h({id:y[3],data:y}),U({id:E[3],data:y}),A({id:r[3],data:y})),i.replace({name:"view-ee-release",params:{id:r[3],release:y[3]}})},step:e}}}),la={class:"q-pa-sm"},oa={class:"row"},na={class:"col-12"},sa=u("div",{class:"text-h6 q-mb-md"},"Please complete the following to submit this release.",-1);function ia(e,t,i,c,s,d){const a=_e("release-form");return j(),pe(et,{style:{"max-width":"100vw"}},{default:b(()=>[u("div",la,[u("div",oa,[u("div",na,[l(Fe,null,{default:b(()=>[e.assignment?(j(),pe(Ce,{key:0},{default:b(()=>[sa,l(a,{record:e.assignment,employee:e.employee,onReleaseSubmitted:e.releaseSubmitted},null,8,["record","employee","onReleaseSubmitted"])]),_:1})):we("",!0)]),_:1})])])])]),_:1})}var $a=qe(aa,[["render",ia]]);export{$a as default};
