import{c as q,bY as je,i as Xe,n as Ye,dz as Le,h as X,bX as D,bR as re,cC as Ee,g as Oe,c1 as He,c4 as We,r as A,d9 as Ke,c9 as Ge,b1 as Ze,bZ as xe,l as J,_ as F,b6 as E,B as d,C as _,d as l,bs as i,E as c,ad as V,as as C,cW as Z,bP as $e,ar as y,cA as ye,H as Se,cV as T,F as se,b5 as ie,cU as Y,bU as be,ay as qe,z as Te,bW as Ue,bT as ea,cX as te,w as aa,I as ta,bV as sa}from"./index.6445649d.js";import{Q as ve,a as oa,b as ge}from"./QTabPanels.4fef6a4c.js";import{Q as la}from"./QTabs.8bde14ac.js";import{Q as Me}from"./QPage.d537052c.js";import{u as W}from"./use-quasar.6b0fc2a2.js";import{q as M,u as ue,b as na}from"./app.432f16da.js";import{dayjs as H}from"./dayjs.13074a16.js";import{a as z,c as ae,e as Pe}from"./array.59f93f43.js";import{a as he,b as ra}from"./useQuerySaver.d29ff9ee.js";import{u as oe}from"./dataStore.beb537a4.js";import{a as de}from"./QSelect.96a0a0b7.js";import{Q as Ce}from"./QForm.11c50212.js";import{a as Re,u as B}from"./vee-validate.esm.1bfd7eb5.js";import{A as ia,a as da}from"./addNewCustomer.4a4c4a17.js";import{a as we,Q as Ae}from"./QTable.966a8a55.js";import{Q as me}from"./QTr.d09fa453.js";import{Q as fe}from"./QTd.9445b09d.js";import{N as ua}from"./nameRequestData.bd771450.js";import{P as ca}from"./projectPipeline.9b24c1fb.js";import{u as Fe,P as ma,c as fa}from"./pay-rate-v2.f3c06657.js";import{p as ba}from"./VueTelInput.8d02b1af.js";import"./use-panel.f1aefeaa.js";import"./touch.3df10340.js";import"./selection.fcdf0e25.js";import"./QResizeObserver.ad4005e8.js";import"./rtl.b51694b1.js";import"./_commonjsHelpers.a26ce4be.js";import"./localForage.5316d215.js";import"./api.eb11d89f.js";import"./index.04bc0a32.js";import"./i18n.df957a9c.js";import"./QChip.0a911185.js";import"./QMenu.18c7bf43.js";import"./position-engine.1b1a8b3e.js";import"./states.03e3d448.js";import"./QList.68f1787a.js";import"./QMarkupTable.8ddc3f5e.js";import"./use-fullscreen.59da6644.js";import"./QSpinnerGears.17418321.js";import"./QTooltip.3bc607d5.js";import"./QInnerLoading.eaf9df89.js";import"./export-file.dc78ba05.js";const pa=["top","right","bottom","left"],Qe={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>pa.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function Ie(e,a){return{formClass:q(()=>`q-fab--form-${e.square===!0?"square":"rounded"}`),stacked:q(()=>e.externalLabel===!1&&["top","bottom"].includes(e.labelPosition)),labelProps:q(()=>{if(e.externalLabel===!0){const u=e.hideLabel===null?a.value===!1:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${e.labelPosition}`+(u===!0?" q-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${e.labelPosition}`+(e.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:e.labelStyle}}})}}const Be={start:"self-end",center:"self-center",end:"self-start"},va=Object.keys(Be);var ne=je({name:"QFabAction",props:{...Qe,icon:{type:String,default:""},anchor:{type:String,validator:e=>va.includes(e)},to:[String,Object],replace:Boolean},emits:["click"],setup(e,{slots:a,emit:u}){const t=Xe(Le,()=>({showing:{value:!0},onChildClick:Ye})),{formClass:m,labelProps:b}=Ie(e,t.showing),s=q(()=>{const v=Be[e.anchor];return m.value+(v!==void 0?` ${v}`:"")}),o=q(()=>e.disable===!0||t.showing.value!==!0);function r(v){t.onChildClick(v),u("click",v)}function N(){const v=[];return a.icon!==void 0?v.push(a.icon()):e.icon!==""&&v.push(X(re,{name:e.icon})),(e.label!==""||a.label!==void 0)&&v[b.value.action](X("div",b.value.data,a.label!==void 0?a.label():[e.label])),Ee(a.default,v)}const R=Oe();return Object.assign(R.proxy,{click:r}),()=>X(D,{class:s.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:o.value,onClick:r},N)}});const ga=["up","right","down","left"],ha=["left","center","right"];var De=je({name:"QFab",props:{...Qe,...He,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{default:null},direction:{type:String,default:"right",validator:e=>ga.includes(e)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>ha.includes(e)}},emits:We,setup(e,{slots:a}){const u=A(null),t=A(e.modelValue===!0),m=Ke(),{proxy:{$q:b}}=Oe(),{formClass:s,labelProps:o}=Ie(e,t),r=q(()=>e.persistent!==!0),{hide:N,toggle:R}=Ge({showing:t,hideOnRouteChange:r}),v=q(()=>({opened:t.value})),k=q(()=>`q-fab z-fab row inline justify-center q-fab--align-${e.verticalActionsAlign} ${s.value}`+(t.value===!0?" q-fab--opened":" q-fab--closed")),S=q(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${e.direction} q-fab__actions--${t.value===!0?"opened":"closed"}`),f=q(()=>{const $={id:m.value,role:"menu"};return t.value!==!0&&($["aria-hidden"]="true"),$}),n=q(()=>`q-fab__icon-holder  q-fab__icon-holder--${t.value===!0?"opened":"closed"}`);function w($,L){const P=a[$],I=`q-fab__${$} absolute-full`;return P===void 0?X(re,{class:I,name:e[L]||b.iconSet.fab[L]}):X("div",{class:I},P(v.value))}function Q(){const $=[];return e.hideIcon!==!0&&$.push(X("div",{class:n.value},[w("icon","icon"),w("active-icon","activeIcon")])),(e.label!==""||a.label!==void 0)&&$[o.value.action](X("div",o.value.data,a.label!==void 0?a.label(v.value):[e.label])),Ee(a.tooltip,$)}return Ze(Le,{showing:t,onChildClick($){N($),u.value!==null&&u.value.$el.focus()}}),()=>X("div",{class:k.value},[X(D,{ref:u,class:s.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":t.value===!0?"true":"false","aria-haspopup":"true","aria-controls":m.value,onClick:R},Q),X("div",{class:S.value,...f.value},xe(a.default))])}});const ya=J({emits:["cancelEdit"],components:{AddProjectLocationForm:ia,AddCustomerForm:da},props:{config:Object},setup(e,{emit:a}){const u=A(null),t=A(null),m=A(!1),b=async()=>{const{type:f,initialValue:n}=e.config;if(f==="options"){const{getter:w}=e.config;t.value=await w(),u.value=t.value,R.value=n(u.value)}else R.value=n},s=q(()=>z({entry:e.config.formRules})),{meta:o,errors:r,handleSubmit:N}=Re({validationSchema:s}),{value:R}=B("entry"),v=(f,n)=>{const{filter:w}=e.config;f===""&&n(()=>{u.value=t.value}),n(()=>{const Q=f.toLowerCase();u.value=w(t.value,Q)})},k=f=>{m.value=!1,t.value.push(f),u.value.push(f),R.value=f},S=N(async f=>{const{setter:n}=e.config;await n(f.entry),a("cancelEdit")});return b(),{rawOptions:t,options:u,entry:R,formErrors:r,formMeta:o,submit:S,filterOptions:v,addNew:m,newOptionAdded:k}}}),qa={key:0,class:"q-pr-xl"},wa={class:"text-caption"},$a={key:0,class:"text-center bg-info"},Ca={key:0,class:"text-center bg-info"},Ra={key:1,class:"q-pr-xl"},ka={class:"text-caption"};function Na(e,a,u,t,m,b){const s=E("add-project-location-form"),o=E("add-customer-form");return d(),_("div",null,[l(Ce,{onSubmit:$e(e.submit,["prevent"])},{default:i(()=>[e.config.type==="options"?(d(),_("div",qa,[l(de,{class:"q-mb-sm",dense:"",label:`Select a ${e.config.fieldLabel}`,"transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.entry,"onUpdate:modelValue":a[3]||(a[3]=r=>e.entry=r),options:e.options,"option-label":e.config.optionLabel,"display-value":`${e.entry?e.entry[e.config.displayValue]:""}`,"bottom-slots":"",error:!!e.formErrors.entry,"stack-label":"","use-input":"","input-debounce":"0",onFilter:e.filterOptions,clearable:"",loading:!e.rawOptions,disable:!e.rawOptions},{error:i(()=>[c("div",wa,V(e.formErrors.entry),1)]),after:i(()=>[l(D,{type:"submit",color:"info",icon:"done",dense:"",onClick:e.submit},null,8,["onClick"]),l(D,{color:"dark",icon:"close",dense:"",onClick:a[0]||(a[0]=r=>e.$emit("cancelEdit"))})]),"after-options":i(()=>[e.config.allowNew&&e.options&&e.options.length>0?(d(),_("div",$a,[l(D,{flat:"",color:"white",label:`Add a New ${e.config.fieldLabel}`,onClick:a[1]||(a[1]=r=>e.addNew=!0)},null,8,["label"])])):C("",!0)]),"no-option":i(()=>[e.config.allowNew?(d(),_("div",Ca,[l(D,{flat:"",color:"white",label:`Add a New ${e.config.fieldLabel}`,onClick:a[2]||(a[2]=r=>e.addNew=!0)},null,8,["label"])])):C("",!0)]),_:1},8,["label","modelValue","options","option-label","display-value","error","onFilter","loading","disable"])])):C("",!0),e.config.type==="input"?(d(),_("div",Ra,[l(Z,{class:"q-mb-sm",dense:"",label:e.config.fieldLabel,modelValue:e.entry,"onUpdate:modelValue":a[5]||(a[5]=r=>e.entry=r),"bottom-slots":"",error:!!e.formErrors.entry,"stack-label":""},{error:i(()=>[c("div",ka,V(e.formErrors.entry),1)]),after:i(()=>[l(D,{type:"submit",color:"info",icon:"done",dense:"",onClick:e.submit},null,8,["onClick"]),l(D,{color:"dark",icon:"close",dense:"",onClick:a[4]||(a[4]=r=>e.$emit("cancelEdit"))})]),_:1},8,["label","modelValue","error"])])):C("",!0)]),_:1},8,["onSubmit"]),l(ye,{modelValue:e.addNew,"onUpdate:modelValue":a[8]||(a[8]=r=>e.addNew=r)},{default:i(()=>[e.config.newType==="location"?(d(),y(s,{key:0,onCancelAdd:a[6]||(a[6]=r=>e.addNew=!1),onAddComplete:e.newOptionAdded},null,8,["onAddComplete"])):C("",!0),e.config.newType==="customer"?(d(),y(o,{key:1,onCancelAdd:a[7]||(a[7]=r=>e.addNew=!1),onAddComplete:e.newOptionAdded},null,8,["onAddComplete"])):C("",!0)]),_:1},8,["modelValue"])])}var _a=F(ya,[["render",Na]]);const Aa=J({emits:[],props:{item:Object},components:{EditDetailsForm:_a},setup(e,{emit:a}){const u=A(!1),t=q(()=>{const{permission:m}=e.item.editable&&e.item.config?e.item.config:{action:null,subject:null};return m});return{edit:u,permission:t}}}),Va={key:0,class:"row"},Sa={class:"col-12 col-md-4"},Pa={class:"col-12 col-md-8"},Da=["innerHTML"];function ja(e,a,u,t,m,b){const s=E("edit-details-form");return d(),y(T,{class:"q-py-sm"},{default:i(()=>[e.edit?(d(),y(s,{key:1,type:e.item.label,config:e.item.config,onCancelEdit:a[1]||(a[1]=o=>e.edit=!1)},null,8,["type","config"])):(d(),_("div",Va,[c("div",Sa,[c("div",null,[c("span",{class:Se(e.$q.screen.gt.lg?"text-body2":"text-caption")},V(e.item.label),3)])]),c("div",Pa,[c("div",null,[c("span",{class:Se(["text-weight-light",e.$q.screen.gt.lg?"text-body2":"text-caption"]),innerHTML:e.item.value},null,10,Da),e.item.editable&&e.$can(e.permission.action,e.permission.subject)?(d(),y(D,{key:0,color:"accent",flat:"",dense:"",round:"",icon:"edit",size:"sm",onClick:a[0]||(a[0]=o=>e.edit=!0)})):C("",!0)])])]))]),_:1})}var La=F(Aa,[["render",ja]]);const Ea=J({props:{title:String,details:Array},components:{DetailsSection:La}}),Oa={class:"text-body1 text-white"};function Ta(e,a,u,t,m,b){const s=E("details-section");return d(),_("div",null,[l(Y,{class:"text-dark q-pb-sm"},{default:i(()=>[e.title&&e.title!==""?(d(),y(T,{key:0,class:"bg-info q-py-sm"},{default:i(()=>[c("div",Oa,V(e.title.toUpperCase()),1)]),_:1})):C("",!0),(d(!0),_(se,null,ie(e.details,o=>(d(),_(se,{key:o},[o.hide?C("",!0):(d(),y(s,{key:0,item:o},null,8,["item"]))],64))),128))]),_:1})])}var Ua=F(Ea,[["render",Ta]]);const Ma=J({props:{rows:Array},setup(e,a){const u=W();be();const t=q(()=>u.screen.gt.sm?[{name:1,label:"Created",align:"left",field:s=>s[1].$d,format:s=>`${H(s).format("L LT")}`,sortable:!0},{name:2,label:"ID",align:"left",field:s=>s[3],format:s=>`${s}`,sortable:!0,required:!0},{name:3,label:"Classification",align:"left",field:s=>s[21],format:s=>`${s===""?"Open":s}`,sortable:!0,required:!0},{name:4,label:"Status",align:"left",field:s=>s[17],format:s=>`${s}`,sortable:!0},{name:5,label:"Rate",align:"left",field:s=>s[23],format:s=>`$ ${s.toFixed(2)}`,sortable:!0,required:!0},{name:6,label:"# Requested",align:"right",field:s=>s[18],format:s=>`${s}`},{name:7,label:"Offers",align:"right",field:s=>m(s),format:s=>`${s}`,sortable:!0,required:!0},{name:8,label:"# Names",align:"right",field:s=>s.names,format:s=>s?s.length:0,sortable:!0,required:!0},{name:9,label:"Balance",align:"right",field:s=>b(s),format:s=>`${s}`,sortable:!0,required:!0}]:[]);function m(s){return s.offers.filter(o=>o[21]==="Accepted").length}function b(s){const o=m(s);return s[18]-o}return{columns:t,props:e}}}),Fa={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function Qa(e,a,u,t,m,b){return d(),_("div",null,[l(Ae,{columns:e.columns,rows:e.props.rows,"row-key":s=>s[3],class:"q-pa-sm",pagination:{rowsPerPage:10},"table-header-class":"bg-dark text-white","no-data-label":"There are no classifications",dense:""},{header:i(s=>[l(me,{class:"bg-dark text-white",props:s},{default:i(()=>[(d(!0),_(se,null,ie(s.cols,o=>(d(),y(we,{key:o.name,props:s},{default:i(()=>[qe(V(o.label),1)]),_:2},1032,["props"]))),128)),l(we,{"auto-width":""})]),_:2},1032,["props"])]),body:i(s=>[l(me,{props:s},{default:i(()=>[(d(!0),_(se,null,ie(s.cols,o=>(d(),y(fe,{key:o.name,props:s},{default:i(()=>[qe(V(o.value),1)]),_:2},1032,["props"]))),128)),l(fe,{"auto-width":""},{default:i(()=>[s.row[17]==="Pending"&&e.$can("manage","projectRequests")&&!e.$can("read","hireRequests")?(d(),y(re,{key:0,class:"cursor-pointer",size:e.$q.screen.gt.sm?"sm":"xs",color:"primary",round:"",dense:"",onClick:o=>e.$emit("removeRow",s.row),name:"delete_forever"},null,8,["size","onClick"])):C("",!0)]),_:2},1024)]),_:2},1032,["props"])]),"no-data":i(({message:s})=>[c("div",Fa,[l(re,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),c("span",null,V(s),1)])]),"top-right":i(()=>[l(D,{color:"secondary",flat:"","icon-right":"refresh",label:"Refresh",onClick:a[0]||(a[0]=s=>e.$emit("refresh"))})]),_:1},8,["columns","rows","row-key"])])}var Ia=F(Ma,[["render",Qa]]);const Ba=J({props:{data:Object},components:{ClassificationsTable:Ia},setup(e,a){const u=W(),{getClassifications:t,fetchClassifications:m,removeData:b,updateViewedRequests:s,getHireRequest:o}=oe(),r=q(()=>o(e.data[3])&&o(e.data[3]).classes?o(e.data[3]).classes:t(e.data[3]).sort((v,k)=>v[1].$d<k[1].$d?1:-1));async function N(v){u.loading.show();const{data:k}=await m({id:e.data[3]});s({id:e.data[3],dataset:"classes",data:k}),u.loading.hide()}async function R(v){u.dialog({title:"Confirm",message:`Are you sure you want to remove ${v[12]} from request# ${v[6]}?`,cancel:!0,persistent:!0}).onOk(async()=>{try{const{data:k}=await M.upsertRecordsXML({to:"bpzpyqcu4",data:[{3:{value:v[3]},17:{value:"Cancelled"},51:{value:new Date},128:{value:6}}],fieldsToReturn:[220],formatObject:220});b({type:"classifications",key:k[0][220][6],item:k[0][220],storageKey:"storageRequestClassifications"});const S=r.value.filter(f=>f[3]!==k[0][220][3]);s({id:e.data[3],dataset:"classes",data:S})}catch(k){u.notify({type:"negative",message:"Cannot remove classification"}),console.log(k)}})}return N(),{rows:r,removeRow:R,loadData:N}}});function za(e,a,u,t,m,b){const s=E("classifications-table");return d(),_("div",null,[l(s,{rows:e.rows,onRemoveRow:e.removeRow,onRefresh:a[0]||(a[0]=o=>e.loadData(!0))},null,8,["rows","onRemoveRow"])])}var Ja=F(Ba,[["render",za]]);const Xa=J({props:{data:Object},components:{NameRequestDataTable:ua},setup(e,a){const u=W(),t=be(),{capitalize:m}=Te,b=A(""),{getNameRequest:s,fetchNameRequest:o,removeData:r}=oe(),{userData:N}=ue(),R=q(()=>s(e.data[3]).sort((n,w)=>n[1].$d<w[1].$d?1:-1));async function v(){u.loading.show(),await o({id:e.data[3]}),u.loading.hide()}function k(n){return`${m(n[6].toLowerCase())} ${m(n[7].toLowerCase())}`}async function S(n){u.dialog({title:"Confirm",message:`Are you sure you want to remove ${k(n)} from request# ${n[18]}?`,cancel:!0,persistent:!0}).onOk(async()=>{try{const{data:w}=await M.upsertRecordsXML({to:"bsg4yb4wa",data:[{3:{value:n[3]},11:{value:!0},12:{value:H().tz("America/Chicago")},13:{value:`${N[35]} ${N[37]}`}}],fieldsToReturn:[15],formatObject:15});r({type:"nameRequest",key:w[0][15][18],item:w[0][15],storageKey:"storageNameRequest"})}catch(w){u.notify({type:"negative",message:"Cannot remove name request"}),console.log(w)}})}const f=n=>{t.push({name:"ee-summary",params:{id:n[3]}})};return v(),{nameRequests:R,search:b,removeName:S,viewEmployee:f}}}),Ya={class:"row items-center"},Ha={class:"col-12 col-md-4"};function Wa(e,a,u,t,m,b){const s=E("name-request-data-table");return d(),_("div",null,[l(Y,{flat:""},{default:i(()=>[l(T,null,{default:i(()=>[c("div",Ya,[c("div",Ha,[l(Z,{dense:"",modelValue:e.search,"onUpdate:modelValue":a[0]||(a[0]=o=>e.search=o),label:"Search"},null,8,["modelValue"])])])]),_:1})]),_:1}),l(s,{requests:e.nameRequests,status:"Named",onRemoveName:e.removeName,onViewEmployee:e.viewEmployee},null,8,["requests","onRemoveName","onViewEmployee"])])}var Ka=F(Xa,[["render",Wa]]);const Ga=J({props:{rows:Array},setup(e,a){const u=W();be();const{openWindow:t}=na(),m=ue(),{getUserType:b}=Ue(m),s=q(()=>u.screen.gt.sm?[{name:"Action",label:"",align:"left"},{name:1,label:"Created",align:"left",field:r=>r[1].$d,format:r=>`${H(r).format("L LT")}`,sortable:!0},{name:2,label:"Offered To",align:"left",field:r=>r.employee[24],format:r=>`${r}`,sortable:!0,required:!0},{name:3,label:"Classification",align:"left",field:r=>r[57],format:r=>`${r===""?"Open":r}`,sortable:!0,required:!0},{name:4,label:"Status",align:"left",field:r=>r[21],format:r=>`${r}`,sortable:!0},{name:5,label:"Rate Offered",align:"left",field:r=>r[22],format:r=>`$ ${r.toFixed(2)}`,sortable:!0,required:!0}]:[{name:"Action",label:"",align:"left"},{name:1,label:"Created",align:"left",field:r=>r[1].$d,format:r=>`${H(r).fromNow()}`,sortable:!0},{name:2,label:"Offered To",align:"left",field:r=>r.employee[24],format:r=>`${r}`,sortable:!0,required:!0},{name:3,label:"Classification",align:"left",field:r=>r[57],format:r=>`${r===""?"Open":r}`,sortable:!0,required:!0},{name:4,label:"Status",align:"left",field:r=>r[21],format:r=>`${r}`,sortable:!0},{name:5,label:"Rate Offered",align:"left",field:r=>r[22],format:r=>`$ ${r.toFixed(2)}`,sortable:!0,required:!0}]);return{getUserType:b,viewProfile:r=>{t(null,{url:`https://elitehcms.quickbase.com/db/bs7qsu6wh?a=dbpage&pageID=6&ee=${r[25]}`,name:"View Profile"})},columns:s,props:e}}}),Za={key:0},xa={key:1},et={key:2},at={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function tt(e,a,u,t,m,b){return d(),_("div",null,[l(Ae,{columns:e.columns,rows:e.props.rows,"row-key":s=>s[3],class:"q-pa-sm",pagination:{rowsPerPage:10},"table-header-class":"bg-dark text-white","no-data-label":"There are no offers",dense:""},{body:i(s=>[l(me,{props:s},{default:i(()=>[(d(!0),_(se,null,ie(s.cols,o=>(d(),y(fe,{key:o.name,props:s,"auto-width":""},{default:i(()=>[o.name==="Action"?(d(),_("span",Za,[e.getUserType==="QuickBase User"?(d(),y(re,{key:0,class:"cursor-pointer",size:e.$q.screen.gt.sm?"sm":"xs",color:"info",round:"",dense:"",onClick:r=>e.viewProfile(s.row),name:s.expand?"visibility_off":"visibility"},null,8,["size","onClick","name"])):C("",!0)])):C("",!0),o.name===4?(d(),_("span",xa,V(s.row[29]==="Review"?"Pending":o.value),1)):(d(),_("span",et,V(o.value),1))]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"no-data":i(({message:s})=>[c("div",at,[l(re,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),c("span",null,V(s),1)])]),_:1},8,["columns","rows","row-key"])])}var st=F(Ga,[["render",tt]]);const ot=J({props:{data:Array},components:{OffersDataTable:st},setup(e){const a=A("");return{offers:q(()=>{const t=[];return e.data.forEach(m=>{`${m.employee[24].toLowerCase}`.includes(a.value.toLowerCase())&&t.push(m)}),t}),search:a}}}),lt={class:"row items-center"},nt={class:"col-12 col-md-4"};function rt(e,a,u,t,m,b){const s=E("offers-data-table");return d(),_("div",null,[l(Y,{flat:""},{default:i(()=>[l(T,null,{default:i(()=>[c("div",lt,[c("div",nt,[l(Z,{dense:"",modelValue:e.search,"onUpdate:modelValue":a[0]||(a[0]=o=>e.search=o),label:"Search"},null,8,["modelValue"])])])]),_:1})]),_:1}),l(s,{rows:e.offers},null,8,["rows"])])}var it=F(ot,[["render",rt]]);const dt={name:"Pipeline",components:{ProjectPipelineTable:ca},props:{request:Object},setup(e){const a=W(),u=A(""),{fetchDeployments:t,fetchInProcess:m,fetchPending:b,getDeployments:s,getInProcess:o,getPending:r}=oe(),N=q(()=>s(e.request[3]).filter(n=>n[20]==="Complete")),R=q(()=>{const n=[];return s(e.request[3]).forEach(w=>{w[31].toLowerCase().includes(u.value.toLowerCase())&&n.push(w)}),n}),v=q(()=>{const n=[];return r(e.request[3]).forEach(w=>{w[25].toLowerCase().includes(u.value.toLowerCase())&&n.push(w)}),n}),k=q(()=>{const n=[];return o(e.request[3]).forEach(w=>{w[39].toLowerCase().includes(u.value.toLowerCase())&&n.push(w)}),n}),S=q(()=>k.value.concat(v.value.concat(R.value)));async function f(){a.loading.show(),await t({requestId:e.request[3]}),await m({requestId:e.request[3]}),await b({requestId:e.request[3]}),a.loading.hide()}return f(),{arrived:N,allPipeline:S,search:u}}},ut={class:"q-pt-sm"},ct={class:"text-h5 text-dark"},mt={class:"text-body2 text-italic q-ml-sm"},ft=c("div",{class:"text-subtitle2 text-accent"},"The following people are currently in process or deployed for this request.",-1),bt={class:"row items-center"},pt={class:"col-12 col-md-3 q-px-sm"};function vt(e,a,u,t,m,b){const s=E("project-pipeline-table");return d(),y(Me,{style:{"max-width":"100vw"}},{default:i(()=>[c("div",ut,[l(Y,{flat:""},{default:i(()=>[l(T,{class:"q-pb-none"},{default:i(()=>[c("div",ct,[qe(" Staffing Pipeline "),c("span",mt,"("+V(t.allPipeline.length)+" total)",1)]),ft]),_:1}),l(T,null,{default:i(()=>[c("div",bt,[c("div",pt,[l(Z,{dense:"",modelValue:t.search,"onUpdate:modelValue":a[0]||(a[0]=o=>t.search=o),label:"Search"},null,8,["modelValue"])])])]),_:1})]),_:1}),l(s,{rows:t.allPipeline},null,8,["rows"])])]),_:1})}var gt=F(dt,[["render",vt]]);const ht=J({emits:["namesAdded","closeNames"],components:{phoneNumberInput:ba},props:{request:Object},setup(e,{emit:a}){const u=W(),{getClassifications:t,addNameRequest:m}=oe(),{userData:b}=ue(),{capitalize:s}=Te;A(!1);const o=A(10),r=A(null),N=A([]),R=q(()=>t(e.request[3])||[]),v=[{name:0,label:"#",align:"left",field:p=>p.id,format:p=>`${p}`},{name:1,label:"First Name",align:"left",field:p=>p.firstName,format:p=>`${s(p.toLowerCase())}`,sortable:!0},{name:2,label:"Last Name",align:"left",field:p=>p.lastName,format:p=>`${s(p.toLowerCase())}`,sortable:!0},{name:3,label:"Phone",align:"left",field:p=>p.phone,format:p=>`${p}`,sortable:!1,required:!0},{name:4,label:"Last 4",align:"left",field:p=>p.ssn,format:p=>`${p}`}],k=q(()=>{const p=new RegExp("^(?!0+$)\\d{"+o.value+"}","g");return z({job:z().required("Classification is required"),firstName:ae().required().label("First Name"),lastName:ae().required().label("Last Name"),phoneNumber:ae().matches(p,{excludeEmptyString:!0,message:"Valid Phone Number Required!"}).required().label("Phone Number"),ssn:ae().matches(/^\d+$/,{excludeEmptyString:!0,message:"Numbers Only!"}).label("Last 4 of SSN")})}),{errors:S,handleSubmit:f,resetForm:n,isSubmitting:w}=Re({validationSchema:k,initialValues:{job:R.value.length===1?R.value[0]:null}}),{value:Q}=B("job"),{value:$}=B("firstName"),{value:L}=B("lastName"),{value:P}=B("phoneNumber"),{value:I}=B("ssn"),x=f(p=>{const U={id:N.value.length+1,classification:p.job,firstName:p.firstName,lastName:p.lastName,phone:p.phoneNumber,ssn:p.ssn};N.value.push(U),n()}),pe=p=>{const U=N.value.filter(K=>K.id!==p.id);N.value=U},h=async p=>{const U=b;U.access&&delete U.access,U.permissions&&delete U.permissions;const{data:K}=await M.upsertRecordsXML({to:"bsg4yb4wa",data:[{6:{value:p.firstName},7:{value:p.lastName},8:{value:p.phone},10:{value:"Has Not Arrived"},19:{value:H()},16:{value:p.ssn},14:{value:`${U[35]} ${U[37]}`},17:{value:p.classification[3]}}],fieldsToReturn:[15],formatObject:15}),O=K[0][15];return O[45]>O[43]&&Fe({id:O[17],qty:O[45]}),O};return{formErrors:S,submit:x,job:Q,firstName:$,lastName:L,phoneNumber:P,ssn:I,resetForm:n,classifications:R,names:N,columns:v,removeRow:pe,submitNames:async()=>{u.loading.show();const p=[];N.value.forEach(O=>{const ee=h(O);p.push(ee)});const K=(await Promise.allSettled(p)).map(O=>O.value);m({id:e.request[3],data:K}),u.notify({type:"positive",message:"Names successfully added!"}),a("namesAdded"),u.loading.hide()},phoneLength:o,updateCountry:p=>{r.value=p},updatePhoneMaxLength:p=>{o.value=p}}}}),yt={class:"q-mb-sm"},qt={class:"text-caption"},wt={class:"q-mb-sm"},$t={class:"text-caption"},Ct={class:"q-mb-sm"},Rt={class:"q-mb-sm"},kt={class:"text-caption"},Nt={class:"text-caption"},_t={class:"text-caption"};function At(e,a,u,t,m,b){const s=E("phone-number-input");return d(),y(Ce,{onSubmit:$e(e.submit,["prevent"])},{default:i(()=>[l(Y,null,{default:i(()=>[l(T,{class:"q-pb-sm"},{default:i(()=>[c("div",yt,[l(Z,{tabindex:"1",dense:"",label:"First Name",modelValue:e.firstName,"onUpdate:modelValue":a[0]||(a[0]=o=>e.firstName=o),error:!!e.formErrors.firstName,"bottom-slots":""},{error:i(()=>[c("div",qt,V(e.formErrors.firstName),1)]),_:1},8,["modelValue","error"])]),c("div",wt,[l(Z,{tabindex:"2",dense:"",label:"Last Name",modelValue:e.lastName,"onUpdate:modelValue":a[1]||(a[1]=o=>e.lastName=o),error:!!e.formErrors.lastName,"bottom-slots":""},{error:i(()=>[c("div",$t,V(e.formErrors.lastName),1)]),_:1},8,["modelValue","error"])]),c("div",Ct,[l(s,{name:"phoneNumber",class:"col-xs-12 col-sm-12",dense:"",modelValue:e.phoneNumber,"onUpdate:modelValue":a[2]||(a[2]=o=>e.phoneNumber=o),label:"Phone Number",tabindex:"3",onMaxLengthChanged:e.updatePhoneMaxLength,error:!!e.formErrors.phoneNumber,"error-message":e.formErrors.phoneNumber,onCountryChanged:e.updateCountry},null,8,["modelValue","onMaxLengthChanged","error","error-message","onCountryChanged"])]),c("div",Rt,[l(Z,{maxlength:"4",tabindex:"4",dense:"",label:"SSN Last 4 (Optional)",modelValue:e.ssn,"onUpdate:modelValue":a[3]||(a[3]=o=>e.ssn=o),error:!!e.formErrors.ssn,"bottom-slots":""},{error:i(()=>[c("div",kt,V(e.formErrors.ssn),1)]),_:1},8,["modelValue","error"])]),c("div",null,[l(de,{dense:"",tabindex:"5",label:"Classification","transition-show":"flip-up","transition-hide":"flip-down",modelValue:e.job,"onUpdate:modelValue":a[4]||(a[4]=o=>e.job=o),options:e.classifications,"option-label":o=>o?`${o[21]}`:"","display-value":e.job?`${e.job[21]}`:"","bottom-slots":"",error:!!e.formErrors.job},{error:i(()=>[c("div",Nt,V(e.formErrors.job),1)]),_:1},8,["modelValue","options","option-label","display-value","error"])])]),_:1}),l(ea),l(te,{class:"q-pt-sm",align:"right"},{default:i(()=>[e.names.length===0?(d(),y(D,{key:0,dense:"",label:"Cancel",color:"secondary",onClick:a[5]||(a[5]=o=>e.$emit("closeNames"))})):C("",!0),l(D,{dense:"",color:"info",label:"Save Name",type:"submit",onClick:e.submit},null,8,["onClick"])]),_:1}),e.names.length>0?(d(),y(T,{key:0,class:"q-px-none"},{default:i(()=>[l(Ae,{flat:"",columns:e.columns,rows:e.names,"row-key":o=>o.name,class:"q-pa-sm",pagination:{rowsPerPage:100},"table-header-class":"bg-dark text-white",dense:"","hide-pagination":""},{header:i(o=>[l(me,{class:"bg-dark text-white",props:o},{default:i(()=>[(d(!0),_(se,null,ie(o.cols,r=>(d(),y(we,{class:"text-left",key:r.name},{default:i(()=>[qe(V(r.label),1)]),_:2},1024))),128)),l(we,{"auto-width":""})]),_:2},1032,["props"])]),body:i(o=>[l(me,{"no-hover":"",props:o},{default:i(()=>[(d(!0),_(se,null,ie(o.cols,r=>(d(),y(fe,{key:r.name,props:o},{default:i(()=>[c("span",_t,V(r.value==="undefined"?"N/A":r.value),1)]),_:2},1032,["props"]))),128)),l(fe,{"auto-width":""},{default:i(()=>[l(D,{round:"",flat:"",icon:"delete",color:"accent",onClick:r=>e.removeRow(o.row)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["columns","rows","row-key"])]),_:1})):C("",!0),e.names.length>0?(d(),y(te,{key:1,align:"right"},{default:i(()=>[l(D,{dense:"",label:"Cancel",color:"secondary",onClick:a[6]||(a[6]=o=>e.$emit("closeNames"))}),l(D,{dense:"",color:"primary",label:"Submit These Names",onClick:e.submitNames},null,8,["onClick"])]),_:1})):C("",!0)]),_:1})]),_:1},8,["onSubmit"])}var Vt=F(ht,[["render",At]]);const St=J({emits:["jobsAdded","closeJobs","jobUpdated"],components:{PayRateField:ma},props:{request:Object},setup(e,{emit:a}){W();const{getClassifications:u}=oe();ue();const t=A([]),m=q(()=>u(e.request[3])||[]),b=z({craft:z().required().nullable().label("Craft"),classification:z().required().nullable().label("Classification"),rate:Pe().required().nullable().label("Rate"),qty:Pe().required().nullable().label("Quantity")}),{errors:s,handleSubmit:o,resetForm:r,isSubmitting:N,setFieldError:R}=Re({validationSchema:b}),{value:v}=B("craft"),{value:k}=B("classification"),{value:S}=B("rate"),{value:f}=B("qty"),n=o(async $=>{const L=m.value.find(P=>P[9]===$.classification[3]&&P[23]===$.rate);if(L){const P=L[18]+$.qty,I=await Fe({id:L[3],qty:P});a("jobUpdated",I)}else{const P=await fa({requestData:e.request,job:$});a("jobsAdded",P)}}),w=async()=>{const{data:$}=await M.fetchFromProjectsApp({fields:[he({type:"projectCrafts",query:`{'7'.EX.'${e.request[6]}'}AND{'6'.EX.'Active'}`})]}),L=$.sort((P,I)=>P[20]>I[20]?1:-1);t.value=L,console.log(m.value)},Q=q(()=>{const $=v.value&&v.value.classifications?v.value.classifications:[];return $.length>0?$.sort((L,P)=>L[32]>P[32]?-1:1):[]});return aa(k,($,L)=>{$&&$.hasFixedRate?S.value=$.fixedRate:S.value&&(S.value=null)}),w(),{errors:s,submit:n,classificationOptions:Q,craft:v,classification:k,rate:S,qty:f,crafts:t}}}),Pt={key:0,class:"text-body2 text-italic text-weight-bold text-dark"},Dt={key:1,class:"text-body2 text-italic text-weight-bold text-dark"},jt={class:"row q-mb-md"},Lt={class:"col-6 q-pr-sm"},Et={class:"text-caption"},Ot={class:"col-6 q-pl-sm"},Tt={class:"text-caption"},Ut={class:"row"},Mt={class:"col-6 q-pr-sm"},Ft={class:"text-caption"},Qt={class:"col-6 q-pl-sm"};function It(e,a,u,t,m,b){const s=E("pay-rate-field");return d(),y(Ce,ta(e.$attrs,{onSubmit:$e(e.submit,["prevent"])}),{default:i(()=>[l(Y,null,{default:i(()=>[l(T,null,{default:i(()=>[e.$attrs.hideInstructions?(d(),_("div",Dt," Enter the following information about the classification and click Submit. ")):(d(),_("div",Pt," Enter the following information about the classification and click Save. Repeat until all classifications you are requesting have been saved. Then click Continue. ")),c("div",jt,[c("div",Lt,[l(de,{class:"q-mt-md",dense:"",clearable:"","transition-show":"flip-up","transition-hide":"flip-down",label:"Select Craft",modelValue:e.craft,"onUpdate:modelValue":a[0]||(a[0]=o=>e.craft=o),options:e.crafts,"option-label":o=>o[10],"display-value":e.craft?`${e.craft[10]}`:"",error:!!e.errors.craft,"bottom-slots":""},{error:i(()=>[c("div",Et,V(e.errors.craft),1)]),_:1},8,["modelValue","options","option-label","display-value","error"])]),c("div",Ot,[l(de,{class:"q-mt-md",dense:"",clearable:"","transition-show":"flip-up","transition-hide":"flip-down",label:"Classification",modelValue:e.classification,"onUpdate:modelValue":a[1]||(a[1]=o=>e.classification=o),options:e.classificationOptions,"option-label":o=>o[18],"display-value":e.classification?`${e.classification[18]}`:"",error:!!e.errors.classification,"bottom-slots":"",disable:!e.craft},{error:i(()=>[c("div",Tt,V(e.errors.classification),1)]),_:1},8,["modelValue","options","option-label","display-value","error","disable"])])]),c("div",Ut,[c("div",Mt,[l(Z,{dense:"",type:"number",label:"Quantity",modelValue:e.qty,"onUpdate:modelValue":a[2]||(a[2]=o=>e.qty=o),modelModifiers:{number:!0},error:!!e.errors.qty,disable:!e.classification,"bottom-slots":""},{error:i(()=>[c("div",Ft,V(e.errors.qty),1)]),_:1},8,["modelValue","error","disable"])]),c("div",Qt,[l(s,{class:"q-mb-md",type:"number",step:"any",dense:"",label:"Hourly Rate",modelValue:e.rate,"onUpdate:modelValue":a[3]||(a[3]=o=>e.rate=o),modelModifiers:{number:!0},prefix:"$",disable:!e.classification||e.classification.hasFixedRate&&!e.$can("manage","rates"),error:!!e.errors.rate,"error-message":e.errors.rate,"bottom-slots":""},null,8,["modelValue","disable","error","error-message"])])])]),_:1}),l(te,{align:"right"},{default:i(()=>[l(D,{dense:"",color:"secondary",label:"Cancel",onClick:a[4]||(a[4]=o=>e.$emit("closeJobs"))}),l(D,{dense:"",color:"primary",label:"Submit",type:"submit",onClick:e.submit},null,8,["onClick"])]),_:1})]),_:1})]),_:1},16,["onSubmit"])}var Bt=F(St,[["render",It]]);const zt=J({props:{request:Object},setup(e){const a=A(null),u=["Continue Processing","Remove from In Process"],t=["Client Headcount Met","Client Changed Work Scope"],m=ue(),{userData:b}=Ue(m),s=be(),o=W(),{getDeployments:r,getInProcess:N,getPending:R,fetchDeployments:v,fetchInProcess:k,fetchPending:S}=oe(),f=b.value&&b.value[35]?b.value[35]:"",n=b.value&&b.value[37]?b.value[37]:"",w=q(()=>r(e.request[3])),Q=q(()=>N(e.request[3])),$=q(()=>R(e.request[3])),L=q(()=>w.value.concat(Q.value)),P=q(()=>$.value.concat(Q.value));async function I(){await v({requestId:e.request[3],refresh:!0}),await k({requestId:e.request[3],refresh:!0}),await S({requestId:e.request[3],refresh:!0})}I();const x=q(()=>{let O={};return P.value.length>0?O=z({action:ae().required().label("Applicant(s) In Process, Action Needed?"),reason:ae().required().label("Reason for Closing")}):O=z({reason:ae().required().label("Reason for Closing")}),O}),{meta:pe,errors:h,handleSubmit:g,handleReset:j}=Re({validationSchema:x}),{value:le}=B("action"),{value:p}=B("reason"),U=g(async O=>{try{let ee=L.value.length===0?"Cancelled":"Closed",ke=L.value.length===0?6:5;e.request[305]>0&&(ee="Closed",ke=5);const ze={3:{value:e.request[3]},14:{value:ee},84:{value:new Date},86:{value:new Date},147:{value:ke},276:{value:b.value[3]},277:{value:`${f} ${n}`},303:{value:O.reason},306:{value:O.action||"N/A"}},Ve=[];e.request.classes&&Array.isArray(e.request.classes)&&e.request.classes.forEach(G=>{const _e=A(G[18]);O.action==="Continue Processing"?G.offers&&Array.isArray(G.offers)&&(_e.value=G.offers.filter(ce=>ce[21]==="Accepted").length):_e.value=w.value.filter(ce=>ce[89]===G[3]&&(ce[20]==="Complete"||ce[20]==="In Process")).length;const Je={3:{value:G[3]},17:{value:ee},29:{value:new Date},51:{value:new Date},128:{value:ke},255:{value:_e.value}};Ve.push(Je)});const{data:Ne}=await M.upsertRecordsXML({to:"bpzpyjbuy",data:[ze],fieldsToReturn:[3]});if(Ne&&Ne[0]&&Ne[0][3]){const{data:G}=await M.upsertRecordsXML({to:"bpzpyqcu4",data:Ve,fieldsToReturn:[3]});if(G)K(),s.go(-1),o.notify({position:"top-right",type:"positive",message:"Request successfully closed"});else throw"Error in canceling request"}else throw"Error in canceling request"}catch(ee){console.log(ee),o.notify({position:"top-right",type:"negative",message:"There was a problem closing request!"})}}),K=()=>{j(),a.value.hide()};return{cancelRequestDialog:a,hireRequestPipeline:P,actions:u,reasons:t,action:le,reason:p,formErrors:h,submitCancel:U,closeCancelDialog:K}}}),Jt=c("div",{class:"text-h6 text-info"},"Close Request",-1),Xt={key:0,class:"row"},Yt={class:"col-12 q-pr-sm"},Ht={class:"text-caption"},Wt={class:"row q-mb-md"},Kt={class:"col-12 q-pr-sm"},Gt={class:"text-caption"};function Zt(e,a,u,t,m,b){return d(),y(ye,{ref:"cancelRequestDialog"},{default:i(()=>[l(Y,{flat:"",style:{width:"400px"}},{default:i(()=>[l(Ce,{onSubmit:$e(e.submitCancel,["prevent"])},{default:i(()=>[l(T,{class:"q-pb-none"},{default:i(()=>[Jt]),_:1}),l(T,null,{default:i(()=>[e.hireRequestPipeline.length>0?(d(),_("div",Xt,[c("div",Yt,[l(de,{class:"q-mt-md",dense:"","transition-show":"flip-up","transition-hide":"flip-down",label:`${e.hireRequestPipeline.length} Applicant(s) In Process, Action Needed?`,modelValue:e.action,"onUpdate:modelValue":a[0]||(a[0]=s=>e.action=s),options:e.actions,error:!!e.formErrors.action,"bottom-slots":""},{error:i(()=>[c("div",Ht,V(e.formErrors.action),1)]),_:1},8,["label","modelValue","options","error"])])])):C("",!0),c("div",Wt,[c("div",Kt,[l(de,{class:"q-mt-md",dense:"","transition-show":"flip-up","transition-hide":"flip-down",label:"Reason for Closing",modelValue:e.reason,"onUpdate:modelValue":a[1]||(a[1]=s=>e.reason=s),options:e.reasons,error:!!e.formErrors.reason,"bottom-slots":""},{error:i(()=>[c("div",Gt,V(e.formErrors.reason),1)]),_:1},8,["modelValue","options","error"])])])]),_:1}),l(te,{align:"right"},{default:i(()=>[l(D,{dense:"",color:"secondary",label:"Cancel",onClick:e.closeCancelDialog},null,8,["onClick"]),l(D,{dense:"",color:"primary",label:"Submit",type:"submit",onClick:e.submitCancel},null,8,["onClick"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},512)}var xt=F(zt,[["render",Zt]]);const es={name:"View Request",components:{ClassificationsTab:Ja,NamesTab:Ka,PipelineTab:gt,OffersTab:it,NamesForm:Vt,DetailsCard:Ua,ClassificationForm:Bt,cancelHireRequest:xt},setup(){const e=A(!0),a=A(!1),u=A(!1),t=A(!1),m=W(),b=sa(),s=be(),o=A(0),{getHireRequest:r,fetchHireRequest:N,updateViewedRequests:R,setHireRequests:v}=oe(),{getUserType:k,userData:S}=ue(),f=A(!1),n=q(()=>r(b.params.id)),w=async h=>{if(!n.value[3]||h){m.loading.show();const{data:g}=await M.fetchFromProjectsApp({fields:[he({type:"requests",id:b.params.id})]});v({requestId:b.params.id,data:g}),m.loading.hide()}},Q=()=>{s.go(-1)},$=()=>{s.push({name:"project-general",params:{id:n.value[6]}})};w();const L=()=>{o.value=1,u.value=!1,w(!0)},P=h=>{t.value=!1,w(!0),R({id:n.value[3],dataset:"classes",data:h,push:!0})},I=h=>{t.value=!1,w(!0);const g=r(n.value[3]).classes,j=g.findIndex(le=>le[3]===h[3]);j>-1?(g[j]=h,R({id:n.value[3],dataset:"classes",data:g})):R({id:n.value[3],dataset:"classes",data:h,push:!0})},x=h=>{const g=[];for(const[j,le]of Object.entries(h)){const p={fid:j,value:le};g.push(p)}R({id:n.value[3],props:g})},pe=q(()=>n.value[3]?[{label:"Request ID",value:n.value[3],editable:!1},{label:"Date Created",value:H(n.value[1].$d).format("MM/DD/YYYY hh:mm:ss a"),editable:!1},{label:"Date Needed",value:H(n.value[64].$d).format("MM/DD/YYYY"),editable:!1},{label:"Status",value:`${n.value[14]} (${n.value[59]})`,editable:!1},{label:"Request Type",value:`${n.value[282]}`,editable:!1},{label:"Opened On",value:n.value[82].$d?H(n.value[82].$d).format("MM/DD/YYYY hh:mm:ss a"):null,editable:!1,hide:n.value[14]!=="Open"&&n.value[14]!=="Closed"},{label:"Closed On",value:n.value[86].$d?H(n.value[86].$d).format("MM/DD/YYYY hh:mm:ss a"):null,editable:!1,hide:n.value[14]!=="Closed"},{label:"Project Name",value:n.value[91],editable:!1},{label:"Job Number",value:n.value[27],editable:n.value[14]!=="Closed",config:{permission:{action:"manage",subject:"projectRequests"},type:"options",allowNew:!1,newType:"customer",initialValue:h=>h.find(g=>g[3]===n.value[9]),formRules:z().required().label("Job Number").nullable(),fieldLabel:"Job Number",optionLabel:"11",displayValue:11,getter:async()=>{const{data:h}=await M.fetchFromProjectsApp({fields:[he({type:"jobNumbers",query:`{'6'.EX.'${n.value[6]}'}AND{'29'.EX.'Active'}`})]});return h.sort((g,j)=>g[1].$d>j[1].$d?-1:1)},setter:async h=>{try{const{data:g}=await M.upsertRecordsXML({to:"bpzpyjbuy",data:[{3:{value:n.value[3]},9:{value:h[3]}}],fieldsToReturn:[9,27]});x(g[0]),m.notify({type:"positive",message:"Job Number successfully updated"})}catch{m.notify({type:"negative",message:"Error updating Job Number"})}},filter:(h,g)=>h.filter(j=>j[11].toLowerCase().indexOf(g)>-1)}},{label:"Site Contact",value:n.value[76],editable:n.value[14]!=="Closed",config:{permission:{action:"manage",subject:"projectRequests"},type:"options",allowNew:!1,newType:"location",initialValue:h=>h.find(g=>g[3]===n.value[60]),formRules:z().required().label("Site Contact").nullable(),fieldLabel:"Site Contact",optionLabel:"17",displayValue:17,getter:async()=>{const{data:h}=await M.fetchFromProjectsApp({fields:[he({type:"siteContacts",query:`{'7'.EX.'${n.value[6]}'}AND{'6'.EX.'Active'}`})]});return h.sort((g,j)=>g[17]>j[17]?1:-1)},setter:async h=>{try{const{data:g}=await M.upsertRecordsXML({to:"bpzpyjbuy",data:[{3:{value:n.value[3]},60:{value:h[3]}}],fieldsToReturn:[60,76]});x(g[0]),m.notify({type:"positive",message:"Site Contact successfully updated"})}catch{m.notify({type:"negative",message:"Error updating Site Contact"})}},filter:(h,g)=>h.filter(j=>j[17].toLowerCase().indexOf(g)>-1)}},{label:"Meeting Location",value:n.value[32],editable:n.value[14]!=="Closed",config:{permission:{action:"manage",subject:"projectRequests"},type:"options",allowNew:!1,newType:"location",initialValue:h=>h.find(g=>g[3]===n.value[31]),formRules:z().required().label("Meeting Location").nullable(),fieldLabel:"Meeting Location",optionLabel:"6",displayValue:6,getter:async()=>{const{data:h}=await M.fetchFromStructureApp({fields:[ra({type:"meetingLocations",query:`{'15'.EX.'${n.value[8]}'}AND{'14'.EX.'Active'}`})]});return h.sort((g,j)=>g[6]>j[6]?1:-1)},setter:async h=>{try{const{data:g}=await M.upsertRecordsXML({to:"bpzpyjbuy",data:[{3:{value:n.value[3]},31:{value:h[3]}}],fieldsToReturn:[31,32,33]});x(g[0]),m.notify({type:"positive",message:"Meeting Location successfully updated"})}catch{m.notify({type:"negative",message:"Error updating Meeting Location"})}},filter:(h,g)=>h.filter(j=>j[6].toLowerCase().indexOf(g)>-1)}},{label:"Address",value:n.value[33],editable:!1},{label:"Per-Diem",value:n.value[65]?`Amount: $${Number(n.value[67]).toFixed(2)}
<br>
            Rules: ${n.value[66]?n.value[66]:"N/A"}
<br>
            Miles: ${n.value[99]?n.value[99]:"N/A"}
<br>
            Approval: ${n.value[98]?n.value[98]:"N/A"}
<br>
            DL/ID: ${n.value[100]?n.value[100]:"N/A"}
<br>
            Map: ${n.value[101]?n.value[101]:"N/A"}`:"",editable:!1,hide:!n.value[65]},{label:"Notes",value:n.value[299]?n.value[299]:"N/A",editable:!1},{label:"",value:"",editable:!1},{label:"Submitted By",value:n.value[4],editable:!1}]:[]);return{hireRequestData:n,tab:o,back:Q,showAddNames:u,showAddJobs:t,namesAdded:L,details:pe,viewProject:$,actions:e,navs:a,jobsAdded:P,jobUpdated:I,getUserType:k,cancelRequest:f}}},as={key:0,class:"q-pa-sm"},ts={class:"row"},ss={class:"col-12 col-md-6"},os={class:"col-12 col-md-6"},ls={class:"row"},ns={class:"col-12 col-md-4 q-pr-sm"},rs={class:"col-12 col-md-8 q-pl-sm"};function is(e,a,u,t,m,b){const s=E("details-card"),o=E("classifications-tab"),r=E("names-tab"),N=E("offers-tab"),R=E("pipeline-tab"),v=E("names-form"),k=E("classification-form"),S=E("cancelHireRequest");return d(),y(Me,{style:{"max-width":"100vw"}},{default:i(()=>[t.hireRequestData[3]?(d(),_("div",as,[l(Y,{flat:""},{default:i(()=>[l(T,{class:"q-pa-none"},{default:i(()=>[c("div",ts,[c("div",ss,[l(te,{class:"q-pt-none",align:"left"},{default:i(()=>[l(D,{label:"Go Back",color:"secondary",icon:"keyboard_return",onClick:t.back},null,8,["onClick"])]),_:1})]),c("div",os,[t.getUserType==="Project User"?(d(),y(te,{key:0,class:"q-pt-none",align:"right"},{default:i(()=>[e.$can("manage","projectRequests")&&(t.hireRequestData[14]==="Pending"||t.hireRequestData[14]==="Open")||e.$can("manage","nameRequests")&&t.hireRequestData[14]!=="Closed"&&t.hireRequestData[282]!=="Open"||e.$can("manage","projectRequests")&&!e.$can("read","hireRequests")&&t.hireRequestData[14]==="Pending"?(d(),y(De,{key:0,modelValue:t.actions,"onUpdate:modelValue":a[3]||(a[3]=f=>t.actions=f),square:"",color:"accent",icon:"keyboard_arrow_left",direction:"left",label:"Actions",padding:"sm"},{default:i(()=>[e.$can("manage","projectRequests")&&t.hireRequestData[14]==="Pending"?(d(),y(ne,{key:0,label:"Add Classifications",color:"primary",icon:"add",onClick:a[0]||(a[0]=f=>t.showAddJobs=!0)})):C("",!0),e.$can("manage","nameRequests")&&(t.hireRequestData[14]==="Pending"||t.hireRequestData[14]==="Open")&&t.hireRequestData[282]!=="Open"?(d(),y(ne,{key:1,label:"Add Names to Request",color:"accent",icon:"person_add",onClick:a[1]||(a[1]=f=>t.showAddNames=!0)})):C("",!0),e.$can("manage","projectRequests")&&(t.hireRequestData[14]==="Pending"||t.hireRequestData[14]==="Open")?(d(),y(ne,{key:2,label:"Close Hire Request",color:"dark",icon:"cancel",onClick:a[2]||(a[2]=f=>t.cancelRequest=!0)})):C("",!0)]),_:1},8,["modelValue"])):C("",!0)]),_:1})):t.getUserType==="QuickBase User"?(d(),y(te,{key:1,class:"q-pt-none",align:"right"},{default:i(()=>[l(De,{modelValue:t.actions,"onUpdate:modelValue":a[7]||(a[7]=f=>t.actions=f),square:"",color:"accent",icon:"keyboard_arrow_left",direction:"left",label:"Actions",padding:"sm"},{default:i(()=>[e.$can("manage","projectRequests")&&(t.hireRequestData[14]==="Open"||t.hireRequestData[14]==="Pending")?(d(),y(ne,{key:0,label:"Add Classifications",color:"primary",icon:"add",onClick:a[4]||(a[4]=f=>t.showAddJobs=!0)})):C("",!0),e.$can("manage","nameRequests")&&(t.hireRequestData[14]==="Open"||t.hireRequestData[14]==="Pending")?(d(),y(ne,{key:1,label:"Add Names to Request",color:"accent",icon:"person_add",onClick:a[5]||(a[5]=f=>t.showAddNames=!0)})):C("",!0),e.$can("manage","projectRequests")&&(t.hireRequestData[14]==="Open"||t.hireRequestData[14]==="Pending")?(d(),y(ne,{key:2,label:"Close Hire Request",color:"dark",icon:"cancel",onClick:a[6]||(a[6]=f=>t.cancelRequest=!0)})):C("",!0)]),_:1},8,["modelValue"])]),_:1})):C("",!0)])])]),_:1})]),_:1}),c("div",ls,[c("div",ns,[l(s,{details:t.details,title:"Details"},null,8,["details"])]),c("div",rs,[l(la,{class:"q-py-xs bg-info text-white shadow-2 rounded-borders",align:"left",modelValue:t.tab,"onUpdate:modelValue":a[8]||(a[8]=f=>t.tab=f),dense:"","indicator-color":"accent","outside-arrows":"","mobile-arrows":"","inline-label":""},{default:i(()=>[l(ve,{name:0,label:"Classifications"}),l(ve,{name:1,label:"Names"}),t.hireRequestData[14]!=="Pending"?(d(),y(ve,{key:0,name:2,label:"Offers"})):C("",!0),t.hireRequestData[14]!=="Pending"?(d(),y(ve,{key:1,name:3,label:"Pipeline"})):C("",!0)]),_:1},8,["modelValue"]),l(oa,{modelValue:t.tab,"onUpdate:modelValue":a[9]||(a[9]=f=>t.tab=f),animated:"",class:"q-px-none"},{default:i(()=>[l(ge,{class:"q-px-xs",name:0},{default:i(()=>[t.hireRequestData[3]?(d(),y(o,{key:0,data:t.hireRequestData},null,8,["data"])):C("",!0)]),_:1}),l(ge,{class:"q-px-xs",name:1},{default:i(()=>[l(r,{data:t.hireRequestData},null,8,["data"])]),_:1}),l(ge,{class:"q-px-xs",name:2},{default:i(()=>[l(N,{data:t.hireRequestData.offers},null,8,["data"])]),_:1}),l(ge,{class:"q-px-xs",name:3},{default:i(()=>[l(R,{request:t.hireRequestData},null,8,["request"])]),_:1})]),_:1},8,["modelValue"])])]),l(ye,{persistent:"",modelValue:t.showAddNames,"onUpdate:modelValue":a[11]||(a[11]=f=>t.showAddNames=f)},{default:i(()=>[l(Y,{flat:"",style:{width:"500px"}},{default:i(()=>[l(T,{class:"q-pa-none"},{default:i(()=>[l(v,{onCloseNames:a[10]||(a[10]=f=>t.showAddNames=!1),onNamesAdded:t.namesAdded,request:t.hireRequestData},null,8,["onNamesAdded","request"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(ye,{persistent:"",modelValue:t.showAddJobs,"onUpdate:modelValue":a[13]||(a[13]=f=>t.showAddJobs=f)},{default:i(()=>[l(Y,{flat:"",style:{width:"500px"}},{default:i(()=>[l(T,{class:"q-pa-none"},{default:i(()=>[l(k,{hideInstructions:!0,request:t.hireRequestData,onCloseJobs:a[12]||(a[12]=f=>t.showAddJobs=!1),onJobsAdded:t.jobsAdded,onJobUpdated:t.jobUpdated},null,8,["request","onJobsAdded","onJobUpdated"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):C("",!0),t.hireRequestData[3]?(d(),y(S,{key:1,request:t.hireRequestData,modelValue:t.cancelRequest,"onUpdate:modelValue":a[14]||(a[14]=f=>t.cancelRequest=f)},null,8,["request","modelValue"])):C("",!0)]),_:1})}var Gs=F(es,[["render",is]]);export{Gs as default};
