import{a as T}from"./QSelect.ce23f885.js";import{a7 as x,r as c,bX as D,c as w,w as g,B as Q,as as R,ax as $,b6 as C,bt as S,D as V,ad as z,aJ as A,aa as i,E,ae as J,I as L}from"./index.960d5b34.js";import{c as N,u as O}from"./app.bda2cd70.js";const X={class:"text-primary"},H={__name:"projectSelector",props:{can:{type:String,default:"read"},styleSelection:{type:Boolean,default:!1}},setup(h){const P=h,{styleSelection:j}=x(P),o=c(!1),d=N(),{getUserType:l,getUser:y}=O(),{setSelectedProject:b,fetchProjects:U,fetchAllProjects:_}=d,{getProjects:B,getSelectedProject:a,getSelectedOffice:s}=D(d),f=c(s.value?s.value[8]:null),I=c(a.value?a.value[3]:null),n=c(l==="Project User"?y[3]:f),t=w(()=>B.value({userType:l,selectedId:n.value,can:"read"}).filter(e=>!0).sort((e,p)=>e[298].localeCompare(p[298]))),u=e=>{b(e)};t.value.length===1&&u(t.value[0]);const r=(e=!1)=>{o.value===!1&&(o.value=!0,n.value&&l==="QuickBase User"?U({selectedId:n.value,extendTime:60,refresh:e}).then(()=>{o.value=!1}):_({can:"read",extendTime:60,refresh:e}).then(()=>{t.value.length===1&&u(t.value[0]),o.value=!1}))};return l==="QuickBase User"&&(t.value.length===0&&r(!0),g(s,()=>{f.value=s.value?s.value[8]:null,r()})),l==="Project User"&&(t.value.length===0&&r(!0),g(a,()=>{I.value=a.value?a.value[3]:null,r()})),(e,p)=>(Q(),R(T,L({"model-value":i(a),options:t.value},e.$attrs,{"onUpdate:modelValue":u,label:i(a)?"Project":"Select Project","option-label":"298","option-value":"3",clearable:t.value.length>1}),$({_:2},[C(e.$slots,(v,m)=>({name:m,fn:S(k=>[V(e.$slots,m,z(A(k)))])})),i(j)?{name:"selected-item",fn:S(v=>[E("span",X,J(v.opt[298]),1)]),key:"0"}:void 0]),1040,["model-value","options","label","clearable"]))}};export{H as _};
