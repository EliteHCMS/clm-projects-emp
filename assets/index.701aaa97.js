import{Q as I}from"./QSpace.e7ca0a79.js";import{bX as Z,r as n,w as O,aV as ee,c as Q,aS as te,B as v,C as b,d as t,bt as o,cW as ae,E as r,H as Y,aa as _,ae as d,cV as le,cX as R,bS as oe,bY as y,az as j,bT as U,bR as z}from"./index.8838c464.js";import{Q as k}from"./QTooltip.72214d5e.js";import{a as se}from"./QSelect.78b00ca7.js";import{Q as ne}from"./QList.43880dff.js";import{Q as re}from"./QMenu.b8edc490.js";import{Q as S}from"./QTd.1bc00af2.js";import{u as ie}from"./use-quasar.ed4be5d9.js";import{e as ue}from"./export-file.dc78ba05.js";import{c as ce,b as de,_ as A}from"./app.42c36b1f.js";import{dayjs as me}from"./dayjs.106d80ab.js";import{_ as fe}from"./hiringTabs.8feae2a0.js";import{_ as pe}from"./officeSelector.2ba3a485.js";import{_ as ve}from"./aTable.aadceb25.js";import"./position-engine.cba8bd09.js";import"./selection.26380b58.js";import"./QChip.5ba75959.js";import"./rtl.b51694b1.js";import"./_commonjsHelpers.a26ce4be.js";import"./localForage.ca6e9d39.js";import"./index.04bc0a32.js";import"./i18n.c69e89dd.js";import"./QBadge.44381be8.js";import"./QRouteTab.82105e35.js";import"./QTabs.a3e7b08b.js";import"./QResizeObserver.9199488f.js";import"./QTable.2b553278.js";import"./QMarkupTable.8c4a6d35.js";import"./use-fullscreen.abb80350.js";const be={class:"q-pa-md"},_e={class:"row items-center"},ge={class:"col-12 col-md-4 q-px-sm"},we={class:"col-12 col-md-3 q-px-sm"},ye={class:"col-12 col-md-5 q-px-sm"},he=r("div",{class:"col-12 col-md-4 q-px-sm"},null,-1),xe={key:0},De={key:1},Ce={key:0},Ve={key:1},at={__name:"index",setup(Qe){const g=ie(),B=ce(),{openWindow:F}=de(),{fetchDeployments:M,fetchAllDeployments:E}=B,{getDeployments:h,getSelectedOffice:i,getLoadingState:L}=Z(B),u=n(i.value?i.value[8]:null),x=n("Deployed"),P=n("deployments"),D=n(""),m=n(null),w=n(null),T=n(null),$=n({sortBy:"1",descending:!0,rowsPerPage:150}),c=n(A.uniqBy(h.value(u.value).filter(a=>a[167].toLowerCase().indexOf(w.value)>-1).sort((a,l)=>a[167].localeCompare(l[167])),"167")),f=n(c.value),C=a=>{u.value?M({selectedId:u.value,refresh:a}):E({can:"read",refresh:a})};C(!0),O(i,()=>{u.value=i.value?i.value[8]:null,C()});const W=n(new Date),X=setInterval(()=>{W.value=new Date},1e3);ee(()=>{clearInterval(X)});const H=Q(()=>["startTimestamp","name","phoneNumber","project","jobNumber","classification","action","startDate",...i.value?[]:["office"]]),V=Q(()=>[{name:"startTimestamp",align:"left",label:"Date Created",field:"1",sortable:!0},{name:"name",align:"left",label:"Name",field:"31",sortable:!1},{name:"phoneNumber",align:"center",label:"Phone Number",field:"42",sortable:!1},{name:"project",align:"center",label:"Project",field:"167",sortable:!1},{name:"jobNumber",align:"center",label:"Job #",field:"85",sortable:!1},{name:"classification",align:"center",label:"Classification",field:"30",sortable:!1},{name:"office",align:"center",label:"Office",field:"68",sortable:!1},{name:"startDate",align:"center",label:"Start Date",field:"33",sortable:!1},{name:"action",align:"center",label:"",sortable:!1}]),p=Q(()=>h.value(u.value).filter(a=>{let l=!0,e=!0;return m.value&&(l=a[167]===m.value[167],l||(e=!1)),e}).sort((a,l)=>$.value.descending?a[1].isBefore(l[1]):a[1].isAfter(l[1])));O(p,()=>{te(()=>{c.value=A.uniqBy(h.value(u.value).sort((a,l)=>a[167].localeCompare(l[167])),"167"),f.value=c.value})});const J=(a,l,e)=>{if(a===""){l(()=>{if(w.value=null,f.value.length===c.value.length){e();return}f.value=c.value});return}l(()=>{w.value=a.toLocaleLowerCase(),f.value=c.value.filter(s=>s[167].toLowerCase().indexOf(w.value)>-1).sort((s,K)=>s[167].localeCompare(K[167]))})},q=(a,l,e)=>{let s=l!==void 0?l(a,e):a;return s=s==null?"":String(s),s=s.split('"').join('""'),`"${s}"`},G=a=>{F(null,{url:`https://elitehcms.quickbase.com/db/bs7qsu6wh?a=dbpage&pageID=6&ee=${a[21]}`,name:"View Profile"})},N=()=>{const a=[V.value.map(e=>q(e.label))].concat(p.value.map(e=>V.value.map(s=>q(typeof s.field=="function"?s.field(e):e[s.field===void 0?s.name:s.field],s.format,e)).join(","))).join(`\r
`);ue(`${x.value} ${me().format("MM.DD.YYYY")}.csv`,a,"text/csv")!==!0&&g.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})};return(a,l)=>(v(),b("div",be,[t(fe),t(le,{flat:"",class:"q-pt-none"},{default:o(()=>[t(ae,null,{default:o(()=>[r("div",_e,[r("div",ge,[r("div",{class:Y(["text-dark",_(g).screen.lt.md?"text-body1":"text-h5"])},d(x.value),3)]),t(I),r("div",we,[t(pe,{styleSelection:!0})])])]),_:1})]),_:1}),t(ve,{rows:p.value,columns:V.value,pagination:$.value,filter:D.value,title:x.value,separator:"vertical","row-key":"3",loading:_(L)(P.value),"visible-columns":H.value,downloadButton:!0,onDownload:N},{top:o(()=>[r("div",ye,[t(R,{dense:_(g).screen.lt.md,modelValue:D.value,"onUpdate:modelValue":l[0]||(l[0]=e=>D.value=e),label:"Search...",clearable:""},{prepend:o(()=>[t(oe,{name:"search"})]),_:1},8,["dense","modelValue"])]),t(I),he,r("div",{class:Y(["text-dark text-caption text-italic",_(g).screen.lt.md?"offset-xs-5":""])},"(Total: "+d(p.value.length)+")",3),t(y,{flat:"",round:"",color:"primary",icon:"filter_list"},{default:o(()=>[t(k,{class:"bg-accent text-black shadow-4",offset:[10,10]},{default:o(()=>[j(" Filter ")]),_:1}),t(re,null,{default:o(()=>[t(ne,null,{default:o(()=>[t(U,{style:{"min-width":"450px"}},{default:o(()=>[t(z,null,{default:o(()=>[t(se,{modelValue:m.value,"onUpdate:modelValue":l[1]||(l[1]=e=>m.value=e),options:f.value,label:m.value?"Project":"Select Project","option-label":"167","option-value":"167","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",onFilter:J,clearable:""},null,8,["modelValue","options","label"])]),_:1})]),_:1}),t(U,null,{default:o(()=>[t(z,null,{default:o(()=>[t(R,{modelValue:T.value,"onUpdate:modelValue":l[2]||(l[2]=e=>T.value=e),label:"Deployment Date",type:"date"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(y,{flat:"",round:"",color:"primary",icon:"download",disable:p.value.length<1,onClick:N},{default:o(()=>[t(k,{class:"bg-accent text-black shadow-4",offset:[10,10]},{default:o(()=>[j(" Download ")]),_:1})]),_:1},8,["disable"]),t(y,{flat:"",round:"",color:"primary",icon:"refresh",onClick:l[3]||(l[3]=e=>C(!0)),loading:_(L)(P.value)},{default:o(()=>[t(k,{class:"bg-accent text-black shadow-4",offset:[10,10]},{default:o(()=>[j(" Refresh ")]),_:1})]),_:1},8,["loading"])]),"body-cell-startTimestamp":o(e=>[t(S,{props:e},{default:o(()=>[a.$dayjs(e.value).isValid()?(v(),b("div",xe,d(e.value.format("L LT")),1)):(v(),b("div",De,d(e.row[1].format("L LT")),1))]),_:2},1032,["props"])]),"body-cell-startDate":o(e=>[t(S,{props:e},{default:o(()=>[a.$dayjs(e.value).isValid()?(v(),b("div",Ce,d(e.value.format("L")),1)):(v(),b("div",Ve,d(e.row[1].format("L")),1))]),_:2},1032,["props"])]),"body-cell-action":o(e=>[t(S,{props:e},{default:o(()=>[t(y,{color:"primary",label:"View Profile",onClick:s=>G(e.row),size:".75rem"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination","filter","title","loading","visible-columns"])]))}};export{at as default};
