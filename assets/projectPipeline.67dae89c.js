import{l as C,c as b,_ as I,A as v,an as N,bi as f,d as o,cw as q,D as a,au as M,ab as $,bK as S,cz as k,r as B,y as Q,aZ as T,B as w,bI as j,bO as x,G as O}from"./index.bf0c7c2b.js";import{Q as z}from"./QInnerLoading.21f82426.js";import{a as L}from"./QTable.a22e6d54.js";import{u as V}from"./use-quasar.9f74feb6.js";import{e as J}from"./export-file.eb604dd4.js";import{dayjs as y}from"./dayjs.58d8c02b.js";const E=C({name:"Pipeline Summary",components:{},props:{pipeline:Array},setup(t,m){const i=b(()=>t.pipeline.filter(r=>r.type==="In Process"||r.type==="Dispatch")),n=b(()=>t.pipeline.filter(r=>r.type==="Deployed"&&r[20]==="In Process")),u=b(()=>i.value.length+n.value.length);return{props:t,inProcess:i,deployed:n,total:u}}}),G=a("div",{class:"text-body1 text-primary"},"Summary",-1),K={class:"text-body2"},R=a("span",{class:"q-mr-md"},"In Process:",-1),Z=a("span",null,null,-1),F={class:"text-body2"},H=a("span",{class:"q-mr-md"},"Deployed:",-1),U={class:"text-body2"},W=a("span",{class:"q-mr-md"},"Total:",-1);function X(t,m,i,n,u,c){return v(),N(k,null,{default:f(()=>[o(q,{class:"q-pb-xs"},{default:f(()=>[G]),_:1}),o(q,{class:"text-right q-pt-xs"},{default:f(()=>[a("div",K,[R,M($(t.inProcess.length),1),Z]),a("div",F,[H,a("span",null,$(t.deployed.length),1)]),o(S,{color:"primary",class:"q-my-sm"}),a("div",U,[W,a("span",null,$(t.total),1)])]),_:1})]),_:1})}var ee=I(E,[["render",X]]);const te=C({name:"Pipeline Table",components:{PipelineSummary:ee},props:{rows:Array,selected:Array},setup(t,m){const i=V(),{capitalize:n}=Q,u=B(!1),c=b(()=>i.screen.gt.sm?[{name:1,label:"Name",align:"left",field:e=>r(e.employee),format:e=>`${e}`,sortable:!0},{name:7,label:"Status",align:"left",field:e=>d(e),format:e=>`${e}`,sortable:!0,sortOrder:"ad"},{name:2,label:"Offer Date",align:"left",field:e=>h(e),format:e=>`${y(e).format("MM/DD/YYYY")}`,sortable:!0},{name:4,label:"Classification",align:"left",field:e=>D(e),format:e=>`${!e||e===""?"Not Assigned":e}`,sortable:!0},{name:5,label:"Job #",align:"left",field:e=>_(e),format:e=>`${e===""||!e?"Not Assigned":e}`,sortable:!0},{name:6,label:"Arrival Date",align:"left",field:e=>P(e),format:e=>`${e?y(e).format("MM/DD/YYYY"):"TBD"}`,sortable:!0}]:[{name:1,label:"Name",align:"left",field:e=>r(e.employee),format:e=>`${e}`,sortable:!0},{name:7,label:"Status",align:"left",field:e=>d(e),format:e=>`${e}`,sortable:!0,sortOrder:"ad"},{name:2,label:"Offer Date",align:"left",field:e=>h(e),format:e=>`${y(e).format("MM/DD/YYYY")}`,sortable:!0},{name:4,label:"Classification",align:"left",field:e=>D(e),format:e=>`${!e||e===""?"Not Assigned":e}`,sortable:!0},{name:5,label:"Job #",align:"left",field:e=>_(e),format:e=>`${e===""||!e?"Not Assigned":e}`,sortable:!0},{name:6,label:"Arrival Date",align:"left",field:e=>P(e),format:e=>`${e?y(e).format("MM/DD/YYYY"):"TBD"}`,sortable:!0}]),r=e=>{const p=e[20]!==""?n(e[20].toLowerCase().trim()):"",g=e[22]!==""?n(e[22].toLowerCase().trim()):"",s=e[21]!==""?` ${n(e[21].toLowerCase().trim())}`:"",l=e[23]!==""?` ${n(e[23])}`:"";return`${g}${l}, ${p}${s}`};function d(e){if(e.type==="In Process")return"In Process";if(e.type==="Dispatch")return"In Process";if(e.type==="Deployed")return"Deployed"}function h(e){if(e.type==="In Process")return e[197].$d;if(e.type==="Dispatch")return e[165].$d;if(e.type==="Deployed")return e[144].$d}function D(e){if(e.type==="In Process")return e[106];if(e.type==="Dispatch")return e[45];if(e.type==="Deployed")return e[45]}function _(e){if(e.type==="In Process")return e[44];if(e.type==="Dispatch")return e[63];if(e.type==="Deployed")return e[85]}function P(e){if(e.type==="In Process")return null;if(e.type==="Dispatch")return null;if(e.type==="Deployed")return e[33].$d}const Y=(e,p,g)=>{let s=p!==void 0?p(e,g):e;return s=s==null?"":String(s),s=s.split('"').join('""'),`"${s}"`};function A(){const e=t.rows&&t.rows.value?t.rows.value:t.rows,p=[c.value.map(s=>Y(s.label))].concat(e.map(s=>c.value.map(l=>Y(typeof l.field=="function"?l.field(s):s[l.field===void 0?l.name:l.field],l.format,s)).join(","))).join(`\r
`);J(`${y().format("MM.DD.YYYY")} Project-Pipeline-Export.csv`,p,"text/csv")!==!0&&i.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}return{columns:c,props:t,loading:u,exportPipeline:A}}}),se={class:"q-px-sm"},ae={class:"row"},re={class:"col-12 col-md-10 q-px-xs"},ne={class:"full-width row flex-center text-primary q-gutter-sm q-py-md"};function oe(t,m,i,n,u,c){const r=T("pipeline-summary");return v(),w("div",se,[a("div",ae,[a("div",re,[o(L,{dense:"",columns:t.columns,rows:t.props.rows,"row-key":d=>d[3],class:"q-pa-sm",pagination:{rowsPerPage:t.$q.screen.gt.sm?25:100},separator:"vertical","table-header-class":"bg-dark text-white","no-data-label":"There is no one in the pipeline",loading:t.loading,grid:t.$q.screen.lt.md},{"no-data":f(({message:d})=>[a("div",ne,[o(j,{size:"2em",name:"fa-solid fa-person-circle-exclamation"}),a("span",null,$(d),1)])]),"top-right":f(()=>[o(x,{color:"secondary",flat:"","icon-right":"refresh",label:"Refresh",onClick:m[0]||(m[0]=d=>t.$emit("refresh"))}),o(x,{dense:t.$q.screen.lt.md,color:"primary",label:"Download",onClick:t.exportPipeline,disable:t.props.rows.length<1},null,8,["dense","onClick","disable"])]),loading:f(()=>[o(z,{showing:"",color:"primary"})]),_:1},8,["columns","rows","row-key","pagination","loading","grid"])]),a("div",{class:O(t.$q.screen.lt.md?"col-12 q-px-xs q-mt-sm order-first":"col-2 q-px-xs")},[o(r,{pipeline:t.props.rows},null,8,["pipeline"])],2)])])}var me=I(te,[["render",oe]]);export{me as P};
