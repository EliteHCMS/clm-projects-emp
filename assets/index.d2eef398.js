import{l as D,bL as N,_ as T,A as o,an as c,bi as a,d as t,cw as O,D as r,ab as u,B as p,ao as y,cy as I,bO as $,cz as L,r as k,c as M,G as b,au as P,bM as G,w as Y,aZ as C,bI as E,bk as Z,aY as J,H as K,F as X}from"./index.24640caf.js";import{Q as U,a as x}from"./QHeader.f80ebeee.js";import{Q as ee}from"./QMenu.85b48329.js";import{Q as W}from"./QToolbar.ee1573ae.js";import{Q as te}from"./QImg.8d3e1e5c.js";import{Q as oe}from"./QList.5a4e6907.js";import{Q as se,a as ae}from"./QDrawer.3026fe51.js";import{a as re,Q as ne}from"./QLayout.ad64422f.js";import{C as le}from"./ClosePopup.8741ca3c.js";import{u as ie}from"./use-quasar.aa6e4d58.js";import{u as me}from"./useQuerySaver.ae1b8d62.js";import{u as ce,b as ue,q as pe}from"./quickbase.55f00d0a.js";import{l as de}from"./socketListener.1635bd53.js";import{u as B}from"./dataStore.023a34bd.js";import{_ as ye}from"./version.22662404.js";import{M as fe}from"./MenuNav.d20f729b.js";import{_ as ge}from"./languageSelector.6d413b0f.js";import"./workday.d58d7f52.js";import"./dayjs.0bc72891.js";import"./workdayAPI.17f8da4c.js";import{Q as ve}from"./QSpinnerBall.c6fb9b80.js";import{a as ke}from"./syncEmployeeWithWorkday.ddef6973.js";import"./QResizeObserver.04cf705a.js";import"./position-engine.984f7aef.js";import"./selection.2610e754.js";import"./TouchPan.ea448e3c.js";import"./touch.60582172.js";import"./_commonjsHelpers.a26ce4be.js";import"./index.7dbe61ef.js";import"./localForage.460e604f.js";import"./api.ac4a6518.js";import"./i18n.abc72490.js";import"./QItemLabel.d84ebf29.js";import"./QBadge.2029ded3.js";import"./MenuSubLink.08bd27d3.js";import"./QSlideTransition.894c6482.js";import"./QSelect.9ae54e1c.js";import"./QChip.4b3878fc.js";import"./rtl.cf9bbe47.js";const we=D({props:{employee:Object,mini:Boolean},setup(e){const s=N();return B(),{props:e,goToTermination:()=>{s.push({name:"ee-termination"})}}}}),he={class:"text-h5 text-white q-mb-sm"},be={key:0,class:"text-body1 text-white q-mb-sm"},$e={class:"text-body1 text-white"};function qe(e,s,w,f,l,n){return o(),c(L,{class:"bg-accent q-my-lg q-pt-none",flat:"",square:""},{default:a(()=>[t(O,{class:"text-center q-pb-xs"},{default:a(()=>[r("div",he,u(e.employee[24]),1),e.employee[378]!==""?(o(),p("div",be,"ID: "+u(e.employee[378]),1)):y("",!0),r("div",$e,u(e.employee[25]),1)]),_:1}),e.$can("manage","employees")?(o(),c(I,{key:0,class:"q-pb-xs",align:"center"},{default:a(()=>[e.$route.name!=="ee-termination"&&e.$route.name!=="view-ee-release"&&!e.employee[581]&&e.employee[408]==="Active"&&e.employee[79]===7?(o(),c($,{key:0,label:"Release",color:"primary",dense:"",onClick:e.goToTermination},null,8,["onClick"])):y("",!0)]),_:1})):y("",!0)]),_:1})}var Ce=T(we,[["render",qe]]);const Se=D({name:"Last Workday Sync",props:{employee:Object},setup(e){const s=k(!0),{setWorkdayData:w,updateViewedEmployees:f,getEmployee:l}=B(),n=async m=>{s.value=!0;const{clm:h,sync:d}=await ke({clm:e.employee},m);d&&(w({id:h[3],data:d}),f({id:h[3],dataset:"workday",data:d})),s.value=!1},i=M(()=>l(e.employee[3])&&l(e.employee[3]).workday?l(e.employee[3]).workday:null),g=M(()=>{if(i.value){const{employmentData:m}=i.value;return m&&m.workerStatus&&m.workerStatus.active?"Active":"Terminated"}else return"N/A"});return n(!1),{syncing:s,checkWorkday:n,workday:i,workerStatus:g}}}),_e={key:1};function Qe(e,s,w,f,l,n){return o(),p("div",null,[e.syncing?(o(),p("div",{key:0,class:b(["text-dark q-mr-sm",e.$q.screen.gt.lg?"text-body2":"text-caption"])},[P(" Checking Workday Now... "),t(ve,{class:"q-ml-sm",color:"primary",size:e.$q.screen.gt.lg?"3em":"2em"},null,8,["size"])],2)):y("",!0),e.workday&&!e.syncing?(o(),p("div",_e,[e.workday[22]?(o(),p("div",{key:0,class:b(["text-primary",e.$q.screen.gt.lg?"text-body2":"text-caption"])},"No Data in Workday",2)):(o(),p("div",{key:1,class:b(e.$q.screen.gt.lg?"text-body2":"text-caption")},[r("span",{class:b(["text-dark q-mr-sm",e.$q.screen.gt.lg?"text-body2":"text-caption"])},"Worker Status:",2),r("span",{class:b(["text-primary text-weight-bold",e.$q.screen.gt.lg?"text-body2":"text-caption"])},u(e.workerStatus),3)],2)),r("div",null,[r("span",{class:b(["text-dark q-mr-sm",e.$q.screen.gt.lg?"text-body2":"text-caption"])},"Last Check in Workday:",2),r("span",{class:b(["text-weight-light text-secondary text-italic",e.$q.screen.gt.lg?"text-body2":"text-caption"])},u(e.$dayjs(e.workday[1].$d).fromNow()),3),t($,{color:"accent",label:"Check Now",flat:"",icon:"refresh",size:"sm",onClick:s[0]||(s[0]=i=>e.checkWorkday(!0))})])])):y("",!0)])}var Me=T(Se,[["render",Qe]]);const De=D({name:"View Employee",components:{MenuNav:fe,version:ye,languageSelector:ge,BasicEmployeeCard:Ce,LastWorkdaySync:Me},setup(){const{notificationService:e}=de,s=k(null),w=k(!1),f=ie(),l=k(!1),n=k(!1),i=k(!1),g=k(!1),m=N(),h=G(),d=ce(),{getUserType:_}=d,{toolbarTitle:v,viewEmployeeMenu:V}=ue(),{setEmployees:H,getEmployee:z,updateViewedEmployees:A}=B(),Q=M(()=>z(h.params.id)),j=async()=>{const{state:q}=m.options.history;if(s.value=q.back,!Q.value){f.loading.show();const{data:S}=await pe.fetchFromHiringApp({fields:[me({type:"employee",query:"",id:h.params.id})]},{action:"read",type:"employee"});H({id:S[3],data:S}),f.loading.hide()}},R=async()=>{d.logout().then(()=>{m.replace({name:"login"})})};return j(),Y(Q,(q,S)=>{}),_==="QuickBase User"&&e&&e.on("created",({officeId:q,title:S,details:F})=>{S==="quasarEmployeeUpdated"&&q&&A(F)}),{tab:k("mails"),fab:w,userStore:d,leftDrawerOpen:l,rightDrawerOpen:i,miniState:n,miniHover:g,miniMouseOver(){n.value===!0&&(g.value=!1)},miniMouseOut(){n.value===!0&&(g.value=!0)},toggleLeftDrawer(){f.screen.gt.sm?(n.value=!n.value,n.value===!0&&(g.value=!0)):l.value=!l.value},toggleRightDrawer(){i.value=!i.value},drawerClick(q){n.value&&(n.value=!1,q.stopPropagation())},logout:R,toolbarTitle:v,viewEmployeeMenu:V,employee:Q,getUserType:_,opener:s,closeWindow(){window.close()}}}}),Te={key:0,class:"q-mr-sm q-ml-sm",src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo-white.png",alt:"BrandSafway Logo",height:"25"},Be={key:0},Ee={key:1},Ue={class:"q-gutter-sm row items-center no-wrap"},We={class:"row no-wrap q-pa-md"},Ne={class:"column items-center"},Oe={class:"text-subtitle1 q-mt-md q-mb-xs"},Le={class:"row items-start"},Ve={class:"col-8"},He={class:"col-4 text-right"};function ze(e,s,w,f,l,n){const i=C("languageSelector"),g=C("basic-employee-card"),m=C("MenuNav"),h=C("last-workday-sync"),d=C("router-view"),_=C("version");return o(),c(ne,{view:"hHh lpR fFf"},{default:a(()=>[t(x,{elevated:""},{default:a(()=>[t(W,{style:{height:"62px"}},{default:a(()=>[t($,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),e.$q.screen.gt.sm?(o(),p("img",Te)):y("",!0),t(U,null,{default:a(()=>[e.$q.screen.lt.sm?(o(),p("span",Be)):(o(),p("span",Ee,u(e.toolbarTitle),1))]),_:1}),r("div",Ue,[t(i,{dense:"",borderless:"",class:"lang-white"}),t($,{flat:"",dense:"",color:"white"},{default:a(()=>[r("div",null,u(e.userStore.getUser[35])+" "+u(e.userStore.getUser[37]),1),t(E,{right:"",size:"2.2em",name:"account_circle"}),t(ee,null,{default:a(()=>[r("div",We,[r("div",Ne,[t(E,{right:"",size:"72px",name:"account_circle",class:"q-mr-md"}),r("div",Oe,u(e.userStore.getUser[35])+" "+u(e.userStore.getUser[37]),1),Z(t($,{color:"primary",label:e.$t("logout"),push:"",size:"sm",onClick:e.logout},null,8,["label","onClick"]),[[le]])])])]),_:1})]),_:1})])]),_:1})]),_:1}),t(ae,{modelValue:e.leftDrawerOpen,"onUpdate:modelValue":s[0]||(s[0]=v=>e.leftDrawerOpen=v),side:"left","show-if-above":"",bordered:"",mini:e.miniState&&e.miniHover,onMouseover:e.miniMouseOver,onMouseout:e.miniMouseOut,onClickCapture:e.drawerClick,class:"text-primary bg-accent print-hide"},{default:a(()=>[t(se,{class:"fit"},{default:a(()=>[e.$q.screen.lt.sm?(o(),c(W,{key:0,class:"bg-white",style:{height:"64px"}},{default:a(()=>[t(U,{class:"items-center"},{default:a(()=>[t(te,{src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo.svg",style:{"max-width":"245px"},fit:"center",class:"q-ml-md"})]),_:1})]),_:1})):y("",!0),e.employee?(o(),c(g,{key:1,employee:e.employee,mini:e.miniState},null,8,["employee","mini"])):y("",!0),t(oe,{class:"q-mt-sm"},{default:a(()=>[(o(!0),p(X,null,J(e.viewEmployeeMenu,v=>(o(),c(m,K({key:v.title},v,{mini:e.miniState}),null,16,["mini"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue","mini","onMouseover","onMouseout","onClickCapture"]),t(re,null,{default:a(()=>[t(L,{class:"print-hide",flat:""},{default:a(()=>[t(O,{class:"q-pb-xs q-pt-sm"},{default:a(()=>[r("div",Le,[r("div",Ve,[e.employee?(o(),c(h,{key:0,employee:e.employee},null,8,["employee"])):y("",!0)]),r("div",He,[e.$q.screen.gt.sm?(o(),c($,{key:0,icon:"close",label:"Close",color:"dark",onClick:s[1]||(s[1]=v=>e.getUserType==="QuickBase User"?e.closeWindow():e.$router.go(-1))})):(o(),c($,{key:1,icon:"close",round:"",color:"dark",onClick:s[2]||(s[2]=v=>e.getUserType==="QuickBase User"?e.closeWindow():e.$router.go(-1))}))])])]),_:1})]),_:1}),t(d)]),_:1}),t(_)]),_:1})}var _t=T(De,[["render",ze]]);export{_t as default};
