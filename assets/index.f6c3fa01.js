import{l as T,bT as N,_ as D,A as o,aq as c,br as a,d as t,cT as V,D as r,ac as u,B as p,ar as y,cV as P,bW as $,cS as O,r as k,c as M,G as b,ax as I,bU as G,w as J,b5 as C,bQ as W,bt as K,F as X,b4 as Y,H as Z}from"./index.dbae30bb.js";import{Q as x,a as B}from"./QHeader.87c6efb0.js";import{Q as ee}from"./QMenu.fa26a79f.js";import{Q as E}from"./QToolbar.5a029f12.js";import{Q as te}from"./QImg.96962e8b.js";import{Q as oe}from"./QList.be5fb962.js";import{Q as se,a as ae}from"./QDrawer.6e2b50c9.js";import{Q as re,a as ne}from"./QLayout.4de5b6fd.js";import{C as le}from"./ClosePopup.1982208f.js";import{u as ie}from"./use-quasar.4af20f9f.js";import{u as me}from"./useQuerySaver.d29ff9ee.js";import{u as ce,b as ue,q as pe}from"./app.ec713cf3.js";import{l as de}from"./socketListener.1f5c3081.js";import{u as U}from"./dataStore.debf7de5.js";import{_ as ye}from"./version.5e20921d.js";import{M as fe}from"./MenuNav.c72ee148.js";import{_ as ge}from"./languageSelector.23a17ba5.js";import"./workday.d2daefd5.js";import"./dayjs.c8159a49.js";import"./workdayAPI.5e988549.js";import{Q as ve}from"./QSpinnerBall.3ac2d27e.js";import{a as ke}from"./syncEmployeeWithWorkday.2a2652fa.js";import"./QResizeObserver.87ba1c4e.js";import"./position-engine.4c646f66.js";import"./selection.6f966ca8.js";import"./TouchPan.cb83f3c5.js";import"./touch.70a9dd44.js";import"./_commonjsHelpers.a26ce4be.js";import"./localForage.d59848b7.js";import"./api.0b402b2c.js";import"./index.04bc0a32.js";import"./i18n.3b5a80ec.js";import"./QSelect.5872e32d.js";import"./QChip.1fd9b058.js";import"./rtl.b51694b1.js";import"./QBadge.89262d26.js";import"./MenuSubLink.16260605.js";import"./QSlideTransition.1ee2e38f.js";const we=T({props:{employee:Object,mini:Boolean},setup(e){const s=N();return U(),{props:e,goToTermination:()=>{s.push({name:"ee-termination"})}}}}),he={class:"text-h5 text-white q-mb-sm"},be={key:0,class:"text-body1 text-white q-mb-sm"},$e={class:"text-body1 text-white"};function qe(e,s,w,f,l,n){return o(),c(O,{class:"bg-accent q-my-lg q-pt-none",flat:"",square:""},{default:a(()=>[t(V,{class:"text-center q-pb-xs"},{default:a(()=>[r("div",he,u(e.employee[24]),1),e.employee[378]!==""?(o(),p("div",be,"ID: "+u(e.employee[378]),1)):y("",!0),r("div",$e,u(e.employee[25]),1)]),_:1}),e.$can("manage","employees")?(o(),c(P,{key:0,class:"q-pb-xs",align:"center"},{default:a(()=>[e.$route.name!=="ee-termination"&&e.$route.name!=="view-ee-release"&&!e.employee[581]&&e.employee[408]==="Active"&&e.employee[79]===7?(o(),c($,{key:0,label:"Release",color:"primary",dense:"",onClick:e.goToTermination},null,8,["onClick"])):y("",!0)]),_:1})):y("",!0)]),_:1})}var Ce=D(we,[["render",qe]]);const Se=T({name:"Last Workday Sync",props:{employee:Object},setup(e){const s=k(!0),{setWorkdayData:w,updateViewedEmployees:f,getEmployee:l}=U(),n=async m=>{s.value=!0;const{clm:h,sync:d}=await ke({clm:e.employee},m);d&&(w({id:h[3],data:d}),f({id:h[3],dataset:"workday",data:d})),s.value=!1},i=M(()=>l(e.employee[3])&&l(e.employee[3]).workday?l(e.employee[3]).workday:null),g=M(()=>{if(i.value){const{employmentData:m}=i.value;return m&&m.workerStatus&&m.workerStatus.active?"Active":"Terminated"}else return"N/A"});return n(!1),{syncing:s,checkWorkday:n,workday:i,workerStatus:g}}}),_e={key:1};function Qe(e,s,w,f,l,n){return o(),p("div",null,[e.syncing?(o(),p("div",{key:0,class:b(["text-dark q-mr-sm",e.$q.screen.gt.lg?"text-body2":"text-caption"])},[I(" Checking Workday Now... "),t(ve,{class:"q-ml-sm",color:"primary",size:e.$q.screen.gt.lg?"3em":"2em"},null,8,["size"])],2)):y("",!0),e.workday&&!e.syncing?(o(),p("div",_e,[e.workday[22]?(o(),p("div",{key:0,class:b(["text-primary",e.$q.screen.gt.lg?"text-body2":"text-caption"])},"No Data in Workday",2)):(o(),p("div",{key:1,class:b(e.$q.screen.gt.lg?"text-body2":"text-caption")},[r("span",{class:b(["text-dark q-mr-sm",e.$q.screen.gt.lg?"text-body2":"text-caption"])},"Worker Status:",2),r("span",{class:b(["text-primary text-weight-bold",e.$q.screen.gt.lg?"text-body2":"text-caption"])},u(e.workerStatus),3)],2)),r("div",null,[r("span",{class:b(["text-dark q-mr-sm",e.$q.screen.gt.lg?"text-body2":"text-caption"])},"Last Check in Workday:",2),r("span",{class:b(["text-weight-light text-secondary text-italic",e.$q.screen.gt.lg?"text-body2":"text-caption"])},u(e.$dayjs(e.workday[1].$d).fromNow()),3),t($,{color:"accent",label:"Check Now",flat:"",icon:"refresh",size:"sm",onClick:s[0]||(s[0]=i=>e.checkWorkday(!0))})])])):y("",!0)])}var Me=D(Se,[["render",Qe]]);const Te=T({name:"View Employee",components:{MenuNav:fe,version:ye,languageSelector:ge,BasicEmployeeCard:Ce,LastWorkdaySync:Me},setup(){const{notificationService:e}=de,s=k(null),w=k(!1),f=ie(),l=k(!1),n=k(!1),i=k(!1),g=k(!1),m=N(),h=G(),d=ce(),{getUserType:_}=d,{toolbarTitle:v,viewEmployeeMenu:H}=ue(),{setEmployees:L,getEmployee:A,updateViewedEmployees:z}=U(),Q=M(()=>A(h.params.id)),j=async()=>{const{state:q}=m.options.history;if(s.value=q.back,!Q.value){f.loading.show();const{data:S}=await pe.fetchFromHiringApp({fields:[me({type:"employee",query:"",id:h.params.id})]},{action:"read",type:"employee"});L({id:S[3],data:S}),f.loading.hide()}},R=async()=>{d.logout().then(()=>{m.replace({name:"login"})})};return j(),J(Q,(q,S)=>{}),_==="QuickBase User"&&e&&e.on("created",({officeId:q,title:S,details:F})=>{S==="quasarEmployeeUpdated"&&q&&z(F)}),{tab:k("mails"),fab:w,userStore:d,leftDrawerOpen:l,rightDrawerOpen:i,miniState:n,miniHover:g,miniMouseOver(){n.value===!0&&(g.value=!1)},miniMouseOut(){n.value===!0&&(g.value=!0)},toggleLeftDrawer(){f.screen.gt.sm?(n.value=!n.value,n.value===!0&&(g.value=!0)):l.value=!l.value},toggleRightDrawer(){i.value=!i.value},drawerClick(q){n.value&&(n.value=!1,q.stopPropagation())},logout:R,toolbarTitle:v,viewEmployeeMenu:H,employee:Q,getUserType:_,opener:s,closeWindow(){window.close()}}}}),De={key:0,class:"q-mr-sm q-ml-sm",src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo-white.png",alt:"BrandSafway Logo",height:"25"},Ue={key:0},We={key:1},Be={class:"q-gutter-sm row items-center no-wrap"},Ee={class:"row no-wrap q-pa-md"},Ne={class:"column items-center"},Ve={class:"text-subtitle1 q-mt-md q-mb-xs"},Oe={class:"row items-start"},He={class:"col-8"},Le={class:"col-4 text-right"};function Ae(e,s,w,f,l,n){const i=C("languageSelector"),g=C("basic-employee-card"),m=C("MenuNav"),h=C("last-workday-sync"),d=C("router-view"),_=C("version");return o(),c(ne,{view:"hHh lpR fFf"},{default:a(()=>[t(x,{elevated:""},{default:a(()=>[t(E,{style:{height:"62px"}},{default:a(()=>[t($,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),e.$q.screen.gt.sm?(o(),p("img",De)):y("",!0),t(B,null,{default:a(()=>[e.$q.screen.lt.sm?(o(),p("span",Ue)):(o(),p("span",We,u(e.toolbarTitle),1))]),_:1}),r("div",Be,[t(i,{dense:"",borderless:"",class:"lang-white"}),t($,{flat:"",dense:"",color:"white"},{default:a(()=>[r("div",null,u(e.userStore.getUser[35])+" "+u(e.userStore.getUser[37]),1),t(W,{right:"",size:"2.2em",name:"account_circle"}),t(ee,null,{default:a(()=>[r("div",Ee,[r("div",Ne,[t(W,{right:"",size:"72px",name:"account_circle",class:"q-mr-md"}),r("div",Ve,u(e.userStore.getUser[35])+" "+u(e.userStore.getUser[37]),1),K(t($,{color:"primary",label:e.$t("logout"),push:"",size:"sm",onClick:e.logout},null,8,["label","onClick"]),[[le]])])])]),_:1})]),_:1})])]),_:1})]),_:1}),t(se,{modelValue:e.leftDrawerOpen,"onUpdate:modelValue":s[0]||(s[0]=v=>e.leftDrawerOpen=v),side:"left","show-if-above":"",bordered:"",mini:e.miniState&&e.miniHover,onMouseover:e.miniMouseOver,onMouseout:e.miniMouseOut,onClickCapture:e.drawerClick,class:"text-primary bg-accent print-hide"},{default:a(()=>[t(ae,{class:"fit"},{default:a(()=>[e.$q.screen.lt.sm?(o(),c(E,{key:0,class:"bg-white",style:{height:"64px"}},{default:a(()=>[t(B,{class:"items-center"},{default:a(()=>[t(te,{src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo.svg",style:{"max-width":"245px"},fit:"center",class:"q-ml-md"})]),_:1})]),_:1})):y("",!0),e.employee?(o(),c(g,{key:1,employee:e.employee,mini:e.miniState},null,8,["employee","mini"])):y("",!0),t(oe,{class:"q-mt-sm"},{default:a(()=>[(o(!0),p(X,null,Y(e.viewEmployeeMenu,v=>(o(),c(m,Z({key:v.title},v,{mini:e.miniState}),null,16,["mini"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue","mini","onMouseover","onMouseout","onClickCapture"]),t(re,null,{default:a(()=>[t(O,{class:"print-hide",flat:""},{default:a(()=>[t(V,{class:"q-pb-xs q-pt-sm"},{default:a(()=>[r("div",Oe,[r("div",He,[e.employee?(o(),c(h,{key:0,employee:e.employee},null,8,["employee"])):y("",!0)]),r("div",Le,[e.$q.screen.gt.sm?(o(),c($,{key:0,icon:"close",label:"Close",color:"dark",onClick:s[1]||(s[1]=v=>e.getUserType==="QuickBase User"?e.closeWindow():e.$router.go(-1))})):(o(),c($,{key:1,icon:"close",round:"",color:"dark",onClick:s[2]||(s[2]=v=>e.getUserType==="QuickBase User"?e.closeWindow():e.$router.go(-1))}))])])]),_:1})]),_:1}),t(d)]),_:1}),t(_)]),_:1})}var St=D(Te,[["render",Ae]]);export{St as default};
