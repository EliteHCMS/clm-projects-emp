import{bU as B,bW as k,r as n,w as q,aU as I,c as x,B as $,C as N,d as a,bs as l,cV as P,E as c,cU as T,cW as U,a9 as p,bR as O,H as Y,ad as z,bX as h,ay as A}from"./index.f532dd3a.js";import{Q as E}from"./QSpace.b3656209.js";import{Q as M}from"./QTooltip.3a6805dc.js";import{Q as W}from"./QTd.4c1c696b.js";import{u as G}from"./use-quasar.45d0ed96.js";import{e as H}from"./export-file.dc78ba05.js";import{c as L}from"./app.c2decb41.js";import{dayjs as X}from"./dayjs.bb7adb48.js";import{_ as F}from"./projectSelector.ef5d8b1c.js";import{_ as J}from"./aTable.4506535c.js";import"./position-engine.9267cf84.js";import"./selection.36689ad5.js";import"./_commonjsHelpers.a26ce4be.js";import"./localForage.627988b4.js";import"./api.df6fe10b.js";import"./index.04bc0a32.js";import"./i18n.c56fe056.js";import"./QSelect.40ac6683.js";import"./QChip.055ed411.js";import"./QMenu.219b0d4b.js";import"./rtl.b51694b1.js";import"./QTable.0549a35a.js";import"./QList.2a81b73f.js";import"./QMarkupTable.155ed162.js";import"./use-fullscreen.714ccbfc.js";const K={class:"q-pa-md"},Z={class:"row items-center"},ee={class:"col-12 col-md-3 q-px-sm"},te={class:"col-12 col-md-5 q-px-sm"},Ve={__name:"index",setup(ae){const d=G(),Q=B(),f=L(),{fetchRoster:v,fetchAllRosters:_}=f,{getRoster:y,getLoadingState:C,getSelectedProject:r}=k(f),b=n("Roster"),D=n("rosters"),m=n(""),R=n({sortBy:"13",descending:!1,rowsPerPage:150});r.value?v({selectedId:r.value}):_({can:"read"}),q(r,()=>{r.value?v({selectedId:r.value}):_({can:"read"})});const S=n(new Date),V=setInterval(()=>{S.value=new Date},1e3);I(()=>{clearInterval(V)});const u=x(()=>[{name:"id",align:"left",label:"ID",field:"3",sortable:!1},{name:"name",align:"left",label:"Name",field:"298",sortable:!0},{name:"avgDRO",align:"center",label:"AVG DRO",field:"208",sortable:!0},{name:"openRequests",align:"center",label:"Open Request",field:"31",sortable:!0},{name:"action",align:"center",label:"",sortable:!1}]),i=x(()=>y.value(r.value).filter(o=>!0).sort((o,s)=>o[298].localeCompare(s[298]))),j=o=>{Q.push({name:"view-project",params:{id:o[3]}})},g=(o,s,t)=>{let e=s!==void 0?s(o,t):o;return e=e==null?"":String(e),e=e.split('"').join('""'),`"${e}"`},w=()=>{const o=[u.value.map(t=>g(t.label))].concat(i.value.map(t=>u.value.map(e=>g(typeof e.field=="function"?e.field(t):t[e.field===void 0?e.name:e.field],e.format,t)).join(","))).join(`\r
`);H(`${b.value} ${X().format("MM.DD.YYYY")}.csv`,o,"text/csv")!==!0&&d.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})};return(o,s)=>($(),N("div",K,[a(T,{flat:"",class:"q-pt-none"},{default:l(()=>[a(P,null,{default:l(()=>[c("div",Z,[c("div",ee,[a(F,{can:"read",styleSelection:!0})])])]),_:1})]),_:1}),a(J,{rows:i.value,columns:u.value,pagination:R.value,filter:m.value,title:b.value,separator:"vertical","row-key":"3",loading:p(C)(D.value),downloadButton:!0,onDownload:w},{top:l(()=>[c("div",te,[a(U,{dense:p(d).screen.lt.md,modelValue:m.value,"onUpdate:modelValue":s[0]||(s[0]=t=>m.value=t),label:"Search...",clearable:""},{prepend:l(()=>[a(O,{name:"search"})]),_:1},8,["dense","modelValue"])]),a(E),c("div",{class:Y(["text-dark text-caption text-italic",p(d).screen.lt.md?"offset-xs-5":""])},"(Total: "+z(i.value.length)+")",3),a(h,{flat:"",round:"",color:"primary",icon:"download",disable:i.value.length<1,onClick:w},{default:l(()=>[a(M,{class:"bg-accent text-black shadow-4",offset:[10,10]},{default:l(()=>[A(" Download ")]),_:1})]),_:1},8,["disable"])]),"body-cell-action":l(t=>[a(W,{props:t},{default:l(()=>[a(h,{color:"primary",label:"View Project",onClick:e=>j(t.row),size:".75rem"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination","filter","title","loading"])]))}};export{Ve as default};
