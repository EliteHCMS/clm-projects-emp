import{Q as Y}from"./QImg.08b1ca51.js";import{_ as Z,bT as ee,r as g,c as E,w,b5 as ae,A as o,aq as C,br as l,a8 as s,B as d,d as t,ar as n,D as q,cT as y,ac as m,bO as te,bN as se,cU as T,b as V,bQ as U,av as le,bW as H,E as re,cV as oe,ax as Q,cS as ne}from"./index.35263bc9.js";import{Q as ue}from"./QForm.5a640d8d.js";import{Q as ie}from"./QPage.67abb418.js";import{u as me}from"./use-quasar.b628893e.js";import{u as M}from"./vee-validate.esm.d32c6ea3.js";import{u as de}from"./i18n.e68020fa.js";import{b as pe,q as ce}from"./app.60ab06c9.js";import{p as ve}from"./VueTelInput.8de4da77.js";import{_ as fe}from"./languageSelector.ceb882d1.js";import{c as P}from"./array.59f93f43.js";import{c as ge}from"./carousel.4cee7b4e.js";import{h as be}from"./HelpDeskTicket.2543f8a0.js";import"./_commonjsHelpers.a26ce4be.js";import"./dayjs.515e6981.js";import"./localForage.07bccd5e.js";import"./api.b1e79703.js";import"./index.04bc0a32.js";import"./QSelect.f9a2629d.js";import"./QChip.3e700a72.js";import"./QMenu.b9d1a35f.js";import"./position-engine.5ee61549.js";import"./selection.03356054.js";import"./rtl.b51694b1.js";import"./use-panel.6d6d7233.js";import"./touch.3df10340.js";import"./use-fullscreen.ebe2b650.js";import"./QTooltip.8631b5e8.js";import"./QFile.6c8c819a.js";import"./QSpinnerGears.20058bc2.js";const ye={key:0,class:"col-md-7 col-lg-8 col-lx-8"},he={class:"col-xs-12 col-sm-12 col-md-5 col-lg-4 col-lx-4 row justify-center items-center"},xe={key:0,class:"text-dark"},ke={key:1,class:"text-dark"},Ne={key:0,class:"row q-col-gutter-xs"},$e={class:"text-grey-6",tabindex:"4"},_e={key:0,class:"text-grey-6",tabindex:"5"},we={key:1,class:"text-grey-6"},Ce={class:"row justify-center"},qe={__name:"forgotPassword",setup(Ve){const R=me(),j=ee(),{t:h}=de(),{currentUserType:x}=pe(),p=g(!1),c=g(!1),B=g(10),u=g("username"),i=g("phoneNumber"),b=g(null),S=g(!1),K=E(()=>p.value||i.value==="phoneNumber"?P().email(`${h("validEmailIsRequired")}`).nullable():P().email(`${h("validEmailIsRequired")}`).required()),z=E(()=>{if(c.value||i.value==="email")return P().nullable();{const e=new RegExp("^[0-9]{"+B.value+"}","g");return P().matches(e,{excludeEmptyString:!0,message:`${h("validPhoneIsRequired")}`}).required()}}),{value:k,errorMessage:D,meta:W}=M("firstName"),{value:N,errorMessage:A,meta:O}=M("lastName"),{errorMessage:I,value:v}=M("email",K),{errorMessage:$,value:f}=M("phone",z);x==="QuickBase User"&&j.push("/"),w(I,e=>{e||v.value===""?c.value=!1:c.value=!0}),w(v,e=>{(!e||e==="")&&(c.value=!1)}),w($,e=>{e||f.value===""?p.value=!1:p.value=!0}),w(f,e=>{(!e||e==="")&&(p.value=!1)});const G=e=>{b.value=e},J=e=>{B.value=e},L=E(()=>!(p.value||c.value)),F=async()=>{const e={userType:x,firstName:k.value,lastName:N.value,email:c.value?v.value:null,phoneNumber:p.value?`+${b.value?b.value.dialCode:"1"}${f.value}`:null},{data:a}=await ce.resetPassword(e);if(a.length===0)R.notify({position:"top-right",type:"negative",message:`${h("noUserFoundWithInformation")}`});else{const _=a[0][76];j.push({name:"code-confirmation",query:{...b.value&&p.value&&{p:`${b.value?b.value.dialCode:"1"}${f.value}`},...c.value&&{e:`${v.value}`},rid:_[3],ac:!0,send:!0}})}},X=e=>{u.value==="username"&&!L.value?F():e.preventDefault()};return(e,a)=>{const _=ae("router-link");return o(),C(ie,{class:"window-height window-width row"},{default:l(()=>[s(R).screen.lt.md?n("",!0):(o(),d("div",ye,[t(ge)])),q("div",he,[t(ne,{class:"auth-card",flat:""},{default:l(()=>[t(y,{style:{"padding-left":"30px","padding-right":"30px"}},{default:l(()=>[t(Y,{src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo.svg",fit:"scale-down",class:"auth-logo full-width"})]),_:1}),t(y,{class:"text-center auth-description"},{default:l(()=>[i.value==="email"&&u.value==="username"?(o(),d("p",xe,m(e.$t("enterEmailSendCode")),1)):n("",!0),i.value==="phoneNumber"&&u.value==="username"?(o(),d("p",ke,m(e.$t("enterPhoneSendCode")),1)):n("",!0)]),_:1}),t(y,null,{default:l(()=>[t(ue,{class:"q-px-sm q-pt-sm",onSubmit:a[7]||(a[7]=te(()=>{},["prevent"])),onKeyup:se(X,["enter"])},{default:l(()=>[u.value==="username"?(o(),d("div",Ne,[t(T,{class:"col-xs-12 col-sm-6 q-pb-lg",clearable:"",outlined:"",modelValue:s(k),"onUpdate:modelValue":a[0]||(a[0]=r=>V(k)?k.value=r:null),type:"text",autocomplete:"given-name",label:e.$t("firstName"),tabindex:"1",name:"firstName",error:!!(s(D)&&s(W).validated),"error-message":s(D)},{prepend:l(()=>[t(U,{name:"person"})]),_:1},8,["modelValue","label","error","error-message"]),t(T,{class:"col-xs-12 col-sm-6",clearable:"",outlined:"",modelValue:s(N),"onUpdate:modelValue":a[1]||(a[1]=r=>V(N)?N.value=r:null),type:"text",autocomplete:"family-name",label:e.$t("lastName"),tabindex:"2",name:"lastName",error:!!(s(A)&&s(O).validated),"error-message":s(A)},{prepend:l(()=>[t(U,{name:"person_outline"})]),_:1},8,["modelValue","label","error","error-message"])])):n("",!0),i.value==="email"&&u.value==="username"?(o(),C(T,{key:1,style:{"padding-bottom":"0px"},clearable:"",outlined:"",modelValue:s(v),"onUpdate:modelValue":a[3]||(a[3]=r=>V(v)?v.value=r:null),type:"email",label:e.$t("email"),tabindex:"3",error:!!s(I),"error-message":s(I),readonly:u.value!=="username"},le({prepend:l(()=>[t(U,{name:"email"})]),_:2},[u.value!=="username"?{name:"append",fn:l(()=>[t(H,{round:"",dense:"",flat:"",icon:"edit",onClick:a[2]||(a[2]=r=>{u.value="username"})})]),key:"0"}:void 0]),1032,["modelValue","label","error","error-message","readonly"])):n("",!0),i.value==="phoneNumber"&&u.value==="username"?(o(),C(ve,{key:2,outlined:"",modelValue:s(f),"onUpdate:modelValue":a[4]||(a[4]=r=>V(f)?f.value=r:null),label:e.$t("phoneNumber"),tabindex:"3",onMaxLengthChanged:J,style:re(s($)?"padding-bottom: 20px;":"padding-bottom: 0px;"),error:!!s($),"error-message":s($),onCountryChanged:G},null,8,["modelValue","label","style","error","error-message"])):n("",!0),t(y,{class:"text-right q-pa-none"},{default:l(()=>[i.value==="email"?(o(),d("a",{key:0,onClick:a[5]||(a[5]=r=>i.value="phoneNumber"),class:"text-grey-6",href:"javascript:void(0);",tabindex:"4"},m(e.$t("usePhoneNumber")),1)):n("",!0),i.value==="phoneNumber"?(o(),d("a",{key:1,onClick:a[6]||(a[6]=r=>i.value="email"),class:"text-grey-6",href:"javascript:void(0);",tabindex:"4"},m(e.$t("useEmail")),1)):n("",!0)]),_:1})]),_:1},8,["onKeyup"])]),_:1}),t(oe,{class:"q-px-lg"},{default:l(()=>[u.value==="username"?(o(),C(H,{key:0,unelevated:"",size:"lg",color:"primary",class:"full-width text-white",label:e.$t("resetPassword"),tabindex:"3",disabled:L.value,onClick:F},null,8,["label","disabled"])):n("",!0)]),_:1}),t(y,{class:"text-center q-pa-sm"},{default:l(()=>[q("p",$e,[t(_,{to:"/login",class:"text-grey-6"},{default:l(()=>[Q(m(e.$t("returnToLogin")),1)]),_:1})]),s(x)==="Candidate"?(o(),d("p",_e,[Q(m(e.$t("needAnAccountQuestion"))+" ",1),t(_,{to:"/register",class:"text-grey-6"},{default:l(()=>[Q(m(e.$t("register")),1)]),_:1})])):n("",!0),s(x)!=="Candidate"?(o(),d("p",we,[Q(m(e.$t("needHelpQuestion"))+" ",1),q("a",{class:"text-grey-6",href:"javascript:void(0);",onClick:a[8]||(a[8]=r=>S.value=!0),tabindex:"6"},m(e.$t("addHelpDeskTicket")),1)])):n("",!0)]),_:1}),t(y,{class:"q-pl-lg q-pa-sm"},{default:l(()=>[q("div",Ce,[t(fe,{dense:"",borderless:""})])]),_:1})]),_:1})]),t(be,{modelValue:S.value,"onUpdate:modelValue":a[9]||(a[9]=r=>S.value=r)},null,8,["modelValue"])]),_:1})}}};var ra=Z(qe,[["__scopeId","data-v-de1c7ee6"]]);export{ra as default};
