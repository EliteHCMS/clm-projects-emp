import{q as i}from"./quickbase.2ee72534.js";import{dayjs as n}from"./dayjs.5d57e85b.js";import{u as f}from"./useQuerySaver.b2d7aad9.js";import"./workday.f682c64c.js";import{workdayAPI as y}from"./workdayAPI.dd056a89.js";const w=async({clm:e},s)=>{if(!s&&e[576]&&e[576].$d&&n(e[576].$d).isSameOrAfter(n().subtract(n.duration({days:5})),"day")){const{data:t}=await i.fetchFromHiringApp({fields:[f({type:"workdaySync",query:"",id:e[578]})]});return{sync:t,clm:e}}else{let t={sandbox:e[207]};if(e[378]!==""?t.workerId=e[378]:e[188].length===9?t.ssn=e[188]:t=null,t&&!e[509]){const{data:o}=await y.getWorker(t);let r;if(o.length>0?r=o[0]:r=null,r){const a=r,u=[{6:{value:e[3]},8:{value:a.workerName},9:{value:a.nationalId},10:{value:a.userId},11:{value:a.workerId},12:{value:JSON.stringify(a.employmentData)},14:{value:JSON.stringify(a.personalData)},16:{value:JSON.stringify(a.workerReference)},17:{value:`${JSON.stringify(a.managementChainData)}`},18:{value:`${JSON.stringify(a.organizations)}`},19:{value:a.applicantReference?JSON.stringify(a.applicantReference):""}}],{data:d}=await i.upsertRecordsXML({to:"bspfhy84a",data:u,fieldsToReturn:[7],formatObject:7});return{sync:d[0][7],clm:e}}}}},k=async({wd:e,clm:s})=>{const{data:t}=await i.upsertRecordsXML({to:"bp3gb7ng2",data:[{3:{value:s[3]},568:{value:n()}}],fieldsToReturn:[549],formatObject:549});return{clm:t[0][549],sync:e}};export{w as a,k as s};
