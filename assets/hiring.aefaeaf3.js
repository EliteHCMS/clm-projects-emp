import{a as Ne,Q as O}from"./QStep.7af7ba90.js";import{Q as Pe}from"./QPage.4d3a0dd4.js";import{l as j,r as T,bU as ee,c as k,_ as U,A as n,B as p,d as l,ar as S,aq as Y,br as m,cT as M,D as h,G as B,cV as G,bW as V,F as L,b4 as z,ac as F,bt as _e,bR as Se,bP as oe,ax as Ye,bQ as Xe,dc as Te,cS as x,b5 as H,H as Ve,y as de,bT as Qe,w as Fe,df as Ie,bS as ce,bO as Me,cU as re,cy as Le}from"./index.ed1cd1a8.js";import{q as N,g as He}from"./app.58c96d85.js";import{u as W}from"./dataStore.112f1173.js";import{Q as ae}from"./QInnerLoading.273de71a.js";import{Q as Oe}from"./QRating.15a8412c.js";import{Q as Be}from"./QList.1713c134.js";import{u as X,c as je}from"./useQuerySaver.d29ff9ee.js";import{dayjs as E}from"./dayjs.d6c6127f.js";import{Q as ne,a as Ue,b as ie}from"./QTabPanels.5776e1dd.js";import{Q as ze}from"./QTabs.8f995d1b.js";import{Q as Ge}from"./QForm.a26f0b73.js";import{u as We}from"./use-quasar.0680e35f.js";import"./index.04bc0a32.js";import{u as Je}from"./index.89794de1.js";import{a as Ke,u as te}from"./vee-validate.esm.9e016e91.js";import{a as Ze,b as xe,c as ea}from"./array.59f93f43.js";import{api as aa}from"./api.e0fdf09c.js";import{Q as ta}from"./QSpinnerBall.39da9d2c.js";import{E as la}from"./form-edit-card-section.d09e940a.js";import{H as sa}from"./historyPanel.74ac3f0d.js";import{a as oa}from"./QTable.d845a145.js";import"./use-panel.21d7cf21.js";import"./touch.70a9dd44.js";import"./selection.e39b2fce.js";import"./QSlideTransition.21f094a6.js";import"./_commonjsHelpers.a26ce4be.js";import"./localForage.830ce567.js";import"./i18n.9212c305.js";import"./QResizeObserver.e28f4cf4.js";import"./rtl.b51694b1.js";import"./QSelect.d18b0263.js";import"./QChip.8da1fa28.js";import"./QMenu.d23a604a.js";import"./position-engine.df0f0bff.js";import"./QTr.d6da9795.js";import"./QTd.a02323b5.js";import"./QMarkupTable.9e572f7b.js";import"./use-fullscreen.862858a0.js";const ra=j({props:{id:Number},components:{},setup(a){const s=T(!1),f=ee(),{getEmployee:v,updateViewedEmployees:g,setReleases:q}=W(),o=k(()=>f.params.id?f.params.id:null),t=k(()=>o.value?v(o.value):null),u=k(()=>t.value&&t.value.release?t.value.release:null),d=k(()=>{let w;return u.value&&u.value[3]?w=[{label:"Project",value:u.value[46]},{label:"Job Title",value:u.value[82]},{label:"Reason",value:u.value[32]},{label:"Last Day On Site",value:E(u.value[36].$d).format("MM/DD/YYYY")},{label:"CAAP Rating",value:u.value[59]&&u.value[59].length>0?u.value[59][0][37]:0,type:"rating"},{label:"Submitted On",value:E(u.value[1].$d).tz(E.tz.guess()).format("MM/DD/YYYY hh:mm a")},{label:"Comments",value:u.value[60],type:"comments"}]:w=[],w}),b=async w=>{if(w||!u.value&&a.id){s.value=!0;const{data:r}=await N.fetchFromHiringApp({fields:[X({type:"releases",id:a.id})]});console.log(r),g({id:o.value,dataset:"release",data:r}),q({id:a.id,data:r}),s.value=!1}};return b(),{loading:s,release:u,loadData:b,releaseDetails:d}}}),na={key:0,class:"q-py-xl"},ia={class:"row items-start"},ua=h("div",{class:"col-12 col-md-8"},[h("div",{class:"text-primary text-h6"},"This Employee Has a Pending Release")],-1),da={class:"row"},ca={class:"col-12 col-md-3"},ma={class:"text-body2"},fa={class:"col-12 col-md-9"},pa={key:0},va={key:1,class:"text-body2 text-weight-light"},ba={key:1,class:"text-body2 text-weight-light"},ga={class:"text-body1 text-weight-bold q-mb-xs"},ya={class:"text-body2 text-italic text-primary q-pl-md"},ha=h("div",{class:"text-body1 text-weight-bold q-mb-xs"},"Supporting Docs",-1);function $a(a,s,f,v,g,q){return n(),p("div",null,[a.loading?(n(),p("div",na,[l(ae,{color:"info",showing:a.loading,"label-class":"text-info",label:"Loading Release..."},null,8,["showing"])])):S("",!0),a.release&&!a.loading?(n(),Y(x,{key:1},{default:m(()=>[l(M,null,{default:m(()=>[h("div",ia,[ua,h("div",{class:B(["col-12 col-md-4",a.$q.screen.lt.md?"order-first":""])},[l(G,{class:"q-pa-none",align:"right"},{default:m(()=>[l(V,{flat:"",color:"secondary",label:"Refresh",icon:"refresh",onClick:s[0]||(s[0]=o=>a.loadData(!0))}),l(V,{size:"md",flat:"",dense:"",label:"View Release",color:"info",to:{name:"view-ee-release",params:{id:a.release[25],release:a.release[3]}}},null,8,["to"])]),_:1})],2)])]),_:1}),(n(!0),p(L,null,z(a.releaseDetails,o=>(n(),p(L,{key:o},[o.type!=="comments"?(n(),Y(M,{key:0,class:"q-py-sm"},{default:m(()=>[h("div",da,[h("div",ca,[h("div",ma,F(o.label),1)]),h("div",fa,[o.type==="rating"?(n(),p("div",pa,[o.value>0?(n(),Y(Oe,{key:0,modelValue:o.value,"onUpdate:modelValue":t=>o.value=t,max:"5",size:"sm",color:"accent",icon:"star_border","icon-selected":"star","icon-half":"star_half","no-dimming":"",readonly:""},null,8,["modelValue","onUpdate:modelValue"])):(n(),p("div",va,"Not Available"))])):(n(),p("div",ba,F(o.value),1))])])]),_:2},1024)):o.value!==""?(n(),Y(M,{key:1},{default:m(()=>[h("div",ga,F(o.label),1),h("div",ya,F(o.value),1)]),_:2},1024)):S("",!0)],64))),128)),a.release&&a.release[70].length>0?(n(),Y(M,{key:0},{default:m(()=>[ha,l(Be,null,{default:m(()=>[(n(!0),p(L,null,z(a.release[70],(o,t)=>_e((n(),Y(Se,{key:t,clickable:"",class:"text-body2",onClick:u=>a.downloadFile({tableId:"bsstsai5d",recordId:o[3],fieldId:6,versionNumber:1,name:o[7]})},{default:m(()=>[l(oe,null,{default:m(()=>[Ye(F(t+1)+". "+F(o[7]),1)]),_:2},1024),l(oe,{avatar:""},{default:m(()=>[l(Xe,{color:"info",name:"file_download"})]),_:1})]),_:2},1032,["onClick"])),[[Te]])),128))]),_:1})]),_:1})):S("",!0)]),_:1})):S("",!0)])}var wa=U(ra,[["render",$a]]);const Ca=j({props:{},setup(a){const s=T(!1),f=ee(),{getEmployee:v,updateViewedEmployees:g,setReleases:q}=W(),o=k(()=>f.params.id?f.params.id:null),t=k(()=>o.value?v(o.value):null),u=k(()=>t.value?t.value[79]===4?"inprocess":t.value[79]===5?"dispatch":null:null),d=k(()=>u.value&&t.value[u.value]?t.value[u.value]:null),b=async w=>{let r;if(t.value?t.value[79]===4&&t.value[145]?r=[X({type:"rawInProcesses",id:t.value[145]})]:t.value[79]===5&&t.value[175]?r=[X({type:"dispatches",id:t.value[175]})]:r=null:r=null,r&&u.value&&(w||!d.value)){s.value=!0;const{data:i}=await N.fetchFromHiringApp({fields:r});console.log(i),g({id:o.value,dataset:u.value,data:i}),s.value=!1}};return b(),{loading:s,processingData:d,loadData:b}}}),Da={key:0,class:"q-py-xl"};function ka(a,s,f,v,g,q){return n(),p("div",null,[a.loading?(n(),p("div",Da,[l(ae,{color:"info",showing:a.loading,"label-class":"text-info",label:"Loading Release..."},null,8,["showing"])])):S("",!0),a.processingData&&!a.loading?(n(),Y(x,{key:1,flat:""},{default:m(()=>[l(G,{class:"q-pa-none",align:"right"},{default:m(()=>[l(V,{flat:"",color:"secondary",label:"Refresh",icon:"refresh",onClick:s[0]||(s[0]=o=>a.loadData(!0))})]),_:1}),l(M),l(G,{class:"q-pa-none",align:"right"},{default:m(()=>[l(V,{color:"secondary",label:"Back"}),l(V,{color:"info",label:"Continue"})]),_:1})]),_:1})):S("",!0)])}var qa=U(Ca,[["render",ka]]);const Ea=a=>{const s=[];for(const[f,v]of Object.entries(a)){const g={fid:f,value:v};s.push(g)}return{props:s}},ue=async({employee:a,profile:s,hiring:f,employment:v})=>{const{data:g}=await N.upsertRecordsXML({to:"bp3gb7ng2",data:[{3:{value:a[3]},79:{value:f||a[79]},122:{value:s||a[122]},408:{value:v||a[408]}}],fieldsToReturn:[79,122,408,80,81,582,583,584]}),{props:q}=Ea(g[0]);return aa.createNotification({title:"quasarEmployeeUpdated",type:"office-notification",task:null,officeId:a[16],details:{id:a[3],props:q}}),{res:a}},Ra=j({emits:[],props:{item:Object},components:{EditDetailsForm:la},setup(a,{emit:s}){const f=T(!1),v=T(!1),g=k(()=>{const{permission:t}=a.item.editable&&a.item.config?a.item.config:{action:null,subject:null};return t}),q=k(()=>{const{getter:t,formatter:u}=a.item.config;if(t){const d=t();return d?u?u(d):d:null}else return null}),o=async t=>{f.value=!0;const{fetcher:u}=a.item.config;u&&(!q.value||t)&&await u(),f.value=!1};return a.item.config&&o(),{edit:v,permission:g,loadData:o,loading:f,data:q}}}),Aa={key:0},Na={key:1};function Pa(a,s,f,v,g,q){const o=H("edit-details-form");return n(),p("div",Ve(a.$attrs,{class:a.$attrs.class||"q-pa-sm"}),[a.edit?(n(),Y(o,{key:1,type:a.item.label,config:a.item.config,onCancelEdit:s[1]||(s[1]=t=>a.edit=!1)},null,8,["type","config"])):(n(),p("div",Aa,[a.item.editable&&a.$can(a.permission.action,a.permission.subject)?(n(),Y(V,{key:0,color:a.item.buttonColor||"accent",flat:"",dense:"",round:"",icon:"edit",size:"sm",onClick:s[0]||(s[0]=t=>a.edit=!0)},null,8,["color"])):S("",!0),h("div",{class:B(a.$attrs.labelClass||["text-weight-bold text-info",a.$q.screen.gt.lg?"text-body2":"text-caption"])},F(a.item.label),3),a.item.hasFetch?(n(),p("div",{key:2,class:B(a.$attrs.valueClass||["q-pl-sm text-weight-light",a.$q.screen.gt.lg?"text-body2":"text-caption"])},[a.loading?(n(),p("div",{key:0,class:B(["text-dark q-mr-sm",a.$q.screen.gt.lg?"text-body2":"text-caption"])},[l(ta,{class:"q-ml-sm",color:"primary",size:a.$q.screen.gt.lg?"3em":"2em"},null,8,["size"])],2)):(n(),p("span",Na,F(a.data||a.item.valueIfNull),1))],2)):(n(),p("div",{key:1,class:B([a.item.valueClass||"","q-pl-sm text-weight-light",a.$q.screen.gt.lg?"text-body2":"text-caption"])},F(a.item.value===""?"N/A":a.item.value),3))]))],16)}var me=U(Ra,[["render",Pa]]);const _a=j({emits:["nameRequestConfirmed","nameRequestNotConfirmed"],props:{employee:Object},components:{},setup(a,{emit:s}){const f=T(!1),v=T([]),{capitalize:g}=de,{updateViewedEmployees:q,getEmployee:o}=W(),t=k(()=>a.employee?o(a.employee[3]):null),u=k(()=>t.value&&t.value.nameRequests?t.value.nameRequests:[]),d=i=>{const R=i.split(" ");let _="";return R.forEach((Q,J)=>{_+=J>0?` ${g(Q.toLowerCase())}`:g(Q.toLowerCase())}),_},b=[{name:0,label:"Date",align:"left",field:i=>i[1].$d,format:i=>`${E(i).format("MM/DD/YYYY")}`,sortable:!0,required:!0},{name:1,label:"First Name",align:"left",field:i=>i[6],format:(i,R)=>`${d(`${i} ${R[7]}`)}`,sortable:!0},{name:2,label:"Last 4",align:"left",field:i=>i[16],format:i=>`${i}`,sortable:!0},{name:3,label:"Phone",align:"left",field:i=>i[8],format:i=>`${i}`,sortable:!0},{name:4,label:"Project",align:"left",field:i=>i[41],format:i=>`${i}`,sortable:!0},{name:5,label:"Classification",align:"left",field:i=>i[24],format:i=>`${i}`,sortable:!0},{name:6,label:"Rate",align:"left",field:i=>i[25],format:i=>`$ ${i.toFixed(2)}`,sortable:!0}],w=async i=>{if(t.value&&(i||u.value.length===0)){f.value=!0;const{data:R}=await N.fetchFromHiringApp({fields:[X({type:"nameByEmployee",query:`{'1'.IR.'last 14 d'}AND{'31'.XEX.'Closed'}AND{'31'.XEX.'Cancelled'}AND({'39'.EX.'${t.value[3]}'}OR({'16'.EX.'${t.value[188].slice(-4)}'}AND{'29'.EX.'${t.value[27]}'}))`})]}),_=R.length>0?R.sort((Q,J)=>Q[1].$d>J[1].$d?-1:1):[];q({id:t.value[3],dataset:"nameRequests",data:_}),f.value=!1}},r=async({rows:i,added:R})=>{if(R){const _=i[0],{data:Q}=await N.upsertRecordsXML({to:"bsg4yb4wa",data:[{3:{value:_[3]},10:{value:"Arrived at Hiring Center"},39:{value:t.value[3]}}],fieldsToReturn:[40],formatObject:40});q({id:t.value[3],dataset:"confirmedNameRequest",data:Q[0][40]}),s("nameRequestConfirmed",Q[0][40])}else{const _=i[0],{data:Q}=await N.upsertRecordsXML({to:"bsg4yb4wa",data:[{3:{value:_[3]},10:{value:"Has Not Arrived"},39:{value:""}}],fieldsToReturn:[40],formatObject:40});q({id:t.value[3],dataset:"confirmedNameRequest",data:{}}),s("nameRequestNotConfirmed",Q[0][40])}};return w(),{columns:b,nameData:u,loading:f,selected:v,updateName:r,initialPagination:{rowsPerPage:T(10)},properValue:d}}}),Sa=h("div",null,[h("div",{class:"text-body1 text-primary"},"Possible Name Requests"),h("div",{class:"text-caption text-dark text-italic"},"Check the box to confirm match to employee.")],-1);function Ya(a,s,f,v,g,q){return n(),p("div",null,[!a.loading&&a.nameData.length>0?(n(),Y(oa,{key:0,flat:"",dense:"",title:"Possible Name Requests",columns:a.columns,rows:a.nameData,"row-key":o=>o[3],"table-header-class":"bg-dark text-white",class:"sticky-header-table",pagination:a.initialPagination,loading:a.loading,"no-data-label":"No possible name requests",selection:"single",selected:a.selected,"onUpdate:selected":s[0]||(s[0]=o=>a.selected=o),onSelection:a.updateName,"hide-pagination":a.nameData.length<=10},{"top-left":m(()=>[Sa]),_:1},8,["columns","rows","row-key","pagination","loading","selected","onSelection","hide-pagination"])):S("",!0)])}var Xa=U(_a,[["render",Ya]]);const Ta=j({props:{},components:{FieldAndLabelEditable:me,HistoryPanel:sa,NameRequestLookup:Xa},setup(a){const s=T(!1),f=We(),v=T(!1),g=T(!1),q=T(0),o=T(!1),t=ee(),u=Qe(),{can:d}=Je(),{capitalize:b}=de,{getEmployee:w,updateViewedEmployees:r,setEmployees:i}=W(),{getProfiles:R,updateProfiles:_}=He(),Q=async({interview:y,sch:e})=>{e&&(s.value=!0)},J=async()=>{const e=R(P.value[16]).filter(c=>c[3]!==P.value[3]);f.dialog({title:"Confirm",message:"Are you sure you ready to start interview now?",persistent:!0,cancel:!0}).onOk(async()=>{const{data:c}=await N.upsertRecordsXML({to:"bp3gatnch",data:[{10:{value:P.value[3]},11:{value:P.value[16]},20:{value:"In Progress"}}],fieldsToReturn:[97],formatObject:97});r({id:P.value[3],dataset:"interview",data:c}),_({selectedId:P.value[16],data:e}),ue({employee:P.value,profile:9,hiring:3})})},fe=()=>{const e=R(P.value[16]).filter(c=>c[3]!==P.value[3]);f.dialog({title:"Confirm",message:"Are you sure you want to remove?",persistent:!0,cancel:!0}).onOk(async()=>{_({selectedId:P.value[16],data:e}),ue({employee:P.value,profile:9,hiring:8})})},pe=Ze({scheduleDate:xe().required().label("Date"),scheduleTime:ea().required().label("Time")}),{errors:ve,handleSubmit:be}=Ke({validationSchema:pe}),{value:ge}=te("scheduleDate"),{value:ye}=te("scheduleTime"),{value:he}=te("location"),$e=be(async y=>{console.log(y)}),we=y=>{const e=[];for(const[c,D]of Object.entries(y)){const A={fid:c,value:D};e.push(A)}r({id:$.value,props:e})},Ce=({start:y,end:e,status:c})=>c==="In Process"?"TBD":c==="DNC"?"N/A":c==="Complete"&&y&&e?`${E(e).diff(E(y),"day",!0).toFixed(2)} days`:"N/A",le=y=>y[145].$d?y[145].$d:y[1].$d,De=y=>{if(!y||!y[0]||!y[0][44])return"N/A";{const e=y[0][44];return`${b(e[20].toLowerCase())} ${b(e[22].toLowerCase())}`}},ke=y=>{const e=y.split(" ");let c="";return e.forEach((D,A)=>{c+=A>0?` ${b(D.toLowerCase())}`:b(D.toLowerCase())}),c},$=k(()=>t.params.id?t.params.id:null),P=k(()=>$.value?w($.value):null),C=k(()=>P.value),qe=k(()=>{let y;return C.value?y=[{label:"Phone",value:C.value[25],colClass:"col-md-4"},{label:"Address",value:ke(C.value[40]),colClass:"col-md-8"},{label:"Work Experience",value:C.value[54],colClass:"col-md-4"},{label:"Employment Status",value:C.value[56],colClass:"col-md-6"},{label:"Primary Craft",value:C.value[52],colClass:"col-md-4"},{label:`${C.value[52]} Test Score`,value:C.value[52],colClass:"col-md-4",hide:!C.value[585],hasFetch:C.value[585],valueIfNull:`No ${C.value[52]} Tests`,config:{fetcher:async()=>{const{data:e}=await N.fetchFromHiringApp({fields:[X({type:"craftTests",query:`{'37'.EX.'Complete'}AND{'15'.EX.'${$.value}'}`})]});e.sort((D,A)=>D[1].$d>A[1].$d?-1:1).length>0&&r({id:$.value,dataset:"history",nested:!0,subset:"craftTests",data:e})},getter:()=>{let e=w($.value)&&w($.value).history?w($.value).history.craftTests:null;return e?(e=e.filter(c=>c[17]===P.value[51]),e.length>0?e[0]:null):null},formatter:e=>e[71]}},{label:`${C.value[52]} Practical Score`,value:C.value[52],colClass:"col-md-4",hide:!C.value[586],hasFetch:C.value[586],valueIfNull:`No ${C.value[52]} Practicals`,config:{fetcher:async()=>{const{data:e}=await N.fetchFromHiringApp({fields:[X({type:"bestPracticals",query:`{'6'.EX.'Complete'}AND{'13'.EX.'${$.value}'}`})]});e.sort((D,A)=>D[1].$d>A[1].$d?-1:1).length>0&&r({id:$.value,dataset:"history",nested:!0,subset:"bestPracticals",data:e})},getter:()=>{let e=w($.value)&&w($.value).history?w($.value).history.bestPracticals:null;return e?(e=e.filter(c=>c[51]===P.value[51]),e.length>0?e[0]:null):null},formatter:e=>e[55]}}]:y=[],y}),Ee=k(()=>[{label:"Craft Tests",key:"craftTests",columns:[{name:0,label:"Date",align:"left",field:e=>e[1].$d,format:e=>`${E(e).format("MM/DD/YYYY")}`,sortable:!0,required:!0},{name:1,label:"Hiring Center",align:"left",field:e=>e[44],format:e=>`${e}`,sortable:!0},{name:2,label:"Craft",align:"left",field:e=>e[18],format:e=>`${e}`,sortable:!0},{name:3,label:"Score",align:"left",field:e=>e[71],format:e=>`${e}`,sortable:!0}],getter:async()=>{const{data:e}=await N.fetchFromHiringApp({fields:[X({type:"craftTests",query:`{'15'.EX.'${$.value}'}AND{'37'.EX.'Complete'}`})]});r({id:$.value,dataset:"history",nested:!0,subset:"craftTests",data:e})}},{label:"Practicals",key:"bestPracticals",columns:[{name:0,label:"Date",align:"left",field:e=>e[1].$d,format:e=>`${E(e).format("MM/DD/YYYY")}`,sortable:!0,required:!0},{name:1,label:"Hiring Center",align:"left",field:e=>e[17],format:e=>`${e}`,sortable:!0},{name:2,label:"Craft",align:"left",field:e=>e[52],format:e=>`${e}`,sortable:!0},{name:3,label:"Score",align:"left",field:e=>e[55],format:e=>`${e}`,sortable:!0}],getter:async()=>{const{data:e}=await N.fetchFromHiringApp({fields:[X({type:"bestPracticals",query:`{'6'.EX.'Complete'}AND{'13'.EX.'${$.value}'}`})]});r({id:$.value,dataset:"history",nested:!0,subset:"bestPracticals",data:e})}},{label:"Offers",key:"offers",columns:[{name:0,label:"Date",align:"left",field:e=>e[1].$d,format:e=>`${E(e).format("MM/DD/YYYY")}`,sortable:!0,required:!0},{name:1,label:"Hiring Center",align:"left",field:e=>e[44],format:e=>`${e}`,sortable:!0},{name:2,label:"Project",align:"left",field:e=>e[56],format:e=>`${e}`,sortable:!0},{name:3,label:"Classification",align:"left",field:e=>e[57],format:e=>`${e}`,sortable:!0},{name:4,label:"Rate",align:"left",field:e=>e[22],format:e=>`$ ${e.toFixed(2)}`,sortable:!0,hide:!d("read","rates")},{name:5,label:"Status",align:"left",field:e=>e[21],format:e=>`${e}`,sortable:!0}],getter:async()=>{const{data:e}=await N.fetchFromHiringApp({fields:[X({type:"offers",query:`{'25'.EX.'${$.value}'}AND{'21'.XEX.'Canceled'}AND{'29'.XEX.'In Process'}AND{'29'.XEX.'Canceled'}`})]});r({id:$.value,dataset:"history",nested:!0,subset:"offers",data:e})},showCompletion:!0,completionRateOverride:"Acceptance Rate",completionRate:e=>(e.filter(A=>A[21]==="Accepted").length/e.length*100).toFixed(2)},{label:"Assignments",key:"assignments",columns:[{name:0,label:"Date",align:"left",field:e=>e[1].$d,format:e=>`${E(e).format("MM/DD/YYYY")}`,sortable:!0,required:!0},{name:1,label:"Hiring Center",align:"left",field:e=>e[23],format:e=>`${e}`,sortable:!0},{name:2,label:"Project",align:"left",field:e=>e[94],format:e=>`${e}`,sortable:!0},{name:3,label:"Classification",align:"left",field:e=>e[20],format:e=>`${e}`,sortable:!0},{name:4,label:"Time On Site",align:"left",field:e=>e[22],format:(e,c)=>Ce({start:le(c),end:e.$d,status:c[21]}),sortable:!1}],getter:async()=>{const{data:e}=await N.fetchFromHiringApp({fields:[X({type:"rawAssignments",query:`{'18'.EX.'${$.value}'}AND{'21'.XEX.'Canceled'}`})]});r({id:$.value,dataset:"history",nested:!0,subset:"assignments",data:e})},showCompletion:!0,completionRate:e=>(e.filter(A=>A[21]==="Complete").length/e.length*100).toFixed(2),showDuration:!0,averageDuration:e=>{const c=e.filter(I=>I[21]==="Complete");let D=0;c.forEach(I=>{const K=le(I),Z=I[22].$d;K&&Z&&(D+=E(Z).diff(E(K),"ms",!0))});const A=D/c.length;return E.duration(A).asDays()}},{label:"Releases",key:"releases",columns:[{name:0,label:"Date",align:"left",field:e=>e[36].$d,format:e=>`${E(e).format("MM/DD/YYYY")}`,sortable:!0,required:!0},{name:1,label:"Project",align:"left",field:e=>e[83],format:e=>`${e}`,sortable:!0},{name:2,label:"Classification",align:"left",field:e=>e[48],format:e=>`${e}`,sortable:!0},{name:3,label:"Rating",align:"left",field:e=>e[59],format:e=>e[0]&&e[0][37]?e[0][37]:"N/A",sortable:!1,showRating:!0},{name:4,label:"Disposition",align:"left",field:e=>e[43],format:e=>`${e}`,sortable:!0},{name:5,label:"Evaluated By",align:"left",field:e=>e[59],format:(e,c)=>e?`${De(e)}`:"N/A",sortable:!1},{name:6,label:"Reviewed By",align:"left",field:e=>e[75],format:(e,c)=>e?`${b(e[35].toLowerCase())} ${b(e[37].toLowerCase())}`:"N/A",sortable:!1},{name:7,label:"Processed By",align:"left",field:e=>e[76],format:(e,c)=>e?`${b(e[35].toLowerCase())} ${b(e[37].toLowerCase())}`:"N/A",sortable:!1}],getter:async()=>{const{data:e}=await N.fetchFromHiringApp({fields:[X({type:"releases",query:`{'25'.EX.'${$.value}'}`})]});r({id:$.value,dataset:"history",nested:!0,subset:"releases",data:e})},showCompletion:!0,completionRateOverride:"Reassignment Rate",completionRate:e=>(e.filter(A=>A[43]==="Reassign").length/e.length*100).toFixed(2),showRating:!0,averageRating:e=>e.filter(D=>D[59]&&D[59][0]&&D[59][0][37]).reduce((D,A)=>D+A[59][0][37],0),showView:!0,viewer:e=>{u.push({name:"view-ee-release",params:{id:e[25],release:e[3]}})}},{label:"Other Experience",key:"workExperience",columns:[{name:0,label:"Date Entered",align:"left",field:e=>e[1].$d,format:e=>`${E(e).format("MM/DD/YYYY")}`,sortable:!0,required:!0},{name:1,label:"Start Date",align:"left",field:e=>e[12].$d,format:e=>`${E(e).format("MM/DD/YYYY")}`,sortable:!0,required:!0},{name:2,label:"End Date",align:"left",field:e=>e[13].$d,format:e=>`${E(e).format("MM/DD/YYYY")}`,sortable:!0,required:!0},{name:3,label:"Company",align:"left",field:e=>e[7],format:e=>`${e}`,sortable:!0},{name:4,label:"Location",align:"left",field:e=>e[10],format:e=>`${e}`,sortable:!0},{name:5,label:"Classification",align:"left",field:e=>e[11],format:e=>`${e}`,sortable:!0}],getter:async()=>{const{data:e}=await N.fetchFromRecruitingApp({fields:[je({type:"workExperience",query:P.value&&P.value[234]?`{'32'.EX.'false'}AND{'8'.EX.'${P.value[234]}'}`:`{'32'.EX.'false'}AND{'34'.EX.'${$.value}'}`})]});r({id:$.value,dataset:"history",nested:!0,subset:"workExperience",data:e})},showDuration:!0,averageDuration:e=>{const c=e.filter(I=>I[12].$d&&I[13].$d);let D=0;c.forEach(I=>{const K=I[12].$d,Z=I[13].$d;K&&Z&&(D+=E(Z).diff(E(K),"ms",!0))});const A=D/c.length;return E.duration(A).asDays()}}]),se=()=>{C.value&&(g.value=C.value[247])};Fe(C,()=>{C.value&&C.value[247]!==g.value&&(g.value=C.value[247])});const Re=async(y,e)=>{try{const{data:c}=await N.upsertRecordsXML({to:"bp3gb7ng2",data:[{3:{value:$.value},247:{value:y}}],fieldsToReturn:[247]});we({247:y})}catch{f.notify({type:"negative",message:"Error updating Bootcamp Graduate"})}};return se(),{loading:o,loadData:se,details:qe,data:C,employee:P,splitterModel:T(15),tab:q,vertical:v,bootcamp:g,updateBootcamp:Re,panels:Ee,schedule:s,scheduleDate:ge,scheduleTime:ye,location:he,submit:$e,formErrors:ve,proceed:Q,removeFromProfiles:fe,startInterview:J}}}),Va={key:0,class:"q-py-xl"},Qa={key:1},Fa={class:"q-pa-none"},Ia={class:"row"},Ma={class:"row q-py-sm"},La={class:"col-12"},Ha=h("div",{class:"text-h6 text-info"},"Schedule Interview",-1),Oa={class:"text-caption"},Ba={class:"text-caption"};function ja(a,s,f,v,g,q){const o=H("field-and-label-editable"),t=H("name-request-lookup"),u=H("history-panel");return n(),p("div",null,[a.loading?(n(),p("div",Va,[l(ae,{color:"info",showing:a.loading,"label-class":"text-info",label:"Loading..."},null,8,["showing"])])):S("",!0),a.data&&!a.loading?(n(),p("div",Qa,[h("div",Fa,[l(ze,{class:"q-py-xs bg-info text-white shadow-2 rounded-borders",align:"left",modelValue:a.tab,"onUpdate:modelValue":s[0]||(s[0]=d=>a.tab=d),dense:"","indicator-color":"accent","outside-arrows":"","mobile-arrows":"","inline-label":""},{default:m(()=>[l(ne,{name:0,label:"General"}),(n(!0),p(L,null,z(a.panels,(d,b)=>(n(),Y(ne,{key:b,name:b+1,label:d.label},null,8,["name","label"]))),128))]),_:1},8,["modelValue"]),l(x,{class:"q-mt-sm"},{default:m(()=>[l(M,{class:"q-pa-none"},{default:m(()=>[l(Ue,{modelValue:a.tab,"onUpdate:modelValue":s[3]||(s[3]=d=>a.tab=d),animated:""},{default:m(()=>[l(ie,{class:"q-pa-xs",name:0},{default:m(()=>[h("div",null,[l(Ie,{modelValue:a.bootcamp,"onUpdate:modelValue":[s[1]||(s[1]=d=>a.bootcamp=d),s[2]||(s[2]=(d,b)=>a.updateBootcamp(d))],color:"primary","indeterminate-value":"false",size:"sm",label:"Bootcamp Graduate"},null,8,["modelValue"])]),h("div",Ia,[(n(!0),p(L,null,z(a.details,(d,b)=>(n(),p(L,{key:b},[d.hide?S("",!0):(n(),p("div",{key:0,class:B(["col-12 q-pr-sm",d.colClass||"col-md-6"])},[l(o,{item:d},null,8,["item"])],2))],64))),128))]),h("div",Ma,[h("div",La,[l(t,{employee:a.data},null,8,["employee"])])])]),_:1}),(n(!0),p(L,null,z(a.panels,(d,b)=>(n(),Y(ie,{key:b,name:b+1},{default:m(()=>[l(u,{category:d},null,8,["category"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(ce),l(G,{align:"right"},{default:m(()=>[l(V,{color:"secondary",label:"Remove from Profiles",onClick:a.removeFromProfiles},null,8,["onClick"]),l(V,{color:"accent",label:"Schedule Interview",onClick:s[4]||(s[4]=d=>a.proceed({sch:!0}))}),l(V,{color:"primary",label:"Start Interview",onClick:a.startInterview},null,8,["onClick"])]),_:1})]),_:1})])])):S("",!0),l(Le,{persistent:"",modelValue:a.schedule,"onUpdate:modelValue":s[8]||(s[8]=d=>a.schedule=d)},{default:m(()=>[l(x,{flat:"",style:{width:"500px"}},{default:m(()=>[l(M,null,{default:m(()=>[Ha]),_:1}),l(M,null,{default:m(()=>[l(Ge,{onSubmit:Me(a.submit,["prevent"])},{default:m(()=>[l(re,{dense:"",label:"Date",type:"date",modelValue:a.scheduleDate,"onUpdate:modelValue":s[5]||(s[5]=d=>a.scheduleDate=d),"bottom-slots":"","stack-label":"",error:!!a.formErrors.scheduleDate},{error:m(()=>[h("div",Oa,F(a.formErrors.scheduleDate),1)]),_:1},8,["modelValue","error"]),l(re,{dense:"",label:"Time",type:"time",modelValue:a.scheduleTime,"onUpdate:modelValue":s[6]||(s[6]=d=>a.scheduleTime=d),"bottom-slots":"","stack-label":"",error:!!a.formErrors.scheduleTime},{error:m(()=>[h("div",Ba,F(a.formErrors.scheduleTime),1)]),_:1},8,["modelValue","error"])]),_:1},8,["onSubmit"])]),_:1}),l(G,{class:"q-px-xs",align:"right"},{default:m(()=>[l(V,{color:"secondary",label:"Cancel",onClick:s[7]||(s[7]=d=>a.schedule=!1)}),l(V,{color:"primary",label:"Save",type:"submit",onClick:a.submit},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var Ua=U(Ta,[["render",ja]]);const za=j({props:{},components:{FieldAndLabelEditable:me},setup(a){const s=T(!1),f=ee(),{getEmployee:v,updateViewedEmployees:g,setReleases:q}=W(),o=k(()=>f.params.id?f.params.id:null),t=k(()=>o.value?v(o.value):null),u=k(()=>t.value&&t.value.interview?t.value.interview:null),d=k(()=>{let w;return u.value?w=[{label:"Work Experience",value:t.value[54],colClass:"col-md-4"},{label:"Employment Status",value:t.value[56],colClass:"col-md-6"},{label:"Primary Craft",value:t.value[52],colClass:"col-md-4"},{label:`${t.value[52]} Test Score`,value:t.value[52],colClass:"col-md-4",hide:!t.value[585],hasFetch:t.value[585],valueIfNull:`No ${t.value[52]} Tests`,config:{fetcher:async()=>{const{data:r}=await N.fetchFromHiringApp({fields:[X({type:"craftTests",query:`{'37'.EX.'Complete'}AND{'15'.EX.'${o.value}'}`})]});r.sort((R,_)=>R[1].$d>_[1].$d?-1:1).length>0&&g({id:o.value,dataset:"history",nested:!0,subset:"craftTests",data:r})},getter:()=>{let r=v(o.value)&&v(o.value).history?v(o.value).history.craftTests:null;return r?(r=r.filter(i=>i[17]===t.value[51]),r.length>0?r[0]:null):null},formatter:r=>r[71]}},{label:`${t.value[52]} Practical Score`,value:t.value[52],colClass:"col-md-4",hide:!t.value[586],hasFetch:t.value[586],valueIfNull:`No ${t.value[52]} Practicals`,config:{fetcher:async()=>{const{data:r}=await N.fetchFromHiringApp({fields:[X({type:"bestPracticals",query:`{'6'.EX.'Complete'}AND{'13'.EX.'${o.value}'}`})]});r.sort((R,_)=>R[1].$d>_[1].$d?-1:1).length>0&&g({id:o.value,dataset:"history",nested:!0,subset:"bestPracticals",data:r})},getter:()=>{let r=v(o.value)&&v(o.value).history?v(o.value).history.bestPracticals:null;return r?(r=r.filter(i=>i[51]===t.value[51]),r.length>0?r[0]:null):null},formatter:r=>r[55]}}]:w=[],w}),b=async w=>{if(w||!u.value){const{data:r}=await N.fetchFromHiringApp({fields:[X({type:"interviews",query:`{'10'.EX.'${t.value[3]}'}AND{'20'.XEX.'Canceled'}`})]});g({id:t.value[3],dataset:"history",nested:!0,subset:"interviews",data:r});const i=r.filter(R=>R[20]==="In Progress").sort((R,_)=>R[1].$d>_[1].$d?-1:1);g({id:t.value[3],dataset:"interview",data:i[0]})}console.log(u.value)};return b(),{loading:s,data:u,loadData:b,details:d}}}),Ga={key:0,class:"q-py-xl"},Wa={class:"row"},Ja={class:"col-9"},Ka={class:"row"};function Za(a,s,f,v,g,q){const o=H("field-and-label-editable");return n(),p("div",null,[a.loading?(n(),p("div",Ga,[l(ae,{color:"info",showing:a.loading,"label-class":"text-info",label:"Loading Release..."},null,8,["showing"])])):S("",!0),a.loading?S("",!0):(n(),Y(x,{key:1},{default:m(()=>[l(M,{class:"q-pa-sm"},{default:m(()=>[h("div",Wa,[h("div",Ja,[h("div",Ka,[(n(!0),p(L,null,z(a.details,(t,u)=>(n(),p(L,{key:u},[t.hide?S("",!0):(n(),p("div",{key:0,class:B(["col-12 q-pr-sm",t.colClass||"col-md-6"])},[l(o,{item:t},null,8,["item"])],2))],64))),128))])])])]),_:1}),l(ce),l(G,{align:"right"},{default:m(()=>[l(V,{color:"secondary",label:"Back"}),l(V,{color:"info",label:"Continue"})]),_:1})]),_:1}))])}var xa=U(za,[["render",Za]]);const et=j({components:{ReleaseStep:wa,ProcessingStep:qa,ProfileStep:Ua,InterviewStep:xa},setup(){const a=ee(),{getEmployee:s}=W(),f=k(()=>s(a.params.id)),v=k(()=>f.value?f.value[584]:0);return{employee:f,step:v}}}),at={class:"q-pa-none"},tt={key:0};function lt(a,s,f,v,g,q){const o=H("release-step"),t=H("profile-step"),u=H("interview-step"),d=H("processing-step");return n(),Y(Pe,{style:{"max-width":"100vw"}},{default:m(()=>[h("div",at,[a.employee?(n(),p("div",tt,[l(Ne,{flat:"",modelValue:a.step,"onUpdate:modelValue":s[0]||(s[0]=b=>a.step=b),color:"info","active-icon":"build","done-icon":"task_alt","active-color":"accent","done-color":"primary",animated:""},{default:m(()=>[a.step===7?(n(),Y(O,{key:0,name:7,prefix:"7",title:"Release"},{default:m(()=>[l(o,{id:a.employee[581]},null,8,["id"])]),_:1})):S("",!0),a.step===0?(n(),Y(O,{key:1,name:0,prefix:"-",title:"Not Started"})):S("",!0),l(O,{name:1,prefix:"1",title:a.step===1?"Profile Details":"Profile",done:a.step>1},{default:m(()=>[l(t)]),_:1},8,["title","done"]),l(O,{name:2,prefix:"2",title:"Interview",done:a.step>2},{default:m(()=>[l(u)]),_:1},8,["done"]),l(O,{name:3,prefix:"3",title:"Offer",done:a.step>3},null,8,["done"]),l(O,{name:4,prefix:"4",title:"Processing",done:a.step>4},{default:m(()=>[l(d)]),_:1},8,["done"]),l(O,{name:5,prefix:"5",title:"Deployment",done:a.step>5},null,8,["done"]),l(O,{name:6,prefix:"6",title:"Assignment",done:a.step>6},null,8,["done"])]),_:1},8,["modelValue"])])):S("",!0)])]),_:1})}var Bt=U(et,[["render",lt]]);export{Bt as default};
