import{Q as I}from"./QSpace.a95ab448.js";import{bN as M,r as c,w as R,aL as E,c as h,A as x,B as y,d as t,bi as s,cw as G,D as d,G as J,a7 as i,ab as p,cz as W,cx as F,bI as H,bO as b,au as k}from"./index.b924195f.js";import{Q as C}from"./QTooltip.aa97b019.js";import{Q as j}from"./QTd.5477ad13.js";import{u as K}from"./use-quasar.b47a00b3.js";import{e as X}from"./export-file.751205c9.js";import{I as Z,b as ee,u as te}from"./quickbase.ba4c97f5.js";import{dayjs as oe}from"./dayjs.db01f29f.js";import{_ as ae}from"./recruitingTabs.dc6a5673.js";import{_ as le}from"./officeSelector.a406740d.js";import{_ as se}from"./aTable.7b4cd7ef.js";import"./position-engine.d8e3a79c.js";import"./selection.92f3c7fa.js";import"./_commonjsHelpers.a26ce4be.js";import"./index.7dbe61ef.js";import"./localForage.2a99fead.js";import"./api.7991594d.js";import"./i18n.41d907b6.js";import"./QBadge.883905ea.js";import"./QRouteTab.ed4f6b70.js";import"./QTabs.fe960265.js";import"./QResizeObserver.0b0c25b6.js";import"./rtl.d0f7624c.js";import"./QSelect.4bb61d02.js";import"./QChip.a6d4ea6e.js";import"./QMenu.c4074360.js";import"./QTable.f1231a22.js";import"./QList.7108ca09.js";import"./QMarkupTable.cca982ef.js";import"./use-fullscreen.58353ef7.js";const ie={class:"q-pa-md"},ne={class:"row items-center"},re={class:"col-12 col-md-5 q-px-sm"},ce={class:"col-12 col-md-3 q-px-sm"},de={class:"col-12 col-md-5 q-px-sm"},fe={key:0},me={key:1},Me={__name:"index",setup(ue){const m=K(),S=Z(),{openWindow:$}=ee(),q=te(),{primaryOffice:u}=q,{fetchJobPost:N,fetchAllJobPost:T}=S,{getJobPost:L,getSelectedOffice:r,getLoadingState:D}=M(S),n=c(r.value?r.value[8]:null),v=c("Job Post"),P=c("jobPost"),_=c(""),Q=c({sortBy:"1",descending:!1,rowsPerPage:150}),g=o=>{n.value?N({selectedId:n.value,refresh:o}):T({can:"read",refresh:o})};g(!0),R(r,()=>{n.value=r.value?r.value[8]:null,g()});const z=c(new Date),A=setInterval(()=>{z.value=new Date},1e3);E(()=>{clearInterval(A)});const O=h(()=>["index","craft","job","locationCity","#applications","action",...r.value?[]:["office"]]),w=h(()=>[{name:"index",align:"left",label:"#",sortable:!1},{name:"craft",align:"left",label:"Craft",field:"17",sortable:!1},{name:"job",align:"left",label:"Job",field:"19",sortable:!1},{name:"locationCity",align:"center",label:"Location City",field:"42",sortable:!1},{name:"#applications",align:"center",label:"# of Applications",field:"30",sortable:!1},{name:"office",align:"center",label:"Office",field:"93",sortable:!1},{name:"action",align:"center",label:"",sortable:!1}]),f=h(()=>L.value(n.value).filter(o=>!0).sort((o,a)=>Q.value.descending?o[1].isBefore(a[1]):o[1].isAfter(a[1]))),V=(o,a,e)=>{let l=a!==void 0?a(o,e):o;return l=l==null?"":String(l),l=l.split('"').join('""'),`"${l}"`},Y=o=>{const a=u?u[8]:n.value?n.value:0;$(null,{url:`https://elitehcms.quickbase.com/db/bpz457c9d?a=dbpage&pageID=37&post_id=${o[3]}&page_id=15&office_id=${a}`,name:"Job Post"})},U=o=>{const a=u?u[8]:n.value?n.value:0;$(null,{url:`https://elitehcms.quickbase.com/db/bpz457c9d?a=dbpage&pageID=33&office_id=${a}&page_id=13`,name:"Post New Job"})},B=()=>{const o=[w.value.map(e=>V(e.label))].concat(f.value.map(e=>w.value.map(l=>V(typeof l.field=="function"?l.field(e):e[l.field===void 0?l.name:l.field],l.format,e)).join(","))).join(`\r
`);X(`${v.value} ${oe().format("MM.DD.YYYY")}.csv`,o,"text/csv")!==!0&&m.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})};return(o,a)=>(x(),y("div",ie,[t(ae),t(W,{flat:"",class:"q-pt-none"},{default:s(()=>[t(G,null,{default:s(()=>[d("div",ne,[d("div",re,[d("div",{class:J(["text-dark",i(m).screen.lt.md?"text-body1":"text-h5"])},p(v.value),3)]),t(I),d("div",ce,[t(le,{styleSelection:!0})])])]),_:1})]),_:1}),t(se,{rows:i(f),columns:i(w),pagination:Q.value,filter:_.value,title:v.value,separator:"vertical","row-key":"3",loading:i(D)(P.value),"visible-columns":i(O),downloadButton:!0,onDownload:B},{top:s(()=>[d("div",de,[t(F,{dense:i(m).screen.lt.md,modelValue:_.value,"onUpdate:modelValue":a[0]||(a[0]=e=>_.value=e),label:"Search...",clearable:""},{prepend:s(()=>[t(H,{name:"search"})]),_:1},8,["dense","modelValue"])]),t(I),d("div",{class:J(["text-dark text-caption text-italic",i(m).screen.lt.md?"offset-xs-5":""])},"(Total: "+p(i(f).length)+")",3),t(b,{flat:"",round:"",color:"primary",icon:"download",disable:i(f).length<1,onClick:B},{default:s(()=>[t(C,{class:"bg-accent text-black shadow-4",offset:[10,10]},{default:s(()=>[k(" Download ")]),_:1})]),_:1},8,["disable"]),t(b,{flat:"",round:"",color:"primary",icon:"add_circle",disable:i(f).length<1,onClick:U},{default:s(()=>[t(C,{class:"bg-accent text-black shadow-4",offset:[10,10]},{default:s(()=>[k(" Post New Job ")]),_:1})]),_:1},8,["disable"]),t(b,{flat:"",round:"",color:"primary",icon:"refresh",onClick:a[1]||(a[1]=e=>g(!0)),loading:i(D)(P.value)},{default:s(()=>[t(C,{class:"bg-accent text-black shadow-4",offset:[10,10]},{default:s(()=>[k(" Refresh ")]),_:1})]),_:1},8,["loading"])]),"body-cell-submissionTime":s(e=>[t(j,{props:e},{default:s(()=>[o.$dayjs(e.value).isValid()?(x(),y("div",fe,p(e.value.format("L LT")),1)):(x(),y("div",me,p(e.row[1].format("L LT")),1))]),_:2},1032,["props"])]),"body-cell-action":s(e=>[t(j,{props:e},{default:s(()=>[t(b,{color:"primary",label:"View",onClick:l=>Y(e.row),size:".75rem"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination","filter","title","loading","visible-columns"])]))}};export{Me as default};
