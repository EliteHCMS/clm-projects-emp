import{Q as L}from"./QPage.11d82b17.js";import{u as M}from"./use-quasar.6320e378.js";import{l as g,bU as N,c as u,_ as C,A as m,B as _,d as a,br as b,cU as V,D as P,bW as F,bO as A,r as G,b5 as E,cT as B,F as O,b4 as T,aq as j,cS as W,ar as z}from"./index.dd77155d.js";import{q as H}from"./app.05652b82.js";import{a as J}from"./useQuerySaver.d29ff9ee.js";import{u as Q}from"./dataStore.333d40dc.js";import{a as U,c as d}from"./array.59f93f43.js";import{a as D,u as p}from"./vee-validate.esm.6dfeee42.js";import{Q as K}from"./QForm.2c5aed2b.js";import"./_commonjsHelpers.a26ce4be.js";import"./dayjs.6e814a2c.js";import"./localForage.a5ce8de1.js";import"./api.9cc8c4bd.js";import"./index.04bc0a32.js";import"./i18n.660e2ed7.js";const X=g({components:{},props:{columns:Array},setup(e,{emit:r}){const o=N(),{getViewedProjects:n,updateViewedProjects:i}=Q(),t=u(()=>o.params.id?o.params.id:null),s=u(()=>t.value?n(t.value):null),c=u(()=>s.value&&s.value.crafts?s.value.crafts:[]),f=U({ssn:d().required().length(9).matches("^[0-9]*$").label("Social Security Number"),first:d().required().label("First Name"),last:d().required().label("Last Name")}),{errors:l,handleSubmit:v,handleReset:y}=D({validationSchema:f}),q=v(async R=>{console.log(R)}),{value:$}=p("ssn"),{value:S}=p("first"),{value:w}=p("last");return{crafts:c,ssn:$,first:S,last:w,formErrors:l,submit:q,handleReset:y}}}),Y={class:"q-pa-none q-ma-none",style:{display:"inline-block"}};function Z(e,r,o,n,i,t){return m(),_("div",null,[a(K,{onSubmit:A(e.submit,["prevent"])},{default:b(()=>[a(V,{style:{display:"inline-block"},dense:"",modelValue:e.ssn,"onUpdate:modelValue":r[0]||(r[0]=s=>e.ssn=s),square:"",outlined:"",label:"Social Security Number","stack-label":"",error:!!e.formErrors.ssn,class:"q-ma-none q-pa-none"},null,8,["modelValue","error"]),a(V,{style:{display:"inline-block"},dense:"",modelValue:e.first,"onUpdate:modelValue":r[1]||(r[1]=s=>e.first=s),square:"",outlined:"",label:"First Name","stack-label":"",error:!!e.formErrors.first,class:"q-ma-none q-pa-none"},null,8,["modelValue","error"]),a(V,{style:{display:"inline-block"},dense:"",modelValue:e.last,"onUpdate:modelValue":r[2]||(r[2]=s=>e.last=s),square:"",outlined:"",label:"Last Name","stack-label":"",error:!!e.formErrors.last,class:"q-ma-none q-pa-none"},null,8,["modelValue","error"]),P("div",Y,[a(F,{class:"q-my-none q-py-none",color:"info",label:"Submit",type:"submit",dense:"",onClick:e.submit},null,8,["onClick"]),a(F,{class:"q-my-none q-py-none",color:"secondary",label:"Reset",dense:"",onClick:e.handleReset},null,8,["onClick"])])]),_:1},8,["onSubmit"])])}var x=C(X,[["render",Z]]);const ee=g({components:{RosterRow:x},props:{},setup(e,{emit:r}){const o=N(),n=G([]),{getViewedProjects:i,updateViewedProjects:t}=Q(),s=u(()=>o.params.id?o.params.id:null),c=u(()=>s.value?i(s.value):null),f=U({ssn:d().required().length(9).matches("^[0-9]*$").label("Social Security Number"),first:d().required(),last:d().required()}),{errors:l,handleSubmit:v}=D({validationSchema:f}),y=v(async h=>{console.log(h)}),{value:q}=p("ssn"),{value:$}=p("first"),{value:S}=p("last"),w=u(()=>[{label:"Social Security Number",type:"input",model:q,error:!!l.ssn,errorMessage:l.ssn},{label:"First Name",type:"input",model:$,error:!!l.first,errorMessage:l.first},{label:"Last Name",type:"input",model:S,error:!!l.last,errorMessage:l.last}]);return(()=>{for(let k=0;k<25;k++){const I={key:k};n.value.push(I)}})(),{project:c,columns:w,submit:y,rows:n}}}),se=P("div",{class:"text-h6 font-weight-bold"},"Roster Setup",-1);function re(e,r,o,n,i,t){const s=E("roster-row");return m(),_("div",null,[a(W,null,{default:b(()=>[a(B,null,{default:b(()=>[se]),_:1}),a(B,null,{default:b(()=>[(m(!0),_(O,null,T(e.rows,c=>(m(),j(s,{key:c.key,class:"q-ma-none q-pa-none"}))),128))]),_:1})]),_:1})])}var te=C(ee,[["render",re]]);const oe=g({name:"Setup",components:{RosterSetup:te},setup(){const e=M(),r=N(),{getViewedProjects:o,updateViewedProjects:n,setViewedProjects:i}=Q(),t=u(()=>r.params.id?r.params.id:null),s=u(()=>t.value?o(t.value):null);return(async()=>{if(e.loading.show(),t.value&&!s.value){const{data:f}=await H.fetchFromProjectsApp({fields:[J({type:"projects",id:t.value})]});i({id:t.value,data:f})}e.loading.hide()})(),{project:s}}}),ae={class:"q-pa-md"};function ne(e,r,o,n,i,t){const s=E("roster-setup");return m(),j(L,{style:{"max-width":"100vw"}},{default:b(()=>[P("div",ae,[e.project?(m(),j(s,{key:0})):z("",!0)])]),_:1})}var he=C(oe,[["render",ne]]);export{he as default};
