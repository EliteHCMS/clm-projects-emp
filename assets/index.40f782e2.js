import{Q as N,a as I,b as S}from"./QTabPanels.49bd8a55.js";import{Q as L}from"./QTabs.f587688b.js";import{Q as U}from"./QSpace.7b2e6eaa.js";import{l as g,r as w,bV as C,c as v,_ as j,b5 as f,A as b,B as y,d as o,br as l,cT as D,D as q,cS as Q,y as z,bT as E,aq as h,ar as P,bW as K}from"./index.cb6e3ba9.js";import{Q as M}from"./QToolbar.4a38f622.js";import{Q as W}from"./QPage.3e5f7718.js";import{u as T}from"./use-quasar.cd140bb6.js";import{u as V}from"./dataStore.4beba232.js";import{g as k,u as X,q as G}from"./app.4c518291.js";import{R as H,a as J}from"./requestDataAlt.2076ec55.js";import{_ as A}from"./projectSelector.3b7b03b5.js";import{dayjs as Y}from"./dayjs.a8a44880.js";import{N as Z}from"./nameRequestData.2168ef8e.js";import"./use-panel.3e0d3880.js";import"./touch.70a9dd44.js";import"./selection.3fc2c0f7.js";import"./QResizeObserver.0d30fdea.js";import"./rtl.b51694b1.js";import"./localForage.32fec901.js";import"./_commonjsHelpers.a26ce4be.js";import"./useQuerySaver.d29ff9ee.js";import"./api.db3ffd2c.js";import"./index.04bc0a32.js";import"./i18n.60f1f179.js";import"./QTd.807a5208.js";import"./QTable.78ef7d9e.js";import"./QList.8b650d39.js";import"./QMarkupTable.2eb36b75.js";import"./QSelect.3ecc2587.js";import"./QChip.f5597a09.js";import"./QMenu.87ae7483.js";import"./position-engine.8c77df6b.js";import"./use-fullscreen.bd2c7e59.js";import"./QSpinnerGears.5f5235c6.js";import"./QTooltip.1c1c8709.js";import"./workday.74d0f91f.js";import"./syncEmployeeWithWorkday.d1a26127.js";import"./workdayAPI.b2584957.js";import"./dataStore.4971b77b.js";const x=g({props:{},components:{RequestDataTable:H,projectSelector:A},setup(e){const t=T(),u=k(),d=w(null),{getSelectedProject:c}=C(u),{getOpenRequest:p,fetchOpenRequest:a,fetchAllOpenRequest:r}=V(),s=v(()=>c.value?c.value[3]:null),i=v(()=>p(s.value).sort((n,R)=>n[1].$d<R[1].$d?1:-1));async function _(n){t.loading.show(),s.value?await a({projectId:s.value,refresh:n}):await r({refresh:n}),t.loading.hide()}return _(!1),{openRequests:i,projectFilter:d,loadData:_}}}),ee={class:"row items-center"},te={class:"col-12 col-md-4"};function oe(e,t,u,d,c,p){const a=f("projectSelector"),r=f("request-data-table");return b(),y("div",null,[o(Q,{flat:""},{default:l(()=>[o(D,null,{default:l(()=>[q("div",ee,[q("div",te,[o(a,{dense:""})])])]),_:1})]),_:1}),o(r,{requests:e.openRequests,status:"Open",onRefreshData:t[0]||(t[0]=s=>e.loadData(!0))},null,8,["requests"])])}var ae=j(x,[["render",oe]]);const se=g({props:{},components:{RequestDataTableAlt:J,projectSelector:A},setup(e){const t=T(),u=k(),d=w(null),{getSelectedProject:c}=C(u),{getClosedRequest:p,fetchClosedRequest:a,fetchAllClosedRequest:r}=V(),s=v(()=>c.value?c.value[3]:null),i=v(()=>p(s.value).sort((n,R)=>n[1].$d<R[1].$d?1:-1));async function _(n){t.loading.show(),s.value?await a({projectId:s.value,refresh:n}):await r({refresh:n}),t.loading.hide()}return _(),{closedRequests:i,projectFilter:d,loadData:_}}}),re={class:"row items-center"},ne={class:"col-12 col-md-4"};function le(e,t,u,d,c,p){const a=f("projectSelector"),r=f("request-data-table-alt");return b(),y("div",null,[o(Q,{flat:""},{default:l(()=>[o(D,null,{default:l(()=>[q("div",re,[q("div",ne,[o(a,{dense:""})])])]),_:1})]),_:1}),o(r,{requests:e.closedRequests,status:"Completed",onRefreshData:t[0]||(t[0]=s=>e.loadData(!0))},null,8,["requests"])])}var ue=j(se,[["render",le]]);const ce=g({props:{},components:{NameRequestDataTable:Z,projectSelector:A},setup(e){const t=T(),u=k(),{capitalize:d}=z,c=w(null),{userData:p}=X(),{getSelectedProject:a}=C(u),{getNameRequest:r,fetchAllNameRequest:s,removeData:i,fetchNameRequest:_}=V(),n=v(()=>a.value?a.value[3]:null),R=v(()=>r(n.value).sort((m,$)=>m[1].$d<$[1].$d?1:-1));async function O(m){t.loading.show(),n.value?await _({projectId:n.value,refresh:m}):await s({refresh:m}),t.loading.hide()}function B(m){return`${d(m[6].toLowerCase())} ${d(m[7].toLowerCase())}`}async function F(m){t.dialog({title:"Confirm",message:`Are you sure you want to remove ${B(m)} from request# ${m[18]}?`,cancel:!0,persistent:!0}).onOk(async()=>{try{const{data:$}=await G.upsertRecordsXML({to:"bsg4yb4wa",data:[{3:{value:m[3]},11:{value:!0},12:{value:Y().tz("America/Chicago")},13:{value:`${p[35]} ${p[37]}`}}],fieldsToReturn:[15],formatObject:15});i({type:"nameRequest",key:$[0][15][38],item:$[0][15],storageKey:"storageNameRequest"})}catch($){t.notify({type:"negative",message:"Cannot remove name request"}),console.log($)}})}return O(),{nameRequests:R,projectFilter:c,removeName:F,loadData:O}}}),me={class:"row items-center"},de={class:"col-12 col-md-4"};function pe(e,t,u,d,c,p){const a=f("projectSelector"),r=f("name-request-data-table");return b(),y("div",null,[o(Q,{flat:""},{default:l(()=>[o(D,null,{default:l(()=>[q("div",me,[q("div",de,[o(a,{dense:""})])])]),_:1})]),_:1}),o(r,{requests:e.nameRequests,status:"Named",onRemoveName:e.removeName,onRefreshData:t[0]||(t[0]=s=>e.loadData(!0))},null,8,["requests","onRemoveName"])])}var ie=j(ce,[["render",pe]]);const fe=g({name:"Requests",components:{OpenTab:ae,CompleteTab:ue,NamesTab:ie},setup(){const e=E(),t=w(0);function u(){e.push({name:"new-request"})}return{tab:t,addNewRequest:u}}}),_e={class:"q-pa-md"};function qe(e,t,u,d,c,p){const a=f("open-tab"),r=f("names-tab"),s=f("complete-tab");return b(),h(W,{style:{"max-width":"100vw"}},{default:l(()=>[q("div",_e,[o(M,{class:"bg-info text-white shadow-2 rounded-borders"},{default:l(()=>[o(L,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=i=>e.tab=i),"bg-color":"none","indicator-color":"accent",dense:e.$q.screen.lt.md},{default:l(()=>[o(N,{name:0,label:e.$q.screen.gt.xs?"Open Requests":"Open"},null,8,["label"]),e.$can("read","nameRequests")?(b(),h(N,{key:0,name:2,label:e.$q.screen.gt.xs?"Named Requests":"Named"},null,8,["label"])):P("",!0),e.$q.screen.gt.sm?(b(),h(N,{key:1,name:3,label:e.$q.screen.gt.xs?"Completed Requests":"Completed"},null,8,["label"])):P("",!0)]),_:1},8,["modelValue","dense"]),o(U),o(K,{dense:"",color:"accent",icon:"add",label:e.$q.screen.lt.md?"Add New":"Add New Request",onClick:e.addNewRequest},null,8,["label","onClick"])]),_:1}),o(I,{modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=i=>e.tab=i),animated:""},{default:l(()=>[o(S,{name:0},{default:l(()=>[o(a)]),_:1}),o(S,{name:2},{default:l(()=>[o(r)]),_:1}),o(S,{name:3},{default:l(()=>[o(s)]),_:1})]),_:1},8,["modelValue"])])]),_:1})}var ot=j(fe,[["render",qe]]);export{ot as default};
