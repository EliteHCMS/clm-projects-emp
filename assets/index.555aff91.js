import{bT as B,bV as k,r as n,w as I,aT as q,c as x,A as T,B as $,d as a,br as l,cF as N,D as c,cE as P,cG as O,a8 as p,bQ as Y,G as A,ac as G,bW as h,ax as z}from"./index.e8fb2253.js";import{Q as E}from"./QSpace.b7f45cf7.js";import{Q as M}from"./QTooltip.604a832b.js";import{Q as U}from"./QTd.a9c509ec.js";import{u as F}from"./use-quasar.0aa2fc3d.js";import{e as L}from"./export-file.dc78ba05.js";import{I as W}from"./app.00bf1e10.js";import{dayjs as H}from"./dayjs.d1250a8a.js";import{_ as J}from"./projectSelector.e66d4c95.js";import{_ as K}from"./aTable.fd5811e6.js";import"./position-engine.d748a9db.js";import"./selection.1f477e95.js";import"./_commonjsHelpers.a26ce4be.js";import"./localForage.8666a90b.js";import"./api.e92e8aaa.js";import"./index.04bc0a32.js";import"./i18n.2814a62c.js";import"./QSelect.c4b0a406.js";import"./QChip.178232ad.js";import"./QMenu.b4300bfa.js";import"./rtl.b51694b1.js";import"./QTable.1fcb10b7.js";import"./QList.d18fd6ea.js";import"./QMarkupTable.167b6050.js";import"./use-fullscreen.b1caa6d3.js";const X={class:"q-pa-md"},Z={class:"row items-center"},ee={class:"col-12 col-md-3 q-px-sm"},te={class:"col-12 col-md-5 q-px-sm"},Re={__name:"index",setup(ae){const d=F(),Q=B(),f=W(),{fetchRoster:v,fetchAllRosters:_}=f,{getRoster:D,getLoadingState:S,getSelectedProject:r}=k(f),b=n("Roster"),V=n("rosters"),m=n(""),y=n({sortBy:"13",descending:!1,rowsPerPage:150});r.value?v({selectedId:r.value}):_({can:"read"}),I(r,()=>{r.value?v({selectedId:r.value}):_({can:"read"})});const C=n(new Date),R=setInterval(()=>{C.value=new Date},1e3);q(()=>{clearInterval(R)});const u=x(()=>[{name:"id",align:"left",label:"ID",field:"3",sortable:!1},{name:"name",align:"left",label:"Name",field:"298",sortable:!0},{name:"avgDRO",align:"center",label:"AVG DRO",field:"208",sortable:!0},{name:"openRequests",align:"center",label:"Open Request",field:"31",sortable:!0},{name:"action",align:"center",label:"",sortable:!1}]),i=x(()=>D.value(r.value).filter(o=>!0).sort((o,s)=>o[298].localeCompare(s[298]))),j=o=>{Q.push({name:"view-project",params:{id:o[3]}})},g=(o,s,t)=>{let e=s!==void 0?s(o,t):o;return e=e==null?"":String(e),e=e.split('"').join('""'),`"${e}"`},w=()=>{const o=[u.value.map(t=>g(t.label))].concat(i.value.map(t=>u.value.map(e=>g(typeof e.field=="function"?e.field(t):t[e.field===void 0?e.name:e.field],e.format,t)).join(","))).join(`\r
`);L(`${b.value} ${H().format("MM.DD.YYYY")}.csv`,o,"text/csv")!==!0&&d.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})};return(o,s)=>(T(),$("div",X,[a(P,{flat:"",class:"q-pt-none"},{default:l(()=>[a(N,null,{default:l(()=>[c("div",Z,[c("div",ee,[a(J,{can:"read",styleSelection:!0})])])]),_:1})]),_:1}),a(K,{rows:i.value,columns:u.value,pagination:y.value,filter:m.value,title:b.value,separator:"vertical","row-key":"3",loading:p(S)(V.value),downloadButton:!0,onDownload:w},{top:l(()=>[c("div",te,[a(O,{dense:p(d).screen.lt.md,modelValue:m.value,"onUpdate:modelValue":s[0]||(s[0]=t=>m.value=t),label:"Search...",clearable:""},{prepend:l(()=>[a(Y,{name:"search"})]),_:1},8,["dense","modelValue"])]),a(E),c("div",{class:A(["text-dark text-caption text-italic",p(d).screen.lt.md?"offset-xs-5":""])},"(Total: "+G(i.value.length)+")",3),a(h,{flat:"",round:"",color:"primary",icon:"download",disable:i.value.length<1,onClick:w},{default:l(()=>[a(M,{class:"bg-accent text-black shadow-4",offset:[10,10]},{default:l(()=>[z(" Download ")]),_:1})]),_:1},8,["disable"])]),"body-cell-action":l(t=>[a(U,{props:t},{default:l(()=>[a(h,{color:"primary",label:"View Project",onClick:e=>j(t.row),size:".75rem"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination","filter","title","loading"])]))}};export{Re as default};
