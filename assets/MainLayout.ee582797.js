import{l as j,_ as H,B as s,as as r,bt as t,bR as p,d as e,bS as S,at as i,az as V,ae as b,H as U,bT as E,b7 as Q,bU as pe,C as q,F as Y,b6 as G,I as L,r as w,bV as fe,bW as _e,bX as D,w as R,bY as M,aa as n,E as h,bv as A}from"./index.1bdfb1af.js";import{Q as W,a as ve}from"./QHeader.e6a88b71.js";import{Q as ye}from"./QMenu.92ffa49f.js";import{Q as F}from"./QToolbar.7de023f9.js";import{Q as be}from"./QImg.c7a2e95f.js";import{Q as I}from"./QList.756f4e56.js";import{Q as T}from"./QSelect.bc92d132.js";import{Q as ge,a as ke}from"./QDrawer.5d68090f.js";import{Q as he,a as qe}from"./QLayout.b34bded4.js";import{C as K}from"./ClosePopup.edec0437.js";import{Q as we}from"./QBadge.37c64029.js";import{M as Me,Q as Se}from"./MenuSubLink.70e6d3a7.js";import{u as Qe}from"./use-quasar.04742e8f.js";import{u as $e}from"./i18n.8bfbf2a5.js";import{u as Ce,b as Ue,c as Le,q as X}from"./app.b866ce7a.js";import{_ as xe}from"./KioskLogin.5b8156b3.js";import{_ as Be}from"./languageSelector.2f16c0e4.js";import{_ as Ve}from"./version.f0d3b635.js";import{h as Ee}from"./HelpDeskTicket.67818523.js";import"./QResizeObserver.e82f054c.js";import"./position-engine.f90a4f55.js";import"./selection.424f2d7d.js";import"./QChip.4ce28263.js";import"./rtl.b51694b1.js";import"./TouchPan.7148bb93.js";import"./touch.3df10340.js";import"./QSlideTransition.0015346e.js";import"./_commonjsHelpers.a26ce4be.js";import"./dayjs.d9609b5e.js";import"./localForage.34b90606.js";import"./index.04bc0a32.js";import"./vee-validate.esm.21b9ad79.js";import"./array.164cfe36.js";import"./QTooltip.fda9fa23.js";import"./QFile.f5c53857.js";import"./QSpinnerGears.cd899c2e.js";import"./QForm.8d55aca1.js";const Ie=j({name:"MenuLink",props:{title:{type:String,required:!0},caption:{type:String,default:""},to:{type:Object,default:()=>({path:"",exact:!0})},icon:{type:String,default:""},mini:{type:Boolean,default:!1},subMenu:{type:Array,default:null},count:{type:Number,default:null}}});function Te(a,f,$,_,l,v){return s(),r(E,{to:a.to,class:U(["rounded-borders bg-white",{"q-ma-sm":!a.mini,"q-ma-xs":a.mini}]),"active-class":a.mini?"brand-active-menu text-white":"brand-active-menu text-white q-py-md",exact:""},{default:t(()=>[a.icon?(s(),r(p,{key:0,avatar:""},{default:t(()=>[e(S,{name:a.icon},null,8,["name"])]),_:1})):i("",!0),e(p,null,{default:t(()=>[e(T,null,{default:t(()=>[V(b(a.title),1)]),_:1})]),_:1}),a.count?(s(),r(p,{key:1,side:"",top:""},{default:t(()=>[e(we,{color:"primary",label:a.count},null,8,["label"])]),_:1})):i("",!0)]),_:1},8,["to","class","active-class"])}var je=H(Ie,[["render",Te]]);const He=j({name:"MenuExpanded",components:{MenuSubLink:Me},props:{title:{type:String,required:!0},caption:{type:String,default:""},to:{type:Object,default:()=>({path:"",exact:!0})},icon:{type:String,default:""},mini:{type:Boolean,default:!1},subMenu:{type:Array,default:null}}});function ze(a,f,$,_,l,v){const y=Q("MenuSubLink");return s(),r(Se,{icon:a.icon,label:a.title,class:U(["rounded-borders bg-white",{"q-ma-sm":!a.mini,"q-ma-xs":a.mini}]),"active-class":"brand-active-menu text-white",exact:""},{default:t(()=>[e(pe),e(p,null,{default:t(()=>[e(I,null,{default:t(()=>[(s(!0),q(Y,null,G(a.subMenu,u=>(s(),r(y,L({key:u},u,{mini:a.mini}),null,16,["mini"]))),128))]),_:1})]),_:1})]),_:1},8,["icon","label","class"])}var Ne=H(He,[["render",ze]]);const Oe=j({name:"MenuNav",components:{MenuLink:je,MenuExpanded:Ne},props:{title:{type:String,required:!0},caption:{type:String,default:""},to:{type:Object,default:()=>({path:"",exact:!0})},icon:{type:String,default:""},mini:{type:Boolean,default:!1},subMenu:{type:Array,default:null}}});function Pe(a,f,$,_,l,v){const y=Q("MenuLink"),u=Q("MenuExpanded");return s(),q("div",null,[!a.subMenu&&a.to?(s(),r(y,L({key:0},{...a.$props,...a.$attrs},{mini:a.mini}),null,16,["mini"])):a.subMenu&&a.subMenu.length>0?(s(),r(u,L({key:1},{...a.$props,...a.$attrs},{mini:a.mini}),null,16,["mini"])):i("",!0)])}var De=H(Oe,[["render",Pe]]);const Re={key:0,class:"q-mr-sm q-ml-sm",src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo-white.png",alt:"BrandSafway Logo",height:"25"},Ae={key:0},We={key:1},Fe={class:"q-gutter-sm row items-center no-wrap"},Ke={class:"row no-wrap q-pa-md"},Xe={class:"column items-center"},Ye={class:"text-subtitle1 q-mt-md q-mb-xs"},Et={__name:"MainLayout",setup(a){const f=Qe(),{locale:$}=$e(),_=w(!1),l=w(!1),v=w(!1),y=w(!1),u=fe(),g=_e(),k=Ce(),z=Ue(),J=Le(),{getUnReadCount:Z}=D(J),{openWindow:ee,toolbarTitle:te}=z,{getUserType:C}=k,{onKiosk:d,activeMenu:ae,startPageEnabled:N,kioskActive:se,homeButtonEnabled:ne}=D(z),x=w(!1),B=async o=>{await X.checkKioskStatus(o)||(y.value=!0)};if(d.value&&B(!0),g.query&&g.query.office_id){const o=Object.assign({},g.query);delete o.office_id,delete o.qr,u.replace({query:o})}R(se,o=>{!o&&d.value&&B()}),R(()=>g.query,async()=>{if(d.value&&B(!1),g.query.office_id){const o=Object.assign({},g.query);delete o.office_id,o.qr&&(X.checkInUser(),delete o.qr),u.replace({query:o})}});const O=async()=>{d.value&&($.value="en-US"),k.logout().then(()=>{N.value&&d.value?u.replace({name:"start"}):u.replace({name:"login"})})},P=()=>{O()},oe=()=>{l.value===!0&&(v.value=!1)},le=()=>{l.value===!0&&(v.value=!0)},re=()=>{f.screen.gt.sm?(l.value=!l.value,l.value===!0&&(v.value=!0)):_.value=!_.value},ie=o=>{l.value&&(l.value=!1,o.stopPropagation())},ue=o=>{ee(null,{url:"https://www.myworkday.com/brandsafway/wdhelp/helpcenter/create",name:"Workday Help"})},me=async()=>{u.push({name:"settings"})};return(o,m)=>{const ce=Q("router-view"),de=Q("v-idle");return s(),r(he,{view:"hHh lpR fFf"},{default:t(()=>[e(ve,{elevated:""},{default:t(()=>[e(F,{style:{height:"62px"}},{default:t(()=>[e(M,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:re}),n(f).screen.gt.sm?(s(),q("img",Re)):i("",!0),e(W,null,{default:t(()=>[n(f).screen.lt.sm?(s(),q("span",Ae)):(s(),q("span",We,b(n(te)),1))]),_:1}),h("div",Fe,[e(Be,{dense:"",borderless:"",class:"lang-white"}),e(M,{flat:"",dense:"",color:"white"},{default:t(()=>[h("div",null,b(n(k).getUser[35])+" "+b(n(k).getUser[37]),1),e(S,{right:"",size:"2.2em",name:"account_circle"}),e(ye,null,{default:t(()=>[h("div",Ke,[h("div",Xe,[e(S,{right:"",size:"72px",name:"account_circle",class:"q-mr-md"}),h("div",Ye,b(n(k).getUser[35])+" "+b(n(k).getUser[37]),1),A(e(M,{color:"primary",label:o.$t("settings"),push:"",size:"sm",class:"q-mb-xs",onClick:me},null,8,["label"]),[[K]]),A(e(M,{color:"primary",label:o.$t("logout"),push:"",size:"sm",onClick:O},null,8,["label"]),[[K]])])])]),_:1})]),_:1})])]),_:1})]),_:1}),e(ke,{modelValue:_.value,"onUpdate:modelValue":m[1]||(m[1]=c=>_.value=c),side:"left","show-if-above":"",bordered:"",mini:l.value&&v.value,onMouseover:oe,onMouseout:le,onClickCapture:ie,class:"text-primary bg-white"},{default:t(()=>[e(ge,{class:"fit"},{default:t(()=>[n(f).screen.lt.sm?(s(),r(F,{key:0,style:{height:"64px"}},{default:t(()=>[e(W,{class:"items-center"},{default:t(()=>[e(be,{src:"https://cdn.jsdelivr.net/gh/EliteHCMS/assets@latest/public/logo.svg",style:{"max-width":"245px"},fit:"center",class:"q-ml-md"})]),_:1})]),_:1})):i("",!0),e(I,{class:"q-mt-sm"},{default:t(()=>[(s(!0),q(Y,null,G(n(ae),c=>(s(),r(De,L({key:c.title},c,{mini:l.value}),null,16,["mini"]))),128))]),_:1}),n(C)==="Project User"||n(C)==="QuickBase User"?(s(),r(I,{key:1,class:"q-mt-sm"},{default:t(()=>[h("div",null,[n(C)==="Project User"?(s(),r(E,{key:0,class:U(["rounded-borders bg-white",{"q-ma-sm":!l.value,"q-ma-xs":l.value}]),clickable:"",onClick:m[0]||(m[0]=c=>x.value=!0)},{default:t(()=>[e(p,{avatar:""},{default:t(()=>[e(S,{name:"fa-solid fa-circle-info"})]),_:1}),e(p,null,{default:t(()=>[e(T,null,{default:t(()=>[V("Request Support "+b(n(Z)),1)]),_:1})]),_:1})]),_:1},8,["class"])):i("",!0),n(C)==="QuickBase User"?(s(),r(E,{key:1,class:U(["rounded-borders bg-white",{"q-ma-sm":!l.value,"q-ma-xs":l.value}]),clickable:"",onClick:ue},{default:t(()=>[e(p,{avatar:""},{default:t(()=>[e(S,{name:"fa-solid fa-circle-info"})]),_:1}),e(p,null,{default:t(()=>[e(T,null,{default:t(()=>[V("Workday Help")]),_:1})]),_:1})]),_:1},8,["class"])):i("",!0)])]),_:1})):i("",!0)]),_:1})]),_:1},8,["modelValue","mini"]),e(qe,null,{default:t(()=>[e(ce)]),_:1}),n(d)?(s(),r(xe,{key:0,modelValue:y.value,"onUpdate:modelValue":m[2]||(m[2]=c=>y.value=c)},null,8,["modelValue"])):i("",!0),n(d)?(s(),r(de,{key:1,onIdle:P,duration:300,style:{display:"none"}})):i("",!0),n(d)&&n(N)&&n(ne)?(s(),r(M,{key:2,icon:"o_home",onClick:P,class:"z-max home-button-main",size:"xl",ripple:!0})):i("",!0),e(Ve),e(Ee,{modelValue:x.value,"onUpdate:modelValue":m[3]||(m[3]=c=>x.value=c)},null,8,["modelValue"])]),_:1})}}};export{Et as default};
